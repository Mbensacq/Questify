var LD=Object.defineProperty;var VD=(t,e,n)=>e in t?LD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>VD(t,typeof e!="symbol"?e+"":e,n);function FD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function tE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nE={exports:{}},Pf={},rE={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tu=Symbol.for("react.element"),UD=Symbol.for("react.portal"),zD=Symbol.for("react.fragment"),BD=Symbol.for("react.strict_mode"),$D=Symbol.for("react.profiler"),WD=Symbol.for("react.provider"),HD=Symbol.for("react.context"),qD=Symbol.for("react.forward_ref"),GD=Symbol.for("react.suspense"),KD=Symbol.for("react.memo"),QD=Symbol.for("react.lazy"),Ew=Symbol.iterator;function YD(t){return t===null||typeof t!="object"?null:(t=Ew&&t[Ew]||t["@@iterator"],typeof t=="function"?t:null)}var sE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iE=Object.assign,oE={};function La(t,e,n){this.props=t,this.context=e,this.refs=oE,this.updater=n||sE}La.prototype.isReactComponent={};La.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};La.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function aE(){}aE.prototype=La.prototype;function U0(t,e,n){this.props=t,this.context=e,this.refs=oE,this.updater=n||sE}var z0=U0.prototype=new aE;z0.constructor=U0;iE(z0,La.prototype);z0.isPureReactComponent=!0;var Pw=Array.isArray,lE=Object.prototype.hasOwnProperty,B0={current:null},cE={key:!0,ref:!0,__self:!0,__source:!0};function uE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)lE.call(e,r)&&!cE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:tu,type:t,key:i,ref:o,props:s,_owner:B0.current}}function XD(t,e){return{$$typeof:tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $0(t){return typeof t=="object"&&t!==null&&t.$$typeof===tu}function JD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cw=/\/+/g;function cm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?JD(""+t.key):e.toString(36)}function Od(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tu:case UD:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+cm(o,0):r,Pw(s)?(n="",t!=null&&(n=t.replace(Cw,"$&/")+"/"),Od(s,e,n,"",function(c){return c})):s!=null&&($0(s)&&(s=XD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Cw,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Pw(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+cm(i,a);o+=Od(i,e,n,l,s)}else if(l=YD(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+cm(i,a++),o+=Od(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qu(t,e,n){if(t==null)return t;var r=[],s=0;return Od(t,r,"","",function(i){return e.call(n,i,s++)}),r}function ZD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},Ld={transition:null},eM={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:Ld,ReactCurrentOwner:B0};function dE(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:qu,forEach:function(t,e,n){qu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qu(t,function(){e++}),e},toArray:function(t){return qu(t,function(e){return e})||[]},only:function(t){if(!$0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=La;he.Fragment=zD;he.Profiler=$D;he.PureComponent=U0;he.StrictMode=BD;he.Suspense=GD;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eM;he.act=dE;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=iE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=B0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)lE.call(e,l)&&!cE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:tu,type:t.type,key:s,ref:i,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:HD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:WD,_context:t},t.Consumer=t};he.createElement=uE;he.createFactory=function(t){var e=uE.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:qD,render:t}};he.isValidElement=$0;he.lazy=function(t){return{$$typeof:QD,_payload:{_status:-1,_result:t},_init:ZD}};he.memo=function(t,e){return{$$typeof:KD,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Ld.transition;Ld.transition={};try{t()}finally{Ld.transition=e}};he.unstable_act=dE;he.useCallback=function(t,e){return en.current.useCallback(t,e)};he.useContext=function(t){return en.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return en.current.useDeferredValue(t)};he.useEffect=function(t,e){return en.current.useEffect(t,e)};he.useId=function(){return en.current.useId()};he.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return en.current.useMemo(t,e)};he.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};he.useRef=function(t){return en.current.useRef(t)};he.useState=function(t){return en.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return en.current.useTransition()};he.version="18.3.1";rE.exports=he;var D=rE.exports;const hn=tE(D),tM=FD({__proto__:null,default:hn},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nM=D,rM=Symbol.for("react.element"),sM=Symbol.for("react.fragment"),iM=Object.prototype.hasOwnProperty,oM=nM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aM={key:!0,ref:!0,__self:!0,__source:!0};function hE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)iM.call(e,r)&&!aM.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:rM,type:t,key:i,ref:o,props:s,_owner:oM.current}}Pf.Fragment=sM;Pf.jsx=hE;Pf.jsxs=hE;nE.exports=Pf;var f=nE.exports,Ng={},fE={exports:{}},Tn={},pE={exports:{}},mE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,q){var te=U.length;U.push(q);e:for(;0<te;){var Z=te-1>>>1,le=U[Z];if(0<s(le,q))U[Z]=q,U[te]=le,te=Z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var q=U[0],te=U.pop();if(te!==q){U[0]=te;e:for(var Z=0,le=U.length,ye=le>>>1;Z<ye;){var nt=2*(Z+1)-1,mt=U[nt],Ue=nt+1,Sn=U[Ue];if(0>s(mt,te))Ue<le&&0>s(Sn,mt)?(U[Z]=Sn,U[Ue]=te,Z=Ue):(U[Z]=mt,U[nt]=te,Z=nt);else if(Ue<le&&0>s(Sn,te))U[Z]=Sn,U[Ue]=te,Z=Ue;else break e}}return q}function s(U,q){var te=U.sortIndex-q.sortIndex;return te!==0?te:U.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,p=3,m=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(U){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=U)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function C(U){if(v=!1,T(U),!g)if(n(l)!==null)g=!0,$(A);else{var q=n(c);q!==null&&X(C,q.startTime-U)}}function A(U,q){g=!1,v&&(v=!1,w(k),k=-1),m=!0;var te=p;try{for(T(q),h=n(l);h!==null&&(!(h.expirationTime>q)||U&&!N());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,p=h.priorityLevel;var le=Z(h.expirationTime<=q);q=t.unstable_now(),typeof le=="function"?h.callback=le:h===n(l)&&r(l),T(q)}else r(l);h=n(l)}if(h!==null)var ye=!0;else{var nt=n(c);nt!==null&&X(C,nt.startTime-q),ye=!1}return ye}finally{h=null,p=te,m=!1}}var M=!1,S=null,k=-1,E=5,I=-1;function N(){return!(t.unstable_now()-I<E)}function j(){if(S!==null){var U=t.unstable_now();I=U;var q=!0;try{q=S(!0,U)}finally{q?R():(M=!1,S=null)}}else M=!1}var R;if(typeof x=="function")R=function(){x(j)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=j,R=function(){H.postMessage(null)}}else R=function(){_(j,0)};function $(U){S=U,M||(M=!0,R())}function X(U,q){k=_(function(){U(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,$(A))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var te=p;p=q;try{return U()}finally{p=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var te=p;p=U;try{return q()}finally{p=te}},t.unstable_scheduleCallback=function(U,q,te){var Z=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Z+te:Z):te=Z,U){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=te+le,U={id:u++,callback:q,priorityLevel:U,startTime:te,expirationTime:le,sortIndex:-1},te>Z?(U.sortIndex=te,e(c,U),n(l)===null&&U===n(c)&&(v?(w(k),k=-1):v=!0,X(C,te-Z))):(U.sortIndex=le,e(l,U),g||m||(g=!0,$(A))),U},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(U){var q=p;return function(){var te=p;p=q;try{return U.apply(this,arguments)}finally{p=te}}}})(mE);pE.exports=mE;var lM=pE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cM=D,wn=lM;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gE=new Set,fc={};function yo(t,e){ya(t,e),ya(t+"Capture",e)}function ya(t,e){for(fc[t]=e,t=0;t<e.length;t++)gE.add(e[t])}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dg=Object.prototype.hasOwnProperty,uM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Iw={},Aw={};function dM(t){return Dg.call(Aw,t)?!0:Dg.call(Iw,t)?!1:uM.test(t)?Aw[t]=!0:(Iw[t]=!0,!1)}function hM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fM(t,e,n,r){if(e===null||typeof e>"u"||hM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var W0=/[\-:]([a-z])/g;function H0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(W0,H0);Pt[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(W0,H0);Pt[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(W0,H0);Pt[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function q0(t,e,n,r){var s=Pt.hasOwnProperty(e)?Pt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fM(e,n,s,r)&&(n=null),r||s===null?dM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hs=cM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gu=Symbol.for("react.element"),Uo=Symbol.for("react.portal"),zo=Symbol.for("react.fragment"),G0=Symbol.for("react.strict_mode"),Mg=Symbol.for("react.profiler"),yE=Symbol.for("react.provider"),vE=Symbol.for("react.context"),K0=Symbol.for("react.forward_ref"),jg=Symbol.for("react.suspense"),Og=Symbol.for("react.suspense_list"),Q0=Symbol.for("react.memo"),Ss=Symbol.for("react.lazy"),xE=Symbol.for("react.offscreen"),Rw=Symbol.iterator;function ll(t){return t===null||typeof t!="object"?null:(t=Rw&&t[Rw]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,um;function kl(t){if(um===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);um=e&&e[1]||""}return`
`+um+t}var dm=!1;function hm(t,e){if(!t||dm)return"";dm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{dm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?kl(t):""}function pM(t){switch(t.tag){case 5:return kl(t.type);case 16:return kl("Lazy");case 13:return kl("Suspense");case 19:return kl("SuspenseList");case 0:case 2:case 15:return t=hm(t.type,!1),t;case 11:return t=hm(t.type.render,!1),t;case 1:return t=hm(t.type,!0),t;default:return""}}function Lg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zo:return"Fragment";case Uo:return"Portal";case Mg:return"Profiler";case G0:return"StrictMode";case jg:return"Suspense";case Og:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vE:return(t.displayName||"Context")+".Consumer";case yE:return(t._context.displayName||"Context")+".Provider";case K0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q0:return e=t.displayName||null,e!==null?e:Lg(t.type)||"Memo";case Ss:e=t._payload,t=t._init;try{return Lg(t(e))}catch{}}return null}function mM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lg(e);case 8:return e===G0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function si(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _E(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gM(t){var e=_E(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ku(t){t._valueTracker||(t._valueTracker=gM(t))}function wE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_E(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ph(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vg(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Nw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=si(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bE(t,e){e=e.checked,e!=null&&q0(t,"checked",e,!1)}function Fg(t,e){bE(t,e);var n=si(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ug(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ug(t,e.type,si(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ug(t,e,n){(e!=="number"||ph(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sl=Array.isArray;function ra(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+si(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function zg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Sl(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:si(n)}}function TE(t,e){var n=si(e.value),r=si(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qu,SE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qu=Qu||document.createElement("div"),Qu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yM=["Webkit","ms","Moz","O"];Object.keys(Ul).forEach(function(t){yM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ul[e]=Ul[t]})});function EE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ul.hasOwnProperty(t)&&Ul[t]?(""+e).trim():e+"px"}function PE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=EE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var vM=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $g(t,e){if(e){if(vM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Wg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hg=null;function Y0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qg=null,sa=null,ia=null;function Ow(t){if(t=su(t)){if(typeof qg!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Nf(e),qg(t.stateNode,t.type,e))}}function CE(t){sa?ia?ia.push(t):ia=[t]:sa=t}function IE(){if(sa){var t=sa,e=ia;if(ia=sa=null,Ow(t),e)for(t=0;t<e.length;t++)Ow(e[t])}}function AE(t,e){return t(e)}function RE(){}var fm=!1;function NE(t,e,n){if(fm)return t(e,n);fm=!0;try{return AE(t,e,n)}finally{fm=!1,(sa!==null||ia!==null)&&(RE(),IE())}}function mc(t,e){var n=t.stateNode;if(n===null)return null;var r=Nf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Gg=!1;if(ts)try{var cl={};Object.defineProperty(cl,"passive",{get:function(){Gg=!0}}),window.addEventListener("test",cl,cl),window.removeEventListener("test",cl,cl)}catch{Gg=!1}function xM(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var zl=!1,mh=null,gh=!1,Kg=null,_M={onError:function(t){zl=!0,mh=t}};function wM(t,e,n,r,s,i,o,a,l){zl=!1,mh=null,xM.apply(_M,arguments)}function bM(t,e,n,r,s,i,o,a,l){if(wM.apply(this,arguments),zl){if(zl){var c=mh;zl=!1,mh=null}else throw Error(B(198));gh||(gh=!0,Kg=c)}}function vo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lw(t){if(vo(t)!==t)throw Error(B(188))}function TM(t){var e=t.alternate;if(!e){if(e=vo(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Lw(s),t;if(i===r)return Lw(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function ME(t){return t=TM(t),t!==null?jE(t):null}function jE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jE(t);if(e!==null)return e;t=t.sibling}return null}var OE=wn.unstable_scheduleCallback,Vw=wn.unstable_cancelCallback,kM=wn.unstable_shouldYield,SM=wn.unstable_requestPaint,Je=wn.unstable_now,EM=wn.unstable_getCurrentPriorityLevel,X0=wn.unstable_ImmediatePriority,LE=wn.unstable_UserBlockingPriority,yh=wn.unstable_NormalPriority,PM=wn.unstable_LowPriority,VE=wn.unstable_IdlePriority,Cf=null,yr=null;function CM(t){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(Cf,t,void 0,(t.current.flags&128)===128)}catch{}}var Jn=Math.clz32?Math.clz32:RM,IM=Math.log,AM=Math.LN2;function RM(t){return t>>>=0,t===0?32:31-(IM(t)/AM|0)|0}var Yu=64,Xu=4194304;function El(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=El(a):(i&=o,i!==0&&(r=El(i)))}else o=n&~s,o!==0?r=El(o):i!==0&&(r=El(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Jn(e),s=1<<n,r|=t[n],e&=~s;return r}function NM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Jn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=NM(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Qg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function FE(){var t=Yu;return Yu<<=1,!(Yu&4194240)&&(Yu=64),t}function pm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jn(e),t[e]=n}function MM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Jn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function J0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Jn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Pe=0;function UE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zE,Z0,BE,$E,WE,Yg=!1,Ju=[],Ws=null,Hs=null,qs=null,gc=new Map,yc=new Map,Is=[],jM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fw(t,e){switch(t){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":gc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yc.delete(e.pointerId)}}function ul(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=su(e),e!==null&&Z0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function OM(t,e,n,r,s){switch(e){case"focusin":return Ws=ul(Ws,t,e,n,r,s),!0;case"dragenter":return Hs=ul(Hs,t,e,n,r,s),!0;case"mouseover":return qs=ul(qs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return gc.set(i,ul(gc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,yc.set(i,ul(yc.get(i)||null,t,e,n,r,s)),!0}return!1}function HE(t){var e=Bi(t.target);if(e!==null){var n=vo(e);if(n!==null){if(e=n.tag,e===13){if(e=DE(n),e!==null){t.blockedOn=e,WE(t.priority,function(){BE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hg=r,n.target.dispatchEvent(r),Hg=null}else return e=su(n),e!==null&&Z0(e),t.blockedOn=n,!1;e.shift()}return!0}function Uw(t,e,n){Vd(t)&&n.delete(e)}function LM(){Yg=!1,Ws!==null&&Vd(Ws)&&(Ws=null),Hs!==null&&Vd(Hs)&&(Hs=null),qs!==null&&Vd(qs)&&(qs=null),gc.forEach(Uw),yc.forEach(Uw)}function dl(t,e){t.blockedOn===e&&(t.blockedOn=null,Yg||(Yg=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,LM)))}function vc(t){function e(s){return dl(s,t)}if(0<Ju.length){dl(Ju[0],t);for(var n=1;n<Ju.length;n++){var r=Ju[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ws!==null&&dl(Ws,t),Hs!==null&&dl(Hs,t),qs!==null&&dl(qs,t),gc.forEach(e),yc.forEach(e),n=0;n<Is.length;n++)r=Is[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Is.length&&(n=Is[0],n.blockedOn===null);)HE(n),n.blockedOn===null&&Is.shift()}var oa=hs.ReactCurrentBatchConfig,xh=!0;function VM(t,e,n,r){var s=Pe,i=oa.transition;oa.transition=null;try{Pe=1,ev(t,e,n,r)}finally{Pe=s,oa.transition=i}}function FM(t,e,n,r){var s=Pe,i=oa.transition;oa.transition=null;try{Pe=4,ev(t,e,n,r)}finally{Pe=s,oa.transition=i}}function ev(t,e,n,r){if(xh){var s=Xg(t,e,n,r);if(s===null)km(t,e,r,_h,n),Fw(t,r);else if(OM(s,t,e,n,r))r.stopPropagation();else if(Fw(t,r),e&4&&-1<jM.indexOf(t)){for(;s!==null;){var i=su(s);if(i!==null&&zE(i),i=Xg(t,e,n,r),i===null&&km(t,e,r,_h,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else km(t,e,r,null,n)}}var _h=null;function Xg(t,e,n,r){if(_h=null,t=Y0(r),t=Bi(t),t!==null)if(e=vo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _h=t,null}function qE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EM()){case X0:return 1;case LE:return 4;case yh:case PM:return 16;case VE:return 536870912;default:return 16}default:return 16}}var Os=null,tv=null,Fd=null;function GE(){if(Fd)return Fd;var t,e=tv,n=e.length,r,s="value"in Os?Os.value:Os.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Fd=s.slice(t,1<r?1-r:void 0)}function Ud(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zu(){return!0}function zw(){return!1}function kn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zu:zw,this.isPropagationStopped=zw,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zu)},persist:function(){},isPersistent:Zu}),e}var Va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nv=kn(Va),ru=qe({},Va,{view:0,detail:0}),UM=kn(ru),mm,gm,hl,If=qe({},ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hl&&(hl&&t.type==="mousemove"?(mm=t.screenX-hl.screenX,gm=t.screenY-hl.screenY):gm=mm=0,hl=t),mm)},movementY:function(t){return"movementY"in t?t.movementY:gm}}),Bw=kn(If),zM=qe({},If,{dataTransfer:0}),BM=kn(zM),$M=qe({},ru,{relatedTarget:0}),ym=kn($M),WM=qe({},Va,{animationName:0,elapsedTime:0,pseudoElement:0}),HM=kn(WM),qM=qe({},Va,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),GM=kn(qM),KM=qe({},Va,{data:0}),$w=kn(KM),QM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XM[t])?!!e[t]:!1}function rv(){return JM}var ZM=qe({},ru,{key:function(t){if(t.key){var e=QM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ud(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?YM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rv,charCode:function(t){return t.type==="keypress"?Ud(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ud(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ej=kn(ZM),tj=qe({},If,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ww=kn(tj),nj=qe({},ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rv}),rj=kn(nj),sj=qe({},Va,{propertyName:0,elapsedTime:0,pseudoElement:0}),ij=kn(sj),oj=qe({},If,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aj=kn(oj),lj=[9,13,27,32],sv=ts&&"CompositionEvent"in window,Bl=null;ts&&"documentMode"in document&&(Bl=document.documentMode);var cj=ts&&"TextEvent"in window&&!Bl,KE=ts&&(!sv||Bl&&8<Bl&&11>=Bl),Hw=" ",qw=!1;function QE(t,e){switch(t){case"keyup":return lj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bo=!1;function uj(t,e){switch(t){case"compositionend":return YE(e);case"keypress":return e.which!==32?null:(qw=!0,Hw);case"textInput":return t=e.data,t===Hw&&qw?null:t;default:return null}}function dj(t,e){if(Bo)return t==="compositionend"||!sv&&QE(t,e)?(t=GE(),Fd=tv=Os=null,Bo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KE&&e.locale!=="ko"?null:e.data;default:return null}}var hj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hj[t.type]:e==="textarea"}function XE(t,e,n,r){CE(r),e=wh(e,"onChange"),0<e.length&&(n=new nv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $l=null,xc=null;function fj(t){lP(t,0)}function Af(t){var e=Ho(t);if(wE(e))return t}function pj(t,e){if(t==="change")return e}var JE=!1;if(ts){var vm;if(ts){var xm="oninput"in document;if(!xm){var Kw=document.createElement("div");Kw.setAttribute("oninput","return;"),xm=typeof Kw.oninput=="function"}vm=xm}else vm=!1;JE=vm&&(!document.documentMode||9<document.documentMode)}function Qw(){$l&&($l.detachEvent("onpropertychange",ZE),xc=$l=null)}function ZE(t){if(t.propertyName==="value"&&Af(xc)){var e=[];XE(e,xc,t,Y0(t)),NE(fj,e)}}function mj(t,e,n){t==="focusin"?(Qw(),$l=e,xc=n,$l.attachEvent("onpropertychange",ZE)):t==="focusout"&&Qw()}function gj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Af(xc)}function yj(t,e){if(t==="click")return Af(e)}function vj(t,e){if(t==="input"||t==="change")return Af(e)}function xj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tr=typeof Object.is=="function"?Object.is:xj;function _c(t,e){if(tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Dg.call(e,s)||!tr(t[s],e[s]))return!1}return!0}function Yw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xw(t,e){var n=Yw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yw(n)}}function eP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tP(){for(var t=window,e=ph();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ph(t.document)}return e}function iv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _j(t){var e=tP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eP(n.ownerDocument.documentElement,n)){if(r!==null&&iv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Xw(n,i);var o=Xw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wj=ts&&"documentMode"in document&&11>=document.documentMode,$o=null,Jg=null,Wl=null,Zg=!1;function Jw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zg||$o==null||$o!==ph(r)||(r=$o,"selectionStart"in r&&iv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wl&&_c(Wl,r)||(Wl=r,r=wh(Jg,"onSelect"),0<r.length&&(e=new nv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$o)))}function ed(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wo={animationend:ed("Animation","AnimationEnd"),animationiteration:ed("Animation","AnimationIteration"),animationstart:ed("Animation","AnimationStart"),transitionend:ed("Transition","TransitionEnd")},_m={},nP={};ts&&(nP=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function Rf(t){if(_m[t])return _m[t];if(!Wo[t])return t;var e=Wo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nP)return _m[t]=e[n];return t}var rP=Rf("animationend"),sP=Rf("animationiteration"),iP=Rf("animationstart"),oP=Rf("transitionend"),aP=new Map,Zw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(t,e){aP.set(t,e),yo(e,[t])}for(var wm=0;wm<Zw.length;wm++){var bm=Zw[wm],bj=bm.toLowerCase(),Tj=bm[0].toUpperCase()+bm.slice(1);hi(bj,"on"+Tj)}hi(rP,"onAnimationEnd");hi(sP,"onAnimationIteration");hi(iP,"onAnimationStart");hi("dblclick","onDoubleClick");hi("focusin","onFocus");hi("focusout","onBlur");hi(oP,"onTransitionEnd");ya("onMouseEnter",["mouseout","mouseover"]);ya("onMouseLeave",["mouseout","mouseover"]);ya("onPointerEnter",["pointerout","pointerover"]);ya("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pl));function eb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bM(r,e,void 0,t),t.currentTarget=null}function lP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;eb(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;eb(s,a,c),i=l}}}if(gh)throw t=Kg,gh=!1,Kg=null,t}function je(t,e){var n=e[sy];n===void 0&&(n=e[sy]=new Set);var r=t+"__bubble";n.has(r)||(cP(e,t,2,!1),n.add(r))}function Tm(t,e,n){var r=0;e&&(r|=4),cP(n,t,r,e)}var td="_reactListening"+Math.random().toString(36).slice(2);function wc(t){if(!t[td]){t[td]=!0,gE.forEach(function(n){n!=="selectionchange"&&(kj.has(n)||Tm(n,!1,t),Tm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[td]||(e[td]=!0,Tm("selectionchange",!1,e))}}function cP(t,e,n,r){switch(qE(e)){case 1:var s=VM;break;case 4:s=FM;break;default:s=ev}n=s.bind(null,e,n,t),s=void 0,!Gg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function km(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Bi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}NE(function(){var c=i,u=Y0(n),h=[];e:{var p=aP.get(t);if(p!==void 0){var m=nv,g=t;switch(t){case"keypress":if(Ud(n)===0)break e;case"keydown":case"keyup":m=ej;break;case"focusin":g="focus",m=ym;break;case"focusout":g="blur",m=ym;break;case"beforeblur":case"afterblur":m=ym;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Bw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=BM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=rj;break;case rP:case sP:case iP:m=HM;break;case oP:m=ij;break;case"scroll":m=UM;break;case"wheel":m=aj;break;case"copy":case"cut":case"paste":m=GM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ww}var v=(e&4)!==0,_=!v&&t==="scroll",w=v?p!==null?p+"Capture":null:p;v=[];for(var x=c,T;x!==null;){T=x;var C=T.stateNode;if(T.tag===5&&C!==null&&(T=C,w!==null&&(C=mc(x,w),C!=null&&v.push(bc(x,C,T)))),_)break;x=x.return}0<v.length&&(p=new m(p,g,null,n,u),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Hg&&(g=n.relatedTarget||n.fromElement)&&(Bi(g)||g[ns]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?Bi(g):null,g!==null&&(_=vo(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(v=Bw,C="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=Ww,C="onPointerLeave",w="onPointerEnter",x="pointer"),_=m==null?p:Ho(m),T=g==null?p:Ho(g),p=new v(C,x+"leave",m,n,u),p.target=_,p.relatedTarget=T,C=null,Bi(u)===c&&(v=new v(w,x+"enter",g,n,u),v.target=T,v.relatedTarget=_,C=v),_=C,m&&g)t:{for(v=m,w=g,x=0,T=v;T;T=Ro(T))x++;for(T=0,C=w;C;C=Ro(C))T++;for(;0<x-T;)v=Ro(v),x--;for(;0<T-x;)w=Ro(w),T--;for(;x--;){if(v===w||w!==null&&v===w.alternate)break t;v=Ro(v),w=Ro(w)}v=null}else v=null;m!==null&&tb(h,p,m,v,!1),g!==null&&_!==null&&tb(h,_,g,v,!0)}}e:{if(p=c?Ho(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=pj;else if(Gw(p))if(JE)A=vj;else{A=gj;var M=mj}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=yj);if(A&&(A=A(t,c))){XE(h,A,n,u);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Ug(p,"number",p.value)}switch(M=c?Ho(c):window,t){case"focusin":(Gw(M)||M.contentEditable==="true")&&($o=M,Jg=c,Wl=null);break;case"focusout":Wl=Jg=$o=null;break;case"mousedown":Zg=!0;break;case"contextmenu":case"mouseup":case"dragend":Zg=!1,Jw(h,n,u);break;case"selectionchange":if(wj)break;case"keydown":case"keyup":Jw(h,n,u)}var S;if(sv)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bo?QE(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(KE&&n.locale!=="ko"&&(Bo||k!=="onCompositionStart"?k==="onCompositionEnd"&&Bo&&(S=GE()):(Os=u,tv="value"in Os?Os.value:Os.textContent,Bo=!0)),M=wh(c,k),0<M.length&&(k=new $w(k,t,null,n,u),h.push({event:k,listeners:M}),S?k.data=S:(S=YE(n),S!==null&&(k.data=S)))),(S=cj?uj(t,n):dj(t,n))&&(c=wh(c,"onBeforeInput"),0<c.length&&(u=new $w("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=S))}lP(h,e)})}function bc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=mc(t,n),i!=null&&r.unshift(bc(t,i,s)),i=mc(t,e),i!=null&&r.push(bc(t,i,s))),t=t.return}return r}function Ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tb(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=mc(n,i),l!=null&&o.unshift(bc(n,l,a))):s||(l=mc(n,i),l!=null&&o.push(bc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Sj=/\r\n?/g,Ej=/\u0000|\uFFFD/g;function nb(t){return(typeof t=="string"?t:""+t).replace(Sj,`
`).replace(Ej,"")}function nd(t,e,n){if(e=nb(e),nb(t)!==e&&n)throw Error(B(425))}function bh(){}var ey=null,ty=null;function ny(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ry=typeof setTimeout=="function"?setTimeout:void 0,Pj=typeof clearTimeout=="function"?clearTimeout:void 0,rb=typeof Promise=="function"?Promise:void 0,Cj=typeof queueMicrotask=="function"?queueMicrotask:typeof rb<"u"?function(t){return rb.resolve(null).then(t).catch(Ij)}:ry;function Ij(t){setTimeout(function(){throw t})}function Sm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),vc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vc(e)}function Gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fa=Math.random().toString(36).slice(2),hr="__reactFiber$"+Fa,Tc="__reactProps$"+Fa,ns="__reactContainer$"+Fa,sy="__reactEvents$"+Fa,Aj="__reactListeners$"+Fa,Rj="__reactHandles$"+Fa;function Bi(t){var e=t[hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ns]||n[hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sb(t);t!==null;){if(n=t[hr])return n;t=sb(t)}return e}t=n,n=t.parentNode}return null}function su(t){return t=t[hr]||t[ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ho(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Nf(t){return t[Tc]||null}var iy=[],qo=-1;function fi(t){return{current:t}}function Ve(t){0>qo||(t.current=iy[qo],iy[qo]=null,qo--)}function Re(t,e){qo++,iy[qo]=t.current,t.current=e}var ii={},$t=fi(ii),ln=fi(!1),no=ii;function va(t,e){var n=t.type.contextTypes;if(!n)return ii;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function cn(t){return t=t.childContextTypes,t!=null}function Th(){Ve(ln),Ve($t)}function ib(t,e,n){if($t.current!==ii)throw Error(B(168));Re($t,e),Re(ln,n)}function uP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,mM(t)||"Unknown",s));return qe({},n,r)}function kh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ii,no=$t.current,Re($t,t),Re(ln,ln.current),!0}function ob(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=uP(t,e,no),r.__reactInternalMemoizedMergedChildContext=t,Ve(ln),Ve($t),Re($t,t)):Ve(ln),Re(ln,n)}var Vr=null,Df=!1,Em=!1;function dP(t){Vr===null?Vr=[t]:Vr.push(t)}function Nj(t){Df=!0,dP(t)}function pi(){if(!Em&&Vr!==null){Em=!0;var t=0,e=Pe;try{var n=Vr;for(Pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vr=null,Df=!1}catch(s){throw Vr!==null&&(Vr=Vr.slice(t+1)),OE(X0,pi),s}finally{Pe=e,Em=!1}}return null}var Go=[],Ko=0,Sh=null,Eh=0,An=[],Rn=0,ro=null,Br=1,$r="";function Ni(t,e){Go[Ko++]=Eh,Go[Ko++]=Sh,Sh=t,Eh=e}function hP(t,e,n){An[Rn++]=Br,An[Rn++]=$r,An[Rn++]=ro,ro=t;var r=Br;t=$r;var s=32-Jn(r)-1;r&=~(1<<s),n+=1;var i=32-Jn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Br=1<<32-Jn(e)+s|n<<s|r,$r=i+t}else Br=1<<i|n<<s|r,$r=t}function ov(t){t.return!==null&&(Ni(t,1),hP(t,1,0))}function av(t){for(;t===Sh;)Sh=Go[--Ko],Go[Ko]=null,Eh=Go[--Ko],Go[Ko]=null;for(;t===ro;)ro=An[--Rn],An[Rn]=null,$r=An[--Rn],An[Rn]=null,Br=An[--Rn],An[Rn]=null}var _n=null,vn=null,Fe=!1,Qn=null;function fP(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ab(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_n=t,vn=Gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_n=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ro!==null?{id:Br,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_n=t,vn=null,!0):!1;default:return!1}}function oy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ay(t){if(Fe){var e=vn;if(e){var n=e;if(!ab(t,e)){if(oy(t))throw Error(B(418));e=Gs(n.nextSibling);var r=_n;e&&ab(t,e)?fP(r,n):(t.flags=t.flags&-4097|2,Fe=!1,_n=t)}}else{if(oy(t))throw Error(B(418));t.flags=t.flags&-4097|2,Fe=!1,_n=t}}}function lb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_n=t}function rd(t){if(t!==_n)return!1;if(!Fe)return lb(t),Fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ny(t.type,t.memoizedProps)),e&&(e=vn)){if(oy(t))throw pP(),Error(B(418));for(;e;)fP(t,e),e=Gs(e.nextSibling)}if(lb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=Gs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=_n?Gs(t.stateNode.nextSibling):null;return!0}function pP(){for(var t=vn;t;)t=Gs(t.nextSibling)}function xa(){vn=_n=null,Fe=!1}function lv(t){Qn===null?Qn=[t]:Qn.push(t)}var Dj=hs.ReactCurrentBatchConfig;function fl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function sd(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cb(t){var e=t._init;return e(t._payload)}function mP(t){function e(w,x){if(t){var T=w.deletions;T===null?(w.deletions=[x],w.flags|=16):T.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function s(w,x){return w=Xs(w,x),w.index=0,w.sibling=null,w}function i(w,x,T){return w.index=T,t?(T=w.alternate,T!==null?(T=T.index,T<x?(w.flags|=2,x):T):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,x,T,C){return x===null||x.tag!==6?(x=Dm(T,w.mode,C),x.return=w,x):(x=s(x,T),x.return=w,x)}function l(w,x,T,C){var A=T.type;return A===zo?u(w,x,T.props.children,C,T.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ss&&cb(A)===x.type)?(C=s(x,T.props),C.ref=fl(w,x,T),C.return=w,C):(C=Gd(T.type,T.key,T.props,null,w.mode,C),C.ref=fl(w,x,T),C.return=w,C)}function c(w,x,T,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==T.containerInfo||x.stateNode.implementation!==T.implementation?(x=Mm(T,w.mode,C),x.return=w,x):(x=s(x,T.children||[]),x.return=w,x)}function u(w,x,T,C,A){return x===null||x.tag!==7?(x=Xi(T,w.mode,C,A),x.return=w,x):(x=s(x,T),x.return=w,x)}function h(w,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Dm(""+x,w.mode,T),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Gu:return T=Gd(x.type,x.key,x.props,null,w.mode,T),T.ref=fl(w,null,x),T.return=w,T;case Uo:return x=Mm(x,w.mode,T),x.return=w,x;case Ss:var C=x._init;return h(w,C(x._payload),T)}if(Sl(x)||ll(x))return x=Xi(x,w.mode,T,null),x.return=w,x;sd(w,x)}return null}function p(w,x,T,C){var A=x!==null?x.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return A!==null?null:a(w,x,""+T,C);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Gu:return T.key===A?l(w,x,T,C):null;case Uo:return T.key===A?c(w,x,T,C):null;case Ss:return A=T._init,p(w,x,A(T._payload),C)}if(Sl(T)||ll(T))return A!==null?null:u(w,x,T,C,null);sd(w,T)}return null}function m(w,x,T,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return w=w.get(T)||null,a(x,w,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Gu:return w=w.get(C.key===null?T:C.key)||null,l(x,w,C,A);case Uo:return w=w.get(C.key===null?T:C.key)||null,c(x,w,C,A);case Ss:var M=C._init;return m(w,x,T,M(C._payload),A)}if(Sl(C)||ll(C))return w=w.get(T)||null,u(x,w,C,A,null);sd(x,C)}return null}function g(w,x,T,C){for(var A=null,M=null,S=x,k=x=0,E=null;S!==null&&k<T.length;k++){S.index>k?(E=S,S=null):E=S.sibling;var I=p(w,S,T[k],C);if(I===null){S===null&&(S=E);break}t&&S&&I.alternate===null&&e(w,S),x=i(I,x,k),M===null?A=I:M.sibling=I,M=I,S=E}if(k===T.length)return n(w,S),Fe&&Ni(w,k),A;if(S===null){for(;k<T.length;k++)S=h(w,T[k],C),S!==null&&(x=i(S,x,k),M===null?A=S:M.sibling=S,M=S);return Fe&&Ni(w,k),A}for(S=r(w,S);k<T.length;k++)E=m(S,w,k,T[k],C),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?k:E.key),x=i(E,x,k),M===null?A=E:M.sibling=E,M=E);return t&&S.forEach(function(N){return e(w,N)}),Fe&&Ni(w,k),A}function v(w,x,T,C){var A=ll(T);if(typeof A!="function")throw Error(B(150));if(T=A.call(T),T==null)throw Error(B(151));for(var M=A=null,S=x,k=x=0,E=null,I=T.next();S!==null&&!I.done;k++,I=T.next()){S.index>k?(E=S,S=null):E=S.sibling;var N=p(w,S,I.value,C);if(N===null){S===null&&(S=E);break}t&&S&&N.alternate===null&&e(w,S),x=i(N,x,k),M===null?A=N:M.sibling=N,M=N,S=E}if(I.done)return n(w,S),Fe&&Ni(w,k),A;if(S===null){for(;!I.done;k++,I=T.next())I=h(w,I.value,C),I!==null&&(x=i(I,x,k),M===null?A=I:M.sibling=I,M=I);return Fe&&Ni(w,k),A}for(S=r(w,S);!I.done;k++,I=T.next())I=m(S,w,k,I.value,C),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?k:I.key),x=i(I,x,k),M===null?A=I:M.sibling=I,M=I);return t&&S.forEach(function(j){return e(w,j)}),Fe&&Ni(w,k),A}function _(w,x,T,C){if(typeof T=="object"&&T!==null&&T.type===zo&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Gu:e:{for(var A=T.key,M=x;M!==null;){if(M.key===A){if(A=T.type,A===zo){if(M.tag===7){n(w,M.sibling),x=s(M,T.props.children),x.return=w,w=x;break e}}else if(M.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ss&&cb(A)===M.type){n(w,M.sibling),x=s(M,T.props),x.ref=fl(w,M,T),x.return=w,w=x;break e}n(w,M);break}else e(w,M);M=M.sibling}T.type===zo?(x=Xi(T.props.children,w.mode,C,T.key),x.return=w,w=x):(C=Gd(T.type,T.key,T.props,null,w.mode,C),C.ref=fl(w,x,T),C.return=w,w=C)}return o(w);case Uo:e:{for(M=T.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===T.containerInfo&&x.stateNode.implementation===T.implementation){n(w,x.sibling),x=s(x,T.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else e(w,x);x=x.sibling}x=Mm(T,w.mode,C),x.return=w,w=x}return o(w);case Ss:return M=T._init,_(w,x,M(T._payload),C)}if(Sl(T))return g(w,x,T,C);if(ll(T))return v(w,x,T,C);sd(w,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,x!==null&&x.tag===6?(n(w,x.sibling),x=s(x,T),x.return=w,w=x):(n(w,x),x=Dm(T,w.mode,C),x.return=w,w=x),o(w)):n(w,x)}return _}var _a=mP(!0),gP=mP(!1),Ph=fi(null),Ch=null,Qo=null,cv=null;function uv(){cv=Qo=Ch=null}function dv(t){var e=Ph.current;Ve(Ph),t._currentValue=e}function ly(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function aa(t,e){Ch=t,cv=Qo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(cv!==t)if(t={context:t,memoizedValue:e,next:null},Qo===null){if(Ch===null)throw Error(B(308));Qo=t,Ch.dependencies={lanes:0,firstContext:t}}else Qo=Qo.next=t;return e}var $i=null;function hv(t){$i===null?$i=[t]:$i.push(t)}function yP(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,hv(e)):(n.next=s.next,s.next=n),e.interleaved=n,rs(t,r)}function rs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Es=!1;function fv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ks(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,rs(t,n)}return s=r.interleaved,s===null?(e.next=e,hv(r)):(e.next=s.next,s.next=e),r.interleaved=e,rs(t,n)}function zd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,J0(t,n)}}function ub(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ih(t,e,n,r){var s=t.updateQueue;Es=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,u=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(p=e,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(m,h,p);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,p=typeof g=="function"?g.call(m,h,p):g,p==null)break e;h=qe({},h,p);break e;case 2:Es=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=h):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);io|=o,t.lanes=o,t.memoizedState=h}}function db(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var iu={},vr=fi(iu),kc=fi(iu),Sc=fi(iu);function Wi(t){if(t===iu)throw Error(B(174));return t}function pv(t,e){switch(Re(Sc,e),Re(kc,t),Re(vr,iu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bg(e,t)}Ve(vr),Re(vr,e)}function wa(){Ve(vr),Ve(kc),Ve(Sc)}function xP(t){Wi(Sc.current);var e=Wi(vr.current),n=Bg(e,t.type);e!==n&&(Re(kc,t),Re(vr,n))}function mv(t){kc.current===t&&(Ve(vr),Ve(kc))}var ze=fi(0);function Ah(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pm=[];function gv(){for(var t=0;t<Pm.length;t++)Pm[t]._workInProgressVersionPrimary=null;Pm.length=0}var Bd=hs.ReactCurrentDispatcher,Cm=hs.ReactCurrentBatchConfig,so=0,We=null,ct=null,yt=null,Rh=!1,Hl=!1,Ec=0,Mj=0;function Nt(){throw Error(B(321))}function yv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tr(t[n],e[n]))return!1;return!0}function vv(t,e,n,r,s,i){if(so=i,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bd.current=t===null||t.memoizedState===null?Vj:Fj,t=n(r,s),Hl){i=0;do{if(Hl=!1,Ec=0,25<=i)throw Error(B(301));i+=1,yt=ct=null,e.updateQueue=null,Bd.current=Uj,t=n(r,s)}while(Hl)}if(Bd.current=Nh,e=ct!==null&&ct.next!==null,so=0,yt=ct=We=null,Rh=!1,e)throw Error(B(300));return t}function xv(){var t=Ec!==0;return Ec=0,t}function cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?We.memoizedState=yt=t:yt=yt.next=t,yt}function Fn(){if(ct===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=yt===null?We.memoizedState:yt.next;if(e!==null)yt=e,ct=t;else{if(t===null)throw Error(B(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},yt===null?We.memoizedState=yt=t:yt=yt.next=t}return yt}function Pc(t,e){return typeof e=="function"?e(t):e}function Im(t){var e=Fn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=ct,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((so&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,We.lanes|=u,io|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,tr(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,We.lanes|=i,io|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Am(t){var e=Fn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);tr(i,e.memoizedState)||(an=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function _P(){}function wP(t,e){var n=We,r=Fn(),s=e(),i=!tr(r.memoizedState,s);if(i&&(r.memoizedState=s,an=!0),r=r.queue,_v(kP.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,Cc(9,TP.bind(null,n,r,s,e),void 0,null),vt===null)throw Error(B(349));so&30||bP(n,e,s)}return s}function bP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function TP(t,e,n,r){e.value=n,e.getSnapshot=r,SP(e)&&EP(t)}function kP(t,e,n){return n(function(){SP(e)&&EP(t)})}function SP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tr(t,n)}catch{return!0}}function EP(t){var e=rs(t,1);e!==null&&Zn(e,t,1,-1)}function hb(t){var e=cr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pc,lastRenderedState:t},e.queue=t,t=t.dispatch=Lj.bind(null,We,t),[e.memoizedState,t]}function Cc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PP(){return Fn().memoizedState}function $d(t,e,n,r){var s=cr();We.flags|=t,s.memoizedState=Cc(1|e,n,void 0,r===void 0?null:r)}function Mf(t,e,n,r){var s=Fn();r=r===void 0?null:r;var i=void 0;if(ct!==null){var o=ct.memoizedState;if(i=o.destroy,r!==null&&yv(r,o.deps)){s.memoizedState=Cc(e,n,i,r);return}}We.flags|=t,s.memoizedState=Cc(1|e,n,i,r)}function fb(t,e){return $d(8390656,8,t,e)}function _v(t,e){return Mf(2048,8,t,e)}function CP(t,e){return Mf(4,2,t,e)}function IP(t,e){return Mf(4,4,t,e)}function AP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RP(t,e,n){return n=n!=null?n.concat([t]):null,Mf(4,4,AP.bind(null,e,t),n)}function wv(){}function NP(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function DP(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function MP(t,e,n){return so&21?(tr(n,e)||(n=FE(),We.lanes|=n,io|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n)}function jj(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var r=Cm.transition;Cm.transition={};try{t(!1),e()}finally{Pe=n,Cm.transition=r}}function jP(){return Fn().memoizedState}function Oj(t,e,n){var r=Ys(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OP(t))LP(e,n);else if(n=yP(t,e,n,r),n!==null){var s=Xt();Zn(n,t,r,s),VP(n,e,r)}}function Lj(t,e,n){var r=Ys(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OP(t))LP(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,tr(a,o)){var l=e.interleaved;l===null?(s.next=s,hv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=yP(t,e,s,r),n!==null&&(s=Xt(),Zn(n,t,r,s),VP(n,e,r))}}function OP(t){var e=t.alternate;return t===We||e!==null&&e===We}function LP(t,e){Hl=Rh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function VP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,J0(t,n)}}var Nh={readContext:Vn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},Vj={readContext:Vn,useCallback:function(t,e){return cr().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:fb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$d(4194308,4,AP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $d(4194308,4,t,e)},useInsertionEffect:function(t,e){return $d(4,2,t,e)},useMemo:function(t,e){var n=cr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Oj.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=cr();return t={current:t},e.memoizedState=t},useState:hb,useDebugValue:wv,useDeferredValue:function(t){return cr().memoizedState=t},useTransition:function(){var t=hb(!1),e=t[0];return t=jj.bind(null,t[1]),cr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,s=cr();if(Fe){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),vt===null)throw Error(B(349));so&30||bP(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,fb(kP.bind(null,r,i,t),[t]),r.flags|=2048,Cc(9,TP.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=cr(),e=vt.identifierPrefix;if(Fe){var n=$r,r=Br;n=(r&~(1<<32-Jn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ec++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Mj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Fj={readContext:Vn,useCallback:NP,useContext:Vn,useEffect:_v,useImperativeHandle:RP,useInsertionEffect:CP,useLayoutEffect:IP,useMemo:DP,useReducer:Im,useRef:PP,useState:function(){return Im(Pc)},useDebugValue:wv,useDeferredValue:function(t){var e=Fn();return MP(e,ct.memoizedState,t)},useTransition:function(){var t=Im(Pc)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:_P,useSyncExternalStore:wP,useId:jP,unstable_isNewReconciler:!1},Uj={readContext:Vn,useCallback:NP,useContext:Vn,useEffect:_v,useImperativeHandle:RP,useInsertionEffect:CP,useLayoutEffect:IP,useMemo:DP,useReducer:Am,useRef:PP,useState:function(){return Am(Pc)},useDebugValue:wv,useDeferredValue:function(t){var e=Fn();return ct===null?e.memoizedState=t:MP(e,ct.memoizedState,t)},useTransition:function(){var t=Am(Pc)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:_P,useSyncExternalStore:wP,useId:jP,unstable_isNewReconciler:!1};function qn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jf={isMounted:function(t){return(t=t._reactInternals)?vo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),s=Ys(t),i=Yr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ks(t,i,s),e!==null&&(Zn(e,t,s,r),zd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),s=Ys(t),i=Yr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ks(t,i,s),e!==null&&(Zn(e,t,s,r),zd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=Ys(t),s=Yr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ks(t,s,r),e!==null&&(Zn(e,t,r,n),zd(e,t,r))}};function pb(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!_c(n,r)||!_c(s,i):!0}function FP(t,e,n){var r=!1,s=ii,i=e.contextType;return typeof i=="object"&&i!==null?i=Vn(i):(s=cn(e)?no:$t.current,r=e.contextTypes,i=(r=r!=null)?va(t,s):ii),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function mb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jf.enqueueReplaceState(e,e.state,null)}function uy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},fv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vn(i):(i=cn(e)?no:$t.current,s.context=va(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(cy(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&jf.enqueueReplaceState(s,s.state,null),Ih(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ba(t,e){try{var n="",r=e;do n+=pM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Rm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zj=typeof WeakMap=="function"?WeakMap:Map;function UP(t,e,n){n=Yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mh||(Mh=!0,wy=r),dy(t,e)},n}function zP(t,e,n){n=Yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){dy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){dy(t,e),typeof r!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gb(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=tO.bind(null,t,e,n),e.then(t,t))}function yb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vb(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yr(-1,1),e.tag=2,Ks(n,e,1))),n.lanes|=1),t)}var Bj=hs.ReactCurrentOwner,an=!1;function Yt(t,e,n,r){e.child=t===null?gP(e,null,n,r):_a(e,t.child,n,r)}function xb(t,e,n,r,s){n=n.render;var i=e.ref;return aa(e,s),r=vv(t,e,n,r,i,s),n=xv(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ss(t,e,s)):(Fe&&n&&ov(e),e.flags|=1,Yt(t,e,r,s),e.child)}function _b(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Iv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,BP(t,e,i,r,s)):(t=Gd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:_c,n(o,r)&&t.ref===e.ref)return ss(t,e,s)}return e.flags|=1,t=Xs(i,r),t.ref=e.ref,t.return=e,e.child=t}function BP(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(_c(i,r)&&t.ref===e.ref)if(an=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,ss(t,e,s)}return hy(t,e,n,r,s)}function $P(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Xo,gn),gn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(Xo,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Re(Xo,gn),gn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Re(Xo,gn),gn|=r;return Yt(t,e,s,n),e.child}function WP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hy(t,e,n,r,s){var i=cn(n)?no:$t.current;return i=va(e,i),aa(e,s),n=vv(t,e,n,r,i,s),r=xv(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ss(t,e,s)):(Fe&&r&&ov(e),e.flags|=1,Yt(t,e,n,s),e.child)}function wb(t,e,n,r,s){if(cn(n)){var i=!0;kh(e)}else i=!1;if(aa(e,s),e.stateNode===null)Wd(t,e),FP(e,n,r),uy(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Vn(c):(c=cn(n)?no:$t.current,c=va(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&mb(e,o,r,c),Es=!1;var p=e.memoizedState;o.state=p,Ih(e,r,o,s),l=e.memoizedState,a!==r||p!==l||ln.current||Es?(typeof u=="function"&&(cy(e,n,u,r),l=e.memoizedState),(a=Es||pb(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,vP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:qn(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vn(l):(l=cn(n)?no:$t.current,l=va(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&mb(e,o,r,l),Es=!1,p=e.memoizedState,o.state=p,Ih(e,r,o,s);var g=e.memoizedState;a!==h||p!==g||ln.current||Es?(typeof m=="function"&&(cy(e,n,m,r),g=e.memoizedState),(c=Es||pb(e,n,c,r,p,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return fy(t,e,n,r,i,s)}function fy(t,e,n,r,s,i){WP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ob(e,n,!1),ss(t,e,i);r=e.stateNode,Bj.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_a(e,t.child,null,i),e.child=_a(e,null,a,i)):Yt(t,e,a,i),e.memoizedState=r.state,s&&ob(e,n,!0),e.child}function HP(t){var e=t.stateNode;e.pendingContext?ib(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ib(t,e.context,!1),pv(t,e.containerInfo)}function bb(t,e,n,r,s){return xa(),lv(s),e.flags|=256,Yt(t,e,n,r),e.child}var py={dehydrated:null,treeContext:null,retryLane:0};function my(t){return{baseLanes:t,cachePool:null,transitions:null}}function qP(t,e,n){var r=e.pendingProps,s=ze.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Re(ze,s&1),t===null)return ay(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Vf(o,r,0,null),t=Xi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=my(n),e.memoizedState=py,t):bv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return $j(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Xs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Xs(a,i):(i=Xi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?my(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=py,r}return i=t.child,t=i.sibling,r=Xs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bv(t,e){return e=Vf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function id(t,e,n,r){return r!==null&&lv(r),_a(e,t.child,null,n),t=bv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $j(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Rm(Error(B(422))),id(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Vf({mode:"visible",children:r.children},s,0,null),i=Xi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&_a(e,t.child,null,o),e.child.memoizedState=my(o),e.memoizedState=py,i);if(!(e.mode&1))return id(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(B(419)),r=Rm(i,r,void 0),id(t,e,o,r)}if(a=(o&t.childLanes)!==0,an||a){if(r=vt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,rs(t,s),Zn(r,t,s,-1))}return Cv(),r=Rm(Error(B(421))),id(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=nO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,vn=Gs(s.nextSibling),_n=e,Fe=!0,Qn=null,t!==null&&(An[Rn++]=Br,An[Rn++]=$r,An[Rn++]=ro,Br=t.id,$r=t.overflow,ro=e),e=bv(e,r.children),e.flags|=4096,e)}function Tb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ly(t.return,e,n)}function Nm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function GP(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Yt(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tb(t,n,e);else if(t.tag===19)Tb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ah(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Nm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ah(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Nm(e,!0,n,null,i);break;case"together":Nm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ss(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),io|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Xs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Wj(t,e,n){switch(e.tag){case 3:HP(e),xa();break;case 5:xP(e);break;case 1:cn(e.type)&&kh(e);break;case 4:pv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Re(Ph,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?qP(t,e,n):(Re(ze,ze.current&1),t=ss(t,e,n),t!==null?t.sibling:null);Re(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return GP(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,$P(t,e,n)}return ss(t,e,n)}var KP,gy,QP,YP;KP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gy=function(){};QP=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Wi(vr.current);var i=null;switch(n){case"input":s=Vg(t,s),r=Vg(t,r),i=[];break;case"select":s=qe({},s,{value:void 0}),r=qe({},r,{value:void 0}),i=[];break;case"textarea":s=zg(t,s),r=zg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bh)}$g(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(fc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(fc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&je("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};YP=function(t,e,n,r){n!==r&&(e.flags|=4)};function pl(t,e){if(!Fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Hj(t,e,n){var r=e.pendingProps;switch(av(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return cn(e.type)&&Th(),Dt(e),null;case 3:return r=e.stateNode,wa(),Ve(ln),Ve($t),gv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(rd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(ky(Qn),Qn=null))),gy(t,e),Dt(e),null;case 5:mv(e);var s=Wi(Sc.current);if(n=e.type,t!==null&&e.stateNode!=null)QP(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return Dt(e),null}if(t=Wi(vr.current),rd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hr]=e,r[Tc]=i,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<Pl.length;s++)je(Pl[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":Nw(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":Mw(r,i),je("invalid",r)}$g(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&nd(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&nd(r.textContent,a,t),s=["children",""+a]):fc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":Ku(r),Dw(r,i,!0);break;case"textarea":Ku(r),jw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hr]=e,t[Tc]=r,KP(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wg(n,r),n){case"dialog":je("cancel",t),je("close",t),s=r;break;case"iframe":case"object":case"embed":je("load",t),s=r;break;case"video":case"audio":for(s=0;s<Pl.length;s++)je(Pl[s],t);s=r;break;case"source":je("error",t),s=r;break;case"img":case"image":case"link":je("error",t),je("load",t),s=r;break;case"details":je("toggle",t),s=r;break;case"input":Nw(t,r),s=Vg(t,r),je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=qe({},r,{value:void 0}),je("invalid",t);break;case"textarea":Mw(t,r),s=zg(t,r),je("invalid",t);break;default:s=r}$g(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?PE(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&SE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&pc(t,l):typeof l=="number"&&pc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&je("scroll",t):l!=null&&q0(t,i,l,o))}switch(n){case"input":Ku(t),Dw(t,r,!1);break;case"textarea":Ku(t),jw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+si(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ra(t,!!r.multiple,i,!1):r.defaultValue!=null&&ra(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)YP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Wi(Sc.current),Wi(vr.current),rd(e)){if(r=e.stateNode,n=e.memoizedProps,r[hr]=e,(i=r.nodeValue!==n)&&(t=_n,t!==null))switch(t.tag){case 3:nd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hr]=e,e.stateNode=r}return Dt(e),null;case 13:if(Ve(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Fe&&vn!==null&&e.mode&1&&!(e.flags&128))pP(),xa(),e.flags|=98560,i=!1;else if(i=rd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[hr]=e}else xa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),i=!1}else Qn!==null&&(ky(Qn),Qn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?ht===0&&(ht=3):Cv())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return wa(),gy(t,e),t===null&&wc(e.stateNode.containerInfo),Dt(e),null;case 10:return dv(e.type._context),Dt(e),null;case 17:return cn(e.type)&&Th(),Dt(e),null;case 19:if(Ve(ze),i=e.memoizedState,i===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)pl(i,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ah(t),o!==null){for(e.flags|=128,pl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(ze,ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&Je()>Ta&&(e.flags|=128,r=!0,pl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ah(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Fe)return Dt(e),null}else 2*Je()-i.renderingStartTime>Ta&&n!==1073741824&&(e.flags|=128,r=!0,pl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Je(),e.sibling=null,n=ze.current,Re(ze,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return Pv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function qj(t,e){switch(av(e),e.tag){case 1:return cn(e.type)&&Th(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wa(),Ve(ln),Ve($t),gv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mv(e),null;case 13:if(Ve(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));xa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(ze),null;case 4:return wa(),null;case 10:return dv(e.type._context),null;case 22:case 23:return Pv(),null;case 24:return null;default:return null}}var od=!1,Ft=!1,Gj=typeof WeakSet=="function"?WeakSet:Set,K=null;function Yo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function yy(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var kb=!1;function Kj(t,e){if(ey=xh,t=tP(),iv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++u===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ty={focusedElem:t,selectionRange:n},xh=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,_=g.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:qn(e.type,v),_);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(C){Qe(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return g=kb,kb=!1,g}function ql(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yy(e,n,i)}s=s.next}while(s!==r)}}function Of(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function XP(t){var e=t.alternate;e!==null&&(t.alternate=null,XP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hr],delete e[Tc],delete e[sy],delete e[Aj],delete e[Rj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function JP(t){return t.tag===5||t.tag===3||t.tag===4}function Sb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||JP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bh));else if(r!==4&&(t=t.child,t!==null))for(xy(t,e,n),t=t.sibling;t!==null;)xy(t,e,n),t=t.sibling}function _y(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_y(t,e,n),t=t.sibling;t!==null;)_y(t,e,n),t=t.sibling}var bt=null,Kn=!1;function xs(t,e,n){for(n=n.child;n!==null;)ZP(t,e,n),n=n.sibling}function ZP(t,e,n){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(Cf,n)}catch{}switch(n.tag){case 5:Ft||Yo(n,e);case 6:var r=bt,s=Kn;bt=null,xs(t,e,n),bt=r,Kn=s,bt!==null&&(Kn?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(Kn?(t=bt,n=n.stateNode,t.nodeType===8?Sm(t.parentNode,n):t.nodeType===1&&Sm(t,n),vc(t)):Sm(bt,n.stateNode));break;case 4:r=bt,s=Kn,bt=n.stateNode.containerInfo,Kn=!0,xs(t,e,n),bt=r,Kn=s;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yy(n,e,o),s=s.next}while(s!==r)}xs(t,e,n);break;case 1:if(!Ft&&(Yo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qe(n,e,a)}xs(t,e,n);break;case 21:xs(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,xs(t,e,n),Ft=r):xs(t,e,n);break;default:xs(t,e,n)}}function Eb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Gj),e.forEach(function(r){var s=rO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bt=a.stateNode,Kn=!1;break e;case 3:bt=a.stateNode.containerInfo,Kn=!0;break e;case 4:bt=a.stateNode.containerInfo,Kn=!0;break e}a=a.return}if(bt===null)throw Error(B(160));ZP(i,o,s),bt=null,Kn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Qe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eC(e,t),e=e.sibling}function eC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),or(t),r&4){try{ql(3,t,t.return),Of(3,t)}catch(v){Qe(t,t.return,v)}try{ql(5,t,t.return)}catch(v){Qe(t,t.return,v)}}break;case 1:Wn(e,t),or(t),r&512&&n!==null&&Yo(n,n.return);break;case 5:if(Wn(e,t),or(t),r&512&&n!==null&&Yo(n,n.return),t.flags&32){var s=t.stateNode;try{pc(s,"")}catch(v){Qe(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&bE(s,i),Wg(a,o);var c=Wg(a,i);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?PE(s,h):u==="dangerouslySetInnerHTML"?SE(s,h):u==="children"?pc(s,h):q0(s,u,h,c)}switch(a){case"input":Fg(s,i);break;case"textarea":TE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?ra(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?ra(s,!!i.multiple,i.defaultValue,!0):ra(s,!!i.multiple,i.multiple?[]:"",!1))}s[Tc]=i}catch(v){Qe(t,t.return,v)}}break;case 6:if(Wn(e,t),or(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){Qe(t,t.return,v)}}break;case 3:if(Wn(e,t),or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vc(e.containerInfo)}catch(v){Qe(t,t.return,v)}break;case 4:Wn(e,t),or(t);break;case 13:Wn(e,t),or(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Sv=Je())),r&4&&Eb(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(c=Ft)||u,Wn(e,t),Ft=c):Wn(e,t),or(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(K=t,u=t.child;u!==null;){for(h=K=u;K!==null;){switch(p=K,m=p.child,p.tag){case 0:case 11:case 14:case 15:ql(4,p,p.return);break;case 1:Yo(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Qe(r,n,v)}}break;case 5:Yo(p,p.return);break;case 22:if(p.memoizedState!==null){Cb(h);continue}}m!==null?(m.return=p,K=m):Cb(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=EE("display",o))}catch(v){Qe(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Qe(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wn(e,t),or(t),r&4&&Eb(t);break;case 21:break;default:Wn(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(JP(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(pc(s,""),r.flags&=-33);var i=Sb(t);_y(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Sb(t);xy(t,a,o);break;default:throw Error(B(161))}}catch(l){Qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qj(t,e,n){K=t,tC(t)}function tC(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||od;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=od;var c=Ft;if(od=o,(Ft=l)&&!c)for(K=s;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?Ib(s):l!==null?(l.return=o,K=l):Ib(s);for(;i!==null;)K=i,tC(i),i=i.sibling;K=s,od=a,Ft=c}Pb(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):Pb(t)}}function Pb(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Of(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:qn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&db(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}db(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&vc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ft||e.flags&512&&vy(e)}catch(p){Qe(e,e.return,p)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Cb(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Ib(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Of(4,e)}catch(l){Qe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Qe(e,s,l)}}var i=e.return;try{vy(e)}catch(l){Qe(e,i,l)}break;case 5:var o=e.return;try{vy(e)}catch(l){Qe(e,o,l)}}}catch(l){Qe(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var Yj=Math.ceil,Dh=hs.ReactCurrentDispatcher,Tv=hs.ReactCurrentOwner,jn=hs.ReactCurrentBatchConfig,_e=0,vt=null,it=null,St=0,gn=0,Xo=fi(0),ht=0,Ic=null,io=0,Lf=0,kv=0,Gl=null,rn=null,Sv=0,Ta=1/0,Lr=null,Mh=!1,wy=null,Qs=null,ad=!1,Ls=null,jh=0,Kl=0,by=null,Hd=-1,qd=0;function Xt(){return _e&6?Je():Hd!==-1?Hd:Hd=Je()}function Ys(t){return t.mode&1?_e&2&&St!==0?St&-St:Dj.transition!==null?(qd===0&&(qd=FE()),qd):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:qE(t.type)),t):1}function Zn(t,e,n,r){if(50<Kl)throw Kl=0,by=null,Error(B(185));nu(t,n,r),(!(_e&2)||t!==vt)&&(t===vt&&(!(_e&2)&&(Lf|=n),ht===4&&As(t,St)),un(t,r),n===1&&_e===0&&!(e.mode&1)&&(Ta=Je()+500,Df&&pi()))}function un(t,e){var n=t.callbackNode;DM(t,e);var r=vh(t,t===vt?St:0);if(r===0)n!==null&&Vw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vw(n),e===1)t.tag===0?Nj(Ab.bind(null,t)):dP(Ab.bind(null,t)),Cj(function(){!(_e&6)&&pi()}),n=null;else{switch(UE(r)){case 1:n=X0;break;case 4:n=LE;break;case 16:n=yh;break;case 536870912:n=VE;break;default:n=yh}n=cC(n,nC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nC(t,e){if(Hd=-1,qd=0,_e&6)throw Error(B(327));var n=t.callbackNode;if(la()&&t.callbackNode!==n)return null;var r=vh(t,t===vt?St:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Oh(t,r);else{e=r;var s=_e;_e|=2;var i=sC();(vt!==t||St!==e)&&(Lr=null,Ta=Je()+500,Yi(t,e));do try{Zj();break}catch(a){rC(t,a)}while(!0);uv(),Dh.current=i,_e=s,it!==null?e=0:(vt=null,St=0,e=ht)}if(e!==0){if(e===2&&(s=Qg(t),s!==0&&(r=s,e=Ty(t,s))),e===1)throw n=Ic,Yi(t,0),As(t,r),un(t,Je()),n;if(e===6)As(t,r);else{if(s=t.current.alternate,!(r&30)&&!Xj(s)&&(e=Oh(t,r),e===2&&(i=Qg(t),i!==0&&(r=i,e=Ty(t,i))),e===1))throw n=Ic,Yi(t,0),As(t,r),un(t,Je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Di(t,rn,Lr);break;case 3:if(As(t,r),(r&130023424)===r&&(e=Sv+500-Je(),10<e)){if(vh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ry(Di.bind(null,t,rn,Lr),e);break}Di(t,rn,Lr);break;case 4:if(As(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Jn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Yj(r/1960))-r,10<r){t.timeoutHandle=ry(Di.bind(null,t,rn,Lr),r);break}Di(t,rn,Lr);break;case 5:Di(t,rn,Lr);break;default:throw Error(B(329))}}}return un(t,Je()),t.callbackNode===n?nC.bind(null,t):null}function Ty(t,e){var n=Gl;return t.current.memoizedState.isDehydrated&&(Yi(t,e).flags|=256),t=Oh(t,e),t!==2&&(e=rn,rn=n,e!==null&&ky(e)),t}function ky(t){rn===null?rn=t:rn.push.apply(rn,t)}function Xj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!tr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function As(t,e){for(e&=~kv,e&=~Lf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jn(e),r=1<<n;t[n]=-1,e&=~r}}function Ab(t){if(_e&6)throw Error(B(327));la();var e=vh(t,0);if(!(e&1))return un(t,Je()),null;var n=Oh(t,e);if(t.tag!==0&&n===2){var r=Qg(t);r!==0&&(e=r,n=Ty(t,r))}if(n===1)throw n=Ic,Yi(t,0),As(t,e),un(t,Je()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Di(t,rn,Lr),un(t,Je()),null}function Ev(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(Ta=Je()+500,Df&&pi())}}function oo(t){Ls!==null&&Ls.tag===0&&!(_e&6)&&la();var e=_e;_e|=1;var n=jn.transition,r=Pe;try{if(jn.transition=null,Pe=1,t)return t()}finally{Pe=r,jn.transition=n,_e=e,!(_e&6)&&pi()}}function Pv(){gn=Xo.current,Ve(Xo)}function Yi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Pj(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(av(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Th();break;case 3:wa(),Ve(ln),Ve($t),gv();break;case 5:mv(r);break;case 4:wa();break;case 13:Ve(ze);break;case 19:Ve(ze);break;case 10:dv(r.type._context);break;case 22:case 23:Pv()}n=n.return}if(vt=t,it=t=Xs(t.current,null),St=gn=e,ht=0,Ic=null,kv=Lf=io=0,rn=Gl=null,$i!==null){for(e=0;e<$i.length;e++)if(n=$i[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}$i=null}return t}function rC(t,e){do{var n=it;try{if(uv(),Bd.current=Nh,Rh){for(var r=We.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Rh=!1}if(so=0,yt=ct=We=null,Hl=!1,Ec=0,Tv.current=null,n===null||n.return===null){ht=1,Ic=e,it=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=St,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=yb(o);if(m!==null){m.flags&=-257,vb(m,o,a,i,e),m.mode&1&&gb(i,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){gb(i,c,e),Cv();break e}l=Error(B(426))}}else if(Fe&&a.mode&1){var _=yb(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),vb(_,o,a,i,e),lv(ba(l,a));break e}}i=l=ba(l,a),ht!==4&&(ht=2),Gl===null?Gl=[i]:Gl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=UP(i,l,e);ub(i,w);break e;case 1:a=l;var x=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Qs===null||!Qs.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=zP(i,a,e);ub(i,C);break e}}i=i.return}while(i!==null)}oC(n)}catch(A){e=A,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function sC(){var t=Dh.current;return Dh.current=Nh,t===null?Nh:t}function Cv(){(ht===0||ht===3||ht===2)&&(ht=4),vt===null||!(io&268435455)&&!(Lf&268435455)||As(vt,St)}function Oh(t,e){var n=_e;_e|=2;var r=sC();(vt!==t||St!==e)&&(Lr=null,Yi(t,e));do try{Jj();break}catch(s){rC(t,s)}while(!0);if(uv(),_e=n,Dh.current=r,it!==null)throw Error(B(261));return vt=null,St=0,ht}function Jj(){for(;it!==null;)iC(it)}function Zj(){for(;it!==null&&!kM();)iC(it)}function iC(t){var e=lC(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?oC(t):it=e,Tv.current=null}function oC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qj(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,it=null;return}}else if(n=Hj(n,e,gn),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ht===0&&(ht=5)}function Di(t,e,n){var r=Pe,s=jn.transition;try{jn.transition=null,Pe=1,eO(t,e,n,r)}finally{jn.transition=s,Pe=r}return null}function eO(t,e,n,r){do la();while(Ls!==null);if(_e&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(MM(t,i),t===vt&&(it=vt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ad||(ad=!0,cC(yh,function(){return la(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jn.transition,jn.transition=null;var o=Pe;Pe=1;var a=_e;_e|=4,Tv.current=null,Kj(t,n),eC(n,t),_j(ty),xh=!!ey,ty=ey=null,t.current=n,Qj(n),SM(),_e=a,Pe=o,jn.transition=i}else t.current=n;if(ad&&(ad=!1,Ls=t,jh=s),i=t.pendingLanes,i===0&&(Qs=null),CM(n.stateNode),un(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Mh)throw Mh=!1,t=wy,wy=null,t;return jh&1&&t.tag!==0&&la(),i=t.pendingLanes,i&1?t===by?Kl++:(Kl=0,by=t):Kl=0,pi(),null}function la(){if(Ls!==null){var t=UE(jh),e=jn.transition,n=Pe;try{if(jn.transition=null,Pe=16>t?16:t,Ls===null)var r=!1;else{if(t=Ls,Ls=null,jh=0,_e&6)throw Error(B(331));var s=_e;for(_e|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:ql(8,u,i)}var h=u.child;if(h!==null)h.return=u,K=h;else for(;K!==null;){u=K;var p=u.sibling,m=u.return;if(XP(u),u===c){K=null;break}if(p!==null){p.return=m,K=p;break}K=m}}}var g=i.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ql(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,K=w;break e}K=i.return}}var x=t.current;for(K=x;K!==null;){o=K;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,K=T;else e:for(o=x;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Of(9,a)}}catch(A){Qe(a,a.return,A)}if(a===o){K=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,K=C;break e}K=a.return}}if(_e=s,pi(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(Cf,t)}catch{}r=!0}return r}finally{Pe=n,jn.transition=e}}return!1}function Rb(t,e,n){e=ba(n,e),e=UP(t,e,1),t=Ks(t,e,1),e=Xt(),t!==null&&(nu(t,1,e),un(t,e))}function Qe(t,e,n){if(t.tag===3)Rb(t,t,n);else for(;e!==null;){if(e.tag===3){Rb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qs===null||!Qs.has(r))){t=ba(n,t),t=zP(e,t,1),e=Ks(e,t,1),t=Xt(),e!==null&&(nu(e,1,t),un(e,t));break}}e=e.return}}function tO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(St&n)===n&&(ht===4||ht===3&&(St&130023424)===St&&500>Je()-Sv?Yi(t,0):kv|=n),un(t,e)}function aC(t,e){e===0&&(t.mode&1?(e=Xu,Xu<<=1,!(Xu&130023424)&&(Xu=4194304)):e=1);var n=Xt();t=rs(t,e),t!==null&&(nu(t,e,n),un(t,n))}function nO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),aC(t,n)}function rO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),aC(t,n)}var lC;lC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ln.current)an=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return an=!1,Wj(t,e,n);an=!!(t.flags&131072)}else an=!1,Fe&&e.flags&1048576&&hP(e,Eh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wd(t,e),t=e.pendingProps;var s=va(e,$t.current);aa(e,n),s=vv(null,e,r,t,s,n);var i=xv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(r)?(i=!0,kh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,fv(e),s.updater=jf,e.stateNode=s,s._reactInternals=e,uy(e,r,t,n),e=fy(null,e,r,!0,i,n)):(e.tag=0,Fe&&i&&ov(e),Yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=iO(r),t=qn(r,t),s){case 0:e=hy(null,e,r,t,n);break e;case 1:e=wb(null,e,r,t,n);break e;case 11:e=xb(null,e,r,t,n);break e;case 14:e=_b(null,e,r,qn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),hy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),wb(t,e,r,s,n);case 3:e:{if(HP(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,vP(t,e),Ih(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ba(Error(B(423)),e),e=bb(t,e,r,n,s);break e}else if(r!==s){s=ba(Error(B(424)),e),e=bb(t,e,r,n,s);break e}else for(vn=Gs(e.stateNode.containerInfo.firstChild),_n=e,Fe=!0,Qn=null,n=gP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xa(),r===s){e=ss(t,e,n);break e}Yt(t,e,r,n)}e=e.child}return e;case 5:return xP(e),t===null&&ay(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ny(r,s)?o=null:i!==null&&ny(r,i)&&(e.flags|=32),WP(t,e),Yt(t,e,o,n),e.child;case 6:return t===null&&ay(e),null;case 13:return qP(t,e,n);case 4:return pv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_a(e,null,r,n):Yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),xb(t,e,r,s,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Re(Ph,r._currentValue),r._currentValue=o,i!==null)if(tr(i.value,o)){if(i.children===s.children&&!ln.current){e=ss(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Yr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),ly(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ly(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,aa(e,n),s=Vn(s),r=r(s),e.flags|=1,Yt(t,e,r,n),e.child;case 14:return r=e.type,s=qn(r,e.pendingProps),s=qn(r.type,s),_b(t,e,r,s,n);case 15:return BP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),Wd(t,e),e.tag=1,cn(r)?(t=!0,kh(e)):t=!1,aa(e,n),FP(e,r,s),uy(e,r,s,n),fy(null,e,r,!0,t,n);case 19:return GP(t,e,n);case 22:return $P(t,e,n)}throw Error(B(156,e.tag))};function cC(t,e){return OE(t,e)}function sO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,r){return new sO(t,e,n,r)}function Iv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iO(t){if(typeof t=="function")return Iv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===K0)return 11;if(t===Q0)return 14}return 2}function Xs(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Iv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zo:return Xi(n.children,s,i,e);case G0:o=8,s|=8;break;case Mg:return t=Dn(12,n,e,s|2),t.elementType=Mg,t.lanes=i,t;case jg:return t=Dn(13,n,e,s),t.elementType=jg,t.lanes=i,t;case Og:return t=Dn(19,n,e,s),t.elementType=Og,t.lanes=i,t;case xE:return Vf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yE:o=10;break e;case vE:o=9;break e;case K0:o=11;break e;case Q0:o=14;break e;case Ss:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Dn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Xi(t,e,n,r){return t=Dn(7,t,r,e),t.lanes=n,t}function Vf(t,e,n,r){return t=Dn(22,t,r,e),t.elementType=xE,t.lanes=n,t.stateNode={isHidden:!1},t}function Dm(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function Mm(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pm(0),this.expirationTimes=pm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Av(t,e,n,r,s,i,o,a,l){return t=new oO(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Dn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fv(i),t}function aO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function uC(t){if(!t)return ii;t=t._reactInternals;e:{if(vo(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(cn(n))return uP(t,n,e)}return e}function dC(t,e,n,r,s,i,o,a,l){return t=Av(n,r,!0,t,s,i,o,a,l),t.context=uC(null),n=t.current,r=Xt(),s=Ys(n),i=Yr(r,s),i.callback=e??null,Ks(n,i,s),t.current.lanes=s,nu(t,s,r),un(t,r),t}function Ff(t,e,n,r){var s=e.current,i=Xt(),o=Ys(s);return n=uC(n),e.context===null?e.context=n:e.pendingContext=n,e=Yr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ks(s,e,o),t!==null&&(Zn(t,s,o,i),zd(t,s,o)),o}function Lh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rv(t,e){Nb(t,e),(t=t.alternate)&&Nb(t,e)}function lO(){return null}var hC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nv(t){this._internalRoot=t}Uf.prototype.render=Nv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Ff(t,e,null,null)};Uf.prototype.unmount=Nv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oo(function(){Ff(null,t,null,null)}),e[ns]=null}};function Uf(t){this._internalRoot=t}Uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=$E();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Is.length&&e!==0&&e<Is[n].priority;n++);Is.splice(n,0,t),n===0&&HE(t)}};function Dv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Db(){}function cO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Lh(o);i.call(c)}}var o=dC(e,r,t,0,null,!1,!1,"",Db);return t._reactRootContainer=o,t[ns]=o.current,wc(t.nodeType===8?t.parentNode:t),oo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Lh(l);a.call(c)}}var l=Av(t,0,!1,null,null,!1,!1,"",Db);return t._reactRootContainer=l,t[ns]=l.current,wc(t.nodeType===8?t.parentNode:t),oo(function(){Ff(e,l,n,r)}),l}function Bf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Lh(o);a.call(l)}}Ff(e,o,t,s)}else o=cO(n,e,t,s,r);return Lh(o)}zE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=El(e.pendingLanes);n!==0&&(J0(e,n|1),un(e,Je()),!(_e&6)&&(Ta=Je()+500,pi()))}break;case 13:oo(function(){var r=rs(t,1);if(r!==null){var s=Xt();Zn(r,t,1,s)}}),Rv(t,1)}};Z0=function(t){if(t.tag===13){var e=rs(t,134217728);if(e!==null){var n=Xt();Zn(e,t,134217728,n)}Rv(t,134217728)}};BE=function(t){if(t.tag===13){var e=Ys(t),n=rs(t,e);if(n!==null){var r=Xt();Zn(n,t,e,r)}Rv(t,e)}};$E=function(){return Pe};WE=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};qg=function(t,e,n){switch(e){case"input":if(Fg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Nf(r);if(!s)throw Error(B(90));wE(r),Fg(r,s)}}}break;case"textarea":TE(t,n);break;case"select":e=n.value,e!=null&&ra(t,!!n.multiple,e,!1)}};AE=Ev;RE=oo;var uO={usingClientEntryPoint:!1,Events:[su,Ho,Nf,CE,IE,Ev]},ml={findFiberByHostInstance:Bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dO={bundleType:ml.bundleType,version:ml.version,rendererPackageName:ml.rendererPackageName,rendererConfig:ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ME(t),t===null?null:t.stateNode},findFiberByHostInstance:ml.findFiberByHostInstance||lO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{Cf=ld.inject(dO),yr=ld}catch{}}Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uO;Tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dv(e))throw Error(B(200));return aO(t,e,null,n)};Tn.createRoot=function(t,e){if(!Dv(t))throw Error(B(299));var n=!1,r="",s=hC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Av(t,1,!1,null,null,n,!1,r,s),t[ns]=e.current,wc(t.nodeType===8?t.parentNode:t),new Nv(e)};Tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=ME(e),t=t===null?null:t.stateNode,t};Tn.flushSync=function(t){return oo(t)};Tn.hydrate=function(t,e,n){if(!zf(e))throw Error(B(200));return Bf(null,t,e,!0,n)};Tn.hydrateRoot=function(t,e,n){if(!Dv(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=hC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dC(e,null,t,1,n??null,s,!1,i,o),t[ns]=e.current,wc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Uf(e)};Tn.render=function(t,e,n){if(!zf(e))throw Error(B(200));return Bf(null,t,e,!1,n)};Tn.unmountComponentAtNode=function(t){if(!zf(t))throw Error(B(40));return t._reactRootContainer?(oo(function(){Bf(null,null,t,!1,function(){t._reactRootContainer=null,t[ns]=null})}),!0):!1};Tn.unstable_batchedUpdates=Ev;Tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zf(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Bf(t,e,n,!1,r)};Tn.version="18.3.1-next-f1338f8080-20240426";function fC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fC)}catch(t){console.error(t)}}fC(),fE.exports=Tn;var hO=fE.exports,Mb=hO;Ng.createRoot=Mb.createRoot,Ng.hydrateRoot=Mb.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ac(){return Ac=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ac.apply(this,arguments)}var Vs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Vs||(Vs={}));const jb="popstate";function fO(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=xo(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Sy("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Vh(i))}function r(s,i){$f(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return mO(e,n,r,t)}function He(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $f(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pO(){return Math.random().toString(36).substr(2,8)}function Ob(t,e){return{usr:t.state,key:t.key,idx:e}}function Sy(t,e,n,r){return n===void 0&&(n=null),Ac({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xo(e):e,{state:n,key:e&&e.key||r||pO()})}function Vh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function mO(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Vs.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ac({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Vs.Pop;let _=u(),w=_==null?null:_-c;c=_,l&&l({action:a,location:v.location,delta:w})}function p(_,w){a=Vs.Push;let x=Sy(v.location,_,w);n&&n(x,_),c=u()+1;let T=Ob(x,c),C=v.createHref(x);try{o.pushState(T,"",C)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(C)}i&&l&&l({action:a,location:v.location,delta:1})}function m(_,w){a=Vs.Replace;let x=Sy(v.location,_,w);n&&n(x,_),c=u();let T=Ob(x,c),C=v.createHref(x);o.replaceState(T,"",C),i&&l&&l({action:a,location:v.location,delta:0})}function g(_){let w=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof _=="string"?_:Vh(_);return x=x.replace(/ $/,"%20"),He(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let v={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(jb,h),l=_,()=>{s.removeEventListener(jb,h),l=null}},createHref(_){return e(s,_)},createURL:g,encodeLocation(_){let w=g(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:m,go(_){return o.go(_)}};return v}var Lb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lb||(Lb={}));function gO(t,e,n){return n===void 0&&(n="/"),yO(t,e,n)}function yO(t,e,n,r){let s=typeof e=="string"?xo(e):e,i=ka(s.pathname||"/",n);if(i==null)return null;let o=pC(t);vO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=IO(i);a=PO(o[l],c)}return a}function pC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(He(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Js([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(He(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),pC(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:SO(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of mC(i.path))s(i,o,l)}),e}function mC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=mC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function vO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:EO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const xO=/^:[\w-]+$/,_O=3,wO=2,bO=1,TO=10,kO=-2,Vb=t=>t==="*";function SO(t,e){let n=t.split("/"),r=n.length;return n.some(Vb)&&(r+=kO),e&&(r+=wO),n.filter(s=>!Vb(s)).reduce((s,i)=>s+(xO.test(i)?_O:i===""?bO:TO),r)}function EO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function PO(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=Ey({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Js([i,h.pathname]),pathnameBase:MO(Js([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Js([i,h.pathnameBase]))}return o}function Ey(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CO(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let v=a[h]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[h];return m&&!g?c[p]=void 0:c[p]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function CO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$f(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function IO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $f(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ka(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const AO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RO=t=>AO.test(t);function NO(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?xo(t):t,i;if(n)if(RO(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),$f(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Fb(n.substring(1),"/"):i=Fb(n,e)}else i=e;return{pathname:i,search:jO(r),hash:OO(s)}}function Fb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function jm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mv(t,e){let n=DO(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=xo(t):(s=Ac({},t),He(!s.pathname||!s.pathname.includes("?"),jm("?","pathname","search",s)),He(!s.pathname||!s.pathname.includes("#"),jm("#","pathname","hash",s)),He(!s.search||!s.search.includes("#"),jm("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=NO(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Js=t=>t.join("/").replace(/\/\/+/g,"/"),MO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,OO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function LO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gC=["post","put","patch","delete"];new Set(gC);const VO=["get",...gC];new Set(VO);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rc(){return Rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rc.apply(this,arguments)}const Wf=D.createContext(null),yC=D.createContext(null),fs=D.createContext(null),Hf=D.createContext(null),ps=D.createContext({outlet:null,matches:[],isDataRoute:!1}),vC=D.createContext(null);function FO(t,e){let{relative:n}=e===void 0?{}:e;Ua()||He(!1);let{basename:r,navigator:s}=D.useContext(fs),{hash:i,pathname:o,search:a}=qf(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Js([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Ua(){return D.useContext(Hf)!=null}function mi(){return Ua()||He(!1),D.useContext(Hf).location}function xC(t){D.useContext(fs).static||D.useLayoutEffect(t)}function _C(){let{isDataRoute:t}=D.useContext(ps);return t?eL():UO()}function UO(){Ua()||He(!1);let t=D.useContext(Wf),{basename:e,future:n,navigator:r}=D.useContext(fs),{matches:s}=D.useContext(ps),{pathname:i}=mi(),o=JSON.stringify(Mv(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return xC(()=>{a.current=!0}),D.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=jv(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Js([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,i,t])}const zO=D.createContext(null);function BO(t){let e=D.useContext(ps).outlet;return e&&D.createElement(zO.Provider,{value:t},e)}function qf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(fs),{matches:s}=D.useContext(ps),{pathname:i}=mi(),o=JSON.stringify(Mv(s,r.v7_relativeSplatPath));return D.useMemo(()=>jv(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function $O(t,e){return WO(t,e)}function WO(t,e,n,r){Ua()||He(!1);let{navigator:s}=D.useContext(fs),{matches:i}=D.useContext(ps),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=mi(),u;if(e){var h;let _=typeof e=="string"?xo(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||He(!1),u=_}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let g=gO(t,{pathname:m}),v=QO(g&&g.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Js([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Js([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&v?D.createElement(Hf.Provider,{value:{location:Rc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Vs.Pop}},v):v}function HO(){let t=ZO(),e=LO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const qO=D.createElement(HO,null);class GO extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(ps.Provider,{value:this.props.routeContext},D.createElement(vC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KO(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(Wf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(ps.Provider,{value:e},r)}function QO(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||He(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:p,errors:m}=n,g=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,p)=>{let m,g=!1,v=null,_=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||qO,l&&(c<0&&p===0?(tL("route-fallback"),g=!0,_=null):c===p&&(g=!0,_=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),x=()=>{let T;return m?T=v:g?T=_:h.route.Component?T=D.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=u,D.createElement(KO,{match:h,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:T})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?D.createElement(GO,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var wC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wC||{}),bC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bC||{});function YO(t){let e=D.useContext(Wf);return e||He(!1),e}function XO(t){let e=D.useContext(yC);return e||He(!1),e}function JO(t){let e=D.useContext(ps);return e||He(!1),e}function TC(t){let e=JO(),n=e.matches[e.matches.length-1];return n.route.id||He(!1),n.route.id}function ZO(){var t;let e=D.useContext(vC),n=XO(),r=TC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function eL(){let{router:t}=YO(wC.UseNavigateStable),e=TC(bC.UseNavigateStable),n=D.useRef(!1);return xC(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Rc({fromRouteId:e},i)))},[t,e])}const Ub={};function tL(t,e,n){Ub[t]||(Ub[t]=!0)}function nL(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Py(t){let{to:e,replace:n,state:r,relative:s}=t;Ua()||He(!1);let{future:i,static:o}=D.useContext(fs),{matches:a}=D.useContext(ps),{pathname:l}=mi(),c=_C(),u=jv(e,Mv(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(u);return D.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function rL(t){return BO(t.context)}function Hn(t){He(!1)}function sL(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Vs.Pop,navigator:i,static:o=!1,future:a}=t;Ua()&&He(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:i,static:o,future:Rc({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=xo(r));let{pathname:u="/",search:h="",hash:p="",state:m=null,key:g="default"}=r,v=D.useMemo(()=>{let _=ka(u,l);return _==null?null:{location:{pathname:_,search:h,hash:p,state:m,key:g},navigationType:s}},[l,u,h,p,m,g,s]);return v==null?null:D.createElement(fs.Provider,{value:c},D.createElement(Hf.Provider,{children:n,value:v}))}function iL(t){let{children:e,location:n}=t;return $O(Cy(e),n)}new Promise(()=>{});function Cy(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,Cy(r.props.children,i));return}r.type!==Hn&&He(!1),!r.props.index||!r.props.children||He(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Cy(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fh(){return Fh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fh.apply(this,arguments)}function kC(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function oL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aL(t,e){return t.button===0&&(!e||e==="_self")&&!oL(t)}const lL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cL=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],uL="6";try{window.__reactRouterVersion=uL}catch{}const dL=D.createContext({isTransitioning:!1}),hL="startTransition",zb=tM[hL];function fL(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=fO({window:s,v5Compat:!0}));let o=i.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=D.useCallback(h=>{c&&zb?zb(()=>l(h)):l(h)},[l,c]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>nL(r),[r]),D.createElement(sL,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const pL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ts=D.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,p=kC(e,lL),{basename:m}=D.useContext(fs),g,v=!1;if(typeof c=="string"&&mL.test(c)&&(g=c,pL))try{let T=new URL(window.location.href),C=c.startsWith("//")?new URL(T.protocol+c):new URL(c),A=ka(C.pathname,m);C.origin===T.origin&&A!=null?c=A+C.search+C.hash:v=!0}catch{}let _=FO(c,{relative:s}),w=yL(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function x(T){r&&r(T),T.defaultPrevented||w(T)}return D.createElement("a",Fh({},p,{href:g||_,onClick:v||i?r:x,ref:n,target:l}))}),Iy=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,h=kC(e,cL),p=qf(l,{relative:h.relative}),m=mi(),g=D.useContext(yC),{navigator:v,basename:_}=D.useContext(fs),w=g!=null&&vL(p)&&c===!0,x=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,T=m.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;s||(T=T.toLowerCase(),C=C?C.toLowerCase():null,x=x.toLowerCase()),C&&_&&(C=ka(C,_)||C);const A=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let M=T===x||!o&&T.startsWith(x)&&T.charAt(A)==="/",S=C!=null&&(C===x||!o&&C.startsWith(x)&&C.charAt(x.length)==="/"),k={isActive:M,isPending:S,isTransitioning:w},E=M?r:void 0,I;typeof i=="function"?I=i(k):I=[i,M?"active":null,S?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(k):a;return D.createElement(Ts,Fh({},h,{"aria-current":E,className:I,ref:n,style:N,to:l,viewTransition:c}),typeof u=="function"?u(k):u)});var Ay;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ay||(Ay={}));var Bb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Bb||(Bb={}));function gL(t){let e=D.useContext(Wf);return e||He(!1),e}function yL(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=_C(),c=mi(),u=qf(t,{relative:o});return D.useCallback(h=>{if(aL(h,n)){h.preventDefault();let p=r!==void 0?r:Vh(c)===Vh(u);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}function vL(t,e){e===void 0&&(e={});let n=D.useContext(dL);n==null&&He(!1);let{basename:r}=gL(Ay.useViewTransitionState),s=qf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=ka(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ka(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ey(s.pathname,o)!=null||Ey(s.pathname,i)!=null}let xL={data:""},_L=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||xL},wL=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,bL=/\/\*[^]*?\*\/|  +/g,$b=/\n+/g,Rs=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?Rs(o,i):i+"{"+Rs(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=Rs(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Rs.p?Rs.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Dr={},SC=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+SC(t[n]);return e}return t},TL=(t,e,n,r,s)=>{let i=SC(t),o=Dr[i]||(Dr[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!Dr[o]){let l=i!==t?t:(c=>{let u,h,p=[{}];for(;u=wL.exec(c.replace(bL,""));)u[4]?p.shift():u[3]?(h=u[3].replace($b," ").trim(),p.unshift(p[0][h]=p[0][h]||{})):p[0][u[1]]=u[2].replace($b," ").trim();return p[0]})(t);Dr[o]=Rs(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Dr.g?Dr.g:null;return n&&(Dr.g=Dr[o]),((l,c,u,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Dr[o],e,r,a),o},kL=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Rs(a,""):a===!1?"":a}return r+s+(o??"")},"");function Gf(t){let e=this||{},n=t.call?t(e.p):t;return TL(n.unshift?n.raw?kL(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,_L(e.target),e.g,e.o,e.k)}let EC,Ry,Ny;Gf.bind({g:1});let is=Gf.bind({k:1});function SL(t,e,n,r){Rs.p=e,EC=t,Ry=n,Ny=r}function gi(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:Ry&&Ry()},a),n.o=/ *go\d+/.test(l),a.className=Gf.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),Ny&&c[0]&&Ny(a),EC(c,a)}return s}}var EL=t=>typeof t=="function",Uh=(t,e)=>EL(t)?t(e):t,PL=(()=>{let t=0;return()=>(++t).toString()})(),PC=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),CL=20,Ov="default",CC=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return CC(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Kd=[],IC={toasts:[],pausedAt:void 0,settings:{toastLimit:CL}},gr={},AC=(t,e=Ov)=>{gr[e]=CC(gr[e]||IC,t),Kd.forEach(([n,r])=>{n===e&&r(gr[e])})},RC=t=>Object.keys(gr).forEach(e=>AC(t,e)),IL=t=>Object.keys(gr).find(e=>gr[e].toasts.some(n=>n.id===t)),Kf=(t=Ov)=>e=>{AC(e,t)},AL={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},RL=(t={},e=Ov)=>{let[n,r]=D.useState(gr[e]||IC),s=D.useRef(gr[e]);D.useEffect(()=>(s.current!==gr[e]&&r(gr[e]),Kd.push([e,r]),()=>{let o=Kd.findIndex(([a])=>a===e);o>-1&&Kd.splice(o,1)}),[e]);let i=n.toasts.map(o=>{var a,l,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((a=t[o.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((l=t[o.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||AL[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...n,toasts:i}},NL=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||PL()}),ou=t=>(e,n)=>{let r=NL(e,t,n);return Kf(r.toasterId||IL(r.id))({type:2,toast:r}),r.id},ut=(t,e)=>ou("blank")(t,e);ut.error=ou("error");ut.success=ou("success");ut.loading=ou("loading");ut.custom=ou("custom");ut.dismiss=(t,e)=>{let n={type:3,toastId:t};e?Kf(e)(n):RC(n)};ut.dismissAll=t=>ut.dismiss(void 0,t);ut.remove=(t,e)=>{let n={type:4,toastId:t};e?Kf(e)(n):RC(n)};ut.removeAll=t=>ut.remove(void 0,t);ut.promise=(t,e,n)=>{let r=ut.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Uh(e.success,s):void 0;return i?ut.success(i,{id:r,...n,...n==null?void 0:n.success}):ut.dismiss(r),s}).catch(s=>{let i=e.error?Uh(e.error,s):void 0;i?ut.error(i,{id:r,...n,...n==null?void 0:n.error}):ut.dismiss(r)}),t};var DL=1e3,ML=(t,e="default")=>{let{toasts:n,pausedAt:r}=RL(t,e),s=D.useRef(new Map).current,i=D.useCallback((h,p=DL)=>{if(s.has(h))return;let m=setTimeout(()=>{s.delete(h),o({type:4,toastId:h})},p);s.set(h,m)},[]);D.useEffect(()=>{if(r)return;let h=Date.now(),p=n.map(m=>{if(m.duration===1/0)return;let g=(m.duration||0)+m.pauseDuration-(h-m.createdAt);if(g<0){m.visible&&ut.dismiss(m.id);return}return setTimeout(()=>ut.dismiss(m.id,e),g)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[n,r,e]);let o=D.useCallback(Kf(e),[e]),a=D.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=D.useCallback((h,p)=>{o({type:1,toast:{id:h,height:p}})},[o]),c=D.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),u=D.useCallback((h,p)=>{let{reverseOrder:m=!1,gutter:g=8,defaultPosition:v}=p||{},_=n.filter(T=>(T.position||v)===(h.position||v)&&T.height),w=_.findIndex(T=>T.id===h.id),x=_.filter((T,C)=>C<w&&T.visible).length;return _.filter(T=>T.visible).slice(...m?[x+1]:[0,x]).reduce((T,C)=>T+(C.height||0)+g,0)},[n]);return D.useEffect(()=>{n.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let p=s.get(h.id);p&&(clearTimeout(p),s.delete(h.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},jL=is`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,OL=is`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,LL=is`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,VL=gi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jL} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${OL} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${LL} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,FL=is`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,UL=gi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${FL} 1s linear infinite;
`,zL=is`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,BL=is`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,$L=gi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zL} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${BL} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,WL=gi("div")`
  position: absolute;
`,HL=gi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,qL=is`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,GL=gi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${qL} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,KL=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?D.createElement(GL,null,e):e:n==="blank"?null:D.createElement(HL,null,D.createElement(UL,{...r}),n!=="loading"&&D.createElement(WL,null,n==="error"?D.createElement(VL,{...r}):D.createElement($L,{...r})))},QL=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,YL=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,XL="0%{opacity:0;} 100%{opacity:1;}",JL="0%{opacity:1;} 100%{opacity:0;}",ZL=gi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,e5=gi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,t5=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=PC()?[XL,JL]:[QL(n),YL(n)];return{animation:e?`${is(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${is(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},n5=D.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?t5(t.position||e||"top-center",t.visible):{opacity:0},i=D.createElement(KL,{toast:t}),o=D.createElement(e5,{...t.ariaProps},Uh(t.message,t));return D.createElement(ZL,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):D.createElement(D.Fragment,null,i,o))});SL(D.createElement);var r5=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=D.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return D.createElement("div",{ref:i,className:e,style:n},s)},s5=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:PC()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},i5=Gf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,cd=16,o5=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=ML(n,i);return D.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:cd,left:cd,right:cd,bottom:cd,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let h=u.position||e,p=c.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),m=s5(h,p);return D.createElement(r5,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?i5:"",style:m},u.type==="custom"?Uh(u.message,u):s?s(u):D.createElement(n5,{toast:u,position:h}))}))},Kt=ut;const a5="modulepreload",l5=function(t){return"/"+t},Wb={},zi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=l5(l),l in Wb)return;Wb[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":a5,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},c5={},Hb=t=>{let e;const n=new Set,r=(u,h)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const m=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(g=>g(e,m))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(c5?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,s,l);return l},u5=t=>t?Hb(t):Hb;var NC={exports:{}},DC={},MC={exports:{}},jC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sa=D;function d5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var h5=typeof Object.is=="function"?Object.is:d5,f5=Sa.useState,p5=Sa.useEffect,m5=Sa.useLayoutEffect,g5=Sa.useDebugValue;function y5(t,e){var n=e(),r=f5({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return m5(function(){s.value=n,s.getSnapshot=e,Om(s)&&i({inst:s})},[t,n,e]),p5(function(){return Om(s)&&i({inst:s}),t(function(){Om(s)&&i({inst:s})})},[t]),g5(n),n}function Om(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!h5(t,n)}catch{return!0}}function v5(t,e){return e()}var x5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v5:y5;jC.useSyncExternalStore=Sa.useSyncExternalStore!==void 0?Sa.useSyncExternalStore:x5;MC.exports=jC;var _5=MC.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qf=D,w5=_5;function b5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var T5=typeof Object.is=="function"?Object.is:b5,k5=w5.useSyncExternalStore,S5=Qf.useRef,E5=Qf.useEffect,P5=Qf.useMemo,C5=Qf.useDebugValue;DC.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=S5(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=P5(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),s!==void 0&&o.hasValue){var g=o.value;if(s(g,m))return h=g}return h=m}if(g=h,T5(u,m))return g;var v=r(m);return s!==void 0&&s(g,v)?(u=m,g):(u=m,h=v)}var c=!1,u,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=k5(t,i[0],i[1]);return E5(function(){o.hasValue=!0,o.value=a},[a]),C5(a),a};NC.exports=DC;var I5=NC.exports;const A5=tE(I5),OC={},{useDebugValue:R5}=hn,{useSyncExternalStoreWithSelector:N5}=A5;let qb=!1;const D5=t=>t;function M5(t,e=D5,n){(OC?"production":void 0)!=="production"&&n&&!qb&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),qb=!0);const r=N5(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return R5(r),r}const j5=t=>{(OC?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?u5(t):t,n=(r,s)=>M5(e,r,s);return Object.assign(n,e),n},Yf=t=>j5,O5={};function L5(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Nc=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Nc(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Nc(r)(n)}}}},V5=(t,e)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,w)=>({...w,..._}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(..._)},r,s);const u=Nc(i.serialize),h=()=>{const _=i.partialize({...r()});let w;const x=u({state:_,version:i.version}).then(T=>c.setItem(i.name,T)).catch(T=>{w=T});if(w)throw w;return x},p=s.setState;s.setState=(_,w)=>{p(_,w),h()};const m=t((..._)=>{n(..._),h()},r,s);let g;const v=()=>{var _;if(!c)return;o=!1,a.forEach(x=>x(r()));const w=((_=i.onRehydrateStorage)==null?void 0:_.call(i,r()))||void 0;return Nc(c.getItem.bind(c))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var T;return g=i.merge(x,(T=r())!=null?T:m),n(g,!0),h()}).then(()=>{w==null||w(g,void 0),o=!0,l.forEach(x=>x(g))}).catch(x=>{w==null||w(void 0,x)})};return s.persist={setOptions:_=>{i={...i,..._},_.getStorage&&(c=_.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},v(),g||m},F5=(t,e)=>(n,r,s)=>{let i={storage:L5(()=>localStorage),partialize:v=>v,version:0,merge:(v,_)=>({..._,...v}),...e},o=!1;const a=new Set,l=new Set;let c=i.storage;if(!c)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,s);const u=()=>{const v=i.partialize({...r()});return c.setItem(i.name,{state:v,version:i.version})},h=s.setState;s.setState=(v,_)=>{h(v,_),u()};const p=t((...v)=>{n(...v),u()},r,s);s.getInitialState=()=>p;let m;const g=()=>{var v,_;if(!c)return;o=!1,a.forEach(x=>{var T;return x((T=r())!=null?T:p)});const w=((_=i.onRehydrateStorage)==null?void 0:_.call(i,(v=r())!=null?v:p))||void 0;return Nc(c.getItem.bind(c))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return[!0,i.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var T;const[C,A]=x;if(m=i.merge(A,(T=r())!=null?T:p),n(m,!0),C)return u()}).then(()=>{w==null||w(m,void 0),m=r(),o=!0,l.forEach(x=>x(m))}).catch(x=>{w==null||w(void 0,x)})};return s.persist={setOptions:v=>{i={...i,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:v=>(a.add(v),()=>{a.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},i.skipHydration||g(),m||p},U5=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((O5?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),V5(t,e)):F5(t,e),Xf=U5;let ud;const z5=new Uint8Array(16);function B5(){if(!ud&&(ud=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ud))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ud(z5)}const wt=[];for(let t=0;t<256;++t)wt.push((t+256).toString(16).slice(1));function $5(t,e=0){return wt[t[e+0]]+wt[t[e+1]]+wt[t[e+2]]+wt[t[e+3]]+"-"+wt[t[e+4]]+wt[t[e+5]]+"-"+wt[t[e+6]]+wt[t[e+7]]+"-"+wt[t[e+8]]+wt[t[e+9]]+"-"+wt[t[e+10]]+wt[t[e+11]]+wt[t[e+12]]+wt[t[e+13]]+wt[t[e+14]]+wt[t[e+15]]}const W5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Gb={randomUUID:W5};function Ns(t,e,n){if(Gb.randomUUID&&!t)return Gb.randomUUID();t=t||{};const r=t.random||(t.rng||B5)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,$5(r)}const Lm=[{name:"Travail",color:"#3b82f6",icon:"briefcase",order:0,isDefault:!0},{name:"Personnel",color:"#22c55e",icon:"user",order:1,isDefault:!0},{name:"Sant",color:"#ef4444",icon:"heart",order:2,isDefault:!0},{name:"tudes",color:"#8b5cf6",icon:"book",order:3,isDefault:!0},{name:"Finances",color:"#f59e0b",icon:"wallet",order:4,isDefault:!0},{name:"Social",color:"#ec4899",icon:"users",order:5,isDefault:!0},{name:"Loisirs",color:"#06b6d4",icon:"gamepad-2",order:6,isDefault:!0},{name:"Maison",color:"#84cc16",icon:"home",order:7,isDefault:!0}],Dy=100,H5=1.5,LC={trivial:5,easy:10,medium:25,hard:50,epic:100,legendary:200},q5={none:0,low:0,medium:5,high:10,critical:20},G5=[{days:3,bonus:.1},{days:7,bonus:.25},{days:14,bonus:.5},{days:30,bonus:.75},{days:60,bonus:1},{days:100,bonus:1.5},{days:365,bonus:2}];var Kb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},K5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},FC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[u],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):K5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new Q5;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Q5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y5=function(t){const e=VC(t);return FC.encodeByteArray(e,!0)},zh=function(t){return Y5(t).replace(/\./g,"")},UC=function(t){try{return FC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=()=>X5().__FIREBASE_DEFAULTS__,Z5=()=>{if(typeof process>"u"||typeof Kb>"u")return;const t=Kb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&UC(t[1]);return e&&JSON.parse(e)},Jf=()=>{try{return J5()||Z5()||eV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zC=t=>{var e,n;return(n=(e=Jf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},tV=t=>{const e=zC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},BC=()=>{var t;return(t=Jf())===null||t===void 0?void 0:t.config},$C=t=>{var e;return(e=Jf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zh(JSON.stringify(n)),zh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function iV(){var t;const e=(t=Jf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lV(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cV(){return!iV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HC(){try{return typeof indexedDB=="object"}catch{return!1}}function qC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function uV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="FirebaseError";class sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dV,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_o.prototype.create)}}class _o{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?hV(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new sr(s,a,r)}}function hV(t,e){return t.replace(fV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const fV=/\{\$([^}]+)}/g;function pV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Bh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Qb(i)&&Qb(o)){if(!Bh(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Qb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Cl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Il(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function mV(t,e){const n=new gV(t,e);return n.subscribe.bind(n)}class gV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Vm),s.error===void 0&&(s.error=Vm),s.complete===void 0&&(s.complete=Vm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=1e3,xV=2,_V=4*60*60*1e3,wV=.5;function Yb(t,e=vV,n=xV){const r=e*Math.pow(n,t),s=Math.round(wV*r*(Math.random()-.5)*2);return Math.min(_V,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){return t&&t._delegate?t._delegate:t}class nr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new nV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kV(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TV(t){return t===Mi?void 0:t}function kV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const EV={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},PV=ge.INFO,CV={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},IV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=CV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zf{constructor(e){this.name=e,this._logLevel=PV,this._logHandler=IV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const AV=(t,e)=>e.some(n=>t instanceof n);let Xb,Jb;function RV(){return Xb||(Xb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NV(){return Jb||(Jb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GC=new WeakMap,My=new WeakMap,KC=new WeakMap,Fm=new WeakMap,Lv=new WeakMap;function DV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Zs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GC.set(n,t)}).catch(()=>{}),Lv.set(e,t),e}function MV(t){if(My.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});My.set(t,e)}let jy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return My.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jV(t){jy=t(jy)}function OV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Um(this),e,...n);return KC.set(r,e.sort?e.sort():[e]),Zs(r)}:NV().includes(t)?function(...e){return t.apply(Um(this),e),Zs(GC.get(this))}:function(...e){return Zs(t.apply(Um(this),e))}}function LV(t){return typeof t=="function"?OV(t):(t instanceof IDBTransaction&&MV(t),AV(t,RV())?new Proxy(t,jy):t)}function Zs(t){if(t instanceof IDBRequest)return DV(t);if(Fm.has(t))return Fm.get(t);const e=LV(t);return e!==t&&(Fm.set(t,e),Lv.set(e,t)),e}const Um=t=>Lv.get(t);function QC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Zs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Zs(o.result),l.oldVersion,l.newVersion,Zs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const VV=["get","getKey","getAll","getAllKeys","count"],FV=["put","add","delete","clear"],zm=new Map;function Zb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zm.get(e))return zm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=FV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||VV.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return zm.set(e,i),i}jV(t=>({...t,get:(e,n,r)=>Zb(e,n)||t.get(e,n,r),has:(e,n)=>!!Zb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Oy="@firebase/app",e1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new Zf("@firebase/app"),BV="@firebase/app-compat",$V="@firebase/analytics-compat",WV="@firebase/analytics",HV="@firebase/app-check-compat",qV="@firebase/app-check",GV="@firebase/auth",KV="@firebase/auth-compat",QV="@firebase/database",YV="@firebase/data-connect",XV="@firebase/database-compat",JV="@firebase/functions",ZV="@firebase/functions-compat",e4="@firebase/installations",t4="@firebase/installations-compat",n4="@firebase/messaging",r4="@firebase/messaging-compat",s4="@firebase/performance",i4="@firebase/performance-compat",o4="@firebase/remote-config",a4="@firebase/remote-config-compat",l4="@firebase/storage",c4="@firebase/storage-compat",u4="@firebase/firestore",d4="@firebase/vertexai-preview",h4="@firebase/firestore-compat",f4="firebase",p4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="[DEFAULT]",m4={[Oy]:"fire-core",[BV]:"fire-core-compat",[WV]:"fire-analytics",[$V]:"fire-analytics-compat",[qV]:"fire-app-check",[HV]:"fire-app-check-compat",[GV]:"fire-auth",[KV]:"fire-auth-compat",[QV]:"fire-rtdb",[YV]:"fire-data-connect",[XV]:"fire-rtdb-compat",[JV]:"fire-fn",[ZV]:"fire-fn-compat",[e4]:"fire-iid",[t4]:"fire-iid-compat",[n4]:"fire-fcm",[r4]:"fire-fcm-compat",[s4]:"fire-perf",[i4]:"fire-perf-compat",[o4]:"fire-rc",[a4]:"fire-rc-compat",[l4]:"fire-gcs",[c4]:"fire-gcs-compat",[u4]:"fire-fst",[h4]:"fire-fst-compat",[d4]:"fire-vertex","fire-js":"fire-js",[f4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Map,g4=new Map,Vy=new Map;function t1(t,e){try{t.container.addComponent(e)}catch(n){os.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sr(t){const e=t.name;if(Vy.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;Vy.set(e,t);for(const n of $h.values())t1(n,t);for(const n of g4.values())t1(n,t);return!0}function lu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ei=new _o("app","Firebase",y4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=p4;function YC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ly,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ei.create("bad-app-name",{appName:String(s)});if(n||(n=BC()),!n)throw ei.create("no-options");const i=$h.get(s);if(i){if(Bh(n,i.options)&&Bh(r,i.config))return i;throw ei.create("duplicate-app",{appName:s})}const o=new SV(s);for(const l of Vy.values())o.addComponent(l);const a=new v4(n,r,o);return $h.set(s,a),a}function XC(t=Ly){const e=$h.get(t);if(!e&&t===Ly&&BC())return YC();if(!e)throw ei.create("no-app",{appName:t});return e}function On(t,e,n){var r;let s=(r=m4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(a.join(" "));return}Sr(new nr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="firebase-heartbeat-database",_4=1,Dc="firebase-heartbeat-store";let Bm=null;function JC(){return Bm||(Bm=QC(x4,_4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ei.create("idb-open",{originalErrorMessage:t.message})})),Bm}async function w4(t){try{const n=(await JC()).transaction(Dc),r=await n.objectStore(Dc).get(ZC(t));return await n.done,r}catch(e){if(e instanceof sr)os.warn(e.message);else{const n=ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});os.warn(n.message)}}}async function n1(t,e){try{const r=(await JC()).transaction(Dc,"readwrite");await r.objectStore(Dc).put(e,ZC(t)),await r.done}catch(n){if(n instanceof sr)os.warn(n.message);else{const r=ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});os.warn(r.message)}}}function ZC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=1024,T4=30*24*60*60*1e3;class k4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new E4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=r1();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=T4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){os.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=r1(),{heartbeatsToSend:r,unsentEntries:s}=S4(this._heartbeatsCache.heartbeats),i=zh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return os.warn(n),""}}}function r1(){return new Date().toISOString().substring(0,10)}function S4(t,e=b4){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),s1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),s1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class E4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HC()?qC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await w4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return n1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return n1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function s1(t){return zh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(t){Sr(new nr("platform-logger",e=>new UV(e),"PRIVATE")),Sr(new nr("heartbeat",e=>new k4(e),"PRIVATE")),On(Oy,e1,t),On(Oy,e1,"esm2017"),On("fire-js","")}P4("");function Vv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function eI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const C4=eI,tI=new _o("auth","Firebase",eI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new Zf("@firebase/auth");function I4(t,...e){Wh.logLevel<=ge.WARN&&Wh.warn(`Auth (${za}): ${t}`,...e)}function Qd(t,...e){Wh.logLevel<=ge.ERROR&&Wh.error(`Auth (${za}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,...e){throw Uv(t,...e)}function er(t,...e){return Uv(t,...e)}function Fv(t,e,n){const r=Object.assign(Object.assign({},C4()),{[e]:n});return new _o("auth","Firebase",r).create(e,{appName:t.name})}function Xr(t){return Fv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function A4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Un(t,"argument-error"),Fv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tI.create(t,...e)}function se(t,e,...n){if(!t)throw Uv(e,...n)}function Wr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qd(e),new Error(e)}function as(t,e){t||Wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function R4(){return i1()==="http:"||i1()==="https:"}function i1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(R4()||WC()||"connection"in navigator)?navigator.onLine:!0}function D4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.shortDelay=e,this.longDelay=n,as(n>e,"Short delay should be less than long delay!"),this.isMobile=sV()||aV()}get(){return N4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t,e){as(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=new cu(3e4,6e4);function yi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vi(t,e,n,r,s={}){return rI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=au(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return oV()||(c.referrerPolicy="no-referrer"),nI.fetch()(sI(t,t.config.apiHost,n,a),c)})}async function rI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},M4),e);try{const s=new L4(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw dd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw dd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw dd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw dd(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Fv(t,u,c);Un(t,u)}}catch(s){if(s instanceof sr)throw s;Un(t,"network-request-failed",{message:String(s)})}}async function uu(t,e,n,r,s={}){const i=await vi(t,e,n,r,s);return"mfaPendingCredential"in i&&Un(t,"multi-factor-auth-required",{_serverResponse:i}),i}function sI(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?zv(t.config,s):`${t.config.apiScheme}://${s}`}function O4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class L4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(er(this.auth,"network-request-failed")),j4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=er(t,e,r);return s.customData._tokenResponse=n,s}function o1(t){return t!==void 0&&t.enterprise!==void 0}class V4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return O4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function F4(t,e){return vi(t,"GET","/v2/recaptchaConfig",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U4(t,e){return vi(t,"POST","/v1/accounts:delete",e)}async function iI(t,e){return vi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z4(t,e=!1){const n=tt(t),r=await n.getIdToken(e),s=Bv(r);se(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ql($m(s.auth_time)),issuedAtTime:Ql($m(s.iat)),expirationTime:Ql($m(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function $m(t){return Number(t)*1e3}function Bv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qd("JWT malformed, contained fewer than 3 sections"),null;try{const s=UC(n);return s?JSON.parse(s):(Qd("Failed to decode base64 JWT payload"),null)}catch(s){return Qd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function a1(t){const e=Bv(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sr&&B4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function B4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Mc(t,iI(n,{idToken:r}));se(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?oI(i.providerUserInfo):[],a=H4(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Uy(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function W4(t){const e=tt(t);await Hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function H4(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function oI(t){return t.map(e=>{var{providerId:n}=e,r=Vv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q4(t,e){const n=await rI(t,{},async()=>{const r=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=sI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function G4(t,e){return vi(t,"POST","/v2/accounts:revokeToken",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=a1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await q4(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ca;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(se(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(se(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ca,this.toJSON())}_performRefresh(){return Wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Vv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Uy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Mc(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return z4(this,e)}reload(){return W4(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await Mc(this,U4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:T,emailVerified:C,isAnonymous:A,providerData:M,stsTokenManager:S}=n;se(T&&S,e,"internal-error");const k=ca.fromJSON(this.name,S);se(typeof T=="string",e,"internal-error"),_s(h,e.name),_s(p,e.name),se(typeof C=="boolean",e,"internal-error"),se(typeof A=="boolean",e,"internal-error"),_s(m,e.name),_s(g,e.name),_s(v,e.name),_s(_,e.name),_s(w,e.name),_s(x,e.name);const E=new Hr({uid:T,auth:e,email:p,emailVerified:C,displayName:h,isAnonymous:A,photoURL:g,phoneNumber:m,tenantId:v,stsTokenManager:k,createdAt:w,lastLoginAt:x});return M&&Array.isArray(M)&&(E.providerData=M.map(I=>Object.assign({},I))),_&&(E._redirectEventId=_),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new ca;s.updateFromServerResponse(n);const i=new Hr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];se(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?oI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ca;a.updateFromIdToken(r);const l=new Hr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Uy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new Map;function qr(t){as(t instanceof Function,"Expected a class definition");let e=l1.get(t);return e?(as(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,l1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}aI.type="NONE";const c1=aI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t,e,n){return`firebase:${t}:${e}:${n}`}class ua{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Yd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Yd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Hr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ua(qr(c1),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||qr(c1);const o=Yd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Hr._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ua(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ua(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fI(e))return"Blackberry";if(pI(e))return"Webos";if(cI(e))return"Safari";if((e.includes("chrome/")||uI(e))&&!e.includes("edge/"))return"Chrome";if(hI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lI(t=Wt()){return/firefox\//i.test(t)}function cI(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uI(t=Wt()){return/crios\//i.test(t)}function dI(t=Wt()){return/iemobile/i.test(t)}function hI(t=Wt()){return/android/i.test(t)}function fI(t=Wt()){return/blackberry/i.test(t)}function pI(t=Wt()){return/webos/i.test(t)}function $v(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function K4(t=Wt()){var e;return $v(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Q4(){return lV()&&document.documentMode===10}function mI(t=Wt()){return $v(t)||hI(t)||pI(t)||fI(t)||/windows phone/i.test(t)||dI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t,e=[]){let n;switch(t){case"Browser":n=u1(Wt());break;case"Worker":n=`${u1(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${za}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X4(t,e={}){return vi(t,"GET","/v2/passwordPolicy",yi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=6;class Z4{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:J4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d1(this),this.idTokenSubscription=new d1(this),this.beforeStateQueue=new Y4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ua.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await iI(this,{idToken:e}),r=await Hr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=D4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Xr(this));const n=e?tt(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await X4(this),n=new Z4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _o("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await G4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qr(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await ua.create(this,[qr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&I4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xi(t){return tt(t)}class d1{constructor(e){this.auth=e,this.observer=null,this.addObserver=mV(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tF(t){ep=t}function yI(t){return ep.loadJS(t)}function nF(){return ep.recaptchaEnterpriseScript}function rF(){return ep.gapiScript}function sF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const iF="recaptcha-enterprise",oF="NO_RECAPTCHA";class aF{constructor(e){this.type=iF,this.auth=xi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{F4(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new V4(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;o1(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(oF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&o1(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=nF();l.length!==0&&(l+=a),yI(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function h1(t,e,n,r=!1){const s=new aF(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function zy(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await h1(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await h1(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(t,e){const n=lu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Bh(i,e??{}))return s;Un(s,"already-initialized")}return n.initialize({options:e})}function cF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uF(t,e,n){const r=xi(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=vI(e),{host:o,port:a}=dF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),hF()}function vI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dF(t){const e=vI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:f1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:f1(o)}}}function f1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wr("not implemented")}_getIdTokenResponse(e){return Wr("not implemented")}_linkToIdToken(e,n){return Wr("not implemented")}_getReauthenticationResolver(e){return Wr("not implemented")}}async function fF(t,e){return vi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pF(t,e){return uu(t,"POST","/v1/accounts:signInWithPassword",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mF(t,e){return uu(t,"POST","/v1/accounts:signInWithEmailLink",yi(t,e))}async function gF(t,e){return uu(t,"POST","/v1/accounts:signInWithEmailLink",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Wv{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new jc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new jc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,n,"signInWithPassword",pF);case"emailLink":return mF(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,r,"signUpPassword",fF);case"emailLink":return gF(e,{idToken:n,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(t,e){return uu(t,"POST","/v1/accounts:signInWithIdp",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF="http://localhost";class ao extends Wv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Vv(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ao(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return da(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,da(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,da(e,n)}buildRequest(){const e={requestUri:yF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xF(t){const e=Cl(Il(t)).link,n=e?Cl(Il(e)).deep_link_id:null,r=Cl(Il(t)).deep_link_id;return(r?Cl(Il(r)).link:null)||r||n||e||t}class Hv{constructor(e){var n,r,s,i,o,a;const l=Cl(Il(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=vF((s=l.mode)!==null&&s!==void 0?s:null);se(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=xF(e);try{return new Hv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.providerId=Ba.PROVIDER_ID}static credential(e,n){return jc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Hv.parseLink(n);return se(r,"argument-error"),jc._fromEmailAndCode(e,r.code,r.tenantId)}}Ba.PROVIDER_ID="password";Ba.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ba.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends qv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends du{constructor(){super("facebook.com")}static credential(e){return ao._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ao._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ur.credential(n,r)}catch{return null}}}Ur.GOOGLE_SIGN_IN_METHOD="google.com";Ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends du{constructor(){super("github.com")}static credential(e){return ao._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zr.credential(e.oauthAccessToken)}catch{return null}}}zr.GITHUB_SIGN_IN_METHOD="github.com";zr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends du{constructor(){super("twitter.com")}static credential(e,n){return ao._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ms.credential(n,r)}catch{return null}}}Ms.TWITTER_SIGN_IN_METHOD="twitter.com";Ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _F(t,e){return uu(t,"POST","/v1/accounts:signUp",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Hr._fromIdTokenResponse(e,r,s),o=p1(r);return new lo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=p1(r);return new lo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function p1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends sr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,qh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new qh(e,n,r,s)}}function xI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?qh._fromErrorAndOperation(t,i,e,r):i})}async function wF(t,e,n=!1){const r=await Mc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return lo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF(t,e,n=!1){const{auth:r}=t;if(Xn(r.app))return Promise.reject(Xr(r));const s="reauthenticate";try{const i=await Mc(t,xI(r,s,e,t),n);se(i.idToken,r,"internal-error");const o=Bv(i.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),lo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Un(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _I(t,e,n=!1){if(Xn(t.app))return Promise.reject(Xr(t));const r="signIn",s=await xI(t,r,e),i=await lo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function TF(t,e){return _I(xi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wI(t){const e=xi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kF(t,e,n){if(Xn(t.app))return Promise.reject(Xr(t));const r=xi(t),o=await zy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_F).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&wI(t),l}),a=await lo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function SF(t,e,n){return Xn(t.app)?Promise.reject(Xr(t)):TF(tt(t),Ba.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&wI(t),r})}function EF(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function PF(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function CF(t,e,n,r){return tt(t).onAuthStateChanged(e,n,r)}function IF(t){return tt(t).signOut()}const Gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=1e3,RF=10;class TI extends bI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Q4()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RF):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}TI.type="LOCAL";const NF=TI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI extends bI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kI.type="SESSION";const SI=kI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new tp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await DF(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Gv("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return window}function jF(t){xr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){return typeof xr().WorkerGlobalScope<"u"&&typeof xr().importScripts=="function"}async function OF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function VF(){return EI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="firebaseLocalStorageDb",FF=1,Kh="firebaseLocalStorage",CI="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function np(t,e){return t.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function UF(){const t=indexedDB.deleteDatabase(PI);return new hu(t).toPromise()}function By(){const t=indexedDB.open(PI,FF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kh,{keyPath:CI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kh)?e(r):(r.close(),await UF(),e(await By()))})})}async function m1(t,e,n){const r=np(t,!0).put({[CI]:e,value:n});return new hu(r).toPromise()}async function zF(t,e){const n=np(t,!1).get(e),r=await new hu(n).toPromise();return r===void 0?null:r.value}function g1(t,e){const n=np(t,!0).delete(e);return new hu(n).toPromise()}const BF=800,$F=3;class II{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await By(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$F)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return EI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tp._getInstance(VF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await OF(),!this.activeServiceWorker)return;this.sender=new MF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await By();return await m1(e,Gh,"1"),await g1(e,Gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>m1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>zF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>g1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=np(s,!1).getAll();return new hu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}II.type="LOCAL";const WF=II;new cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t,e){return e?qr(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv extends Wv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return da(e,this._buildIdpRequest())}_linkToIdToken(e,n){return da(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return da(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function HF(t){return _I(t.auth,new Kv(t),t.bypassAuthState)}function qF(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),bF(n,new Kv(t),t.bypassAuthState)}async function GF(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),wF(n,new Kv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HF;case"linkViaPopup":case"linkViaRedirect":return GF;case"reauthViaPopup":case"reauthViaRedirect":return qF;default:Un(this.auth,"internal-error")}}resolve(e){as(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){as(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=new cu(2e3,1e4);async function y1(t,e,n){if(Xn(t.app))return Promise.reject(er(t,"operation-not-supported-in-this-environment"));const r=xi(t);A4(t,e,qv);const s=AI(r,n);return new Hi(r,"signInViaPopup",e,s).executeNotNull()}class Hi extends RI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Hi.currentPopupAction&&Hi.currentPopupAction.cancel(),Hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){as(this.filter.length===1,"Popup operations only handle one event");const e=Gv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KF.get())};e()}}Hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF="pendingRedirect",Xd=new Map;class YF extends RI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xd.get(this.auth._key());if(!e){try{const r=await XF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xd.set(this.auth._key(),e)}return this.bypassAuthState||Xd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XF(t,e){const n=e3(e),r=ZF(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function JF(t,e){Xd.set(t._key(),e)}function ZF(t){return qr(t._redirectPersistence)}function e3(t){return Yd(QF,t.config.apiKey,t.name)}async function t3(t,e,n=!1){if(Xn(t.app))return Promise.reject(Xr(t));const r=xi(t),s=AI(r,e),o=await new YF(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=10*60*1e3;class r3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!NI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(er(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n3&&this.cachedEventUids.clear(),this.cachedEventUids.has(v1(e))}saveEventToCache(e){this.cachedEventUids.add(v1(e)),this.lastProcessedEventTime=Date.now()}}function v1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function s3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i3(t,e={}){return vi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a3=/^https?/;async function l3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await i3(t);for(const n of e)try{if(c3(n))return}catch{}Un(t,"unauthorized-domain")}function c3(t){const e=Fy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!a3.test(n))return!1;if(o3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=new cu(3e4,6e4);function x1(){const t=xr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function d3(t){return new Promise((e,n)=>{var r,s,i;function o(){x1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x1(),n(er(t,"network-request-failed"))},timeout:u3.get()})}if(!((s=(r=xr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=xr().gapi)===null||i===void 0)&&i.load)o();else{const a=sF("iframefcb");return xr()[a]=()=>{gapi.load?o():n(er(t,"network-request-failed"))},yI(`${rF()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Jd=null,e})}let Jd=null;function h3(t){return Jd=Jd||d3(t),Jd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=new cu(5e3,15e3),p3="__/auth/iframe",m3="emulator/auth/iframe",g3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v3(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zv(e,m3):`https://${t.config.authDomain}/${p3}`,r={apiKey:e.apiKey,appName:t.name,v:za},s=y3.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${au(r).slice(1)}`}async function x3(t){const e=await h3(t),n=xr().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:v3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=er(t,"network-request-failed"),a=xr().setTimeout(()=>{i(o)},f3.get());function l(){xr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w3=500,b3=600,T3="_blank",k3="http://localhost";class _1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function S3(t,e,n,r=w3,s=b3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},_3),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Wt().toLowerCase();n&&(a=uI(c)?T3:n),lI(c)&&(e=e||k3,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,g])=>`${p}${m}=${g},`,"");if(K4(c)&&a!=="_self")return E3(e||"",a),new _1(null);const h=window.open(e||"",a,u);se(h,t,"popup-blocked");try{h.focus()}catch{}return new _1(h)}function E3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3="__/auth/handler",C3="emulator/auth/handler",I3=encodeURIComponent("fac");async function w1(t,e,n,r,s,i){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:za,eventId:s};if(e instanceof qv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof du){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${I3}=${encodeURIComponent(l)}`:"";return`${A3(t)}?${au(a).slice(1)}${c}`}function A3({config:t}){return t.emulator?zv(t,C3):`https://${t.authDomain}/${P3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="webStorageSupport";class R3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SI,this._completeRedirectFn=t3,this._overrideRedirectResult=JF}async _openPopup(e,n,r,s){var i;as((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await w1(e,n,r,Fy(),s);return S3(e,o,Gv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await w1(e,n,r,Fy(),s);return jF(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(as(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await x3(e),r=new r3(e);return n.register("authEvent",s=>(se(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wm,{type:Wm},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Wm];o!==void 0&&n(!!o),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=l3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return mI()||cI()||$v()}}const N3=R3;var b1="@firebase/auth",T1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j3(t){Sr(new nr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gI(t)},c=new eF(r,s,i,l);return cF(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Sr(new nr("auth-internal",e=>{const n=xi(e.getProvider("auth").getImmediate());return(r=>new D3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),On(b1,T1,M3(t)),On(b1,T1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=5*60,L3=$C("authIdTokenMaxAge")||O3;let k1=null;const V3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>L3)return;const s=n==null?void 0:n.token;k1!==s&&(k1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function F3(t=XC()){const e=lu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lF(t,{popupRedirectResolver:N3,persistence:[WF,NF,SI]}),r=$C("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=V3(i.toString());PF(n,o,()=>o(n.currentUser)),EF(n,a=>o(a))}}const s=zC("auth");return s&&uF(n,`http://${s}`),n}function U3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}tF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=er("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",U3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j3("Browser");var S1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ji,DI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,k){function E(){}E.prototype=k.prototype,S.D=k.prototype,S.prototype=new E,S.prototype.constructor=S,S.C=function(I,N,j){for(var R=Array(arguments.length-2),z=2;z<arguments.length;z++)R[z-2]=arguments[z];return k.prototype[N].apply(I,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,k,E){E||(E=0);var I=Array(16);if(typeof k=="string")for(var N=0;16>N;++N)I[N]=k.charCodeAt(E++)|k.charCodeAt(E++)<<8|k.charCodeAt(E++)<<16|k.charCodeAt(E++)<<24;else for(N=0;16>N;++N)I[N]=k[E++]|k[E++]<<8|k[E++]<<16|k[E++]<<24;k=S.g[0],E=S.g[1],N=S.g[2];var j=S.g[3],R=k+(j^E&(N^j))+I[0]+3614090360&4294967295;k=E+(R<<7&4294967295|R>>>25),R=j+(N^k&(E^N))+I[1]+3905402710&4294967295,j=k+(R<<12&4294967295|R>>>20),R=N+(E^j&(k^E))+I[2]+606105819&4294967295,N=j+(R<<17&4294967295|R>>>15),R=E+(k^N&(j^k))+I[3]+3250441966&4294967295,E=N+(R<<22&4294967295|R>>>10),R=k+(j^E&(N^j))+I[4]+4118548399&4294967295,k=E+(R<<7&4294967295|R>>>25),R=j+(N^k&(E^N))+I[5]+1200080426&4294967295,j=k+(R<<12&4294967295|R>>>20),R=N+(E^j&(k^E))+I[6]+2821735955&4294967295,N=j+(R<<17&4294967295|R>>>15),R=E+(k^N&(j^k))+I[7]+4249261313&4294967295,E=N+(R<<22&4294967295|R>>>10),R=k+(j^E&(N^j))+I[8]+1770035416&4294967295,k=E+(R<<7&4294967295|R>>>25),R=j+(N^k&(E^N))+I[9]+2336552879&4294967295,j=k+(R<<12&4294967295|R>>>20),R=N+(E^j&(k^E))+I[10]+4294925233&4294967295,N=j+(R<<17&4294967295|R>>>15),R=E+(k^N&(j^k))+I[11]+2304563134&4294967295,E=N+(R<<22&4294967295|R>>>10),R=k+(j^E&(N^j))+I[12]+1804603682&4294967295,k=E+(R<<7&4294967295|R>>>25),R=j+(N^k&(E^N))+I[13]+4254626195&4294967295,j=k+(R<<12&4294967295|R>>>20),R=N+(E^j&(k^E))+I[14]+2792965006&4294967295,N=j+(R<<17&4294967295|R>>>15),R=E+(k^N&(j^k))+I[15]+1236535329&4294967295,E=N+(R<<22&4294967295|R>>>10),R=k+(N^j&(E^N))+I[1]+4129170786&4294967295,k=E+(R<<5&4294967295|R>>>27),R=j+(E^N&(k^E))+I[6]+3225465664&4294967295,j=k+(R<<9&4294967295|R>>>23),R=N+(k^E&(j^k))+I[11]+643717713&4294967295,N=j+(R<<14&4294967295|R>>>18),R=E+(j^k&(N^j))+I[0]+3921069994&4294967295,E=N+(R<<20&4294967295|R>>>12),R=k+(N^j&(E^N))+I[5]+3593408605&4294967295,k=E+(R<<5&4294967295|R>>>27),R=j+(E^N&(k^E))+I[10]+38016083&4294967295,j=k+(R<<9&4294967295|R>>>23),R=N+(k^E&(j^k))+I[15]+3634488961&4294967295,N=j+(R<<14&4294967295|R>>>18),R=E+(j^k&(N^j))+I[4]+3889429448&4294967295,E=N+(R<<20&4294967295|R>>>12),R=k+(N^j&(E^N))+I[9]+568446438&4294967295,k=E+(R<<5&4294967295|R>>>27),R=j+(E^N&(k^E))+I[14]+3275163606&4294967295,j=k+(R<<9&4294967295|R>>>23),R=N+(k^E&(j^k))+I[3]+4107603335&4294967295,N=j+(R<<14&4294967295|R>>>18),R=E+(j^k&(N^j))+I[8]+1163531501&4294967295,E=N+(R<<20&4294967295|R>>>12),R=k+(N^j&(E^N))+I[13]+2850285829&4294967295,k=E+(R<<5&4294967295|R>>>27),R=j+(E^N&(k^E))+I[2]+4243563512&4294967295,j=k+(R<<9&4294967295|R>>>23),R=N+(k^E&(j^k))+I[7]+1735328473&4294967295,N=j+(R<<14&4294967295|R>>>18),R=E+(j^k&(N^j))+I[12]+2368359562&4294967295,E=N+(R<<20&4294967295|R>>>12),R=k+(E^N^j)+I[5]+4294588738&4294967295,k=E+(R<<4&4294967295|R>>>28),R=j+(k^E^N)+I[8]+2272392833&4294967295,j=k+(R<<11&4294967295|R>>>21),R=N+(j^k^E)+I[11]+1839030562&4294967295,N=j+(R<<16&4294967295|R>>>16),R=E+(N^j^k)+I[14]+4259657740&4294967295,E=N+(R<<23&4294967295|R>>>9),R=k+(E^N^j)+I[1]+2763975236&4294967295,k=E+(R<<4&4294967295|R>>>28),R=j+(k^E^N)+I[4]+1272893353&4294967295,j=k+(R<<11&4294967295|R>>>21),R=N+(j^k^E)+I[7]+4139469664&4294967295,N=j+(R<<16&4294967295|R>>>16),R=E+(N^j^k)+I[10]+3200236656&4294967295,E=N+(R<<23&4294967295|R>>>9),R=k+(E^N^j)+I[13]+681279174&4294967295,k=E+(R<<4&4294967295|R>>>28),R=j+(k^E^N)+I[0]+3936430074&4294967295,j=k+(R<<11&4294967295|R>>>21),R=N+(j^k^E)+I[3]+3572445317&4294967295,N=j+(R<<16&4294967295|R>>>16),R=E+(N^j^k)+I[6]+76029189&4294967295,E=N+(R<<23&4294967295|R>>>9),R=k+(E^N^j)+I[9]+3654602809&4294967295,k=E+(R<<4&4294967295|R>>>28),R=j+(k^E^N)+I[12]+3873151461&4294967295,j=k+(R<<11&4294967295|R>>>21),R=N+(j^k^E)+I[15]+530742520&4294967295,N=j+(R<<16&4294967295|R>>>16),R=E+(N^j^k)+I[2]+3299628645&4294967295,E=N+(R<<23&4294967295|R>>>9),R=k+(N^(E|~j))+I[0]+4096336452&4294967295,k=E+(R<<6&4294967295|R>>>26),R=j+(E^(k|~N))+I[7]+1126891415&4294967295,j=k+(R<<10&4294967295|R>>>22),R=N+(k^(j|~E))+I[14]+2878612391&4294967295,N=j+(R<<15&4294967295|R>>>17),R=E+(j^(N|~k))+I[5]+4237533241&4294967295,E=N+(R<<21&4294967295|R>>>11),R=k+(N^(E|~j))+I[12]+1700485571&4294967295,k=E+(R<<6&4294967295|R>>>26),R=j+(E^(k|~N))+I[3]+2399980690&4294967295,j=k+(R<<10&4294967295|R>>>22),R=N+(k^(j|~E))+I[10]+4293915773&4294967295,N=j+(R<<15&4294967295|R>>>17),R=E+(j^(N|~k))+I[1]+2240044497&4294967295,E=N+(R<<21&4294967295|R>>>11),R=k+(N^(E|~j))+I[8]+1873313359&4294967295,k=E+(R<<6&4294967295|R>>>26),R=j+(E^(k|~N))+I[15]+4264355552&4294967295,j=k+(R<<10&4294967295|R>>>22),R=N+(k^(j|~E))+I[6]+2734768916&4294967295,N=j+(R<<15&4294967295|R>>>17),R=E+(j^(N|~k))+I[13]+1309151649&4294967295,E=N+(R<<21&4294967295|R>>>11),R=k+(N^(E|~j))+I[4]+4149444226&4294967295,k=E+(R<<6&4294967295|R>>>26),R=j+(E^(k|~N))+I[11]+3174756917&4294967295,j=k+(R<<10&4294967295|R>>>22),R=N+(k^(j|~E))+I[2]+718787259&4294967295,N=j+(R<<15&4294967295|R>>>17),R=E+(j^(N|~k))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+k&4294967295,S.g[1]=S.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+j&4294967295}r.prototype.u=function(S,k){k===void 0&&(k=S.length);for(var E=k-this.blockSize,I=this.B,N=this.h,j=0;j<k;){if(N==0)for(;j<=E;)s(this,S,j),j+=this.blockSize;if(typeof S=="string"){for(;j<k;)if(I[N++]=S.charCodeAt(j++),N==this.blockSize){s(this,I),N=0;break}}else for(;j<k;)if(I[N++]=S[j++],N==this.blockSize){s(this,I),N=0;break}}this.h=N,this.o+=k},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var k=1;k<S.length-8;++k)S[k]=0;var E=8*this.o;for(k=S.length-8;k<S.length;++k)S[k]=E&255,E/=256;for(this.u(S),S=Array(16),k=E=0;4>k;++k)for(var I=0;32>I;I+=8)S[E++]=this.g[k]>>>I&255;return S};function i(S,k){var E=a;return Object.prototype.hasOwnProperty.call(E,S)?E[S]:E[S]=k(S)}function o(S,k){this.h=k;for(var E=[],I=!0,N=S.length-1;0<=N;N--){var j=S[N]|0;I&&j==k||(E[N]=j,I=!1)}this.g=E}var a={};function l(S){return-128<=S&&128>S?i(S,function(k){return new o([k|0],0>k?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return _(c(-S));for(var k=[],E=1,I=0;S>=E;I++)k[I]=S/E|0,E*=4294967296;return new o(k,0)}function u(S,k){if(S.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(S.charAt(0)=="-")return _(u(S.substring(1),k));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(k,8)),I=h,N=0;N<S.length;N+=8){var j=Math.min(8,S.length-N),R=parseInt(S.substring(N,N+j),k);8>j?(j=c(Math.pow(k,j)),I=I.j(j).add(c(R))):(I=I.j(E),I=I.add(c(R)))}return I}var h=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-_(this).m();for(var S=0,k=1,E=0;E<this.g.length;E++){var I=this.i(E);S+=(0<=I?I:4294967296+I)*k,k*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(g(this))return"0";if(v(this))return"-"+_(this).toString(S);for(var k=c(Math.pow(S,6)),E=this,I="";;){var N=C(E,k).g;E=w(E,N.j(k));var j=((0<E.g.length?E.g[0]:E.h)>>>0).toString(S);if(E=N,g(E))return j+I;for(;6>j.length;)j="0"+j;I=j+I}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function g(S){if(S.h!=0)return!1;for(var k=0;k<S.g.length;k++)if(S.g[k]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=w(this,S),v(S)?-1:g(S)?0:1};function _(S){for(var k=S.g.length,E=[],I=0;I<k;I++)E[I]=~S.g[I];return new o(E,~S.h).add(p)}t.abs=function(){return v(this)?_(this):this},t.add=function(S){for(var k=Math.max(this.g.length,S.g.length),E=[],I=0,N=0;N<=k;N++){var j=I+(this.i(N)&65535)+(S.i(N)&65535),R=(j>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);I=R>>>16,j&=65535,R&=65535,E[N]=R<<16|j}return new o(E,E[E.length-1]&-2147483648?-1:0)};function w(S,k){return S.add(_(k))}t.j=function(S){if(g(this)||g(S))return h;if(v(this))return v(S)?_(this).j(_(S)):_(_(this).j(S));if(v(S))return _(this.j(_(S)));if(0>this.l(m)&&0>S.l(m))return c(this.m()*S.m());for(var k=this.g.length+S.g.length,E=[],I=0;I<2*k;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var N=0;N<S.g.length;N++){var j=this.i(I)>>>16,R=this.i(I)&65535,z=S.i(N)>>>16,H=S.i(N)&65535;E[2*I+2*N]+=R*H,x(E,2*I+2*N),E[2*I+2*N+1]+=j*H,x(E,2*I+2*N+1),E[2*I+2*N+1]+=R*z,x(E,2*I+2*N+1),E[2*I+2*N+2]+=j*z,x(E,2*I+2*N+2)}for(I=0;I<k;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=k;I<2*k;I++)E[I]=0;return new o(E,0)};function x(S,k){for(;(S[k]&65535)!=S[k];)S[k+1]+=S[k]>>>16,S[k]&=65535,k++}function T(S,k){this.g=S,this.h=k}function C(S,k){if(g(k))throw Error("division by zero");if(g(S))return new T(h,h);if(v(S))return k=C(_(S),k),new T(_(k.g),_(k.h));if(v(k))return k=C(S,_(k)),new T(_(k.g),k.h);if(30<S.g.length){if(v(S)||v(k))throw Error("slowDivide_ only works with positive integers.");for(var E=p,I=k;0>=I.l(S);)E=A(E),I=A(I);var N=M(E,1),j=M(I,1);for(I=M(I,2),E=M(E,2);!g(I);){var R=j.add(I);0>=R.l(S)&&(N=N.add(E),j=R),I=M(I,1),E=M(E,1)}return k=w(S,N.j(k)),new T(N,k)}for(N=h;0<=S.l(k);){for(E=Math.max(1,Math.floor(S.m()/k.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),j=c(E),R=j.j(k);v(R)||0<R.l(S);)E-=I,j=c(E),R=j.j(k);g(j)&&(j=p),N=N.add(j),S=w(S,R)}return new T(N,S)}t.A=function(S){return C(this,S).h},t.and=function(S){for(var k=Math.max(this.g.length,S.g.length),E=[],I=0;I<k;I++)E[I]=this.i(I)&S.i(I);return new o(E,this.h&S.h)},t.or=function(S){for(var k=Math.max(this.g.length,S.g.length),E=[],I=0;I<k;I++)E[I]=this.i(I)|S.i(I);return new o(E,this.h|S.h)},t.xor=function(S){for(var k=Math.max(this.g.length,S.g.length),E=[],I=0;I<k;I++)E[I]=this.i(I)^S.i(I);return new o(E,this.h^S.h)};function A(S){for(var k=S.g.length+1,E=[],I=0;I<k;I++)E[I]=S.i(I)<<1|S.i(I-1)>>>31;return new o(E,S.h)}function M(S,k){var E=k>>5;k%=32;for(var I=S.g.length-E,N=[],j=0;j<I;j++)N[j]=0<k?S.i(j+E)>>>k|S.i(j+E+1)<<32-k:S.i(j+E);return new o(N,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,DI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Ji=o}).apply(typeof S1<"u"?S1:typeof self<"u"?self:typeof window<"u"?window:{});var hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MI,Al,jI,Zd,$y,OI,LI,VI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,b){return d==Array.prototype||d==Object.prototype||(d[y]=b.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof hd=="object"&&hd];for(var y=0;y<d.length;++y){var b=d[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var b=r;d=d.split(".");for(var P=0;P<d.length-1;P++){var O=d[P];if(!(O in b))break e;b=b[O]}d=d[d.length-1],P=b[d],y=y(P),y!=P&&y!=null&&e(b,d,{configurable:!0,writable:!0,value:y})}}function i(d,y){d instanceof String&&(d+="");var b=0,P=!1,O={next:function(){if(!P&&b<d.length){var L=b++;return{value:y(L,d[L]),done:!1}}return P=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(d){return d||function(){return i(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function c(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function u(d,y,b){return d.call.apply(d.bind,arguments)}function h(d,y,b){if(!d)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,P),d.apply(y,O)}}return function(){return d.apply(y,arguments)}}function p(d,y,b){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,p.apply(null,arguments)}function m(d,y){var b=Array.prototype.slice.call(arguments,1);return function(){var P=b.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function g(d,y){function b(){}b.prototype=y.prototype,d.aa=y.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(P,O,L){for(var W=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)W[Ie-2]=arguments[Ie];return y.prototype[O].apply(P,W)}}function v(d){const y=d.length;if(0<y){const b=Array(y);for(let P=0;P<y;P++)b[P]=d[P];return b}return[]}function _(d,y){for(let b=1;b<arguments.length;b++){const P=arguments[b];if(l(P)){const O=d.length||0,L=P.length||0;d.length=O+L;for(let W=0;W<L;W++)d[O+W]=P[W]}else d.push(P)}}class w{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function x(d){return/^[\s\xa0]*$/.test(d)}function T(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function C(d){return C[" "](d),d}C[" "]=function(){};var A=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(d,y,b){for(const P in d)y.call(b,d[P],P,d)}function S(d,y){for(const b in d)y.call(void 0,d[b],b,d)}function k(d){const y={};for(const b in d)y[b]=d[b];return y}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(d,y){let b,P;for(let O=1;O<arguments.length;O++){P=arguments[O];for(b in P)d[b]=P[b];for(let L=0;L<E.length;L++)b=E[L],Object.prototype.hasOwnProperty.call(P,b)&&(d[b]=P[b])}}function N(d){var y=1;d=d.split(":");const b=[];for(;0<y&&d.length;)b.push(d.shift()),y--;return d.length&&b.push(d.join(":")),b}function j(d){a.setTimeout(()=>{throw d},0)}function R(){var d=q;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class z{constructor(){this.h=this.g=null}add(y,b){const P=H.get();P.set(y,b),this.h?this.h.next=P:this.g=P,this.h=P}}var H=new w(()=>new $,d=>d.reset());class ${constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let X,U=!1,q=new z,te=()=>{const d=a.Promise.resolve(void 0);X=()=>{d.then(Z)}};var Z=()=>{for(var d;d=R();){try{d.h.call(d.g)}catch(b){j(b)}var y=H;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}U=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var nt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};a.addEventListener("test",b,y),a.removeEventListener("test",b,y)}catch{}return d}();function mt(d,y){if(ye.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(A){e:{try{C(y.nodeName);var O=!0;break e}catch{}O=!1}O||(y=null)}}else b=="mouseover"?y=d.fromElement:b=="mouseout"&&(y=d.toElement);this.relatedTarget=y,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ue[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&mt.aa.h.call(this)}}g(mt,ye);var Ue={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Sn="closure_listenable_"+(1e6*Math.random()|0),Up=0;function Ka(d,y,b,P,O){this.listener=d,this.proxy=null,this.src=y,this.type=b,this.capture=!!P,this.ha=O,this.key=++Up,this.da=this.fa=!1}function Ar(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function En(d){this.src=d,this.g={},this.h=0}En.prototype.add=function(d,y,b,P,O){var L=d.toString();d=this.g[L],d||(d=this.g[L]=[],this.h++);var W=zp(d,y,P,O);return-1<W?(y=d[W],b||(y.fa=!1)):(y=new Ka(y,this.src,L,!!P,O),y.fa=b,d.push(y)),y};function Iu(d,y){var b=y.type;if(b in d.g){var P=d.g[b],O=Array.prototype.indexOf.call(P,y,void 0),L;(L=0<=O)&&Array.prototype.splice.call(P,O,1),L&&(Ar(y),d.g[b].length==0&&(delete d.g[b],d.h--))}}function zp(d,y,b,P){for(var O=0;O<d.length;++O){var L=d[O];if(!L.da&&L.listener==y&&L.capture==!!b&&L.ha==P)return O}return-1}var Bp="closure_lm_"+(1e6*Math.random()|0),$p={};function P_(d,y,b,P,O){if(Array.isArray(y)){for(var L=0;L<y.length;L++)P_(d,y[L],b,P,O);return null}return b=A_(b),d&&d[Sn]?d.K(y,b,c(P)?!!P.capture:!1,O):lD(d,y,b,!1,P,O)}function lD(d,y,b,P,O,L){if(!y)throw Error("Invalid event type");var W=c(O)?!!O.capture:!!O,Ie=Hp(d);if(Ie||(d[Bp]=Ie=new En(d)),b=Ie.add(y,b,P,W,L),b.proxy)return b;if(P=cD(),b.proxy=P,P.src=d,P.listener=b,d.addEventListener)nt||(O=W),O===void 0&&(O=!1),d.addEventListener(y.toString(),P,O);else if(d.attachEvent)d.attachEvent(I_(y.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return b}function cD(){function d(b){return y.call(d.src,d.listener,b)}const y=uD;return d}function C_(d,y,b,P,O){if(Array.isArray(y))for(var L=0;L<y.length;L++)C_(d,y[L],b,P,O);else P=c(P)?!!P.capture:!!P,b=A_(b),d&&d[Sn]?(d=d.i,y=String(y).toString(),y in d.g&&(L=d.g[y],b=zp(L,b,P,O),-1<b&&(Ar(L[b]),Array.prototype.splice.call(L,b,1),L.length==0&&(delete d.g[y],d.h--)))):d&&(d=Hp(d))&&(y=d.g[y.toString()],d=-1,y&&(d=zp(y,b,P,O)),(b=-1<d?y[d]:null)&&Wp(b))}function Wp(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Sn])Iu(y.i,d);else{var b=d.type,P=d.proxy;y.removeEventListener?y.removeEventListener(b,P,d.capture):y.detachEvent?y.detachEvent(I_(b),P):y.addListener&&y.removeListener&&y.removeListener(P),(b=Hp(y))?(Iu(b,d),b.h==0&&(b.src=null,y[Bp]=null)):Ar(d)}}}function I_(d){return d in $p?$p[d]:$p[d]="on"+d}function uD(d,y){if(d.da)d=!0;else{y=new mt(y,this);var b=d.listener,P=d.ha||d.src;d.fa&&Wp(d),d=b.call(P,y)}return d}function Hp(d){return d=d[Bp],d instanceof En?d:null}var qp="__closure_events_fn_"+(1e9*Math.random()>>>0);function A_(d){return typeof d=="function"?d:(d[qp]||(d[qp]=function(y){return d.handleEvent(y)}),d[qp])}function It(){le.call(this),this.i=new En(this),this.M=this,this.F=null}g(It,le),It.prototype[Sn]=!0,It.prototype.removeEventListener=function(d,y,b,P){C_(this,d,y,b,P)};function qt(d,y){var b,P=d.F;if(P)for(b=[];P;P=P.F)b.push(P);if(d=d.M,P=y.type||y,typeof y=="string")y=new ye(y,d);else if(y instanceof ye)y.target=y.target||d;else{var O=y;y=new ye(P,d),I(y,O)}if(O=!0,b)for(var L=b.length-1;0<=L;L--){var W=y.g=b[L];O=Au(W,P,!0,y)&&O}if(W=y.g=d,O=Au(W,P,!0,y)&&O,O=Au(W,P,!1,y)&&O,b)for(L=0;L<b.length;L++)W=y.g=b[L],O=Au(W,P,!1,y)&&O}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var b=d.g[y],P=0;P<b.length;P++)Ar(b[P]);delete d.g[y],d.h--}}this.F=null},It.prototype.K=function(d,y,b,P){return this.i.add(String(d),y,!1,b,P)},It.prototype.L=function(d,y,b,P){return this.i.add(String(d),y,!0,b,P)};function Au(d,y,b,P){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var O=!0,L=0;L<y.length;++L){var W=y[L];if(W&&!W.da&&W.capture==b){var Ie=W.listener,_t=W.ha||W.src;W.fa&&Iu(d.i,W),O=Ie.call(_t,P)!==!1&&O}}return O&&!P.defaultPrevented}function R_(d,y,b){if(typeof d=="function")b&&(d=p(d,b));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(d,y||0)}function N_(d){d.g=R_(()=>{d.g=null,d.i&&(d.i=!1,N_(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class dD extends le{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:N_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qa(d){le.call(this),this.h=d,this.g={}}g(Qa,le);var D_=[];function M_(d){M(d.g,function(y,b){this.g.hasOwnProperty(b)&&Wp(y)},d),d.g={}}Qa.prototype.N=function(){Qa.aa.N.call(this),M_(this)},Qa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gp=a.JSON.stringify,hD=a.JSON.parse,fD=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Kp(){}Kp.prototype.h=null;function j_(d){return d.h||(d.h=d.i())}function O_(){}var Ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qp(){ye.call(this,"d")}g(Qp,ye);function Yp(){ye.call(this,"c")}g(Yp,ye);var ki={},L_=null;function Ru(){return L_=L_||new It}ki.La="serverreachability";function V_(d){ye.call(this,ki.La,d)}g(V_,ye);function Xa(d){const y=Ru();qt(y,new V_(y))}ki.STAT_EVENT="statevent";function F_(d,y){ye.call(this,ki.STAT_EVENT,d),this.stat=y}g(F_,ye);function Gt(d){const y=Ru();qt(y,new F_(y,d))}ki.Ma="timingevent";function U_(d,y){ye.call(this,ki.Ma,d),this.size=y}g(U_,ye);function Ja(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},y)}function Za(){this.g=!0}Za.prototype.xa=function(){this.g=!1};function pD(d,y,b,P,O,L){d.info(function(){if(d.g)if(L)for(var W="",Ie=L.split("&"),_t=0;_t<Ie.length;_t++){var we=Ie[_t].split("=");if(1<we.length){var At=we[0];we=we[1];var Rt=At.split("_");W=2<=Rt.length&&Rt[1]=="type"?W+(At+"="+we+"&"):W+(At+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+P+") [attempt "+O+"]: "+y+`
`+b+`
`+W})}function mD(d,y,b,P,O,L,W){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+O+"]: "+y+`
`+b+`
`+L+" "+W})}function Po(d,y,b,P){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+yD(d,b)+(P?" "+P:"")})}function gD(d,y){d.info(function(){return"TIMEOUT: "+y})}Za.prototype.info=function(){};function yD(d,y){if(!d.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var P=b[d];if(!(2>P.length)){var O=P[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<O.length;W++)O[W]=""}}}}return Gp(b)}catch{return y}}var Nu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},z_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xp;function Du(){}g(Du,Kp),Du.prototype.g=function(){return new XMLHttpRequest},Du.prototype.i=function(){return{}},Xp=new Du;function gs(d,y,b,P){this.j=d,this.i=y,this.l=b,this.R=P||1,this.U=new Qa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new B_}function B_(){this.i=null,this.g="",this.h=!1}var $_={},Jp={};function Zp(d,y,b){d.L=1,d.v=Lu(Rr(y)),d.m=b,d.P=!0,W_(d,null)}function W_(d,y){d.F=Date.now(),Mu(d),d.A=Rr(d.v);var b=d.A,P=d.R;Array.isArray(P)||(P=[String(P)]),sw(b.i,"t",P),d.C=0,b=d.j.J,d.h=new B_,d.g=bw(d.j,b?y:null,!d.m),0<d.O&&(d.M=new dD(p(d.Y,d,d.g),d.O)),y=d.U,b=d.g,P=d.ca;var O="readystatechange";Array.isArray(O)||(O&&(D_[0]=O.toString()),O=D_);for(var L=0;L<O.length;L++){var W=P_(b,O[L],P||y.handleEvent,!1,y.h||y);if(!W)break;y.g[W.key]=W}y=d.H?k(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),Xa(),pD(d.i,d.u,d.A,d.l,d.R,d.m)}gs.prototype.ca=function(d){d=d.target;const y=this.M;y&&Nr(d)==3?y.j():this.Y(d)},gs.prototype.Y=function(d){try{if(d==this.g)e:{const Rt=Nr(this.g);var y=this.g.Ba();const Ao=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||dw(this.g)))){this.J||Rt!=4||y==7||(y==8||0>=Ao?Xa(3):Xa(2)),em(this);var b=this.g.Z();this.X=b;t:if(H_(this)){var P=dw(this.g);d="";var O=P.length,L=Nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Si(this),el(this);var W="";break t}this.h.i=new a.TextDecoder}for(y=0;y<O;y++)this.h.h=!0,d+=this.h.i.decode(P[y],{stream:!(L&&y==O-1)});P.length=0,this.h.g+=d,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=b==200,mD(this.i,this.u,this.A,this.l,this.R,Rt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,_t=this.g;if((Ie=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Ie)){var we=Ie;break t}}we=null}if(b=we)Po(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tm(this,b);else{this.o=!1,this.s=3,Gt(12),Si(this),el(this);break e}}if(this.P){b=!0;let $n;for(;!this.J&&this.C<W.length;)if($n=vD(this,W),$n==Jp){Rt==4&&(this.s=4,Gt(14),b=!1),Po(this.i,this.l,null,"[Incomplete Response]");break}else if($n==$_){this.s=4,Gt(15),Po(this.i,this.l,W,"[Invalid Chunk]"),b=!1;break}else Po(this.i,this.l,$n,null),tm(this,$n);if(H_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||W.length!=0||this.h.h||(this.s=1,Gt(16),b=!1),this.o=this.o&&b,!b)Po(this.i,this.l,W,"[Invalid Chunked Response]"),Si(this),el(this);else if(0<W.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),am(At),At.M=!0,Gt(11))}}else Po(this.i,this.l,W,null),tm(this,W);Rt==4&&Si(this),this.o&&!this.J&&(Rt==4?vw(this.j,this):(this.o=!1,Mu(this)))}else jD(this.g),b==400&&0<W.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),Si(this),el(this)}}}catch{}finally{}};function H_(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function vD(d,y){var b=d.C,P=y.indexOf(`
`,b);return P==-1?Jp:(b=Number(y.substring(b,P)),isNaN(b)?$_:(P+=1,P+b>y.length?Jp:(y=y.slice(P,P+b),d.C=P+b,y)))}gs.prototype.cancel=function(){this.J=!0,Si(this)};function Mu(d){d.S=Date.now()+d.I,q_(d,d.I)}function q_(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ja(p(d.ba,d),y)}function em(d){d.B&&(a.clearTimeout(d.B),d.B=null)}gs.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(gD(this.i,this.A),this.L!=2&&(Xa(),Gt(17)),Si(this),this.s=2,el(this)):q_(this,this.S-d)};function el(d){d.j.G==0||d.J||vw(d.j,d)}function Si(d){em(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,M_(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function tm(d,y){try{var b=d.j;if(b.G!=0&&(b.g==d||nm(b.h,d))){if(!d.K&&nm(b.h,d)&&b.G==3){try{var P=b.Da.g.parse(y)}catch{P=null}if(Array.isArray(P)&&P.length==3){var O=P;if(O[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)$u(b),zu(b);else break e;om(b),Gt(18)}}else b.za=O[1],0<b.za-b.T&&37500>O[2]&&b.F&&b.v==0&&!b.C&&(b.C=Ja(p(b.Za,b),6e3));if(1>=Q_(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Pi(b,11)}else if((d.K||b.g==d)&&$u(b),!x(y))for(O=b.Da.g.parse(y),y=0;y<O.length;y++){let we=O[y];if(b.T=we[0],we=we[1],b.G==2)if(we[0]=="c"){b.K=we[1],b.ia=we[2];const At=we[3];At!=null&&(b.la=At,b.j.info("VER="+b.la));const Rt=we[4];Rt!=null&&(b.Aa=Rt,b.j.info("SVER="+b.Aa));const Ao=we[5];Ao!=null&&typeof Ao=="number"&&0<Ao&&(P=1.5*Ao,b.L=P,b.j.info("backChannelRequestTimeoutMs_="+P)),P=b;const $n=d.g;if($n){const Hu=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hu){var L=P.h;L.g||Hu.indexOf("spdy")==-1&&Hu.indexOf("quic")==-1&&Hu.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(rm(L,L.h),L.h=null))}if(P.D){const lm=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;lm&&(P.ya=lm,Me(P.I,P.D,lm))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),P=b;var W=d;if(P.qa=ww(P,P.J?P.ia:null,P.W),W.K){Y_(P.h,W);var Ie=W,_t=P.L;_t&&(Ie.I=_t),Ie.B&&(em(Ie),Mu(Ie)),P.g=W}else gw(P);0<b.i.length&&Bu(b)}else we[0]!="stop"&&we[0]!="close"||Pi(b,7);else b.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?Pi(b,7):im(b):we[0]!="noop"&&b.l&&b.l.ta(we),b.v=0)}}Xa(4)}catch{}}var xD=class{constructor(d,y){this.g=d,this.map=y}};function G_(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function K_(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Q_(d){return d.h?1:d.g?d.g.size:0}function nm(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function rm(d,y){d.g?d.g.add(y):d.h=y}function Y_(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}G_.prototype.cancel=function(){if(this.i=X_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function X_(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const b of d.g.values())y=y.concat(b.D);return y}return v(d.i)}function _D(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var y=[],b=d.length,P=0;P<b;P++)y.push(d[P]);return y}y=[],b=0;for(P in d)y[b++]=d[P];return y}function wD(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var y=[];d=d.length;for(var b=0;b<d;b++)y.push(b);return y}y=[],b=0;for(const P in d)y[b++]=P;return y}}}function J_(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var b=wD(d),P=_D(d),O=P.length,L=0;L<O;L++)y.call(void 0,P[L],b&&b[L],d)}var Z_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bD(d,y){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var P=d[b].indexOf("="),O=null;if(0<=P){var L=d[b].substring(0,P);O=d[b].substring(P+1)}else L=d[b];y(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Ei(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ei){this.h=d.h,ju(this,d.j),this.o=d.o,this.g=d.g,Ou(this,d.s),this.l=d.l;var y=d.i,b=new rl;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),ew(this,b),this.m=d.m}else d&&(y=String(d).match(Z_))?(this.h=!1,ju(this,y[1]||"",!0),this.o=tl(y[2]||""),this.g=tl(y[3]||"",!0),Ou(this,y[4]),this.l=tl(y[5]||"",!0),ew(this,y[6]||"",!0),this.m=tl(y[7]||"")):(this.h=!1,this.i=new rl(null,this.h))}Ei.prototype.toString=function(){var d=[],y=this.j;y&&d.push(nl(y,tw,!0),":");var b=this.g;return(b||y=="file")&&(d.push("//"),(y=this.o)&&d.push(nl(y,tw,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(nl(b,b.charAt(0)=="/"?SD:kD,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",nl(b,PD)),d.join("")};function Rr(d){return new Ei(d)}function ju(d,y,b){d.j=b?tl(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Ou(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function ew(d,y,b){y instanceof rl?(d.i=y,CD(d.i,d.h)):(b||(y=nl(y,ED)),d.i=new rl(y,d.h))}function Me(d,y,b){d.i.set(y,b)}function Lu(d){return Me(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function tl(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function nl(d,y,b){return typeof d=="string"?(d=encodeURI(d).replace(y,TD),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function TD(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var tw=/[#\/\?@]/g,kD=/[#\?:]/g,SD=/[#\?]/g,ED=/[#\?@]/g,PD=/#/g;function rl(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function ys(d){d.g||(d.g=new Map,d.h=0,d.i&&bD(d.i,function(y,b){d.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}t=rl.prototype,t.add=function(d,y){ys(this),this.i=null,d=Co(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(y),this.h+=1,this};function nw(d,y){ys(d),y=Co(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function rw(d,y){return ys(d),y=Co(d,y),d.g.has(y)}t.forEach=function(d,y){ys(this),this.g.forEach(function(b,P){b.forEach(function(O){d.call(y,O,P,this)},this)},this)},t.na=function(){ys(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let P=0;P<y.length;P++){const O=d[P];for(let L=0;L<O.length;L++)b.push(y[P])}return b},t.V=function(d){ys(this);let y=[];if(typeof d=="string")rw(this,d)&&(y=y.concat(this.g.get(Co(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)y=y.concat(d[b])}return y},t.set=function(d,y){return ys(this),this.i=null,d=Co(this,d),rw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function sw(d,y,b){nw(d,y),0<b.length&&(d.i=null,d.g.set(Co(d,y),v(b)),d.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var P=y[b];const L=encodeURIComponent(String(P)),W=this.V(P);for(P=0;P<W.length;P++){var O=L;W[P]!==""&&(O+="="+encodeURIComponent(String(W[P]))),d.push(O)}}return this.i=d.join("&")};function Co(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function CD(d,y){y&&!d.j&&(ys(d),d.i=null,d.g.forEach(function(b,P){var O=P.toLowerCase();P!=O&&(nw(this,P),sw(this,O,b))},d)),d.j=y}function ID(d,y){const b=new Za;if(a.Image){const P=new Image;P.onload=m(vs,b,"TestLoadImage: loaded",!0,y,P),P.onerror=m(vs,b,"TestLoadImage: error",!1,y,P),P.onabort=m(vs,b,"TestLoadImage: abort",!1,y,P),P.ontimeout=m(vs,b,"TestLoadImage: timeout",!1,y,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else y(!1)}function AD(d,y){const b=new Za,P=new AbortController,O=setTimeout(()=>{P.abort(),vs(b,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:P.signal}).then(L=>{clearTimeout(O),L.ok?vs(b,"TestPingServer: ok",!0,y):vs(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(O),vs(b,"TestPingServer: error",!1,y)})}function vs(d,y,b,P,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),P(b)}catch{}}function RD(){this.g=new fD}function ND(d,y,b){const P=b||"";try{J_(d,function(O,L){let W=O;c(O)&&(W=Gp(O)),y.push(P+L+"="+encodeURIComponent(W))})}catch(O){throw y.push(P+"type="+encodeURIComponent("_badmap")),O}}function Vu(d){this.l=d.Ub||null,this.j=d.eb||!1}g(Vu,Kp),Vu.prototype.g=function(){return new Fu(this.l,this.j)},Vu.prototype.i=function(d){return function(){return d}}({});function Fu(d,y){It.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Fu,It),t=Fu.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,il(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sl(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,il(this)),this.g&&(this.readyState=3,il(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;iw(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function iw(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?sl(this):il(this),this.readyState==3&&iw(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,sl(this))},t.Qa=function(d){this.g&&(this.response=d,sl(this))},t.ga=function(){this.g&&sl(this)};function sl(d){d.readyState=4,d.l=null,d.j=null,d.v=null,il(d)}t.setRequestHeader=function(d,y){this.u.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=y.next();return d.join(`\r
`)};function il(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Fu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ow(d){let y="";return M(d,function(b,P){y+=P,y+=":",y+=b,y+=`\r
`}),y}function sm(d,y,b){e:{for(P in b){var P=!1;break e}P=!0}P||(b=ow(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):Me(d,y,b))}function Ke(d){It.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Ke,It);var DD=/^https?$/i,MD=["POST","PUT"];t=Ke.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,y,b,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xp.g(),this.v=this.o?j_(this.o):j_(Xp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(L){aw(this,L);return}if(d=b||"",b=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var O in P)b.set(O,P[O]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const L of P.keys())b.set(L,P.get(L));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(b.keys()).find(L=>L.toLowerCase()=="content-type"),O=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(MD,y,void 0))||P||O||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of b)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uw(this),this.u=!0,this.g.send(d),this.u=!1}catch(L){aw(this,L)}};function aw(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,lw(d),Uu(d)}function lw(d){d.A||(d.A=!0,qt(d,"complete"),qt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,qt(this,"complete"),qt(this,"abort"),Uu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Uu(this,!0)),Ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?cw(this):this.bb())},t.bb=function(){cw(this)};function cw(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Nr(d)!=4||d.Z()!=2)){if(d.u&&Nr(d)==4)R_(d.Ea,0,d);else if(qt(d,"readystatechange"),Nr(d)==4){d.h=!1;try{const W=d.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var P;if(P=W===0){var O=String(d.D).match(Z_)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),P=!DD.test(O?O.toLowerCase():"")}b=P}if(b)qt(d,"complete"),qt(d,"success");else{d.m=6;try{var L=2<Nr(d)?d.g.statusText:""}catch{L=""}d.l=L+" ["+d.Z()+"]",lw(d)}}finally{Uu(d)}}}}function Uu(d,y){if(d.g){uw(d);const b=d.g,P=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||qt(d,"ready");try{b.onreadystatechange=P}catch{}}}function uw(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Nr(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Nr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),hD(y)}};function dw(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function jD(d){const y={};d=(d.g&&2<=Nr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(x(d[P]))continue;var b=N(d[P]);const O=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const L=y[O]||[];y[O]=L,L.push(b)}S(y,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ol(d,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||y}function hw(d){this.Aa=0,this.i=[],this.j=new Za,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ol("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ol("baseRetryDelayMs",5e3,d),this.cb=ol("retryDelaySeedMs",1e4,d),this.Wa=ol("forwardChannelMaxRetries",2,d),this.wa=ol("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new G_(d&&d.concurrentRequestLimit),this.Da=new RD,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hw.prototype,t.la=8,t.G=1,t.connect=function(d,y,b,P){Gt(0),this.W=d,this.H=y||{},b&&P!==void 0&&(this.H.OSID=b,this.H.OAID=P),this.F=this.X,this.I=ww(this,null,this.W),Bu(this)};function im(d){if(fw(d),d.G==3){var y=d.U++,b=Rr(d.I);if(Me(b,"SID",d.K),Me(b,"RID",y),Me(b,"TYPE","terminate"),al(d,b),y=new gs(d,d.j,y),y.L=2,y.v=Lu(Rr(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=y.v,b=!0),b||(y.g=bw(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Mu(y)}_w(d)}function zu(d){d.g&&(am(d),d.g.cancel(),d.g=null)}function fw(d){zu(d),d.u&&(a.clearTimeout(d.u),d.u=null),$u(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Bu(d){if(!K_(d.h)&&!d.s){d.s=!0;var y=d.Ga;X||te(),U||(X(),U=!0),q.add(y,d),d.B=0}}function OD(d,y){return Q_(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ja(p(d.Ga,d,y),xw(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const O=new gs(this,this.j,d);let L=this.o;if(this.S&&(L?(L=k(L),I(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var P=this.i[b];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(y+=P,4096<y){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=mw(this,O,y),b=Rr(this.I),Me(b,"RID",d),Me(b,"CVER",22),this.D&&Me(b,"X-HTTP-Session-Id",this.D),al(this,b),L&&(this.O?y="headers="+encodeURIComponent(String(ow(L)))+"&"+y:this.m&&sm(b,this.m,L)),rm(this.h,O),this.Ua&&Me(b,"TYPE","init"),this.P?(Me(b,"$req",y),Me(b,"SID","null"),O.T=!0,Zp(O,b,null)):Zp(O,b,y),this.G=2}}else this.G==3&&(d?pw(this,d):this.i.length==0||K_(this.h)||pw(this))};function pw(d,y){var b;y?b=y.l:b=d.U++;const P=Rr(d.I);Me(P,"SID",d.K),Me(P,"RID",b),Me(P,"AID",d.T),al(d,P),d.m&&d.o&&sm(P,d.m,d.o),b=new gs(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),y&&(d.i=y.D.concat(d.i)),y=mw(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),rm(d.h,b),Zp(b,P,y)}function al(d,y){d.H&&M(d.H,function(b,P){Me(y,P,b)}),d.l&&J_({},function(b,P){Me(y,P,b)})}function mw(d,y,b){b=Math.min(d.i.length,b);var P=d.l?p(d.l.Na,d.l,d):null;e:{var O=d.i;let L=-1;for(;;){const W=["count="+b];L==-1?0<b?(L=O[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let Ie=!0;for(let _t=0;_t<b;_t++){let we=O[_t].g;const At=O[_t].map;if(we-=L,0>we)L=Math.max(0,O[_t].g-100),Ie=!1;else try{ND(At,W,"req"+we+"_")}catch{P&&P(At)}}if(Ie){P=W.join("&");break e}}}return d=d.i.splice(0,b),y.D=d,P}function gw(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;X||te(),U||(X(),U=!0),q.add(y,d),d.v=0}}function om(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ja(p(d.Fa,d),xw(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,yw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ja(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),zu(this),yw(this))};function am(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function yw(d){d.g=new gs(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=Rr(d.qa);Me(y,"RID","rpc"),Me(y,"SID",d.K),Me(y,"AID",d.T),Me(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&Me(y,"TO",d.ja),Me(y,"TYPE","xmlhttp"),al(d,y),d.m&&d.o&&sm(y,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=Lu(Rr(y)),b.m=null,b.P=!0,W_(b,d)}t.Za=function(){this.C!=null&&(this.C=null,zu(this),om(this),Gt(19))};function $u(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function vw(d,y){var b=null;if(d.g==y){$u(d),am(d),d.g=null;var P=2}else if(nm(d.h,y))b=y.D,Y_(d.h,y),P=1;else return;if(d.G!=0){if(y.o)if(P==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var O=d.B;P=Ru(),qt(P,new U_(P,b)),Bu(d)}else gw(d);else if(O=y.s,O==3||O==0&&0<y.X||!(P==1&&OD(d,y)||P==2&&om(d)))switch(b&&0<b.length&&(y=d.h,y.i=y.i.concat(b)),O){case 1:Pi(d,5);break;case 4:Pi(d,10);break;case 3:Pi(d,6);break;default:Pi(d,2)}}}function xw(d,y){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*y}function Pi(d,y){if(d.j.info("Error code "+y),y==2){var b=p(d.fb,d),P=d.Xa;const O=!P;P=new Ei(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ju(P,"https"),Lu(P),O?ID(P.toString(),b):AD(P.toString(),b)}else Gt(2);d.G=0,d.l&&d.l.sa(y),_w(d),fw(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function _w(d){if(d.G=0,d.ka=[],d.l){const y=X_(d.h);(y.length!=0||d.i.length!=0)&&(_(d.ka,y),_(d.ka,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.ra()}}function ww(d,y,b){var P=b instanceof Ei?Rr(b):new Ei(b);if(P.g!="")y&&(P.g=y+"."+P.g),Ou(P,P.s);else{var O=a.location;P=O.protocol,y=y?y+"."+O.hostname:O.hostname,O=+O.port;var L=new Ei(null);P&&ju(L,P),y&&(L.g=y),O&&Ou(L,O),b&&(L.l=b),P=L}return b=d.D,y=d.ya,b&&y&&Me(P,b,y),Me(P,"VER",d.la),al(d,P),P}function bw(d,y,b){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Ke(new Vu({eb:b})):new Ke(d.pa),y.Ha(d.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tw(){}t=Tw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Wu(){}Wu.prototype.g=function(d,y){return new pn(d,y)};function pn(d,y){It.call(this),this.g=new hw(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!x(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Io(this)}g(pn,It),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){im(this.g)},pn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=Gp(d),d=b);y.i.push(new xD(y.Ya++,d)),y.G==3&&Bu(y)},pn.prototype.N=function(){this.g.l=null,delete this.j,im(this.g),delete this.g,pn.aa.N.call(this)};function kw(d){Qp.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const b in y){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}g(kw,Qp);function Sw(){Yp.call(this),this.status=1}g(Sw,Yp);function Io(d){this.g=d}g(Io,Tw),Io.prototype.ua=function(){qt(this.g,"a")},Io.prototype.ta=function(d){qt(this.g,new kw(d))},Io.prototype.sa=function(d){qt(this.g,new Sw)},Io.prototype.ra=function(){qt(this.g,"b")},Wu.prototype.createWebChannel=Wu.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,VI=function(){return new Wu},LI=function(){return Ru()},OI=ki,$y={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nu.NO_ERROR=0,Nu.TIMEOUT=8,Nu.HTTP_ERROR=6,Zd=Nu,z_.COMPLETE="complete",jI=z_,O_.EventType=Ya,Ya.OPEN="a",Ya.CLOSE="b",Ya.ERROR="c",Ya.MESSAGE="d",It.prototype.listen=It.prototype.K,Al=O_,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,MI=Ke}).apply(typeof hd<"u"?hd:typeof self<"u"?self:typeof window<"u"?window:{});const E1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $a="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=new Zf("@firebase/firestore");function gl(){return co.logLevel}function Q(t,...e){if(co.logLevel<=ge.DEBUG){const n=e.map(Qv);co.debug(`Firestore (${$a}): ${t}`,...n)}}function ls(t,...e){if(co.logLevel<=ge.ERROR){const n=e.map(Qv);co.error(`Firestore (${$a}): ${t}`,...n)}}function Ea(t,...e){if(co.logLevel<=ge.WARN){const n=e.map(Qv);co.warn(`Firestore (${$a}): ${t}`,...n)}}function Qv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${$a}) INTERNAL ASSERTION FAILED: `+t;throw ls(e),new Error(e)}function Ce(t,e){t||ie()}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class z3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class B3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $3{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new FI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new Vt(e)}}class W3{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class H3{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new W3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ce(this.o===void 0);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new q3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=K3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function be(t,e){return t<e?-1:t>e?1:0}function Pa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new pt(0,0))}static max(){return new oe(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Oc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends Oc{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const Q3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Oc{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return Q3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new G(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Le.fromString(e))}static fromName(e){return new ee(Le.fromString(e).popFirst(5))}static empty(){return new ee(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Le(e.slice()))}}function Y3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new oi(s,ee.empty(),e)}function X3(t){return new oi(t.readTime,t.key,-1)}class oi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new oi(oe.min(),ee.empty(),-1)}static max(){return new oi(oe.max(),ee.empty(),-1)}}function J3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fu(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==Z3)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function t6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yv.oe=-1;function rp(t){return t==null}function Qh(t){return t===0&&1/t==-1/0}function n6(t){return typeof t=="number"&&Number.isInteger(t)&&!Qh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fd(this.root,e,this.comparator,!0)}}class fd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=s??Tt.EMPTY,this.right=i??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new C1(this.data.getIterator())}getIteratorFrom(e){return new C1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class C1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new Et(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new BI("Invalid base64 string: "+i):i}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const r6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ai(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=r6.exec(t);if(Ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function uo(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jv(t){const e=t.mapValue.fields.__previous_value__;return Xv(e)?Jv(e):e}function Lc(t){const e=ai(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Vc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Vc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd={mapValue:{}};function ho(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xv(t)?4:o6(t)?9007199254740991:i6(t)?10:11:ie()}function Er(t,e){if(t===e)return!0;const n=ho(t);if(n!==ho(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lc(t).isEqual(Lc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ai(s.timestampValue),a=ai(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return uo(s.bytesValue).isEqual(uo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Xe(s.geoPointValue.latitude)===Xe(i.geoPointValue.latitude)&&Xe(s.geoPointValue.longitude)===Xe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Xe(s.integerValue)===Xe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Xe(s.doubleValue),a=Xe(i.doubleValue);return o===a?Qh(o)===Qh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Pa(t.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(P1(o)!==P1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Er(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Fc(t,e){return(t.values||[]).find(n=>Er(n,e))!==void 0}function Ca(t,e){if(t===e)return 0;const n=ho(t),r=ho(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Xe(i.integerValue||i.doubleValue),l=Xe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return I1(t.timestampValue,e.timestampValue);case 4:return I1(Lc(t),Lc(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(i,o){const a=uo(i),l=uo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=be(a[c],l[c]);if(u!==0)return u}return be(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=be(Xe(i.latitude),Xe(o.latitude));return a!==0?a:be(Xe(i.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return A1(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const h=i.fields||{},p=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,g=(l=p.value)===null||l===void 0?void 0:l.arrayValue,v=be(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:A1(m,g)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===pd.mapValue&&o===pd.mapValue)return 0;if(i===pd.mapValue)return 1;if(o===pd.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const p=be(l[h],u[h]);if(p!==0)return p;const m=Ca(a[l[h]],c[u[h]]);if(m!==0)return m}return be(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ie()}}function I1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=ai(t),r=ai(e),s=be(n.seconds,r.seconds);return s!==0?s:be(n.nanos,r.nanos)}function A1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ca(n[s],r[s]);if(i)return i}return be(n.length,r.length)}function Ia(t){return Wy(t)}function Wy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ai(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return uo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Wy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Wy(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function R1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hy(t){return!!t&&"integerValue"in t}function Zv(t){return!!t&&"arrayValue"in t}function N1(t){return!!t&&"nullValue"in t}function D1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function eh(t){return!!t&&"mapValue"in t}function i6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Yl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return wo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Yl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function o6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!eh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yl(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Yl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());eh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];eh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){wo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new sn(Yl(this.value))}}function $I(t){const e=[];return wo(t.fields,(n,r)=>{const s=new kt([n]);if(eh(r)){const i=$I(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,oe.min(),oe.min(),oe.min(),sn.empty(),0)}static newFoundDocument(e,n,r,s){return new Ut(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new Ut(e,2,n,oe.min(),oe.min(),sn.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,oe.min(),oe.min(),sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.position=e,this.inclusive=n}}function M1(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=Ca(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function j1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n="asc"){this.field=e,this.dir=n}}function a6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WI=class{};class ot extends WI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new c6(e,n,r):n==="array-contains"?new h6(e,r):n==="in"?new f6(e,r):n==="not-in"?new p6(e,r):n==="array-contains-any"?new m6(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new u6(e,r):new d6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ca(n,this.value)):n!==null&&ho(this.value)===ho(n)&&this.matchesComparison(Ca(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends WI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new rr(e,n)}matches(e){return HI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function HI(t){return t.op==="and"}function qI(t){return l6(t)&&HI(t)}function l6(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function qy(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+Ia(t.value);if(qI(t))return t.filters.map(e=>qy(e)).join(",");{const e=t.filters.map(n=>qy(n)).join(",");return`${t.op}(${e})`}}function GI(t,e){return t instanceof ot?function(r,s){return s instanceof ot&&r.op===s.op&&r.field.isEqual(s.field)&&Er(r.value,s.value)}(t,e):t instanceof rr?function(r,s){return s instanceof rr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&GI(o,s.filters[a]),!0):!1}(t,e):void ie()}function KI(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${Ia(n.value)}`}(t):t instanceof rr?function(n){return n.op.toString()+" {"+n.getFilters().map(KI).join(" ,")+"}"}(t):"Filter"}class c6 extends ot{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class u6 extends ot{constructor(e,n){super(e,"in",n),this.keys=QI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class d6 extends ot{constructor(e,n){super(e,"not-in",n),this.keys=QI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class h6 extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zv(n)&&Fc(n.arrayValue,this.value)}}class f6 extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fc(this.value.arrayValue,n)}}class p6 extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fc(this.value.arrayValue,n)}}class m6 extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function O1(t,e=null,n=[],r=[],s=null,i=null,o=null){return new g6(t,e,n,r,s,i,o)}function ex(t){const e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),rp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ia(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ia(r)).join(",")),e.ue=n}return e.ue}function tx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!a6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!j1(t.startAt,e.startAt)&&j1(t.endAt,e.endAt)}function Gy(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function y6(t,e,n,r,s,i,o,a){return new Wa(t,e,n,r,s,i,o,a)}function nx(t){return new Wa(t)}function L1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YI(t){return t.collectionGroup!==null}function Xl(t){const e=ae(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Et(kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Uc(i,r))}),n.has(kt.keyField().canonicalString())||e.ce.push(new Uc(kt.keyField(),r))}return e.ce}function _r(t){const e=ae(t);return e.le||(e.le=v6(e,Xl(t))),e.le}function v6(t,e){if(t.limitType==="F")return O1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Uc(s.field,i)});const n=t.endAt?new Yh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yh(t.startAt.position,t.startAt.inclusive):null;return O1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ky(t,e){const n=t.filters.concat([e]);return new Wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qy(t,e,n){return new Wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sp(t,e){return tx(_r(t),_r(e))&&t.limitType===e.limitType}function XI(t){return`${ex(_r(t))}|lt:${t.limitType}`}function Oo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>KI(s)).join(", ")}]`),rp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ia(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ia(s)).join(",")),`Target(${r})`}(_r(t))}; limitType=${t.limitType})`}function ip(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Xl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=M1(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Xl(r),s)||r.endAt&&!function(o,a,l){const c=M1(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Xl(r),s))}(t,e)}function x6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JI(t){return(e,n)=>{let r=!1;for(const s of Xl(t)){const i=_6(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function _6(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ca(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return zI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6=new Ge(ee.comparator);function cs(){return w6}const ZI=new Ge(ee.comparator);function Rl(...t){let e=ZI;for(const n of t)e=e.insert(n.key,n);return e}function e2(t){let e=ZI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qi(){return Jl()}function t2(){return Jl()}function Jl(){return new Ha(t=>t.toString(),(t,e)=>t.isEqual(e))}const b6=new Ge(ee.comparator),T6=new Et(ee.comparator);function pe(...t){let e=T6;for(const n of t)e=e.add(n);return e}const k6=new Et(be);function S6(){return k6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function n2(t){return{integerValue:""+t}}function E6(t,e){return n6(e)?n2(e):rx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this._=void 0}}function P6(t,e,n){return t instanceof Xh?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Xv(i)&&(i=Jv(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof zc?s2(t,e):t instanceof Bc?i2(t,e):function(s,i){const o=r2(s,i),a=V1(o)+V1(s.Pe);return Hy(o)&&Hy(s.Pe)?n2(a):rx(s.serializer,a)}(t,e)}function C6(t,e,n){return t instanceof zc?s2(t,e):t instanceof Bc?i2(t,e):n}function r2(t,e){return t instanceof Jh?function(r){return Hy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Xh extends op{}class zc extends op{constructor(e){super(),this.elements=e}}function s2(t,e){const n=o2(e);for(const r of t.elements)n.some(s=>Er(s,r))||n.push(r);return{arrayValue:{values:n}}}class Bc extends op{constructor(e){super(),this.elements=e}}function i2(t,e){let n=o2(e);for(const r of t.elements)n=n.filter(s=>!Er(s,r));return{arrayValue:{values:n}}}class Jh extends op{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function V1(t){return Xe(t.integerValue||t.doubleValue)}function o2(t){return Zv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function I6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof zc&&s instanceof zc||r instanceof Bc&&s instanceof Bc?Pa(r.elements,s.elements,Er):r instanceof Jh&&s instanceof Jh?Er(r.Pe,s.Pe):r instanceof Xh&&s instanceof Xh}(t.transform,e.transform)}class A6{constructor(e,n){this.version=e,this.transformResults=n}}class Jt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function th(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ap{}function a2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lp(t.key,Jt.none()):new mu(t.key,t.data,Jt.none());{const n=t.data,r=sn.empty();let s=new Et(kt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new _i(t.key,r,new xn(s.toArray()),Jt.none())}}function R6(t,e,n){t instanceof mu?function(s,i,o){const a=s.value.clone(),l=U1(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof _i?function(s,i,o){if(!th(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=U1(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(l2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Zl(t,e,n,r){return t instanceof mu?function(i,o,a,l){if(!th(i.precondition,o))return a;const c=i.value.clone(),u=z1(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof _i?function(i,o,a,l){if(!th(i.precondition,o))return a;const c=z1(i.fieldTransforms,l,o),u=o.data;return u.setAll(l2(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return th(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function N6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=r2(r.transform,s||null);i!=null&&(n===null&&(n=sn.empty()),n.set(r.field,i))}return n||null}function F1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Pa(r,s,(i,o)=>I6(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mu extends ap{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class _i extends ap{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function l2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function U1(t,e,n){const r=new Map;Ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,C6(o,a,n[s]))}return r}function z1(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,P6(i,o,e))}return r}class lp extends ap{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D6 extends ap{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&R6(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Zl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Zl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=t2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=a2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Pa(this.mutations,e.mutations,(n,r)=>F1(n,r))&&Pa(this.baseMutations,e.baseMutations,(n,r)=>F1(n,r))}}class sx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ce(e.mutations.length===r.length);let s=function(){return b6}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new sx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,ve;function L6(t){switch(t){default:return ie();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function c2(t){if(t===void 0)return ls("GRPC error has no .code"),V.UNKNOWN;switch(t){case rt.OK:return V.OK;case rt.CANCELLED:return V.CANCELLED;case rt.UNKNOWN:return V.UNKNOWN;case rt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case rt.INTERNAL:return V.INTERNAL;case rt.UNAVAILABLE:return V.UNAVAILABLE;case rt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case rt.NOT_FOUND:return V.NOT_FOUND;case rt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case rt.ABORTED:return V.ABORTED;case rt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case rt.DATA_LOSS:return V.DATA_LOSS;default:return ie()}}(ve=rt||(rt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=new Ji([4294967295,4294967295],0);function B1(t){const e=V6().encode(t),n=new DI;return n.update(e),new Uint8Array(n.digest())}function $1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ji([n,r],0),new Ji([s,i],0)]}class ix{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Nl(`Invalid padding: ${n}`);if(r<0)throw new Nl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Nl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ji.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ji.fromNumber(r)));return s.compare(F6)===1&&(s=new Ji([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=B1(e),[r,s]=$1(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ix(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=B1(e),[r,s]=$1(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cp(oe.min(),s,new Ge(be),cs(),pe())}}class gu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new gu(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class u2{constructor(e,n){this.targetId=e,this.me=n}}class d2{constructor(e,n,r=Ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class W1{constructor(){this.fe=0,this.ge=q1(),this.pe=Ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new gu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=q1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class U6{constructor(e){this.Le=e,this.Be=new Map,this.ke=cs(),this.qe=H1(),this.Qe=new Ge(be)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Gy(i))if(r===0){const o=new ee(i.path);this.Ue(n,o,Ut.newNoDocument(o,oe.min()))}else Ce(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=uo(r).toUint8Array()}catch(l){if(l instanceof BI)return Ea("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ix(o,s,i)}catch(l){return Ea(l instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Gy(a.target)){const l=new ee(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ut.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=pe();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new cp(e,n,this.Qe,this.ke,r);return this.ke=cs(),this.qe=H1(),this.Qe=new Ge(be),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new W1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Et(be),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new W1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function H1(){return new Ge(ee.comparator)}function q1(){return new Ge(ee.comparator)}const z6={asc:"ASCENDING",desc:"DESCENDING"},B6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$6={and:"AND",or:"OR"};class W6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yy(t,e){return t.useProto3Json||rp(e)?e:{value:e}}function Zh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H6(t,e){return Zh(t,e.toTimestamp())}function wr(t){return Ce(!!t),oe.fromTimestamp(function(n){const r=ai(n);return new pt(r.seconds,r.nanos)}(t))}function ox(t,e){return Xy(t,e).canonicalString()}function Xy(t,e){const n=function(s){return new Le(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function f2(t){const e=Le.fromString(t);return Ce(v2(e)),e}function Jy(t,e){return ox(t.databaseId,e.path)}function Hm(t,e){const n=f2(e);if(n.get(1)!==t.databaseId.projectId)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(m2(n))}function p2(t,e){return ox(t.databaseId,e)}function q6(t){const e=f2(t);return e.length===4?Le.emptyPath():m2(e)}function Zy(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function m2(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function G1(t,e,n){return{name:Jy(t,e),fields:n.value.mapValue.fields}}function G6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Ce(u===void 0||typeof u=="string"),Ct.fromBase64String(u||"")):(Ce(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Ct.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?V.UNKNOWN:c2(c.code);return new G(u,c.message||"")}(o);n=new d2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Hm(t,r.document.name),i=wr(r.document.updateTime),o=r.document.createTime?wr(r.document.createTime):oe.min(),a=new sn({mapValue:{fields:r.document.fields}}),l=Ut.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new nh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Hm(t,r.document),i=r.readTime?wr(r.readTime):oe.min(),o=Ut.newNoDocument(s,i),a=r.removedTargetIds||[];n=new nh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Hm(t,r.document),i=r.removedTargetIds||[];n=new nh([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new O6(s,i),a=r.targetId;n=new u2(a,o)}}return n}function K6(t,e){let n;if(e instanceof mu)n={update:G1(t,e.key,e.value)};else if(e instanceof lp)n={delete:Jy(t,e.key)};else if(e instanceof _i)n={update:G1(t,e.key,e.data),updateMask:rU(e.fieldMask)};else{if(!(e instanceof D6))return ie();n={verify:Jy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Xh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:H6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function Q6(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?wr(s.updateTime):wr(i);return o.isEqual(oe.min())&&(o=wr(i)),new A6(o,s.transformResults||[])}(n,e))):[]}function Y6(t,e){return{documents:[p2(t,e.path)]}}function X6(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=p2(t,s);const i=function(c){if(c.length!==0)return y2(rr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Lo(p.field),direction:eU(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Yy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function J6(t){let e=q6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ce(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const p=g2(h);return p instanceof rr&&qI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(g){return new Uc(Vo(g.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,rp(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new Yh(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new Yh(m,p)}(n.endAt)),y6(e,s,o,i,a,"F",l,c)}function Z6(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function g2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vo(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vo(n.unaryFilter.field);return ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vo(n.unaryFilter.field);return ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vo(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return ot.create(Vo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rr.create(n.compositeFilter.filters.map(r=>g2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function eU(t){return z6[t]}function tU(t){return B6[t]}function nU(t){return $6[t]}function Lo(t){return{fieldPath:t.canonicalString()}}function Vo(t){return kt.fromServerFormat(t.fieldPath)}function y2(t){return t instanceof ot?function(n){if(n.op==="=="){if(D1(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NAN"}};if(N1(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D1(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NAN"}};if(N1(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(n.field),op:tU(n.op),value:n.value}}}(t):t instanceof rr?function(n){const r=n.getFilters().map(s=>y2(s));return r.length===1?r[0]:{compositeFilter:{op:nU(n.op),filters:r}}}(t):ie()}function rU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function v2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r,s,i=oe.min(),o=oe.min(),a=Ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e){this.ct=e}}function iU(t){const e=J6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.un=new aU}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(oi.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(oi.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class aU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Et(Le.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Et(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Aa(0)}static kn(){return new Aa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(){this.changes=new Ha(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Zl(r.mutation,s,xn.empty(),pt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=qi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Rl();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=qi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=cs();const o=Jl(),a=function(){return Jl()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof _i)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Zl(u.mutation,c,u.mutation.getFieldMask(),pt.now())):o.set(c.key,xn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new cU(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Jl();let s=new Ge((o,a)=>o-a),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||xn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||pe()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=t2();u.forEach(p=>{if(!i.has(p)){const m=a2(n.get(p),r.get(p));m!==null&&h.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(qi());let a=-1,l=i;return o.next(c=>F.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?F.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,pe())).next(u=>({batchId:a,changes:e2(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=Rl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Rl();return this.indexManager.getCollectionParents(e,i).next(a=>F.forEach(a,l=>{const c=function(h,p){return new Wa(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ut.newInvalidDocument(u)))});let a=Rl();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Zl(u.mutation,c,xn.empty(),pt.now()),ip(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:wr(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:iU(s.bundledQuery),readTime:wr(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(){this.overlays=new Ge(ee.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qi();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=qi(),i=n.length+1,o=new ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ge((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=qi(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=qi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return F.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new j6(n,r));let i=this.Ir.get(n);i===void 0&&(i=pe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.Tr=new Et(gt.Er),this.dr=new Et(gt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new gt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new gt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new Le([])),r=new gt(n,e),s=new gt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new Le([])),r=new gt(n,e),s=new gt(n,e+1);let i=pe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new gt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||be(e.wr,n.wr)}static Ar(e,n){return be(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Et(gt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new M6(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new gt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gt(n,0),s=new gt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(be);return n.forEach(s=>{const i=new gt(s,0),o=new gt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new gt(new ee(i),0);let a=new Et(be);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new gt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new gt(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e){this.Mr=e,this.docs=function(){return new Ge(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=cs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ut.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=cs();const o=n.path,a=new ee(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||J3(X3(u),r)<=0||(s.has(u.key)||ip(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new gU(this)}getSize(e){return F.resolve(this.size)}}class gU extends lU{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.persistence=e,this.Nr=new Ha(n=>ex(n),tx),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ax,this.targetCount=0,this.kr=Aa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Aa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Yv(0),this.Kr=!1,this.Kr=!0,this.$r=new fU,this.referenceDelegate=e(this),this.Ur=new yU(this),this.indexManager=new oU,this.remoteDocumentCache=function(s){return new mU(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new sU(n),this.Gr=new dU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new pU(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new xU(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class xU extends e6{constructor(e){super(),this.currentSequenceNumber=e}}class lx{constructor(e){this.persistence=e,this.Jr=new ax,this.Yr=null}static Zr(e){return new lx(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=ee.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new cx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cV()?8:t6(Wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new _U;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(gl()<=ge.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(gl()<=ge.DEBUG&&Q("QueryEngine","Query:",Oo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(gl()<=ge.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(n))):F.resolve())}Yi(e,n){if(L1(n))return F.resolve(null);let r=_r(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Qy(n,null,"F"),r=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Qy(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return L1(n)||s.isEqual(oe.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(gl()<=ge.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Oo(n)),this.rs(e,o,n,Y3(s,-1)).next(a=>a))})}ts(e,n){let r=new Et(JI(e));return n.forEach((s,i)=>{ip(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return gl()<=ge.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Oo(n)),this.Ji.getDocumentsMatchingQuery(e,n,oi.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ge(be),this._s=new Ha(i=>ex(i),tx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uU(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function TU(t,e,n,r){return new bU(t,e,n,r)}async function x2(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=pe();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function kU(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,p=h.keys();let m=F.resolve();return p.forEach(g=>{m=m.next(()=>u.getEntry(l,g)).next(v=>{const _=c.docVersions.get(g);Ce(_!==null),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function _2(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function SU(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((u,h)=>{const p=s.get(h);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(i,u.addedDocuments,h)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Ct.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(h,m),function(v,_,w){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,m,u)&&a.push(n.Ur.updateTargetData(i,m))});let l=cs(),c=pe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(EU(i,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(oe.min())){const u=n.Ur.getLastRemoteSnapshotVersion(i).next(h=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function EU(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=cs();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function PU(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function CU(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Fs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function e0(t,e,n){const r=ae(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!pu(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function K1(t,e,n){const r=ae(t);let s=oe.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=ae(l),p=h._s.get(u);return p!==void 0?F.resolve(h.os.get(p)):h.Ur.getTargetData(c,u)}(r,o,_r(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:pe())).next(a=>(IU(r,x6(e),a),{documents:a,Ts:i})))}function IU(t,e,n){let r=t.us.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Q1{constructor(){this.activeTargetIds=S6()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AU{constructor(){this.so=new Q1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Q1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md=null;function qm(){return md===null?md=function(){return 268435456+Math.round(2147483648*Math.random())}():md++,"0x"+md.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class MU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=qm(),l=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(u=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Ea("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$a}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=NU[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=qm();return new Promise((o,a)=>{const l=new MI;l.setWithCredentials(!0),l.listenOnce(jI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Zd.NO_ERROR:const u=l.getResponseJson();Q(Mt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case Zd.TIMEOUT:Q(Mt,`RPC '${e}' ${i} timed out`),a(new G(V.DEADLINE_EXCEEDED,"Request time out"));break;case Zd.HTTP_ERROR:const h=l.getStatus();if(Q(Mt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const g=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(w)>=0?w:V.UNKNOWN}(m.status);a(new G(g,m.message))}else a(new G(V.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(V.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{Q(Mt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Q(Mt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=qm(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VI(),a=LI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");Q(Mt,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let p=!1,m=!1;const g=new DU({Io:_=>{m?Q(Mt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(Q(Mt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),Q(Mt,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},To:()=>h.close()}),v=(_,w,x)=>{_.listen(w,T=>{try{x(T)}catch(C){setTimeout(()=>{throw C},0)}})};return v(h,Al.EventType.OPEN,()=>{m||(Q(Mt,`RPC '${e}' stream ${s} transport opened.`),g.yo())}),v(h,Al.EventType.CLOSE,()=>{m||(m=!0,Q(Mt,`RPC '${e}' stream ${s} transport closed`),g.So())}),v(h,Al.EventType.ERROR,_=>{m||(m=!0,Ea(Mt,`RPC '${e}' stream ${s} transport errored:`,_),g.So(new G(V.UNAVAILABLE,"The operation could not be completed")))}),v(h,Al.EventType.MESSAGE,_=>{var w;if(!m){const x=_.data[0];Ce(!!x);const T=x,C=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(C){Q(Mt,`RPC '${e}' stream ${s} received error:`,C);const A=C.status;let M=function(E){const I=rt[E];if(I!==void 0)return c2(I)}(A),S=C.message;M===void 0&&(M=V.INTERNAL,S="Unknown error status: "+A+" with message "+C.message),m=!0,g.So(new G(M,S)),h.close()}else Q(Mt,`RPC '${e}' stream ${s} received:`,x),g.bo(x)}}),v(a,OI.STAT_EVENT,_=>{_.stat===$y.PROXY?Q(Mt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===$y.NOPROXY&&Q(Mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function Gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t){return new W6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new w2(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(ls(n.toString()),ls("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jU extends b2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=G6(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?wr(o.readTime):oe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Zy(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Gy(l)?{documents:Y6(i,l)}:{query:X6(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=h2(i,o.resumeToken);const c=Yy(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=Zh(i,o.snapshotVersion.toTimestamp());const c=Yy(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Z6(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Zy(this.serializer),n.removeTarget=e,this.a_(n)}}class OU extends b2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Q6(e.writeResults,e.commitTime),r=wr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Zy(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>K6(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Xy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Xy(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class VU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ls(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{bo(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ae(l);c.L_.add(4),await yu(c),c.q_.set("Unknown"),c.L_.delete(4),await dp(c)}(this))})}),this.q_=new VU(r,s)}}async function dp(t){if(bo(t))for(const e of t.B_)await e(!0)}async function yu(t){for(const e of t.B_)await e(!1)}function T2(t,e){const n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),fx(n)?hx(n):qa(n).r_()&&dx(n,e))}function ux(t,e){const n=ae(t),r=qa(n);n.N_.delete(e),r.r_()&&k2(n,e),n.N_.size===0&&(r.r_()?r.o_():bo(n)&&n.q_.set("Unknown"))}function dx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qa(t).A_(e)}function k2(t,e){t.Q_.xe(e),qa(t).R_(e)}function hx(t){t.Q_=new U6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qa(t).start(),t.q_.v_()}function fx(t){return bo(t)&&!qa(t).n_()&&t.N_.size>0}function bo(t){return ae(t).L_.size===0}function S2(t){t.Q_=void 0}async function UU(t){t.q_.set("Online")}async function zU(t){t.N_.forEach((e,n)=>{dx(t,e)})}async function BU(t,e){S2(t),fx(t)?(t.q_.M_(e),hx(t)):t.q_.set("Unknown")}async function $U(t,e,n){if(t.q_.set("Online"),e instanceof d2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ef(t,r)}else if(e instanceof nh?t.Q_.Ke(e):e instanceof u2?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const r=await _2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(Ct.EMPTY_BYTE_STRING,u.snapshotVersion)),k2(i,l);const h=new Fs(u.target,l,c,u.sequenceNumber);dx(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await ef(t,r)}}async function ef(t,e,n){if(!pu(e))throw e;t.L_.add(1),await yu(t),t.q_.set("Offline"),n||(n=()=>_2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await dp(t)})}function E2(t,e){return e().catch(n=>ef(t,n,e))}async function hp(t){const e=ae(t),n=li(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;WU(e);)try{const s=await PU(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,HU(e,s)}catch(s){await ef(e,s)}P2(e)&&C2(e)}function WU(t){return bo(t)&&t.O_.length<10}function HU(t,e){t.O_.push(e);const n=li(t);n.r_()&&n.V_&&n.m_(e.mutations)}function P2(t){return bo(t)&&!li(t).n_()&&t.O_.length>0}function C2(t){li(t).start()}async function qU(t){li(t).p_()}async function GU(t){const e=li(t);for(const n of t.O_)e.m_(n.mutations)}async function KU(t,e,n){const r=t.O_.shift(),s=sx.from(r,e,n);await E2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await hp(t)}async function QU(t,e){e&&li(t).V_&&await async function(r,s){if(function(o){return L6(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();li(r).s_(),await E2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await hp(r)}}(t,e),P2(t)&&C2(t)}async function X1(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=bo(n);n.L_.add(3),await yu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await dp(n)}async function YU(t,e){const n=ae(t);e?(n.L_.delete(2),await dp(n)):e||(n.L_.add(2),await yu(n),n.q_.set("Unknown"))}function qa(t){return t.K_||(t.K_=function(n,r,s){const i=ae(n);return i.w_(),new jU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:UU.bind(null,t),Ro:zU.bind(null,t),mo:BU.bind(null,t),d_:$U.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),fx(t)?hx(t):t.q_.set("Unknown")):(await t.K_.stop(),S2(t))})),t.K_}function li(t){return t.U_||(t.U_=function(n,r,s){const i=ae(n);return i.w_(),new OU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qU.bind(null,t),mo:QU.bind(null,t),f_:GU.bind(null,t),g_:KU.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await hp(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new px(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mx(t,e){if(ls("AsyncQueue",`${e}: ${t}`),pu(t))return new G(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Rl(),this.sortedSet=new Ge(this.comparator)}static emptySet(e){return new ha(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ha)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ha;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.W_=new Ge(ee.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ra{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ra(e,n,ha.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class JU{constructor(){this.queries=Z1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=Z1(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new G(V.ABORTED,"Firestore shutting down"))}}function Z1(){return new Ha(t=>XI(t),sp)}async function I2(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new XU,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=mx(o,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&gx(n)}async function A2(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ZU(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&gx(n)}function e9(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function gx(t){t.Y_.forEach(e=>{e.next()})}var t0,eT;(eT=t0||(t0={})).ea="default",eT.Cache="cache";class R2{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ra(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==t0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.key=e}}class D2{constructor(e){this.key=e}}class t9{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=JI(e),this.Ra=new ha(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new J1,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const p=s.get(u),m=ip(this.query,h)?h:null,g=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?g!==v&&(r.track({type:3,doc:m}),_=!0):this.ga(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),i=v?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,h)=>function(m,g){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return v(m)-v(g)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Ra(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new J1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new D2(r))}),this.da.forEach(r=>{e.has(r)||n.push(new N2(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ra.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class n9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class r9{constructor(e){this.key=e,this.va=!1}}class s9{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ha(a=>XI(a),sp),this.Ma=new Map,this.xa=new Set,this.Oa=new Ge(ee.comparator),this.Na=new Map,this.La=new ax,this.Ba={},this.ka=new Map,this.qa=Aa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function i9(t,e,n=!0){const r=F2(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await M2(r,e,n,!0),s}async function o9(t,e){const n=F2(t);await M2(n,e,!0,!1)}async function M2(t,e,n,r){const s=await CU(t.localStore,_r(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await a9(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&T2(t.remoteStore,s),a}async function a9(t,e,n,r,s){t.Ka=(h,p,m)=>async function(v,_,w,x){let T=_.view.ma(w);T.ns&&(T=await K1(v.localStore,_.query,!1).then(({documents:S})=>_.view.ma(S,T)));const C=x&&x.targetChanges.get(_.targetId),A=x&&x.targetMismatches.get(_.targetId)!=null,M=_.view.applyChanges(T,v.isPrimaryClient,C,A);return nT(v,_.targetId,M.wa),M.snapshot}(t,h,p,m);const i=await K1(t.localStore,e,!0),o=new t9(e,i.Ts),a=o.ma(i.documents),l=gu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);nT(t,n,c.wa);const u=new n9(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function l9(t,e,n){const r=ae(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!sp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await e0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ux(r.remoteStore,s.targetId),n0(r,s.targetId)}).catch(fu)):(n0(r,s.targetId),await e0(r.localStore,s.targetId,!0))}async function c9(t,e){const n=ae(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ux(n.remoteStore,r.targetId))}async function u9(t,e,n){const r=y9(t);try{const s=await function(o,a){const l=ae(o),c=pt.now(),u=a.reduce((m,g)=>m.add(g.key),pe());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=cs(),v=pe();return l.cs.getEntries(m,u).next(_=>{g=_,g.forEach((w,x)=>{x.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,g)).next(_=>{h=_;const w=[];for(const x of a){const T=N6(x,h.get(x.key).overlayedDocument);T!=null&&w.push(new _i(x.key,T,$I(T.value.mapValue),Jt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(_=>{p=_;const w=_.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,_.batchId,w)})}).then(()=>({batchId:p.batchId,changes:e2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ge(be)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await vu(r,s.changes),await hp(r.remoteStore)}catch(s){const i=mx(s,"Failed to persist write");n.reject(i)}}async function j2(t,e){const n=ae(t);try{const r=await SU(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ce(o.va):s.removedDocuments.size>0&&(Ce(o.va),o.va=!1))}),await vu(n,r,e)}catch(r){await fu(r)}}function tT(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ae(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const p of h.j_)p.Z_(a)&&(c=!0)}),c&&gx(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function d9(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ge(ee.comparator);o=o.insert(i,Ut.newNoDocument(i,oe.min()));const a=pe().add(i),l=new cp(oe.min(),new Map,new Ge(be),o,a);await j2(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),yx(r)}else await e0(r.localStore,e,!1).then(()=>n0(r,e,n)).catch(fu)}async function h9(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await kU(n.localStore,e);L2(n,r,null),O2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vu(n,s)}catch(s){await fu(s)}}async function f9(t,e,n){const r=ae(t);try{const s=await function(o,a){const l=ae(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ce(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);L2(r,e,n),O2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vu(r,s)}catch(s){await fu(s)}}function O2(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function L2(t,e,n){const r=ae(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function n0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||V2(t,r)})}function V2(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ux(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),yx(t))}function nT(t,e,n){for(const r of n)r instanceof N2?(t.La.addReference(r.key,e),p9(t,r)):r instanceof D2?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||V2(t,r.key)):ie()}function p9(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),yx(t))}function yx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(Le.fromString(e)),r=t.qa.next();t.Na.set(r,new r9(n)),t.Oa=t.Oa.insert(n,r),T2(t.remoteStore,new Fs(_r(nx(n.path)),r,"TargetPurposeLimboResolution",Yv.oe))}}async function vu(t,e,n){const r=ae(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=cx.Wi(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const u=ae(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>F.forEach(c,p=>F.forEach(p.$i,m=>u.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>F.forEach(p.Ui,m=>u.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!pu(h))throw h;Q("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=u.os.get(p),g=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(g);u.os=u.os.insert(p,v)}}}(r.localStore,i))}async function m9(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await x2(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new G(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vu(n,r.hs)}}function g9(t,e){const n=ae(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let s=pe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function F2(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=j2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d9.bind(null,e),e.Ca.d_=ZU.bind(null,e.eventManager),e.Ca.$a=e9.bind(null,e.eventManager),e}function y9(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f9.bind(null,e),e}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=up(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return TU(this.persistence,new wU,e.initialUser,this.serializer)}Ga(e){return new vU(lx.Zr,this.serializer)}Wa(e){return new AU}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class r0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=m9.bind(null,this.syncEngine),await YU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JU}()}createDatastore(e){const n=up(e.databaseInfo.databaseId),r=function(i){return new MU(i)}(e.databaseInfo);return function(i,o,a,l){return new LU(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new FU(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>tT(this.syncEngine,n,0),function(){return Y1.D()?new Y1:new RU}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const h=new s9(s,i,o,a,l,c);return u&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);Q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await yu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}r0.provider={build:()=>new r0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ls("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Vt.UNAUTHENTICATED,this.clientId=UI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=mx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Km(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await x2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function rT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await x9(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>X1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>X1(e.remoteStore,s)),t._onlineComponents=e}async function x9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Km(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ea("Error using user provided cache. Falling back to memory cache: "+n),await Km(t,new tf)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Km(t,new tf);return t._offlineComponents}async function z2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await rT(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await rT(t,new r0))),t._onlineComponents}function _9(t){return z2(t).then(e=>e.syncEngine)}async function B2(t){const e=await z2(t),n=e.eventManager;return n.onListen=i9.bind(null,e.syncEngine),n.onUnlisten=l9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=o9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=c9.bind(null,e.syncEngine),n}function w9(t,e,n={}){const r=new Jr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new U2({next:p=>{u.Za(),o.enqueueAndForget(()=>A2(i,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new G(V.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new G(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new R2(nx(a.path),u,{includeMetadataChanges:!0,_a:!0});return I2(i,h)}(await B2(t),t.asyncQueue,e,n,r)),r.promise}function b9(t,e,n={}){const r=new Jr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new U2({next:p=>{u.Za(),o.enqueueAndForget(()=>A2(i,h)),p.fromCache&&l.source==="server"?c.reject(new G(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new R2(a,u,{includeMetadataChanges:!0,_a:!0});return I2(i,h)}(await B2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t,e,n){if(!n)throw new G(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function T9(t,e,n,r){if(e===!0&&r===!0)throw new G(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iT(t){if(!ee.isDocumentKey(t))throw new G(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oT(t){if(ee.isDocumentKey(t))throw new G(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function zn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fp(t);throw new G(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}T9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new z3;switch(r.type){case"firstParty":return new H3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sT.get(n);r&&(Q("ComponentProvider","Removing Datastore"),sT.delete(n),r.terminate())}(this),Promise.resolve()}}function k9(t,e,n,r={}){var s;const i=(t=zn(t,pp))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ea("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Vt.MOCK_USER;else{a=rV(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Vt(c)}t._authCredentials=new B3(new FI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new To(this.firestore,e,this._query)}}class Zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class ti extends To{constructor(e,n,r){super(e,n,nx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new ee(e))}withConverter(e){return new ti(this.firestore,e,this._path)}}function Fo(t,e,...n){if(t=tt(t),W2("collection","path",e),t instanceof pp){const r=Le.fromString(e,...n);return oT(r),new ti(t,null,r)}{if(!(t instanceof Zt||t instanceof ti))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return oT(r),new ti(t.firestore,null,r)}}function xe(t,e,...n){if(t=tt(t),arguments.length===1&&(e=UI.newId()),W2("doc","path",e),t instanceof pp){const r=Le.fromString(e,...n);return iT(r),new Zt(t,null,new ee(r))}{if(!(t instanceof Zt||t instanceof ti))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return iT(r),new Zt(t.firestore,t instanceof ti?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new w2(this,"async_queue_retry"),this.Vu=()=>{const r=Gm();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Gm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Gm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Jr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pu(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ls("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=px.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class wi extends pp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new lT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lT(e),this._firestoreClient=void 0,await e}}}function S9(t,e){const n=typeof t=="object"?t:XC(),r=typeof t=="string"?t:"(default)",s=lu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=tV("firestore");i&&k9(s,...i)}return s}function mp(t){if(t._terminated)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||E9(t),t._firestoreClient}function E9(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new s6(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,$2(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new v9(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Na(Ct.fromBase64String(e))}catch(n){throw new G(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Na(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=/^__.*__$/;class C9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _i(e,this.data,this.fieldMask,n,this.fieldTransforms):new mu(e,this.data,n,this.fieldTransforms)}}class H2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _i(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function q2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class wx{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new wx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(q2(this.Cu)&&P9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class I9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||up(e)}Qu(e,n,r,s=!1){return new wx({Cu:e,methodName:n,qu:r,path:kt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _u(t){const e=t._freezeSettings(),n=up(t._databaseId);return new I9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bx(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Tx("Data must be an object, but it was:",o,r);const a=Q2(r,o);let l,c;if(i.merge)l=new xn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const p=s0(e,h,n);if(!o.contains(p))throw new G(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);X2(u,p)||u.push(p)}l=new xn(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new C9(new sn(a),l,c)}class gp extends vx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gp}}function G2(t,e,n,r){const s=t.Qu(1,e,n);Tx("Data must be an object, but it was:",s,r);const i=[],o=sn.empty();wo(r,(l,c)=>{const u=kx(e,l,n);c=tt(c);const h=s.Nu(u);if(c instanceof gp)i.push(u);else{const p=wu(c,h);p!=null&&(i.push(u),o.set(u,p))}});const a=new xn(i);return new H2(o,a,s.fieldTransforms)}function K2(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[s0(e,r,n)],l=[s];if(i.length%2!=0)throw new G(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(s0(e,i[p])),l.push(i[p+1]);const c=[],u=sn.empty();for(let p=a.length-1;p>=0;--p)if(!X2(c,a[p])){const m=a[p];let g=l[p];g=tt(g);const v=o.Nu(m);if(g instanceof gp)c.push(m);else{const _=wu(g,v);_!=null&&(c.push(m),u.set(m,_))}}const h=new xn(c);return new H2(u,h,o.fieldTransforms)}function A9(t,e,n,r=!1){return wu(n,t.Qu(r?4:3,e))}function wu(t,e){if(Y2(t=tt(t)))return Tx("Unsupported field value:",e,t),Q2(t,e);if(t instanceof vx)return function(r,s){if(!q2(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=wu(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return E6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=pt.fromDate(r);return{timestampValue:Zh(s.serializer,i)}}if(r instanceof pt){const i=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zh(s.serializer,i)}}if(r instanceof xx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Na)return{bytesValue:h2(s.serializer,r._byteString)};if(r instanceof Zt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ox(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof _x)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return rx(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${fp(r)}`)}(t,e)}function Q2(t,e){const n={};return zI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(t,(r,s)=>{const i=wu(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Y2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof xx||t instanceof Na||t instanceof Zt||t instanceof vx||t instanceof _x)}function Tx(t,e,n){if(!Y2(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=fp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function s0(t,e,n){if((e=tt(e))instanceof xu)return e._internalPath;if(typeof e=="string")return kx(t,e);throw nf("Field path arguments must be of type string or ",t,!1,void 0,n)}const R9=new RegExp("[~\\*/\\[\\]]");function kx(t,e,n){if(e.search(R9)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xu(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new G(V.INVALID_ARGUMENT,a+t+l)}function X2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class N9 extends J2{data(){return super.data()}}function yp(t,e){return typeof e=="string"?kx(t,e):e instanceof xu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sx{}class Z2 extends Sx{}function i0(t,e,...n){let r=[];e instanceof Sx&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Ex).length,a=i.filter(l=>l instanceof vp).length;if(o>1||o>0&&a>0)throw new G(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class vp extends Z2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new vp(e,n,r)}_apply(e){const n=this._parse(e);return eA(e._query,n),new To(e.firestore,e.converter,Ky(e._query,n))}_parse(e){const n=_u(e.firestore);return function(i,o,a,l,c,u,h){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new G(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){uT(h,u);const m=[];for(const g of h)m.push(cT(l,i,g));p={arrayValue:{values:m}}}else p=cT(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||uT(h,u),p=A9(a,o,h,u==="in"||u==="not-in");return ot.create(c,u,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function o0(t,e,n){const r=e,s=yp("where",t);return vp._create(s,r,n)}class Ex extends Sx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ex(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)eA(o,l),o=Ky(o,l)}(e._query,n),new To(e.firestore,e.converter,Ky(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Px extends Z2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Px(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uc(i,o)}(e._query,this._field,this._direction);return new To(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Wa(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function M9(t,e="asc"){const n=e,r=yp("orderBy",t);return Px._create(r,n)}function cT(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new G(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YI(e)&&n.indexOf("/")!==-1)throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!ee.isDocumentKey(r))throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return R1(t,new ee(r))}if(n instanceof Zt)return R1(t,n._key);throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fp(n)}.`)}function uT(t,e){if(!Array.isArray(t)||t.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eA(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class j9{convertValue(e,n="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return wo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Xe(o.doubleValue));return new _x(i)}convertGeoPoint(e){return new xx(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lc(e));default:return null}}convertTimestamp(e){const n=ai(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);Ce(v2(r));const s=new Vc(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||ls(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tA extends J2{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class rh extends tA{data(e={}){return super.data(e)}}class O9{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Dl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new rh(this._firestore,this._userDataWriter,r.key,r,new Dl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new rh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Dl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new rh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Dl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:L9(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function L9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t){t=zn(t,Zt);const e=zn(t.firestore,wi);return w9(mp(e),t._key).then(n=>V9(e,t,n))}class nA extends j9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Na(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}function a0(t){t=zn(t,To);const e=zn(t.firestore,wi),n=mp(e),r=new nA(e);return D9(t._query),b9(n,t._query).then(s=>new O9(e,r,t,s))}function Jo(t,e,n){t=zn(t,Zt);const r=zn(t.firestore,wi),s=Cx(t.converter,e,n);return bu(r,[bx(_u(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Jt.none())])}function Ye(t,e,n,...r){t=zn(t,Zt);const s=zn(t.firestore,wi),i=_u(s);let o;return o=typeof(e=tt(e))=="string"||e instanceof xu?K2(i,"updateDoc",t._key,e,n,r):G2(i,"updateDoc",t._key,e),bu(s,[o.toMutation(t._key,Jt.exists(!0))])}function l0(t){return bu(zn(t.firestore,wi),[new lp(t._key,Jt.none())])}function hT(t,e){const n=zn(t.firestore,wi),r=xe(t),s=Cx(t.converter,e);return bu(n,[bx(_u(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Jt.exists(!1))]).then(()=>r)}function bu(t,e){return function(r,s){const i=new Jr;return r.asyncQueue.enqueueAndForget(async()=>u9(await _9(r),s,i)),i.promise}(mp(t),e)}function V9(t,e,n){const r=n.docs.get(e._key),s=new nA(t);return new tA(t,s,e._key,r,new Dl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_u(e)}set(e,n,r){this._verifyNotCommitted();const s=Qm(e,this._firestore),i=Cx(s.converter,n,r),o=bx(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Jt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Qm(e,this._firestore);let o;return o=typeof(n=tt(n))=="string"||n instanceof xu?K2(this._dataReader,"WriteBatch.update",i._key,n,r,s):G2(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Jt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Qm(e,this._firestore);return this._mutations=this._mutations.concat(new lp(n._key,Jt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qm(t,e){if((t=tt(t)).firestore!==e)throw new G(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U9(t){return mp(t=zn(t,wi)),new F9(t,e=>bu(t,e))}(function(e,n=!0){(function(s){$a=s})(za),Sr(new nr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new wi(new $3(r.getProvider("auth-internal")),new G3(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),On(E1,"4.7.3",e),On(E1,"4.7.3","esm2017")})();var z9="firebase",B9="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(z9,B9,"app");const rA="@firebase/installations",Ix="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=1e4,iA=`w:${Ix}`,oA="FIS_v2",$9="https://firebaseinstallations.googleapis.com/v1",W9=60*60*1e3,H9="installations",q9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},fo=new _o(H9,q9,G9);function aA(t){return t instanceof sr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA({projectId:t}){return`${$9}/projects/${t}/installations`}function cA(t){return{token:t.token,requestStatus:2,expiresIn:Q9(t.expiresIn),creationTime:Date.now()}}async function uA(t,e){const r=(await e.json()).error;return fo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function dA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function K9(t,{refreshToken:e}){const n=dA(t);return n.append("Authorization",Y9(e)),n}async function hA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Q9(t){return Number(t.replace("s","000"))}function Y9(t){return`${oA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=lA(t),s=dA(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:oA,appId:t.appId,sdkVersion:iA},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await hA(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:cA(c.authToken)}}else throw await uA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9=/^[cdef][\w-]{21}$/,c0="";function ez(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=tz(t);return Z9.test(n)?n:c0}catch{return c0}}function tz(t){return J9(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=new Map;function mA(t,e){const n=xp(t);gA(n,e),nz(n,e)}function gA(t,e){const n=pA.get(t);if(n)for(const r of n)r(e)}function nz(t,e){const n=rz();n&&n.postMessage({key:t,fid:e}),sz()}let Gi=null;function rz(){return!Gi&&"BroadcastChannel"in self&&(Gi=new BroadcastChannel("[Firebase] FID Change"),Gi.onmessage=t=>{gA(t.data.key,t.data.fid)}),Gi}function sz(){pA.size===0&&Gi&&(Gi.close(),Gi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz="firebase-installations-database",oz=1,po="firebase-installations-store";let Ym=null;function Ax(){return Ym||(Ym=QC(iz,oz,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(po)}}})),Ym}async function rf(t,e){const n=xp(t),s=(await Ax()).transaction(po,"readwrite"),i=s.objectStore(po),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&mA(t,e.fid),e}async function yA(t){const e=xp(t),r=(await Ax()).transaction(po,"readwrite");await r.objectStore(po).delete(e),await r.done}async function _p(t,e){const n=xp(t),s=(await Ax()).transaction(po,"readwrite"),i=s.objectStore(po),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&mA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rx(t){let e;const n=await _p(t.appConfig,r=>{const s=az(r),i=lz(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===c0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function az(t){const e=t||{fid:ez(),registrationStatus:0};return vA(e)}function lz(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(fo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=cz(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:uz(t)}:{installationEntry:e}}async function cz(t,e){try{const n=await X9(t,e);return rf(t.appConfig,n)}catch(n){throw aA(n)&&n.customData.serverCode===409?await yA(t.appConfig):await rf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function uz(t){let e=await fT(t.appConfig);for(;e.registrationStatus===1;)await fA(100),e=await fT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Rx(t);return r||n}return e}function fT(t){return _p(t,e=>{if(!e)throw fo.create("installation-not-found");return vA(e)})}function vA(t){return dz(t)?{fid:t.fid,registrationStatus:0}:t}function dz(t){return t.registrationStatus===1&&t.registrationTime+sA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hz({appConfig:t,heartbeatServiceProvider:e},n){const r=fz(t,n),s=K9(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:iA,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await hA(()=>fetch(r,a));if(l.ok){const c=await l.json();return cA(c)}else throw await uA("Generate Auth Token",l)}function fz(t,{fid:e}){return`${lA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(t,e=!1){let n;const r=await _p(t.appConfig,i=>{if(!xA(i))throw fo.create("not-registered");const o=i.authToken;if(!e&&gz(o))return i;if(o.requestStatus===1)return n=pz(t,e),i;{if(!navigator.onLine)throw fo.create("app-offline");const a=vz(i);return n=mz(t,a),a}});return n?await n:r.authToken}async function pz(t,e){let n=await pT(t.appConfig);for(;n.authToken.requestStatus===1;)await fA(100),n=await pT(t.appConfig);const r=n.authToken;return r.requestStatus===0?Nx(t,e):r}function pT(t){return _p(t,e=>{if(!xA(e))throw fo.create("not-registered");const n=e.authToken;return xz(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function mz(t,e){try{const n=await hz(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await rf(t.appConfig,r),n}catch(n){if(aA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await yA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await rf(t.appConfig,r)}throw n}}function xA(t){return t!==void 0&&t.registrationStatus===2}function gz(t){return t.requestStatus===2&&!yz(t)}function yz(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+W9}function vz(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function xz(t){return t.requestStatus===1&&t.requestTime+sA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _z(t){const e=t,{installationEntry:n,registrationPromise:r}=await Rx(e);return r?r.catch(console.error):Nx(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wz(t,e=!1){const n=t;return await bz(n),(await Nx(n,e)).token}async function bz(t){const{registrationPromise:e}=await Rx(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tz(t){if(!t||!t.options)throw Xm("App Configuration");if(!t.name)throw Xm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Xm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Xm(t){return fo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="installations",kz="installations-internal",Sz=t=>{const e=t.getProvider("app").getImmediate(),n=Tz(e),r=lu(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Ez=t=>{const e=t.getProvider("app").getImmediate(),n=lu(e,_A).getImmediate();return{getId:()=>_z(n),getToken:s=>wz(n,s)}};function Pz(){Sr(new nr(_A,Sz,"PUBLIC")),Sr(new nr(kz,Ez,"PRIVATE"))}Pz();On(rA,Ix);On(rA,Ix,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="analytics",Cz="firebase_id",Iz="origin",Az=60*1e3,Rz="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Dx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new Zf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ln=new _o("analytics","Analytics",Nz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dz(t){if(!t.startsWith(Dx)){const e=Ln.create("invalid-gtag-resource",{gtagURL:t});return dn.warn(e.message),""}return t}function wA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Mz(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function jz(t,e){const n=Mz("firebase-js-sdk-policy",{createScriptURL:Dz}),r=document.createElement("script"),s=`${Dx}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Oz(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Lz(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await wA(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){dn.error(a)}t("config",s,i)}async function Vz(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await wA(n);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&e[c.appId];if(u)i.push(u);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){dn.error(i)}}function Fz(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await Vz(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await Lz(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){dn.error(a)}}return s}function Uz(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=Fz(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function zz(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Dx)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bz=30,$z=1e3;class Wz{constructor(e={},n=$z){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const bA=new Wz;function Hz(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function qz(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:Hz(r)},i=Rz.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Ln.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function Gz(t,e=bA,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Ln.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Ln.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Yz;return setTimeout(async()=>{a.abort()},Az),TA({appId:r,apiKey:s,measurementId:i},o,a,e)}async function TA(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=bA){var i;const{appId:o,measurementId:a}=t;try{await Kz(r,e)}catch(l){if(a)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await qz(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!Qz(c)){if(s.deleteThrottleMetadata(o),a)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?Yb(n,s.intervalMillis,Bz):Yb(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,h),dn.debug(`Calling attemptFetch again in ${u} millis`),TA(t,h,r,s)}}function Kz(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Ln.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Qz(t){if(!(t instanceof sr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Yz{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Xz(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jz(){if(HC())try{await qC()}catch(t){return dn.warn(Ln.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return dn.warn(Ln.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Zz(t,e,n,r,s,i,o){var a;const l=Gz(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>dn.error(m)),e.push(l);const c=Jz().then(m=>{if(m)return r.getId()}),[u,h]=await Promise.all([l,c]);zz(i)||jz(i,u.measurementId),s("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[Iz]="firebase",p.update=!0,h!=null&&(p[Cz]=h),s("config",u.measurementId,p),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e){this.app=e}_delete(){return delete ec[this.app.options.appId],Promise.resolve()}}let ec={},gT=[];const yT={};let Jm="dataLayer",tB="gtag",vT,kA,xT=!1;function nB(){const t=[];if(WC()&&t.push("This is a browser extension environment."),uV()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Ln.create("invalid-analytics-context",{errorInfo:e});dn.warn(n.message)}}function rB(t,e,n){nB();const r=t.options.appId;if(!r)throw Ln.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ln.create("no-api-key");if(ec[r]!=null)throw Ln.create("already-exists",{id:r});if(!xT){Oz(Jm);const{wrappedGtag:i,gtagCore:o}=Uz(ec,gT,yT,Jm,tB);kA=i,vT=o,xT=!0}return ec[r]=Zz(t,gT,yT,e,vT,Jm,n),new eB(t)}function sB(t,e,n,r){t=tt(t),Xz(kA,ec[t.app.options.appId],e,n,r).catch(s=>dn.error(s))}const _T="@firebase/analytics",wT="0.10.8";function iB(){Sr(new nr(mT,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return rB(r,s,n)},"PUBLIC")),Sr(new nr("analytics-internal",t,"PRIVATE")),On(_T,wT),On(_T,wT,"esm2017");function t(e){try{const n=e.getProvider(mT).getImmediate();return{logEvent:(r,s,i)=>sB(n,r,s,i)}}catch(n){throw Ln.create("interop-component-reg-failed",{reason:n})}}}iB();const oB={apiKey:"AIzaSyBMgyg_KLqvZIxViT_qzgxtEHHEp8dkbGU",authDomain:"omnitask-9aceb.firebaseapp.com",projectId:"omnitask-9aceb",storageBucket:"omnitask-9aceb.firebasestorage.app",messagingSenderId:"531435434202",appId:"1:531435434202:web:34a8a4c9f59a661665b5e3",measurementId:"G-RD63ZQPQT2"},SA=YC(oB),No=F3(SA),ue=S9(SA),aB=new Ur,lB=new zr,Zm={theme:"dark",language:"fr",notifications:{enabled:!0,dailyReminder:!0,dailyReminderTime:"09:00",achievementUnlock:!0,streakWarning:!0,weeklyReport:!0},sound:{enabled:!0,volume:.7,taskComplete:!0,levelUp:!0,achievementUnlock:!0},privacy:{publicProfile:!1,showStats:!0,showAchievements:!0}},eg={type:"default",baseColor:"#6366f1",icon:""},gd=t=>({userId:t,level:1,currentXP:0,totalXP:0,xpToNextLevel:Dy,currentStreak:0,longestStreak:0,lastCompletedDate:null,tasksCompleted:0,tasksCreated:0,tasksFailed:0,totalFocusTime:0,averageTaskTime:0,categoryStats:{},achievementPoints:0,achievementsUnlocked:[],coins:100,gems:10,dailyXP:0,weeklyXP:0,dailyTasksCompleted:0,weeklyTasksCompleted:0,lastDailyReset:new Date().toISOString(),lastWeeklyReset:new Date().toISOString()}),fe=Yf()(Xf((t,e)=>({user:null,firebaseUser:null,gameStats:null,isLoading:!0,isInitialized:!1,isDemo:!1,error:null,initializeAuth:async()=>e().initialize(),initialize:async()=>{const n=e();return n.isDemo&&n.user?(t({isLoading:!1,isInitialized:!0}),Promise.resolve()):new Promise(r=>{try{const s=CF(No,async i=>{if(i)try{const o=await dT(xe(ue,"users",i.uid)),a=await dT(xe(ue,"gameStats",i.uid));if(o.exists())t({user:o.data(),gameStats:a.exists()?a.data():gd(i.uid),firebaseUser:i,isLoading:!1,isInitialized:!0});else{const l={id:i.uid,email:i.email||"",username:i.displayName||`User_${i.uid.slice(0,6)}`,avatar:eg,createdAt:new Date,lastLoginAt:new Date,settings:Zm},c=gd(i.uid);await Jo(xe(ue,"users",i.uid),l),await Jo(xe(ue,"gameStats",i.uid),c),t({user:l,gameStats:c,firebaseUser:i,isLoading:!1,isInitialized:!0})}}catch(o){console.error("Error loading user data:",o),t({isLoading:!1,isInitialized:!0,error:"Failed to load user data"})}else t({user:null,gameStats:null,firebaseUser:null,isLoading:!1,isInitialized:!0});r()})}catch{console.warn("Firebase auth not configured, demo mode available"),t({isLoading:!1,isInitialized:!0}),r()}})},signInWithEmail:async(n,r)=>{t({isLoading:!0,error:null});try{await SF(No,n,r)}catch(s){const i=s instanceof Error?s.message:"Sign in failed";throw t({error:i,isLoading:!1}),s}},signUpWithEmail:async(n,r,s)=>{t({isLoading:!0,error:null});try{const i=await kF(No,n,r),o={id:i.user.uid,email:n,username:s,avatar:eg,createdAt:new Date,lastLoginAt:new Date,settings:Zm},a=gd(i.user.uid);await Jo(xe(ue,"users",i.user.uid),o),await Jo(xe(ue,"gameStats",i.user.uid),a),t({user:o,gameStats:a,firebaseUser:i.user})}catch(i){const o=i instanceof Error?i.message:"Sign up failed";throw t({error:o,isLoading:!1}),i}},signInWithGoogle:async()=>{t({isLoading:!0,error:null});try{await y1(No,aB)}catch(n){const r=n instanceof Error?n.message:"Google sign in failed";throw t({error:r,isLoading:!1}),n}},signInWithGithub:async()=>{t({isLoading:!0,error:null});try{await y1(No,lB)}catch(n){const r=n instanceof Error?n.message:"GitHub sign in failed";throw t({error:r,isLoading:!1}),n}},signInDemo:async()=>{t({isLoading:!0,error:null});const n=`demo_${Ns()}`,r={id:n,email:"demo@questify.app",username:"DemoHero",avatar:eg,createdAt:new Date,lastLoginAt:new Date,settings:Zm},s=gd(n);s.coins=500,s.gems=50,t({user:r,gameStats:s,firebaseUser:null,isLoading:!1,isInitialized:!0,isDemo:!0})},signOut:async()=>{const{isDemo:n}=e();try{n||await IF(No),t({user:null,gameStats:null,firebaseUser:null,isDemo:!1})}catch(r){const s=r instanceof Error?r.message:"Sign out failed";throw t({error:s}),r}},deleteAccount:async()=>{const{firebaseUser:n,user:r,isDemo:s}=e();if(r){if(s){t({user:null,gameStats:null,firebaseUser:null,isDemo:!1});return}if(n)try{await Promise.all([Ye(xe(ue,"users",r.id),{deleted:!0}),Ye(xe(ue,"gameStats",r.id),{deleted:!0})]),await n.delete(),t({user:null,gameStats:null,firebaseUser:null})}catch(i){const o=i instanceof Error?i.message:"Delete account failed";throw t({error:o}),i}}},updateProfile:async n=>{const{user:r,isDemo:s}=e();if(!r)return;const i={...r,...n};s||await Ye(xe(ue,"users",r.id),n),t({user:i})},updateSettings:async n=>{const{user:r,isDemo:s}=e();if(!r)return;const i={...r.settings,...n};s||await Ye(xe(ue,"users",r.id),{settings:i}),t({user:{...r,settings:i}})},updateAvatar:async n=>{const{user:r,isDemo:s}=e();r&&(s||await Ye(xe(ue,"users",r.id),{avatar:n}),t({user:{...r,avatar:n}}))},calculateXPForLevel:n=>Math.floor(Dy*Math.pow(H5,n-1)),calculateLevel:n=>{let r=1,s=Dy,i=0;for(;i+s<=n;)i+=s,r++,s=e().calculateXPForLevel(r);return{level:r,currentXP:n-i,xpToNextLevel:s}},getStreakBonus:()=>{const{gameStats:n}=e();if(!n)return 0;const r=n.currentStreak;let s=0;for(const{days:i,bonus:o}of G5)r>=i&&(s=o);return s},addXP:async n=>{const{gameStats:r,user:s,isDemo:i,getStreakBonus:o,calculateLevel:a}=e();if(!r||!s)return{leveledUp:!1,newLevel:0};const l=o(),c=Math.floor(n*l),u=n+c,h=r.totalXP+u,{level:p,currentXP:m,xpToNextLevel:g}=a(h),v=p>r.level,_={totalXP:h,level:p,currentXP:m,xpToNextLevel:g,dailyXP:r.dailyXP+u,weeklyXP:r.weeklyXP+u};if(i||await Ye(xe(ue,"gameStats",s.id),_),t({gameStats:{...r,..._}}),v){const{ACHIEVEMENTS:x}=await zi(async()=>{const{ACHIEVEMENTS:C}=await Promise.resolve().then(()=>oh);return{ACHIEVEMENTS:C}},void 0),T=e().gameStats;if(T)for(const C of x)C.requirement.type==="level"&&p>=C.requirement.value&&!T.achievementsUnlocked.includes(C.id)&&await e().unlockAchievement(C.id)}const{useQuestStore:w}=await zi(async()=>{const{useQuestStore:x}=await Promise.resolve().then(()=>u0);return{useQuestStore:x}},void 0);return await w.getState().checkAndUpdateQuests("xp_gained",{amount:u}),{leveledUp:v,newLevel:p}},updateStreak:async()=>{const{gameStats:n,user:r,isDemo:s}=e();if(!n||!r)return;const i=new Date().toISOString().split("T")[0],o=n.lastCompletedDate;let a=n.currentStreak;if(!o)a=1;else{const p=new Date(o),m=new Date(i),g=Math.floor((m.getTime()-p.getTime())/(1e3*60*60*24));g===0||(g===1?a+=1:a=1)}const l={currentStreak:a,longestStreak:Math.max(a,n.longestStreak),lastCompletedDate:i};s||await Ye(xe(ue,"gameStats",r.id),l),t({gameStats:{...n,...l}});const{ACHIEVEMENTS:c}=await zi(async()=>{const{ACHIEVEMENTS:p}=await Promise.resolve().then(()=>oh);return{ACHIEVEMENTS:p}},void 0),u=e().gameStats;if(u)for(const p of c)p.requirement.type==="streak"&&a>=p.requirement.value&&!u.achievementsUnlocked.includes(p.id)&&await e().unlockAchievement(p.id);const{useQuestStore:h}=await zi(async()=>{const{useQuestStore:p}=await Promise.resolve().then(()=>u0);return{useQuestStore:p}},void 0);await h.getState().checkAndUpdateQuests("streak_updated",{streak:a})},incrementStat:async(n,r=1)=>{const{gameStats:s,user:i,isDemo:o}=e();if(!s||!i)return;const a=s[n];if(typeof a!="number")return;const l={[n]:a+r};o||await Ye(xe(ue,"gameStats",i.id),l),t({gameStats:{...s,...l}})},addCoins:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s)return;const o={coins:r.coins+n};i||await Ye(xe(ue,"gameStats",s.id),o),t({gameStats:{...r,...o}})},addGems:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s)return;const o={gems:r.gems+n};i||await Ye(xe(ue,"gameStats",s.id),o),t({gameStats:{...r,...o}})},spendCoins:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s||r.coins<n)return!1;const o={coins:r.coins-n};return i||await Ye(xe(ue,"gameStats",s.id),o),t({gameStats:{...r,...o}}),!0},spendGems:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s||r.gems<n)return!1;const o={gems:r.gems-n};return i||await Ye(xe(ue,"gameStats",s.id),o),t({gameStats:{...r,...o}}),!0},unlockAchievement:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s||r.achievementsUnlocked.includes(n))return;const{ACHIEVEMENTS:o}=await zi(async()=>{const{ACHIEVEMENTS:c}=await Promise.resolve().then(()=>oh);return{ACHIEVEMENTS:c}},void 0),a=o.find(c=>c.id===n),l={achievementsUnlocked:[...r.achievementsUnlocked,n],...a?{totalXP:r.totalXP+a.xpReward,coins:r.coins+a.coinReward,achievementPoints:r.achievementPoints+a.xpReward}:{}};i||await Ye(xe(ue,"gameStats",s.id),l),t({gameStats:{...r,...l}})}}),{name:"questify-auth",partialize:t=>({user:t.user,gameStats:t.gameStats,isDemo:t.isDemo})})),cB=(t,e)=>LC[t]+q5[e],uB=t=>Math.floor(LC[t]/2),bi=Yf()(Xf((t,e)=>({tasks:[],categories:[],filters:{},filter:{status:"all",sortBy:"dueDate",sortDirection:"asc"},sort:{by:"dueDate",order:"asc"},isLoading:!1,selectedTask:null,setFilter:n=>{t(r=>({filter:{...r.filter,...n}}))},updateSubTask:(n,r,s)=>{const{tasks:i}=e(),o=i.find(l=>l.id===n);if(!o||!o.subtasks)return;const a=o.subtasks.map(l=>l.id===r?{...l,...s}:l);t({tasks:i.map(l=>l.id===n?{...l,subtasks:a}:l)})},loadTasks:async n=>{if(t({isLoading:!0}),fe.getState().isDemo){t({isLoading:!1});return}try{const s=Fo(ue,"tasks"),i=i0(s,o0("userId","==",n)),a=(await a0(i)).docs.map(l=>{var c,u,h,p,m;return{...l.data(),id:l.id,createdAt:((c=l.data().createdAt)==null?void 0:c.toDate())||new Date,updatedAt:((u=l.data().updatedAt)==null?void 0:u.toDate())||new Date,dueDate:(h=l.data().dueDate)==null?void 0:h.toDate(),completedAt:(p=l.data().completedAt)==null?void 0:p.toDate(),startedAt:(m=l.data().startedAt)==null?void 0:m.toDate()}});t({tasks:a,isLoading:!1})}catch(s){throw console.error("Error loading tasks from Firebase:",s),t({isLoading:!1}),new Error("Impossible de charger les tches. Vrifiez votre connexion.")}},addTask:async n=>{var u;const r=fe.getState(),s=(u=r.user)==null?void 0:u.id,i=r.isDemo;if(!s)throw new Error("User not authenticated");const{xp:o,coins:a}=e().calculateTaskRewards(n.difficulty,n.priority),l={title:n.title,description:n.description||"",difficulty:n.difficulty,priority:n.priority,status:n.status||"pending",category:n.category||"personal",recurrence:n.recurrence||"none",userId:s,createdAt:new Date,updatedAt:new Date,xpReward:o,coinReward:a,subtasks:n.subtasks||[],tags:n.tags||[],progress:0,...n.dueDate&&{dueDate:n.dueDate},...n.recurrenceConfig&&{recurrenceConfig:n.recurrenceConfig}};let c;if(i)c={...l,id:Ns()};else{const h=await hT(Fo(ue,"tasks"),l);c={...l,id:h.id}}t(h=>({tasks:[...h.tasks,c]}));try{await fe.getState().incrementStat("tasksCreated")}catch(h){console.warn("Could not increment stat:",h)}return c},updateTask:async(n,r)=>{const s=fe.getState().isDemo,i={...r,updatedAt:new Date};s||await Ye(xe(ue,"tasks",n),i),t(o=>({tasks:o.tasks.map(a=>a.id===n?{...a,...i}:a)}))},deleteTask:async n=>{if(!fe.getState().isDemo)try{await l0(xe(ue,"tasks",n))}catch(s){console.warn("Firebase delete failed:",s)}t(s=>{var i;return{tasks:s.tasks.filter(o=>o.id!==n),selectedTask:((i=s.selectedTask)==null?void 0:i.id)===n?null:s.selectedTask}})},completeTask:async n=>{const r=e().tasks.find(a=>a.id===n);if(!r)return{xpGained:0,coinsGained:0};const s=fe.getState().isDemo,o={status:"completed",completedAt:new Date,progress:100};if(!s)try{await Ye(xe(ue,"tasks",n),o)}catch(a){console.warn("Firebase update failed, continuing locally:",a)}t(a=>({tasks:a.tasks.map(l=>l.id===n?{...l,...o}:l)}));try{const a=fe.getState(),{leveledUp:l,newLevel:c}=await a.addXP(r.xpReward);await a.addCoins(r.coinReward),await a.incrementStat("tasksCompleted"),await a.incrementStat("dailyTasksCompleted"),await a.incrementStat("weeklyTasksCompleted"),await a.updateStreak();const{ACHIEVEMENTS:u}=await zi(async()=>{const{ACHIEVEMENTS:m}=await Promise.resolve().then(()=>oh);return{ACHIEVEMENTS:m}},void 0),h=fe.getState().gameStats;if(h){const m=h.tasksCompleted;for(const g of u)g.requirement.type==="tasks_completed"&&m>=g.requirement.value&&!h.achievementsUnlocked.includes(g.id)&&await a.unlockAchievement(g.id)}const{useQuestStore:p}=await zi(async()=>{const{useQuestStore:m}=await Promise.resolve().then(()=>u0);return{useQuestStore:m}},void 0);return await p.getState().checkAndUpdateQuests("task_completed",{category:r.category,priority:r.priority,difficulty:r.difficulty}),{xpGained:r.xpReward,coinsGained:r.coinReward,leveledUp:l,newLevel:c}}catch(a){return console.warn("Error updating stats:",a),{xpGained:r.xpReward,coinsGained:r.coinReward}}},failTask:async n=>{const r=fe.getState().isDemo,s={status:"failed",updatedAt:new Date};if(!r)try{await Ye(xe(ue,"tasks",n),s)}catch(i){console.warn("Firebase update failed:",i)}t(i=>({tasks:i.tasks.map(o=>o.id===n?{...o,...s}:o)}));try{await fe.getState().incrementStat("tasksFailed")}catch(i){console.warn("Could not increment stat:",i)}},archiveTask:async n=>{const r=fe.getState().isDemo,s={status:"archived",updatedAt:new Date};r||await Ye(xe(ue,"tasks",n),s),t(i=>({tasks:i.tasks.map(o=>o.id===n?{...o,...s}:o)}))},addSubtask:async(n,r)=>{const s=e().tasks.find(a=>a.id===n);if(!s)return;const i={id:Ns(),title:r,completed:!1},o=[...s.subtasks,i];await e().updateTask(n,{subtasks:o})},toggleSubtask:async(n,r)=>{const s=e().tasks.find(l=>l.id===n);if(!s)return;const i=s.subtasks.map(l=>l.id===r?{...l,completed:!l.completed,completedAt:l.completed?void 0:new Date}:l),o=i.filter(l=>l.completed).length,a=Math.round(o/i.length*100);await e().updateTask(n,{subtasks:i,progress:a})},removeSubtask:async(n,r)=>{const s=e().tasks.find(l=>l.id===n);if(!s)return;const i=s.subtasks.filter(l=>l.id!==r),o=i.filter(l=>l.completed).length,a=i.length>0?Math.round(o/i.length*100):0;await e().updateTask(n,{subtasks:i,progress:a})},loadCategories:async n=>{const r=fe.getState().isDemo,s=e().categories;if(!(r&&s.length>0)){if(r){const i=Lm.map((o,a)=>({...o,id:Ns(),userId:n,order:a}));t({categories:i});return}try{const i=Fo(ue,"categories"),o=i0(i,o0("userId","==",n),M9("order")),a=await a0(o);if(a.empty){const l=U9(ue),c=Lm.map((u,h)=>({...u,id:Ns(),userId:n,order:h}));for(const u of c){const h=xe(Fo(ue,"categories"));l.set(h,{...u,id:h.id}),u.id=h.id}await l.commit(),t({categories:c})}else{const l=a.docs.map(c=>({...c.data(),id:c.id}));t({categories:l})}}catch(i){console.error("Error loading categories:",i)}}},addCategory:async n=>{if(fe.getState().isDemo){const o={...n,id:Ns()};t(a=>({categories:[...a.categories,o]}));return}const s=await hT(Fo(ue,"categories"),n),i={...n,id:s.id};t(o=>({categories:[...o.categories,i]}))},updateCategory:async(n,r)=>{fe.getState().isDemo||await Ye(xe(ue,"categories",n),r),t(i=>({categories:i.categories.map(o=>o.id===n?{...o,...r}:o)}))},deleteCategory:async n=>{fe.getState().isDemo||await l0(xe(ue,"categories",n)),t(s=>({categories:s.categories.filter(i=>i.id!==n)}))},setFilters:n=>{t({filters:n})},clearFilters:()=>{t({filters:{}})},setSort:n=>{t({sort:n})},selectTask:n=>{t({selectedTask:n})},getFilteredTasks:()=>{var o,a,l,c;const{tasks:n,filters:r,sort:s}=e();let i=[...n];if((o=r.status)!=null&&o.length&&(i=i.filter(u=>r.status.includes(u.status))),(a=r.priority)!=null&&a.length&&(i=i.filter(u=>r.priority.includes(u.priority))),(l=r.category)!=null&&l.length&&(i=i.filter(u=>u.category&&r.category.includes(u.category))),(c=r.tags)!=null&&c.length&&(i=i.filter(u=>u.tags.some(h=>r.tags.includes(h)))),r.search){const u=r.search.toLowerCase();i=i.filter(h=>{var p;return h.title.toLowerCase().includes(u)||((p=h.description)==null?void 0:p.toLowerCase().includes(u))})}if(r.dueDate){const u=new Date;u.setHours(0,0,0,0);const h=new Date(u);h.setDate(h.getDate()+7);const p=new Date(u);switch(p.setMonth(p.getMonth()+1),r.dueDate){case"today":i=i.filter(m=>m.dueDate&&new Date(m.dueDate).toDateString()===u.toDateString());break;case"week":i=i.filter(m=>m.dueDate&&new Date(m.dueDate)<=h);break;case"month":i=i.filter(m=>m.dueDate&&new Date(m.dueDate)<=p);break;case"overdue":i=i.filter(m=>m.dueDate&&new Date(m.dueDate)<u&&m.status!=="completed");break;case"no_date":i=i.filter(m=>!m.dueDate);break}}return i.sort((u,h)=>{let p=0;switch(s.by){case"dueDate":!u.dueDate&&!h.dueDate?p=0:u.dueDate?h.dueDate?p=new Date(u.dueDate).getTime()-new Date(h.dueDate).getTime():p=-1:p=1;break;case"priority":const m={critical:0,high:1,medium:2,low:3,none:4};p=(m[u.priority]||4)-(m[h.priority]||4);break;case"createdAt":p=new Date(u.createdAt).getTime()-new Date(h.createdAt).getTime();break;case"xpReward":p=u.xpReward-h.xpReward;break;case"title":p=u.title.localeCompare(h.title);break;case"difficulty":const g={trivial:0,easy:1,medium:2,hard:3,epic:4,legendary:5};p=g[u.difficulty]-g[h.difficulty];break}return s.order==="asc"?p:-p}),i},getTasksByStatus:n=>e().tasks.filter(r=>r.status===n),getTasksByCategory:n=>e().tasks.filter(r=>r.category===n),getTodayTasks:()=>{const n=new Date;n.setHours(0,0,0,0);const r=new Date(n);return r.setDate(r.getDate()+1),e().tasks.filter(s=>s.dueDate&&new Date(s.dueDate)>=n&&new Date(s.dueDate)<r&&s.status!=="completed"&&s.status!=="archived")},getOverdueTasks:()=>{const n=new Date;return n.setHours(0,0,0,0),e().tasks.filter(r=>r.dueDate&&new Date(r.dueDate)<n&&r.status!=="completed"&&r.status!=="archived")},calculateTaskRewards:(n,r)=>({xp:cB(n,r),coins:uB(n)}),exportData:()=>{const{tasks:n,categories:r}=e();return{tasks:n,categories:r,exportedAt:new Date().toISOString(),version:"1.0.0"}},importData:n=>{n.tasks&&Array.isArray(n.tasks)&&t({tasks:n.tasks}),n.categories&&Array.isArray(n.categories)&&t({categories:n.categories})},clearAllData:()=>{t({tasks:[],categories:Lm.map((n,r)=>({...n,id:`default-${r}`,userId:"",createdAt:new Date().toISOString()}))})}}),{name:"questify-tasks",partialize:t=>({filters:t.filters,sort:t.sort,tasks:t.tasks,categories:t.categories})})),ir=Yf()(Xf(t=>({sidebarOpen:!0,toggleSidebar:()=>t(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarOpen:e=>t({sidebarOpen:e}),isTaskModalOpen:!1,isSettingsModalOpen:!1,isProfileModalOpen:!1,isAchievementModalOpen:!1,isLevelUpModalOpen:!1,newLevel:0,openTaskModal:()=>t({isTaskModalOpen:!0}),closeTaskModal:()=>t({isTaskModalOpen:!1,editingTask:null}),openSettingsModal:()=>t({isSettingsModalOpen:!0}),closeSettingsModal:()=>t({isSettingsModalOpen:!1}),openProfileModal:()=>t({isProfileModalOpen:!0}),closeProfileModal:()=>t({isProfileModalOpen:!1}),openAchievementModal:()=>t({isAchievementModalOpen:!0}),closeAchievementModal:()=>t({isAchievementModalOpen:!1}),showLevelUp:e=>t({isLevelUpModalOpen:!0,newLevel:e}),hideLevelUp:()=>t({isLevelUpModalOpen:!1}),editingTask:null,setEditingTask:e=>t({editingTask:e}),xpGained:null,coinsGained:null,showXPGain:e=>t({xpGained:e}),showCoinsGain:e=>t({coinsGained:e}),hideGains:()=>t({xpGained:null,coinsGained:null}),unlockedAchievement:null,showAchievementUnlock:e=>t({unlockedAchievement:e}),hideAchievementUnlock:()=>t({unlockedAchievement:null}),viewMode:"list",setViewMode:e=>t({viewMode:e}),isMobile:!1,setIsMobile:e=>t({isMobile:e}),theme:"dark",setTheme:e=>t({theme:e}),soundEnabled:!0,toggleSound:()=>t(e=>({soundEnabled:!e.soundEnabled})),notificationsEnabled:!0,toggleNotifications:()=>t(e=>({notificationsEnabled:!e.notificationsEnabled}))}),{name:"questify-ui",partialize:t=>({sidebarOpen:t.sidebarOpen,viewMode:t.viewMode,theme:t.theme,soundEnabled:t.soundEnabled,notificationsEnabled:t.notificationsEnabled})})),dB=[{id:"daily_complete_3",type:"daily",title:"Mise en Route",description:"Compltez 3 tches aujourd'hui",icon:"",objectives:[{description:"Complter 3 tches",type:"complete_tasks",target:3}],rewards:{xp:50,coins:20}},{id:"daily_complete_5",type:"daily",title:"Productivit",description:"Compltez 5 tches aujourd'hui",icon:"",objectives:[{description:"Complter 5 tches",type:"complete_tasks",target:5}],rewards:{xp:100,coins:40}},{id:"daily_xp_100",type:"daily",title:"Chasseur d'XP",description:"Gagnez 100 XP aujourd'hui",icon:"",objectives:[{description:"Gagner 100 XP",type:"earn_xp",target:100}],rewards:{xp:25,coins:30}},{id:"daily_high_priority",type:"daily",title:"Priorits",description:"Compltez 2 tches haute priorit",icon:"",objectives:[{description:"Complter 2 tches haute priorit",type:"complete_priority",target:2,priority:"high"}],rewards:{xp:75,coins:35}},{id:"daily_work",type:"daily",title:"Boss du Boulot",description:"Compltez 3 tches de travail",icon:"",objectives:[{description:"Complter 3 tches de travail",type:"complete_category",target:3,category:"Travail"}],rewards:{xp:75,coins:30}},{id:"daily_personal",type:"daily",title:"Temps Personnel",description:"Compltez 2 tches personnelles",icon:"",objectives:[{description:"Complter 2 tches personnelles",type:"complete_category",target:2,category:"Personnel"}],rewards:{xp:50,coins:25}},{id:"daily_health",type:"daily",title:"Vie Saine",description:"Compltez 2 tches sant",icon:"",objectives:[{description:"Complter 2 tches sant",type:"complete_category",target:2,category:"Sant"}],rewards:{xp:50,coins:25}},{id:"daily_variety",type:"daily",title:"Diversit",description:"Compltez des tches dans 3 catgories diffrentes",icon:"",objectives:[{description:"Tche de travail",type:"complete_category",target:1,category:"Travail"},{description:"Tche personnelle",type:"complete_category",target:1,category:"Personnel"},{description:"Tche sant",type:"complete_category",target:1,category:"Sant"}],rewards:{xp:100,coins:50}}],hB=[{id:"weekly_complete_20",type:"weekly",title:"Travailleur Acharn",description:"Compltez 20 tches cette semaine",icon:"",objectives:[{description:"Complter 20 tches",type:"complete_tasks",target:20}],rewards:{xp:300,coins:150,gems:5}},{id:"weekly_complete_35",type:"weekly",title:"Machine de Productivit",description:"Compltez 35 tches cette semaine",icon:"",objectives:[{description:"Complter 35 tches",type:"complete_tasks",target:35}],rewards:{xp:500,coins:250,gems:10}},{id:"weekly_xp_500",type:"weekly",title:"Accumulateur d'XP",description:"Gagnez 500 XP cette semaine",icon:"",objectives:[{description:"Gagner 500 XP",type:"earn_xp",target:500}],rewards:{xp:100,coins:100,gems:3}},{id:"weekly_streak_7",type:"weekly",title:"Constance",description:"Maintenez un streak de 7 jours",icon:"",objectives:[{description:"Streak de 7 jours",type:"maintain_streak",target:7}],rewards:{xp:250,coins:125,gems:5}},{id:"weekly_all_categories",type:"weekly",title:"quilibre de Vie",description:"Compltez des tches dans toutes les catgories",icon:"",objectives:[{description:"Tche de travail",type:"complete_category",target:3,category:"Travail"},{description:"Tche personnelle",type:"complete_category",target:3,category:"Personnel"},{description:"Tche sant",type:"complete_category",target:2,category:"Sant"},{description:"Tche tudes",type:"complete_category",target:2,category:"tudes"},{description:"Tche loisirs",type:"complete_category",target:2,category:"Loisirs"}],rewards:{xp:400,coins:200,gems:8}},{id:"weekly_critical",type:"weekly",title:"Gestion de Crise",description:"Compltez 5 tches critiques",icon:"",objectives:[{description:"Complter 5 tches critiques",type:"complete_priority",target:5,priority:"critical"}],rewards:{xp:350,coins:175,gems:7}}],EA=(t,e)=>[...t].sort(()=>.5-Math.random()).slice(0,e),fB=()=>EA(dB,3),pB=()=>EA(hB,2),bT=(t,e)=>{const n=new Date,r=new Date;return t.type==="daily"?r.setHours(23,59,59,999):t.type==="weekly"?(r.setDate(r.getDate()+(7-r.getDay())),r.setHours(23,59,59,999)):r.setDate(r.getDate()+30),{id:Ns(),userId:e,type:t.type,title:t.title,description:t.description,icon:t.icon,objectives:t.objectives.map(s=>({id:Ns(),description:s.description,type:s.type,target:s.target,current:0,completed:!1,category:s.category,priority:s.priority})),rewards:t.rewards,startDate:n,endDate:r,completed:!1,claimed:!1}},Tu=Yf()(Xf((t,e)=>({quests:[],isLoading:!1,get dailyQuests(){return e().getDailyQuests()},get weeklyQuests(){return e().getWeeklyQuests()},loadQuests:async n=>{if(t({isLoading:!0}),fe.getState().isDemo){const s=e().quests,i=new Date;i.setHours(0,0,0,0);const o=s.some(c=>c.type==="daily"&&c.userId===n&&new Date(c.startDate).toDateString()===i.toDateString()),a=new Date(i);a.setDate(a.getDate()-a.getDay());const l=s.some(c=>c.type==="weekly"&&c.userId===n&&new Date(c.startDate)>=a);t({isLoading:!1}),(!o||!l)&&await e().generateNewQuests(n);return}try{const s=Fo(ue,"quests"),i=i0(s,o0("userId","==",n)),a=(await a0(i)).docs.map(p=>{var m,g,v;return{...p.data(),id:p.id,startDate:((m=p.data().startDate)==null?void 0:m.toDate())||new Date,endDate:((g=p.data().endDate)==null?void 0:g.toDate())||new Date,completedAt:(v=p.data().completedAt)==null?void 0:v.toDate()}}),l=new Date;l.setHours(0,0,0,0);const c=a.some(p=>p.type==="daily"&&new Date(p.startDate).toDateString()===l.toDateString()),u=new Date(l);u.setDate(u.getDate()-u.getDay());const h=a.some(p=>p.type==="weekly"&&new Date(p.startDate)>=u);t({quests:a,isLoading:!1}),(!c||!h)&&await e().generateNewQuests(n)}catch(s){console.error("Error loading quests:",s),t({isLoading:!1})}},generateNewQuests:async n=>{const{quests:r}=e(),s=fe.getState().isDemo,i=new Date;i.setHours(0,0,0,0);const o=r.filter(h=>new Date(h.endDate)<i);if(!s)for(const h of o)await l0(xe(ue,"quests",h.id));const a=r.filter(h=>new Date(h.endDate)>=i);if(!a.some(h=>h.type==="daily"&&new Date(h.startDate).toDateString()===i.toDateString())){const h=fB();for(const p of h){const m=bT(p,n);s||await Jo(xe(ue,"quests",m.id),m),a.push(m)}}const c=new Date(i);if(c.setDate(c.getDate()-c.getDay()),!a.some(h=>h.type==="weekly"&&new Date(h.startDate)>=c)){const h=pB();for(const p of h){const m=bT(p,n);s||await Jo(xe(ue,"quests",m.id),m),a.push(m)}}t({quests:a})},updateQuestProgress:async(n,r,s)=>{const i=e().quests.find(u=>u.id===n);if(!i)return;const o=fe.getState().isDemo,a=i.objectives.map(u=>{if(u.id===r){const h=Math.min(u.current+s,u.target);return{...u,current:h,completed:h>=u.target}}return u}),l=a.every(u=>u.completed),c={objectives:a,completed:l,completedAt:l?new Date:void 0};o||await Ye(xe(ue,"quests",n),c),t(u=>({quests:u.quests.map(h=>h.id===n?{...h,...c}:h)}))},completeQuest:async n=>{const r=fe.getState().isDemo,s={completed:!0,completedAt:new Date};r||await Ye(xe(ue,"quests",n),s),t(i=>({quests:i.quests.map(o=>o.id===n?{...o,...s}:o)}))},claimQuestRewards:async n=>{const r=e().quests.find(a=>a.id===n);if(!r||!r.completed||r.claimed)return{xp:0,coins:0};const s=fe.getState().isDemo,{rewards:i}=r,o=fe.getState();return await o.addXP(i.xp),await o.addCoins(i.coins),i.gems&&await o.addGems(i.gems),s||await Ye(xe(ue,"quests",n),{claimed:!0}),t(a=>({quests:a.quests.map(l=>l.id===n?{...l,claimed:!0}:l)})),i},getDailyQuests:()=>e().quests.filter(n=>n.type==="daily"),getWeeklyQuests:()=>e().quests.filter(n=>n.type==="weekly"),claimQuestReward:async n=>e().claimQuestRewards(n),refreshQuests:async()=>{const n=fe.getState().user;n&&await e().loadQuests(n.id)},getActiveQuests:()=>{const n=new Date;return e().quests.filter(r=>!r.completed&&new Date(r.endDate)>=n)},getCompletedQuests:()=>e().quests.filter(n=>n.completed),checkAndUpdateQuests:async(n,r)=>{const{quests:s}=e(),i=s.filter(o=>!o.completed);console.log("[Quest Update] Action:",n,"Data:",r),console.log("[Quest Update] Active quests:",i.length);for(const o of i)for(const a of o.objectives){if(a.completed)continue;let l=0;switch(a.type){case"complete_tasks":n==="task_completed"&&(l=1,console.log("[Quest Update] Task completed, progress +1 for quest:",o.title));break;case"complete_category":n==="task_completed"&&(r==null?void 0:r.category)===a.category&&(l=1,console.log("[Quest Update] Category task completed:",r==null?void 0:r.category,"(expected:",a.category,")"));break;case"earn_xp":n==="xp_gained"&&typeof(r==null?void 0:r.amount)=="number"&&(l=r.amount,console.log("[Quest Update] XP gained:",r.amount));break;case"complete_priority":n==="task_completed"&&(r==null?void 0:r.priority)===a.priority&&(l=1,console.log("[Quest Update] Priority task completed:",r==null?void 0:r.priority,"(expected:",a.priority,")"));break;case"maintain_streak":if(n==="streak_updated"&&typeof(r==null?void 0:r.streak)=="number"){const c=Math.min(r.streak,a.target);c>a.current&&(l=c-a.current,console.log("[Quest Update] Streak updated:",r.streak))}break}l>0&&(console.log("[Quest Update] Updating objective progress:",a.description,"+",l),await e().updateQuestProgress(o.id,a.id,l))}}}),{name:"questify-quests"})),u0=Object.freeze(Object.defineProperty({__proto__:null,useQuestStore:Tu},Symbol.toStringTag,{value:"Module"})),PA=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),wp=D.createContext({}),bp=D.createContext(null),Tp=typeof document<"u",Mx=Tp?D.useLayoutEffect:D.useEffect,CA=D.createContext({strict:!1}),jx=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),mB="framerAppearId",IA="data-"+jx(mB);function gB(t,e,n,r){const{visualElement:s}=D.useContext(wp),i=D.useContext(CA),o=D.useContext(bp),a=D.useContext(PA).reducedMotion,l=D.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;D.useInsertionEffect(()=>{c&&c.update(n,o)});const u=D.useRef(!!(n[IA]&&!window.HandoffComplete));return Mx(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),D.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function Zo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function yB(t,e,n){return D.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Zo(n)&&(n.current=r))},[e])}function $c(t){return typeof t=="string"||Array.isArray(t)}function kp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Ox=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lx=["initial",...Ox];function Sp(t){return kp(t.animate)||Lx.some(e=>$c(t[e]))}function AA(t){return!!(Sp(t)||t.variants)}function vB(t,e){if(Sp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||$c(n)?n:void 0,animate:$c(r)?r:void 0}}return t.inherit!==!1?e:{}}function xB(t){const{initial:e,animate:n}=vB(t,D.useContext(wp));return D.useMemo(()=>({initial:e,animate:n}),[TT(e),TT(n)])}function TT(t){return Array.isArray(t)?t.join(" "):t}const kT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wc={};for(const t in kT)Wc[t]={isEnabled:e=>kT[t].some(n=>!!e[n])};function _B(t){for(const e in t)Wc[e]={...Wc[e],...t[e]}}const Vx=D.createContext({}),RA=D.createContext({}),wB=Symbol.for("motionComponentSymbol");function bB({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&_B(t);function i(a,l){let c;const u={...D.useContext(PA),...a,layoutId:TB(a)},{isStatic:h}=u,p=xB(a),m=r(a,h);if(!h&&Tp){p.visualElement=gB(s,m,u,e);const g=D.useContext(RA),v=D.useContext(CA).strict;p.visualElement&&(c=p.visualElement.loadFeatures(u,v,t,g))}return D.createElement(wp.Provider,{value:p},c&&p.visualElement?D.createElement(c,{visualElement:p.visualElement,...u}):null,n(s,a,yB(m,p.visualElement,l),m,h,p.visualElement))}const o=D.forwardRef(i);return o[wB]=s,o}function TB({layoutId:t}){const e=D.useContext(Vx).id;return e&&t!==void 0?e+"-"+t:t}function kB(t){function e(r,s={}){return bB(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const SB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fx(t){return typeof t!="string"||t.includes("-")?!1:!!(SB.indexOf(t)>-1||/[A-Z]/.test(t))}const sf={};function EB(t){Object.assign(sf,t)}const ku=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ko=new Set(ku);function NA(t,{layout:e,layoutId:n}){return ko.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!sf[t]||t==="opacity")}const fn=t=>!!(t&&t.getVelocity),PB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},CB=ku.length;function IB(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<CB;o++){const a=ku[o];if(t[a]!==void 0){const l=PB[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const DA=t=>e=>typeof e=="string"&&e.startsWith(t),MA=DA("--"),d0=DA("var(--"),AB=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,RB=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ci=(t,e,n)=>Math.min(Math.max(n,t),e),So={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},tc={...So,transform:t=>ci(0,1,t)},yd={...So,default:1},nc=t=>Math.round(t*1e5)/1e5,Ep=/(-)?([\d]*\.?[\d])+/g,jA=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,NB=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Su(t){return typeof t=="string"}const Eu=t=>({test:e=>Su(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ks=Eu("deg"),br=Eu("%"),re=Eu("px"),DB=Eu("vh"),MB=Eu("vw"),ST={...br,parse:t=>br.parse(t)/100,transform:t=>br.transform(t*100)},ET={...So,transform:Math.round},OA={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,size:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,rotate:ks,rotateX:ks,rotateY:ks,rotateZ:ks,scale:yd,scaleX:yd,scaleY:yd,scaleZ:yd,skew:ks,skewX:ks,skewY:ks,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:tc,originX:ST,originY:ST,originZ:re,zIndex:ET,fillOpacity:tc,strokeOpacity:tc,numOctaves:ET};function Ux(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const h in e){const p=e[h];if(MA(h)){i[h]=p;continue}const m=OA[h],g=RB(p,m);if(ko.has(h)){if(l=!0,o[h]=g,!u)continue;p!==(m.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,a[h]=g):s[h]=g}if(e.transform||(l||r?s.transform=IB(t.transform,n,u,r):s.transform&&(s.transform="none")),c){const{originX:h="50%",originY:p="50%",originZ:m=0}=a;s.transformOrigin=`${h} ${p} ${m}`}}const zx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function LA(t,e,n){for(const r in e)!fn(e[r])&&!NA(r,n)&&(t[r]=e[r])}function jB({transformTemplate:t},e,n){return D.useMemo(()=>{const r=zx();return Ux(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function OB(t,e,n){const r=t.style||{},s={};return LA(s,r,t),Object.assign(s,jB(t,e,n)),t.transformValues?t.transformValues(s):s}function LB(t,e,n){const r={},s=OB(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const VB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function of(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||VB.has(t)}let VA=t=>!of(t);function FB(t){t&&(VA=e=>e.startsWith("on")?!of(e):t(e))}try{FB(require("@emotion/is-prop-valid").default)}catch{}function UB(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(VA(s)||n===!0&&of(s)||!e&&!of(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function PT(t,e,n){return typeof t=="string"?t:re.transform(e+n*t)}function zB(t,e,n){const r=PT(e,t.x,t.width),s=PT(n,t.y,t.height);return`${r} ${s}`}const BB={offset:"stroke-dashoffset",array:"stroke-dasharray"},$B={offset:"strokeDashoffset",array:"strokeDasharray"};function WB(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?BB:$B;t[i.offset]=re.transform(-r);const o=re.transform(e),a=re.transform(n);t[i.array]=`${o} ${a}`}function Bx(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h,p){if(Ux(t,c,u,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g,dimensions:v}=t;m.transform&&(v&&(g.transform=m.transform),delete m.transform),v&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=zB(v,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&WB(m,o,a,l,!1)}const FA=()=>({...zx(),attrs:{}}),$x=t=>typeof t=="string"&&t.toLowerCase()==="svg";function HB(t,e,n,r){const s=D.useMemo(()=>{const i=FA();return Bx(i,e,{enableHardwareAcceleration:!1},$x(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};LA(i,t.style,t),s.style={...i,...s.style}}return s}function qB(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(Fx(n)?HB:LB)(r,i,o,n),u={...UB(r,typeof n=="string",t),...l,ref:s},{children:h}=r,p=D.useMemo(()=>fn(h)?h.get():h,[h]);return D.createElement(n,{...u,children:p})}}function UA(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const zA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function BA(t,e,n,r){UA(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(zA.has(s)?s:jx(s),e.attrs[s])}function Wx(t,e){const{style:n}=t,r={};for(const s in n)(fn(n[s])||e.style&&fn(e.style[s])||NA(s,t))&&(r[s]=n[s]);return r}function $A(t,e){const n=Wx(t,e);for(const r in t)if(fn(t[r])||fn(e[r])){const s=ku.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function Hx(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function WA(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const af=t=>Array.isArray(t),GB=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),KB=t=>af(t)?t[t.length-1]||0:t;function sh(t){const e=fn(t)?t.get():t;return GB(e)?e.toValue():e}function QB({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:YB(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const HA=t=>(e,n)=>{const r=D.useContext(wp),s=D.useContext(bp),i=()=>QB(t,e,r,s);return n?i():WA(i)};function YB(t,e,n,r){const s={},i=r(t,{});for(const p in i)s[p]=sh(i[p]);let{initial:o,animate:a}=t;const l=Sp(t),c=AA(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;return h&&typeof h!="boolean"&&!kp(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const g=Hx(t,m);if(!g)return;const{transitionEnd:v,transition:_,...w}=g;for(const x in w){let T=w[x];if(Array.isArray(T)){const C=u?T.length-1:0;T=T[C]}T!==null&&(s[x]=T)}for(const x in v)s[x]=v[x]}),s}const Ze=t=>t;class CT{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function XB(t){let e=new CT,n=new CT,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const h=u&&s,p=h?e:n;return c&&o.add(l),p.add(l)&&h&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];u(l),o.has(u)&&(a.schedule(u),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const vd=["prepare","read","update","preRender","render","postRender"],JB=40;function ZB(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=vd.reduce((h,p)=>(h[p]=XB(()=>n=!0),h),{}),o=h=>i[h].process(s),a=()=>{const h=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(h-s.timestamp,JB),1),s.timestamp=h,s.isProcessing=!0,vd.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:vd.reduce((h,p)=>{const m=i[p];return h[p]=(g,v=!1,_=!1)=>(n||l(),m.schedule(g,v,_)),h},{}),cancel:h=>vd.forEach(p=>i[p].cancel(h)),state:s,steps:i}}const{schedule:Ne,cancel:us,state:Ot,steps:tg}=ZB(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ze,!0),e$={useVisualState:HA({scrapeMotionValuesFromProps:$A,createRenderState:FA,onMount:(t,e,{renderState:n,latestValues:r})=>{Ne.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ne.render(()=>{Bx(n,r,{enableHardwareAcceleration:!1},$x(e.tagName),t.transformTemplate),BA(e,n)})}})},t$={useVisualState:HA({scrapeMotionValuesFromProps:Wx,createRenderState:zx})};function n$(t,{forwardMotionProps:e=!1},n,r){return{...Fx(t)?e$:t$,preloadedFeatures:n,useRender:qB(e),createVisualElement:r,Component:t}}function Gr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const qA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Pp(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const r$=t=>e=>qA(e)&&t(e,Pp(e));function Zr(t,e,n,r){return Gr(t,e,r$(n),r)}const s$=(t,e)=>n=>e(t(n)),ni=(...t)=>t.reduce(s$);function GA(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const IT=GA("dragHorizontal"),AT=GA("dragVertical");function KA(t){let e=!1;if(t==="y")e=AT();else if(t==="x")e=IT();else{const n=IT(),r=AT();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function QA(){const t=KA(!0);return t?(t(),!1):!0}class Ti{constructor(e){this.isMounted=!1,this.node=e}update(){}}function RT(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||QA())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Ne.update(()=>a[r](i,o))};return Zr(t.current,n,s,{passive:!t.getProps()[r]})}class i$ extends Ti{mount(){this.unmount=ni(RT(this.node,!0),RT(this.node,!1))}unmount(){}}class o$ extends Ti{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ni(Gr(this.node.current,"focus",()=>this.onFocus()),Gr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const YA=(t,e)=>e?t===e?!0:YA(t,e.parentElement):!1;function ng(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Pp(n))}class a$ extends Ti{constructor(){super(...arguments),this.removeStartListeners=Ze,this.removeEndListeners=Ze,this.removeAccessibleListeners=Ze,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Zr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps();Ne.update(()=>{!h&&!YA(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Zr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ni(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||ng("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Ne.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=Gr(this.node.current,"keyup",o),ng("down",(a,l)=>{this.startPress(a,l)})},n=Gr(this.node.current,"keydown",e),r=()=>{this.isPressing&&ng("cancel",(i,o)=>this.cancelPress(i,o))},s=Gr(this.node.current,"blur",r);this.removeAccessibleListeners=ni(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ne.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!QA()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ne.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Zr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Gr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ni(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const h0=new WeakMap,rg=new WeakMap,l$=t=>{const e=h0.get(t.target);e&&e(t)},c$=t=>{t.forEach(l$)};function u$({root:t,...e}){const n=t||document;rg.has(n)||rg.set(n,{});const r=rg.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(c$,{root:t,...e})),r[s]}function d$(t,e,n){const r=u$(e);return h0.set(t,n),r.observe(t),()=>{h0.delete(t),r.unobserve(t)}}const h$={some:0,all:1};class f$ extends Ti{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:h$[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),p=c?u:h;p&&p(l)};return d$(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(p$(e,n))&&this.startObserver()}unmount(){}}function p$({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const m$={inView:{Feature:f$},tap:{Feature:a$},focus:{Feature:o$},hover:{Feature:i$}};function XA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function g$(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function y$(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Cp(t,e,n){const r=t.getProps();return Hx(r,e,n!==void 0?n:r.custom,g$(t),y$(t))}let qx=Ze;const Zi=t=>t*1e3,es=t=>t/1e3,v$={current:!1},JA=t=>Array.isArray(t)&&typeof t[0]=="number";function ZA(t){return!!(!t||typeof t=="string"&&eR[t]||JA(t)||Array.isArray(t)&&t.every(ZA))}const Ml=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,eR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ml([0,.65,.55,1]),circOut:Ml([.55,0,1,.45]),backIn:Ml([.31,.01,.66,-.59]),backOut:Ml([.33,1.53,.69,.99])};function tR(t){if(t)return JA(t)?Ml(t):Array.isArray(t)?t.map(tR):eR[t]}function x$(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=tR(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function _$(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const nR=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,w$=1e-7,b$=12;function T$(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=nR(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>w$&&++a<b$);return o}function Pu(t,e,n,r){if(t===e&&n===r)return Ze;const s=i=>T$(i,0,1,t,n);return i=>i===0||i===1?i:nR(s(i),e,r)}const k$=Pu(.42,0,1,1),S$=Pu(0,0,.58,1),rR=Pu(.42,0,.58,1),E$=t=>Array.isArray(t)&&typeof t[0]!="number",sR=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,iR=t=>e=>1-t(1-e),Gx=t=>1-Math.sin(Math.acos(t)),oR=iR(Gx),P$=sR(Gx),aR=Pu(.33,1.53,.69,.99),Kx=iR(aR),C$=sR(Kx),I$=t=>(t*=2)<1?.5*Kx(t):.5*(2-Math.pow(2,-10*(t-1))),A$={linear:Ze,easeIn:k$,easeInOut:rR,easeOut:S$,circIn:Gx,circInOut:P$,circOut:oR,backIn:Kx,backInOut:C$,backOut:aR,anticipate:I$},NT=t=>{if(Array.isArray(t)){qx(t.length===4);const[e,n,r,s]=t;return Pu(e,n,r,s)}else if(typeof t=="string")return A$[t];return t},Qx=(t,e)=>n=>!!(Su(n)&&NB.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),lR=(t,e,n)=>r=>{if(!Su(r))return r;const[s,i,o,a]=r.match(Ep);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},R$=t=>ci(0,255,t),sg={...So,transform:t=>Math.round(R$(t))},Ki={test:Qx("rgb","red"),parse:lR("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+sg.transform(t)+", "+sg.transform(e)+", "+sg.transform(n)+", "+nc(tc.transform(r))+")"};function N$(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const f0={test:Qx("#"),parse:N$,transform:Ki.transform},ea={test:Qx("hsl","hue"),parse:lR("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+br.transform(nc(e))+", "+br.transform(nc(n))+", "+nc(tc.transform(r))+")"},Qt={test:t=>Ki.test(t)||f0.test(t)||ea.test(t),parse:t=>Ki.test(t)?Ki.parse(t):ea.test(t)?ea.parse(t):f0.parse(t),transform:t=>Su(t)?t:t.hasOwnProperty("red")?Ki.transform(t):ea.transform(t)},Be=(t,e,n)=>-n*t+n*e+t;function ig(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function D$({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=ig(l,a,t+1/3),i=ig(l,a,t),o=ig(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const og=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},M$=[f0,Ki,ea],j$=t=>M$.find(e=>e.test(t));function DT(t){const e=j$(t);let n=e.parse(t);return e===ea&&(n=D$(n)),n}const cR=(t,e)=>{const n=DT(t),r=DT(e),s={...n};return i=>(s.red=og(n.red,r.red,i),s.green=og(n.green,r.green,i),s.blue=og(n.blue,r.blue,i),s.alpha=Be(n.alpha,r.alpha,i),Ki.transform(s))};function O$(t){var e,n;return isNaN(t)&&Su(t)&&(((e=t.match(Ep))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(jA))===null||n===void 0?void 0:n.length)||0)>0}const uR={regex:AB,countKey:"Vars",token:"${v}",parse:Ze},dR={regex:jA,countKey:"Colors",token:"${c}",parse:Qt.parse},hR={regex:Ep,countKey:"Numbers",token:"${n}",parse:So.parse};function ag(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function lf(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ag(n,uR),ag(n,dR),ag(n,hR),n}function fR(t){return lf(t).values}function pR(t){const{values:e,numColors:n,numVars:r,tokenised:s}=lf(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(uR.token,o[l]):l<r+n?a=a.replace(dR.token,Qt.transform(o[l])):a=a.replace(hR.token,nc(o[l]));return a}}const L$=t=>typeof t=="number"?0:t;function V$(t){const e=fR(t);return pR(t)(e.map(L$))}const ui={test:O$,parse:fR,createTransformer:pR,getAnimatableNone:V$},mR=(t,e)=>n=>`${n>0?e:t}`;function gR(t,e){return typeof t=="number"?n=>Be(t,e,n):Qt.test(t)?cR(t,e):t.startsWith("var(")?mR(t,e):vR(t,e)}const yR=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>gR(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},F$=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=gR(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},vR=(t,e)=>{const n=ui.createTransformer(e),r=lf(t),s=lf(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?ni(yR(r.values,s.values),n):mR(t,e)},Hc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},MT=(t,e)=>n=>Be(t,e,n);function U$(t){return typeof t=="number"?MT:typeof t=="string"?Qt.test(t)?cR:vR:Array.isArray(t)?yR:typeof t=="object"?F$:MT}function z$(t,e,n){const r=[],s=n||U$(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ze:e;a=ni(l,a)}r.push(a)}return r}function xR(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(qx(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=z$(e,r,s),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const h=Hc(t[u],t[u+1],c);return o[u](h)};return n?c=>l(ci(t[0],t[i-1],c)):l}function B$(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Hc(0,e,r);t.push(Be(n,1,s))}}function $$(t){const e=[0];return B$(e,t.length-1),e}function W$(t,e){return t.map(n=>n*e)}function H$(t,e){return t.map(()=>e||rR).splice(0,t.length-1)}function cf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=E$(r)?r.map(NT):NT(r),i={done:!1,value:e[0]},o=W$(n&&n.length===e.length?n:$$(e),t),a=xR(o,e,{ease:Array.isArray(s)?s:H$(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function _R(t,e){return e?t*(1e3/e):0}const q$=5;function wR(t,e,n){const r=Math.max(e-q$,0);return _R(n-t(r),e-r)}const lg=.001,G$=.01,K$=10,Q$=.05,Y$=1;function X$({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=ci(Q$,Y$,o),t=ci(G$,K$,es(t)),o<1?(s=c=>{const u=c*o,h=u*t,p=u-n,m=p0(c,o),g=Math.exp(-h);return lg-p/m*g},i=c=>{const h=c*o*t,p=h*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-h),v=p0(Math.pow(c,2),o);return(-s(c)+lg>0?-1:1)*((p-m)*g)/v}):(s=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-lg+u*h},i=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=Z$(s,i,a);if(t=Zi(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const J$=12;function Z$(t,e,n){let r=n;for(let s=1;s<J$;s++)r=r-t(r)/e(r);return r}function p0(t,e){return t*Math.sqrt(1-e*e)}const e8=["duration","bounce"],t8=["stiffness","damping","mass"];function jT(t,e){return e.some(n=>t[n]!==void 0)}function n8(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!jT(t,t8)&&jT(t,e8)){const n=X$(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function bR({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:u,velocity:h,isResolvedFromDuration:p}=n8({...r,velocity:-es(r.velocity||0)}),m=h||0,g=l/(2*Math.sqrt(a*c)),v=i-s,_=es(Math.sqrt(a/c)),w=Math.abs(v)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let x;if(g<1){const T=p0(_,g);x=C=>{const A=Math.exp(-g*_*C);return i-A*((m+g*_*v)/T*Math.sin(T*C)+v*Math.cos(T*C))}}else if(g===1)x=T=>i-Math.exp(-_*T)*(v+(m+_*v)*T);else{const T=_*Math.sqrt(g*g-1);x=C=>{const A=Math.exp(-g*_*C),M=Math.min(T*C,300);return i-A*((m+g*_*v)*Math.sinh(M)+T*v*Math.cosh(M))/T}}return{calculatedDuration:p&&u||null,next:T=>{const C=x(T);if(p)o.done=T>=u;else{let A=m;T!==0&&(g<1?A=wR(x,T,C):A=0);const M=Math.abs(A)<=n,S=Math.abs(i-C)<=e;o.done=M&&S}return o.value=o.done?i:C,o}}}function OT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],p={done:!1,value:h},m=k=>a!==void 0&&k<a||l!==void 0&&k>l,g=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let v=n*e;const _=h+v,w=o===void 0?_:o(_);w!==_&&(v=w-h);const x=k=>-v*Math.exp(-k/r),T=k=>w+x(k),C=k=>{const E=x(k),I=T(k);p.done=Math.abs(E)<=c,p.value=p.done?w:I};let A,M;const S=k=>{m(p.value)&&(A=k,M=bR({keyframes:[p.value,g(p.value)],velocity:wR(T,k,p.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return S(0),{calculatedDuration:null,next:k=>{let E=!1;return!M&&A===void 0&&(E=!0,C(k),S(k)),A!==void 0&&k>A?M.next(k-A):(!E&&C(k),p)}}}const r8=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ne.update(e,!0),stop:()=>us(e),now:()=>Ot.isProcessing?Ot.timestamp:performance.now()}},LT=2e4;function VT(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<LT;)e+=n,r=t.next(e);return e>=LT?1/0:e}const s8={decay:OT,inertia:OT,tween:cf,keyframes:cf,spring:bR};function uf({autoplay:t=!0,delay:e=0,driver:n=r8,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:h,...p}){let m=1,g=!1,v,_;const w=()=>{_=new Promise(Z=>{v=Z})};w();let x;const T=s8[s]||cf;let C;T!==cf&&typeof r[0]!="number"&&(C=xR([0,100],r,{clamp:!1}),r=[0,100]);const A=T({...p,keyframes:r});let M;a==="mirror"&&(M=T({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let S="idle",k=null,E=null,I=null;A.calculatedDuration===null&&i&&(A.calculatedDuration=VT(A));const{calculatedDuration:N}=A;let j=1/0,R=1/0;N!==null&&(j=N+o,R=j*(i+1)-o);let z=0;const H=Z=>{if(E===null)return;m>0&&(E=Math.min(E,Z)),m<0&&(E=Math.min(Z-R/m,E)),k!==null?z=k:z=Math.round(Z-E)*m;const le=z-e*(m>=0?1:-1),ye=m>=0?le<0:le>R;z=Math.max(le,0),S==="finished"&&k===null&&(z=R);let nt=z,mt=A;if(i){const Ka=Math.min(z,R)/j;let Ar=Math.floor(Ka),En=Ka%1;!En&&Ka>=1&&(En=1),En===1&&Ar--,Ar=Math.min(Ar,i+1),!!(Ar%2)&&(a==="reverse"?(En=1-En,o&&(En-=o/j)):a==="mirror"&&(mt=M)),nt=ci(0,1,En)*j}const Ue=ye?{done:!1,value:r[0]}:mt.next(nt);C&&(Ue.value=C(Ue.value));let{done:Sn}=Ue;!ye&&N!==null&&(Sn=m>=0?z>=R:z<=0);const Up=k===null&&(S==="finished"||S==="running"&&Sn);return h&&h(Ue.value),Up&&U(),Ue},$=()=>{x&&x.stop(),x=void 0},X=()=>{S="idle",$(),v(),w(),E=I=null},U=()=>{S="finished",u&&u(),$(),v()},q=()=>{if(g)return;x||(x=n(H));const Z=x.now();l&&l(),k!==null?E=Z-k:(!E||S==="finished")&&(E=Z),S==="finished"&&w(),I=E,k=null,S="running",x.start()};t&&q();const te={then(Z,le){return _.then(Z,le)},get time(){return es(z)},set time(Z){Z=Zi(Z),z=Z,k!==null||!x||m===0?k=Z:E=x.now()-Z/m},get duration(){const Z=A.calculatedDuration===null?VT(A):A.calculatedDuration;return es(Z)},get speed(){return m},set speed(Z){Z===m||!x||(m=Z,te.time=es(z))},get state(){return S},play:q,pause:()=>{S="paused",k=z},stop:()=>{g=!0,S!=="idle"&&(S="idle",c&&c(),X())},cancel:()=>{I!==null&&H(I),X()},complete:()=>{S="finished"},sample:Z=>(E=0,H(Z))};return te}function i8(t){let e;return()=>(e===void 0&&(e=t()),e)}const o8=i8(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),a8=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),xd=10,l8=2e4,c8=(t,e)=>e.type==="spring"||t==="backgroundColor"||!ZA(e.ease);function u8(t,e,{onUpdate:n,onComplete:r,...s}){if(!(o8()&&a8.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const u=()=>{l=new Promise(T=>{a=T})};u();let{keyframes:h,duration:p=300,ease:m,times:g}=s;if(c8(e,s)){const T=uf({...s,repeat:0,delay:0});let C={done:!1,value:h[0]};const A=[];let M=0;for(;!C.done&&M<l8;)C=T.sample(M),A.push(C.value),M+=xd;g=void 0,h=A,p=M-xd,m="linear"}const v=x$(t.owner.current,e,h,{...s,duration:p,ease:m,times:g}),_=()=>{c=!1,v.cancel()},w=()=>{c=!0,Ne.update(_),a(),u()};return v.onfinish=()=>{c||(t.set(_$(h,s)),r&&r(),w())},{then(T,C){return l.then(T,C)},attachTimeline(T){return v.timeline=T,v.onfinish=null,Ze},get time(){return es(v.currentTime||0)},set time(T){v.currentTime=Zi(T)},get speed(){return v.playbackRate},set speed(T){v.playbackRate=T},get duration(){return es(p)},play:()=>{o||(v.play(),us(_))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:T}=v;if(T){const C=uf({...s,autoplay:!1});t.setWithVelocity(C.sample(T-xd).value,C.sample(T).value,xd)}w()},complete:()=>{c||v.finish()},cancel:w}}function d8({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Ze,pause:Ze,stop:Ze,then:i=>(i(),Promise.resolve()),cancel:Ze,complete:Ze});return e?uf({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const h8={type:"spring",stiffness:500,damping:25,restSpeed:10},f8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),p8={type:"keyframes",duration:.8},m8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},g8=(t,{keyframes:e})=>e.length>2?p8:ko.has(t)?t.startsWith("scale")?f8(e[1]):h8:m8,m0=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ui.test(e)||e==="0")&&!e.startsWith("url(")),y8=new Set(["brightness","contrast","saturate","opacity"]);function v8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ep)||[];if(!r)return t;const s=n.replace(r,"");let i=y8.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const x8=/([a-z-]*)\(.*?\)/g,g0={...ui,getAnimatableNone:t=>{const e=t.match(x8);return e?e.map(v8).join(" "):t}},_8={...OA,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:g0,WebkitFilter:g0},Yx=t=>_8[t];function TR(t,e){let n=Yx(t);return n!==g0&&(n=ui),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const kR=t=>/^0[^.\s]+$/.test(t);function w8(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||kR(t)}function b8(t,e,n,r){const s=m0(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),w8(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];i[u]=TR(e,a)}return i}function T8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function Xx(t,e){return t[e]||t.default||t}const k8={skipAnimations:!1},Jx=(t,e,n,r={})=>s=>{const i=Xx(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Zi(o);const l=b8(e,t,n,i),c=l[0],u=l[l.length-1],h=m0(t,c),p=m0(t,u);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:g=>{e.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(T8(i)||(m={...m,...g8(t,m)}),m.duration&&(m.duration=Zi(m.duration)),m.repeatDelay&&(m.repeatDelay=Zi(m.repeatDelay)),!h||!p||v$.current||i.type===!1||k8.skipAnimations)return d8(m);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=u8(e,t,m);if(g)return g}return uf(m)};function df(t){return!!(fn(t)&&t.add)}const SR=t=>/^\-?\d*\.?\d+$/.test(t);function Zx(t,e){t.indexOf(e)===-1&&t.push(e)}function e_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class t_{constructor(){this.subscriptions=[]}add(e){return Zx(this.subscriptions,e),()=>e_(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const S8=t=>!isNaN(parseFloat(t));class E8{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Ot;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Ne.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ne.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=S8(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new t_);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ne.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?_R(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Da(t,e){return new E8(t,e)}const ER=t=>e=>e.test(t),P8={test:t=>t==="auto",parse:t=>t},PR=[So,re,br,ks,MB,DB,P8],yl=t=>PR.find(ER(t)),C8=[...PR,Qt,ui],I8=t=>C8.find(ER(t));function A8(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Da(n))}function R8(t,e){const n=Cp(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=KB(i[o]);A8(t,o,a)}}function N8(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),u!=null&&(typeof u=="string"&&(SR(u)||kR(u))?u=parseFloat(u):!I8(u)&&ui.test(c)&&(u=TR(l,c)),t.addValue(l,Da(u,{owner:t})),n[l]===void 0&&(n[l]=u),u!==null&&t.setBaseTarget(l,u))}}function D8(t,e){return e?(e[t]||e.default||e).from:void 0}function M8(t,e,n){const r={};for(const s in t){const i=D8(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function j8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function O8(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function CR(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const h in a){const p=t.getValue(h),m=a[h];if(!p||m===void 0||u&&j8(u,h))continue;const g={delay:n,elapsed:0,...Xx(i||{},h)};if(window.HandoffAppearAnimations){const w=t.getProps()[IA];if(w){const x=window.HandoffAppearAnimations(w,h,p,Ne);x!==null&&(g.elapsed=x,g.isHandoff=!0)}}let v=!g.isHandoff&&!O8(p,m);if(g.type==="spring"&&(p.getVelocity()||g.velocity)&&(v=!1),p.animation&&(v=!1),v)continue;p.start(Jx(h,p,m,t.shouldReduceMotion&&ko.has(h)?{type:!1}:g));const _=p.animation;df(l)&&(l.add(h),_.then(()=>l.remove(h))),c.push(_)}return o&&Promise.all(c).then(()=>{o&&R8(t,o)}),c}function y0(t,e,n={}){const r=Cp(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(CR(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:h}=s;return L8(t,e,c+l,u,h,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,c]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function L8(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(V8).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(y0(c,e,{...i,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function V8(t,e){return t.sortNodePosition(e)}function F8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>y0(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=y0(t,e,n);else{const s=typeof e=="function"?Cp(t,e,n.custom):e;r=Promise.all(CR(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const U8=[...Ox].reverse(),z8=Ox.length;function B8(t){return e=>Promise.all(e.map(({animation:n,options:r})=>F8(t,n,r)))}function $8(t){let e=B8(t);const n=H8();let r=!0;const s=(l,c)=>{const u=Cp(t,c);if(u){const{transition:h,transitionEnd:p,...m}=u;l={...l,...m,...p}}return l};function i(l){e=l(t)}function o(l,c){const u=t.getProps(),h=t.getVariantContext(!0)||{},p=[],m=new Set;let g={},v=1/0;for(let w=0;w<z8;w++){const x=U8[w],T=n[x],C=u[x]!==void 0?u[x]:h[x],A=$c(C),M=x===c?T.isActive:null;M===!1&&(v=w);let S=C===h[x]&&C!==u[x]&&A;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),T.protectedKeys={...g},!T.isActive&&M===null||!C&&!T.prevProp||kp(C)||typeof C=="boolean")continue;let E=W8(T.prevProp,C)||x===c&&T.isActive&&!S&&A||w>v&&A,I=!1;const N=Array.isArray(C)?C:[C];let j=N.reduce(s,{});M===!1&&(j={});const{prevResolvedValues:R={}}=T,z={...R,...j},H=$=>{E=!0,m.has($)&&(I=!0,m.delete($)),T.needsAnimating[$]=!0};for(const $ in z){const X=j[$],U=R[$];if(g.hasOwnProperty($))continue;let q=!1;af(X)&&af(U)?q=!XA(X,U):q=X!==U,q?X!==void 0?H($):m.add($):X!==void 0&&m.has($)?H($):T.protectedKeys[$]=!0}T.prevProp=C,T.prevResolvedValues=j,T.isActive&&(g={...g,...j}),r&&t.blockInitialAnimation&&(E=!1),E&&(!S||I)&&p.push(...N.map($=>({animation:$,options:{type:x,...l}})))}if(m.size){const w={};m.forEach(x=>{const T=t.getBaseTarget(x);T!==void 0&&(w[x]=T)}),p.push({animation:w})}let _=!!p.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(p):Promise.resolve()}function a(l,c,u){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const p=o(u,l);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function W8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!XA(e,t):!1}function Ci(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function H8(){return{animate:Ci(!0),whileInView:Ci(),whileHover:Ci(),whileTap:Ci(),whileDrag:Ci(),whileFocus:Ci(),exit:Ci()}}class q8 extends Ti{constructor(e){super(e),e.animationState||(e.animationState=$8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),kp(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let G8=0;class K8 extends Ti{constructor(){super(...arguments),this.id=G8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Q8={animation:{Feature:q8},exit:{Feature:K8}},FT=(t,e)=>Math.abs(t-e);function Y8(t,e){const n=FT(t.x,e.x),r=FT(t.y,e.y);return Math.sqrt(n**2+r**2)}class IR{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=ug(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=Y8(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:g}=h,{timestamp:v}=Ot;this.history.push({...g,timestamp:v});const{onStart:_,onMove:w}=this.handlers;p||(_&&_(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=cg(p,this.transformPagePoint),Ne.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=ug(h.type==="pointercancel"?this.lastMoveEventInfo:cg(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,_),g&&g(h,_)},!qA(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Pp(e),a=cg(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Ot;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,ug(a,this.history)),this.removeListeners=ni(Zr(this.contextWindow,"pointermove",this.handlePointerMove),Zr(this.contextWindow,"pointerup",this.handlePointerUp),Zr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),us(this.updatePoint)}}function cg(t,e){return e?{point:e(t.point)}:t}function UT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ug({point:t},e){return{point:t,delta:UT(t,AR(e)),offset:UT(t,X8(e)),velocity:J8(e,.1)}}function X8(t){return t[0]}function AR(t){return t[t.length-1]}function J8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=AR(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Zi(e)));)n--;if(!r)return{x:0,y:0};const i=es(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function bn(t){return t.max-t.min}function v0(t,e=0,n=.01){return Math.abs(t-e)<=n}function zT(t,e,n,r=.5){t.origin=r,t.originPoint=Be(e.min,e.max,t.origin),t.scale=bn(n)/bn(e),(v0(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Be(n.min,n.max,t.origin)-t.originPoint,(v0(t.translate)||isNaN(t.translate))&&(t.translate=0)}function rc(t,e,n,r){zT(t.x,e.x,n.x,r?r.originX:void 0),zT(t.y,e.y,n.y,r?r.originY:void 0)}function BT(t,e,n){t.min=n.min+e.min,t.max=t.min+bn(e)}function Z8(t,e,n){BT(t.x,e.x,n.x),BT(t.y,e.y,n.y)}function $T(t,e,n){t.min=e.min-n.min,t.max=t.min+bn(e)}function sc(t,e,n){$T(t.x,e.x,n.x),$T(t.y,e.y,n.y)}function eW(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Be(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Be(n,t,r.max):Math.min(t,n)),t}function WT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function tW(t,{top:e,left:n,bottom:r,right:s}){return{x:WT(t.x,n,s),y:WT(t.y,e,r)}}function HT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function nW(t,e){return{x:HT(t.x,e.x),y:HT(t.y,e.y)}}function rW(t,e){let n=.5;const r=bn(t),s=bn(e);return s>r?n=Hc(e.min,e.max-r,t.min):r>s&&(n=Hc(t.min,t.max-s,e.min)),ci(0,1,n)}function sW(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const x0=.35;function iW(t=x0){return t===!1?t=0:t===!0&&(t=x0),{x:qT(t,"left","right"),y:qT(t,"top","bottom")}}function qT(t,e,n){return{min:GT(t,e),max:GT(t,n)}}function GT(t,e){return typeof t=="number"?t:t[e]||0}const KT=()=>({translate:0,scale:1,origin:0,originPoint:0}),ta=()=>({x:KT(),y:KT()}),QT=()=>({min:0,max:0}),st=()=>({x:QT(),y:QT()});function In(t){return[t("x"),t("y")]}function RR({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function oW({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function aW(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function dg(t){return t===void 0||t===1}function _0({scale:t,scaleX:e,scaleY:n}){return!dg(t)||!dg(e)||!dg(n)}function ji(t){return _0(t)||NR(t)||t.z||t.rotate||t.rotateX||t.rotateY}function NR(t){return YT(t.x)||YT(t.y)}function YT(t){return t&&t!=="0%"}function hf(t,e,n){const r=t-n,s=e*r;return n+s}function XT(t,e,n,r,s){return s!==void 0&&(t=hf(t,s,r)),hf(t,n,r)+e}function w0(t,e=0,n=1,r,s){t.min=XT(t.min,e,n,r,s),t.max=XT(t.max,e,n,r,s)}function DR(t,{x:e,y:n}){w0(t.x,e.translate,e.scale,e.originPoint),w0(t.y,n.translate,n.scale,n.originPoint)}function lW(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&na(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,DR(t,o)),r&&ji(i.latestValues)&&na(t,i.latestValues))}e.x=JT(e.x),e.y=JT(e.y)}function JT(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ps(t,e){t.min=t.min+e,t.max=t.max+e}function ZT(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=Be(t.min,t.max,i);w0(t,e[n],e[r],o,e.scale)}const cW=["x","scaleX","originX"],uW=["y","scaleY","originY"];function na(t,e){ZT(t.x,e,cW),ZT(t.y,e,uW)}function MR(t,e){return RR(aW(t.getBoundingClientRect(),e))}function dW(t,e,n){const r=MR(t,n),{scroll:s}=e;return s&&(Ps(r.x,s.offset.x),Ps(r.y,s.offset.y)),r}const jR=({current:t})=>t?t.ownerDocument.defaultView:null,hW=new WeakMap;class fW{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=st(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Pp(u,"page").point)},i=(u,h)=>{const{drag:p,dragPropagation:m,onDragStart:g}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=KA(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),In(_=>{let w=this.getAxisMotionValue(_).get()||0;if(br.test(w)){const{projection:x}=this.visualElement;if(x&&x.layout){const T=x.layout.layoutBox[_];T&&(w=bn(T)*(parseFloat(w)/100))}}this.originPoint[_]=w}),g&&Ne.update(()=>g(u,h),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:g,onDrag:v}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:_}=h;if(m&&this.currentDirection===null){this.currentDirection=pW(_),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,_),this.updateAxis("y",h.point,_),this.visualElement.render(),v&&v(u,h)},a=(u,h)=>this.stop(u,h),l=()=>In(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new IR(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:jR(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Ne.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!_d(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=eW(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Zo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=tW(s.layoutBox,n):this.constraints=!1,this.elastic=iW(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&In(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=sW(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Zo(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=dW(r,s.root,this.visualElement.getTransformPagePoint());let o=nW(s.layout.layoutBox,i);if(n){const a=n(oW(o));this.hasMutatedConstraints=!!a,a&&(o=RR(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=In(u=>{if(!_d(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const p=s?200:1e6,m=s?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Jx(e,r,0,n))}stopAnimation(){In(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){In(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){In(n=>{const{drag:r}=this.getProps();if(!_d(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Be(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Zo(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};In(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=rW({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),In(o=>{if(!_d(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Be(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;hW.set(this.visualElement,this);const e=this.visualElement.current,n=Zr(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Zo(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Gr(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(In(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=x0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function _d(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function pW(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class mW extends Ti{constructor(e){super(e),this.removeGroupControls=Ze,this.removeListeners=Ze,this.controls=new fW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ze}unmount(){this.removeGroupControls(),this.removeListeners()}}const ek=t=>(e,n)=>{t&&Ne.update(()=>t(e,n))};class gW extends Ti{constructor(){super(...arguments),this.removePointerDownListener=Ze}onPointerDown(e){this.session=new IR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:ek(e),onStart:ek(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Ne.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Zr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function yW(){const t=D.useContext(bp);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=D.useId();return D.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const ih={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tk(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const vl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const n=tk(t,e.target.x),r=tk(t,e.target.y);return`${n}% ${r}%`}},vW={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=ui.parse(t);if(s.length>5)return r;const i=ui.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Be(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class xW extends hn.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;EB(_W),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ih.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Ne.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function OR(t){const[e,n]=yW(),r=D.useContext(Vx);return hn.createElement(xW,{...t,layoutGroup:r,switchLayoutGroup:D.useContext(RA),isPresent:e,safeToRemove:n})}const _W={borderRadius:{...vl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vl,borderTopRightRadius:vl,borderBottomLeftRadius:vl,borderBottomRightRadius:vl,boxShadow:vW},LR=["TopLeft","TopRight","BottomLeft","BottomRight"],wW=LR.length,nk=t=>typeof t=="string"?parseFloat(t):t,rk=t=>typeof t=="number"||re.test(t);function bW(t,e,n,r,s,i){s?(t.opacity=Be(0,n.opacity!==void 0?n.opacity:1,TW(r)),t.opacityExit=Be(e.opacity!==void 0?e.opacity:1,0,kW(r))):i&&(t.opacity=Be(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<wW;o++){const a=`border${LR[o]}Radius`;let l=sk(e,a),c=sk(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||rk(l)===rk(c)?(t[a]=Math.max(Be(nk(l),nk(c),r),0),(br.test(c)||br.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Be(e.rotate||0,n.rotate||0,r))}function sk(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const TW=VR(0,.5,oR),kW=VR(.5,.95,Ze);function VR(t,e,n){return r=>r<t?0:r>e?1:n(Hc(t,e,r))}function ik(t,e){t.min=e.min,t.max=e.max}function Pn(t,e){ik(t.x,e.x),ik(t.y,e.y)}function ok(t,e,n,r,s){return t-=e,t=hf(t,1/n,r),s!==void 0&&(t=hf(t,1/s,r)),t}function SW(t,e=0,n=1,r=.5,s,i=t,o=t){if(br.test(e)&&(e=parseFloat(e),e=Be(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Be(i.min,i.max,r);t===i&&(a-=e),t.min=ok(t.min,e,n,a,s),t.max=ok(t.max,e,n,a,s)}function ak(t,e,[n,r,s],i,o){SW(t,e[n],e[r],e[s],e.scale,i,o)}const EW=["x","scaleX","originX"],PW=["y","scaleY","originY"];function lk(t,e,n,r){ak(t.x,e,EW,n?n.x:void 0,r?r.x:void 0),ak(t.y,e,PW,n?n.y:void 0,r?r.y:void 0)}function ck(t){return t.translate===0&&t.scale===1}function FR(t){return ck(t.x)&&ck(t.y)}function CW(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function UR(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function uk(t){return bn(t.x)/bn(t.y)}class IW{constructor(){this.members=[]}add(e){Zx(this.members,e),e.scheduleRender()}remove(e){if(e_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dk(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:u}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),u&&(r+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const AW=(t,e)=>t.depth-e.depth;class RW{constructor(){this.children=[],this.isDirty=!1}add(e){Zx(this.children,e),this.isDirty=!0}remove(e){e_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(AW),this.isDirty=!1,this.children.forEach(e)}}function NW(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(us(r),t(i-e))};return Ne.read(r,!0),()=>us(r)}function DW(t){window.MotionDebug&&window.MotionDebug.record(t)}function MW(t){return t instanceof SVGElement&&t.tagName!=="svg"}function jW(t,e,n){const r=fn(t)?t:Da(t);return r.start(Jx("",r,e,n)),r.animation}const hk=["","X","Y","Z"],OW={visibility:"hidden"},fk=1e3;let LW=0;const Oi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function zR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=LW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Oi.totalNodes=Oi.resolvedTargetDeltas=Oi.recalculatedProjection=0,this.nodes.forEach(UW),this.nodes.forEach(HW),this.nodes.forEach(qW),this.nodes.forEach(zW),DW(Oi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new RW)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new t_),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=MW(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=NW(p,250),ih.hasAnimatedSinceResize&&(ih.hasAnimatedSinceResize=!1,this.nodes.forEach(mk))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||XW,{onLayoutAnimationStart:_,onLayoutAnimationComplete:w}=u.getProps(),x=!this.targetLayout||!UR(this.targetLayout,g)||m,T=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||p&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,T);const C={...Xx(v,"layout"),onPlay:_,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else p||mk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,us(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pk);return}this.isUpdating||this.nodes.forEach($W),this.isUpdating=!1,this.nodes.forEach(WW),this.nodes.forEach(VW),this.nodes.forEach(FW),this.clearAllSnapshots();const a=performance.now();Ot.delta=ci(0,1e3/60,a-Ot.timestamp),Ot.timestamp=a,Ot.isProcessing=!0,tg.update.process(Ot),tg.preRender.process(Ot),tg.render.process(Ot),Ot.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(BW),this.sharedNodes.forEach(KW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ne.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ne.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=st(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!FR(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||ji(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),JW(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return st();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Ps(a.x,l.offset.x),Ps(a.y,l.offset.y)),a}removeElementScroll(o){const a=st();Pn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){Pn(a,o);const{scroll:p}=this.root;p&&(Ps(a.x,-p.offset.x),Ps(a.y,-p.offset.y))}Ps(a.x,u.offset.x),Ps(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=st();Pn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&na(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ji(u.latestValues)&&na(l,u.latestValues)}return ji(this.latestValues)&&na(l,this.latestValues),l}removeTransform(o){const a=st();Pn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ji(c.latestValues))continue;_0(c.latestValues)&&c.updateSnapshot();const u=st(),h=c.measurePageBox();Pn(u,h),lk(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return ji(this.latestValues)&&lk(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ot.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Ot.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=st(),this.relativeTargetOrigin=st(),sc(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Pn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=st(),this.targetWithTransforms=st()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Z8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Pn(this.target,this.layout.layoutBox),DR(this.target,this.targetDelta)):Pn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=st(),this.relativeTargetOrigin=st(),sc(this.relativeTargetOrigin,this.target,m.target),Pn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Oi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_0(this.parent.latestValues)||NR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ot.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Pn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;lW(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=ta(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ta(),this.projectionDeltaWithTransform=ta());const v=this.projectionTransform;rc(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=dk(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Oi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=ta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=st(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=m!==g,_=this.getStack(),w=!_||_.members.length<=1,x=!!(v&&!w&&this.options.crossfade===!0&&!this.path.some(YW));this.animationProgress=0;let T;this.mixTargetDelta=C=>{const A=C/1e3;gk(h.x,o.x,A),gk(h.y,o.y,A),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QW(this.relativeTarget,this.relativeTargetOrigin,p,A),T&&CW(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=st()),Pn(T,this.relativeTarget)),v&&(this.animationValues=u,bW(u,c,this.latestValues,A,x,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(us(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ne.update(()=>{ih.hasAnimatedSinceResize=!0,this.currentAnimation=jW(0,fk,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&BR(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||st();const h=bn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const p=bn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Pn(a,l),na(a,u),rc(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new IW),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<hk.length;u++){const h="rotate"+hk[u];l[h]&&(c[h]=l[h],o.setStaticValue(h,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return OW;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=sh(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=sh(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ji(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=dk(this.projectionDeltaWithTransform,this.treeScale,p),u&&(c.transform=u(p,c.transform));const{x:m,y:g}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const v in sf){if(p[v]===void 0)continue;const{correct:_,applyTo:w}=sf[v],x=c.transform==="none"?p[v]:_(p[v],h);if(w){const T=w.length;for(let C=0;C<T;C++)c[w[C]]=x}else c[v]=x}return this.options.layoutId&&(c.pointerEvents=h===this?sh(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(pk),this.root.sharedNodes.clear()}}}function VW(t){t.updateLayout()}function FW(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?In(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=bn(p);p.min=r[h].min,p.max=p.min+m}):BR(i,n.layoutBox,r)&&In(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=bn(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=ta();rc(a,r,n.layoutBox);const l=ta();o?rc(l,t.applyTransform(s,!0),n.measuredBox):rc(l,r,n.layoutBox);const c=!FR(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const g=st();sc(g,n.layoutBox,p.layoutBox);const v=st();sc(v,r,m.layoutBox),UR(g,v)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function UW(t){Oi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function zW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function BW(t){t.clearSnapshot()}function pk(t){t.clearMeasurements()}function $W(t){t.isLayoutDirty=!1}function WW(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function mk(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function HW(t){t.resolveTargetDelta()}function qW(t){t.calcProjection()}function GW(t){t.resetRotation()}function KW(t){t.removeLeadSnapshot()}function gk(t,e,n){t.translate=Be(e.translate,0,n),t.scale=Be(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function yk(t,e,n,r){t.min=Be(e.min,n.min,r),t.max=Be(e.max,n.max,r)}function QW(t,e,n,r){yk(t.x,e.x,n.x,r),yk(t.y,e.y,n.y,r)}function YW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const XW={duration:.45,ease:[.4,0,.1,1]},vk=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),xk=vk("applewebkit/")&&!vk("chrome/")?Math.round:Ze;function _k(t){t.min=xk(t.min),t.max=xk(t.max)}function JW(t){_k(t.x),_k(t.y)}function BR(t,e,n){return t==="position"||t==="preserve-aspect"&&!v0(uk(e),uk(n),.2)}const ZW=zR({attachResizeListener:(t,e)=>Gr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hg={current:void 0},$R=zR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!hg.current){const t=new ZW({});t.mount(window),t.setOptions({layoutScroll:!0}),hg.current=t}return hg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),e7={pan:{Feature:gW},drag:{Feature:mW,ProjectionNode:$R,MeasureLayout:OR}},t7=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function n7(t){const e=t7.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function b0(t,e,n=1){const[r,s]=n7(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return SR(o)?parseFloat(o):o}else return d0(s)?b0(s,e,n+1):s}function r7(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!d0(i))return;const o=b0(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!d0(i))continue;const o=b0(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const s7=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),WR=t=>s7.has(t),i7=t=>Object.keys(t).some(WR),wk=t=>t===So||t===re,bk=(t,e)=>parseFloat(t.split(", ")[e]),Tk=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return bk(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?bk(i[1],t):0}},o7=new Set(["x","y","z"]),a7=ku.filter(t=>!o7.has(t));function l7(t){const e=[];return a7.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ma={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Tk(4,13),y:Tk(5,14)};Ma.translateX=Ma.x;Ma.translateY=Ma.y;const c7=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Ma[c](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),t[c]=Ma[c](l,i)}),t},u7=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(WR);let i=[],o=!1;const a=[];if(s.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let u=n[l],h=yl(u);const p=e[l];let m;if(af(p)){const g=p.length,v=p[0]===null?1:0;u=p[v],h=yl(u);for(let _=v;_<g&&p[_]!==null;_++)m?qx(yl(p[_])===m):m=yl(p[_])}else m=yl(p);if(h!==m)if(wk(h)&&wk(m)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===re&&(e[l]=p.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(u===0||p===0)?u===0?c.set(m.transform(u)):e[l]=h.transform(p):(o||(i=l7(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=c7(e,t,a);return i.length&&i.forEach(([u,h])=>{t.getValue(u).set(h)}),t.render(),Tp&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function d7(t,e,n,r){return i7(e)?u7(t,e,n,r):{target:e,transitionEnd:r}}const h7=(t,e,n,r)=>{const s=r7(t,e,r);return e=s.target,r=s.transitionEnd,d7(t,e,n,r)},T0={current:null},HR={current:!1};function f7(){if(HR.current=!0,!!Tp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>T0.current=t.matches;t.addListener(e),e()}else T0.current=!1}function p7(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(fn(i))t.addValue(s,i),df(r)&&r.add(s);else if(fn(o))t.addValue(s,Da(i,{owner:t})),df(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Da(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const kk=new WeakMap,qR=Object.keys(Wc),m7=qR.length,Sk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],g7=Lx.length;class y7{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ne.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Sp(n),this.isVariantNode=AA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const h in u){const p=u[h];a[h]!==void 0&&fn(p)&&(p.set(a[h],!1),df(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,kk.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),HR.current||f7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:T0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){kk.delete(this.current),this.projection&&this.projection.unmount(),us(this.notifyUpdate),us(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=ko.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ne.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<m7;l++){const c=qR[l],{isEnabled:u,Feature:h,ProjectionNode:p,MeasureLayout:m}=Wc[c];p&&(o=p),u(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:h,layoutScroll:p,layoutRoot:m}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||h&&Zo(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):st()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Sk.length;r++){const s=Sk[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=p7(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<g7;r++){const s=Lx[r],i=this.props[s];($c(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Da(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Hx(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!fn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new t_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class GR extends y7{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=M8(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){N8(this,r,o);const a=h7(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function v7(t){return window.getComputedStyle(t)}class x7 extends GR{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(ko.has(n)){const r=Yx(n);return r&&r.default||0}else{const r=v7(e),s=(MA(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return MR(e,n)}build(e,n,r,s){Ux(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Wx(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){UA(e,n,r,s)}}class _7 extends GR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ko.has(n)){const r=Yx(n);return r&&r.default||0}return n=zA.has(n)?n:jx(n),e.getAttribute(n)}measureInstanceViewportBox(){return st()}scrapeMotionValuesFromProps(e,n){return $A(e,n)}build(e,n,r,s){Bx(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){BA(e,n,r,s)}mount(e){this.isSVGTag=$x(e.tagName),super.mount(e)}}const w7=(t,e)=>Fx(t)?new _7(e,{enableHardwareAcceleration:!1}):new x7(e,{enableHardwareAcceleration:!0}),b7={layout:{ProjectionNode:$R,MeasureLayout:OR}},T7={...Q8,...m$,...e7,...b7},de=kB((t,e)=>n$(t,e,T7,w7));function KR(){const t=D.useRef(!1);return Mx(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function k7(){const t=KR(),[e,n]=D.useState(0),r=D.useCallback(()=>{t.current&&n(e+1)},[e]);return[D.useCallback(()=>Ne.postRender(r),[r]),e]}class S7 extends D.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function E7({children:t,isPresent:e}){const n=D.useId(),r=D.useRef(null),s=D.useRef({width:0,height:0,top:0,left:0});return D.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),D.createElement(S7,{isPresent:e,childRef:r,sizeRef:s},D.cloneElement(t,{ref:r}))}const fg=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=WA(P7),l=D.useId(),c=D.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:u=>{a.set(u,!0);for(const h of a.values())if(!h)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),i?void 0:[n]);return D.useMemo(()=>{a.forEach((u,h)=>a.set(h,!1))},[n]),D.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=D.createElement(E7,{isPresent:n},t)),D.createElement(bp.Provider,{value:c},t)};function P7(){return new Map}function C7(t){return D.useEffect(()=>()=>t(),[])}const Li=t=>t.key||"";function I7(t,e){t.forEach(n=>{const r=Li(n);e.set(r,n)})}function A7(t){const e=[];return D.Children.forEach(t,n=>{D.isValidElement(n)&&e.push(n)}),e}const Pr=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=D.useContext(Vx).forceRender||k7()[0],l=KR(),c=A7(t);let u=c;const h=D.useRef(new Map).current,p=D.useRef(u),m=D.useRef(new Map).current,g=D.useRef(!0);if(Mx(()=>{g.current=!1,I7(c,m),p.current=u}),C7(()=>{g.current=!0,m.clear(),h.clear()}),g.current)return D.createElement(D.Fragment,null,u.map(x=>D.createElement(fg,{key:Li(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},x)));u=[...u];const v=p.current.map(Li),_=c.map(Li),w=v.length;for(let x=0;x<w;x++){const T=v[x];_.indexOf(T)===-1&&!h.has(T)&&h.set(T,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((x,T)=>{if(_.indexOf(T)!==-1)return;const C=m.get(T);if(!C)return;const A=v.indexOf(T);let M=x;if(!M){const S=()=>{h.delete(T);const k=Array.from(m.keys()).filter(E=>!_.includes(E));if(k.forEach(E=>m.delete(E)),p.current=c.filter(E=>{const I=Li(E);return I===T||k.includes(I)}),!h.size){if(l.current===!1)return;a(),r&&r()}};M=D.createElement(fg,{key:Li(C),isPresent:!1,onExitComplete:S,custom:e,presenceAffectsLayout:i,mode:o},C),h.set(T,M)}u.splice(A,0,M)}),u=u.map(x=>{const T=x.key;return h.has(T)?x:D.createElement(fg,{key:Li(x),isPresent:!0,presenceAffectsLayout:i,mode:o},x)}),D.createElement(D.Fragment,null,h.size?u:u.map(x=>D.cloneElement(x)))};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var R7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(t,e)=>{const n=D.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>D.createElement("svg",{ref:u,...R7,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${N7(t)}`,a].join(" "),...c},[...e.map(([h,p])=>D.createElement(h,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=J("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=J("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=J("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=J("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=J("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=J("CalendarOff",[["path",{d:"M4.18 4.18A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18",key:"1feomx"}],["path",{d:"M21 15.5V6a2 2 0 0 0-2-2H9.5",key:"yhw86o"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h7",key:"1wap6i"}],["path",{d:"M21 10h-5.5",key:"quycpq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=J("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=J("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=J("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=J("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=J("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=J("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=J("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=J("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=J("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=J("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=J("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=J("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=J("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=J("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=J("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=J("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=J("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=J("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=J("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=J("Scroll",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=J("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=J("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=J("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=J("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=J("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=J("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=J("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=J("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=J("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Nn=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString(),aH=t=>{const e=new Date,n=new Date(t),r=n.getTime()-e.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s<-1?`Il y a ${Math.abs(s)} jours`:s===-1?"Hier":s===0?"Aujourd'hui":s===1?"Demain":s<=7?`Dans ${s} jours`:n.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})},s_=t=>t<5?"Novice":t<10?"Apprenti":t<15?"Initi":t<20?"Adepte":t<25?"Aventurier":t<30?"Explorateur":t<40?"Vtran":t<50?"Expert":t<60?"Matre":t<75?"Grand Matre":t<90?"Champion":t<100?"Hros":"Lgende",lH=t=>{switch(t){case"low":return"#22c55e";case"medium":return"#f59e0b";case"high":return"#f97316";case"critical":return"#ef4444";default:return"#9ca3af"}},cH=t=>{const e=new Date,r=new Date(t).getTime()-e.getTime();if(r<=0)return"Expir";const s=Math.floor(r/(1e3*60*60)),i=Math.floor(s/24);if(i>0)return`${i}j ${s%24}h`;const o=Math.floor(r%(1e3*60*60)/(1e3*60));return`${s}h ${o}m`},ne=(...t)=>t.filter(Boolean).join(" "),dt=({children:t,variant:e="primary",size:n="md",isLoading:r=!1,leftIcon:s,rightIcon:i,className:o,disabled:a,...l})=>{const c="inline-flex items-center justify-center font-medium rounded-2xl transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-soft hover:shadow-soft-lg",u={primary:"bg-gradient-to-r from-primary-400 to-primary-500 text-white hover:from-primary-500 hover:to-primary-600 focus:ring-primary-400",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 text-gray-800 dark:text-gray-200 hover:from-gray-200 hover:to-gray-300 dark:hover:from-gray-600 dark:hover:to-gray-500 focus:ring-gray-400",danger:"bg-gradient-to-r from-red-400 to-red-500 text-white hover:from-red-500 hover:to-red-600 focus:ring-red-400",success:"bg-gradient-to-r from-green-400 to-green-500 text-white hover:from-green-500 hover:to-green-600 focus:ring-green-400",game:"bg-gradient-to-r from-teal-400 via-cyan-400 to-blue-400 text-white hover:from-teal-500 hover:via-cyan-500 hover:to-blue-500 shadow-lg hover:shadow-xl",ghost:"bg-transparent hover:bg-gradient-to-r hover:from-gray-50 hover:to-gray-100 dark:hover:from-gray-800 dark:hover:to-gray-700 text-gray-600 dark:text-gray-400",outline:"bg-transparent border-2 border-primary-300 dark:border-primary-600 text-primary-600 dark:text-primary-300 hover:bg-gradient-to-r hover:from-primary-50 hover:to-primary-100 dark:hover:from-primary-900/30 dark:hover:to-primary-800/30 focus:ring-primary-400"},h={sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-4 py-2 text-base gap-2",lg:"px-6 py-3 text-lg gap-2.5"};return f.jsx("button",{className:ne(c,u[e],h[n],o),disabled:a||r,...l,children:r?f.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):f.jsxs(f.Fragment,{children:[s&&f.jsx("span",{className:"flex-shrink-0",children:s}),t,i&&f.jsx("span",{className:"flex-shrink-0",children:i})]})})},Ae=({children:t,className:e,variant:n="default",hoverable:r=!1,onClick:s})=>{const i={default:"bg-white dark:bg-gray-800/90 border border-gray-100 dark:border-gray-700/50 shadow-sm",game:"bg-gradient-to-br from-white to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/60 border border-gray-100 dark:border-gray-700/50 shadow-sm",glass:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl border border-white/20 dark:border-gray-700/30 shadow-soft"},o=s?de.button:de.div;return f.jsx(o,{className:ne("rounded-2xl overflow-hidden transition-all duration-300",i[n],r&&"hover:shadow-soft-lg hover:border-gray-200 dark:hover:border-gray-600 cursor-pointer active:scale-[0.98]",s&&"text-left w-full",e),onClick:s,whileTap:s?{scale:.98}:void 0,children:t})},uH={primary:"bg-gradient-to-br from-teal-500/20 to-cyan-500/20 text-teal-600 dark:text-teal-400",yellow:"bg-gradient-to-br from-yellow-500/20 to-amber-500/20 text-yellow-600 dark:text-yellow-400",orange:"bg-gradient-to-br from-orange-500/20 to-red-500/20 text-orange-600 dark:text-orange-400",purple:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 text-purple-600 dark:text-purple-400",green:"bg-gradient-to-br from-green-500/20 to-emerald-500/20 text-green-600 dark:text-green-400",red:"bg-gradient-to-br from-red-500/20 to-pink-500/20 text-red-600 dark:text-red-400",blue:"bg-gradient-to-br from-blue-500/20 to-indigo-500/20 text-blue-600 dark:text-blue-400"},lt=({icon:t,label:e,value:n,color:r="primary",trend:s})=>f.jsx(Ae,{className:"p-3 sm:p-4 group",hoverable:!0,children:f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[f.jsx("div",{className:ne("w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-transform duration-300 group-hover:scale-110",uH[r]),children:t}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-400 truncate leading-tight font-medium uppercase tracking-wide",children:e}),f.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white truncate",children:n})]}),s&&f.jsxs("div",{className:ne("px-2 py-1 rounded-lg text-xs font-semibold hidden sm:block",s.isPositive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[s.isPositive?"+":"",s.value,"%"]})]})}),dH=()=>{const[t,e]=D.useState(!1),[n,r]=D.useState(null),{signInWithGoogle:s,signInDemo:i}=fe(),o=async()=>{r(null),e(!0);try{await s()}catch(l){r(l.message||"chec de la connexion Google")}finally{e(!1)}},a=async()=>{r(null),e(!0);try{await i()}catch(l){r(l.message||"chec du mode dmo")}finally{e(!1)}};return f.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-900 via-cyan-900 to-gray-900 p-4",children:[f.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[f.jsx("div",{className:"absolute w-96 h-96 -top-48 -left-48 bg-teal-500/20 rounded-full blur-3xl"}),f.jsx("div",{className:"absolute w-96 h-96 -bottom-48 -right-48 bg-cyan-500/20 rounded-full blur-3xl"})]}),f.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative z-10 w-full max-w-sm",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-3xl bg-gradient-to-br from-teal-400 via-cyan-400 to-blue-400 mb-4 shadow-soft-lg",children:f.jsx(Ir,{className:"w-10 h-10 text-white"})}),f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Questify "}),f.jsx("p",{className:"text-gray-300 mt-2",children:"Transformez vos tches en aventure"})]}),f.jsxs(Ae,{className:"p-6",children:[n&&f.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-xl text-sm",children:[" ",n]}),f.jsx(dt,{type:"button",variant:"secondary",className:"w-full mb-4",onClick:o,isLoading:t,leftIcon:f.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[f.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),f.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),children:"Continuer avec Google"}),f.jsxs("div",{className:"relative my-6",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-3 bg-white dark:bg-gray-800 text-gray-500",children:"ou"})})]}),f.jsx(dt,{type:"button",variant:"outline",className:"w-full",onClick:a,isLoading:t,leftIcon:f.jsx($7,{className:"w-5 h-5"}),children:"Mode Dmo (sans compte)"}),f.jsx("p",{className:"mt-4 text-xs text-center text-gray-400",children:"Mode dmo : donnes stockes localement sur cet appareil"})]}),f.jsx("p",{className:"mt-6 text-center text-xs text-gray-500",children:"Application rserve aux amis "})]})]})},i_=({config:t,size:e="md",showLevel:n=!1,level:r,className:s})=>{const i={sm:"w-8 h-8 text-lg",md:"w-12 h-12 text-2xl",lg:"w-16 h-16 text-3xl",xl:"w-24 h-24 text-5xl"},o={sm:"w-4 h-4 text-[8px]",md:"w-5 h-5 text-[10px]",lg:"w-6 h-6 text-xs",xl:"w-8 h-8 text-sm"},l=t||{baseColor:"#6366f1",icon:""};return f.jsxs("div",{className:ne("relative",s),children:[f.jsxs("div",{className:ne("rounded-full flex items-center justify-center","ring-2 ring-white dark:ring-gray-800 shadow-lg",i[e]),style:{backgroundColor:l.baseColor},children:[f.jsx("span",{children:l.icon}),l.frame&&f.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-yellow-400"})]}),n&&r&&f.jsx("div",{className:ne("absolute -bottom-1 -right-1 rounded-full","bg-gradient-to-r from-teal-500 to-cyan-500","flex items-center justify-center font-bold text-white","ring-2 ring-white dark:ring-gray-800",o[e]),children:r})]})},hH=({selected:t,onSelect:e})=>{const n=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];return f.jsx("div",{className:"space-y-4",children:f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Icne"}),f.jsx("div",{className:"grid grid-cols-8 gap-2",children:n.map(r=>f.jsx("button",{onClick:()=>e(r),className:ne("w-10 h-10 rounded-lg flex items-center justify-center text-xl","hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",t===r&&"ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/30"),children:r},r))})]})})},pf=({value:t,max:e=100,color:n="primary",size:r="md",showLabel:s=!1,animated:i=!0,glow:o=!1})=>{const a=Math.min(t/e*100,100),l={primary:"from-teal-400 via-cyan-400 to-blue-400",xp:"from-green-400 via-emerald-400 to-teal-400",health:"from-red-400 via-rose-400 to-pink-500",mana:"from-blue-400 via-indigo-400 to-purple-400",gold:"from-yellow-400 via-amber-400 to-orange-400"},c={primary:"bg-gradient-to-r from-teal-100 to-cyan-100 dark:from-teal-900/30 dark:to-cyan-900/30",xp:"bg-gradient-to-r from-green-100 to-teal-100 dark:from-green-900/30 dark:to-teal-900/30",health:"bg-gradient-to-r from-red-100 to-pink-100 dark:from-red-900/30 dark:to-pink-900/30",mana:"bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30",gold:"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30"},u={sm:"h-2",md:"h-3.5",lg:"h-5"};return f.jsxs("div",{className:"w-full",children:[f.jsx("div",{className:ne("w-full rounded-full overflow-hidden relative",c[n],u[r],"ring-2 ring-purple-200/50 dark:ring-purple-800/30 shadow-sm"),children:f.jsx(de.div,{className:ne("h-full rounded-full bg-gradient-to-r",l[n],o&&"shadow-lg"),initial:i?{width:0}:void 0,animate:{width:`${a}%`},transition:{duration:.5,ease:"easeOut"},children:i&&f.jsx("div",{className:"w-full h-full shimmer"})})}),s&&f.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500 dark:text-gray-400",children:[f.jsx("span",{children:t}),f.jsx("span",{children:e})]})]})},tN=({currentXP:t,xpToNextLevel:e,level:n,showLevel:r=!0})=>{const s=t/e*100;return f.jsxs("div",{className:"w-full",children:[r&&f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Niveau ",n]}),f.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t," / ",e," XP"]})]}),f.jsxs("div",{className:"relative",children:[f.jsx(pf,{value:t,max:e,color:"xp",size:"md",animated:!0,glow:!0}),f.jsx(de.div,{className:"absolute right-0 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 flex items-center justify-center text-xs font-bold text-white shadow-lg",style:{right:`${100-s}%`},animate:{boxShadow:["0 0 10px rgba(34, 197, 94, 0.5)","0 0 20px rgba(34, 197, 94, 0.8)","0 0 10px rgba(34, 197, 94, 0.5)"]},transition:{duration:2,repeat:1/0},children:""})]})]})},fa=({children:t,variant:e="default",rarity:n,size:r="md",dot:s=!1})=>{const i={default:"bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-600",primary:"bg-gradient-to-r from-primary-100 to-primary-200 dark:from-primary-900/40 dark:to-primary-800/40 text-primary-700 dark:text-primary-200 border border-primary-200 dark:border-primary-800",success:"bg-gradient-to-r from-green-100 to-green-200 dark:from-green-900/40 dark:to-green-800/40 text-green-700 dark:text-green-200 border border-green-200 dark:border-green-800",warning:"bg-gradient-to-r from-yellow-100 to-amber-200 dark:from-yellow-900/40 dark:to-amber-800/40 text-yellow-700 dark:text-yellow-200 border border-yellow-200 dark:border-yellow-800",danger:"bg-gradient-to-r from-red-100 to-red-200 dark:from-red-900/40 dark:to-red-800/40 text-red-700 dark:text-red-200 border border-red-200 dark:border-red-800",info:"bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-900/40 dark:to-blue-800/40 text-blue-700 dark:text-blue-200 border border-blue-200 dark:border-blue-800"},o={common:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 dark:from-gray-700 dark:to-gray-600 dark:text-gray-200 border border-gray-300",rare:"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-800 dark:from-blue-900 dark:to-cyan-900 dark:text-blue-200 ring-2 ring-blue-400 border border-blue-300",epic:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 dark:from-purple-900 dark:to-pink-900 dark:text-purple-200 ring-2 ring-purple-400 border border-purple-300",legendary:"bg-gradient-to-r from-yellow-300 via-amber-400 to-orange-400 text-white ring-2 ring-yellow-500 border border-yellow-400 shadow-lg"},a={sm:"px-2.5 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"};return f.jsxs("span",{className:ne("inline-flex items-center gap-1 rounded-full font-medium shadow-sm",a[r],n?o[n]:i[e]),children:[s&&f.jsx("span",{className:ne("w-1.5 h-1.5 rounded-full",e==="success"&&"bg-green-500",e==="warning"&&"bg-yellow-500",e==="danger"&&"bg-red-500",e==="info"&&"bg-blue-500",e==="primary"&&"bg-primary-500",e==="default"&&"bg-gray-500")}),t]})},fH=({priority:t})=>{const e={none:{label:"Aucune",variant:"default"},low:{label:"Basse",variant:"success"},medium:{label:"Moyenne",variant:"warning"},high:{label:"Haute",variant:"danger"},critical:{label:"Critique",variant:"danger"}},{label:n,variant:r}=e[t];return f.jsx(fa,{variant:r,size:"sm",dot:!0,children:n})},pH=({difficulty:t})=>{const e={trivial:{label:"Trivial",rarity:"common"},easy:{label:"Facile",rarity:"common"},medium:{label:"Moyen",rarity:"rare"},hard:{label:"Difficile",rarity:"rare"},epic:{label:"pique",rarity:"epic"},legendary:{label:"Lgendaire",rarity:"legendary"}},{label:n,rarity:r}=e[t];return f.jsx(fa,{rarity:r,size:"sm",children:n})},o_=({amount:t,bonus:e})=>f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-sm font-medium",children:[f.jsx("span",{children:""}),f.jsx("span",{children:t}),e&&e>0&&f.jsxs("span",{className:"text-xs text-green-500",children:["+",e]}),f.jsx("span",{className:"text-xs",children:"XP"})]}),a_=({amount:t})=>f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 text-sm font-medium",children:[f.jsx("span",{children:""}),f.jsx("span",{children:t})]}),mH=({streak:t})=>t===0?null:f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 text-sm font-medium",children:[f.jsx("span",{className:"fire-animation",children:""}),f.jsx("span",{children:t})]}),nN=[{path:"/",icon:W7,label:"Accueil"},{path:"/tasks",icon:n_,label:"Tches"},{path:"/quests",icon:S0,label:"Qutes"},{path:"/achievements",icon:Tr,label:"Achievements"},{path:"/stats",icon:QR,label:"Statistiques"}],gH=()=>{mi();const{user:t,gameStats:e,signOut:n}=fe(),{sidebarOpen:r,toggleSidebar:s,isMobile:i}=ir();if(!t||!e)return null;const o=async()=>{await n()};return f.jsxs(f.Fragment,{children:[f.jsx(Pr,{children:i&&r&&f.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:s})}),f.jsxs(de.aside,{initial:!1,animate:{width:r?280:80,x:i&&!r?-280:0},transition:{duration:.3,ease:[.4,0,.2,1]},style:{width:r?"280px":"80px"},className:ne("fixed left-0 top-0 h-screen z-50","bg-white/95 dark:bg-gray-900/95","border-r border-gray-200/80 dark:border-gray-700/50","overflow-hidden backdrop-blur-md",i&&!r?"hidden":"flex flex-col",i&&r&&"shadow-2xl"),children:[f.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-gray-100 dark:border-gray-800 flex-shrink-0",children:[f.jsx(Pr,{mode:"wait",children:r&&f.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-500 flex items-center justify-center shadow-md",children:f.jsx(Ir,{className:"w-5 h-5 text-white"})}),f.jsx("span",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Questify"})]})}),f.jsx("button",{onClick:s,className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r?f.jsx(U7,{className:"w-5 h-5 text-gray-500"}):f.jsx(G7,{className:"w-5 h-5 text-gray-500"})})]}),f.jsxs("div",{className:ne("p-4 border-b border-gray-100 dark:border-gray-800 flex-shrink-0",!r&&"flex justify-center"),children:[f.jsxs("div",{className:ne("flex items-center gap-3",!r&&"flex-col"),children:[f.jsx(i_,{config:t.avatar,size:r?"md":"sm",showLevel:!0,level:e.level}),r&&f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"font-medium truncate",children:t.username}),f.jsx("div",{className:"flex items-center gap-2 mt-1",children:f.jsx(mH,{streak:e.currentStreak})})]})]}),r&&f.jsx("div",{className:"mt-3",children:f.jsx(tN,{currentXP:e.currentXP,xpToNextLevel:e.xpToNextLevel,level:e.level,showLevel:!1})})]}),f.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:nN.map(a=>f.jsxs(Iy,{to:a.path,className:({isActive:l})=>ne("flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200","hover:bg-gray-100 dark:hover:bg-gray-800",l&&"bg-teal-50 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400 font-medium",!l&&"text-gray-600 dark:text-gray-400",!r&&"justify-center"),children:[f.jsx(a.icon,{className:"w-5 h-5 flex-shrink-0"}),r&&f.jsx("span",{children:a.label})]},a.path))}),f.jsxs("div",{className:"p-3 border-t border-gray-200 dark:border-gray-800 space-y-1 flex-shrink-0",children:[f.jsxs(Iy,{to:"/settings",className:ne("flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors","hover:bg-gray-100 dark:hover:bg-gray-800",!r&&"justify-center"),children:[f.jsx(eN,{className:"w-5 h-5"}),r&&f.jsx("span",{children:"Paramtres"})]}),f.jsxs("button",{onClick:o,className:ne("w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors","hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400",!r&&"justify-center"),children:[f.jsx(JR,{className:"w-5 h-5"}),r&&f.jsx("span",{children:"Dconnexion"})]})]})]})]})},yH=()=>{const{isMobile:t}=ir(),e=mi();return t?f.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-40 safe-area-bottom",children:[f.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-t border-white/20 dark:border-gray-700/30"}),f.jsx("div",{className:"relative flex justify-around items-center h-16 px-2 pb-safe max-w-lg mx-auto",children:nN.slice(0,5).map(n=>{const r=e.pathname===n.path;return f.jsxs(Iy,{to:n.path,className:"relative flex flex-col items-center justify-center flex-1 h-full py-1.5 touch-manipulation group",children:[r&&f.jsx(de.div,{layoutId:"bottomNavIndicator",className:"absolute inset-x-2 top-1 h-1 bg-gradient-to-r from-teal-500 to-cyan-500 rounded-full",transition:{type:"spring",stiffness:500,damping:30}}),f.jsx(de.div,{whileTap:{scale:.9},className:ne("p-1.5 rounded-xl transition-colors duration-200",r?"text-teal-600 dark:text-teal-400":"text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-300"),children:f.jsx(n.icon,{className:"w-5 h-5",strokeWidth:r?2.5:2})}),f.jsx("span",{className:ne("text-[10px] font-medium transition-colors duration-200",r?"text-teal-600 dark:text-teal-400":"text-gray-400 dark:text-gray-500"),children:n.label})]},n.path)})})]}):null};var vH={easeInOutQuad:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e}},xH=vH;function _H(t){return t*Math.PI/180}function mn(t,e){return t+Math.random()*(e-t)}function wH(t,e){return Math.floor(t+Math.random()*(e-t+1))}var oc;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(oc||(oc={}));var Cs;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Cs||(Cs={}));const bH=1e3/60;class TH{constructor(e,n,r,s){this.getOptions=n;const{colors:i,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=s,this.w=mn(5,20),this.h=mn(5,20),this.radius=mn(5,10),this.vx=typeof o=="number"?mn(-o,o):mn(o.min,o.max),this.vy=typeof a=="number"?mn(-a,0):mn(a.min,a.max),this.shape=wH(0,2),this.angle=_H(mn(0,360)),this.angularSpin=mn(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=mn(0,1),this.rotationDirection=mn(0,1)?Cs.Positive:Cs.Negative}update(e){const{gravity:n,wind:r,friction:s,opacity:i,drawShape:o}=this.getOptions(),a=e/bH;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=s**a,this.vy*=s**a,this.rotateY>=1&&this.rotationDirection===Cs.Positive?this.rotationDirection=Cs.Negative:this.rotateY<=-1&&this.rotationDirection===Cs.Negative&&(this.rotationDirection=Cs.Positive);const l=.1*this.rotationDirection*a;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case oc.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case oc.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case oc.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class kH{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=mn(this.x,this.w+this.x),i=mn(this.y,this.h+this.y);return new TH(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:o,particlesGenerated:a,lastNumberOfPieces:l}=this,{run:c,recycle:u,numberOfPieces:h,debug:p,tweenFunction:m,tweenDuration:g}=this.getOptions();if(!c)return!1;const v=this.particles.length,_=u?v:a;if(_<h){l!==h&&(this.tweenProgress=0,this.tweenFrom=_,this.lastNumberOfPieces=h),this.tweenProgress=Math.min(g,Math.max(0,this.tweenProgress+s));const w=m(this.tweenProgress,this.tweenFrom,h,g),x=Math.round(w-_);for(let T=0;T<x;T++)this.particles.push(this.getParticle());this.particlesGenerated+=x}p&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${v}`,i.width-10,i.height-20));for(let w=this.particles.length-1;w>=0;w--){const x=this.particles[w];x.update(s),(x.y>i.height||x.y<-100||x.x>i.width+100||x.x<-100)&&(u&&_<=h?this.particles[w]=this.getParticle():this.removeParticleAt(w))}return v>0||_<h},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const l_={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:xH.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class SH{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...l_,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:a},canvas:l,context:c}=this,u=Math.min(s-this.lastFrameTime,50);if(a&&u<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(a?u%a:0),i&&(c.fillStyle="white",c.clearRect(0,0,l.width,l.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new kH(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var s,i;const n=(s=this._options)==null?void 0:s.run,r=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const EH=hn.createRef();class c_ extends hn.Component{constructor(e){super(e),this.canvas=hn.createRef(),this.canvas=e.canvasRef||EH}componentDidMount(){if(this.canvas.current){const e=mg(this.props)[0];this.confetti=new SH(this.canvas.current,e)}}componentDidUpdate(){const e=mg(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=mg(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return f.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}c_.defaultProps={...l_};c_.displayName="ReactConfetti";function mg(t){const e={},n={},r={},s=[...Object.keys(l_),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in t){const a=t[o];s.includes(o)?e[o]=a:i.includes(o)?i[o]=a:r[o]=a}return[e,r,n]}const PH=hn.forwardRef((t,e)=>f.jsx(c_,{canvasRef:e,...t})),rN=[{id:"tasks",name:"Tches",icon:""},{id:"streaks",name:"Sries",icon:""},{id:"quests",name:"Qutes",icon:""},{id:"level",name:"Niveau",icon:""},{id:"social",name:"Social",icon:""},{id:"special",name:"Spcial",icon:""}],dr=[{id:"first_task",name:"Premier Pas",description:"Compltez votre premire tche",icon:"",rarity:"common",category:"tasks",xpReward:10,coinReward:5,requirement:{type:"tasks_completed",value:1}},{id:"task_10",name:"Dbutant",description:"Compltez 10 tches",icon:"",rarity:"common",category:"tasks",xpReward:25,coinReward:10,requirement:{type:"tasks_completed",value:10}},{id:"task_50",name:"Travailleur",description:"Compltez 50 tches",icon:"",rarity:"rare",category:"tasks",xpReward:100,coinReward:50,requirement:{type:"tasks_completed",value:50}},{id:"task_100",name:"Productif",description:"Compltez 100 tches",icon:"",rarity:"rare",category:"tasks",xpReward:200,coinReward:100,requirement:{type:"tasks_completed",value:100}},{id:"task_500",name:"Machine de Guerre",description:"Compltez 500 tches",icon:"",rarity:"epic",category:"tasks",xpReward:500,coinReward:250,requirement:{type:"tasks_completed",value:500}},{id:"task_1000",name:"Lgende Vivante",description:"Compltez 1000 tches",icon:"",rarity:"legendary",category:"tasks",xpReward:1e3,coinReward:500,requirement:{type:"tasks_completed",value:1e3}},{id:"streak_3",name:"Rgularit",description:"Maintenez un streak de 3 jours",icon:"",rarity:"common",category:"streaks",xpReward:30,coinReward:15,requirement:{type:"streak",value:3}},{id:"streak_7",name:"Semaine Parfaite",description:"Maintenez un streak de 7 jours",icon:"",rarity:"common",category:"streaks",xpReward:75,coinReward:35,requirement:{type:"streak",value:7}},{id:"streak_14",name:"Persvrant",description:"Maintenez un streak de 14 jours",icon:"",rarity:"rare",category:"streaks",xpReward:150,coinReward:75,requirement:{type:"streak",value:14}},{id:"streak_30",name:"Mois Lgendaire",description:"Maintenez un streak de 30 jours",icon:"",rarity:"epic",category:"streaks",xpReward:300,coinReward:150,requirement:{type:"streak",value:30}},{id:"streak_100",name:"Centurion",description:"Maintenez un streak de 100 jours",icon:"",rarity:"legendary",category:"streaks",xpReward:1e3,coinReward:500,requirement:{type:"streak",value:100}},{id:"streak_365",name:"Anne Incroyable",description:"Maintenez un streak de 365 jours",icon:"",rarity:"legendary",category:"streaks",xpReward:5e3,coinReward:2500,requirement:{type:"streak",value:365},secret:!0},{id:"level_5",name:"Apprenti",description:"Atteignez le niveau 5",icon:"",rarity:"common",category:"xp",xpReward:50,coinReward:25,requirement:{type:"level",value:5}},{id:"level_10",name:"Aventurier",description:"Atteignez le niveau 10",icon:"",rarity:"common",category:"xp",xpReward:100,coinReward:50,requirement:{type:"level",value:10}},{id:"level_25",name:"Hros",description:"Atteignez le niveau 25",icon:"",rarity:"rare",category:"xp",xpReward:250,coinReward:125,requirement:{type:"level",value:25}},{id:"level_50",name:"Champion",description:"Atteignez le niveau 50",icon:"",rarity:"epic",category:"xp",xpReward:500,coinReward:250,requirement:{type:"level",value:50}},{id:"level_100",name:"Matre Lgendaire",description:"Atteignez le niveau 100",icon:"",rarity:"legendary",category:"xp",xpReward:2e3,coinReward:1e3,requirement:{type:"level",value:100}},{id:"xp_1000",name:"Collectionneur d'XP",description:"Gagnez 1000 XP au total",icon:"",rarity:"common",category:"xp",xpReward:50,coinReward:25,requirement:{type:"total_xp",value:1e3}},{id:"xp_10000",name:"Chasseur d'XP",description:"Gagnez 10000 XP au total",icon:"",rarity:"rare",category:"xp",xpReward:200,coinReward:100,requirement:{type:"total_xp",value:1e4}},{id:"xp_100000",name:"Matre de l'XP",description:"Gagnez 100000 XP au total",icon:"",rarity:"legendary",category:"xp",xpReward:1e3,coinReward:500,requirement:{type:"total_xp",value:1e5}},{id:"first_epic",name:"Premier Dfi pique",description:"Compltez une tche pique",icon:"",rarity:"rare",category:"tasks",xpReward:100,coinReward:50,requirement:{type:"epic_tasks",value:1}},{id:"first_legendary",name:"Lgende",description:"Compltez une tche lgendaire",icon:"",rarity:"epic",category:"tasks",xpReward:250,coinReward:125,requirement:{type:"legendary_tasks",value:1}},{id:"legendary_10",name:"Chasseur de Lgendes",description:"Compltez 10 tches lgendaires",icon:"",rarity:"legendary",category:"tasks",xpReward:1e3,coinReward:500,requirement:{type:"legendary_tasks",value:10}},{id:"early_bird",name:"Lve-tt",description:"Compltez une tche avant 7h du matin",icon:"",rarity:"common",category:"time",xpReward:25,coinReward:10,requirement:{type:"early_completion",value:1}},{id:"night_owl",name:"Oiseau de Nuit",description:"Compltez une tche aprs minuit",icon:"",rarity:"common",category:"time",xpReward:25,coinReward:10,requirement:{type:"late_completion",value:1}},{id:"speed_demon",name:"clair",description:"Compltez 5 tches en moins d'une heure",icon:"",rarity:"rare",category:"time",xpReward:150,coinReward:75,requirement:{type:"fast_completion",value:5}},{id:"perfect_day",name:"Journe Parfaite",description:"Compltez toutes vos tches du jour",icon:"",rarity:"rare",category:"time",xpReward:100,coinReward:50,requirement:{type:"perfect_day",value:1}},{id:"perfect_week",name:"Semaine Parfaite",description:"Compltez toutes vos tches de la semaine",icon:"",rarity:"epic",category:"time",xpReward:500,coinReward:250,requirement:{type:"perfect_week",value:1}},{id:"category_master",name:"Spcialiste",description:"Compltez 50 tches dans une mme catgorie",icon:"",rarity:"rare",category:"categories",xpReward:150,coinReward:75,requirement:{type:"category_tasks",value:50}},{id:"well_rounded",name:"Polyvalent",description:"Compltez des tches dans toutes les catgories",icon:"",rarity:"rare",category:"categories",xpReward:200,coinReward:100,requirement:{type:"all_categories",value:1}},{id:"comeback",name:"Le Retour",description:"Reconnectez-vous aprs 7 jours d'absence",icon:"",rarity:"common",category:"special",xpReward:50,coinReward:25,requirement:{type:"comeback",value:7},secret:!0},{id:"perfectionist",name:"Perfectionniste",description:"Compltez 10 tches avec toutes les sous-tches",icon:"",rarity:"rare",category:"special",xpReward:150,coinReward:75,requirement:{type:"perfect_tasks",value:10}},{id:"overachiever",name:"Surpassement",description:"Gagnez 500 XP en une seule journe",icon:"",rarity:"epic",category:"special",xpReward:250,coinReward:125,requirement:{type:"daily_xp",value:500}},{id:"founder",name:"Fondateur",description:"Crez votre compte",icon:"",rarity:"common",category:"special",xpReward:50,coinReward:25,requirement:{type:"account_created",value:1}},{id:"collector_10",name:"Petit Collectionneur",description:"Dbloquez 10 achievements",icon:"",rarity:"common",category:"collection",xpReward:100,coinReward:50,requirement:{type:"achievements",value:10}},{id:"collector_25",name:"Grand Collectionneur",description:"Dbloquez 25 achievements",icon:"",rarity:"rare",category:"collection",xpReward:300,coinReward:150,requirement:{type:"achievements",value:25}},{id:"collector_all",name:"Collectionneur Ultime",description:"Dbloquez tous les achievements",icon:"",rarity:"legendary",category:"collection",xpReward:2e3,coinReward:1e3,requirement:{type:"achievements",value:999},secret:!0},{id:"quest_first",name:"Quteur",description:"Compltez votre premire qute",icon:"",rarity:"common",category:"special",xpReward:50,coinReward:25,requirement:{type:"quests_completed",value:1}},{id:"quest_10",name:"Aventurier Confirm",description:"Compltez 10 qutes",icon:"",rarity:"rare",category:"special",xpReward:200,coinReward:100,requirement:{type:"quests_completed",value:10}},{id:"daily_warrior",name:"Guerrier Quotidien",description:"Compltez 30 qutes journalires",icon:"",rarity:"epic",category:"special",xpReward:500,coinReward:250,requirement:{type:"daily_quests",value:30}}],P0={common:"#9ca3af",rare:"#3b82f6",epic:"#8b5cf6",legendary:"#f59e0b"},sN=t=>dr.find(e=>e.id===t),oh=Object.freeze(Object.defineProperty({__proto__:null,ACHIEVEMENTS:dr,ACHIEVEMENT_CATEGORIES:rN,RARITY_COLORS:P0,getAchievementById:sN},Symbol.toStringTag,{value:"Module"})),CH=()=>{const{xpGained:t,hideGains:e}=ir();return hn.useEffect(()=>{if(t){const n=setTimeout(e,2e3);return()=>clearTimeout(n)}},[t,e]),f.jsx(Pr,{children:t&&f.jsx(de.div,{initial:{opacity:0,y:50,scale:.5},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50},className:"fixed bottom-20 right-4 z-50 pointer-events-none",children:f.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-full shadow-lg",children:[f.jsx(Rp,{className:"w-5 h-5"}),f.jsxs("span",{className:"font-bold text-lg",children:["+",t," XP"]})]})})})},IH=()=>{const{isLevelUpModalOpen:t,newLevel:e,hideLevelUp:n}=ir(),{gameStats:r}=fe(),[s,i]=hn.useState(!1);return hn.useEffect(()=>{if(t){i(!0);const o=setTimeout(()=>{i(!1),n()},5e3);return()=>clearTimeout(o)}},[t,n]),f.jsx(Pr,{children:t&&f.jsxs(f.Fragment,{children:[s&&f.jsx(PH,{width:window.innerWidth,height:window.innerHeight,recycle:!1,numberOfPieces:200,gravity:.3}),f.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:n,children:f.jsxs(de.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",stiffness:200,damping:20},className:"text-center",onClick:o=>o.stopPropagation(),children:[f.jsx(de.div,{animate:{boxShadow:["0 0 20px rgba(251, 191, 36, 0.5)","0 0 60px rgba(251, 191, 36, 0.8)","0 0 20px rgba(251, 191, 36, 0.5)"]},transition:{duration:1.5,repeat:1/0},className:"w-32 h-32 mx-auto mb-6 rounded-full bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center",children:f.jsx(j7,{className:"w-16 h-16 text-white"})}),f.jsx(de.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-4xl font-bold text-white mb-2",children:"LEVEL UP!"}),f.jsx(de.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.5,type:"spring"},className:"text-6xl font-black gradient-text mb-4",children:e}),f.jsx(de.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"text-xl text-gray-300",children:s_(e)}),f.jsx(de.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"mt-8 px-8 py-3 bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-bold rounded-full",onClick:n,children:"Continuer l'aventure !"})]})})]})})},AH=()=>{const{unlockedAchievement:t,hideAchievementUnlock:e}=ir(),n=t?sN(t):null;return hn.useEffect(()=>{if(t){const r=setTimeout(e,4e3);return()=>clearTimeout(r)}},[t,e]),f.jsx(Pr,{children:n&&f.jsx(de.div,{initial:{x:400,opacity:0},animate:{x:0,opacity:1},exit:{x:400,opacity:0},transition:{type:"spring",stiffness:200,damping:25},className:"fixed top-4 right-4 z-50",children:f.jsx("div",{className:"p-4 rounded-xl shadow-2xl bg-white dark:bg-gray-800 border-2",style:{borderColor:P0[n.rarity]},children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(de.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring"},className:"w-16 h-16 rounded-xl flex items-center justify-center text-3xl",style:{backgroundColor:P0[n.rarity]+"20"},children:n.icon}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Tr,{className:"w-5 h-5 text-yellow-500"}),f.jsx("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Achievement Dbloqu !"})]}),f.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:n.name}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n.description}),f.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[f.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600",children:[f.jsx(r_,{className:"w-3 h-3"}),"+",n.xpReward," XP"]}),f.jsxs("span",{className:"text-xs text-yellow-600",children:["+",n.coinReward," "]})]})]})]})})})})},RH=()=>f.jsxs(f.Fragment,{children:[f.jsx(CH,{}),f.jsx(IH,{}),f.jsx(AH,{})]}),ac=({isOpen:t,onClose:e,title:n,children:r,size:s="md",showCloseButton:i=!0})=>{const o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-4xl"};return f.jsx(Pr,{children:t&&f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:f.jsxs("div",{className:"flex min-h-screen items-end sm:items-center justify-center sm:p-4",children:[f.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),f.jsxs(de.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{duration:.3,type:"spring",damping:25},className:ne("relative w-full bg-white dark:bg-gray-800 shadow-xl","rounded-t-3xl sm:rounded-2xl","max-h-[90vh] sm:max-h-[85vh] overflow-hidden flex flex-col",o[s]),children:[(n||i)&&f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[f.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full sm:hidden"}),n&&f.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white pt-2 sm:pt-0",children:n}),i&&f.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors touch-manipulation",children:f.jsx(oH,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),f.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:r})]})]})})})},js=({label:t,error:e,leftIcon:n,rightIcon:r,className:s,...i})=>f.jsxs("div",{className:"w-full",children:[t&&f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),f.jsxs("div",{className:"relative",children:[n&&f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:n}),f.jsx("input",{className:ne("w-full px-4 py-2.5 rounded-2xl border-2 border-purple-200 dark:border-purple-800/30","bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-300 focus:border-primary-300","placeholder-gray-400 dark:placeholder-gray-500","transition-all duration-200 shadow-sm focus:shadow-soft",n?"pl-10":"",r?"pr-10":"",e&&"border-red-300 focus:ring-red-300",s),...i}),r&&f.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400",children:r})]}),e&&f.jsx("p",{className:"mt-1 text-sm text-red-500",children:e})]}),NH=({label:t,error:e,className:n,...r})=>f.jsxs("div",{className:"w-full",children:[t&&f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),f.jsx("textarea",{className:ne("w-full px-4 py-2.5 rounded-2xl border-2 border-purple-200 dark:border-purple-800/30","bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-300 focus:border-primary-300","placeholder-gray-400 dark:placeholder-gray-500","transition-all duration-200 resize-none shadow-sm focus:shadow-soft",e&&"border-red-300 focus:ring-red-300",n),...r}),e&&f.jsx("p",{className:"mt-1 text-sm text-red-500",children:e})]}),wd=({label:t,error:e,options:n,className:r,...s})=>f.jsxs("div",{className:"w-full",children:[t&&f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),f.jsx("select",{className:ne("w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","transition-colors duration-200 cursor-pointer",e&&"border-red-500 focus:ring-red-500",r),...s,children:n.map(i=>f.jsx("option",{value:i.value,children:i.label},i.value))}),e&&f.jsx("p",{className:"mt-1 text-sm text-red-500",children:e})]}),Gn=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null,jt=(t,e,n="sine",r=.3)=>{if(!Gn)return;const s=Gn.createOscillator(),i=Gn.createGain();s.connect(i),i.connect(Gn.destination),s.frequency.value=t,s.type=n,i.gain.setValueAtTime(r,Gn.currentTime),i.gain.exponentialRampToValueAtTime(.01,Gn.currentTime+e),s.start(Gn.currentTime),s.stop(Gn.currentTime+e)},DH={taskComplete:()=>{jt(523.25,.1,"sine",.3),setTimeout(()=>jt(659.25,.1,"sine",.3),100),setTimeout(()=>jt(783.99,.2,"sine",.3),200)},xpGain:()=>{jt(987.77,.05,"square",.2),setTimeout(()=>jt(1318.51,.1,"square",.2),50)},levelUp:()=>{[523.25,659.25,783.99,1046.5].forEach((e,n)=>{setTimeout(()=>jt(e,.2,"sine",.4),n*150)})},achievementUnlock:()=>{jt(392,.15,"triangle",.3),setTimeout(()=>jt(523.25,.15,"triangle",.3),150),setTimeout(()=>jt(659.25,.15,"triangle",.3),300),setTimeout(()=>jt(783.99,.3,"triangle",.4),450)},questComplete:()=>{[261.63,329.63,392,523.25,659.25,783.99].forEach((e,n)=>{setTimeout(()=>jt(e,.15,"sine",.25),n*100)})},error:()=>{jt(200,.2,"sawtooth",.2)},click:()=>{jt(800,.05,"square",.1)},streak:()=>{jt(349.23,.1,"triangle",.3),setTimeout(()=>jt(440,.1,"triangle",.3),80),setTimeout(()=>jt(523.25,.15,"triangle",.4),160)}},lc=(t,e=!0)=>{e&&Gn&&(Gn.state==="suspended"&&Gn.resume(),DH[t]())},MH=[{value:"Travail",label:" Travail",color:"#3b82f6"},{value:"Personnel",label:" Personnel",color:"#22c55e"},{value:"Sant",label:" Sant",color:"#ef4444"},{value:"tudes",label:" tudes",color:"#8b5cf6"},{value:"Finances",label:" Finances",color:"#f59e0b"},{value:"Social",label:" Social",color:"#ec4899"},{value:"Loisirs",label:" Loisirs",color:"#06b6d4"},{value:"Maison",label:" Maison",color:"#84cc16"}],jH=({isOpen:t,onClose:e,editTask:n})=>{var R;const{addTask:r,updateTask:s,categories:i,calculateTaskRewards:o}=bi(),{user:a}=fe(),[l,c]=D.useState(!1),[u,h]=D.useState({}),[p,m]=D.useState({}),[g,v]=D.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",category:(n==null?void 0:n.category)||"Personnel",priority:(n==null?void 0:n.priority)||"medium",difficulty:(n==null?void 0:n.difficulty)||"medium",dueDate:n!=null&&n.dueDate?new Date(n.dueDate).toISOString().slice(0,16):"",estimatedTime:((R=n==null?void 0:n.estimatedTime)==null?void 0:R.toString())||"",recurrence:(n==null?void 0:n.recurrence)||"none",subtasks:(n==null?void 0:n.subtasks.map(z=>z.title))||[],tags:(n==null?void 0:n.tags.join(", "))||""}),[_,w]=D.useState("");D.useEffect(()=>{var z,H,$;t&&(v({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",category:(n==null?void 0:n.category)||"Personnel",priority:(n==null?void 0:n.priority)||"medium",difficulty:(n==null?void 0:n.difficulty)||"medium",dueDate:n!=null&&n.dueDate?new Date(n.dueDate).toISOString().slice(0,16):"",estimatedTime:((z=n==null?void 0:n.estimatedTime)==null?void 0:z.toString())||"",recurrence:(n==null?void 0:n.recurrence)||"none",subtasks:((H=n==null?void 0:n.subtasks)==null?void 0:H.map(X=>X.title))||[],tags:(($=n==null?void 0:n.tags)==null?void 0:$.join(", "))||""}),h({}),m({}))},[t,n]);const x=o(g.difficulty,g.priority),T=()=>{const z={};return g.title.trim()?g.title.trim().length<2&&(z.title="Le titre doit faire au moins 2 caractres"):z.title="Le titre est obligatoire",h(z),Object.keys(z).length===0},C=async z=>{if(z.preventDefault(),m({title:!0}),!!T()){if(!a){h({general:"Vous devez tre connect pour crer une tche"});return}c(!0);try{const H={userId:a.id,title:g.title.trim(),description:g.description.trim()||void 0,category:g.category,priority:g.priority,difficulty:g.difficulty,dueDate:g.dueDate?new Date(g.dueDate):void 0,estimatedTime:g.estimatedTime?parseInt(g.estimatedTime):void 0,recurrence:g.recurrence,subtasks:g.subtasks.map(($,X)=>({id:`subtask-${X}-${Date.now()}`,title:$,completed:!1})),tags:g.tags.split(",").map($=>$.trim()).filter(Boolean),status:"pending",progress:0};n?await s(n.id,H):(await r(H),lc("click")),e(),A()}catch(H){console.error("Error saving task:",H);const $=(H==null?void 0:H.message)||"Une erreur est survenue lors de la cration de la tche";h({general:$})}finally{c(!1)}}},A=()=>{v({title:"",description:"",category:"Personnel",priority:"medium",difficulty:"medium",dueDate:"",estimatedTime:"",recurrence:"none",subtasks:[],tags:""}),w(""),h({}),m({})},M=()=>{_.trim()&&(v(z=>({...z,subtasks:[...z.subtasks,_.trim()]})),w(""))},S=z=>{v(H=>({...H,subtasks:H.subtasks.filter(($,X)=>X!==z)}))},k=z=>{v({...g,title:z.target.value}),p.title&&(z.target.value.trim()?h(H=>({...H,title:void 0})):h(H=>({...H,title:"Le titre est obligatoire"})))},E=()=>{m(z=>({...z,title:!0})),g.title.trim()||h(z=>({...z,title:"Le titre est obligatoire"}))},I=[{value:"low",label:" Basse"},{value:"medium",label:" Moyenne"},{value:"high",label:" Haute"},{value:"critical",label:" Critique"}],N=[{value:"trivial",label:" Trivial (5 XP)"},{value:"easy",label:" Facile (10 XP)"},{value:"medium",label:" Moyen (25 XP)"},{value:"hard",label:" Difficile (50 XP)"},{value:"epic",label:" pique (100 XP)"},{value:"legendary",label:" Lgendaire (200 XP)"}],j=[{value:"none",label:"Aucune"},{value:"daily",label:"Quotidien"},{value:"weekly",label:"Hebdomadaire"},{value:"monthly",label:"Mensuel"}];return f.jsx(ac,{isOpen:t,onClose:e,title:n?"Modifier la tche":"Nouvelle tche",size:"xl",children:f.jsxs("form",{onSubmit:C,noValidate:!0,className:"space-y-5",children:[f.jsx(Pr,{children:u.general&&f.jsxs(de.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-3 p-3 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500",children:[f.jsx(D7,{className:"w-5 h-5 flex-shrink-0"}),f.jsx("span",{className:"text-sm",children:u.general})]})}),f.jsx("div",{children:f.jsx(js,{label:"Titre de la tche *",placeholder:"Que devez-vous accomplir ?",value:g.title,onChange:k,onBlur:E,error:p.title?u.title:void 0,autoFocus:!0})}),f.jsx(NH,{label:"Description (optionnel)",placeholder:"Ajoutez des dtails ou des notes...",rows:2,value:g.description,onChange:z=>v({...g,description:z.target.value})}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsx(wd,{label:"Catgorie",options:MH,value:g.category,onChange:z=>v({...g,category:z.target.value})}),f.jsx(wd,{label:"Priorit",options:I,value:g.priority,onChange:z=>v({...g,priority:z.target.value})})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsx(wd,{label:"Difficult",options:N,value:g.difficulty,onChange:z=>v({...g,difficulty:z.target.value})}),f.jsx(js,{label:"Date d'chance (optionnel)",type:"datetime-local",value:g.dueDate,onChange:z=>v({...g,dueDate:z.target.value}),required:!1})]}),f.jsxs("div",{className:"p-4 bg-gradient-to-r from-teal-500/10 to-cyan-500/10 border border-teal-500/20 rounded-xl",children:[f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2 font-medium",children:" Rcompenses estimes :"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(o_,{amount:x.xp}),f.jsx(a_,{amount:x.coins})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsx(js,{label:"Temps estim (minutes)",type:"number",placeholder:"Ex: 30",min:"1",value:g.estimatedTime,onChange:z=>v({...g,estimatedTime:z.target.value})}),f.jsx(wd,{label:"Rcurrence",options:j,value:g.recurrence,onChange:z=>v({...g,recurrence:z.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sous-tches (optionnel)"}),f.jsxs("div",{className:"flex gap-2 mb-2",children:[f.jsx(js,{placeholder:"Ajouter une tape...",value:_,onChange:z=>w(z.target.value),onKeyPress:z=>z.key==="Enter"&&(z.preventDefault(),M())}),f.jsx(dt,{type:"button",variant:"secondary",onClick:M,className:"flex-shrink-0",children:f.jsx(qc,{className:"w-4 h-4"})})]}),g.subtasks.length>0&&f.jsx("ul",{className:"space-y-2 max-h-32 overflow-y-auto",children:g.subtasks.map((z,H)=>f.jsxs(de.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-2.5 bg-gray-100 dark:bg-gray-900 rounded-lg",children:[f.jsx("span",{className:"text-sm truncate flex-1 mr-2",children:z}),f.jsx("button",{type:"button",onClick:()=>S(H),className:"text-red-500 hover:text-red-600 p-1 flex-shrink-0",children:f.jsx(ff,{className:"w-4 h-4"})})]},H))})]}),f.jsx(js,{label:"Tags (optionnel)",placeholder:"projet, urgent, ide... (spars par des virgules)",value:g.tags,onChange:z=>v({...g,tags:z.target.value})}),f.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[f.jsx(dt,{type:"button",variant:"secondary",onClick:e,className:"w-full sm:w-auto",children:"Annuler"}),f.jsx(dt,{type:"submit",variant:"game",isLoading:l,className:"w-full sm:w-auto",children:n?"Enregistrer":"Crer la tche"})]})]})})},OH=()=>{const{sidebarOpen:t,isMobile:e,isTaskModalOpen:n,editingTask:r,openTaskModal:s,closeTaskModal:i}=ir(),{user:o}=fe();return f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 overflow-x-hidden",children:[f.jsx(gH,{}),f.jsx("main",{className:ne("min-h-screen transition-all duration-300 overflow-x-hidden",!e&&t?"ml-[280px]":"",!e&&!t?"ml-20":"",e?"ml-0 pb-24":""),children:f.jsx("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8",children:f.jsx(rL,{})})}),f.jsx(yH,{}),f.jsx(de.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:400,damping:25},className:ne("fixed z-40",e?"bottom-[88px] right-4":"bottom-8 right-8"),children:f.jsxs(de.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"relative w-14 h-14 rounded-2xl bg-gradient-to-br from-teal-500 to-cyan-500 text-white shadow-lg shadow-teal-500/30 flex items-center justify-center group",children:[f.jsx("span",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-teal-500 to-cyan-500 animate-ping opacity-20"}),f.jsx(qc,{className:"w-6 h-6 relative z-10 transition-transform group-hover:rotate-90"})]})}),f.jsx(jH,{isOpen:n,onClose:i,editTask:r}),f.jsx(RH,{})]})},ah=({task:t,onComplete:e,compact:n=!1})=>{const[r,s]=D.useState(!1),[i,o]=D.useState(!1),{completeTask:a,deleteTask:l,archiveTask:c,toggleSubtask:u}=bi(),{showXPGain:h,showCoinsGain:p,showLevelUp:m,setEditingTask:g,openTaskModal:v}=ir(),_=()=>{g(t),v(),s(!1)},w=async()=>{const M=await a(t.id);lc("taskComplete"),h(M.xpGained),p(M.coinsGained),M.leveledUp&&setTimeout(()=>{m(M.newLevel),lc("levelUp")},500),e==null||e()},x=async M=>{await u(t.id,M),lc("click")},T=t.status==="completed",C=t.dueDate&&new Date(t.dueDate)<new Date&&!T,A=t.subtasks.filter(M=>M.completed).length;return f.jsx(de.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:f.jsxs(Ae,{variant:"game",className:ne("p-3 sm:p-4 relative overflow-hidden transition-shadow duration-200 hover:shadow-soft-lg",T&&"opacity-60",C&&"border-l-4 border-l-red-500"),children:[f.jsx("div",{className:"absolute top-0 right-0 w-12 sm:w-16 h-12 sm:h-16 -mr-6 sm:-mr-8 -mt-6 sm:-mt-8 rounded-full opacity-20",style:{backgroundColor:lH(t.priority)}}),f.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[f.jsx("button",{onClick:w,disabled:T,className:ne("flex-shrink-0 mt-0.5 transition-colors touch-manipulation",T?"text-green-500":"text-gray-400 hover:text-green-500"),children:T?f.jsx(Cr,{className:"w-5 h-5 sm:w-6 sm:h-6"}):f.jsx(Ck,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsx("h3",{className:ne("font-medium text-sm sm:text-base text-gray-900 dark:text-white line-clamp-2",T&&"line-through text-gray-500"),children:t.title}),f.jsxs("div",{className:"relative flex-shrink-0",children:[f.jsx("button",{onClick:()=>s(!r),className:"p-1.5 rounded hover:bg-gray-100 dark:hover:bg-gray-700 touch-manipulation",children:f.jsx(Y7,{className:"w-4 h-4 text-gray-400"})}),f.jsx(Pr,{children:r&&f.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute right-0 top-full mt-1 w-36 sm:w-40 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-10",children:[f.jsxs("button",{onClick:_,className:"w-full px-3 py-2.5 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 touch-manipulation",children:[f.jsx(Z7,{className:"w-4 h-4"})," Modifier"]}),f.jsxs("button",{onClick:()=>{c(t.id),s(!1)},className:"w-full px-3 py-2.5 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 touch-manipulation",children:[f.jsx(M7,{className:"w-4 h-4"})," Archiver"]}),f.jsxs("button",{onClick:()=>{l(t.id),s(!1)},className:"w-full px-3 py-2.5 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2 touch-manipulation",children:[f.jsx(ff,{className:"w-4 h-4"})," Supprimer"]})]})})]})]}),t.description&&!n&&f.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:t.description}),f.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2 mt-2",children:[f.jsx(fH,{priority:t.priority}),!n&&f.jsx(pH,{difficulty:t.difficulty}),t.category&&!n&&f.jsx(fa,{variant:"default",size:"sm",children:t.category})]}),t.subtasks.length>0&&!n&&f.jsxs("div",{className:"mt-2 sm:mt-3",children:[f.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-1 text-xs sm:text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 touch-manipulation",children:[i?f.jsx(F7,{className:"w-3 h-3 sm:w-4 sm:h-4"}):f.jsx(Yn,{className:"w-3 h-3 sm:w-4 sm:h-4"}),f.jsxs("span",{children:[A,"/",t.subtasks.length," sous-tches"]})]}),!i&&t.subtasks.length>0&&f.jsx(pf,{value:A,max:t.subtasks.length,color:"primary",size:"sm"}),f.jsx(Pr,{children:i&&f.jsx(de.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-2 space-y-1 overflow-hidden",children:t.subtasks.map(M=>f.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[f.jsx("button",{onClick:()=>x(M.id),className:ne("flex-shrink-0 touch-manipulation",M.completed?"text-green-500":"text-gray-400 hover:text-green-500"),children:M.completed?f.jsx(Cr,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}):f.jsx(Ck,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),f.jsx("span",{className:ne("truncate",M.completed&&"line-through text-gray-400"),children:M.title})]},M.id))})})]}),f.jsxs("div",{className:"flex items-center justify-between mt-2 sm:mt-3 pt-2 sm:pt-3 border-t border-gray-100 dark:border-gray-700",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-xs sm:text-sm text-gray-500 min-w-0",children:[t.dueDate&&f.jsxs("span",{className:ne("flex items-center gap-1 truncate",C&&"text-red-500"),children:[f.jsx(Ip,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),f.jsx("span",{className:"truncate",children:aH(t.dueDate)})]}),t.estimatedTime&&!n&&f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(Ap,{className:"w-3 h-3 sm:w-4 sm:h-4"}),t.estimatedTime,"m"]})]}),f.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[f.jsx(o_,{amount:t.xpReward}),!n&&f.jsx(a_,{amount:t.coinReward})]})]})]})]})]})})},C0=({quest:t,compact:e=!1})=>{const{claimQuestRewards:n}=Tu(),[r,s]=hn.useState(!1),i=t.objectives.filter(g=>g.completed).length,o=t.objectives.length,a=t.objectives.reduce((g,v)=>g+v.current,0),l=t.objectives.reduce((g,v)=>g+v.target,0),c=cH(t.endDate),u=()=>{if(t.completed)return"Termin ";if(o===1){const g=t.objectives[0];return`${g.current}/${g.target}`}return l>o?`${a}/${l}`:`${i}/${o}`},h=async()=>{s(!0);try{await n(t.id),lc("questComplete")}finally{s(!1)}},p={daily:"border-l-blue-500 bg-blue-50 dark:bg-blue-900/10",weekly:"border-l-cyan-500 bg-cyan-50 dark:bg-cyan-900/10",special:"border-l-yellow-500 bg-yellow-50 dark:bg-yellow-900/10",story:"border-l-green-500 bg-green-50 dark:bg-green-900/10"},m={daily:"Quotidienne",weekly:"Hebdomadaire",special:"Spciale",story:"Histoire"};return f.jsx(de.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:f.jsx(Ae,{className:ne("p-4 border-l-4 transition-shadow duration-200 hover:shadow-soft-lg",p[t.type],t.completed&&!t.claimed&&"ring-2 ring-yellow-400 ring-opacity-50"),children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:ne("w-12 h-12 rounded-2xl flex items-center justify-center text-2xl","bg-gradient-to-br from-white to-teal-50 dark:from-gray-800 dark:to-teal-900/20 shadow-soft border-2 border-teal-100 dark:border-teal-900/30"),children:t.icon}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-start justify-between gap-3 mb-2",children:f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:t.title}),f.jsx(fa,{variant:t.type==="daily"?"info":t.type==="weekly"?"primary":"warning",size:"sm",children:m[t.type]}),f.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:[f.jsx(Ap,{className:"w-3.5 h-3.5"}),f.jsx("span",{children:c})]})]}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:t.description}),e&&f.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx(pf,{value:t.completed?100:a,max:t.completed?100:l,color:t.completed?"gold":"primary",size:"sm"})}),f.jsx("span",{className:ne("text-xs font-medium whitespace-nowrap",t.completed?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"),children:u()}),t.completed&&!t.claimed&&f.jsxs(dt,{variant:"game",size:"sm",onClick:h,isLoading:r,className:"ml-1 text-xs py-1 px-2",children:[f.jsx(k0,{className:"w-3 h-3 mr-1"}),"Rclamer"]})]})]})}),!e&&f.jsx("div",{className:"mt-3 space-y-2",children:t.objectives.map(g=>f.jsx(LH,{objective:g},g.id))}),!e&&f.jsxs("div",{className:"mt-3",children:[f.jsxs("div",{className:"flex justify-between text-xs font-medium mb-2",children:[f.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:t.completed?" Qute termine !":"Progression"}),f.jsx("span",{className:ne("font-semibold",t.completed?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"),children:u()})]}),f.jsx(pf,{value:t.completed?100:a,max:t.completed?100:l,color:t.completed?"gold":"primary",size:"md"})]}),!e&&f.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:"Rcompenses:"}),f.jsx(o_,{amount:t.rewards.xp}),f.jsx(a_,{amount:t.rewards.coins}),t.rewards.gems&&f.jsxs(fa,{variant:"primary",size:"sm",children:[" ",t.rewards.gems]})]}),t.completed&&!t.claimed&&f.jsx(dt,{variant:"game",size:"sm",onClick:h,isLoading:r,leftIcon:f.jsx(k0,{className:"w-4 h-4"}),children:"Rcuprer"}),t.claimed&&f.jsxs(fa,{variant:"success",size:"sm",children:[f.jsx(Cr,{className:"w-3 h-3 mr-1"}),"Rcupr"]})]})]})]})})})},LH=({objective:t})=>(Math.min(t.current/t.target*100,100),f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("div",{className:ne("w-5 h-5 rounded-full flex items-center justify-center",t.completed?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700"),children:t.completed?f.jsx(Cr,{className:"w-3 h-3"}):f.jsx(Yn,{className:"w-3 h-3 text-gray-400"})}),f.jsx("span",{className:ne("flex-1",t.completed&&"line-through text-gray-400"),children:t.description}),f.jsxs("span",{className:"text-xs text-gray-500",children:[t.current,"/",t.target]})]})),VH=()=>{const{gameStats:t}=fe();if(!t)return null;const e=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],n=new Date().getDay(),r=n===0?6:n-1;return f.jsxs(Ae,{className:"p-4",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(E0,{className:"w-5 h-5"}),"Cette semaine"]}),f.jsx("div",{className:"flex justify-between items-end h-24",children:e.map((s,i)=>{const o=i===r,l=i<r||o;return f.jsxs("div",{className:"flex flex-col items-center gap-2",children:[f.jsx("div",{className:`w-8 rounded-full transition-all ${o?"bg-primary-500 h-16":l?"bg-primary-300 dark:bg-primary-700 h-12":"bg-gray-200 dark:bg-gray-700 h-4"}`}),f.jsx("span",{className:`text-xs ${o?"font-bold text-primary-500":"text-gray-500"}`,children:s})]},s)})}),f.jsxs("div",{className:"flex justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-500",children:"XP cette semaine"}),f.jsx("p",{className:"text-xl font-bold",children:Nn(t.weeklyXP)})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-sm text-gray-500",children:"Tches"}),f.jsx("p",{className:"text-xl font-bold",children:t.weeklyTasksCompleted})]})]})]})};function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function ds(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function De(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function xt(t){De(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||mf(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function iN(t,e){De(2,arguments);var n=xt(t),r=ds(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function FH(t,e){De(2,arguments);var n=xt(t).getTime(),r=ds(e);return new Date(n+r)}var UH={};function Np(){return UH}function zH(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Rk(t){De(1,arguments);var e=xt(t);return e.setHours(0,0,0,0),e}var BH=6e4,$H=36e5;function u_(t,e){De(2,arguments);var n=Rk(t),r=Rk(e);return n.getTime()===r.getTime()}function WH(t){return De(1,arguments),t instanceof Date||mf(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function HH(t){if(De(1,arguments),!WH(t)&&typeof t!="number")return!1;var e=xt(t);return!isNaN(Number(e))}function oN(t,e){return De(2,arguments),xt(t).getTime()-xt(e).getTime()}var qH={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},GH="trunc";function aN(t){return qH[GH]}function KH(t,e,n){De(2,arguments);var r=oN(t,e)/$H;return aN()(r)}function QH(t,e,n){De(2,arguments);var r=oN(t,e)/BH;return aN()(r)}function YH(t,e){var n;De(1,arguments);var r=t||{},s=xt(r.start),i=xt(r.end),o=i.getTime();if(!(s.getTime()<=o))throw new RangeError("Invalid interval");var a=[],l=s;l.setHours(0,0,0,0);var c=Number((n=void 0)!==null&&n!==void 0?n:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=o;)a.push(xt(l)),l.setDate(l.getDate()+c),l.setHours(0,0,0,0);return a}function XH(t,e){De(2,arguments);var n=ds(e);return FH(t,-n)}var JH=864e5;function ZH(t){De(1,arguments);var e=xt(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/JH)+1}function gf(t){De(1,arguments);var e=1,n=xt(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function lN(t){De(1,arguments);var e=xt(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=gf(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=gf(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function eq(t){De(1,arguments);var e=lN(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=gf(n);return r}var tq=6048e5;function nq(t){De(1,arguments);var e=xt(t),n=gf(e).getTime()-eq(e).getTime();return Math.round(n/tq)+1}function yf(t,e){var n,r,s,i,o,a,l,c;De(1,arguments);var u=Np(),h=ds((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=xt(t),m=p.getUTCDay(),g=(m<h?7:0)+m-h;return p.setUTCDate(p.getUTCDate()-g),p.setUTCHours(0,0,0,0),p}function cN(t,e){var n,r,s,i,o,a,l,c;De(1,arguments);var u=xt(t),h=u.getUTCFullYear(),p=Np(),m=ds((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(l=p.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(h+1,0,m),g.setUTCHours(0,0,0,0);var v=yf(g,e),_=new Date(0);_.setUTCFullYear(h,0,m),_.setUTCHours(0,0,0,0);var w=yf(_,e);return u.getTime()>=v.getTime()?h+1:u.getTime()>=w.getTime()?h:h-1}function rq(t,e){var n,r,s,i,o,a,l,c;De(1,arguments);var u=Np(),h=ds((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:u.firstWeekContainsDate)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=cN(t,e),m=new Date(0);m.setUTCFullYear(p,0,h),m.setUTCHours(0,0,0,0);var g=yf(m,e);return g}var sq=6048e5;function iq(t,e){De(1,arguments);var n=xt(t),r=yf(n,e).getTime()-rq(n,e).getTime();return Math.round(r/sq)+1}function ke(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var ws={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return ke(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):ke(r+1,2)},d:function(e,n){return ke(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return ke(e.getUTCHours()%12||12,n.length)},H:function(e,n){return ke(e.getUTCHours(),n.length)},m:function(e,n){return ke(e.getUTCMinutes(),n.length)},s:function(e,n){return ke(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return ke(i,n.length)}},Do={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},oq={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return ws.y(e,n)},Y:function(e,n,r,s){var i=cN(e,s),o=i>0?i:1-i;if(n==="YY"){var a=o%100;return ke(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):ke(o,n.length)},R:function(e,n){var r=lN(e);return ke(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return ke(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return ke(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return ke(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return ws.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return ke(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var i=iq(e,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):ke(i,n.length)},I:function(e,n,r){var s=nq(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):ke(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):ws.d(e,n)},D:function(e,n,r){var s=ZH(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):ke(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return ke(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return ke(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return ke(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),i;switch(s===12?i=Do.noon:s===0?i=Do.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),i;switch(s>=17?i=Do.evening:s>=12?i=Do.afternoon:s>=4?i=Do.morning:i=Do.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return ws.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ws.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):ke(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):ke(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ws.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ws.s(e,n)},S:function(e,n){return ws.S(e,n)},X:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return Dk(o);case"XXXX":case"XX":return Vi(o);case"XXXXX":case"XXX":default:return Vi(o,":")}},x:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"x":return Dk(o);case"xxxx":case"xx":return Vi(o);case"xxxxx":case"xxx":default:return Vi(o,":")}},O:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Nk(o,":");case"OOOO":default:return"GMT"+Vi(o,":")}},z:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Nk(o,":");case"zzzz":default:return"GMT"+Vi(o,":")}},t:function(e,n,r,s){var i=s._originalDate||e,o=Math.floor(i.getTime()/1e3);return ke(o,n.length)},T:function(e,n,r,s){var i=s._originalDate||e,o=i.getTime();return ke(o,n.length)}};function Nk(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=e;return n+String(s)+o+ke(i,2)}function Dk(t,e){if(t%60===0){var n=t>0?"-":"+";return n+ke(Math.abs(t)/60,2)}return Vi(t,e)}function Vi(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=ke(Math.floor(s/60),2),o=ke(s%60,2);return r+i+n+o}var Mk=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},uN=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},aq=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return Mk(e,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",Mk(s,n)).replace("{{time}}",uN(i,n))},lq={p:uN,P:aq},cq=["D","DD"],uq=["YY","YYYY"];function dq(t){return cq.indexOf(t)!==-1}function hq(t){return uq.indexOf(t)!==-1}function jk(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var fq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pq=function(e,n,r){var s,i=fq[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function pa(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var mq={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},gq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},yq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vq={date:pa({formats:mq,defaultWidth:"full"}),time:pa({formats:gq,defaultWidth:"full"}),dateTime:pa({formats:yq,defaultWidth:"full"})},xq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_q=function(e,n,r,s){return xq[e]};function pr(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[a]}var c=t.argumentCallback?t.argumentCallback(e):e;return s[c]}}var wq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bq={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Tq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},kq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Sq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Eq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Pq=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Cq={ordinalNumber:Pq,era:pr({values:wq,defaultWidth:"wide"}),quarter:pr({values:bq,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:pr({values:Tq,defaultWidth:"wide"}),day:pr({values:kq,defaultWidth:"wide"}),dayPeriod:pr({values:Sq,defaultWidth:"wide",formattingValues:Eq,defaultFormattingWidth:"wide"})};function mr(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Aq(a,function(h){return h.test(o)}):Iq(a,function(h){return h.test(o)}),c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;var u=e.slice(o.length);return{value:c,rest:u}}}function Iq(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function Aq(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function dN(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(s.length);return{value:o,rest:a}}}var Rq=/^(\d+)(th|st|nd|rd)?/i,Nq=/\d+/i,Dq={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Mq={any:[/^b/i,/^(a|c)/i]},jq={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Oq={any:[/1/i,/2/i,/3/i,/4/i]},Lq={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Vq={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Fq={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Uq={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zq={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Bq={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$q={ordinalNumber:dN({matchPattern:Rq,parsePattern:Nq,valueCallback:function(e){return parseInt(e,10)}}),era:mr({matchPatterns:Dq,defaultMatchWidth:"wide",parsePatterns:Mq,defaultParseWidth:"any"}),quarter:mr({matchPatterns:jq,defaultMatchWidth:"wide",parsePatterns:Oq,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:mr({matchPatterns:Lq,defaultMatchWidth:"wide",parsePatterns:Vq,defaultParseWidth:"any"}),day:mr({matchPatterns:Fq,defaultMatchWidth:"wide",parsePatterns:Uq,defaultParseWidth:"any"}),dayPeriod:mr({matchPatterns:zq,defaultMatchWidth:"any",parsePatterns:Bq,defaultParseWidth:"any"})},Wq={code:"en-US",formatDistance:pq,formatLong:vq,formatRelative:_q,localize:Cq,match:$q,options:{weekStartsOn:0,firstWeekContainsDate:1}},Hq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Gq=/^'([^]*?)'?$/,Kq=/''/g,Qq=/[a-zA-Z]/;function vf(t,e,n){var r,s,i,o,a,l,c,u,h,p,m,g,v,_,w,x,T,C;De(2,arguments);var A=String(e),M=Np(),S=(r=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:M.locale)!==null&&r!==void 0?r:Wq,k=ds((i=(o=(a=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(c=n.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:M.firstWeekContainsDate)!==null&&o!==void 0?o:(h=M.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=ds((m=(g=(v=(_=n==null?void 0:n.weekStartsOn)!==null&&_!==void 0?_:n==null||(w=n.locale)===null||w===void 0||(x=w.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&v!==void 0?v:M.weekStartsOn)!==null&&g!==void 0?g:(T=M.locale)===null||T===void 0||(C=T.options)===null||C===void 0?void 0:C.weekStartsOn)!==null&&m!==void 0?m:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var I=xt(t);if(!HH(I))throw new RangeError("Invalid time value");var N=zH(I),j=XH(I,N),R={firstWeekContainsDate:k,weekStartsOn:E,locale:S,_originalDate:I},z=A.match(qq).map(function(H){var $=H[0];if($==="p"||$==="P"){var X=lq[$];return X(H,S.formatLong)}return H}).join("").match(Hq).map(function(H){if(H==="''")return"'";var $=H[0];if($==="'")return Yq(H);var X=oq[$];if(X)return!(n!=null&&n.useAdditionalWeekYearTokens)&&hq(H)&&jk(H,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&dq(H)&&jk(H,e,String(t)),X(j,H,S.localize,R);if($.match(Qq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$+"`");return H}).join("");return z}function Yq(t){var e=t.match(Gq);return e?e[1].replace(Kq,"'"):t}function Xq(t){return De(1,arguments),xt(t).getTime()<Date.now()}function gg(t){return De(1,arguments),u_(t,Date.now())}function Jq(t){return De(1,arguments),u_(t,iN(Date.now(),1))}function Zq(t,e){De(2,arguments);var n=ds(e);return iN(t,-n)}var eG={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},tG=function(e,n,r){var s,i=eG[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",String(n)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+s:"il y a "+s:s},nG={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},rG={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},sG={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},iG={date:pa({formats:nG,defaultWidth:"full"}),time:pa({formats:rG,defaultWidth:"full"}),dateTime:pa({formats:sG,defaultWidth:"full"})},oG={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},aG=function(e,n,r,s){return oG[e]},lG={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},cG={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},uG={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},dG={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},hG={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},fG=function(e,n){var r=Number(e),s=n==null?void 0:n.unit;if(r===0)return"0";var i=["year","week","hour","minute","second"],o;return r===1?o=s&&i.includes(s)?"re":"er":o="me",r+o},pG={ordinalNumber:fG,era:pr({values:lG,defaultWidth:"wide"}),quarter:pr({values:cG,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:pr({values:uG,defaultWidth:"wide"}),day:pr({values:dG,defaultWidth:"wide"}),dayPeriod:pr({values:hG,defaultWidth:"wide"})},mG=/^(\d+)(ime|re|me|er|e)?/i,gG=/\d+/i,yG={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},vG={any:[/^av/i,/^ap/i]},xG={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},_G={any:[/1/i,/2/i,/3/i,/4/i]},wG={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},bG={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},TG={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},kG={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},SG={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},EG={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},PG={ordinalNumber:dN({matchPattern:mG,parsePattern:gG,valueCallback:function(e){return parseInt(e)}}),era:mr({matchPatterns:yG,defaultMatchWidth:"wide",parsePatterns:vG,defaultParseWidth:"any"}),quarter:mr({matchPatterns:xG,defaultMatchWidth:"wide",parsePatterns:_G,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:mr({matchPatterns:wG,defaultMatchWidth:"wide",parsePatterns:bG,defaultParseWidth:"any"}),day:mr({matchPatterns:TG,defaultMatchWidth:"wide",parsePatterns:kG,defaultParseWidth:"any"}),dayPeriod:mr({matchPatterns:SG,defaultMatchWidth:"any",parsePatterns:EG,defaultParseWidth:"any"})},hN={code:"fr",formatDistance:tG,formatLong:iG,formatRelative:aG,localize:pG,match:PG,options:{weekStartsOn:1,firstWeekContainsDate:4}};const CG=()=>{const{user:t,gameStats:e}=fe(),{tasks:n}=bi(),{getDailyQuests:r,getWeeklyQuests:s}=Tu(),{openTaskModal:i}=ir(),o=r(),a=s();if(!t||!e)return null;const l=n.filter(g=>{if(g.status==="completed"||!g.dueDate)return!1;const v=new Date(g.dueDate);return gg(v)||Jq(v)}),c=n.filter(g=>g.status==="completed"?!1:!g.dueDate),u=n.filter(g=>{if(g.status==="completed"||!g.dueDate)return!1;const v=new Date(g.dueDate);return Xq(v)&&!gg(v)}),h=[...o,...a].filter(g=>!g.claimed).sort((g,v)=>g.completed&&!v.completed?-1:!g.completed&&v.completed?1:0).slice(0,3),p=n.filter(g=>g.status==="completed"&&g.completedAt&&gg(new Date(g.completedAt))).length,m=n.filter(g=>g.status==="pending").length;return f.jsxs("div",{className:"space-y-4 sm:space-y-6 w-full overflow-x-hidden px-1 sm:px-0",children:[f.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-teal-500 via-cyan-500 to-blue-500 p-4 sm:p-6 text-white shadow-lg",children:[f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex items-start justify-between gap-3",children:[f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsxs("h1",{className:"text-lg sm:text-2xl font-bold truncate",children:["Bonjour, ",t.username,"! "]}),f.jsx("p",{className:"mt-1 text-white/80 text-xs sm:text-sm",children:vf(new Date,"EEEE d MMMM",{locale:hN})})]}),f.jsx(i_,{config:t.avatar,size:"md",showLevel:!0,level:e.level,className:"flex-shrink-0"})]}),f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 flex-wrap",children:[f.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:["Niveau ",e.level]}),f.jsx("span",{className:"text-xs sm:text-sm text-white/70 truncate",children:s_(e.level)})]}),f.jsx(tN,{currentXP:e.currentXP,xpToNextLevel:e.xpToNextLevel,level:e.level,showLevel:!1})]})]}),f.jsx("div",{className:"absolute -right-10 -top-10 w-32 sm:w-40 h-32 sm:h-40 bg-white/10 rounded-full"}),f.jsx("div",{className:"absolute -right-5 -bottom-5 w-20 sm:w-28 h-20 sm:h-28 bg-white/10 rounded-full"})]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",children:[f.jsx(lt,{icon:f.jsx(Cr,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Compltes",value:p,color:"primary"}),f.jsx(lt,{icon:f.jsx(fr,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"En attente",value:m,color:"yellow"}),f.jsx(lt,{icon:f.jsx(ic,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Streak",value:`${e.currentStreak}j`,color:"orange"}),f.jsx(lt,{icon:f.jsx(Tr,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"XP Total",value:Nn(e.totalXP),color:"purple"})]}),f.jsxs("div",{className:"grid lg:grid-cols-3 gap-4 sm:gap-6",children:[f.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[f.jsxs(Ae,{className:"p-3 sm:p-4 lg:hidden",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(fr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-500"}),f.jsx("h2",{className:"font-semibold text-sm sm:text-base",children:"Qutes actives"})]}),f.jsxs(Ts,{to:"/quests",className:"text-xs sm:text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Tout voir",f.jsx(Yn,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),h.length>0?f.jsx("div",{className:"space-y-2",children:h.slice(0,2).map(g=>f.jsx(C0,{quest:g,compact:!0},g.id))}):f.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:[f.jsx(fr,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),f.jsx("p",{children:"Toutes les qutes compltes!"})]})]}),u.length>0&&f.jsxs(Ae,{className:"p-3 sm:p-4 border-red-200 dark:border-red-800/30 bg-red-50/50 dark:bg-red-900/10",children:[f.jsx("div",{className:"flex items-center justify-between mb-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ap,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500"}),f.jsxs("h2",{className:"font-semibold text-sm sm:text-base text-red-600 dark:text-red-400",children:["En retard (",u.length,")"]})]})}),f.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.slice(0,3).map(g=>f.jsx(ah,{task:g,compact:!0},g.id)),u.length>3&&f.jsxs(Ts,{to:"/tasks",className:"block text-center text-xs sm:text-sm text-red-500 hover:text-red-600 py-2",children:["+",u.length-3," autres tches en retard"]})]})]}),f.jsxs(Ae,{className:"p-3 sm:p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ip,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-500"}),f.jsx("h2",{className:"font-semibold text-sm sm:text-base",children:"Tches du jour"}),l.length>0&&f.jsx("span",{className:"text-xs bg-primary-100 dark:bg-primary-900/30 text-primary-600 px-2 py-0.5 rounded-full",children:l.length})]}),f.jsxs(Ts,{to:"/tasks",className:"text-xs sm:text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Tout voir",f.jsx(Yn,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),l.length>0?f.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[l.slice(0,4).map(g=>f.jsx(ah,{task:g,compact:!0},g.id)),l.length>4&&f.jsxs(Ts,{to:"/tasks",className:"block text-center text-xs sm:text-sm text-primary-500 hover:text-primary-600 py-2",children:["+",l.length-4," autres tches"]})]}):f.jsxs("div",{className:"text-center py-6 sm:py-8",children:[f.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-100 dark:bg-gray-800 mx-auto flex items-center justify-center mb-3",children:f.jsx(Cr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),f.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"Aucune tche planifie"}),f.jsxs(dt,{variant:"primary",size:"sm",onClick:i,children:[f.jsx(qc,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]})]}),f.jsxs(Ae,{className:"p-3 sm:p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(L7,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500"}),f.jsx("h2",{className:"font-semibold text-sm sm:text-base",children:"Sans date"}),c.length>0&&f.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 px-2 py-0.5 rounded-full",children:c.length})]}),f.jsxs(Ts,{to:"/tasks",className:"text-xs sm:text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Tout voir",f.jsx(Yn,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),c.length>0?f.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[c.slice(0,4).map(g=>f.jsx(ah,{task:g,compact:!0},g.id)),c.length>4&&f.jsxs(Ts,{to:"/tasks",className:"block text-center text-xs sm:text-sm text-primary-500 hover:text-primary-600 py-2",children:["+",c.length-4," autres tches"]})]}):f.jsxs("div",{className:"text-center py-4 sm:py-6 text-gray-500 text-sm",children:[f.jsx(n_,{className:"w-8 h-8 sm:w-10 sm:h-10 mx-auto mb-2 opacity-50"}),f.jsx("p",{children:"Toutes vos tches ont une date!"})]})]}),f.jsxs(Ae,{className:"p-3 sm:p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[f.jsx(Ir,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-500"}),f.jsx("h2",{className:"font-semibold text-sm sm:text-base",children:"Progression hebdomadaire"})]}),f.jsx(VH,{})]})]}),f.jsx("div",{className:"hidden lg:block space-y-6",children:f.jsxs(Ae,{className:"p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(fr,{className:"w-5 h-5 text-primary-500"}),f.jsx("h2",{className:"font-semibold",children:"Qutes actives"})]}),f.jsxs(Ts,{to:"/quests",className:"text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Voir tout",f.jsx(Yn,{className:"w-4 h-4"})]})]}),h.length>0?f.jsx("div",{className:"space-y-3",children:h.map(g=>f.jsx(C0,{quest:g,compact:!0},g.id))}):f.jsxs("div",{className:"text-center py-6 text-gray-500",children:[f.jsx(fr,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),f.jsx("p",{children:"Toutes les qutes sont compltes!"})]})]})})]})]})},IG=()=>{const{tasks:t,categories:e,filter:n,setFilter:r,updateTask:s,deleteTask:i}=bi(),{openTaskModal:o,setEditingTask:a}=ir(),[l,c]=D.useState("none"),[u,h]=D.useState(""),[p,m]=D.useState(!1),g=D.useMemo(()=>{let _=t;if(n.status!=="all"&&(_=_.filter(w=>w.status===n.status)),n.priority&&(_=_.filter(w=>w.priority===n.priority)),n.categoryId&&(_=_.filter(w=>w.categoryId===n.categoryId)),u){const w=u.toLowerCase();_=_.filter(x=>{var T;return x.title.toLowerCase().includes(w)||((T=x.description)==null?void 0:T.toLowerCase().includes(w))})}return _=[..._].sort((w,x)=>{switch(n.sortBy){case"dueDate":return w.dueDate?x.dueDate?new Date(w.dueDate).getTime()-new Date(x.dueDate).getTime():-1:1;case"priority":const T={critical:0,high:1,medium:2,low:3,none:4};return T[w.priority]-T[x.priority];case"createdAt":default:return new Date(x.createdAt).getTime()-new Date(w.createdAt).getTime()}}),n.sortDirection==="desc"&&_.reverse(),_},[t,n,u]),v=D.useMemo(()=>{if(l==="none")return{"Toutes les tches":g};const _={};return g.forEach(w=>{let x;switch(l){case"category":const T=e.find(A=>A.id===w.categoryId);x=(T==null?void 0:T.name)||"Sans catgorie";break;case"priority":x={critical:" Critique",high:" Haute priorit",medium:" Priorit moyenne",low:" Basse priorit",none:" Sans priorit"}[w.priority]||"Sans priorit";break;case"dueDate":if(!w.dueDate)x="Sans date";else{const A=new Date(w.dueDate),M=new Date,S=new Date(M);S.setDate(S.getDate()+1),A.toDateString()===M.toDateString()?x="Aujourd'hui":A.toDateString()===S.toDateString()?x="Demain":A<M?x=" En retard":x=" venir"}break;default:x="Autres"}_[x]||(_[x]=[]),_[x].push(w)}),_},[g,l,e]);return f.jsxs("div",{className:"space-y-4 sm:space-y-6 px-1 sm:px-0",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[f.jsx(n_,{className:"w-6 h-6 sm:w-7 sm:h-7 text-primary-500"}),"Mes Tches"]}),f.jsxs("p",{className:"text-gray-500 mt-1 text-sm",children:[g.length," tche",g.length>1?"s":""]})]}),f.jsxs(dt,{variant:"game",onClick:o,className:"w-full sm:w-auto",children:[f.jsx(qc,{className:"w-5 h-5 mr-1"}),"Nouvelle tche"]})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[f.jsx("div",{className:"flex-1",children:f.jsx(js,{placeholder:"Rechercher...",value:u,onChange:_=>h(_.target.value),leftIcon:f.jsx(ZR,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),f.jsx("div",{className:"flex gap-2",children:f.jsxs(dt,{variant:"secondary",onClick:()=>m(!p),className:"flex-1 sm:flex-none",children:[f.jsx(z7,{className:"w-4 h-4 sm:w-5 sm:h-5"}),f.jsx("span",{className:"sm:hidden ml-2",children:"Filtres"})]})})]}),f.jsx(Pr,{children:p&&f.jsx(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white dark:bg-gray-800 rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-700 overflow-hidden",children:f.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5 sm:mb-2 block",children:"Statut"}),f.jsxs("select",{value:n.status,onChange:_=>r({status:_.target.value}),className:"w-full px-2 sm:px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm",children:[f.jsx("option",{value:"all",children:"Toutes"}),f.jsx("option",{value:"pending",children:"En attente"}),f.jsx("option",{value:"in-progress",children:"En cours"}),f.jsx("option",{value:"completed",children:"Compltes"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5 sm:mb-2 block",children:"Priorit"}),f.jsxs("select",{value:n.priority||"",onChange:_=>r({priority:_.target.value||void 0}),className:"w-full px-2 sm:px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm",children:[f.jsx("option",{value:"",children:"Toutes"}),f.jsx("option",{value:"high",children:"Haute"}),f.jsx("option",{value:"medium",children:"Moyenne"}),f.jsx("option",{value:"low",children:"Basse"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5 sm:mb-2 block",children:"Catgorie"}),f.jsxs("select",{value:n.categoryId||"",onChange:_=>r({categoryId:_.target.value||void 0}),className:"w-full px-2 sm:px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm",children:[f.jsx("option",{value:"",children:"Toutes"}),e.map(_=>f.jsxs("option",{value:_.id,children:[_.icon," ",_.name]},_.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5 sm:mb-2 block",children:"Grouper par"}),f.jsxs("select",{value:l,onChange:_=>c(_.target.value),className:"w-full px-2 sm:px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm",children:[f.jsx("option",{value:"none",children:"Aucun"}),f.jsx("option",{value:"category",children:"Catgorie"}),f.jsx("option",{value:"priority",children:"Priorit"}),f.jsx("option",{value:"dueDate",children:"Date"})]})]})]})})}),g.length>0?f.jsx("div",{className:"space-y-4 sm:space-y-6",children:Object.entries(v).map(([_,w])=>f.jsxs("div",{children:[l!=="none"&&f.jsxs("h3",{className:"font-medium text-gray-600 dark:text-gray-400 mb-2 sm:mb-3 flex items-center gap-2 text-sm sm:text-base",children:[f.jsx(B7,{className:"w-4 h-4"}),_,f.jsx("span",{className:"text-xs sm:text-sm bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded-full",children:w.length})]}),f.jsx("div",{className:"space-y-2 sm:space-y-3",children:w.map(x=>f.jsx(ah,{task:x},x.id))})]},_))}):f.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 sm:py-16",children:[f.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gray-100 dark:bg-gray-800 mx-auto flex items-center justify-center mb-4",children:f.jsx(Cr,{className:"w-10 h-10 sm:w-12 sm:h-12 text-gray-400"})}),f.jsx("h3",{className:"text-lg sm:text-xl font-medium mb-2",children:"Aucune tche trouve"}),f.jsx("p",{className:"text-gray-500 mb-4 text-sm sm:text-base px-4",children:u?"Essayez de modifier votre recherche":"Crez votre premire tche pour commencer!"}),f.jsxs(dt,{variant:"game",onClick:o,children:[f.jsx(qc,{className:"w-5 h-5 mr-1"}),"Nouvelle tche"]})]})]})},AG=()=>{const{getDailyQuests:t,getWeeklyQuests:e,refreshQuests:n,claimQuestReward:r}=Tu(),{gameStats:s}=fe(),[i,o]=D.useState("daily"),a=t(),l=e();if(!s)return null;const c=i==="daily"?a:l,u=a.filter(C=>C.completed).length,h=l.filter(C=>C.completed).length,p=a.filter(C=>C.completed&&!C.claimed).length,m=l.filter(C=>C.completed&&!C.claimed).length,g=new Date,v=new Date(g);v.setDate(v.getDate()+1),v.setHours(0,0,0,0);const _=KH(v,g),w=QH(v,g)%60,x=new Date(g);x.setDate(x.getDate()+((7-x.getDay()+1)%7||7)),x.setHours(0,0,0,0);const T=Math.ceil((x.getTime()-g.getTime())/(1e3*60*60*24));return f.jsxs("div",{className:"space-y-4 sm:space-y-6 px-1 sm:px-0",children:[f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{children:[f.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[f.jsx(S0,{className:"w-6 h-6 sm:w-7 sm:h-7 text-primary-500"}),"Qutes"]}),f.jsx("p",{className:"text-gray-500 mt-1 text-sm sm:text-base",children:"Compltez des qutes pour des bonus!"})]})}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",children:[f.jsx(lt,{icon:f.jsx(fr,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Quotidiennes",value:`${u}/${a.length}`,color:"primary"}),f.jsx(lt,{icon:f.jsx(Ir,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Hebdomadaires",value:`${h}/${l.length}`,color:"purple"}),f.jsx(lt,{icon:f.jsx(k0,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:" rclamer",value:p+m,color:"yellow"}),f.jsx(lt,{icon:f.jsx(Cr,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Compltes",value:Nn(s.questsCompleted||0),color:"green"})]}),f.jsx(Ae,{className:"p-3 sm:p-4 bg-gradient-to-r from-primary-500/10 to-cyan-500/10",children:f.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[f.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-primary-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(Ap,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary-500"})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("p",{className:"font-medium text-sm sm:text-base",children:"Prochaine rinitialisation"}),f.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:[f.jsxs("span",{className:"sm:hidden",children:["Daily: ",_,"h | Weekly: ",T,"j"]}),f.jsxs("span",{className:"hidden sm:inline",children:["Quotidienne: ",_,"h ",w,"m | Hebdomadaire: ",T," jour",T>1?"s":""]})]})]})]}),f.jsxs(dt,{variant:"secondary",size:"sm",onClick:()=>n(),className:"w-full sm:w-auto",children:[f.jsx(eH,{className:"w-4 h-4 mr-1"}),"Actualiser"]})]})}),f.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[f.jsxs("button",{onClick:()=>o("daily"),className:ne("flex-1 py-2.5 sm:py-3 rounded-md text-xs sm:text-sm font-medium transition-colors flex items-center justify-center gap-1.5 sm:gap-2 touch-manipulation",i==="daily"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500"),children:[f.jsx(fr,{className:"w-4 h-4 sm:w-5 sm:h-5"}),f.jsx("span",{className:"hidden xs:inline",children:"Quotidiennes"}),f.jsx("span",{className:"xs:hidden",children:"Daily"}),p>0&&f.jsx("span",{className:"w-4 h-4 sm:w-5 sm:h-5 rounded-full bg-primary-500 text-white text-[10px] sm:text-xs flex items-center justify-center",children:p})]}),f.jsxs("button",{onClick:()=>o("weekly"),className:ne("flex-1 py-2.5 sm:py-3 rounded-md text-xs sm:text-sm font-medium transition-colors flex items-center justify-center gap-1.5 sm:gap-2 touch-manipulation",i==="weekly"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500"),children:[f.jsx(Ir,{className:"w-4 h-4 sm:w-5 sm:h-5"}),f.jsx("span",{className:"hidden xs:inline",children:"Hebdomadaires"}),f.jsx("span",{className:"xs:hidden",children:"Weekly"}),m>0&&f.jsx("span",{className:"w-4 h-4 sm:w-5 sm:h-5 rounded-full bg-purple-500 text-white text-[10px] sm:text-xs flex items-center justify-center",children:m})]})]}),f.jsx("div",{className:"space-y-3 sm:space-y-4",children:c.map((C,A)=>f.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.05},children:f.jsx(C0,{quest:C})},C.id))}),c.length===0&&f.jsxs("div",{className:"text-center py-12 sm:py-16",children:[f.jsx(S0,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto text-gray-300 mb-4"}),f.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"Aucune qute disponible"}),f.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-2",children:"Nouvelles qutes  la prochaine rinitialisation"})]}),f.jsx(Ae,{className:"p-3 sm:p-4 bg-gradient-to-r from-yellow-500/10 to-orange-500/10",children:f.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[f.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center flex-shrink-0 text-lg sm:text-xl",children:""}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("h4",{className:"font-medium text-sm sm:text-base",children:"Astuce"}),f.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Compltez vos qutes quotidiennes pour maximiser vos gains d'XP!"})]})]})})]})},yg={common:"from-slate-400 to-slate-500",rare:"from-blue-400 to-blue-600",epic:"from-purple-400 to-purple-600",legendary:"from-amber-400 via-yellow-400 to-orange-500"},RG={common:"bg-slate-500/10 border-slate-400/30",rare:"bg-blue-500/10 border-blue-400/30",epic:"bg-purple-500/10 border-purple-400/30",legendary:"bg-amber-500/10 border-amber-400/30"},NG={common:"text-slate-400",rare:"text-blue-400",epic:"text-purple-400",legendary:"text-amber-400"},DG=({achievement:t,isUnlocked:e,progress:n=0})=>{const r=Math.min(n/t.requirement.value*100,100),s=t.rarity;return f.jsxs("div",{className:ne("group relative overflow-hidden rounded-2xl transition-all duration-300","border-2",e?`${RG[s]} hover:scale-[1.02]`:"bg-gray-800/40 border-gray-700/50 hover:border-gray-600/50"),children:[e&&s==="legendary"&&f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/20 via-yellow-500/20 to-orange-500/20 animate-pulse"}),f.jsx("div",{className:"relative p-4",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"relative flex-shrink-0",children:[e&&f.jsx("div",{className:ne("absolute inset-0 rounded-2xl blur-lg opacity-50",`bg-gradient-to-br ${yg[s]}`)}),f.jsx("div",{className:ne("relative w-16 h-16 rounded-2xl flex items-center justify-center","transition-all duration-300",e?`bg-gradient-to-br ${yg[s]} shadow-lg`:"bg-gray-700/80 border border-gray-600/50"),children:e?f.jsx("span",{className:"text-3xl drop-shadow-lg",children:t.icon}):f.jsx(q7,{className:"w-7 h-7 text-gray-500"})}),e&&f.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-green-500 border-2 border-gray-900 flex items-center justify-center shadow-lg",children:f.jsx(YR,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h3",{className:ne("font-bold truncate",e?"text-white":"text-gray-400"),children:t.secret&&!e?"???":t.name}),s==="legendary"&&f.jsx(Ir,{className:ne("w-4 h-4",e?"text-amber-400":"text-gray-600")}),s==="epic"&&f.jsx(r_,{className:ne("w-4 h-4",e?"text-purple-400":"text-gray-600")})]}),f.jsx("p",{className:ne("text-sm mt-1 line-clamp-1",e?"text-gray-300":"text-gray-500"),children:t.secret&&!e?"Achievement secret":t.description}),!e&&!t.secret&&f.jsxs("div",{className:"mt-3",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs mb-1.5",children:[f.jsx("span",{className:"text-gray-500",children:"Progression"}),f.jsxs("span",{className:NG[s],children:[n,"/",t.requirement.value]})]}),f.jsx("div",{className:"h-2 bg-gray-700/80 rounded-full overflow-hidden",children:f.jsx("div",{className:ne("h-full rounded-full transition-all duration-500",`bg-gradient-to-r ${yg[s]}`),style:{width:`${r}%`}})})]}),f.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[f.jsxs("div",{className:ne("flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold",e?"bg-teal-500/20 text-teal-300":"bg-gray-700/50 text-gray-400"),children:[f.jsx("span",{className:"text-teal-400",children:""}),t.xpReward," XP"]}),f.jsxs("div",{className:ne("flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold",e?"bg-amber-500/20 text-amber-300":"bg-gray-700/50 text-gray-400"),children:[f.jsx("span",{children:""}),t.coinReward]})]})]})]})})]})},MG=()=>{const{gameStats:t}=fe(),[e,n]=D.useState("all"),[r,s]=D.useState("all"),[i,o]=D.useState("");if(!t)return null;const a=dr.filter(m=>{if(e!=="all"&&m.category!==e||r!=="all"&&m.rarity!==r)return!1;if(i){const g=i.toLowerCase();if(!m.name.toLowerCase().includes(g)&&!m.description.toLowerCase().includes(g))return!1}return!0}),l=dr.filter(m=>t.achievementsUnlocked.includes(m.id)),c=l.reduce((m,g)=>m+g.xpReward,0),u=Math.round(l.length/dr.length*100),h={common:l.filter(m=>m.rarity==="common").length,rare:l.filter(m=>m.rarity==="rare").length,epic:l.filter(m=>m.rarity==="epic").length,legendary:l.filter(m=>m.rarity==="legendary").length},p={common:"from-gray-400 to-gray-500",rare:"from-blue-400 to-blue-500",epic:"from-purple-400 to-purple-500",legendary:"from-yellow-400 to-orange-500"};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[f.jsx(Tr,{className:"w-7 h-7 text-yellow-500"}),"Achievements"]}),f.jsxs("p",{className:"text-gray-500 mt-1",children:[l.length," / ",dr.length," dbloqus (",u,"%)"]})]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsx(lt,{icon:f.jsx(Tr,{className:"w-6 h-6"}),label:"Total dbloqu",value:`${l.length}/${dr.length}`,color:"yellow"}),f.jsx(lt,{icon:f.jsx(Rp,{className:"w-6 h-6"}),label:"XP Gagne",value:Nn(c),color:"primary"}),f.jsx(lt,{icon:f.jsx(XR,{className:"w-6 h-6"}),label:"Lgendaires",value:`${h.legendary}/5`,color:"orange"}),f.jsx(lt,{icon:f.jsx(fr,{className:"w-6 h-6"}),label:"Progression",value:`${u}%`,color:"green"})]}),f.jsxs(Ae,{className:"p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(Ir,{className:"w-5 h-5 text-primary-500"}),"Progression par raret"]}),f.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:["common","rare","epic","legendary"].map(m=>{const g=dr.filter(w=>w.rarity===m).length,v=h[m],_=Math.round(v/g*100);return f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:ne("w-16 h-16 mx-auto rounded-full bg-gradient-to-br flex items-center justify-center mb-2",p[m]),children:f.jsx("span",{className:"text-2xl font-bold text-white",children:v})}),f.jsx("p",{className:"font-medium capitalize",children:m}),f.jsxs("p",{className:"text-sm text-gray-500",children:[_,"%"]})]},m)})})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[f.jsx("div",{className:"flex-1",children:f.jsx(js,{placeholder:"Rechercher un achievement...",value:i,onChange:m=>o(m.target.value),leftIcon:f.jsx(ZR,{className:"w-5 h-5"})})}),f.jsxs("select",{value:e,onChange:m=>n(m.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[f.jsx("option",{value:"all",children:"Toutes les catgories"}),rN.map(m=>f.jsxs("option",{value:m.id,children:[m.icon," ",m.name]},m.id))]}),f.jsxs("select",{value:r,onChange:m=>s(m.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[f.jsx("option",{value:"all",children:"Toutes rarets"}),f.jsx("option",{value:"common",children:"Commun"}),f.jsx("option",{value:"rare",children:"Rare"}),f.jsx("option",{value:"epic",children:"pique"}),f.jsx("option",{value:"legendary",children:"Lgendaire"})]})]}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:a.map((m,g)=>{const v=t.achievementsUnlocked.includes(m.id);let _=0;switch(m.requirement.type){case"tasks_completed":_=t.tasksCompleted;break;case"streak":_=t.currentStreak;break;case"level":_=t.level;break;case"total_xp":_=t.totalXP;break;case"achievements":_=t.achievementsUnlocked.length;break;default:_=0}return f.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.03},children:f.jsx(DG,{achievement:m,isUnlocked:v,progress:_})},m.id)})}),a.length===0&&f.jsxs("div",{className:"text-center py-16",children:[f.jsx(Tr,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),f.jsx("p",{className:"text-gray-500",children:"Aucun achievement trouv"})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Cu(t){return t+.5|0}const Us=(t,e,n)=>Math.max(Math.min(t,n),e);function jl(t){return Us(Cu(t*2.55),0,255)}function ri(t){return Us(Cu(t*255),0,255)}function Fr(t){return Us(Cu(t/2.55)/100,0,1)}function Ok(t){return Us(Cu(t*100),0,100)}const Cn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},I0=[..."0123456789ABCDEF"],jG=t=>I0[t&15],OG=t=>I0[(t&240)>>4]+I0[t&15],bd=t=>(t&240)>>4===(t&15),LG=t=>bd(t.r)&&bd(t.g)&&bd(t.b)&&bd(t.a);function VG(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Cn[t[1]]*17,g:255&Cn[t[2]]*17,b:255&Cn[t[3]]*17,a:e===5?Cn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Cn[t[1]]<<4|Cn[t[2]],g:Cn[t[3]]<<4|Cn[t[4]],b:Cn[t[5]]<<4|Cn[t[6]],a:e===9?Cn[t[7]]<<4|Cn[t[8]]:255})),n}const FG=(t,e)=>t<255?e(t):"";function UG(t){var e=LG(t)?jG:OG;return t?"#"+e(t.r)+e(t.g)+e(t.b)+FG(t.a,e):void 0}const zG=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function fN(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function BG(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function $G(t,e,n){const r=fN(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function WG(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function d_(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=WG(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function h_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ri)}function f_(t,e,n){return h_(fN,t,e,n)}function HG(t,e,n){return h_($G,t,e,n)}function qG(t,e,n){return h_(BG,t,e,n)}function pN(t){return(t%360+360)%360}function GG(t){const e=zG.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?jl(+e[5]):ri(+e[5]));const s=pN(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=HG(s,i,o):e[1]==="hsv"?r=qG(s,i,o):r=f_(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function KG(t,e){var n=d_(t);n[0]=pN(n[0]+e),n=f_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function QG(t){if(!t)return;const e=d_(t),n=e[0],r=Ok(e[1]),s=Ok(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Fr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Lk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Vk={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function YG(){const t={},e=Object.keys(Vk),n=Object.keys(Lk);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,Lk[i]);i=parseInt(Vk[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Td;function XG(t){Td||(Td=YG(),Td.transparent=[0,0,0,0]);const e=Td[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const JG=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ZG(t){const e=JG.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?jl(o):Us(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?jl(r):Us(r,0,255)),s=255&(e[4]?jl(s):Us(s,0,255)),i=255&(e[6]?jl(i):Us(i,0,255)),{r,g:s,b:i,a:n}}}function eK(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Fr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const vg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Mo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function tK(t,e,n){const r=Mo(Fr(t.r)),s=Mo(Fr(t.g)),i=Mo(Fr(t.b));return{r:ri(vg(r+n*(Mo(Fr(e.r))-r))),g:ri(vg(s+n*(Mo(Fr(e.g))-s))),b:ri(vg(i+n*(Mo(Fr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function kd(t,e,n){if(t){let r=d_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=f_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function mN(t,e){return t&&Object.assign(e||{},t)}function Fk(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ri(t[3]))):(e=mN(t,{r:0,g:0,b:0,a:1}),e.a=ri(e.a)),e}function nK(t){return t.charAt(0)==="r"?ZG(t):GG(t)}class Gc{constructor(e){if(e instanceof Gc)return e;const n=typeof e;let r;n==="object"?r=Fk(e):n==="string"&&(r=VG(e)||XG(e)||nK(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=mN(this._rgb);return e&&(e.a=Fr(e.a)),e}set rgb(e){this._rgb=Fk(e)}rgbString(){return this._valid?eK(this._rgb):void 0}hexString(){return this._valid?UG(this._rgb):void 0}hslString(){return this._valid?QG(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=tK(this._rgb,e._rgb,n)),this}clone(){return new Gc(this.rgb)}alpha(e){return this._rgb.a=ri(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Cu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return kd(this._rgb,2,e),this}darken(e){return kd(this._rgb,2,-e),this}saturate(e){return kd(this._rgb,1,e),this}desaturate(e){return kd(this._rgb,1,-e),this}rotate(e){return KG(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Mr(){}const rK=(()=>{let t=0;return()=>t++})();function Te(t){return t==null}function at(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function me(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ht(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ar(t,e){return Ht(t)?t:e}function ce(t,e){return typeof t>"u"?e:t}const sK=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,gN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Oe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Se(t,e,n,r){let s,i,o;if(at(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(me(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function xf(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function _f(t){if(at(t))return t.map(_f);if(me(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=_f(t[n[s]]);return e}return t}function yN(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function iK(t,e,n,r){if(!yN(t))return;const s=e[t],i=n[t];me(s)&&me(i)?Kc(s,i,r):e[t]=_f(i)}function Kc(t,e,n){const r=at(e)?e:[e],s=r.length;if(!me(t))return t;n=n||{};const i=n.merger||iK;let o;for(let a=0;a<s;++a){if(o=r[a],!me(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function cc(t,e){return Kc(t,e,{merger:oK})}function oK(t,e,n){if(!yN(t))return;const r=e[t],s=n[t];me(r)&&me(s)?cc(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=_f(s))}const Uk={"":t=>t,x:t=>t.x,y:t=>t.y};function aK(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function lK(t){const e=aK(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function mo(t,e){return(Uk[e]||(Uk[e]=lK(e)))(t)}function p_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Qc=t=>typeof t<"u",di=t=>typeof t=="function",zk=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function cK(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ee=Math.PI,$e=2*Ee,uK=$e+Ee,wf=Number.POSITIVE_INFINITY,dK=Ee/180,ft=Ee/2,Ii=Ee/4,Bk=Ee*2/3,vN=Math.log10,kr=Math.sign;function uc(t,e,n){return Math.abs(t-e)<n}function $k(t){const e=Math.round(t);t=uc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(vN(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function hK(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function fK(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Yc(t){return!fK(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function pK(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function mK(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Kr(t){return t*(Ee/180)}function gK(t){return t*(180/Ee)}function Wk(t){if(!Ht(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function xN(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Ee&&(i+=$e),{angle:i,distance:s}}function A0(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function yK(t,e){return(t-e+uK)%$e-Ee}function yn(t){return(t%$e+$e)%$e}function Xc(t,e,n,r){const s=yn(t),i=yn(e),o=yn(n),a=yn(i-s),l=yn(o-s),c=yn(s-i),u=yn(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function zt(t,e,n){return Math.max(e,Math.min(n,t))}function vK(t){return zt(t,-32768,32767)}function Qr(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function m_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Qi=(t,e,n,r)=>m_(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),xK=(t,e,n)=>m_(t,n,r=>t[r][e]>=n);function _K(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const _N=["push","pop","shift","splice","unshift"];function wK(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),_N.forEach(n=>{const r="_onData"+p_(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function Hk(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(_N.forEach(i=>{delete t[i]}),delete t._chartjs)}function wN(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const bN=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function TN(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,bN.call(window,()=>{r=!1,t.apply(e,n)}))}}function bK(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const g_=t=>t==="start"?"left":t==="end"?"right":"center",Lt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,TK=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function kK(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:p,minDefined:m,maxDefined:g}=o.getUserBounds();if(m){if(s=Math.min(Qi(l,u,h).lo,n?r:Qi(e,u,o.getPixelForValue(h)).lo),c){const v=l.slice(0,s+1).reverse().findIndex(_=>!Te(_[a.axis]));s-=Math.max(0,v)}s=zt(s,0,r-1)}if(g){let v=Math.max(Qi(l,o.axis,p,!0).hi+1,n?0:Qi(e,u,o.getPixelForValue(p),!0).hi+1);if(c){const _=l.slice(v-1).findIndex(w=>!Te(w[a.axis]));v+=Math.max(0,_)}i=zt(v,s,r)-s}else i=r-s}return{start:s,count:i}}function SK(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Sd=t=>t===0||t===1,qk=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*$e/n)),Gk=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*$e/n)+1,dc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ft)+1,easeOutSine:t=>Math.sin(t*ft),easeInOutSine:t=>-.5*(Math.cos(Ee*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Sd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Sd(t)?t:qk(t,.075,.3),easeOutElastic:t=>Sd(t)?t:Gk(t,.075,.3),easeInOutElastic(t){return Sd(t)?t:t<.5?.5*qk(t*2,.1125,.45):.5+.5*Gk(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-dc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?dc.easeInBounce(t*2)*.5:dc.easeOutBounce(t*2-1)*.5+.5};function y_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Kk(t){return y_(t)?t:new Gc(t)}function xg(t){return y_(t)?t:new Gc(t).saturate(.5).darken(.1).hexString()}const EK=["x","y","borderWidth","radius","tension"],PK=["color","borderColor","backgroundColor"];function CK(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:PK},numbers:{type:"number",properties:EK}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function IK(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Qk=new Map;function AK(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Qk.get(n);return r||(r=new Intl.NumberFormat(t,e),Qk.set(n,r)),r}function v_(t,e,n){return AK(e,n).format(t)}const RK={values(t){return at(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=NK(t,n)}const o=vN(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),v_(t,r,l)}};function NK(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var kN={formatters:RK};function DK(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:kN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const go=Object.create(null),R0=Object.create(null);function hc(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function _g(t,e,n){return typeof e=="string"?Kc(hc(t,e),n):Kc(hc(t,""),e)}class MK{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>xg(s.backgroundColor),this.hoverBorderColor=(r,s)=>xg(s.borderColor),this.hoverColor=(r,s)=>xg(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return _g(this,e,n)}get(e){return hc(this,e)}describe(e,n){return _g(R0,e,n)}override(e,n){return _g(go,e,n)}route(e,n,r,s){const i=hc(this,e),o=hc(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return me(l)?Object.assign({},c,l):ce(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var et=new MK({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[CK,IK,DK]);function jK(t){return!t||Te(t.size)||Te(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Yk(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Ai(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function Xk(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function N0(t,e,n,r){SN(t,e,n,r,null)}function SN(t,e,n,r,s){let i,o,a,l,c,u,h,p;const m=e.pointStyle,g=e.rotation,v=e.radius;let _=(g||0)*dK;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(_),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),m){default:s?t.ellipse(n,r,s/2,v,0,0,$e):t.arc(n,r,v,0,$e),t.closePath();break;case"triangle":u=s?s/2:v,t.moveTo(n+Math.sin(_)*u,r-Math.cos(_)*v),_+=Bk,t.lineTo(n+Math.sin(_)*u,r-Math.cos(_)*v),_+=Bk,t.lineTo(n+Math.sin(_)*u,r-Math.cos(_)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(_+Ii)*l,h=Math.cos(_+Ii)*(s?s/2-c:l),a=Math.sin(_+Ii)*l,p=Math.sin(_+Ii)*(s?s/2-c:l),t.arc(n-h,r-a,c,_-Ee,_-ft),t.arc(n+p,r-o,c,_-ft,_),t.arc(n+h,r+a,c,_,_+ft),t.arc(n-p,r+o,c,_+ft,_+Ee),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*v,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}_+=Ii;case"rectRot":h=Math.cos(_)*(s?s/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,p=Math.sin(_)*(s?s/2:v),t.moveTo(n-h,r-a),t.lineTo(n+p,r-o),t.lineTo(n+h,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":_+=Ii;case"cross":h=Math.cos(_)*(s?s/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,p=Math.sin(_)*(s?s/2:v),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":h=Math.cos(_)*(s?s/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,p=Math.sin(_)*(s?s/2:v),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),_+=Ii,h=Math.cos(_)*(s?s/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,p=Math.sin(_)*(s?s/2:v),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=s?s/2:Math.cos(_)*v,a=Math.sin(_)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(_)*(s?s/2:v),r+Math.sin(_)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Jc(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Dp(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Mp(t){t.restore()}function OK(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function LK(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function VK(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Te(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function FK(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function UK(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Zc(t,e,n,r,s,i={}){const o=at(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,VK(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&UK(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Te(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),FK(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function bf(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ee,Ee,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Ee,ft,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,ft,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-ft,!0),t.lineTo(n+o.topLeft,r)}const zK=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,BK=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function $K(t,e){const n=(""+t).match(zK);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const WK=t=>+t||0;function x_(t,e){const n={},r=me(e),s=r?Object.keys(e):e,i=me(t)?r?o=>ce(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=WK(i(o));return n}function EN(t){return x_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ma(t){return x_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Bn(t){const e=EN(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Bt(t,e){t=t||{},e=e||et.font;let n=ce(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ce(t.style,e.style);r&&!(""+r).match(BK)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ce(t.family,e.family),lineHeight:$K(ce(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ce(t.weight,e.weight),string:""};return s.string=jK(s),s}function Ed(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function HK(t,e,n){const{min:r,max:s}=t,i=gN(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Eo(t,e){return Object.assign(Object.create(t),e)}function __(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=AN("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>__([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return CN(a,l,()=>ZK(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Zk(a).includes(l)},ownKeys(a){return Zk(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function ja(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:PN(t,r),setContext:i=>ja(t,i,n,r),override:i=>ja(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return CN(i,o,()=>GK(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function PN(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:di(n)?n:()=>n,isIndexable:di(r)?r:()=>r}}const qK=(t,e)=>t?t+p_(e):e,w_=(t,e)=>me(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function CN(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function GK(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return di(a)&&o.isScriptable(e)&&(a=KK(e,a,t,n)),at(a)&&a.length&&(a=QK(e,a,t,o.isIndexable)),w_(e,a)&&(a=ja(a,s,i&&i[e],o)),a}function KK(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),w_(t,l)&&(l=b_(s._scopes,s,t,l)),l}function QK(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(me(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=b_(c,s,t,u);e.push(ja(h,i,o&&o[t],a))}}return e}function IN(t,e,n){return di(t)?t(e,n):t}const YK=(t,e)=>t===!0?e:typeof t=="string"?mo(e,t):void 0;function XK(t,e,n,r,s){for(const i of e){const o=YK(n,i);if(o){t.add(o);const a=IN(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function b_(t,e,n,r){const s=e._rootScopes,i=IN(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=Jk(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=Jk(a,o,i,l,r),l===null)?!1:__(Array.from(a),[""],s,i,()=>JK(e,n,r))}function Jk(t,e,n,r,s){for(;n;)n=XK(t,e,n,r,s);return n}function JK(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return at(s)&&me(n)?n:s||{}}function ZK(t,e,n,r){let s;for(const i of e)if(s=AN(qK(i,t),n),typeof s<"u")return w_(t,s)?b_(n,r,t,s):s}function AN(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Zk(t){let e=t._keys;return e||(e=t._keys=eQ(t._scopes)),e}function eQ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const tQ=Number.EPSILON||1e-14,Oa=(t,e)=>e<t.length&&!t[e].skip&&t[e],RN=t=>t==="x"?"y":"x";function nQ(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=A0(i,s),l=A0(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,p=r*u;return{previous:{x:i.x-h*(o.x-s.x),y:i.y-h*(o.y-s.y)},next:{x:i.x+p*(o.x-s.x),y:i.y+p*(o.y-s.y)}}}function rQ(t,e,n){const r=t.length;let s,i,o,a,l,c=Oa(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Oa(t,u+1),!(!l||!c)){if(uc(e[u],0,tQ)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=i*o*e[u])}}function sQ(t,e,n="x"){const r=RN(n),s=t.length;let i,o,a,l=Oa(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Oa(t,c+1),!a)continue;const u=a[n],h=a[r];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${r}`]=h-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${r}`]=h+i*e[c])}}function iQ(t,e="x"){const n=RN(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=Oa(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Oa(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?kr(s[o-1])!==kr(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}rQ(t,s,i),sQ(t,i,e)}function Pd(t,e,n){return Math.max(Math.min(t,n),e)}function oQ(t,e){let n,r,s,i,o,a=Jc(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Jc(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=Pd(s.cp1x,e.left,e.right),s.cp1y=Pd(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Pd(s.cp2x,e.left,e.right),s.cp2y=Pd(s.cp2y,e.top,e.bottom)))}function aQ(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")iQ(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=nQ(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&oQ(t,n)}function T_(){return typeof window<"u"&&typeof document<"u"}function k_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Tf(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const jp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function lQ(t,e){return jp(t).getPropertyValue(e)}const cQ=["top","right","bottom","left"];function eo(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=cQ[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const uQ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function dQ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(uQ(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Fi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=jp(n),i=s.boxSizing==="border-box",o=eo(s,"padding"),a=eo(s,"border","width"),{x:l,y:c,box:u}=dQ(t,n),h=o.left+(u&&a.left),p=o.top+(u&&a.top);let{width:m,height:g}=e;return i&&(m-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/m*n.width/r),y:Math.round((c-p)/g*n.height/r)}}function hQ(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&k_(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=jp(i),l=eo(a,"border","width"),c=eo(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Tf(a.maxWidth,i,"clientWidth"),s=Tf(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||wf,maxHeight:s||wf}}const zs=t=>Math.round(t*10)/10;function fQ(t,e,n,r){const s=jp(t),i=eo(s,"margin"),o=Tf(s.maxWidth,t,"clientWidth")||wf,a=Tf(s.maxHeight,t,"clientHeight")||wf,l=hQ(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const p=eo(s,"border","width"),m=eo(s,"padding");c-=m.width+p.width,u-=m.height+p.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=zs(Math.min(c,o,l.maxWidth)),u=zs(Math.min(u,a,l.maxHeight)),c&&!u&&(u=zs(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=zs(Math.floor(u*r))),{width:c,height:u}}function eS(t,e,n){const r=e||1,s=zs(t.height*r),i=zs(t.width*r);t.height=zs(t.height),t.width=zs(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const pQ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};T_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function tS(t,e){const n=lQ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ui(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function mQ(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function gQ(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Ui(t,s,n),a=Ui(s,i,n),l=Ui(i,e,n),c=Ui(o,a,n),u=Ui(a,l,n);return Ui(c,u,n)}const yQ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},vQ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ga(t,e,n){return t?yQ(e,n):vQ()}function NN(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function DN(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function MN(t){return t==="angle"?{between:Xc,compare:yK,normalize:yn}:{between:Qr,compare:(e,n)=>e-n,normalize:e=>e}}function nS({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function xQ(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=MN(r),l=e.length;let{start:c,end:u,loop:h}=t,p,m;if(h){for(c+=l,u+=l,p=0,m=l;p<m&&o(a(e[c%l][r]),s,i);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function jN(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=MN(r),{start:u,end:h,loop:p,style:m}=xQ(t,e,n),g=[];let v=!1,_=null,w,x,T;const C=()=>l(s,T,w)&&a(s,T)!==0,A=()=>a(i,w)===0||l(i,T,w),M=()=>v||C(),S=()=>!v||A();for(let k=u,E=u;k<=h;++k)x=e[k%o],!x.skip&&(w=c(x[r]),w!==T&&(v=l(w,s,i),_===null&&M()&&(_=a(w,s)===0?k:E),_!==null&&S()&&(g.push(nS({start:_,end:k,loop:p,count:o,style:m})),_=null),E=k,T=w));return _!==null&&g.push(nS({start:_,end:h,loop:p,count:o,style:m})),g}function ON(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=jN(r[s],t.points,e);i.length&&n.push(...i)}return n}function _Q(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function wQ(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function bQ(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=_Q(n,s,i,r);if(r===!0)return rS(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return rS(t,wQ(n,o,l,c),n,e)}function rS(t,e,n,r){return!r||!r.setContext||!n?e:TQ(t,e,n,r)}function TQ(t,e,n,r){const s=t._chart.getContext(),i=sS(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,h=e[0].start,p=h;function m(g,v,_,w){const x=a?-1:1;if(g!==v){for(g+=l;n[g%l].skip;)g-=x;for(;n[v%l].skip;)v+=x;g%l!==v%l&&(c.push({start:g%l,end:v%l,loop:_,style:w}),u=w,h=v%l)}}for(const g of e){h=a?h:g.start;let v=n[h%l],_;for(p=h+1;p<=g.end;p++){const w=n[p%l];_=sS(r.setContext(Eo(s,{type:"segment",p0:v,p1:w,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),kQ(_,u)&&m(h,p-1,g.loop,u),v=w,u=_}h<p-1&&m(h,p-1,g.loop,u)}return c}function sS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function kQ(t,e){if(!e)return!1;const n=[],r=function(s,i){return y_(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Cd(t,e,n){return t.options.clip?t[n]:e[n]}function SQ(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Cd(n,e,"left"),right:Cd(n,e,"right"),top:Cd(r,e,"top"),bottom:Cd(r,e,"bottom")}:e}function LN(t,e){const n=e._clip;if(n.disabled)return!1;const r=SQ(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class EQ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=bN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var jr=new EQ;const iS="transparent",PQ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Kk(t||iS),s=r.valid&&Kk(e||iS);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class CQ{constructor(e,n,r,s){const i=n[r];s=Ed([e.to,s,i,e.from]);const o=Ed([e.from,i,s]);this._active=!0,this._fn=e.fn||PQ[e.type||typeof o],this._easing=dc[e.easing]||dc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Ed([e.to,n,s,e.from]),this._from=Ed([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class VN{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!me(e))return;const n=Object.keys(et.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!me(i))return;const o={};for(const a of n)o[a]=i[a];(at(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=AQ(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&IQ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let h=i[c];const p=r.get(c);if(h)if(p&&h.active()){h.update(p,u,a);continue}else h.cancel();if(!p||!p.duration){e[c]=u;continue}i[c]=h=new CQ(p,e,c,u),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return jr.add(this._chart,r),!0}}function IQ(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function AQ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function oS(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function RQ(t,e,n){if(n===!1)return!1;const r=oS(t,n),s=oS(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function NQ(t){let e,n,r,s;return me(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function FN(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function aS(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Ht(c)&&(i||e===0||kr(e)===kr(c))&&(e+=c)}return!u&&!r.all?0:e}function DQ(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function wg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function MQ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function jQ(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function OQ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function lS(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function cS(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=MQ(i,o,r),h=e.length;let p;for(let m=0;m<h;++m){const g=e[m],{[l]:v,[c]:_}=g,w=g._stacks||(g._stacks={});p=w[c]=OQ(s,u,v),p[a]=_,p._top=lS(p,o,!0,r.type),p._bottom=lS(p,o,!1,r.type);const x=p._visualValues||(p._visualValues={});x[a]=_}}function bg(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function LQ(t,e){return Eo(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function VQ(t,e,n){return Eo(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function xl(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Tg=t=>t==="reset"||t==="none",uS=(t,e)=>e?t:Object.assign({},t),FQ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:FN(n,!0),values:null};class to{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=wg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&xl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,p,m,g)=>h==="x"?p:h==="r"?g:m,i=n.xAxisID=ce(r.xAxisID,bg(e,"x")),o=n.yAxisID=ce(r.yAxisID,bg(e,"y")),a=n.rAxisID=ce(r.rAxisID,bg(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Hk(this._data,this),e._stacked&&xl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(me(n)){const s=this._cachedMeta;this._data=DQ(n,s)}else if(r!==n){if(r){Hk(r,this);const s=this._cachedMeta;xl(s),s._parsed=[]}n&&Object.isExtensible(n)&&wK(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=wg(n.vScale,n),n.stack!==r.stack&&(s=!0,xl(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(cS(this,n._parsed),n._stacked=wg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,h,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{at(s[e])?p=this.parseArrayData(r,s,e,n):me(s[e])?p=this.parseObjectData(r,s,e,n):p=this.parsePrimitiveData(r,s,e,n);const m=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=h=p[u],l&&(m()&&(l=!1),c=h);r._sorted=l}o&&cS(this,p)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,h=new Array(s);let p,m,g;for(p=0,m=s;p<m;++p)g=p+r,h[p]={[a]:u||i.parse(c[g],g),[l]:o.parse(n[g],g)};return h}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+r,h=n[u],a[l]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,p,m;for(u=0,h=s;u<h;++u)p=u+r,m=n[p],c[u]={x:i.parse(mo(m,a),p),y:o.parse(mo(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:FN(s,!0),values:n._stacks[e.axis]._visualValues};return aS(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=aS(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=FQ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=jQ(a);let p,m;function g(){m=s[p];const v=m[a.axis];return!Ht(m[e.axis])||u>v||h<v}for(p=0;p<o&&!(!g()&&(this.updateRangeFromParsed(c,e,m,l),i));++p);if(i){for(p=o-1;p>=0;--p)if(!g()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],Ht(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=NQ(ce(this.options.clip,RQ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=VQ(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=LQ(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Qc(r);if(a)return uS(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),m=Object.keys(et.elements[e]),g=()=>this.getContext(r,s,n),v=c.resolveNamedOptions(p,m,g,h);return v.$shared&&(v.$shared=l,i[o]=Object.freeze(uS(v,l))),v}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(p,this.getContext(e,r,n))}const c=new VN(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Tg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){Tg(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!Tg(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&xl(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Y(to,"defaults",{}),Y(to,"datasetElementType",null),Y(to,"dataElementType",null);function UQ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=wN(r.sort((s,i)=>s-i))}return t._cache.$bar}function zQ(t){const e=t.iScale,n=UQ(e,t.type);let r=e._length,s,i,o,a;const l=()=>{o===32767||o===-32768||(Qc(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,i=n.length;s<i;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,i=e.ticks.length;s<i;++s)o=e.getPixelForTick(s),l();return r}function BQ(t,e,n,r){const s=n.barThickness;let i,o;return Te(s)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=s*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[t]-i/2}}function $Q(t,e,n,r){const s=e.pixels,i=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const c=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function WQ(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),o=Math.min(s,i),a=Math.max(s,i);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:i,min:o,max:a}}function UN(t,e,n,r){return at(t)?WQ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function dS(t,e,n,r){const s=t.iScale,i=t.vScale,o=s.getLabels(),a=s===i,l=[];let c,u,h,p;for(c=n,u=n+r;c<u;++c)p=e[c],h={},h[s.axis]=a||s.parse(o[c],c),l.push(UN(p,h,i,c));return l}function kg(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function HQ(t,e,n){return t!==0?kr(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function qQ(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function GQ(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=qQ(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=u:(i[hS(u,o,a,l)]=!0,s=c)),i[hS(s,o,a,l)]=!0,t.borderSkipped=i}function hS(t,e,n,r){return r?(t=KQ(t,e,n),t=fS(t,n,e)):t=fS(t,e,n),t}function KQ(t,e,n){return t===e?n:t===n?e:t}function fS(t,e,n){return t==="start"?e:t==="end"?n:t}function QQ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class lh extends to{parsePrimitiveData(e,n,r,s){return dS(e,n,r,s)}parseArrayData(e,n,r,s){return dS(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let p,m,g,v;for(p=r,m=r+s;p<m;++p)v=n[p],g={},g[i.axis]=i.parse(mo(v,c),p),h.push(UN(mo(v,u),g,o,p));return h}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),o=i._custom,a=kg(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,s);for(let m=n;m<n+r;m++){const g=this.getParsed(m),v=i||Te(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),_=this._calculateBarIndexPixels(m,u),w=(g._stacks||{})[a.axis],x={horizontal:c,base:v.base,enableBorderRadius:!w||kg(g._custom)||o===w._top||o===w._bottom,x:c?v.head:_.center,y:c?_.center:v.head,height:c?_.size:Math.abs(v.size),width:c?Math.abs(v.size):_.size};p&&(x.options=h||this.resolveDataElementOptions(m,e[m].active?"active":s));const T=x.options||e[m].options;GQ(x,T,w,o),QQ(x,T,u.ratio),this.updateElement(e[m],m,x,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const h=u._parsed.find(m=>m[r.axis]===l),p=h&&h[u.vScale.axis];if(Te(p)||isNaN(p))return!0};for(const u of s)if(!(n!==void 0&&c(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[ce(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,o;for(i=0,o=n.data.length;i<o;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const a=e.barThickness;return{min:a||zQ(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),c=l._custom,u=kg(c);let h=l[n.axis],p=0,m=r?this.applyStack(n,l,r):h,g,v;m!==h&&(p=m-h,m=h),u&&(h=c.barStart,m=c.barEnd-c.barStart,h!==0&&kr(h)!==kr(c.barEnd)&&(p=0),p+=h);const _=!Te(i)&&!u?i:p;let w=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?g=n.getPixelForValue(p+m):g=w,v=g-w,Math.abs(v)<o){v=HQ(v,n,a)*o,h===a&&(w-=v/2);const x=n.getPixelForDecimal(0),T=n.getPixelForDecimal(1),C=Math.min(x,T),A=Math.max(x,T);w=Math.max(Math.min(w,A),C),g=w+v,r&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(g)-n.getValueForPixel(w))}if(w===n.getPixelForValue(a)){const x=kr(v)*n.getLineWidthForValue(a)/2;w+=x,v-=x}return{size:v,base:w,head:g,center:g+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,o=ce(s.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=i?this._getStackCount(e):n.stackCount,h=s.barThickness==="flex"?$Q(e,n,s,u*c):BQ(e,n,s,u*c),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(ce(p,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+m;a=h.start+h.chunk*g+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}Y(lh,"id","bar"),Y(lh,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Y(lh,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function YQ(t,e,n){let r=1,s=1,i=0,o=0;if(e<$e){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),p=Math.sin(l),m=(T,C,A)=>Xc(T,a,l,!0)?1:Math.max(C,C*n,A,A*n),g=(T,C,A)=>Xc(T,a,l,!0)?-1:Math.min(C,C*n,A,A*n),v=m(0,c,h),_=m(ft,u,p),w=g(Ee,c,h),x=g(Ee+ft,u,p);r=(v-w)/2,s=(_-x)/2,i=-(v+w)/2,o=-(_+x)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class Ol extends to{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(me(r[e])){const{key:l="value"}=this._parsing;i=c=>+mo(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=i(o)}}_getRotation(){return Kr(this.options.rotation-90)}_getCircumference(){return Kr(this.options.circumference)}_getRotationExtents(){let e=$e,n=-$e;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(sK(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:g,offsetY:v}=YQ(h,u,l),_=(r.width-o)/p,w=(r.height-o)/m,x=Math.max(Math.min(_,w)/2,0),T=gN(this.options.radius,x),C=Math.max(T*l,0),A=(T-C)/this._getVisibleDatasetWeightTotal();this.offsetX=g*T,this.offsetY=v*T,s.total=this.calculateTotal(),this.outerRadius=T-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/$e)}updateElements(e,n,r,s){const i=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,p=i&&c.animateScale,m=p?0:this.innerRadius,g=p?0:this.outerRadius,{sharedOptions:v,includeOptions:_}=this._getSharedOptions(n,s);let w=this._getRotation(),x;for(x=0;x<n;++x)w+=this._circumference(x,i);for(x=n;x<n+r;++x){const T=this._circumference(x,i),C=e[x],A={x:u+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+T,circumference:T,outerRadius:g,innerRadius:m};_&&(A.options=v||this.resolveDataElementOptions(x,C.active?"active":s)),w+=T,this.updateElement(C,x,A,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?$e*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=v_(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,o,a,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ce(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Y(Ol,"id","doughnut"),Y(Ol,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Y(Ol,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Y(Ol,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const h=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:h.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:s,pointStyle:r,borderRadius:o&&(a||h.borderRadius),index:c}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class ch extends to{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=kK(n,s,o);this._drawStart=a,this._drawCount=l,SK(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,s),p=o.axis,m=a.axis,{spanGaps:g,segment:v}=this.options,_=Yc(g)?g:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||i||s==="none",x=n+r,T=e.length;let C=n>0&&this.getParsed(n-1);for(let A=0;A<T;++A){const M=e[A],S=w?M:{};if(A<n||A>=x){S.skip=!0;continue}const k=this.getParsed(A),E=Te(k[m]),I=S[p]=o.getPixelForValue(k[p],A),N=S[m]=i||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,k,l):k[m],A);S.skip=isNaN(I)||isNaN(N)||E,S.stop=A>0&&Math.abs(k[p]-C[p])>_,v&&(S.parsed=k,S.raw=c.data[A]),h&&(S.options=u||this.resolveDataElementOptions(A,M.active?"active":s)),w||this.updateElement(M,A,S,s),C=k}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Y(ch,"id","line"),Y(ch,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Y(ch,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ri(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class S_{constructor(e){Y(this,"options");this.options=e||{}}static override(e){Object.assign(S_.prototype,e)}init(){}formats(){return Ri()}parse(){return Ri()}format(){return Ri()}add(){return Ri()}diff(){return Ri()}startOf(){return Ri()}endOf(){return Ri()}}var XQ={_date:S_};function JQ(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?xK:Qi;if(r){if(s._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const p=c(i,e,n-h),m=c(i,e,n+h);return{lo:p.lo,hi:m.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:h}=s._cachedMeta,{_parsed:p}=t,m=p.slice(0,u.lo+1).reverse().findIndex(v=>!Te(v[h.axis]));u.lo-=Math.max(0,m);const g=p.slice(u.hi).findIndex(v=>!Te(v[h.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:i.length-1}}function Op(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:h,hi:p}=JQ(i[a],e,o,s);for(let m=h;m<=p;++m){const g=u[m];g.skip||r(g,c,m)}}}function ZQ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Sg(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Op(t,n,e,function(a,l,c){!s&&!Jc(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function eY(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=xN(o,{x:e.x,y:e.y});Xc(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return Op(t,n,e,i),s}function tY(t,e,n,r,s,i){let o=[];const a=ZQ(n);let l=Number.POSITIVE_INFINITY;function c(u,h,p){const m=u.inRange(e.x,e.y,s);if(r&&!m)return;const g=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(g))&&!m)return;const _=a(e,g);_<l?(o=[{element:u,datasetIndex:h,index:p}],l=_):_===l&&o.push({element:u,datasetIndex:h,index:p})}return Op(t,n,e,c),o}function Eg(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?eY(t,e,n,s):tY(t,e,n,r,s,i)}function pS(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Op(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var nY={modes:{index(t,e,n,r){const s=Fi(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Sg(t,s,i,r,o):Eg(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=Fi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Sg(t,s,i,r,o):Eg(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=Fi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Sg(t,s,i,r,o)},nearest(t,e,n,r){const s=Fi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Eg(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Fi(e,t);return pS(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Fi(e,t);return pS(t,s,"y",n.intersect,r)}}};const zN=["left","top","right","bottom"];function _l(t,e){return t.filter(n=>n.pos===e)}function mS(t,e){return t.filter(n=>zN.indexOf(n.pos)===-1&&n.box.axis===e)}function wl(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function rY(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function sY(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!zN.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function iY(t,e){const n=sY(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function oY(t){const e=rY(t),n=wl(e.filter(c=>c.box.fullSize),!0),r=wl(_l(e,"left"),!0),s=wl(_l(e,"right")),i=wl(_l(e,"top"),!0),o=wl(_l(e,"bottom")),a=mS(e,"x"),l=mS(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:_l(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function gS(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function BN(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function aY(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!me(s)){n.size&&(t[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[s]+=n.size}i.getPadding&&BN(o,i.getPadding());const a=Math.max(0,e.outerWidth-gS(o,t,"left","right")),l=Math.max(0,e.outerHeight-gS(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function lY(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function cY(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Ll(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,cY(a.horizontal,e));const{same:h,other:p}=aY(e,n,a,r);c|=h&&s.length,u=u||p,l.fullSize||s.push(a)}return c&&Ll(s,e,n,r)||u}function Id(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function yS(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,p=c.size||l.height;Qc(c.start)&&(o=c.start),l.fullSize?Id(l,s.left,o,n.outerWidth-s.right-s.left,p):Id(l,e.left+c.placed,o,h,p),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,p=c.size||l.width;Qc(c.start)&&(i=c.start),l.fullSize?Id(l,i,s.top,p,n.outerHeight-s.bottom-s.top):Id(l,i,e.top+c.placed,p,h),c.start=i,c.placed+=h,i=l.right}}e.x=i,e.y=o}var Mn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=Bn(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=oY(t.boxes),l=a.vertical,c=a.horizontal;Se(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,_)=>_.box.options&&_.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},s);BN(p,Bn(r));const m=Object.assign({maxPadding:p,w:i,h:o,x:s.left,y:s.top},s),g=iY(l.concat(c),h);Ll(a.fullSize,m,h,g),Ll(l,m,h,g),Ll(c,m,h,g)&&Ll(l,m,h,g),lY(m),yS(a.leftAndTop,m,h,g),m.x+=m.w,m.y+=m.h,yS(a.rightAndBottom,m,h,g),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Se(a.chartArea,v=>{const _=v.box;Object.assign(_,t.chartArea),_.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class $N{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class uY extends $N{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const uh="$chartjs",dY={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},vS=t=>t===null||t==="";function hY(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[uh]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",vS(s)){const i=tS(t,"width");i!==void 0&&(t.width=i)}if(vS(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=tS(t,"height");i!==void 0&&(t.height=i)}return t}const WN=pQ?{passive:!0}:!1;function fY(t,e,n){t&&t.addEventListener(e,n,WN)}function pY(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,WN)}function mY(t,e){const n=dY[t.type]||t.type,{x:r,y:s}=Fi(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function kf(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function gY(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||kf(a.addedNodes,r),o=o&&!kf(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function yY(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||kf(a.removedNodes,r),o=o&&!kf(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const eu=new Map;let xS=0;function HN(){const t=window.devicePixelRatio;t!==xS&&(xS=t,eu.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function vY(t,e){eu.size||window.addEventListener("resize",HN),eu.set(t,e)}function xY(t){eu.delete(t),eu.size||window.removeEventListener("resize",HN)}function _Y(t,e,n){const r=t.canvas,s=r&&k_(r);if(!s)return;const i=TN((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),vY(t,i),o}function Pg(t,e,n){n&&n.disconnect(),e==="resize"&&xY(t)}function wY(t,e,n){const r=t.canvas,s=TN(i=>{t.ctx!==null&&n(mY(i,t))},t);return fY(r,e,s),s}class bY extends $N{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(hY(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[uh])return!1;const r=n[uh].initial;["height","width"].forEach(i=>{const o=r[i];Te(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[uh],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:gY,detach:yY,resize:_Y}[n]||wY;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:Pg,detach:Pg,resize:Pg}[n]||pY)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return fQ(e,n,r,s)}isAttached(e){const n=e&&k_(e);return!!(n&&n.isConnected)}}function TY(t){return!T_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?uY:bY}var jd;let ms=(jd=class{constructor(){Y(this,"x");Y(this,"y");Y(this,"active",!1);Y(this,"options");Y(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Yc(this.x)&&Yc(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},Y(jd,"defaults",{}),Y(jd,"defaultRoutes"),jd);function kY(t,e){const n=t.options.ticks,r=SY(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?PY(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return CY(e,c,i,o/s),c;const u=EY(i,e,s);if(o>0){let h,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(Ad(e,c,u,Te(m)?0:a-m,a),h=0,p=o-1;h<p;h++)Ad(e,c,u,i[h],i[h+1]);return Ad(e,c,u,l,Te(m)?e.length:l+m),c}return Ad(e,c,u),c}function SY(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function EY(t,e,n){const r=IY(t),s=e.length/n;if(!r)return Math.max(s,1);const i=hK(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function PY(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function CY(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function Ad(t,e,n,r,s){const i=ce(r,0),o=Math.min(ce(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function IY(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const AY=t=>t==="left"?"right":t==="right"?"left":t,_S=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,wS=(t,e)=>Math.min(e||t,t);function bS(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function RY(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function NY(t,e){Se(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function bl(t){return t.drawTicks?t.tickLength:0}function TS(t,e){if(!t.display)return 0;const n=Bt(t.font,e),r=Bn(t.padding);return(at(t.text)?t.text.length:1)*n.lineHeight+r.height}function DY(t,e){return Eo(t,{scale:e,type:"scale"})}function MY(t,e,n){return Eo(t,{tick:n,index:e,type:"tick"})}function jY(t,e,n){let r=g_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=AY(r)),r}function OY(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,p,m,g;const v=o-s,_=a-i;if(t.isHorizontal()){if(m=Lt(r,i,a),me(n)){const w=Object.keys(n)[0],x=n[w];g=u[w].getPixelForValue(x)+v-e}else n==="center"?g=(c.bottom+c.top)/2+v-e:g=_S(t,n,e);p=a-i}else{if(me(n)){const w=Object.keys(n)[0],x=n[w];m=u[w].getPixelForValue(x)-_+e}else n==="center"?m=(c.left+c.right)/2-_+e:m=_S(t,n,e);g=Lt(r,o,s),h=n==="left"?-ft:ft}return{titleX:m,titleY:g,maxWidth:p,rotation:h}}class Ga extends ms{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=ar(e,Number.POSITIVE_INFINITY),n=ar(n,Number.NEGATIVE_INFINITY),r=ar(r,Number.POSITIVE_INFINITY),s=ar(s,Number.NEGATIVE_INFINITY),{min:ar(e,r),max:ar(n,s),minDefined:Ht(e),maxDefined:Ht(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:ar(n,ar(r,n)),max:ar(r,ar(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Oe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=HK(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?bS(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=kY(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Oe(this.options.afterUpdate,[this])}beforeSetDimensions(){Oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Oe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Oe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Oe(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=wS(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,p=u.highest.height,m=zt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),h+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-bl(e.grid)-n.padding-TS(e.title,this.chart.options.font),c=Math.sqrt(h*h+p*p),o=gK(Math.min(Math.asin(zt((u.highest.height+6)/a,-1,1)),Math.asin(zt(l/c,-1,1))-Math.asin(zt(p/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Oe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=TS(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=bl(i)+l):(e.height=this.maxHeight,e.width=bl(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:p}=this._getLabelSizes(),m=r.padding*2,g=Kr(this.labelRotation),v=Math.cos(g),_=Math.sin(g);if(a){const w=r.mirror?0:_*h.width+v*p.height;e.height=Math.min(this.maxHeight,e.height+w+m)}else{const w=r.mirror?0:v*h.width+_*p.height;e.width=Math.min(this.maxWidth,e.width+w+m)}this._calculatePadding(c,u,_,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=s*e.width,m=r*n.height):(p=r*e.height,m=s*n.width):i==="start"?m=n.width:i==="end"?p=e.width:i!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Oe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Te(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=bS(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/wS(n,r));let c=0,u=0,h,p,m,g,v,_,w,x,T,C,A;for(h=0;h<n;h+=l){if(g=e[h].label,v=this._resolveTickFontOptions(h),s.font=_=v.string,w=i[_]=i[_]||{data:{},gc:[]},x=v.lineHeight,T=C=0,!Te(g)&&!at(g))T=Yk(s,w.data,w.gc,T,g),C=x;else if(at(g))for(p=0,m=g.length;p<m;++p)A=g[p],!Te(A)&&!at(A)&&(T=Yk(s,w.data,w.gc,T,A),C+=x);o.push(T),a.push(C),c=Math.max(T,c),u=Math.max(C,u)}NY(i,n);const M=o.indexOf(c),S=a.indexOf(u),k=E=>({width:o[E]||0,height:a[E]||0});return{first:k(0),last:k(n-1),widest:k(M),highest:k(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return vK(this._alignToPixels?Ai(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=MY(this.getContext(),e,r))}return this.$context||(this.$context=DY(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Kr(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),p=bl(i),m=[],g=a.setContext(this.getContext()),v=g.display?g.width:0,_=v/2,w=function($){return Ai(r,$,v)};let x,T,C,A,M,S,k,E,I,N,j,R;if(o==="top")x=w(this.bottom),S=this.bottom-p,E=x-_,N=w(e.top)+_,R=e.bottom;else if(o==="bottom")x=w(this.top),N=e.top,R=w(e.bottom)-_,S=x+_,E=this.top+p;else if(o==="left")x=w(this.right),M=this.right-p,k=x-_,I=w(e.left)+_,j=e.right;else if(o==="right")x=w(this.left),I=e.left,j=w(e.right)-_,M=x+_,k=this.left+p;else if(n==="x"){if(o==="center")x=w((e.top+e.bottom)/2+.5);else if(me(o)){const $=Object.keys(o)[0],X=o[$];x=w(this.chart.scales[$].getPixelForValue(X))}N=e.top,R=e.bottom,S=x+_,E=S+p}else if(n==="y"){if(o==="center")x=w((e.left+e.right)/2);else if(me(o)){const $=Object.keys(o)[0],X=o[$];x=w(this.chart.scales[$].getPixelForValue(X))}M=x-_,k=M-p,I=e.left,j=e.right}const z=ce(s.ticks.maxTicksLimit,h),H=Math.max(1,Math.ceil(h/z));for(T=0;T<h;T+=H){const $=this.getContext(T),X=i.setContext($),U=a.setContext($),q=X.lineWidth,te=X.color,Z=U.dash||[],le=U.dashOffset,ye=X.tickWidth,nt=X.tickColor,mt=X.tickBorderDash||[],Ue=X.tickBorderDashOffset;C=RY(this,T,l),C!==void 0&&(A=Ai(r,C,q),c?M=k=I=j=A:S=E=N=R=A,m.push({tx1:M,ty1:S,tx2:k,ty2:E,x1:I,y1:N,x2:j,y2:R,width:q,color:te,borderDash:Z,borderDashOffset:le,tickWidth:ye,tickColor:nt,tickBorderDash:mt,tickBorderDashOffset:Ue}))}return this._ticksLength=h,this._borderValue=x,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=i,p=bl(r.grid),m=p+u,g=h?-u:m,v=-Kr(this.labelRotation),_=[];let w,x,T,C,A,M,S,k,E,I,N,j,R="middle";if(s==="top")M=this.bottom-g,S=this._getXAxisLabelAlignment();else if(s==="bottom")M=this.top+g,S=this._getXAxisLabelAlignment();else if(s==="left"){const H=this._getYAxisLabelAlignment(p);S=H.textAlign,A=H.x}else if(s==="right"){const H=this._getYAxisLabelAlignment(p);S=H.textAlign,A=H.x}else if(n==="x"){if(s==="center")M=(e.top+e.bottom)/2+m;else if(me(s)){const H=Object.keys(s)[0],$=s[H];M=this.chart.scales[H].getPixelForValue($)+m}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")A=(e.left+e.right)/2-m;else if(me(s)){const H=Object.keys(s)[0],$=s[H];A=this.chart.scales[H].getPixelForValue($)}S=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const z=this._getLabelSizes();for(w=0,x=a.length;w<x;++w){T=a[w],C=T.label;const H=i.setContext(this.getContext(w));k=this.getPixelForTick(w)+i.labelOffset,E=this._resolveTickFontOptions(w),I=E.lineHeight,N=at(C)?C.length:1;const $=N/2,X=H.color,U=H.textStrokeColor,q=H.textStrokeWidth;let te=S;o?(A=k,S==="inner"&&(w===x-1?te=this.options.reverse?"left":"right":w===0?te=this.options.reverse?"right":"left":te="center"),s==="top"?c==="near"||v!==0?j=-N*I+I/2:c==="center"?j=-z.highest.height/2-$*I+I:j=-z.highest.height+I/2:c==="near"||v!==0?j=I/2:c==="center"?j=z.highest.height/2-$*I:j=z.highest.height-N*I,h&&(j*=-1),v!==0&&!H.showLabelBackdrop&&(A+=I/2*Math.sin(v))):(M=k,j=(1-N)*I/2);let Z;if(H.showLabelBackdrop){const le=Bn(H.backdropPadding),ye=z.heights[w],nt=z.widths[w];let mt=j-le.top,Ue=0-le.left;switch(R){case"middle":mt-=ye/2;break;case"bottom":mt-=ye;break}switch(S){case"center":Ue-=nt/2;break;case"right":Ue-=nt;break;case"inner":w===x-1?Ue-=nt:w>0&&(Ue-=nt/2);break}Z={left:Ue,top:mt,width:nt+le.width,height:ye+le.height,color:H.backdropColor}}_.push({label:C,font:E,textOffset:j,options:{rotation:v,color:X,strokeColor:U,strokeWidth:q,textAlign:te,textBaseline:R,translation:[A,M],backdrop:Z}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Kr(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,p;this.isHorizontal()?(c=Ai(e,this.left,o)-o/2,u=Ai(e,this.right,a)+a/2,h=p=l):(h=Ai(e,this.top,o)-o/2,p=Ai(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Dp(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Zc(r,c,0,u,l,a)}s&&Mp(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Bt(r.font),o=Bn(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||me(n)?(l+=o.bottom,at(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:p}=OY(this,l,n,a);Zc(e,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:p,textAlign:jY(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ce(e.grid&&e.grid.z,-1),s=ce(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ga.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Bt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Rd{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;FY(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,LY(e,o,r),this.override&&et.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in et[s]&&(delete et[s][r],this.override&&delete go[r])}}function LY(t,e,n){const r=Kc(Object.create(null),[n?et.get(n):{},et.get(e),t.defaults]);et.set(e,r),t.defaultRoutes&&VY(e,t.defaultRoutes),t.descriptors&&et.describe(e,t.descriptors)}function VY(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");et.route(i,s,l,a)})}function FY(t){return"id"in t&&"defaults"in t}class UY{constructor(){this.controllers=new Rd(to,"datasets",!0),this.elements=new Rd(ms,"elements"),this.plugins=new Rd(Object,"plugins"),this.scales=new Rd(Ga,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Se(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=p_(e);Oe(r["before"+s],[],r),n[e](r),Oe(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var ur=new UY;class zY{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Oe(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Te(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=ce(r.options&&r.options.plugins,{}),i=BY(r);return s===!1&&!n?[]:WY(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function BY(t){const e={},n=[],r=Object.keys(ur.plugins.items);for(let i=0;i<r.length;i++)n.push(ur.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function $Y(t,e){return!e&&t===!1?null:t===!0?{}:t}function WY(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=$Y(r[l],s);c!==null&&i.push({plugin:a,options:HY(t.config,{plugin:a,local:n[l]},c,o)})}return i}function HY(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function D0(t,e){const n=et.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function qY(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function GY(t,e){return t===e?"_index_":"_value_"}function kS(t){if(t==="x"||t==="y"||t==="r")return t}function KY(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function M0(t,...e){if(kS(t))return t;for(const n of e){const r=n.axis||KY(n.position)||t.length>1&&kS(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function SS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function QY(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return SS(t,"x",n[0])||SS(t,"y",n[0])}return{}}function YY(t,e){const n=go[t.type]||{scales:{}},r=e.scales||{},s=D0(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!me(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=M0(o,a,QY(o,t),et.scales[a.type]),c=GY(l,s),u=n.scales||{};i[o]=cc(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||D0(a,e),u=(go[a]||{}).scales||{};Object.keys(u).forEach(h=>{const p=qY(h,l),m=o[p+"AxisID"]||p;i[m]=i[m]||Object.create(null),cc(i[m],[{axis:p},r[m],u[h]])})}),Object.keys(i).forEach(o=>{const a=i[o];cc(a,[et.scales[a.type],et.scale])}),i}function qN(t){const e=t.options||(t.options={});e.plugins=ce(e.plugins,{}),e.scales=YY(t,e)}function GN(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function XY(t){return t=t||{},t.data=GN(t.data),qN(t),t}const ES=new Map,KN=new Set;function Nd(t,e){let n=ES.get(t);return n||(n=e(),ES.set(t,n),KN.add(n)),n}const Tl=(t,e,n)=>{const r=mo(e,n);r!==void 0&&t.add(r)};class JY{constructor(e){this._config=XY(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=GN(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),qN(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Nd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Nd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Nd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Nd(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Tl(l,e,h))),u.forEach(h=>Tl(l,s,h)),u.forEach(h=>Tl(l,go[i]||{},h)),u.forEach(h=>Tl(l,et,h)),u.forEach(h=>Tl(l,R0,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),KN.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,go[n]||{},et.datasets[n]||{},{type:n},et,R0]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=PS(this._resolverCache,e,s);let l=o;if(eX(o,n)){i.$shared=!1,r=di(r)?r():r;const c=this.createResolver(e,r,a);l=ja(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=PS(this._resolverCache,e,r);return me(n)?ja(i,n,void 0,s):i}}function PS(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:__(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const ZY=t=>me(t)&&Object.getOwnPropertyNames(t).some(e=>di(t[e]));function eX(t,e){const{isScriptable:n,isIndexable:r}=PN(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(di(a)||ZY(a))||o&&at(a))return!0}return!1}var tX="4.5.1";const nX=["top","bottom","left","right","chartArea"];function CS(t,e){return t==="top"||t==="bottom"||nX.indexOf(t)===-1&&e==="x"}function IS(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function AS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Oe(n&&n.onComplete,[t],e)}function rX(t){const e=t.chart,n=e.options.animation;Oe(n&&n.onProgress,[t],e)}function QN(t){return T_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const dh={},RS=t=>{const e=QN(t);return Object.values(dh).filter(n=>n.canvas===e).pop()};function sX(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function iX(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var bs;let Lp=(bs=class{static register(...e){ur.add(...e),NS()}static unregister(...e){ur.remove(...e),NS()}constructor(e,n){const r=this.config=new JY(n),s=QN(e),i=RS(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||TY(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=rK(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zY,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=bK(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],dh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}jr.listen(this,"complete",AS),jr.listen(this,"progress",rX),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Te(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ur}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():eS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Xk(this.canvas,this.ctx),this}stop(){return jr.stop(this),this}resize(e,n){jr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,eS(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Oe(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Se(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=M0(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Se(i,o=>{const a=o.options,l=a.id,c=M0(l,a),u=ce(a.type,o.dtype);(a.position===void 0||CS(a.position,c)!==CS(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in r&&r[l].type===u)h=r[l];else{const p=ur.getScale(u);h=new p({id:l,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),Se(s,(o,a)=>{o||delete r[a]}),Se(r,o=>{Mn.configure(this,o,o.options),Mn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(IS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||D0(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=ur.getController(a),{datasetElementType:c,dataElementType:u}=et.datasets[a];Object.assign(l,{dataElementType:ur.getElement(u),datasetElementType:c&&ur.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Se(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),p=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(p),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Se(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(IS("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Se(this.scales,e=>{Mn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!zk(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;sX(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!zk(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Mn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Se(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,di(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(jr.has(this)?this.attached&&!jr.running(this)&&jr.start(this):(this.draw(),AS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=LN(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Dp(n,s),e.controller.draw(),s&&Mp(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Jc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=nY.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Eo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);Qc(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),jr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Xk(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete dh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Se(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Se(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Se(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!xf(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=cK(e),c=iX(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Oe(i.onHover,[e,a,this],this),l&&Oe(i.onClick,[e,a,this],this));const u=!xf(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},Y(bs,"defaults",et),Y(bs,"instances",dh),Y(bs,"overrides",go),Y(bs,"registry",ur),Y(bs,"version",tX),Y(bs,"getChart",RS),bs);function NS(){return Se(Lp.instances,t=>t._plugins.invalidate())}function oX(t,e,n){const{startAngle:r,x:s,y:i,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/o,yn(r-n));if(t.beginPath(),t.arc(s,i,o-c/2,r+h/2,n-h/2),a>0){const p=Math.min(c/a,yn(r-n));t.arc(s,i,a+c/2,n-p/2,r+p/2,!0)}else{const p=Math.min(c/2,o*yn(r-n));if(u==="round")t.arc(s,i,p,n-Ee/2,r+Ee/2,!0);else if(u==="bevel"){const m=2*p*p,g=-m*Math.cos(n+Ee/2)+s,v=-m*Math.sin(n+Ee/2)+i,_=m*Math.cos(r+Ee/2)+s,w=m*Math.sin(r+Ee/2)+i;t.lineTo(g,v),t.lineTo(_,w)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function aX(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(i,o,a,r-c,n+c),l>s?(c=s/l,t.arc(i,o,l,n+c,r-c,!0)):t.arc(i,o,s,n+ft,r-ft),t.closePath(),t.clip()}function lX(t){return x_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function cX(t,e,n,r){const s=lX(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,r*e/2),a=l=>{const c=(n-Math.min(i,l))*r/2;return zt(l,0,Math.min(i,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:zt(s.innerStart,0,o),innerEnd:zt(s.innerEnd,0,o)}}function jo(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Sf(t,e,n,r,s,i){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+r+n-c,0),p=u>0?u+r+n+c:0;let m=0;const g=s-l;if(r){const H=u>0?u-r:0,$=h>0?h-r:0,X=(H+$)/2,U=X!==0?g*X/(X+r):g;m=(g-U)/2}const v=Math.max(.001,g*h-n/Ee)/h,_=(g-v)/2,w=l+_+m,x=s-_-m,{outerStart:T,outerEnd:C,innerStart:A,innerEnd:M}=cX(e,p,h,x-w),S=h-T,k=h-C,E=w+T/S,I=x-C/k,N=p+A,j=p+M,R=w+A/N,z=x-M/j;if(t.beginPath(),i){const H=(E+I)/2;if(t.arc(o,a,h,E,H),t.arc(o,a,h,H,I),C>0){const q=jo(k,I,o,a);t.arc(q.x,q.y,C,I,x+ft)}const $=jo(j,x,o,a);if(t.lineTo($.x,$.y),M>0){const q=jo(j,z,o,a);t.arc(q.x,q.y,M,x+ft,z+Math.PI)}const X=(x-M/p+(w+A/p))/2;if(t.arc(o,a,p,x-M/p,X,!0),t.arc(o,a,p,X,w+A/p,!0),A>0){const q=jo(N,R,o,a);t.arc(q.x,q.y,A,R+Math.PI,w-ft)}const U=jo(S,w,o,a);if(t.lineTo(U.x,U.y),T>0){const q=jo(S,E,o,a);t.arc(q.x,q.y,T,w-ft,E)}}else{t.moveTo(o,a);const H=Math.cos(E)*h+o,$=Math.sin(E)*h+a;t.lineTo(H,$);const X=Math.cos(I)*h+o,U=Math.sin(I)*h+a;t.lineTo(X,U)}t.closePath()}function uX(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){Sf(t,e,n,r,l,s);for(let c=0;c<i;++c)t.fill();isNaN(a)||(l=o+(a%$e||$e))}return Sf(t,e,n,r,l,s),t.fill(),l}function dX(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:p,borderRadius:m}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=p,g?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let v=e.endAngle;if(i){Sf(t,e,n,r,v,s);for(let _=0;_<i;++_)t.stroke();isNaN(a)||(v=o+(a%$e||$e))}g&&aX(t,e,v),l.selfJoin&&v-o>=Ee&&m===0&&u!=="miter"&&oX(t,e,v),i||(Sf(t,e,n,r,v,s),t.stroke())}class Vl extends ms{constructor(n){super();Y(this,"circumference");Y(this,"endAngle");Y(this,"fullCircles");Y(this,"innerRadius");Y(this,"outerRadius");Y(this,"pixelMargin");Y(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:o,distance:a}=xN(i,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),m=(this.options.spacing+this.options.borderWidth)/2,g=ce(p,c-l),v=Xc(o,l,c)&&l!==c,_=g>=$e||v,w=Qr(a,u+m,h+m);return _&&w}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(i+o)/2,p=(a+l+u+c)/2;return{x:r+Math.cos(h)*p,y:s+Math.sin(h)*p}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>$e?Math.floor(s/$e):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(Ee,s||0)),u=i*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,uX(n,this,u,o,a),dX(n,this,u,o,a),n.restore()}}Y(Vl,"id","arc"),Y(Vl,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Y(Vl,"defaultRoutes",{backgroundColor:"backgroundColor"}),Y(Vl,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function YN(t,e,n=e){t.lineCap=ce(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ce(n.borderDash,e.borderDash)),t.lineDashOffset=ce(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ce(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ce(n.borderWidth,e.borderWidth),t.strokeStyle=ce(n.borderColor,e.borderColor)}function hX(t,e,n){t.lineTo(n.x,n.y)}function fX(t){return t.stepped?OK:t.tension||t.cubicInterpolationMode==="monotone"?LK:hX}function XN(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),u=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function pX(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=XN(s,n,r),u=fX(i);let{move:h=!0,reverse:p}=r||{},m,g,v;for(m=0;m<=c;++m)g=s[(a+(p?c-m:m))%o],!g.skip&&(h?(t.moveTo(g.x,g.y),h=!1):u(t,v,g,p,i.stepped),v=g);return l&&(g=s[(a+(p?c:0))%o],u(t,v,g,p,i.stepped)),!!l}function mX(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=XN(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,h=0,p,m,g,v,_,w;const x=C=>(o+(c?a-C:C))%i,T=()=>{v!==_&&(t.lineTo(u,_),t.lineTo(u,v),t.lineTo(u,w))};for(l&&(m=s[x(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=s[x(p)],m.skip)continue;const C=m.x,A=m.y,M=C|0;M===g?(A<v?v=A:A>_&&(_=A),u=(h*u+C)/++h):(T(),t.lineTo(C,A),g=M,h=0,v=_=A),w=A}T()}function j0(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?mX:pX}function gX(t){return t.stepped?mQ:t.tension||t.cubicInterpolationMode==="monotone"?gQ:Ui}function yX(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),YN(t,e.options),t.stroke(s)}function vX(t,e,n,r){const{segments:s,options:i}=e,o=j0(e);for(const a of s)YN(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const xX=typeof Path2D=="function";function _X(t,e,n,r){xX&&!e.options.segment?yX(t,e,n,r):vX(t,e,n,r)}class Bs extends ms{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;aQ(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=bQ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=ON(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=gX(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:p}=o[c],m=i[h],g=i[p];if(m===g){a.push(m);continue}const v=Math.abs((s-m[n])/(g[n]-m[n])),_=l(m,g,v,r.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,r){return j0(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=j0(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),_X(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Y(Bs,"id","line"),Y(Bs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Y(Bs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Y(Bs,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function DS(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class hh extends ms{constructor(n){super();Y(this,"parsed");Y(this,"skip");Y(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return DS(this,n,"x",r)}inYRange(n,r){return DS(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Jc(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,N0(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Y(hh,"id","point"),Y(hh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Y(hh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function JN(t,e){const{x:n,y:r,base:s,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,s),l=Math.max(n,s),c=r-h,u=r+h):(h=i/2,a=n-h,l=n+h,c=Math.min(r,s),u=Math.max(r,s)),{left:a,top:c,right:l,bottom:u}}function $s(t,e,n,r){return t?0:zt(e,n,r)}function wX(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=EN(r);return{t:$s(s.top,i.top,0,n),r:$s(s.right,i.right,0,e),b:$s(s.bottom,i.bottom,0,n),l:$s(s.left,i.left,0,e)}}function bX(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=ma(s),o=Math.min(e,n),a=t.borderSkipped,l=r||me(s);return{topLeft:$s(!l||a.top||a.left,i.topLeft,0,o),topRight:$s(!l||a.top||a.right,i.topRight,0,o),bottomLeft:$s(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:$s(!l||a.bottom||a.right,i.bottomRight,0,o)}}function TX(t){const e=JN(t),n=e.right-e.left,r=e.bottom-e.top,s=wX(t,n/2,r/2),i=bX(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function Cg(t,e,n,r){const s=e===null,i=n===null,a=t&&!(s&&i)&&JN(t,r);return a&&(s||Qr(e,a.left,a.right))&&(i||Qr(n,a.top,a.bottom))}function kX(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function SX(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ig(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+o,radius:t.radius}}class fh extends ms{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:o}=TX(this),a=kX(o.radius)?bf:SX;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,Ig(o,n,i)),e.clip(),a(e,Ig(i,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Ig(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return Cg(this,e,n,r)}inXRange(e,n){return Cg(this,e,null,n)}inYRange(e,n){return Cg(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Y(fh,"id","bar"),Y(fh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Y(fh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function EX(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=Vp(l,c,s);const u=O0(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const h=ON(e,u);for(const p of h){const m=O0(n,i[p.start],i[p.end],p.loop),g=jN(a,s,m);for(const v of g)o.push({source:v,target:p,start:{[n]:MS(u,m,"start",Math.max)},end:{[n]:MS(u,m,"end",Math.min)}})}}return o}function O0(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=yn(s),i=yn(i)),{property:t,start:s,end:i}}function PX(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=Vp(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function Vp(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function MS(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function ZN(t,e){let n=[],r=!1;return at(t)?(r=!0,n=t):n=PX(t,e),n.length?new Bs({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function jS(t){return t&&t.fill!==!1}function CX(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!Ht(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function IX(t,e,n){const r=DX(t);if(me(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Ht(s)&&Math.floor(s)===s?AX(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function AX(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function RX(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:me(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function NX(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:me(t)?r=t.value:r=e.getBaseValue(),r}function DX(t){const e=t.options,n=e.fill;let r=ce(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function MX(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=jX(e,n);a.push(ZN({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let u=c.start;u<=c.end;u++)OX(s,o[u],a)}return new Bs({points:s,options:{}})}function jX(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function OX(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=LX(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function LX(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const u=i[c],h=o[u.start][n],p=o[u.end][n];if(Qr(s,h,p)){a=s===h,l=s===p;break}}return{first:a,last:l,point:r}}class eD{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:$e},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function VX(t){const{chart:e,fill:n,line:r}=t;if(Ht(n))return FX(e,n);if(n==="stack")return MX(t);if(n==="shape")return!0;const s=UX(t);return s instanceof eD?s:ZN(s,r)}function FX(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function UX(t){return(t.scale||{}).getPointPositionForValue?BX(t):zX(t)}function zX(t){const{scale:e={},fill:n}=t,r=RX(n,e);if(Ht(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function BX(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=NX(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new eD({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function Ag(t,e,n){const r=VX(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,h=c.backgroundColor,{above:p=h,below:m=h}=u||{},g=s.getDatasetMeta(i),v=LN(s,g);r&&o.points.length&&(Dp(t,n),$X(t,{line:o,target:r,above:p,below:m,area:n,scale:a,axis:l,clip:v}),Mp(t))}function $X(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=i;i!==s&&(c==="x"?(OS(t,r,o.top),Rg(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),OS(t,r,o.bottom)):c==="y"&&(LS(t,r,o.left),Rg(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),LS(t,r,o.right),u=s)),Rg(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function OS(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],h=s[Vp(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function LS(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],h=s[Vp(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,h.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Rg(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=EX(n,r,s);for(const{source:c,target:u,start:h,end:p}of l){const{style:{backgroundColor:m=i}={}}=c,g=r!==!0;t.save(),t.fillStyle=m,WX(t,o,a,g&&O0(s,h,p)),t.beginPath();const v=!!n.pathSegment(t,c);let _;if(g){v?t.closePath():VS(t,r,p,s);const w=!!r.pathSegment(t,u,{move:v,reverse:!0});_=v&&w,_||VS(t,r,h,s)}t.closePath(),t.fill(_?"evenodd":"nonzero"),t.restore()}}function WX(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,u,h;i==="x"?(l=o,c=s.top,u=a,h=s.bottom):(l=s.left,c=o,u=s.right,h=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),h=Math.min(h,n.bottom)),t.rect(l,c,u-l,h-c),t.clip()}}function VS(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var HX={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof Bs&&(l={visible:t.isDatasetVisible(o),index:o,fill:IX(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=CX(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&Ag(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;jS(i)&&Ag(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!jS(r)||n.drawTime!=="beforeDatasetDraw"||Ag(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const FS=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},qX=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class US extends ms{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Oe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Bt(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=FS(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;i.textAlign="left",i.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((g,v)=>{const _=r+n/2+i.measureText(g.text).width;(v===0||c[c.length-1]+_+2*a>o)&&(h+=u,c[c.length-(v>0?0:1)]=0,m+=u,p++),l[v]={left:0,top:m,row:p,width:_,height:s},c[c.length-1]+=_+a}),h}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,p=0,m=0,g=0,v=0;return this.legendItems.forEach((_,w)=>{const{itemWidth:x,itemHeight:T}=GX(r,n,i,_,s);w>0&&m+T+2*a>u&&(h+=p+a,c.push({width:p,height:m}),g+=p+a,v++,p=m=0),l[w]={left:g,top:m,col:v,width:x,height:T},p=Math.max(p,x),m+=T+a}),h+=p,c.push({width:p,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=ga(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=Lt(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Lt(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Lt(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Lt(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Dp(e,this),this._draw(),Mp(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=et.color,l=ga(e.rtl,this.left,this.width),c=Bt(o.font),{padding:u}=o,h=c.size,p=h/2;let m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:v,itemHeight:_}=FS(o,h),w=function(M,S,k){if(isNaN(g)||g<=0||isNaN(v)||v<0)return;s.save();const E=ce(k.lineWidth,1);if(s.fillStyle=ce(k.fillStyle,a),s.lineCap=ce(k.lineCap,"butt"),s.lineDashOffset=ce(k.lineDashOffset,0),s.lineJoin=ce(k.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=ce(k.strokeStyle,a),s.setLineDash(ce(k.lineDash,[])),o.usePointStyle){const I={radius:v*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:E},N=l.xPlus(M,g/2),j=S+p;SN(s,I,N,j,o.pointStyleWidth&&g)}else{const I=S+Math.max((h-v)/2,0),N=l.leftForLtr(M,g),j=ma(k.borderRadius);s.beginPath(),Object.values(j).some(R=>R!==0)?bf(s,{x:N,y:I,w:g,h:v,radius:j}):s.rect(N,I,g,v),s.fill(),E!==0&&s.stroke()}s.restore()},x=function(M,S,k){Zc(s,k.text,M,S+_/2,c,{strikethrough:k.hidden,textAlign:l.textAlign(k.textAlign)})},T=this.isHorizontal(),C=this._computeTitleHeight();T?m={x:Lt(i,this.left+u,this.right-r[0]),y:this.top+u+C,line:0}:m={x:this.left+u,y:Lt(i,this.top+C+u,this.bottom-n[0].height),line:0},NN(this.ctx,e.textDirection);const A=_+u;this.legendItems.forEach((M,S)=>{s.strokeStyle=M.fontColor,s.fillStyle=M.fontColor;const k=s.measureText(M.text).width,E=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),I=g+p+k;let N=m.x,j=m.y;l.setWidth(this.width),T?S>0&&N+I+u>this.right&&(j=m.y+=A,m.line++,N=m.x=Lt(i,this.left+u,this.right-r[m.line])):S>0&&j+A>this.bottom&&(N=m.x=N+n[m.line].width+u,m.line++,j=m.y=Lt(i,this.top+C+u,this.bottom-n[m.line].height));const R=l.x(N);if(w(R,j,M),N=TK(E,N+g+p,T?N+I:this.right,e.rtl),x(l.x(N),j,M),T)m.x+=I+u;else if(typeof M.text!="string"){const z=c.lineHeight;m.y+=tD(M,z)+u}else m.y+=A}),DN(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Bt(n.font),s=Bn(n.padding);if(!n.display)return;const i=ga(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,h=Lt(e.align,h,this.right-p);else{const g=this.columnSizes.reduce((v,_)=>Math.max(v,_.height),0);u=c+Lt(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const m=Lt(a,h,h+p);o.textAlign=i.textAlign(g_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Zc(o,n.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,n=Bt(e.font),r=Bn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Qr(e,this.left,this.right)&&Qr(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Qr(e,s.left,s.left+s.width)&&Qr(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!YX(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=qX(s,r);s&&!i&&Oe(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Oe(n.onHover,[e,r,this],this)}else r&&Oe(n.onClick,[e,r,this],this)}}function GX(t,e,n,r,s){const i=KX(r,t,e,n),o=QX(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function KX(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function QX(t,e,n){let r=t;return typeof e.text!="string"&&(r=tD(e,n)),r}function tD(t,e){const n=t.text?t.text.length:0;return e*n}function YX(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var XX={id:"legend",_element:US,start(t,e,n){const r=t.legend=new US({ctx:t.ctx,options:n,chart:t});Mn.configure(t,r,n),Mn.addBox(t,r)},stop(t){Mn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Mn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Bn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class nD extends ms{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=at(r.text)?r.text.length:1;this._padding=Bn(r.padding);const i=s*Bt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Lt(a,r,i),h=n+e,c=i-r):(o.position==="left"?(u=r+e,h=Lt(a,s,n),l=Ee*-.5):(u=i-e,h=Lt(a,n,s),l=Ee*.5),c=s-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Bt(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Zc(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:g_(n.align),textBaseline:"middle",translation:[o,a]})}}function JX(t,e){const n=new nD({ctx:t.ctx,options:e,chart:t});Mn.configure(t,n,e),Mn.addBox(t,n),t.titleBlock=n}var ZX={id:"title",_element:nD,start(t,e,n){JX(t,n)},stop(t){const e=t.titleBlock;Mn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Mn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fl={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=A0(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function lr(t,e){return e&&(at(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Or(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function eJ(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function zS(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Bt(e.bodyFont),c=Bt(e.titleFont),u=Bt(e.footerFont),h=i.length,p=s.length,m=r.length,g=Bn(e.padding);let v=g.height,_=0,w=r.reduce((C,A)=>C+A.before.length+A.lines.length+A.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,h&&(v+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),w){const C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=m*C+(w-m)*l.lineHeight+(w-1)*e.bodySpacing}p&&(v+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let x=0;const T=function(C){_=Math.max(_,n.measureText(C).width+x)};return n.save(),n.font=c.string,Se(t.title,T),n.font=l.string,Se(t.beforeBody.concat(t.afterBody),T),x=e.displayColors?o+2+e.boxPadding:0,Se(r,C=>{Se(C.before,T),Se(C.lines,T),Se(C.after,T)}),x=0,n.font=u.string,Se(t.footer,T),n.restore(),_+=g.width,{width:_,height:v}}function tJ(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function nJ(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function rJ(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),nJ(c,t,e,n)&&(c="center"),c}function BS(t,e,n){const r=n.yAlign||e.yAlign||tJ(t,n);return{xAlign:n.xAlign||e.xAlign||rJ(t,e,n,r),yAlign:r}}function sJ(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function iJ(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function $S(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:h,bottomLeft:p,bottomRight:m}=ma(o);let g=sJ(e,a);const v=iJ(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,p)+s:a==="right"&&(g+=Math.max(h,m)+s),{x:zt(g,0,r.width-e.width),y:zt(v,0,r.height-e.height)}}function Dd(t,e,n){const r=Bn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function WS(t){return lr([],Or(t))}function oJ(t,e,n){return Eo(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function HS(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const rD={beforeTitle:Mr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Mr,beforeBody:Mr,beforeLabel:Mr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Te(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Mr,afterBody:Mr,beforeFooter:Mr,footer:Mr,afterFooter:Mr};function nn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?rD[e].call(n,r):s}class L0 extends ms{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new VN(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=oJ(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=nn(r,"beforeTitle",this,e),i=nn(r,"title",this,e),o=nn(r,"afterTitle",this,e);let a=[];return a=lr(a,Or(s)),a=lr(a,Or(i)),a=lr(a,Or(o)),a}getBeforeBody(e,n){return WS(nn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Se(e,i=>{const o={before:[],lines:[],after:[]},a=HS(r,i);lr(o.before,Or(nn(a,"beforeLabel",this,i))),lr(o.lines,nn(a,"label",this,i)),lr(o.after,Or(nn(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return WS(nn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=nn(r,"beforeFooter",this,e),i=nn(r,"footer",this,e),o=nn(r,"afterFooter",this,e);let a=[];return a=lr(a,Or(s)),a=lr(a,Or(i)),a=lr(a,Or(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(eJ(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,p)=>e.filter(u,h,p,r))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,r))),Se(a,u=>{const h=HS(e.callbacks,u);s.push(nn(h,"labelColor",this,u)),i.push(nn(h,"labelPointStyle",this,u)),o.push(nn(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Fl[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=zS(this,r),c=Object.assign({},a,l),u=BS(this.chart,r,c),h=$S(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=ma(a),{x:p,y:m}=e,{width:g,height:v}=n;let _,w,x,T,C,A;return i==="center"?(C=m+v/2,s==="left"?(_=p,w=_-o,T=C+o,A=C-o):(_=p+g,w=_+o,T=C-o,A=C+o),x=_):(s==="left"?w=p+Math.max(l,u)+o:s==="right"?w=p+g-Math.max(c,h)-o:w=this.caretX,i==="top"?(T=m,C=T-o,_=w-o,x=w+o):(T=m+v,C=T+o,_=w+o,x=w-o),A=T),{x1:_,x2:w,x3:x,y1:T,y2:C,y3:A}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=ga(r.rtl,this.x,this.width);for(e.x=Dd(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Bt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=Bt(i.bodyFont),h=Dd(this,"left",i),p=s.x(h),m=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+m;if(i.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=s.leftForLtr(p,c)+c/2,w=g+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,N0(e,v,_,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,N0(e,v,_,w)}else{e.lineWidth=me(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=s.leftForLtr(p,c),_=s.leftForLtr(s.xPlus(p,1),c-2),w=ma(o.borderRadius);Object.values(w).some(x=>x!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,bf(e,{x:v,y:g,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),bf(e,{x:_,y:g+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,g,c,l),e.strokeRect(v,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(_,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,h=Bt(r.bodyFont);let p=h.lineHeight,m=0;const g=ga(r.rtl,this.x,this.width),v=function(k){n.fillText(k,g.x(e.x+m),e.y+p/2),e.y+=p+i},_=g.textAlign(o);let w,x,T,C,A,M,S;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Dd(this,_,r),n.fillStyle=r.bodyColor,Se(this.beforeBody,v),m=a&&_!=="right"?o==="center"?c/2+u:c+2+u:0,C=0,M=s.length;C<M;++C){for(w=s[C],x=this.labelTextColors[C],n.fillStyle=x,Se(w.before,v),T=w.lines,a&&T.length&&(this._drawColorBox(n,e,C,g,r),p=Math.max(h.lineHeight,l)),A=0,S=T.length;A<S;++A)v(T[A]),p=h.lineHeight;Se(w.after,v)}m=0,p=h.lineHeight,Se(this.afterBody,v),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=ga(r.rtl,this.x,this.width);for(e.x=Dd(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Bt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:h,topRight:p,bottomLeft:m,bottomRight:g}=ma(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+m,l+u),n.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Fl[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=zS(this,e),l=Object.assign({},o,this._size),c=BS(n,e,l),u=$S(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Bn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),NN(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),DN(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!xf(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!xf(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Fl[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}Y(L0,"positioners",Fl);var aJ={id:"tooltip",_element:L0,positioners:Fl,afterInit(t,e,n){n&&(t.tooltip=new L0({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:rD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const lJ=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function cJ(t,e,n,r){const s=t.indexOf(e);if(s===-1)return lJ(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const uJ=(t,e)=>t===null?null:zt(Math.round(t),0,e);function qS(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class V0 extends Ga{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Te(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:cJ(r,e,ce(n,e),this._addedLabels),uJ(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return qS.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Y(V0,"id","category"),Y(V0,"defaults",{ticks:{callback:qS}});function dJ(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:p}=t,m=i||1,g=u-1,{min:v,max:_}=e,w=!Te(o),x=!Te(a),T=!Te(c),C=(_-v)/(h+1);let A=$k((_-v)/g/m)*m,M,S,k,E;if(A<1e-14&&!w&&!x)return[{value:v},{value:_}];E=Math.ceil(_/A)-Math.floor(v/A),E>g&&(A=$k(E*A/g/m)*m),Te(l)||(M=Math.pow(10,l),A=Math.ceil(A*M)/M),s==="ticks"?(S=Math.floor(v/A)*A,k=Math.ceil(_/A)*A):(S=v,k=_),w&&x&&i&&pK((a-o)/i,A/1e3)?(E=Math.round(Math.min((a-o)/A,u)),A=(a-o)/E,S=o,k=a):T?(S=w?o:S,k=x?a:k,E=c-1,A=(k-S)/E):(E=(k-S)/A,uc(E,Math.round(E),A/1e3)?E=Math.round(E):E=Math.ceil(E));const I=Math.max(Wk(A),Wk(S));M=Math.pow(10,Te(l)?I:l),S=Math.round(S*M)/M,k=Math.round(k*M)/M;let N=0;for(w&&(p&&S!==o?(n.push({value:o}),S<o&&N++,uc(Math.round((S+N*A)*M)/M,o,GS(o,C,t))&&N++):S<o&&N++);N<E;++N){const j=Math.round((S+N*A)*M)/M;if(x&&j>a)break;n.push({value:j})}return x&&p&&k!==a?n.length&&uc(n[n.length-1].value,a,GS(a,C,t))?n[n.length-1].value=a:n.push({value:a}):(!x||k===a)&&n.push({value:k}),n}function GS(t,e,{horizontal:n,minRotation:r}){const s=Kr(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class hJ extends Ga{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Te(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=kr(s),c=kr(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=dJ(s,i);return e.bounds==="ticks"&&mK(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return v_(e,this.chart.options.locale,this.options.ticks.format)}}class F0 extends hJ{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ht(e)?e:0,this.max=Ht(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Kr(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Y(F0,"id","linear"),Y(F0,"defaults",{ticks:{callback:kN.formatters.numeric}});const Fp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},on=Object.keys(Fp);function KS(t,e){return t-e}function QS(t,e){if(Te(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Ht(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Yc(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function YS(t,e,n,r){const s=on.length;for(let i=on.indexOf(t);i<s-1;++i){const o=Fp[on[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return on[i]}return on[s-1]}function fJ(t,e,n,r,s){for(let i=on.length-1;i>=on.indexOf(n);i--){const o=on[i];if(Fp[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return on[n?on.indexOf(n):0]}function pJ(t){for(let e=on.indexOf(t)+1,n=on.length;e<n;++e)if(Fp[on[e]].common)return on[e]}function XS(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=m_(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function mJ(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function JS(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:mJ(t,r,s,n)}class Ef extends Ga{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new XQ._date(e.adapters.date);s.init(n),cc(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:QS(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ht(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Ht(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=_K(s,i,o);return this._unit=n.unit||(r.autoSkip?YS(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):fJ(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:pJ(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),JS(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=zt(n,0,o),r=zt(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||YS(i.minUnit,n,r,this._getLabelCapacity(n)),a=ce(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=Yc(l)||l===!0,u={};let h=n,p,m;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(p=h,m=0;p<r;p=+e.add(p,a,o),m++)XS(u,p,g);return(p===r||s.bounds==="ticks"||m===1)&&XS(u,p,g),Object.keys(u).sort(KS).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Oe(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],p=r[n],m=c&&h&&p&&p.major;return this._adapter.format(e,s||(m?h:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Kr(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,JS(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(QS(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return wN(e.sort(KS))}}Y(Ef,"id","time"),Y(Ef,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Md(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Qi(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Qi(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class ZS extends Ef{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Md(n,this.min),this._tableRange=Md(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Md(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Md(this._table,r*this._tableRange+this._minPos,!0)}}Y(ZS,"id","timeseries"),Y(ZS,"defaults",Ef.defaults);const sD="label";function eE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function gJ(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function iD(t,e){t.labels=e}function oD(t,e,n=sD){const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function yJ(t,e=sD){const n={labels:[],datasets:[]};return iD(n,t.labels),oD(n,t.datasets,e),n}function vJ(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...p}=t,m=D.useRef(null),g=D.useRef(null),v=()=>{m.current&&(g.current=new Lp(m.current,{type:o,data:yJ(a,i),options:l&&{...l},plugins:c}),eE(e,g.current))},_=()=>{eE(e,null),g.current&&(g.current.destroy(),g.current=null)};return D.useEffect(()=>{!s&&g.current&&l&&gJ(g.current,l)},[s,l]),D.useEffect(()=>{!s&&g.current&&iD(g.current.config.data,a.labels)},[s,a.labels]),D.useEffect(()=>{!s&&g.current&&a.datasets&&oD(g.current.config.data,a.datasets,i)},[s,a.datasets]),D.useEffect(()=>{g.current&&(s?(_(),setTimeout(v)):g.current.update(h))},[s,l,a.labels,a.datasets,h]),D.useEffect(()=>{g.current&&(_(),setTimeout(v))},[o]),D.useEffect(()=>(v(),()=>_()),[]),f.jsx("canvas",{ref:m,role:"img",height:n,width:r,...p,children:u})}const xJ=D.forwardRef(vJ);function E_(t,e){return Lp.register(e),D.forwardRef((n,r)=>f.jsx(xJ,{...n,ref:r,type:t}))}const _J=E_("line",ch),wJ=E_("bar",lh),bJ=E_("doughnut",Ol);Lp.register(V0,F0,hh,Bs,fh,Vl,ZX,aJ,XX,HX);const TJ=()=>{const{user:t,gameStats:e}=fe(),{tasks:n,categories:r}=bi(),[s,i]=D.useState("7days");if(!t||!e)return null;const o=s==="7days"?7:s==="30days"?30:90,a=Zq(new Date,o-1),l=YH({start:a,end:new Date}),c=l.map(A=>n.filter(M=>M.status==="completed"&&M.completedAt&&u_(new Date(M.completedAt),A)).length),u=l.map((A,M)=>Math.floor(Math.random()*500)+100),h=r.map(A=>({name:A.name,count:n.filter(M=>M.categoryId===A.id).length,color:A.color})),p={high:n.filter(A=>A.priority==="high").length,medium:n.filter(A=>A.priority==="medium").length,low:n.filter(A=>A.priority==="low").length},m=n.filter(A=>A.status==="completed").length,g=n.length,v=g>0?Math.round(m/g*100):0,_=Math.round(m/o),w={labels:l.map(A=>vf(A,"dd/MM")),datasets:[{label:"Tches compltes",data:c,borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4}]},x={labels:l.map(A=>vf(A,"dd/MM")),datasets:[{label:"XP gagne",data:u,backgroundColor:"rgba(168, 85, 247, 0.8)",borderRadius:4}]},T={labels:h.map(A=>A.name),datasets:[{data:h.map(A=>A.count),backgroundColor:h.map(A=>A.color),borderWidth:0}]},C={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[f.jsx(QR,{className:"w-7 h-7 text-primary-500"}),"Statistiques"]}),f.jsx("p",{className:"text-gray-500 mt-1",children:"Suivez votre progression et vos performances"})]}),f.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[{value:"7days",label:"7 jours"},{value:"30days",label:"30 jours"},{value:"90days",label:"90 jours"}].map(({value:A,label:M})=>f.jsx("button",{onClick:()=>i(A),className:ne("px-4 py-2 rounded-md text-sm font-medium transition-colors",s===A?"bg-white dark:bg-gray-700 shadow-sm":"text-gray-500"),children:M},A))})]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsx(lt,{icon:f.jsx(Cr,{className:"w-6 h-6"}),label:"Total compltes",value:Nn(m),color:"primary"}),f.jsx(lt,{icon:f.jsx(fr,{className:"w-6 h-6"}),label:"Taux de compltion",value:`${v}%`,color:"green"}),f.jsx(lt,{icon:f.jsx(E0,{className:"w-6 h-6"}),label:"Moyenne par jour",value:_,color:"purple"}),f.jsx(lt,{icon:f.jsx(ic,{className:"w-6 h-6"}),label:"Plus long streak",value:`${e.longestStreak} jours`,color:"orange"})]}),f.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[f.jsxs(Ae,{className:"p-5",children:[f.jsx("div",{className:"flex items-center justify-between mb-4",children:f.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[f.jsx(E0,{className:"w-5 h-5 text-primary-500"}),"Tches compltes"]})}),f.jsx("div",{className:"h-64",children:f.jsx(_J,{data:w,options:C})})]}),f.jsxs(Ae,{className:"p-5",children:[f.jsx("div",{className:"flex items-center justify-between mb-4",children:f.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[f.jsx(Rp,{className:"w-5 h-5 text-purple-500"}),"XP gagne"]})}),f.jsx("div",{className:"h-64",children:f.jsx(wJ,{data:x,options:C})})]}),f.jsxs(Ae,{className:"p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(Ip,{className:"w-5 h-5 text-primary-500"}),"Rpartition par catgorie"]}),f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx("div",{className:"w-48 h-48",children:f.jsx(bJ,{data:T,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},cutout:"60%"}})}),f.jsx("div",{className:"flex-1 space-y-2",children:h.map(A=>f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:A.color}}),f.jsx("span",{className:"text-sm",children:A.name})]}),f.jsx("span",{className:"text-sm font-medium",children:A.count})]},A.name))})]})]}),f.jsxs(Ae,{className:"p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(fr,{className:"w-5 h-5 text-primary-500"}),"Rpartition par priorit"]}),f.jsx("div",{className:"space-y-4",children:[{label:"Haute",value:p.high,color:"bg-red-500"},{label:"Moyenne",value:p.medium,color:"bg-yellow-500"},{label:"Basse",value:p.low,color:"bg-green-500"}].map(({label:A,value:M,color:S})=>f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("span",{className:"text-sm",children:A}),f.jsx("span",{className:"text-sm font-medium",children:M})]}),f.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:f.jsx("div",{className:ne("h-full rounded-full",S),style:{width:`${g>0?M/g*100:0}%`}})})]},A))})]})]}),f.jsxs(Ae,{className:"p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(Tr,{className:"w-5 h-5 text-yellow-500"}),"Statistiques de jeu"]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[f.jsx("div",{className:"text-3xl font-bold gradient-text",children:e.level}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Niveau actuel"})]}),f.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[f.jsx("div",{className:"text-3xl font-bold text-purple-500",children:Nn(e.totalXP)}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"XP Total"})]}),f.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[f.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:e.achievementsUnlocked.length}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Achievements"})]}),f.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[f.jsx("div",{className:"text-3xl font-bold text-orange-500",children:Nn(e.coins)}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Pices"})]})]})]})]})},kJ=()=>{var _;const{user:t,gameStats:e,updateProfile:n,updateAvatar:r}=fe(),{tasks:s}=bi(),[i,o]=D.useState(!1),[a,l]=D.useState(!1),[c,u]=D.useState({username:(t==null?void 0:t.username)||""});if(!t||!e)return null;const h=s.filter(w=>w.status==="completed").length,p=dr.filter(w=>e.achievementsUnlocked.includes(w.id)),m=async()=>{await n(c),o(!1)},g=async w=>{var x;await r({icon:w,type:"default",baseColor:((x=t.avatar)==null?void 0:x.baseColor)||"#6366f1"}),l(!1)},v=p.slice(-4).reverse();return f.jsxs("div",{className:"space-y-6",children:[f.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-teal-500 via-cyan-500 to-blue-500 p-6 text-white",children:[f.jsx("div",{className:"absolute inset-0 bg-black/10"}),f.jsx("div",{className:"absolute -right-16 -top-16 w-48 h-48 bg-white/10 rounded-full"}),f.jsx("div",{className:"absolute -right-8 -bottom-8 w-32 h-32 bg-white/10 rounded-full"}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[f.jsxs("div",{className:"relative group",children:[f.jsx(i_,{config:t.avatar,size:"xl",showLevel:!0,level:e.level}),f.jsx("button",{onClick:()=>l(!0),className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(V7,{className:"w-8 h-8"})})]}),f.jsx("div",{className:"flex-1 text-center sm:text-left",children:i?f.jsxs("div",{className:"space-y-3",children:[f.jsx(js,{value:c.username,onChange:w=>u({...c,username:w.target.value}),className:"bg-white/20 border-white/30 text-white placeholder-white/50",placeholder:"Nom d'utilisateur"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(dt,{variant:"secondary",size:"sm",onClick:()=>o(!1),children:"Annuler"}),f.jsxs(dt,{variant:"primary",size:"sm",onClick:m,children:[f.jsx(tH,{className:"w-4 h-4 mr-1"}),"Sauvegarder"]})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2",children:[f.jsx("h1",{className:"text-2xl font-bold",children:t.username}),e.level>=50&&f.jsx(XR,{className:"w-6 h-6 text-yellow-400"}),f.jsx("button",{onClick:()=>o(!0),className:"p-1 hover:bg-white/20 rounded",children:f.jsx(J7,{className:"w-4 h-4"})})]}),f.jsx("p",{className:"text-white/80 mt-1",children:s_(e.level)}),f.jsxs("p",{className:"text-white/60 text-sm mt-2 flex items-center justify-center sm:justify-start gap-1",children:[f.jsx(Ip,{className:"w-4 h-4"}),"Membre depuis ",vf(new Date(t.createdAt),"MMMM yyyy",{locale:hN})]})]})}),f.jsxs("div",{className:"flex gap-4 sm:gap-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:e.level}),f.jsx("p",{className:"text-sm text-white/70",children:"Niveau"})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-2xl font-bold flex items-center justify-center gap-1",children:[f.jsx(ic,{className:"w-5 h-5 text-orange-300"}),e.currentStreak]}),f.jsx("p",{className:"text-sm text-white/70",children:"Streak"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:p.length}),f.jsx("p",{className:"text-sm text-white/70",children:"Trophes"})]})]})]}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[f.jsxs("span",{children:["Niveau ",e.level]}),f.jsxs("span",{children:[Nn(e.currentXP)," / ",Nn(e.xpToNextLevel)," XP"]})]}),f.jsx("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden",children:f.jsx(de.div,{initial:{width:0},animate:{width:`${e.currentXP/e.xpToNextLevel*100}%`},className:"h-full bg-white rounded-full",transition:{duration:1}})})]})]})]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsx(lt,{icon:f.jsx(Rp,{className:"w-6 h-6"}),label:"XP Total",value:Nn(e.totalXP),color:"primary"}),f.jsx(lt,{icon:f.jsx(Cr,{className:"w-6 h-6"}),label:"Tches compltes",value:h,color:"green"}),f.jsx(lt,{icon:f.jsx(ic,{className:"w-6 h-6"}),label:"Plus long streak",value:`${e.longestStreak} jours`,color:"orange"}),f.jsx(lt,{icon:f.jsx(Tr,{className:"w-6 h-6"}),label:"Achievements",value:`${p.length}/${dr.length}`,color:"yellow"})]}),f.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[f.jsxs(Ae,{className:"p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(Tr,{className:"w-5 h-5 text-yellow-500"}),"Achievements rcents"]}),v.length>0?f.jsx("div",{className:"space-y-3",children:v.map(w=>f.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[f.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center text-xl",children:w.icon}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"font-medium",children:w.name}),f.jsx("p",{className:"text-sm text-gray-500",children:w.description})]}),f.jsxs("span",{className:"text-sm text-primary-500",children:["+",w.xpReward," XP"]})]},w.id))}):f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx(Tr,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),f.jsx("p",{children:"Aucun achievement dbloqu"})]})]}),f.jsxs(Ae,{className:"p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(r_,{className:"w-5 h-5 text-primary-500"}),"Statistiques de jeu"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pices"}),f.jsxs("span",{className:"font-medium flex items-center gap-1",children:[" ",Nn(e.coins)]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Gemmes"}),f.jsxs("span",{className:"font-medium flex items-center gap-1",children:[" ",Nn(e.gems)]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Qutes compltes"}),f.jsx("span",{className:"font-medium",children:e.questsCompleted||0})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Streak actuel"}),f.jsxs("span",{className:"font-medium flex items-center gap-1",children:[f.jsx(ic,{className:"w-4 h-4 text-orange-500"}),e.currentStreak," jours"]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Meilleur streak"}),f.jsxs("span",{className:"font-medium",children:[e.longestStreak," jours"]})]})]})]})]}),f.jsx(ac,{isOpen:a,onClose:()=>l(!1),title:"Personnaliser l'avatar",size:"lg",children:f.jsx(hH,{selected:((_=t.avatar)==null?void 0:_.icon)||"",onSelect:g})})]})},SJ=[{name:"Teal",value:"teal",class:"bg-teal-500"},{name:"Blue",value:"blue",class:"bg-blue-500"},{name:"Purple",value:"purple",class:"bg-purple-500"},{name:"Green",value:"green",class:"bg-emerald-500"},{name:"Orange",value:"orange",class:"bg-orange-500"}],EJ=()=>{const{user:t,signOut:e,deleteAccount:n,updateSettings:r}=fe(),{exportData:s,importData:i,clearAllData:o}=bi(),{theme:a,setTheme:l,soundEnabled:c,toggleSound:u,notificationsEnabled:h,toggleNotifications:p}=ir(),[m,g]=D.useState(!1),[v,_]=D.useState(!1),[w,x]=D.useState(!1),[T,C]=D.useState("teal"),[A,M]=D.useState(""),S=D.useRef(null);if(!t)return null;const k=$=>{l($),Kt.success(`Thme ${$==="dark"?"sombre":$==="light"?"clair":"systme"} activ`)},E=()=>{p(),Kt.success(h?"Notifications dsactives":"Notifications actives")},I=()=>{u(),Kt.success(c?"Sons dsactivs":"Sons activs")},N=()=>{try{const $=s(),X=new Blob([JSON.stringify($,null,2)],{type:"application/json"}),U=URL.createObjectURL(X),q=document.createElement("a");q.href=U,q.download=`questify-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(U),Kt.success("Donnes exportes avec succs !")}catch{Kt.error("Erreur lors de l'export des donnes")}},j=$=>{var q;const X=(q=$.target.files)==null?void 0:q[0];if(!X)return;const U=new FileReader;U.onload=te=>{var Z;try{const le=(Z=te.target)==null?void 0:Z.result,ye=JSON.parse(le);ye.tasks||ye.categories?(i(ye),Kt.success("Donnes importes avec succs !")):Kt.error("Format de fichier invalide")}catch{Kt.error("Erreur lors de l'import des donnes")}},U.readAsText(X),S.current&&(S.current.value="")},R=()=>{o(),_(!1),Kt.success("Toutes les donnes ont t supprimes")},z=async()=>{try{await e(),Kt.success("Dconnexion russie")}catch{Kt.error("Erreur lors de la dconnexion")}},H=async()=>{if(A!=="SUPPRIMER"){Kt.error("Veuillez taper SUPPRIMER pour confirmer");return}try{await n(),Kt.success("Compte supprim")}catch{Kt.error("Erreur lors de la suppression du compte")}};return f.jsxs("div",{className:"max-w-2xl mx-auto space-y-6 pb-8",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[f.jsx("div",{className:"p-3 rounded-2xl bg-gradient-to-br from-teal-500 to-cyan-500 text-white shadow-lg",children:f.jsx(eN,{className:"w-6 h-6"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Paramtres"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Personnalisez votre exprience"})]})]}),f.jsxs(Ae,{className:"overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:f.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(X7,{className:"w-5 h-5 text-teal-500"}),"Apparence"]})}),f.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[f.jsxs("div",{className:"p-4 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[a==="dark"?f.jsx(Q7,{className:"w-5 h-5 text-gray-500"}):a==="light"?f.jsx(nH,{className:"w-5 h-5 text-yellow-500"}):f.jsx(K7,{className:"w-5 h-5 text-gray-500"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Thme"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisissez votre thme prfr"})]})]}),f.jsxs("select",{value:a,onChange:$=>k($.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all cursor-pointer",children:[f.jsx("option",{value:"light",children:"Clair"}),f.jsx("option",{value:"dark",children:"Sombre"}),f.jsx("option",{value:"system",children:"Systme"})]})]}),f.jsxs("div",{className:"p-4 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Ir,{className:"w-5 h-5 text-gray-500"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Couleur d'accent"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Personnalisez la couleur principale"})]})]}),f.jsx("div",{className:"flex gap-2",children:SJ.map($=>f.jsx("button",{onClick:()=>{C($.value),Kt.success(`Couleur ${$.name} slectionne`)},className:`w-8 h-8 rounded-full ${$.class} transition-all hover:scale-110 ${T===$.value?"ring-2 ring-offset-2 ring-gray-400 dark:ring-offset-gray-800":""}`,title:$.name},$.value))})]})]})]}),f.jsxs(Ae,{className:"overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:f.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(Pk,{className:"w-5 h-5 text-teal-500"}),"Notifications & Sons"]})}),f.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[f.jsxs("div",{className:"p-4 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[h?f.jsx(Pk,{className:"w-5 h-5 text-teal-500"}):f.jsx(O7,{className:"w-5 h-5 text-gray-400"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Notifications"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Recevoir des rappels et alertes"})]})]}),f.jsx("button",{onClick:E,className:`relative w-14 h-8 rounded-full transition-colors duration-200 ${h?"bg-teal-500":"bg-gray-300 dark:bg-gray-600"}`,children:f.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md transition-transform duration-200 ${h?"translate-x-6":"translate-x-0"}`})})]}),f.jsxs("div",{className:"p-4 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[c?f.jsx(sH,{className:"w-5 h-5 text-teal-500"}):f.jsx(iH,{className:"w-5 h-5 text-gray-400"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Effets sonores"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sons lors des actions"})]})]}),f.jsx("button",{onClick:I,className:`relative w-14 h-8 rounded-full transition-colors duration-200 ${c?"bg-teal-500":"bg-gray-300 dark:bg-gray-600"}`,children:f.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md transition-transform duration-200 ${c?"translate-x-6":"translate-x-0"}`})})]})]})]}),f.jsxs(Ae,{className:"overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:f.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(Ik,{className:"w-5 h-5 text-teal-500"}),"Donnes"]})}),f.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[f.jsxs("button",{onClick:N,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Ik,{className:"w-5 h-5 text-gray-500"}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Exporter les donnes"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tlcharger une sauvegarde de vos donnes"})]})]}),f.jsx(Yn,{className:"w-5 h-5 text-gray-400"})]}),f.jsxs("label",{className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(rH,{className:"w-5 h-5 text-gray-500"}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Importer des donnes"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Restaurer depuis une sauvegarde"})]})]}),f.jsx("span",{className:"text-sm text-teal-500 font-medium",children:"Choisir un fichier"}),f.jsx("input",{ref:S,type:"file",accept:".json",onChange:j,className:"hidden"})]}),f.jsxs("button",{onClick:()=>_(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors group",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(ff,{className:"w-5 h-5 text-red-500"}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-red-600 dark:text-red-400",children:"Effacer les donnes"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Supprimer toutes les tches et catgories"})]})]}),f.jsx(Yn,{className:"w-5 h-5 text-red-400"})]})]})]}),f.jsxs(Ae,{className:"overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:f.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(pg,{className:"w-5 h-5 text-teal-500"}),"Compte"]})}),f.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[f.jsxs("button",{onClick:()=>x(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(pg,{className:"w-5 h-5 text-gray-500"}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Scurit"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Grer les options de scurit"})]})]}),f.jsx(Yn,{className:"w-5 h-5 text-gray-400"})]}),f.jsxs("button",{onClick:z,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(JR,{className:"w-5 h-5 text-gray-500"}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Se dconnecter"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Vous serez dconnect de ce compte"})]})]}),f.jsx(Yn,{className:"w-5 h-5 text-gray-400"})]}),f.jsxs("button",{onClick:()=>g(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Ak,{className:"w-5 h-5 text-red-500"}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-red-600 dark:text-red-400",children:"Supprimer le compte"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cette action est irrversible"})]})]}),f.jsx(Yn,{className:"w-5 h-5 text-red-400"})]})]})]}),f.jsxs(Ae,{className:"overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:f.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(H7,{className:"w-5 h-5 text-teal-500"})," propos"]})}),f.jsx("div",{className:"p-4 flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-500 flex items-center justify-center",children:f.jsx(Ir,{className:"w-5 h-5 text-white"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Version"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Questify v1.0.0"})]})]})})]}),f.jsx(ac,{isOpen:v,onClose:()=>_(!1),title:"Effacer toutes les donnes",size:"sm",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl",children:[f.jsx(Ek,{className:"w-6 h-6 text-yellow-500 flex-shrink-0"}),f.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Cette action supprimera toutes vos tches et catgories. Cette action est irrversible."})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(dt,{variant:"secondary",className:"flex-1",onClick:()=>_(!1),children:"Annuler"}),f.jsxs(dt,{variant:"danger",className:"flex-1",onClick:R,children:[f.jsx(ff,{className:"w-4 h-4 mr-2"}),"Effacer tout"]})]})]})}),f.jsx(ac,{isOpen:m,onClose:()=>{g(!1),M("")},title:"Supprimer le compte",size:"sm",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[f.jsx(Ek,{className:"w-6 h-6 text-red-500 flex-shrink-0"}),f.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Cette action est permanente et irrversible. Toutes vos donnes seront supprimes."})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Tapez ",f.jsx("span",{className:"font-bold text-red-500",children:"SUPPRIMER"})," pour confirmer"]}),f.jsx("input",{type:"text",value:A,onChange:$=>M($.target.value),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"SUPPRIMER"})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(dt,{variant:"secondary",className:"flex-1",onClick:()=>{g(!1),M("")},children:"Annuler"}),f.jsxs(dt,{variant:"danger",className:"flex-1",onClick:H,disabled:A!=="SUPPRIMER",children:[f.jsx(Ak,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})}),f.jsx(ac,{isOpen:w,onClose:()=>x(!1),title:"Scurit",size:"md",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx(YR,{className:"w-5 h-5 text-green-500"}),f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Connexion scurise"})]}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 ml-8",children:"Votre compte est protg par l'authentification Google."})]}),f.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx(pg,{className:"w-5 h-5 text-teal-500"}),f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Donnes chiffres"})]}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 ml-8",children:"Vos donnes sont stockes de manire scurise dans Firebase."})]}),f.jsx(dt,{variant:"secondary",className:"w-full",onClick:()=>x(!1),children:"Fermer"})]})})]})},PJ=({children:t})=>{const{user:e,isLoading:n}=fe();return n?f.jsx(aD,{}):e?f.jsx(f.Fragment,{children:t}):f.jsx(Py,{to:"/auth",replace:!0})},aD=()=>f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-900 via-cyan-900 to-gray-900",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-teal-500 to-cyan-500 flex items-center justify-center mx-auto mb-4 animate-pulse",children:f.jsx(Ir,{className:"w-10 h-10 text-white"})}),f.jsx("h1",{className:"text-2xl font-bold text-white",children:"Questify"}),f.jsx("p",{className:"text-gray-400 mt-2",children:"Chargement..."})]})});function CJ(){const{initializeAuth:t,user:e}=fe(),{theme:n,setIsMobile:r}=ir(),{loadQuests:s}=Tu(),{loadTasks:i,loadCategories:o}=bi(),[a,l]=D.useState(!1);return D.useEffect(()=>{(async()=>{await t(),l(!0)})()},[t]),D.useEffect(()=>{e&&(async()=>(await o(e.id),await i(e.id),await s(e.id)))()},[e,o,i,s]),D.useEffect(()=>{const c=document.documentElement;if(n==="system"){const u=window.matchMedia("(prefers-color-scheme: dark)").matches;c.classList.toggle("dark",u)}else c.classList.toggle("dark",n==="dark")},[n]),D.useEffect(()=>{const c=()=>{r(window.innerWidth<1024)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[r]),D.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{console.log("SW registration failed")})})},[]),a?f.jsxs(fL,{children:[f.jsxs(iL,{children:[f.jsx(Hn,{path:"/auth",element:e?f.jsx(Py,{to:"/",replace:!0}):f.jsx(dH,{})}),f.jsxs(Hn,{element:f.jsx(PJ,{children:f.jsx(OH,{})}),children:[f.jsx(Hn,{path:"/",element:f.jsx(CG,{})}),f.jsx(Hn,{path:"/tasks",element:f.jsx(IG,{})}),f.jsx(Hn,{path:"/quests",element:f.jsx(AG,{})}),f.jsx(Hn,{path:"/achievements",element:f.jsx(MG,{})}),f.jsx(Hn,{path:"/stats",element:f.jsx(TJ,{})}),f.jsx(Hn,{path:"/profile",element:f.jsx(kJ,{})}),f.jsx(Hn,{path:"/settings",element:f.jsx(EJ,{})})]}),f.jsx(Hn,{path:"*",element:f.jsx(Py,{to:"/",replace:!0})})]}),f.jsx(o5,{position:"top-right",toastOptions:{duration:3e3,style:{background:"var(--toast-bg)",color:"var(--toast-color)",borderRadius:"12px",padding:"12px 16px"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}):f.jsx(aD,{})}Ng.createRoot(document.getElementById("root")).render(f.jsx(hn.StrictMode,{children:f.jsx(CJ,{})}));
