var EN=Object.defineProperty;var PN=(t,e,n)=>e in t?EN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var K=(t,e,n)=>PN(t,typeof e!="symbol"?e+"":e,n);function IN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Wk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hk={exports:{}},bf={},qk={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jc=Symbol.for("react.element"),CN=Symbol.for("react.portal"),AN=Symbol.for("react.fragment"),RN=Symbol.for("react.strict_mode"),DN=Symbol.for("react.profiler"),NN=Symbol.for("react.provider"),MN=Symbol.for("react.context"),ON=Symbol.for("react.forward_ref"),jN=Symbol.for("react.suspense"),LN=Symbol.for("react.memo"),VN=Symbol.for("react.lazy"),yx=Symbol.iterator;function FN(t){return t===null||typeof t!="object"?null:(t=yx&&t[yx]||t["@@iterator"],typeof t=="function"?t:null)}var Gk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kk=Object.assign,Qk={};function Da(t,e,n){this.props=t,this.context=e,this.refs=Qk,this.updater=n||Gk}Da.prototype.isReactComponent={};Da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yk(){}Yk.prototype=Da.prototype;function R0(t,e,n){this.props=t,this.context=e,this.refs=Qk,this.updater=n||Gk}var D0=R0.prototype=new Yk;D0.constructor=R0;Kk(D0,Da.prototype);D0.isPureReactComponent=!0;var vx=Array.isArray,Xk=Object.prototype.hasOwnProperty,N0={current:null},Jk={key:!0,ref:!0,__self:!0,__source:!0};function Zk(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Xk.call(e,r)&&!Jk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Jc,type:t,key:s,ref:o,props:i,_owner:N0.current}}function UN(t,e){return{$$typeof:Jc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function M0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jc}function BN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _x=/\/+/g;function nm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BN(""+t.key):e.toString(36)}function Nd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Jc:case CN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+nm(o,0):r,vx(i)?(n="",t!=null&&(n=t.replace(_x,"$&/")+"/"),Nd(i,e,n,"",function(c){return c})):i!=null&&(M0(i)&&(i=UN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_x,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",vx(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+nm(s,a);o+=Nd(s,e,n,l,i)}else if(l=FN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+nm(s,a++),o+=Nd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $u(t,e,n){if(t==null)return t;var r=[],i=0;return Nd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function zN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zt={current:null},Md={transition:null},$N={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:Md,ReactCurrentOwner:N0};function eE(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:$u,forEach:function(t,e,n){$u(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $u(t,function(){e++}),e},toArray:function(t){return $u(t,function(e){return e})||[]},only:function(t){if(!M0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Da;de.Fragment=AN;de.Profiler=DN;de.PureComponent=R0;de.StrictMode=RN;de.Suspense=jN;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$N;de.act=eE;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Kk({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=N0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Xk.call(e,l)&&!Jk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Jc,type:t.type,key:i,ref:s,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:MN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NN,_context:t},t.Consumer=t};de.createElement=Zk;de.createFactory=function(t){var e=Zk.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:ON,render:t}};de.isValidElement=M0;de.lazy=function(t){return{$$typeof:VN,_payload:{_status:-1,_result:t},_init:zN}};de.memo=function(t,e){return{$$typeof:LN,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Md.transition;Md.transition={};try{t()}finally{Md.transition=e}};de.unstable_act=eE;de.useCallback=function(t,e){return Zt.current.useCallback(t,e)};de.useContext=function(t){return Zt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Zt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Zt.current.useEffect(t,e)};de.useId=function(){return Zt.current.useId()};de.useImperativeHandle=function(t,e,n){return Zt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Zt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Zt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Zt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Zt.current.useReducer(t,e,n)};de.useRef=function(t){return Zt.current.useRef(t)};de.useState=function(t){return Zt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Zt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Zt.current.useTransition()};de.version="18.3.1";qk.exports=de;var N=qk.exports;const dn=Wk(N),WN=IN({__proto__:null,default:dn},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HN=N,qN=Symbol.for("react.element"),GN=Symbol.for("react.fragment"),KN=Object.prototype.hasOwnProperty,QN=HN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YN={key:!0,ref:!0,__self:!0,__source:!0};function tE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KN.call(e,r)&&!YN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qN,type:t,key:s,ref:o,props:i,_owner:QN.current}}bf.Fragment=GN;bf.jsx=tE;bf.jsxs=tE;Hk.exports=bf;var p=Hk.exports,bg={},nE={exports:{}},bn={},rE={exports:{}},iE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,W){var Z=B.length;B.push(W);e:for(;0<Z;){var J=Z-1>>>1,le=B[J];if(0<i(le,W))B[J]=W,B[Z]=le,Z=J;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var W=B[0],Z=B.pop();if(Z!==W){B[0]=Z;e:for(var J=0,le=B.length,be=le>>>1;J<be;){var tt=2*(J+1)-1,pt=B[tt],Fe=tt+1,Sn=B[Fe];if(0>i(pt,Z))Fe<le&&0>i(Sn,pt)?(B[J]=Sn,B[Fe]=Z,J=Fe):(B[J]=pt,B[tt]=Z,J=tt);else if(Fe<le&&0>i(Sn,Z))B[J]=Sn,B[Fe]=Z,J=Fe;else break e}}return W}function i(B,W){var Z=B.sortIndex-W.sortIndex;return Z!==0?Z:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(B){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=B)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function P(B){if(v=!1,T(B),!g)if(n(l)!==null)g=!0,Q(A);else{var W=n(c);W!==null&&se(P,W.startTime-B)}}function A(B,W){g=!1,v&&(v=!1,w(S),S=-1),m=!0;var Z=f;try{for(T(W),h=n(l);h!==null&&(!(h.expirationTime>W)||B&&!D());){var J=h.callback;if(typeof J=="function"){h.callback=null,f=h.priorityLevel;var le=J(h.expirationTime<=W);W=t.unstable_now(),typeof le=="function"?h.callback=le:h===n(l)&&r(l),T(W)}else r(l);h=n(l)}if(h!==null)var be=!0;else{var tt=n(c);tt!==null&&se(P,tt.startTime-W),be=!1}return be}finally{h=null,f=Z,m=!1}}var O=!1,E=null,S=-1,k=5,C=-1;function D(){return!(t.unstable_now()-C<k)}function M(){if(E!==null){var B=t.unstable_now();C=B;var W=!0;try{W=E(!0,B)}finally{W?R():(O=!1,E=null)}}else O=!1}var R;if(typeof _=="function")R=function(){_(M)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,q=ee.port2;ee.port1.onmessage=M,R=function(){q.postMessage(null)}}else R=function(){x(M,0)};function Q(B){E=B,O||(O=!0,R())}function se(B,W){S=x(function(){B(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,Q(A))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var Z=f;f=W;try{return B()}finally{f=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=f;f=B;try{return W()}finally{f=Z}},t.unstable_scheduleCallback=function(B,W,Z){var J=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?J+Z:J):Z=J,B){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=Z+le,B={id:u++,callback:W,priorityLevel:B,startTime:Z,expirationTime:le,sortIndex:-1},Z>J?(B.sortIndex=Z,e(c,B),n(l)===null&&B===n(c)&&(v?(w(S),S=-1):v=!0,se(P,Z-J))):(B.sortIndex=le,e(l,B),g||m||(g=!0,Q(A))),B},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(B){var W=f;return function(){var Z=f;f=W;try{return B.apply(this,arguments)}finally{f=Z}}}})(iE);rE.exports=iE;var XN=rE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JN=N,wn=XN;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sE=new Set,lc={};function ho(t,e){ha(t,e),ha(t+"Capture",e)}function ha(t,e){for(lc[t]=e,t=0;t<e.length;t++)sE.add(e[t])}var Yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tg=Object.prototype.hasOwnProperty,ZN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wx={},xx={};function eM(t){return Tg.call(xx,t)?!0:Tg.call(wx,t)?!1:ZN.test(t)?xx[t]=!0:(wx[t]=!0,!1)}function tM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nM(t,e,n,r){if(e===null||typeof e>"u"||tM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var O0=/[\-:]([a-z])/g;function j0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(O0,j0);Pt[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(O0,j0);Pt[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(O0,j0);Pt[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function L0(t,e,n,r){var i=Pt.hasOwnProperty(e)?Pt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nM(e,n,i,r)&&(n=null),r||i===null?eM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var li=JN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wu=Symbol.for("react.element"),Oo=Symbol.for("react.portal"),jo=Symbol.for("react.fragment"),V0=Symbol.for("react.strict_mode"),Sg=Symbol.for("react.profiler"),oE=Symbol.for("react.provider"),aE=Symbol.for("react.context"),F0=Symbol.for("react.forward_ref"),kg=Symbol.for("react.suspense"),Eg=Symbol.for("react.suspense_list"),U0=Symbol.for("react.memo"),wi=Symbol.for("react.lazy"),lE=Symbol.for("react.offscreen"),bx=Symbol.iterator;function il(t){return t===null||typeof t!="object"?null:(t=bx&&t[bx]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,rm;function wl(t){if(rm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rm=e&&e[1]||""}return`
`+rm+t}var im=!1;function sm(t,e){if(!t||im)return"";im=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{im=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wl(t):""}function rM(t){switch(t.tag){case 5:return wl(t.type);case 16:return wl("Lazy");case 13:return wl("Suspense");case 19:return wl("SuspenseList");case 0:case 2:case 15:return t=sm(t.type,!1),t;case 11:return t=sm(t.type.render,!1),t;case 1:return t=sm(t.type,!0),t;default:return""}}function Pg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jo:return"Fragment";case Oo:return"Portal";case Sg:return"Profiler";case V0:return"StrictMode";case kg:return"Suspense";case Eg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case aE:return(t.displayName||"Context")+".Consumer";case oE:return(t._context.displayName||"Context")+".Provider";case F0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U0:return e=t.displayName||null,e!==null?e:Pg(t.type)||"Memo";case wi:e=t._payload,t=t._init;try{return Pg(t(e))}catch{}}return null}function iM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pg(e);case 8:return e===V0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sM(t){var e=cE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hu(t){t._valueTracker||(t._valueTracker=sM(t))}function uE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ch(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ig(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=es(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dE(t,e){e=e.checked,e!=null&&L0(t,"checked",e,!1)}function Cg(t,e){dE(t,e);var n=es(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ag(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ag(t,e.type,es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ag(t,e,n){(e!=="number"||ch(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xl=Array.isArray;function Jo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+es(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(xl(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:es(n)}}function hE(t,e){var n=es(e.value),r=es(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ex(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qu,pE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qu=qu||document.createElement("div"),qu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oM=["Webkit","ms","Moz","O"];Object.keys(jl).forEach(function(t){oM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jl[e]=jl[t]})});function mE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||jl.hasOwnProperty(t)&&jl[t]?(""+e).trim():e+"px"}function gE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var aM=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ng(t,e){if(e){if(aM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Mg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Og=null;function B0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jg=null,Zo=null,ea=null;function Px(t){if(t=tu(t)){if(typeof jg!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Pf(e),jg(t.stateNode,t.type,e))}}function yE(t){Zo?ea?ea.push(t):ea=[t]:Zo=t}function vE(){if(Zo){var t=Zo,e=ea;if(ea=Zo=null,Px(t),e)for(t=0;t<e.length;t++)Px(e[t])}}function _E(t,e){return t(e)}function wE(){}var om=!1;function xE(t,e,n){if(om)return t(e,n);om=!0;try{return _E(t,e,n)}finally{om=!1,(Zo!==null||ea!==null)&&(wE(),vE())}}function uc(t,e){var n=t.stateNode;if(n===null)return null;var r=Pf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Lg=!1;if(Yr)try{var sl={};Object.defineProperty(sl,"passive",{get:function(){Lg=!0}}),window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch{Lg=!1}function lM(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Ll=!1,uh=null,dh=!1,Vg=null,cM={onError:function(t){Ll=!0,uh=t}};function uM(t,e,n,r,i,s,o,a,l){Ll=!1,uh=null,lM.apply(cM,arguments)}function dM(t,e,n,r,i,s,o,a,l){if(uM.apply(this,arguments),Ll){if(Ll){var c=uh;Ll=!1,uh=null}else throw Error(U(198));dh||(dh=!0,Vg=c)}}function fo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ix(t){if(fo(t)!==t)throw Error(U(188))}function hM(t){var e=t.alternate;if(!e){if(e=fo(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ix(i),t;if(s===r)return Ix(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function TE(t){return t=hM(t),t!==null?SE(t):null}function SE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=SE(t);if(e!==null)return e;t=t.sibling}return null}var kE=wn.unstable_scheduleCallback,Cx=wn.unstable_cancelCallback,fM=wn.unstable_shouldYield,pM=wn.unstable_requestPaint,Xe=wn.unstable_now,mM=wn.unstable_getCurrentPriorityLevel,z0=wn.unstable_ImmediatePriority,EE=wn.unstable_UserBlockingPriority,hh=wn.unstable_NormalPriority,gM=wn.unstable_LowPriority,PE=wn.unstable_IdlePriority,Tf=null,fr=null;function yM(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(Tf,t,void 0,(t.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:wM,vM=Math.log,_M=Math.LN2;function wM(t){return t>>>=0,t===0?32:31-(vM(t)/_M|0)|0}var Gu=64,Ku=4194304;function bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=bl(a):(s&=o,s!==0&&(r=bl(s)))}else o=n&~i,o!==0?r=bl(o):s!==0&&(r=bl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yn(e),i=1<<n,r|=t[n],e&=~i;return r}function xM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Yn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=xM(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Fg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function IE(){var t=Gu;return Gu<<=1,!(Gu&4194240)&&(Gu=64),t}function am(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yn(e),t[e]=n}function TM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Yn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function $0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Pe=0;function CE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var AE,W0,RE,DE,NE,Ug=!1,Qu=[],Fi=null,Ui=null,Bi=null,dc=new Map,hc=new Map,Si=[],SM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ax(t,e){switch(t){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Bi=null;break;case"pointerover":case"pointerout":dc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(e.pointerId)}}function ol(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=tu(e),e!==null&&W0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kM(t,e,n,r,i){switch(e){case"focusin":return Fi=ol(Fi,t,e,n,r,i),!0;case"dragenter":return Ui=ol(Ui,t,e,n,r,i),!0;case"mouseover":return Bi=ol(Bi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return dc.set(s,ol(dc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,hc.set(s,ol(hc.get(s)||null,t,e,n,r,i)),!0}return!1}function ME(t){var e=js(t.target);if(e!==null){var n=fo(e);if(n!==null){if(e=n.tag,e===13){if(e=bE(n),e!==null){t.blockedOn=e,NE(t.priority,function(){RE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Od(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Og=r,n.target.dispatchEvent(r),Og=null}else return e=tu(n),e!==null&&W0(e),t.blockedOn=n,!1;e.shift()}return!0}function Rx(t,e,n){Od(t)&&n.delete(e)}function EM(){Ug=!1,Fi!==null&&Od(Fi)&&(Fi=null),Ui!==null&&Od(Ui)&&(Ui=null),Bi!==null&&Od(Bi)&&(Bi=null),dc.forEach(Rx),hc.forEach(Rx)}function al(t,e){t.blockedOn===e&&(t.blockedOn=null,Ug||(Ug=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,EM)))}function fc(t){function e(i){return al(i,t)}if(0<Qu.length){al(Qu[0],t);for(var n=1;n<Qu.length;n++){var r=Qu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fi!==null&&al(Fi,t),Ui!==null&&al(Ui,t),Bi!==null&&al(Bi,t),dc.forEach(e),hc.forEach(e),n=0;n<Si.length;n++)r=Si[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Si.length&&(n=Si[0],n.blockedOn===null);)ME(n),n.blockedOn===null&&Si.shift()}var ta=li.ReactCurrentBatchConfig,ph=!0;function PM(t,e,n,r){var i=Pe,s=ta.transition;ta.transition=null;try{Pe=1,H0(t,e,n,r)}finally{Pe=i,ta.transition=s}}function IM(t,e,n,r){var i=Pe,s=ta.transition;ta.transition=null;try{Pe=4,H0(t,e,n,r)}finally{Pe=i,ta.transition=s}}function H0(t,e,n,r){if(ph){var i=Bg(t,e,n,r);if(i===null)ym(t,e,r,mh,n),Ax(t,r);else if(kM(i,t,e,n,r))r.stopPropagation();else if(Ax(t,r),e&4&&-1<SM.indexOf(t)){for(;i!==null;){var s=tu(i);if(s!==null&&AE(s),s=Bg(t,e,n,r),s===null&&ym(t,e,r,mh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ym(t,e,r,null,n)}}var mh=null;function Bg(t,e,n,r){if(mh=null,t=B0(r),t=js(t),t!==null)if(e=fo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mh=t,null}function OE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mM()){case z0:return 1;case EE:return 4;case hh:case gM:return 16;case PE:return 536870912;default:return 16}default:return 16}}var Ri=null,q0=null,jd=null;function jE(){if(jd)return jd;var t,e=q0,n=e.length,r,i="value"in Ri?Ri.value:Ri.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return jd=i.slice(t,1<r?1-r:void 0)}function Ld(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yu(){return!0}function Dx(){return!1}function Tn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yu:Dx,this.isPropagationStopped=Dx,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yu)},persist:function(){},isPersistent:Yu}),e}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},G0=Tn(Na),eu=He({},Na,{view:0,detail:0}),CM=Tn(eu),lm,cm,ll,Sf=He({},eu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:K0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ll&&(ll&&t.type==="mousemove"?(lm=t.screenX-ll.screenX,cm=t.screenY-ll.screenY):cm=lm=0,ll=t),lm)},movementY:function(t){return"movementY"in t?t.movementY:cm}}),Nx=Tn(Sf),AM=He({},Sf,{dataTransfer:0}),RM=Tn(AM),DM=He({},eu,{relatedTarget:0}),um=Tn(DM),NM=He({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),MM=Tn(NM),OM=He({},Na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jM=Tn(OM),LM=He({},Na,{data:0}),Mx=Tn(LM),VM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UM[t])?!!e[t]:!1}function K0(){return BM}var zM=He({},eu,{key:function(t){if(t.key){var e=VM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ld(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:K0,charCode:function(t){return t.type==="keypress"?Ld(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ld(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$M=Tn(zM),WM=He({},Sf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ox=Tn(WM),HM=He({},eu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:K0}),qM=Tn(HM),GM=He({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),KM=Tn(GM),QM=He({},Sf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YM=Tn(QM),XM=[9,13,27,32],Q0=Yr&&"CompositionEvent"in window,Vl=null;Yr&&"documentMode"in document&&(Vl=document.documentMode);var JM=Yr&&"TextEvent"in window&&!Vl,LE=Yr&&(!Q0||Vl&&8<Vl&&11>=Vl),jx=" ",Lx=!1;function VE(t,e){switch(t){case"keyup":return XM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lo=!1;function ZM(t,e){switch(t){case"compositionend":return FE(e);case"keypress":return e.which!==32?null:(Lx=!0,jx);case"textInput":return t=e.data,t===jx&&Lx?null:t;default:return null}}function eO(t,e){if(Lo)return t==="compositionend"||!Q0&&VE(t,e)?(t=jE(),jd=q0=Ri=null,Lo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LE&&e.locale!=="ko"?null:e.data;default:return null}}var tO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tO[t.type]:e==="textarea"}function UE(t,e,n,r){yE(r),e=gh(e,"onChange"),0<e.length&&(n=new G0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fl=null,pc=null;function nO(t){XE(t,0)}function kf(t){var e=Uo(t);if(uE(e))return t}function rO(t,e){if(t==="change")return e}var BE=!1;if(Yr){var dm;if(Yr){var hm="oninput"in document;if(!hm){var Fx=document.createElement("div");Fx.setAttribute("oninput","return;"),hm=typeof Fx.oninput=="function"}dm=hm}else dm=!1;BE=dm&&(!document.documentMode||9<document.documentMode)}function Ux(){Fl&&(Fl.detachEvent("onpropertychange",zE),pc=Fl=null)}function zE(t){if(t.propertyName==="value"&&kf(pc)){var e=[];UE(e,pc,t,B0(t)),xE(nO,e)}}function iO(t,e,n){t==="focusin"?(Ux(),Fl=e,pc=n,Fl.attachEvent("onpropertychange",zE)):t==="focusout"&&Ux()}function sO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kf(pc)}function oO(t,e){if(t==="click")return kf(e)}function aO(t,e){if(t==="input"||t==="change")return kf(e)}function lO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zn=typeof Object.is=="function"?Object.is:lO;function mc(t,e){if(Zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Tg.call(e,i)||!Zn(t[i],e[i]))return!1}return!0}function Bx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zx(t,e){var n=Bx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bx(n)}}function $E(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$E(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function WE(){for(var t=window,e=ch();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ch(t.document)}return e}function Y0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cO(t){var e=WE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$E(n.ownerDocument.documentElement,n)){if(r!==null&&Y0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=zx(n,s);var o=zx(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uO=Yr&&"documentMode"in document&&11>=document.documentMode,Vo=null,zg=null,Ul=null,$g=!1;function $x(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$g||Vo==null||Vo!==ch(r)||(r=Vo,"selectionStart"in r&&Y0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ul&&mc(Ul,r)||(Ul=r,r=gh(zg,"onSelect"),0<r.length&&(e=new G0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vo)))}function Xu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fo={animationend:Xu("Animation","AnimationEnd"),animationiteration:Xu("Animation","AnimationIteration"),animationstart:Xu("Animation","AnimationStart"),transitionend:Xu("Transition","TransitionEnd")},fm={},HE={};Yr&&(HE=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function Ef(t){if(fm[t])return fm[t];if(!Fo[t])return t;var e=Fo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in HE)return fm[t]=e[n];return t}var qE=Ef("animationend"),GE=Ef("animationiteration"),KE=Ef("animationstart"),QE=Ef("transitionend"),YE=new Map,Wx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(t,e){YE.set(t,e),ho(e,[t])}for(var pm=0;pm<Wx.length;pm++){var mm=Wx[pm],dO=mm.toLowerCase(),hO=mm[0].toUpperCase()+mm.slice(1);ls(dO,"on"+hO)}ls(qE,"onAnimationEnd");ls(GE,"onAnimationIteration");ls(KE,"onAnimationStart");ls("dblclick","onDoubleClick");ls("focusin","onFocus");ls("focusout","onBlur");ls(QE,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ho("onBeforeInput",["compositionend","keypress","textInput","paste"]);ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tl));function Hx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dM(r,e,void 0,t),t.currentTarget=null}function XE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Hx(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Hx(i,a,c),s=l}}}if(dh)throw t=Vg,dh=!1,Vg=null,t}function Ne(t,e){var n=e[Kg];n===void 0&&(n=e[Kg]=new Set);var r=t+"__bubble";n.has(r)||(JE(e,t,2,!1),n.add(r))}function gm(t,e,n){var r=0;e&&(r|=4),JE(n,t,r,e)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function gc(t){if(!t[Ju]){t[Ju]=!0,sE.forEach(function(n){n!=="selectionchange"&&(fO.has(n)||gm(n,!1,t),gm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ju]||(e[Ju]=!0,gm("selectionchange",!1,e))}}function JE(t,e,n,r){switch(OE(e)){case 1:var i=PM;break;case 4:i=IM;break;default:i=H0}n=i.bind(null,e,n,t),i=void 0,!Lg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ym(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=js(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}xE(function(){var c=s,u=B0(n),h=[];e:{var f=YE.get(t);if(f!==void 0){var m=G0,g=t;switch(t){case"keypress":if(Ld(n)===0)break e;case"keydown":case"keyup":m=$M;break;case"focusin":g="focus",m=um;break;case"focusout":g="blur",m=um;break;case"beforeblur":case"afterblur":m=um;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Nx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=RM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=qM;break;case qE:case GE:case KE:m=MM;break;case QE:m=KM;break;case"scroll":m=CM;break;case"wheel":m=YM;break;case"copy":case"cut":case"paste":m=jM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ox}var v=(e&4)!==0,x=!v&&t==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var _=c,T;_!==null;){T=_;var P=T.stateNode;if(T.tag===5&&P!==null&&(T=P,w!==null&&(P=uc(_,w),P!=null&&v.push(yc(_,P,T)))),x)break;_=_.return}0<v.length&&(f=new m(f,g,null,n,u),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Og&&(g=n.relatedTarget||n.fromElement)&&(js(g)||g[Xr]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?js(g):null,g!==null&&(x=fo(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(v=Nx,P="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=Ox,P="onPointerLeave",w="onPointerEnter",_="pointer"),x=m==null?f:Uo(m),T=g==null?f:Uo(g),f=new v(P,_+"leave",m,n,u),f.target=x,f.relatedTarget=T,P=null,js(u)===c&&(v=new v(w,_+"enter",g,n,u),v.target=T,v.relatedTarget=x,P=v),x=P,m&&g)t:{for(v=m,w=g,_=0,T=v;T;T=Eo(T))_++;for(T=0,P=w;P;P=Eo(P))T++;for(;0<_-T;)v=Eo(v),_--;for(;0<T-_;)w=Eo(w),T--;for(;_--;){if(v===w||w!==null&&v===w.alternate)break t;v=Eo(v),w=Eo(w)}v=null}else v=null;m!==null&&qx(h,f,m,v,!1),g!==null&&x!==null&&qx(h,x,g,v,!0)}}e:{if(f=c?Uo(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var A=rO;else if(Vx(f))if(BE)A=aO;else{A=sO;var O=iO}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=oO);if(A&&(A=A(t,c))){UE(h,A,n,u);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&Ag(f,"number",f.value)}switch(O=c?Uo(c):window,t){case"focusin":(Vx(O)||O.contentEditable==="true")&&(Vo=O,zg=c,Ul=null);break;case"focusout":Ul=zg=Vo=null;break;case"mousedown":$g=!0;break;case"contextmenu":case"mouseup":case"dragend":$g=!1,$x(h,n,u);break;case"selectionchange":if(uO)break;case"keydown":case"keyup":$x(h,n,u)}var E;if(Q0)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Lo?VE(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(LE&&n.locale!=="ko"&&(Lo||S!=="onCompositionStart"?S==="onCompositionEnd"&&Lo&&(E=jE()):(Ri=u,q0="value"in Ri?Ri.value:Ri.textContent,Lo=!0)),O=gh(c,S),0<O.length&&(S=new Mx(S,t,null,n,u),h.push({event:S,listeners:O}),E?S.data=E:(E=FE(n),E!==null&&(S.data=E)))),(E=JM?ZM(t,n):eO(t,n))&&(c=gh(c,"onBeforeInput"),0<c.length&&(u=new Mx("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=E))}XE(h,e)})}function yc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=uc(t,n),s!=null&&r.unshift(yc(t,s,i)),s=uc(t,e),s!=null&&r.push(yc(t,s,i))),t=t.return}return r}function Eo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qx(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=uc(n,s),l!=null&&o.unshift(yc(n,l,a))):i||(l=uc(n,s),l!=null&&o.push(yc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pO=/\r\n?/g,mO=/\u0000|\uFFFD/g;function Gx(t){return(typeof t=="string"?t:""+t).replace(pO,`
`).replace(mO,"")}function Zu(t,e,n){if(e=Gx(e),Gx(t)!==e&&n)throw Error(U(425))}function yh(){}var Wg=null,Hg=null;function qg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gg=typeof setTimeout=="function"?setTimeout:void 0,gO=typeof clearTimeout=="function"?clearTimeout:void 0,Kx=typeof Promise=="function"?Promise:void 0,yO=typeof queueMicrotask=="function"?queueMicrotask:typeof Kx<"u"?function(t){return Kx.resolve(null).then(t).catch(vO)}:Gg;function vO(t){setTimeout(function(){throw t})}function vm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),fc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fc(e)}function zi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ma=Math.random().toString(36).slice(2),cr="__reactFiber$"+Ma,vc="__reactProps$"+Ma,Xr="__reactContainer$"+Ma,Kg="__reactEvents$"+Ma,_O="__reactListeners$"+Ma,wO="__reactHandles$"+Ma;function js(t){var e=t[cr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xr]||n[cr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Qx(t);t!==null;){if(n=t[cr])return n;t=Qx(t)}return e}t=n,n=t.parentNode}return null}function tu(t){return t=t[cr]||t[Xr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Pf(t){return t[vc]||null}var Qg=[],Bo=-1;function cs(t){return{current:t}}function je(t){0>Bo||(t.current=Qg[Bo],Qg[Bo]=null,Bo--)}function Ae(t,e){Bo++,Qg[Bo]=t.current,t.current=e}var ts={},$t=cs(ts),an=cs(!1),Ys=ts;function fa(t,e){var n=t.type.contextTypes;if(!n)return ts;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ln(t){return t=t.childContextTypes,t!=null}function vh(){je(an),je($t)}function Yx(t,e,n){if($t.current!==ts)throw Error(U(168));Ae($t,e),Ae(an,n)}function ZE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,iM(t)||"Unknown",i));return He({},n,r)}function _h(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ts,Ys=$t.current,Ae($t,t),Ae(an,an.current),!0}function Xx(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=ZE(t,e,Ys),r.__reactInternalMemoizedMergedChildContext=t,je(an),je($t),Ae($t,t)):je(an),Ae(an,n)}var Dr=null,If=!1,_m=!1;function eP(t){Dr===null?Dr=[t]:Dr.push(t)}function xO(t){If=!0,eP(t)}function us(){if(!_m&&Dr!==null){_m=!0;var t=0,e=Pe;try{var n=Dr;for(Pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dr=null,If=!1}catch(i){throw Dr!==null&&(Dr=Dr.slice(t+1)),kE(z0,us),i}finally{Pe=e,_m=!1}}return null}var zo=[],$o=0,wh=null,xh=0,Cn=[],An=0,Xs=null,Lr=1,Vr="";function Ps(t,e){zo[$o++]=xh,zo[$o++]=wh,wh=t,xh=e}function tP(t,e,n){Cn[An++]=Lr,Cn[An++]=Vr,Cn[An++]=Xs,Xs=t;var r=Lr;t=Vr;var i=32-Yn(r)-1;r&=~(1<<i),n+=1;var s=32-Yn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Lr=1<<32-Yn(e)+i|n<<i|r,Vr=s+t}else Lr=1<<s|n<<i|r,Vr=t}function X0(t){t.return!==null&&(Ps(t,1),tP(t,1,0))}function J0(t){for(;t===wh;)wh=zo[--$o],zo[$o]=null,xh=zo[--$o],zo[$o]=null;for(;t===Xs;)Xs=Cn[--An],Cn[An]=null,Vr=Cn[--An],Cn[An]=null,Lr=Cn[--An],Cn[An]=null}var _n=null,yn=null,Ve=!1,Kn=null;function nP(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_n=t,yn=zi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_n=t,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xs!==null?{id:Lr,overflow:Vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_n=t,yn=null,!0):!1;default:return!1}}function Yg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xg(t){if(Ve){var e=yn;if(e){var n=e;if(!Jx(t,e)){if(Yg(t))throw Error(U(418));e=zi(n.nextSibling);var r=_n;e&&Jx(t,e)?nP(r,n):(t.flags=t.flags&-4097|2,Ve=!1,_n=t)}}else{if(Yg(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ve=!1,_n=t}}}function Zx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_n=t}function ed(t){if(t!==_n)return!1;if(!Ve)return Zx(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qg(t.type,t.memoizedProps)),e&&(e=yn)){if(Yg(t))throw rP(),Error(U(418));for(;e;)nP(t,e),e=zi(e.nextSibling)}if(Zx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yn=zi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yn=null}}else yn=_n?zi(t.stateNode.nextSibling):null;return!0}function rP(){for(var t=yn;t;)t=zi(t.nextSibling)}function pa(){yn=_n=null,Ve=!1}function Z0(t){Kn===null?Kn=[t]:Kn.push(t)}var bO=li.ReactCurrentBatchConfig;function cl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function td(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function eb(t){var e=t._init;return e(t._payload)}function iP(t){function e(w,_){if(t){var T=w.deletions;T===null?(w.deletions=[_],w.flags|=16):T.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=qi(w,_),w.index=0,w.sibling=null,w}function s(w,_,T){return w.index=T,t?(T=w.alternate,T!==null?(T=T.index,T<_?(w.flags|=2,_):T):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,T,P){return _===null||_.tag!==6?(_=Em(T,w.mode,P),_.return=w,_):(_=i(_,T),_.return=w,_)}function l(w,_,T,P){var A=T.type;return A===jo?u(w,_,T.props.children,P,T.key):_!==null&&(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===wi&&eb(A)===_.type)?(P=i(_,T.props),P.ref=cl(w,_,T),P.return=w,P):(P=Wd(T.type,T.key,T.props,null,w.mode,P),P.ref=cl(w,_,T),P.return=w,P)}function c(w,_,T,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=Pm(T,w.mode,P),_.return=w,_):(_=i(_,T.children||[]),_.return=w,_)}function u(w,_,T,P,A){return _===null||_.tag!==7?(_=Hs(T,w.mode,P,A),_.return=w,_):(_=i(_,T),_.return=w,_)}function h(w,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Em(""+_,w.mode,T),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Wu:return T=Wd(_.type,_.key,_.props,null,w.mode,T),T.ref=cl(w,null,_),T.return=w,T;case Oo:return _=Pm(_,w.mode,T),_.return=w,_;case wi:var P=_._init;return h(w,P(_._payload),T)}if(xl(_)||il(_))return _=Hs(_,w.mode,T,null),_.return=w,_;td(w,_)}return null}function f(w,_,T,P){var A=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return A!==null?null:a(w,_,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Wu:return T.key===A?l(w,_,T,P):null;case Oo:return T.key===A?c(w,_,T,P):null;case wi:return A=T._init,f(w,_,A(T._payload),P)}if(xl(T)||il(T))return A!==null?null:u(w,_,T,P,null);td(w,T)}return null}function m(w,_,T,P,A){if(typeof P=="string"&&P!==""||typeof P=="number")return w=w.get(T)||null,a(_,w,""+P,A);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Wu:return w=w.get(P.key===null?T:P.key)||null,l(_,w,P,A);case Oo:return w=w.get(P.key===null?T:P.key)||null,c(_,w,P,A);case wi:var O=P._init;return m(w,_,T,O(P._payload),A)}if(xl(P)||il(P))return w=w.get(T)||null,u(_,w,P,A,null);td(_,P)}return null}function g(w,_,T,P){for(var A=null,O=null,E=_,S=_=0,k=null;E!==null&&S<T.length;S++){E.index>S?(k=E,E=null):k=E.sibling;var C=f(w,E,T[S],P);if(C===null){E===null&&(E=k);break}t&&E&&C.alternate===null&&e(w,E),_=s(C,_,S),O===null?A=C:O.sibling=C,O=C,E=k}if(S===T.length)return n(w,E),Ve&&Ps(w,S),A;if(E===null){for(;S<T.length;S++)E=h(w,T[S],P),E!==null&&(_=s(E,_,S),O===null?A=E:O.sibling=E,O=E);return Ve&&Ps(w,S),A}for(E=r(w,E);S<T.length;S++)k=m(E,w,S,T[S],P),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?S:k.key),_=s(k,_,S),O===null?A=k:O.sibling=k,O=k);return t&&E.forEach(function(D){return e(w,D)}),Ve&&Ps(w,S),A}function v(w,_,T,P){var A=il(T);if(typeof A!="function")throw Error(U(150));if(T=A.call(T),T==null)throw Error(U(151));for(var O=A=null,E=_,S=_=0,k=null,C=T.next();E!==null&&!C.done;S++,C=T.next()){E.index>S?(k=E,E=null):k=E.sibling;var D=f(w,E,C.value,P);if(D===null){E===null&&(E=k);break}t&&E&&D.alternate===null&&e(w,E),_=s(D,_,S),O===null?A=D:O.sibling=D,O=D,E=k}if(C.done)return n(w,E),Ve&&Ps(w,S),A;if(E===null){for(;!C.done;S++,C=T.next())C=h(w,C.value,P),C!==null&&(_=s(C,_,S),O===null?A=C:O.sibling=C,O=C);return Ve&&Ps(w,S),A}for(E=r(w,E);!C.done;S++,C=T.next())C=m(E,w,S,C.value,P),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?S:C.key),_=s(C,_,S),O===null?A=C:O.sibling=C,O=C);return t&&E.forEach(function(M){return e(w,M)}),Ve&&Ps(w,S),A}function x(w,_,T,P){if(typeof T=="object"&&T!==null&&T.type===jo&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Wu:e:{for(var A=T.key,O=_;O!==null;){if(O.key===A){if(A=T.type,A===jo){if(O.tag===7){n(w,O.sibling),_=i(O,T.props.children),_.return=w,w=_;break e}}else if(O.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===wi&&eb(A)===O.type){n(w,O.sibling),_=i(O,T.props),_.ref=cl(w,O,T),_.return=w,w=_;break e}n(w,O);break}else e(w,O);O=O.sibling}T.type===jo?(_=Hs(T.props.children,w.mode,P,T.key),_.return=w,w=_):(P=Wd(T.type,T.key,T.props,null,w.mode,P),P.ref=cl(w,_,T),P.return=w,w=P)}return o(w);case Oo:e:{for(O=T.key;_!==null;){if(_.key===O)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(w,_.sibling),_=i(_,T.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=Pm(T,w.mode,P),_.return=w,w=_}return o(w);case wi:return O=T._init,x(w,_,O(T._payload),P)}if(xl(T))return g(w,_,T,P);if(il(T))return v(w,_,T,P);td(w,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,T),_.return=w,w=_):(n(w,_),_=Em(T,w.mode,P),_.return=w,w=_),o(w)):n(w,_)}return x}var ma=iP(!0),sP=iP(!1),bh=cs(null),Th=null,Wo=null,ev=null;function tv(){ev=Wo=Th=null}function nv(t){var e=bh.current;je(bh),t._currentValue=e}function Jg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function na(t,e){Th=t,ev=Wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function Ln(t){var e=t._currentValue;if(ev!==t)if(t={context:t,memoizedValue:e,next:null},Wo===null){if(Th===null)throw Error(U(308));Wo=t,Th.dependencies={lanes:0,firstContext:t}}else Wo=Wo.next=t;return e}var Ls=null;function rv(t){Ls===null?Ls=[t]:Ls.push(t)}function oP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,rv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Jr(t,r)}function Jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xi=!1;function iv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $i(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Jr(t,n)}return i=r.interleaved,i===null?(e.next=e,rv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Jr(t,n)}function Vd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$0(t,n)}}function tb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sh(t,e,n,r){var i=t.updateQueue;xi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(f=e,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(m,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(m,h,f):g,f==null)break e;h=He({},h,f);break e;case 2:xi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=h):u=u.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Zs|=o,t.lanes=o,t.memoizedState=h}}function nb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var nu={},pr=cs(nu),_c=cs(nu),wc=cs(nu);function Vs(t){if(t===nu)throw Error(U(174));return t}function sv(t,e){switch(Ae(wc,e),Ae(_c,t),Ae(pr,nu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dg(e,t)}je(pr),Ae(pr,e)}function ga(){je(pr),je(_c),je(wc)}function lP(t){Vs(wc.current);var e=Vs(pr.current),n=Dg(e,t.type);e!==n&&(Ae(_c,t),Ae(pr,n))}function ov(t){_c.current===t&&(je(pr),je(_c))}var Ue=cs(0);function kh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wm=[];function av(){for(var t=0;t<wm.length;t++)wm[t]._workInProgressVersionPrimary=null;wm.length=0}var Fd=li.ReactCurrentDispatcher,xm=li.ReactCurrentBatchConfig,Js=0,$e=null,ct=null,gt=null,Eh=!1,Bl=!1,xc=0,TO=0;function Dt(){throw Error(U(321))}function lv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zn(t[n],e[n]))return!1;return!0}function cv(t,e,n,r,i,s){if(Js=s,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fd.current=t===null||t.memoizedState===null?PO:IO,t=n(r,i),Bl){s=0;do{if(Bl=!1,xc=0,25<=s)throw Error(U(301));s+=1,gt=ct=null,e.updateQueue=null,Fd.current=CO,t=n(r,i)}while(Bl)}if(Fd.current=Ph,e=ct!==null&&ct.next!==null,Js=0,gt=ct=$e=null,Eh=!1,e)throw Error(U(300));return t}function uv(){var t=xc!==0;return xc=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?$e.memoizedState=gt=t:gt=gt.next=t,gt}function Vn(){if(ct===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=gt===null?$e.memoizedState:gt.next;if(e!==null)gt=e,ct=t;else{if(t===null)throw Error(U(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},gt===null?$e.memoizedState=gt=t:gt=gt.next=t}return gt}function bc(t,e){return typeof e=="function"?e(t):e}function bm(t){var e=Vn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=ct,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Js&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,$e.lanes|=u,Zs|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Zn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,$e.lanes|=s,Zs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tm(t){var e=Vn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Zn(s,e.memoizedState)||(on=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function cP(){}function uP(t,e){var n=$e,r=Vn(),i=e(),s=!Zn(r.memoizedState,i);if(s&&(r.memoizedState=i,on=!0),r=r.queue,dv(fP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,Tc(9,hP.bind(null,n,r,i,e),void 0,null),vt===null)throw Error(U(349));Js&30||dP(n,e,i)}return i}function dP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hP(t,e,n,r){e.value=n,e.getSnapshot=r,pP(e)&&mP(t)}function fP(t,e,n){return n(function(){pP(e)&&mP(t)})}function pP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zn(t,n)}catch{return!0}}function mP(t){var e=Jr(t,1);e!==null&&Xn(e,t,1,-1)}function rb(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:t},e.queue=t,t=t.dispatch=EO.bind(null,$e,t),[e.memoizedState,t]}function Tc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gP(){return Vn().memoizedState}function Ud(t,e,n,r){var i=ar();$e.flags|=t,i.memoizedState=Tc(1|e,n,void 0,r===void 0?null:r)}function Cf(t,e,n,r){var i=Vn();r=r===void 0?null:r;var s=void 0;if(ct!==null){var o=ct.memoizedState;if(s=o.destroy,r!==null&&lv(r,o.deps)){i.memoizedState=Tc(e,n,s,r);return}}$e.flags|=t,i.memoizedState=Tc(1|e,n,s,r)}function ib(t,e){return Ud(8390656,8,t,e)}function dv(t,e){return Cf(2048,8,t,e)}function yP(t,e){return Cf(4,2,t,e)}function vP(t,e){return Cf(4,4,t,e)}function _P(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wP(t,e,n){return n=n!=null?n.concat([t]):null,Cf(4,4,_P.bind(null,e,t),n)}function hv(){}function xP(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bP(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function TP(t,e,n){return Js&21?(Zn(n,e)||(n=IE(),$e.lanes|=n,Zs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function SO(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var r=xm.transition;xm.transition={};try{t(!1),e()}finally{Pe=n,xm.transition=r}}function SP(){return Vn().memoizedState}function kO(t,e,n){var r=Hi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kP(t))EP(e,n);else if(n=oP(t,e,n,r),n!==null){var i=Yt();Xn(n,t,r,i),PP(n,e,r)}}function EO(t,e,n){var r=Hi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kP(t))EP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Zn(a,o)){var l=e.interleaved;l===null?(i.next=i,rv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=oP(t,e,i,r),n!==null&&(i=Yt(),Xn(n,t,r,i),PP(n,e,r))}}function kP(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function EP(t,e){Bl=Eh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$0(t,n)}}var Ph={readContext:Ln,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},PO={readContext:Ln,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:Ln,useEffect:ib,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ud(4194308,4,_P.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ud(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ud(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kO.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:rb,useDebugValue:hv,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=rb(!1),e=t[0];return t=SO.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$e,i=ar();if(Ve){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),vt===null)throw Error(U(349));Js&30||dP(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ib(fP.bind(null,r,s,t),[t]),r.flags|=2048,Tc(9,hP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ar(),e=vt.identifierPrefix;if(Ve){var n=Vr,r=Lr;n=(r&~(1<<32-Yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=TO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IO={readContext:Ln,useCallback:xP,useContext:Ln,useEffect:dv,useImperativeHandle:wP,useInsertionEffect:yP,useLayoutEffect:vP,useMemo:bP,useReducer:bm,useRef:gP,useState:function(){return bm(bc)},useDebugValue:hv,useDeferredValue:function(t){var e=Vn();return TP(e,ct.memoizedState,t)},useTransition:function(){var t=bm(bc)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:cP,useSyncExternalStore:uP,useId:SP,unstable_isNewReconciler:!1},CO={readContext:Ln,useCallback:xP,useContext:Ln,useEffect:dv,useImperativeHandle:wP,useInsertionEffect:yP,useLayoutEffect:vP,useMemo:bP,useReducer:Tm,useRef:gP,useState:function(){return Tm(bc)},useDebugValue:hv,useDeferredValue:function(t){var e=Vn();return ct===null?e.memoizedState=t:TP(e,ct.memoizedState,t)},useTransition:function(){var t=Tm(bc)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:cP,useSyncExternalStore:uP,useId:SP,unstable_isNewReconciler:!1};function Hn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Af={isMounted:function(t){return(t=t._reactInternals)?fo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=Hi(t),s=Hr(r,i);s.payload=e,n!=null&&(s.callback=n),e=$i(t,s,i),e!==null&&(Xn(e,t,i,r),Vd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=Hi(t),s=Hr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=$i(t,s,i),e!==null&&(Xn(e,t,i,r),Vd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),r=Hi(t),i=Hr(n,r);i.tag=2,e!=null&&(i.callback=e),e=$i(t,i,r),e!==null&&(Xn(e,t,r,n),Vd(e,t,r))}};function sb(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!mc(n,r)||!mc(i,s):!0}function IP(t,e,n){var r=!1,i=ts,s=e.contextType;return typeof s=="object"&&s!==null?s=Ln(s):(i=ln(e)?Ys:$t.current,r=e.contextTypes,s=(r=r!=null)?fa(t,i):ts),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Af,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ob(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Af.enqueueReplaceState(e,e.state,null)}function ey(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},iv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ln(s):(s=ln(e)?Ys:$t.current,i.context=fa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Af.enqueueReplaceState(i,i.state,null),Sh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ya(t,e){try{var n="",r=e;do n+=rM(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Sm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ty(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var AO=typeof WeakMap=="function"?WeakMap:Map;function CP(t,e,n){n=Hr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ch||(Ch=!0,dy=r),ty(t,e)},n}function AP(t,e,n){n=Hr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ty(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ty(t,e),typeof r!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ab(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new AO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=WO.bind(null,t,e,n),e.then(t,t))}function lb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cb(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hr(-1,1),e.tag=2,$i(n,e,1))),n.lanes|=1),t)}var RO=li.ReactCurrentOwner,on=!1;function Qt(t,e,n,r){e.child=t===null?sP(e,null,n,r):ma(e,t.child,n,r)}function ub(t,e,n,r,i){n=n.render;var s=e.ref;return na(e,i),r=cv(t,e,n,r,s,i),n=uv(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zr(t,e,i)):(Ve&&n&&X0(e),e.flags|=1,Qt(t,e,r,i),e.child)}function db(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!wv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,RP(t,e,s,r,i)):(t=Wd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:mc,n(o,r)&&t.ref===e.ref)return Zr(t,e,i)}return e.flags|=1,t=qi(s,r),t.ref=e.ref,t.return=e,e.child=t}function RP(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(mc(s,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,Zr(t,e,i)}return ny(t,e,n,r,i)}function DP(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(qo,mn),mn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(qo,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ae(qo,mn),mn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ae(qo,mn),mn|=r;return Qt(t,e,i,n),e.child}function NP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ny(t,e,n,r,i){var s=ln(n)?Ys:$t.current;return s=fa(e,s),na(e,i),n=cv(t,e,n,r,s,i),r=uv(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zr(t,e,i)):(Ve&&r&&X0(e),e.flags|=1,Qt(t,e,n,i),e.child)}function hb(t,e,n,r,i){if(ln(n)){var s=!0;_h(e)}else s=!1;if(na(e,i),e.stateNode===null)Bd(t,e),IP(e,n,r),ey(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ln(c):(c=ln(n)?Ys:$t.current,c=fa(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ob(e,o,r,c),xi=!1;var f=e.memoizedState;o.state=f,Sh(e,r,o,i),l=e.memoizedState,a!==r||f!==l||an.current||xi?(typeof u=="function"&&(Zg(e,n,u,r),l=e.memoizedState),(a=xi||sb(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,aP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Hn(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ln(l):(l=ln(n)?Ys:$t.current,l=fa(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&ob(e,o,r,l),xi=!1,f=e.memoizedState,o.state=f,Sh(e,r,o,i);var g=e.memoizedState;a!==h||f!==g||an.current||xi?(typeof m=="function"&&(Zg(e,n,m,r),g=e.memoizedState),(c=xi||sb(e,n,c,r,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ry(t,e,n,r,s,i)}function ry(t,e,n,r,i,s){NP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Xx(e,n,!1),Zr(t,e,s);r=e.stateNode,RO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ma(e,t.child,null,s),e.child=ma(e,null,a,s)):Qt(t,e,a,s),e.memoizedState=r.state,i&&Xx(e,n,!0),e.child}function MP(t){var e=t.stateNode;e.pendingContext?Yx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yx(t,e.context,!1),sv(t,e.containerInfo)}function fb(t,e,n,r,i){return pa(),Z0(i),e.flags|=256,Qt(t,e,n,r),e.child}var iy={dehydrated:null,treeContext:null,retryLane:0};function sy(t){return{baseLanes:t,cachePool:null,transitions:null}}function OP(t,e,n){var r=e.pendingProps,i=Ue.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae(Ue,i&1),t===null)return Xg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Nf(o,r,0,null),t=Hs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sy(n),e.memoizedState=iy,t):fv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return DO(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=qi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=qi(a,s):(s=Hs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?sy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=iy,r}return s=t.child,t=s.sibling,r=qi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fv(t,e){return e=Nf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nd(t,e,n,r){return r!==null&&Z0(r),ma(e,t.child,null,n),t=fv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DO(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Sm(Error(U(422))),nd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Nf({mode:"visible",children:r.children},i,0,null),s=Hs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ma(e,t.child,null,o),e.child.memoizedState=sy(o),e.memoizedState=iy,s);if(!(e.mode&1))return nd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=Sm(s,r,void 0),nd(t,e,o,r)}if(a=(o&t.childLanes)!==0,on||a){if(r=vt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Jr(t,i),Xn(r,t,i,-1))}return _v(),r=Sm(Error(U(421))),nd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=HO.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,yn=zi(i.nextSibling),_n=e,Ve=!0,Kn=null,t!==null&&(Cn[An++]=Lr,Cn[An++]=Vr,Cn[An++]=Xs,Lr=t.id,Vr=t.overflow,Xs=e),e=fv(e,r.children),e.flags|=4096,e)}function pb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jg(t.return,e,n)}function km(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function jP(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Qt(t,e,r.children,n),r=Ue.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pb(t,n,e);else if(t.tag===19)pb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Ue,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&kh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),km(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&kh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}km(e,!0,n,null,s);break;case"together":km(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=qi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NO(t,e,n){switch(e.tag){case 3:MP(e),pa();break;case 5:lP(e);break;case 1:ln(e.type)&&_h(e);break;case 4:sv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ae(bh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?OP(t,e,n):(Ae(Ue,Ue.current&1),t=Zr(t,e,n),t!==null?t.sibling:null);Ae(Ue,Ue.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jP(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(Ue,Ue.current),r)break;return null;case 22:case 23:return e.lanes=0,DP(t,e,n)}return Zr(t,e,n)}var LP,oy,VP,FP;LP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oy=function(){};VP=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Vs(pr.current);var s=null;switch(n){case"input":i=Ig(t,i),r=Ig(t,r),s=[];break;case"select":i=He({},i,{value:void 0}),r=He({},r,{value:void 0}),s=[];break;case"textarea":i=Rg(t,i),r=Rg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yh)}Ng(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(lc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(lc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ne("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};FP=function(t,e,n,r){n!==r&&(e.flags|=4)};function ul(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function MO(t,e,n){var r=e.pendingProps;switch(J0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return ln(e.type)&&vh(),Nt(e),null;case 3:return r=e.stateNode,ga(),je(an),je($t),av(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ed(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(py(Kn),Kn=null))),oy(t,e),Nt(e),null;case 5:ov(e);var i=Vs(wc.current);if(n=e.type,t!==null&&e.stateNode!=null)VP(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Nt(e),null}if(t=Vs(pr.current),ed(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[cr]=e,r[vc]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<Tl.length;i++)Ne(Tl[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Tx(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":kx(r,s),Ne("invalid",r)}Ng(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Zu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Zu(r.textContent,a,t),i=["children",""+a]):lc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Hu(r),Sx(r,s,!0);break;case"textarea":Hu(r),Ex(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[cr]=e,t[vc]=r,LP(t,e,!1,!1),e.stateNode=t;e:{switch(o=Mg(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<Tl.length;i++)Ne(Tl[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":Tx(t,r),i=Ig(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=He({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":kx(t,r),i=Rg(t,r),Ne("invalid",t);break;default:i=r}Ng(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?gE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&cc(t,l):typeof l=="number"&&cc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(lc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ne("scroll",t):l!=null&&L0(t,s,l,o))}switch(n){case"input":Hu(t),Sx(t,r,!1);break;case"textarea":Hu(t),Ex(t);break;case"option":r.value!=null&&t.setAttribute("value",""+es(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Jo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Jo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)FP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Vs(wc.current),Vs(pr.current),ed(e)){if(r=e.stateNode,n=e.memoizedProps,r[cr]=e,(s=r.nodeValue!==n)&&(t=_n,t!==null))switch(t.tag){case 3:Zu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cr]=e,e.stateNode=r}return Nt(e),null;case 13:if(je(Ue),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&yn!==null&&e.mode&1&&!(e.flags&128))rP(),pa(),e.flags|=98560,s=!1;else if(s=ed(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[cr]=e}else pa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),s=!1}else Kn!==null&&(py(Kn),Kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?ut===0&&(ut=3):_v())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return ga(),oy(t,e),t===null&&gc(e.stateNode.containerInfo),Nt(e),null;case 10:return nv(e.type._context),Nt(e),null;case 17:return ln(e.type)&&vh(),Nt(e),null;case 19:if(je(Ue),s=e.memoizedState,s===null)return Nt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ul(s,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kh(t),o!==null){for(e.flags|=128,ul(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Ue,Ue.current&1|2),e.child}t=t.sibling}s.tail!==null&&Xe()>va&&(e.flags|=128,r=!0,ul(s,!1),e.lanes=4194304)}else{if(!r)if(t=kh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ul(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ve)return Nt(e),null}else 2*Xe()-s.renderingStartTime>va&&n!==1073741824&&(e.flags|=128,r=!0,ul(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xe(),e.sibling=null,n=Ue.current,Ae(Ue,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return vv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mn&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function OO(t,e){switch(J0(e),e.tag){case 1:return ln(e.type)&&vh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ga(),je(an),je($t),av(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ov(e),null;case 13:if(je(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));pa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Ue),null;case 4:return ga(),null;case 10:return nv(e.type._context),null;case 22:case 23:return vv(),null;case 24:return null;default:return null}}var rd=!1,Ft=!1,jO=typeof WeakSet=="function"?WeakSet:Set,H=null;function Ho(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function ay(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var mb=!1;function LO(t,e){if(Wg=ph,t=WE(),Y0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hg={focusedElem:t,selectionRange:n},ph=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:Hn(e.type,v),x);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(P){Ke(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return g=mb,mb=!1,g}function zl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ay(e,n,s)}i=i.next}while(i!==r)}}function Rf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ly(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function UP(t){var e=t.alternate;e!==null&&(t.alternate=null,UP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cr],delete e[vc],delete e[Kg],delete e[_O],delete e[wO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BP(t){return t.tag===5||t.tag===3||t.tag===4}function gb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yh));else if(r!==4&&(t=t.child,t!==null))for(cy(t,e,n),t=t.sibling;t!==null;)cy(t,e,n),t=t.sibling}function uy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(uy(t,e,n),t=t.sibling;t!==null;)uy(t,e,n),t=t.sibling}var xt=null,Gn=!1;function mi(t,e,n){for(n=n.child;n!==null;)zP(t,e,n),n=n.sibling}function zP(t,e,n){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(Tf,n)}catch{}switch(n.tag){case 5:Ft||Ho(n,e);case 6:var r=xt,i=Gn;xt=null,mi(t,e,n),xt=r,Gn=i,xt!==null&&(Gn?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(Gn?(t=xt,n=n.stateNode,t.nodeType===8?vm(t.parentNode,n):t.nodeType===1&&vm(t,n),fc(t)):vm(xt,n.stateNode));break;case 4:r=xt,i=Gn,xt=n.stateNode.containerInfo,Gn=!0,mi(t,e,n),xt=r,Gn=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ay(n,e,o),i=i.next}while(i!==r)}mi(t,e,n);break;case 1:if(!Ft&&(Ho(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ke(n,e,a)}mi(t,e,n);break;case 21:mi(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,mi(t,e,n),Ft=r):mi(t,e,n);break;default:mi(t,e,n)}}function yb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jO),e.forEach(function(r){var i=qO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xt=a.stateNode,Gn=!1;break e;case 3:xt=a.stateNode.containerInfo,Gn=!0;break e;case 4:xt=a.stateNode.containerInfo,Gn=!0;break e}a=a.return}if(xt===null)throw Error(U(160));zP(s,o,i),xt=null,Gn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ke(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$P(e,t),e=e.sibling}function $P(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),ir(t),r&4){try{zl(3,t,t.return),Rf(3,t)}catch(v){Ke(t,t.return,v)}try{zl(5,t,t.return)}catch(v){Ke(t,t.return,v)}}break;case 1:$n(e,t),ir(t),r&512&&n!==null&&Ho(n,n.return);break;case 5:if($n(e,t),ir(t),r&512&&n!==null&&Ho(n,n.return),t.flags&32){var i=t.stateNode;try{cc(i,"")}catch(v){Ke(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&dE(i,s),Mg(a,o);var c=Mg(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?gE(i,h):u==="dangerouslySetInnerHTML"?pE(i,h):u==="children"?cc(i,h):L0(i,u,h,c)}switch(a){case"input":Cg(i,s);break;case"textarea":hE(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Jo(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Jo(i,!!s.multiple,s.defaultValue,!0):Jo(i,!!s.multiple,s.multiple?[]:"",!1))}i[vc]=s}catch(v){Ke(t,t.return,v)}}break;case 6:if($n(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Ke(t,t.return,v)}}break;case 3:if($n(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fc(e.containerInfo)}catch(v){Ke(t,t.return,v)}break;case 4:$n(e,t),ir(t);break;case 13:$n(e,t),ir(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(gv=Xe())),r&4&&yb(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(c=Ft)||u,$n(e,t),Ft=c):$n(e,t),ir(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(H=t,u=t.child;u!==null;){for(h=H=u;H!==null;){switch(f=H,m=f.child,f.tag){case 0:case 11:case 14:case 15:zl(4,f,f.return);break;case 1:Ho(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Ke(r,n,v)}}break;case 5:Ho(f,f.return);break;case 22:if(f.memoizedState!==null){_b(h);continue}}m!==null?(m.return=f,H=m):_b(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=mE("display",o))}catch(v){Ke(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Ke(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:$n(e,t),ir(t),r&4&&yb(t);break;case 21:break;default:$n(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BP(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(cc(i,""),r.flags&=-33);var s=gb(t);uy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=gb(t);cy(t,a,o);break;default:throw Error(U(161))}}catch(l){Ke(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VO(t,e,n){H=t,WP(t)}function WP(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||rd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=rd;var c=Ft;if(rd=o,(Ft=l)&&!c)for(H=i;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?wb(i):l!==null?(l.return=o,H=l):wb(i);for(;s!==null;)H=s,WP(s),s=s.sibling;H=i,rd=a,Ft=c}vb(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):vb(t)}}function vb(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Rf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Hn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nb(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&fc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Ft||e.flags&512&&ly(e)}catch(f){Ke(e,e.return,f)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function _b(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function wb(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rf(4,e)}catch(l){Ke(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ke(e,i,l)}}var s=e.return;try{ly(e)}catch(l){Ke(e,s,l)}break;case 5:var o=e.return;try{ly(e)}catch(l){Ke(e,o,l)}}}catch(l){Ke(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var FO=Math.ceil,Ih=li.ReactCurrentDispatcher,pv=li.ReactCurrentOwner,Mn=li.ReactCurrentBatchConfig,_e=0,vt=null,it=null,St=0,mn=0,qo=cs(0),ut=0,Sc=null,Zs=0,Df=0,mv=0,$l=null,nn=null,gv=0,va=1/0,Rr=null,Ch=!1,dy=null,Wi=null,id=!1,Di=null,Ah=0,Wl=0,hy=null,zd=-1,$d=0;function Yt(){return _e&6?Xe():zd!==-1?zd:zd=Xe()}function Hi(t){return t.mode&1?_e&2&&St!==0?St&-St:bO.transition!==null?($d===0&&($d=IE()),$d):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:OE(t.type)),t):1}function Xn(t,e,n,r){if(50<Wl)throw Wl=0,hy=null,Error(U(185));Zc(t,n,r),(!(_e&2)||t!==vt)&&(t===vt&&(!(_e&2)&&(Df|=n),ut===4&&ki(t,St)),cn(t,r),n===1&&_e===0&&!(e.mode&1)&&(va=Xe()+500,If&&us()))}function cn(t,e){var n=t.callbackNode;bM(t,e);var r=fh(t,t===vt?St:0);if(r===0)n!==null&&Cx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Cx(n),e===1)t.tag===0?xO(xb.bind(null,t)):eP(xb.bind(null,t)),yO(function(){!(_e&6)&&us()}),n=null;else{switch(CE(r)){case 1:n=z0;break;case 4:n=EE;break;case 16:n=hh;break;case 536870912:n=PE;break;default:n=hh}n=JP(n,HP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function HP(t,e){if(zd=-1,$d=0,_e&6)throw Error(U(327));var n=t.callbackNode;if(ra()&&t.callbackNode!==n)return null;var r=fh(t,t===vt?St:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Rh(t,r);else{e=r;var i=_e;_e|=2;var s=GP();(vt!==t||St!==e)&&(Rr=null,va=Xe()+500,Ws(t,e));do try{zO();break}catch(a){qP(t,a)}while(!0);tv(),Ih.current=s,_e=i,it!==null?e=0:(vt=null,St=0,e=ut)}if(e!==0){if(e===2&&(i=Fg(t),i!==0&&(r=i,e=fy(t,i))),e===1)throw n=Sc,Ws(t,0),ki(t,r),cn(t,Xe()),n;if(e===6)ki(t,r);else{if(i=t.current.alternate,!(r&30)&&!UO(i)&&(e=Rh(t,r),e===2&&(s=Fg(t),s!==0&&(r=s,e=fy(t,s))),e===1))throw n=Sc,Ws(t,0),ki(t,r),cn(t,Xe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Is(t,nn,Rr);break;case 3:if(ki(t,r),(r&130023424)===r&&(e=gv+500-Xe(),10<e)){if(fh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gg(Is.bind(null,t,nn,Rr),e);break}Is(t,nn,Rr);break;case 4:if(ki(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Yn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FO(r/1960))-r,10<r){t.timeoutHandle=Gg(Is.bind(null,t,nn,Rr),r);break}Is(t,nn,Rr);break;case 5:Is(t,nn,Rr);break;default:throw Error(U(329))}}}return cn(t,Xe()),t.callbackNode===n?HP.bind(null,t):null}function fy(t,e){var n=$l;return t.current.memoizedState.isDehydrated&&(Ws(t,e).flags|=256),t=Rh(t,e),t!==2&&(e=nn,nn=n,e!==null&&py(e)),t}function py(t){nn===null?nn=t:nn.push.apply(nn,t)}function UO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ki(t,e){for(e&=~mv,e&=~Df,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yn(e),r=1<<n;t[n]=-1,e&=~r}}function xb(t){if(_e&6)throw Error(U(327));ra();var e=fh(t,0);if(!(e&1))return cn(t,Xe()),null;var n=Rh(t,e);if(t.tag!==0&&n===2){var r=Fg(t);r!==0&&(e=r,n=fy(t,r))}if(n===1)throw n=Sc,Ws(t,0),ki(t,e),cn(t,Xe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Is(t,nn,Rr),cn(t,Xe()),null}function yv(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(va=Xe()+500,If&&us())}}function eo(t){Di!==null&&Di.tag===0&&!(_e&6)&&ra();var e=_e;_e|=1;var n=Mn.transition,r=Pe;try{if(Mn.transition=null,Pe=1,t)return t()}finally{Pe=r,Mn.transition=n,_e=e,!(_e&6)&&us()}}function vv(){mn=qo.current,je(qo)}function Ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gO(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(J0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vh();break;case 3:ga(),je(an),je($t),av();break;case 5:ov(r);break;case 4:ga();break;case 13:je(Ue);break;case 19:je(Ue);break;case 10:nv(r.type._context);break;case 22:case 23:vv()}n=n.return}if(vt=t,it=t=qi(t.current,null),St=mn=e,ut=0,Sc=null,mv=Df=Zs=0,nn=$l=null,Ls!==null){for(e=0;e<Ls.length;e++)if(n=Ls[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ls=null}return t}function qP(t,e){do{var n=it;try{if(tv(),Fd.current=Ph,Eh){for(var r=$e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Eh=!1}if(Js=0,gt=ct=$e=null,Bl=!1,xc=0,pv.current=null,n===null||n.return===null){ut=1,Sc=e,it=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=St,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=lb(o);if(m!==null){m.flags&=-257,cb(m,o,a,s,e),m.mode&1&&ab(s,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){ab(s,c,e),_v();break e}l=Error(U(426))}}else if(Ve&&a.mode&1){var x=lb(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),cb(x,o,a,s,e),Z0(ya(l,a));break e}}s=l=ya(l,a),ut!==4&&(ut=2),$l===null?$l=[s]:$l.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=CP(s,l,e);tb(s,w);break e;case 1:a=l;var _=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Wi===null||!Wi.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=AP(s,a,e);tb(s,P);break e}}s=s.return}while(s!==null)}QP(n)}catch(A){e=A,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function GP(){var t=Ih.current;return Ih.current=Ph,t===null?Ph:t}function _v(){(ut===0||ut===3||ut===2)&&(ut=4),vt===null||!(Zs&268435455)&&!(Df&268435455)||ki(vt,St)}function Rh(t,e){var n=_e;_e|=2;var r=GP();(vt!==t||St!==e)&&(Rr=null,Ws(t,e));do try{BO();break}catch(i){qP(t,i)}while(!0);if(tv(),_e=n,Ih.current=r,it!==null)throw Error(U(261));return vt=null,St=0,ut}function BO(){for(;it!==null;)KP(it)}function zO(){for(;it!==null&&!fM();)KP(it)}function KP(t){var e=XP(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?QP(t):it=e,pv.current=null}function QP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OO(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,it=null;return}}else if(n=MO(n,e,mn),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ut===0&&(ut=5)}function Is(t,e,n){var r=Pe,i=Mn.transition;try{Mn.transition=null,Pe=1,$O(t,e,n,r)}finally{Mn.transition=i,Pe=r}return null}function $O(t,e,n,r){do ra();while(Di!==null);if(_e&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(TM(t,s),t===vt&&(it=vt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||id||(id=!0,JP(hh,function(){return ra(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Mn.transition,Mn.transition=null;var o=Pe;Pe=1;var a=_e;_e|=4,pv.current=null,LO(t,n),$P(n,t),cO(Hg),ph=!!Wg,Hg=Wg=null,t.current=n,VO(n),pM(),_e=a,Pe=o,Mn.transition=s}else t.current=n;if(id&&(id=!1,Di=t,Ah=i),s=t.pendingLanes,s===0&&(Wi=null),yM(n.stateNode),cn(t,Xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ch)throw Ch=!1,t=dy,dy=null,t;return Ah&1&&t.tag!==0&&ra(),s=t.pendingLanes,s&1?t===hy?Wl++:(Wl=0,hy=t):Wl=0,us(),null}function ra(){if(Di!==null){var t=CE(Ah),e=Mn.transition,n=Pe;try{if(Mn.transition=null,Pe=16>t?16:t,Di===null)var r=!1;else{if(t=Di,Di=null,Ah=0,_e&6)throw Error(U(331));var i=_e;for(_e|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var u=H;switch(u.tag){case 0:case 11:case 15:zl(8,u,s)}var h=u.child;if(h!==null)h.return=u,H=h;else for(;H!==null;){u=H;var f=u.sibling,m=u.return;if(UP(u),u===c){H=null;break}if(f!==null){f.return=m,H=f;break}H=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zl(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,H=w;break e}H=s.return}}var _=t.current;for(H=_;H!==null;){o=H;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,H=T;else e:for(o=_;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Rf(9,a)}}catch(A){Ke(a,a.return,A)}if(a===o){H=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,H=P;break e}H=a.return}}if(_e=i,us(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(Tf,t)}catch{}r=!0}return r}finally{Pe=n,Mn.transition=e}}return!1}function bb(t,e,n){e=ya(n,e),e=CP(t,e,1),t=$i(t,e,1),e=Yt(),t!==null&&(Zc(t,1,e),cn(t,e))}function Ke(t,e,n){if(t.tag===3)bb(t,t,n);else for(;e!==null;){if(e.tag===3){bb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wi===null||!Wi.has(r))){t=ya(n,t),t=AP(e,t,1),e=$i(e,t,1),t=Yt(),e!==null&&(Zc(e,1,t),cn(e,t));break}}e=e.return}}function WO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(St&n)===n&&(ut===4||ut===3&&(St&130023424)===St&&500>Xe()-gv?Ws(t,0):mv|=n),cn(t,e)}function YP(t,e){e===0&&(t.mode&1?(e=Ku,Ku<<=1,!(Ku&130023424)&&(Ku=4194304)):e=1);var n=Yt();t=Jr(t,e),t!==null&&(Zc(t,e,n),cn(t,n))}function HO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),YP(t,n)}function qO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),YP(t,n)}var XP;XP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,NO(t,e,n);on=!!(t.flags&131072)}else on=!1,Ve&&e.flags&1048576&&tP(e,xh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bd(t,e),t=e.pendingProps;var i=fa(e,$t.current);na(e,n),i=cv(null,e,r,t,i,n);var s=uv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(s=!0,_h(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,iv(e),i.updater=Af,e.stateNode=i,i._reactInternals=e,ey(e,r,t,n),e=ry(null,e,r,!0,s,n)):(e.tag=0,Ve&&s&&X0(e),Qt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=KO(r),t=Hn(r,t),i){case 0:e=ny(null,e,r,t,n);break e;case 1:e=hb(null,e,r,t,n);break e;case 11:e=ub(null,e,r,t,n);break e;case 14:e=db(null,e,r,Hn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),ny(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),hb(t,e,r,i,n);case 3:e:{if(MP(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,aP(t,e),Sh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ya(Error(U(423)),e),e=fb(t,e,r,n,i);break e}else if(r!==i){i=ya(Error(U(424)),e),e=fb(t,e,r,n,i);break e}else for(yn=zi(e.stateNode.containerInfo.firstChild),_n=e,Ve=!0,Kn=null,n=sP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pa(),r===i){e=Zr(t,e,n);break e}Qt(t,e,r,n)}e=e.child}return e;case 5:return lP(e),t===null&&Xg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,qg(r,i)?o=null:s!==null&&qg(r,s)&&(e.flags|=32),NP(t,e),Qt(t,e,o,n),e.child;case 6:return t===null&&Xg(e),null;case 13:return OP(t,e,n);case 4:return sv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ma(e,null,r,n):Qt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),ub(t,e,r,i,n);case 7:return Qt(t,e,e.pendingProps,n),e.child;case 8:return Qt(t,e,e.pendingProps.children,n),e.child;case 12:return Qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ae(bh,r._currentValue),r._currentValue=o,s!==null)if(Zn(s.value,o)){if(s.children===i.children&&!an.current){e=Zr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Hr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Jg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Jg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,na(e,n),i=Ln(i),r=r(i),e.flags|=1,Qt(t,e,r,n),e.child;case 14:return r=e.type,i=Hn(r,e.pendingProps),i=Hn(r.type,i),db(t,e,r,i,n);case 15:return RP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),Bd(t,e),e.tag=1,ln(r)?(t=!0,_h(e)):t=!1,na(e,n),IP(e,r,i),ey(e,r,i,n),ry(null,e,r,!0,t,n);case 19:return jP(t,e,n);case 22:return DP(t,e,n)}throw Error(U(156,e.tag))};function JP(t,e){return kE(t,e)}function GO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,r){return new GO(t,e,n,r)}function wv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KO(t){if(typeof t=="function")return wv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===F0)return 11;if(t===U0)return 14}return 2}function qi(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")wv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jo:return Hs(n.children,i,s,e);case V0:o=8,i|=8;break;case Sg:return t=Dn(12,n,e,i|2),t.elementType=Sg,t.lanes=s,t;case kg:return t=Dn(13,n,e,i),t.elementType=kg,t.lanes=s,t;case Eg:return t=Dn(19,n,e,i),t.elementType=Eg,t.lanes=s,t;case lE:return Nf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oE:o=10;break e;case aE:o=9;break e;case F0:o=11;break e;case U0:o=14;break e;case wi:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Dn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Hs(t,e,n,r){return t=Dn(7,t,r,e),t.lanes=n,t}function Nf(t,e,n,r){return t=Dn(22,t,r,e),t.elementType=lE,t.lanes=n,t.stateNode={isHidden:!1},t}function Em(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function Pm(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QO(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=am(0),this.expirationTimes=am(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=am(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xv(t,e,n,r,i,s,o,a,l){return t=new QO(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Dn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},iv(s),t}function YO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ZP(t){if(!t)return ts;t=t._reactInternals;e:{if(fo(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(ln(n))return ZE(t,n,e)}return e}function eI(t,e,n,r,i,s,o,a,l){return t=xv(n,r,!0,t,i,s,o,a,l),t.context=ZP(null),n=t.current,r=Yt(),i=Hi(n),s=Hr(r,i),s.callback=e??null,$i(n,s,i),t.current.lanes=i,Zc(t,i,r),cn(t,r),t}function Mf(t,e,n,r){var i=e.current,s=Yt(),o=Hi(i);return n=ZP(n),e.context===null?e.context=n:e.pendingContext=n,e=Hr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=$i(i,e,o),t!==null&&(Xn(t,i,o,s),Vd(t,i,o)),o}function Dh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bv(t,e){Tb(t,e),(t=t.alternate)&&Tb(t,e)}function XO(){return null}var tI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tv(t){this._internalRoot=t}Of.prototype.render=Tv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Mf(t,e,null,null)};Of.prototype.unmount=Tv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;eo(function(){Mf(null,t,null,null)}),e[Xr]=null}};function Of(t){this._internalRoot=t}Of.prototype.unstable_scheduleHydration=function(t){if(t){var e=DE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Si.length&&e!==0&&e<Si[n].priority;n++);Si.splice(n,0,t),n===0&&ME(t)}};function Sv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sb(){}function JO(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Dh(o);s.call(c)}}var o=eI(e,r,t,0,null,!1,!1,"",Sb);return t._reactRootContainer=o,t[Xr]=o.current,gc(t.nodeType===8?t.parentNode:t),eo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Dh(l);a.call(c)}}var l=xv(t,0,!1,null,null,!1,!1,"",Sb);return t._reactRootContainer=l,t[Xr]=l.current,gc(t.nodeType===8?t.parentNode:t),eo(function(){Mf(e,l,n,r)}),l}function Lf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Dh(o);a.call(l)}}Mf(e,o,t,i)}else o=JO(n,e,t,i,r);return Dh(o)}AE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bl(e.pendingLanes);n!==0&&($0(e,n|1),cn(e,Xe()),!(_e&6)&&(va=Xe()+500,us()))}break;case 13:eo(function(){var r=Jr(t,1);if(r!==null){var i=Yt();Xn(r,t,1,i)}}),bv(t,1)}};W0=function(t){if(t.tag===13){var e=Jr(t,134217728);if(e!==null){var n=Yt();Xn(e,t,134217728,n)}bv(t,134217728)}};RE=function(t){if(t.tag===13){var e=Hi(t),n=Jr(t,e);if(n!==null){var r=Yt();Xn(n,t,e,r)}bv(t,e)}};DE=function(){return Pe};NE=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};jg=function(t,e,n){switch(e){case"input":if(Cg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Pf(r);if(!i)throw Error(U(90));uE(r),Cg(r,i)}}}break;case"textarea":hE(t,n);break;case"select":e=n.value,e!=null&&Jo(t,!!n.multiple,e,!1)}};_E=yv;wE=eo;var ZO={usingClientEntryPoint:!1,Events:[tu,Uo,Pf,yE,vE,yv]},dl={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ej={bundleType:dl.bundleType,version:dl.version,rendererPackageName:dl.rendererPackageName,rendererConfig:dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:li.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=TE(t),t===null?null:t.stateNode},findFiberByHostInstance:dl.findFiberByHostInstance||XO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{Tf=sd.inject(ej),fr=sd}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZO;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sv(e))throw Error(U(200));return YO(t,e,null,n)};bn.createRoot=function(t,e){if(!Sv(t))throw Error(U(299));var n=!1,r="",i=tI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=xv(t,1,!1,null,null,n,!1,r,i),t[Xr]=e.current,gc(t.nodeType===8?t.parentNode:t),new Tv(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=TE(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return eo(t)};bn.hydrate=function(t,e,n){if(!jf(e))throw Error(U(200));return Lf(null,t,e,!0,n)};bn.hydrateRoot=function(t,e,n){if(!Sv(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=tI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=eI(e,null,t,1,n??null,i,!1,s,o),t[Xr]=e.current,gc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Of(e)};bn.render=function(t,e,n){if(!jf(e))throw Error(U(200));return Lf(null,t,e,!1,n)};bn.unmountComponentAtNode=function(t){if(!jf(t))throw Error(U(40));return t._reactRootContainer?(eo(function(){Lf(null,null,t,!1,function(){t._reactRootContainer=null,t[Xr]=null})}),!0):!1};bn.unstable_batchedUpdates=yv;bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jf(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Lf(t,e,n,!1,r)};bn.version="18.3.1-next-f1338f8080-20240426";function nI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nI)}catch(t){console.error(t)}}nI(),nE.exports=bn;var tj=nE.exports,kb=tj;bg.createRoot=kb.createRoot,bg.hydrateRoot=kb.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kc.apply(this,arguments)}var Ni;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ni||(Ni={}));const Eb="popstate";function nj(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return my("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Nh(i)}return ij(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rj(){return Math.random().toString(36).substr(2,8)}function Pb(t,e){return{usr:t.state,key:t.key,idx:e}}function my(t,e,n,r){return n===void 0&&(n=null),kc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Oa(e):e,{state:n,key:e&&e.key||r||rj()})}function Nh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Oa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ij(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ni.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(kc({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Ni.Pop;let x=u(),w=x==null?null:x-c;c=x,l&&l({action:a,location:v.location,delta:w})}function f(x,w){a=Ni.Push;let _=my(v.location,x,w);c=u()+1;let T=Pb(_,c),P=v.createHref(_);try{o.pushState(T,"",P)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(P)}s&&l&&l({action:a,location:v.location,delta:1})}function m(x,w){a=Ni.Replace;let _=my(v.location,x,w);c=u();let T=Pb(_,c),P=v.createHref(_);o.replaceState(T,"",P),s&&l&&l({action:a,location:v.location,delta:0})}function g(x){let w=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof x=="string"?x:Nh(x);return _=_.replace(/ $/,"%20"),We(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let v={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Eb,h),l=x,()=>{i.removeEventListener(Eb,h),l=null}},createHref(x){return e(i,x)},createURL:g,encodeLocation(x){let w=g(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(x){return o.go(x)}};return v}var Ib;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ib||(Ib={}));function sj(t,e,n){return n===void 0&&(n="/"),oj(t,e,n)}function oj(t,e,n,r){let i=typeof e=="string"?Oa(e):e,s=_a(i.pathname||"/",n);if(s==null)return null;let o=rI(t);aj(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=vj(s);a=gj(o[l],c)}return a}function rI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(We(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Gi([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(We(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),rI(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:pj(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of iI(s.path))i(s,o,l)}),e}function iI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=iI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function aj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lj=/^:[\w-]+$/,cj=3,uj=2,dj=1,hj=10,fj=-2,Cb=t=>t==="*";function pj(t,e){let n=t.split("/"),r=n.length;return n.some(Cb)&&(r+=fj),e&&(r+=uj),n.filter(i=>!Cb(i)).reduce((i,s)=>i+(lj.test(s)?cj:s===""?dj:hj),r)}function mj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function gj(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=gy({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Gi([s,h.pathname]),pathnameBase:Tj(Gi([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Gi([s,h.pathnameBase]))}return o}function gy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=yj(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let v=a[h]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[h];return m&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function yj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),kv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function vj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _a(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const _j=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wj=t=>_j.test(t);function xj(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Oa(t):t,s;if(n)if(wj(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),kv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Ab(n.substring(1),"/"):s=Ab(n,e)}else s=e;return{pathname:s,search:Sj(r),hash:kj(i)}}function Ab(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Im(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ev(t,e){let n=bj(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Pv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Oa(t):(i=kc({},t),We(!i.pathname||!i.pathname.includes("?"),Im("?","pathname","search",i)),We(!i.pathname||!i.pathname.includes("#"),Im("#","pathname","hash",i)),We(!i.search||!i.search.includes("#"),Im("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=xj(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Gi=t=>t.join("/").replace(/\/\/+/g,"/"),Tj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Sj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ej(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sI=["post","put","patch","delete"];new Set(sI);const Pj=["get",...sI];new Set(Pj);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ec(){return Ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ec.apply(this,arguments)}const Vf=N.createContext(null),oI=N.createContext(null),ci=N.createContext(null),Ff=N.createContext(null),ui=N.createContext({outlet:null,matches:[],isDataRoute:!1}),aI=N.createContext(null);function Ij(t,e){let{relative:n}=e===void 0?{}:e;ja()||We(!1);let{basename:r,navigator:i}=N.useContext(ci),{hash:s,pathname:o,search:a}=Uf(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Gi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ja(){return N.useContext(Ff)!=null}function po(){return ja()||We(!1),N.useContext(Ff).location}function lI(t){N.useContext(ci).static||N.useLayoutEffect(t)}function cI(){let{isDataRoute:t}=N.useContext(ui);return t?$j():Cj()}function Cj(){ja()||We(!1);let t=N.useContext(Vf),{basename:e,future:n,navigator:r}=N.useContext(ci),{matches:i}=N.useContext(ui),{pathname:s}=po(),o=JSON.stringify(Ev(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return lI(()=>{a.current=!0}),N.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Pv(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Gi([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,t])}const Aj=N.createContext(null);function Rj(t){let e=N.useContext(ui).outlet;return e&&N.createElement(Aj.Provider,{value:t},e)}function Uf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(ci),{matches:i}=N.useContext(ui),{pathname:s}=po(),o=JSON.stringify(Ev(i,r.v7_relativeSplatPath));return N.useMemo(()=>Pv(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Dj(t,e){return Nj(t,e)}function Nj(t,e,n,r){ja()||We(!1);let{navigator:i}=N.useContext(ci),{matches:s}=N.useContext(ui),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=po(),u;if(e){var h;let x=typeof e=="string"?Oa(e):e;l==="/"||(h=x.pathname)!=null&&h.startsWith(l)||We(!1),u=x}else u=c;let f=u.pathname||"/",m=f;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=sj(t,{pathname:m}),v=Vj(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Gi([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Gi([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&v?N.createElement(Ff.Provider,{value:{location:Ec({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ni.Pop}},v):v}function Mj(){let t=zj(),e=Ej(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,null)}const Oj=N.createElement(Mj,null);class jj extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(ui.Provider,{value:this.props.routeContext},N.createElement(aI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Lj(t){let{routeContext:e,match:n,children:r}=t,i=N.useContext(Vf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(ui.Provider,{value:e},r)}function Vj(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||We(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:m}=n,g=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let m,g=!1,v=null,x=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||Oj,l&&(c<0&&f===0?(Wj("route-fallback"),g=!0,x=null):c===f&&(g=!0,x=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),_=()=>{let T;return m?T=v:g?T=x:h.route.Component?T=N.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=u,N.createElement(Lj,{match:h,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:T})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?N.createElement(jj,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var uI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(uI||{}),dI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(dI||{});function Fj(t){let e=N.useContext(Vf);return e||We(!1),e}function Uj(t){let e=N.useContext(oI);return e||We(!1),e}function Bj(t){let e=N.useContext(ui);return e||We(!1),e}function hI(t){let e=Bj(),n=e.matches[e.matches.length-1];return n.route.id||We(!1),n.route.id}function zj(){var t;let e=N.useContext(aI),n=Uj(),r=hI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function $j(){let{router:t}=Fj(uI.UseNavigateStable),e=hI(dI.UseNavigateStable),n=N.useRef(!1);return lI(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ec({fromRouteId:e},s)))},[t,e])}const Rb={};function Wj(t,e,n){Rb[t]||(Rb[t]=!0)}function Hj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function yy(t){let{to:e,replace:n,state:r,relative:i}=t;ja()||We(!1);let{future:s,static:o}=N.useContext(ci),{matches:a}=N.useContext(ui),{pathname:l}=po(),c=cI(),u=Pv(e,Ev(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(u);return N.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function qj(t){return Rj(t.context)}function Wn(t){We(!1)}function Gj(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ni.Pop,navigator:s,static:o=!1,future:a}=t;ja()&&We(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:o,future:Ec({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Oa(r));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:g="default"}=r,v=N.useMemo(()=>{let x=_a(u,l);return x==null?null:{location:{pathname:x,search:h,hash:f,state:m,key:g},navigationType:i}},[l,u,h,f,m,g,i]);return v==null?null:N.createElement(ci.Provider,{value:c},N.createElement(Ff.Provider,{children:n,value:v}))}function Kj(t){let{children:e,location:n}=t;return Dj(vy(e),n)}new Promise(()=>{});function vy(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,vy(r.props.children,s));return}r.type!==Wn&&We(!1),!r.props.index||!r.props.children||We(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=vy(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mh(){return Mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mh.apply(this,arguments)}function fI(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Qj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Yj(t,e){return t.button===0&&(!e||e==="_self")&&!Qj(t)}const Xj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Jj=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Zj="6";try{window.__reactRouterVersion=Zj}catch{}const eL=N.createContext({isTransitioning:!1}),tL="startTransition",Db=WN[tL];function nL(t){let{basename:e,children:n,future:r,window:i}=t,s=N.useRef();s.current==null&&(s.current=nj({window:i,v5Compat:!0}));let o=s.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=N.useCallback(h=>{c&&Db?Db(()=>l(h)):l(h)},[l,c]);return N.useLayoutEffect(()=>o.listen(u),[o,u]),N.useEffect(()=>Hj(r),[r]),N.createElement(Gj,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const rL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_y=N.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,f=fI(e,Xj),{basename:m}=N.useContext(ci),g,v=!1;if(typeof c=="string"&&iL.test(c)&&(g=c,rL))try{let T=new URL(window.location.href),P=c.startsWith("//")?new URL(T.protocol+c):new URL(c),A=_a(P.pathname,m);P.origin===T.origin&&A!=null?c=A+P.search+P.hash:v=!0}catch{}let x=Ij(c,{relative:i}),w=oL(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:h});function _(T){r&&r(T),T.defaultPrevented||w(T)}return N.createElement("a",Mh({},f,{href:g||x,onClick:v||s?r:_,ref:n,target:l}))}),wy=N.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,h=fI(e,Jj),f=Uf(l,{relative:h.relative}),m=po(),g=N.useContext(oI),{navigator:v,basename:x}=N.useContext(ci),w=g!=null&&aL(f)&&c===!0,_=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,T=m.pathname,P=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(T=T.toLowerCase(),P=P?P.toLowerCase():null,_=_.toLowerCase()),P&&x&&(P=_a(P,x)||P);const A=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let O=T===_||!o&&T.startsWith(_)&&T.charAt(A)==="/",E=P!=null&&(P===_||!o&&P.startsWith(_)&&P.charAt(_.length)==="/"),S={isActive:O,isPending:E,isTransitioning:w},k=O?r:void 0,C;typeof s=="function"?C=s(S):C=[s,O?"active":null,E?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let D=typeof a=="function"?a(S):a;return N.createElement(_y,Mh({},h,{"aria-current":k,className:C,ref:n,style:D,to:l,viewTransition:c}),typeof u=="function"?u(S):u)});var xy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xy||(xy={}));var Nb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Nb||(Nb={}));function sL(t){let e=N.useContext(Vf);return e||We(!1),e}function oL(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=cI(),c=po(),u=Uf(t,{relative:o});return N.useCallback(h=>{if(Yj(h,n)){h.preventDefault();let f=r!==void 0?r:Nh(c)===Nh(u);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function aL(t,e){e===void 0&&(e={});let n=N.useContext(eL);n==null&&We(!1);let{basename:r}=sL(xy.useViewTransitionState),i=Uf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=_a(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=_a(n.nextLocation.pathname,r)||n.nextLocation.pathname;return gy(i.pathname,o)!=null||gy(i.pathname,s)!=null}let lL={data:""},cL=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||lL},uL=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,dL=/\/\*[^]*?\*\/|  +/g,Mb=/\n+/g,Ei=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Ei(o,s):s+"{"+Ei(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Ei(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ei.p?Ei.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Pr={},pI=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+pI(t[n]);return e}return t},hL=(t,e,n,r,i)=>{let s=pI(t),o=Pr[s]||(Pr[s]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(s));if(!Pr[o]){let l=s!==t?t:(c=>{let u,h,f=[{}];for(;u=uL.exec(c.replace(dL,""));)u[4]?f.shift():u[3]?(h=u[3].replace(Mb," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(Mb," ").trim();return f[0]})(t);Pr[o]=Ei(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Pr.g?Pr.g:null;return n&&(Pr.g=Pr[o]),((l,c,u,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Pr[o],e,r,a),o},fL=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Ei(a,""):a===!1?"":a}return r+i+(o??"")},"");function Bf(t){let e=this||{},n=t.call?t(e.p):t;return hL(n.unshift?n.raw?fL(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,cL(e.target),e.g,e.o,e.k)}let mI,by,Ty;Bf.bind({g:1});let ei=Bf.bind({k:1});function pL(t,e,n,r){Ei.p=e,mI=t,by=n,Ty=r}function ds(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:by&&by()},a),n.o=/ *go\d+/.test(l),a.className=Bf.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),Ty&&c[0]&&Ty(a),mI(c,a)}return i}}var mL=t=>typeof t=="function",Oh=(t,e)=>mL(t)?t(e):t,gL=(()=>{let t=0;return()=>(++t).toString()})(),gI=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),yL=20,Iv="default",yI=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return yI(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+s}))}}},Hd=[],vI={toasts:[],pausedAt:void 0,settings:{toastLimit:yL}},hr={},_I=(t,e=Iv)=>{hr[e]=yI(hr[e]||vI,t),Hd.forEach(([n,r])=>{n===e&&r(hr[e])})},wI=t=>Object.keys(hr).forEach(e=>_I(t,e)),vL=t=>Object.keys(hr).find(e=>hr[e].toasts.some(n=>n.id===t)),zf=(t=Iv)=>e=>{_I(e,t)},_L={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},wL=(t={},e=Iv)=>{let[n,r]=N.useState(hr[e]||vI),i=N.useRef(hr[e]);N.useEffect(()=>(i.current!==hr[e]&&r(hr[e]),Hd.push([e,r]),()=>{let o=Hd.findIndex(([a])=>a===e);o>-1&&Hd.splice(o,1)}),[e]);let s=n.toasts.map(o=>{var a,l,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((a=t[o.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((l=t[o.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||_L[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...n,toasts:s}},xL=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||gL()}),ru=t=>(e,n)=>{let r=xL(e,t,n);return zf(r.toasterId||vL(r.id))({type:2,toast:r}),r.id},yt=(t,e)=>ru("blank")(t,e);yt.error=ru("error");yt.success=ru("success");yt.loading=ru("loading");yt.custom=ru("custom");yt.dismiss=(t,e)=>{let n={type:3,toastId:t};e?zf(e)(n):wI(n)};yt.dismissAll=t=>yt.dismiss(void 0,t);yt.remove=(t,e)=>{let n={type:4,toastId:t};e?zf(e)(n):wI(n)};yt.removeAll=t=>yt.remove(void 0,t);yt.promise=(t,e,n)=>{let r=yt.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?Oh(e.success,i):void 0;return s?yt.success(s,{id:r,...n,...n==null?void 0:n.success}):yt.dismiss(r),i}).catch(i=>{let s=e.error?Oh(e.error,i):void 0;s?yt.error(s,{id:r,...n,...n==null?void 0:n.error}):yt.dismiss(r)}),t};var bL=1e3,TL=(t,e="default")=>{let{toasts:n,pausedAt:r}=wL(t,e),i=N.useRef(new Map).current,s=N.useCallback((h,f=bL)=>{if(i.has(h))return;let m=setTimeout(()=>{i.delete(h),o({type:4,toastId:h})},f);i.set(h,m)},[]);N.useEffect(()=>{if(r)return;let h=Date.now(),f=n.map(m=>{if(m.duration===1/0)return;let g=(m.duration||0)+m.pauseDuration-(h-m.createdAt);if(g<0){m.visible&&yt.dismiss(m.id);return}return setTimeout(()=>yt.dismiss(m.id,e),g)});return()=>{f.forEach(m=>m&&clearTimeout(m))}},[n,r,e]);let o=N.useCallback(zf(e),[e]),a=N.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=N.useCallback((h,f)=>{o({type:1,toast:{id:h,height:f}})},[o]),c=N.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),u=N.useCallback((h,f)=>{let{reverseOrder:m=!1,gutter:g=8,defaultPosition:v}=f||{},x=n.filter(T=>(T.position||v)===(h.position||v)&&T.height),w=x.findIndex(T=>T.id===h.id),_=x.filter((T,P)=>P<w&&T.visible).length;return x.filter(T=>T.visible).slice(...m?[_+1]:[0,_]).reduce((T,P)=>T+(P.height||0)+g,0)},[n]);return N.useEffect(()=>{n.forEach(h=>{if(h.dismissed)s(h.id,h.removeDelay);else{let f=i.get(h.id);f&&(clearTimeout(f),i.delete(h.id))}})},[n,s]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},SL=ei`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,kL=ei`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,EL=ei`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,PL=ds("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${SL} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${kL} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${EL} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,IL=ei`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,CL=ds("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${IL} 1s linear infinite;
`,AL=ei`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,RL=ei`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,DL=ds("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${AL} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${RL} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,NL=ds("div")`
  position: absolute;
`,ML=ds("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,OL=ei`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,jL=ds("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${OL} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,LL=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?N.createElement(jL,null,e):e:n==="blank"?null:N.createElement(ML,null,N.createElement(CL,{...r}),n!=="loading"&&N.createElement(NL,null,n==="error"?N.createElement(PL,{...r}):N.createElement(DL,{...r})))},VL=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,FL=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,UL="0%{opacity:0;} 100%{opacity:1;}",BL="0%{opacity:1;} 100%{opacity:0;}",zL=ds("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,$L=ds("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,WL=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=gI()?[UL,BL]:[VL(n),FL(n)];return{animation:e?`${ei(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ei(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},HL=N.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?WL(t.position||e||"top-center",t.visible):{opacity:0},s=N.createElement(LL,{toast:t}),o=N.createElement($L,{...t.ariaProps},Oh(t.message,t));return N.createElement(zL,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):N.createElement(N.Fragment,null,s,o))});pL(N.createElement);var qL=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=N.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return N.createElement("div",{ref:s,className:e,style:n},i)},GL=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:gI()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},KL=Bf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,od=16,QL=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:s,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=TL(n,s);return N.createElement("div",{"data-rht-toaster":s||"",style:{position:"fixed",zIndex:9999,top:od,left:od,right:od,bottom:od,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let h=u.position||e,f=c.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),m=GL(h,f);return N.createElement(qL,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?KL:"",style:m},u.type==="custom"?Oh(u.message,u):i?i(u):N.createElement(HL,{toast:u,position:h}))}))};const YL="modulepreload",XL=function(t,e){return new URL(t,e).href},Ob={},Sy=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=XL(c,r),c in Ob)return;Ob[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!r)for(let g=o.length-1;g>=0;g--){const v=o[g];if(v.href===c&&(!u||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":YL,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((g,v)=>{m.addEventListener("load",g),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},JL={},jb=t=>{let e;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const m=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(g=>g(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(JL?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},ZL=t=>t?jb(t):jb;var xI={exports:{}},bI={},TI={exports:{}},SI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wa=N;function eV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tV=typeof Object.is=="function"?Object.is:eV,nV=wa.useState,rV=wa.useEffect,iV=wa.useLayoutEffect,sV=wa.useDebugValue;function oV(t,e){var n=e(),r=nV({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return iV(function(){i.value=n,i.getSnapshot=e,Cm(i)&&s({inst:i})},[t,n,e]),rV(function(){return Cm(i)&&s({inst:i}),t(function(){Cm(i)&&s({inst:i})})},[t]),sV(n),n}function Cm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tV(t,n)}catch{return!0}}function aV(t,e){return e()}var lV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?aV:oV;SI.useSyncExternalStore=wa.useSyncExternalStore!==void 0?wa.useSyncExternalStore:lV;TI.exports=SI;var cV=TI.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=N,uV=cV;function dV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hV=typeof Object.is=="function"?Object.is:dV,fV=uV.useSyncExternalStore,pV=$f.useRef,mV=$f.useEffect,gV=$f.useMemo,yV=$f.useDebugValue;bI.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=pV(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=gV(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),i!==void 0&&o.hasValue){var g=o.value;if(i(g,m))return h=g}return h=m}if(g=h,hV(u,m))return g;var v=r(m);return i!==void 0&&i(g,v)?(u=m,g):(u=m,h=v)}var c=!1,u,h,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=fV(t,s[0],s[1]);return mV(function(){o.hasValue=!0,o.value=a},[a]),yV(a),a};xI.exports=bI;var vV=xI.exports;const _V=Wk(vV),kI={},{useDebugValue:wV}=dn,{useSyncExternalStoreWithSelector:xV}=_V;let Lb=!1;const bV=t=>t;function TV(t,e=bV,n){(kI?"production":void 0)!=="production"&&n&&!Lb&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Lb=!0);const r=xV(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return wV(r),r}const SV=t=>{(kI?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?ZL(t):t,n=(r,i)=>TV(e,r,i);return Object.assign(n,e),n},Wf=t=>SV,kV={};function EV(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const Pc=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Pc(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Pc(r)(n)}}}},PV=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...x)},r,i);const u=Pc(s.serialize),h=()=>{const x=s.partialize({...r()});let w;const _=u({state:x,version:s.version}).then(T=>c.setItem(s.name,T)).catch(T=>{w=T});if(w)throw w;return _},f=i.setState;i.setState=(x,w)=>{f(x,w),h()};const m=t((...x)=>{n(...x),h()},r,i);let g;const v=()=>{var x;if(!c)return;o=!1,a.forEach(_=>_(r()));const w=((x=s.onRehydrateStorage)==null?void 0:x.call(s,r()))||void 0;return Pc(c.getItem.bind(c))(s.name).then(_=>{if(_)return s.deserialize(_)}).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==s.version){if(s.migrate)return s.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var T;return g=s.merge(_,(T=r())!=null?T:m),n(g,!0),h()}).then(()=>{w==null||w(g,void 0),o=!0,l.forEach(_=>_(g))}).catch(_=>{w==null||w(void 0,_)})};return i.persist={setOptions:x=>{s={...s,...x},x.getStorage&&(c=x.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:x=>(a.add(x),()=>{a.delete(x)}),onFinishHydration:x=>(l.add(x),()=>{l.delete(x)})},v(),g||m},IV=(t,e)=>(n,r,i)=>{let s={storage:EV(()=>localStorage),partialize:v=>v,version:0,merge:(v,x)=>({...x,...v}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...v)},r,i);const u=()=>{const v=s.partialize({...r()});return c.setItem(s.name,{state:v,version:s.version})},h=i.setState;i.setState=(v,x)=>{h(v,x),u()};const f=t((...v)=>{n(...v),u()},r,i);i.getInitialState=()=>f;let m;const g=()=>{var v,x;if(!c)return;o=!1,a.forEach(_=>{var T;return _((T=r())!=null?T:f)});const w=((x=s.onRehydrateStorage)==null?void 0:x.call(s,(v=r())!=null?v:f))||void 0;return Pc(c.getItem.bind(c))(s.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==s.version){if(s.migrate)return[!0,s.migrate(_.state,_.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var T;const[P,A]=_;if(m=s.merge(A,(T=r())!=null?T:f),n(m,!0),P)return u()}).then(()=>{w==null||w(m,void 0),m=r(),o=!0,l.forEach(_=>_(m))}).catch(_=>{w==null||w(void 0,_)})};return i.persist={setOptions:v=>{s={...s,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:v=>(a.add(v),()=>{a.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},s.skipHydration||g(),m||f},CV=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((kV?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),PV(t,e)):IV(t,e),Hf=CV;let ad;const AV=new Uint8Array(16);function RV(){if(!ad&&(ad=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ad))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ad(AV)}const wt=[];for(let t=0;t<256;++t)wt.push((t+256).toString(16).slice(1));function DV(t,e=0){return wt[t[e+0]]+wt[t[e+1]]+wt[t[e+2]]+wt[t[e+3]]+"-"+wt[t[e+4]]+wt[t[e+5]]+"-"+wt[t[e+6]]+wt[t[e+7]]+"-"+wt[t[e+8]]+wt[t[e+9]]+"-"+wt[t[e+10]]+wt[t[e+11]]+wt[t[e+12]]+wt[t[e+13]]+wt[t[e+14]]+wt[t[e+15]]}const NV=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vb={randomUUID:NV};function Pi(t,e,n){if(Vb.randomUUID&&!t)return Vb.randomUUID();t=t||{};const r=t.random||(t.rng||RV)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,DV(r)}const Am=[{name:"Travail",color:"#3b82f6",icon:"briefcase",order:0,isDefault:!0},{name:"Personnel",color:"#22c55e",icon:"user",order:1,isDefault:!0},{name:"Sant",color:"#ef4444",icon:"heart",order:2,isDefault:!0},{name:"tudes",color:"#8b5cf6",icon:"book",order:3,isDefault:!0},{name:"Finances",color:"#f59e0b",icon:"wallet",order:4,isDefault:!0},{name:"Social",color:"#ec4899",icon:"users",order:5,isDefault:!0},{name:"Loisirs",color:"#06b6d4",icon:"gamepad-2",order:6,isDefault:!0},{name:"Maison",color:"#84cc16",icon:"home",order:7,isDefault:!0}],ky=100,MV=1.5,EI={trivial:5,easy:10,medium:25,hard:50,epic:100,legendary:200},OV={none:0,low:0,medium:5,high:10,critical:20},jV=[{days:3,bonus:.1},{days:7,bonus:.25},{days:14,bonus:.5},{days:30,bonus:.75},{days:60,bonus:1},{days:100,bonus:1.5},{days:365,bonus:2}];var Fb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},LV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},II={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[u],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new VV;const f=s<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FV=function(t){const e=PI(t);return II.encodeByteArray(e,!0)},jh=function(t){return FV(t).replace(/\./g,"")},CI=function(t){try{return II.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=()=>UV().__FIREBASE_DEFAULTS__,zV=()=>{if(typeof process>"u"||typeof Fb>"u")return;const t=Fb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$V=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&CI(t[1]);return e&&JSON.parse(e)},qf=()=>{try{return BV()||zV()||$V()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AI=t=>{var e,n;return(n=(e=qf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},WV=t=>{const e=AI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},RI=()=>{var t;return(t=qf())===null||t===void 0?void 0:t.config},DI=t=>{var e;return(e=qf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jh(JSON.stringify(n)),jh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function KV(){var t;const e=(t=qf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XV(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JV(){return!KV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MI(){try{return typeof indexedDB=="object"}catch{return!1}}function OI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function ZV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5="FirebaseError";class nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=e5,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}}class mo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?t5(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new nr(i,a,r)}}function t5(t,e){return t.replace(n5,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const n5=/\{\$([^}]+)}/g;function r5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ub(s)&&Ub(o)){if(!Lh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ub(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function kl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function i5(t,e){const n=new s5(t,e);return n.subscribe.bind(n)}class s5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");o5(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Rm),i.error===void 0&&(i.error=Rm),i.complete===void 0&&(i.complete=Rm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function o5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=1e3,l5=2,c5=4*60*60*1e3,u5=.5;function Bb(t,e=a5,n=l5){const r=e*Math.pow(n,t),i=Math.round(u5*r*(Math.random()-.5)*2);return Math.min(c5,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t){return t&&t._delegate?t._delegate:t}class er{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new HV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f5(e))try{this.getOrInitializeService({instanceIdentifier:Cs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cs){return this.instances.has(e)}getOptions(e=Cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:h5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cs){return this.component?this.component.multipleInstances?e:Cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function h5(t){return t===Cs?void 0:t}function f5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new d5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const m5={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},g5=me.INFO,y5={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},v5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=y5[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gf{constructor(e){this.name=e,this._logLevel=g5,this._logHandler=v5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?m5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const _5=(t,e)=>e.some(n=>t instanceof n);let zb,$b;function w5(){return zb||(zb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function x5(){return $b||($b=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jI=new WeakMap,Ey=new WeakMap,LI=new WeakMap,Dm=new WeakMap,Cv=new WeakMap;function b5(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ki(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jI.set(n,t)}).catch(()=>{}),Cv.set(e,t),e}function T5(t){if(Ey.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ey.set(t,e)}let Py={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ey.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ki(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function S5(t){Py=t(Py)}function k5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nm(this),e,...n);return LI.set(r,e.sort?e.sort():[e]),Ki(r)}:x5().includes(t)?function(...e){return t.apply(Nm(this),e),Ki(jI.get(this))}:function(...e){return Ki(t.apply(Nm(this),e))}}function E5(t){return typeof t=="function"?k5(t):(t instanceof IDBTransaction&&T5(t),_5(t,w5())?new Proxy(t,Py):t)}function Ki(t){if(t instanceof IDBRequest)return b5(t);if(Dm.has(t))return Dm.get(t);const e=E5(t);return e!==t&&(Dm.set(t,e),Cv.set(e,t)),e}const Nm=t=>Cv.get(t);function VI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ki(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ki(o.result),l.oldVersion,l.newVersion,Ki(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const P5=["get","getKey","getAll","getAllKeys","count"],I5=["put","add","delete","clear"],Mm=new Map;function Wb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=I5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||P5.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Mm.set(e,s),s}S5(t=>({...t,get:(e,n,r)=>Wb(e,n)||t.get(e,n,r),has:(e,n)=>!!Wb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function A5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Iy="@firebase/app",Hb="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new Gf("@firebase/app"),R5="@firebase/app-compat",D5="@firebase/analytics-compat",N5="@firebase/analytics",M5="@firebase/app-check-compat",O5="@firebase/app-check",j5="@firebase/auth",L5="@firebase/auth-compat",V5="@firebase/database",F5="@firebase/data-connect",U5="@firebase/database-compat",B5="@firebase/functions",z5="@firebase/functions-compat",$5="@firebase/installations",W5="@firebase/installations-compat",H5="@firebase/messaging",q5="@firebase/messaging-compat",G5="@firebase/performance",K5="@firebase/performance-compat",Q5="@firebase/remote-config",Y5="@firebase/remote-config-compat",X5="@firebase/storage",J5="@firebase/storage-compat",Z5="@firebase/firestore",e4="@firebase/vertexai-preview",t4="@firebase/firestore-compat",n4="firebase",r4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="[DEFAULT]",i4={[Iy]:"fire-core",[R5]:"fire-core-compat",[N5]:"fire-analytics",[D5]:"fire-analytics-compat",[O5]:"fire-app-check",[M5]:"fire-app-check-compat",[j5]:"fire-auth",[L5]:"fire-auth-compat",[V5]:"fire-rtdb",[F5]:"fire-data-connect",[U5]:"fire-rtdb-compat",[B5]:"fire-fn",[z5]:"fire-fn-compat",[$5]:"fire-iid",[W5]:"fire-iid-compat",[H5]:"fire-fcm",[q5]:"fire-fcm-compat",[G5]:"fire-perf",[K5]:"fire-perf-compat",[Q5]:"fire-rc",[Y5]:"fire-rc-compat",[X5]:"fire-gcs",[J5]:"fire-gcs-compat",[Z5]:"fire-fst",[t4]:"fire-fst-compat",[e4]:"fire-vertex","fire-js":"fire-js",[n4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new Map,s4=new Map,Ay=new Map;function qb(t,e){try{t.container.addComponent(e)}catch(n){ti.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xr(t){const e=t.name;if(Ay.has(e))return ti.debug(`There were multiple attempts to register component ${e}.`),!1;Ay.set(e,t);for(const n of Vh.values())qb(n,t);for(const n of s4.values())qb(n,t);return!0}function su(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new mo("app","Firebase",o4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=r4;function FI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Qi.create("bad-app-name",{appName:String(i)});if(n||(n=RI()),!n)throw Qi.create("no-options");const s=Vh.get(i);if(s){if(Lh(n,s.options)&&Lh(r,s.config))return s;throw Qi.create("duplicate-app",{appName:i})}const o=new p5(i);for(const l of Ay.values())o.addComponent(l);const a=new a4(n,r,o);return Vh.set(i,a),a}function UI(t=Cy){const e=Vh.get(t);if(!e&&t===Cy&&RI())return FI();if(!e)throw Qi.create("no-app",{appName:t});return e}function On(t,e,n){var r;let i=(r=i4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ti.warn(a.join(" "));return}xr(new er(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="firebase-heartbeat-database",c4=1,Ic="firebase-heartbeat-store";let Om=null;function BI(){return Om||(Om=VI(l4,c4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ic)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qi.create("idb-open",{originalErrorMessage:t.message})})),Om}async function u4(t){try{const n=(await BI()).transaction(Ic),r=await n.objectStore(Ic).get(zI(t));return await n.done,r}catch(e){if(e instanceof nr)ti.warn(e.message);else{const n=Qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ti.warn(n.message)}}}async function Gb(t,e){try{const r=(await BI()).transaction(Ic,"readwrite");await r.objectStore(Ic).put(e,zI(t)),await r.done}catch(n){if(n instanceof nr)ti.warn(n.message);else{const r=Qi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ti.warn(r.message)}}}function zI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=1024,h4=30*24*60*60*1e3;class f4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new m4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Kb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=h4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ti.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Kb(),{heartbeatsToSend:r,unsentEntries:i}=p4(this._heartbeatsCache.heartbeats),s=jh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ti.warn(n),""}}}function Kb(){return new Date().toISOString().substring(0,10)}function p4(t,e=d4){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Qb(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Qb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class m4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MI()?OI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await u4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Qb(t){return jh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t){xr(new er("platform-logger",e=>new C5(e),"PRIVATE")),xr(new er("heartbeat",e=>new f4(e),"PRIVATE")),On(Iy,Hb,t),On(Iy,Hb,"esm2017"),On("fire-js","")}g4("");function Av(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function $I(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y4=$I,WI=new mo("auth","Firebase",$I());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new Gf("@firebase/auth");function v4(t,...e){Fh.logLevel<=me.WARN&&Fh.warn(`Auth (${La}): ${t}`,...e)}function qd(t,...e){Fh.logLevel<=me.ERROR&&Fh.error(`Auth (${La}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw Dv(t,...e)}function Jn(t,...e){return Dv(t,...e)}function Rv(t,e,n){const r=Object.assign(Object.assign({},y4()),{[e]:n});return new mo("auth","Firebase",r).create(e,{appName:t.name})}function qr(t){return Rv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fn(t,"argument-error"),Rv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return WI.create(t,...e)}function re(t,e,...n){if(!t)throw Dv(e,...n)}function Fr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qd(e),new Error(e)}function ni(t,e){t||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function w4(){return Yb()==="http:"||Yb()==="https:"}function Yb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w4()||NI()||"connection"in navigator)?navigator.onLine:!0}function b4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n){this.shortDelay=e,this.longDelay=n,ni(n>e,"Short delay should be less than long delay!"),this.isMobile=GV()||YV()}get(){return x4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t,e){ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=new ou(3e4,6e4);function hs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function fs(t,e,n,r,i={}){return qI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=iu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return QV()||(c.referrerPolicy="no-referrer"),HI.fetch()(GI(t,t.config.apiHost,n,a),c)})}async function qI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},T4),e);try{const i=new E4(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ld(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ld(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ld(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ld(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Rv(t,u,c);Fn(t,u)}}catch(i){if(i instanceof nr)throw i;Fn(t,"network-request-failed",{message:String(i)})}}async function au(t,e,n,r,i={}){const s=await fs(t,e,n,r,i);return"mfaPendingCredential"in s&&Fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function GI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Nv(t.config,i):`${t.config.apiScheme}://${i}`}function k4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class E4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jn(this.auth,"network-request-failed")),S4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ld(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Jn(t,e,r);return i.customData._tokenResponse=n,i}function Xb(t){return t!==void 0&&t.enterprise!==void 0}class P4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return k4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function I4(t,e){return fs(t,"GET","/v2/recaptchaConfig",hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(t,e){return fs(t,"POST","/v1/accounts:delete",e)}async function KI(t,e){return fs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A4(t,e=!1){const n=et(t),r=await n.getIdToken(e),i=Mv(r);re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Hl(jm(i.auth_time)),issuedAtTime:Hl(jm(i.iat)),expirationTime:Hl(jm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function jm(t){return Number(t)*1e3}function Mv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return qd("JWT malformed, contained fewer than 3 sections"),null;try{const i=CI(n);return i?JSON.parse(i):(qd("Failed to decode base64 JWT payload"),null)}catch(i){return qd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Jb(t){const e=Mv(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof nr&&R4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function R4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hl(this.lastLoginAt),this.creationTime=Hl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Cc(t,KI(n,{idToken:r}));re(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?QI(s.providerUserInfo):[],a=M4(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Dy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function N4(t){const e=et(t);await Uh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function M4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function QI(t){return t.map(e=>{var{providerId:n}=e,r=Av(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(t,e){const n=await qI(t,{},async()=>{const r=iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=GI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function j4(t,e){return fs(t,"POST","/v2/accounts:revokeToken",hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=Jb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await O4(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ia;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(re(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ur{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Av(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new D4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Dy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Cc(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return A4(this,e)}reload(){return N4(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ur(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Uh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(qr(this.auth));const e=await this.getIdToken();return await Cc(this,C4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:T,emailVerified:P,isAnonymous:A,providerData:O,stsTokenManager:E}=n;re(T&&E,e,"internal-error");const S=ia.fromJSON(this.name,E);re(typeof T=="string",e,"internal-error"),gi(h,e.name),gi(f,e.name),re(typeof P=="boolean",e,"internal-error"),re(typeof A=="boolean",e,"internal-error"),gi(m,e.name),gi(g,e.name),gi(v,e.name),gi(x,e.name),gi(w,e.name),gi(_,e.name);const k=new Ur({uid:T,auth:e,email:f,emailVerified:P,displayName:h,isAnonymous:A,photoURL:g,phoneNumber:m,tenantId:v,stsTokenManager:S,createdAt:w,lastLoginAt:_});return O&&Array.isArray(O)&&(k.providerData=O.map(C=>Object.assign({},C))),x&&(k._redirectEventId=x),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new ia;i.updateFromServerResponse(n);const s=new Ur({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Uh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];re(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?QI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ia;a.updateFromIdToken(r);const l=new Ur({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Dy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=new Map;function Br(t){ni(t instanceof Function,"Expected a class definition");let e=Zb.get(t);return e?(ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Zb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}YI.type="NONE";const e1=YI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t,e,n){return`firebase:${t}:${e}:${n}`}class sa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Gd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Gd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ur._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new sa(Br(e1),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Br(e1);const o=Gd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Ur._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new sa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new sa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nC(e))return"Blackberry";if(rC(e))return"Webos";if(JI(e))return"Safari";if((e.includes("chrome/")||ZI(e))&&!e.includes("edge/"))return"Chrome";if(tC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function XI(t=Wt()){return/firefox\//i.test(t)}function JI(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZI(t=Wt()){return/crios\//i.test(t)}function eC(t=Wt()){return/iemobile/i.test(t)}function tC(t=Wt()){return/android/i.test(t)}function nC(t=Wt()){return/blackberry/i.test(t)}function rC(t=Wt()){return/webos/i.test(t)}function Ov(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function L4(t=Wt()){var e;return Ov(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function V4(){return XV()&&document.documentMode===10}function iC(t=Wt()){return Ov(t)||tC(t)||rC(t)||nC(t)||/windows phone/i.test(t)||eC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t,e=[]){let n;switch(t){case"Browser":n=t1(Wt());break;case"Worker":n=`${t1(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${La}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U4(t,e={}){return fs(t,"GET","/v2/passwordPolicy",hs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=6;class z4{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:B4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new n1(this),this.idTokenSubscription=new n1(this),this.beforeStateQueue=new F4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Br(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await sa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await KI(this,{idToken:e}),r=await Ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Uh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(qr(this));const n=e?et(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await U4(this),n=new z4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await j4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Br(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await sa.create(this,[Br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&v4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ps(t){return et(t)}class n1{constructor(e){this.auth=e,this.observer=null,this.addObserver=i5(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W4(t){Kf=t}function oC(t){return Kf.loadJS(t)}function H4(){return Kf.recaptchaEnterpriseScript}function q4(){return Kf.gapiScript}function G4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const K4="recaptcha-enterprise",Q4="NO_RECAPTCHA";class Y4{constructor(e){this.type=K4,this.auth=ps(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{I4(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new P4(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Xb(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Q4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Xb(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=H4();l.length!==0&&(l+=a),oC(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function r1(t,e,n,r=!1){const i=new Y4(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ny(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await r1(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await r1(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t,e){const n=su(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Lh(s,e??{}))return i;Fn(i,"already-initialized")}return n.initialize({options:e})}function J4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Br);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Z4(t,e,n){const r=ps(t);re(r._canInitEmulator,r,"emulator-config-failed"),re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=aC(e),{host:o,port:a}=eF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),tF()}function aC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eF(t){const e=aC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:i1(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:i1(o)}}}function i1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,n){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function nF(t,e){return fs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rF(t,e){return au(t,"POST","/v1/accounts:signInWithPassword",hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(t,e){return au(t,"POST","/v1/accounts:signInWithEmailLink",hs(t,e))}async function sF(t,e){return au(t,"POST","/v1/accounts:signInWithEmailLink",hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends jv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ac(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ac(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ny(e,n,"signInWithPassword",rF);case"emailLink":return iF(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ny(e,r,"signUpPassword",nF);case"emailLink":return sF(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(t,e){return au(t,"POST","/v1/accounts:signInWithIdp",hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF="http://localhost";class to extends jv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new to(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Av(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new to(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return oa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,oa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oa(e,n)}buildRequest(){const e={requestUri:oF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lF(t){const e=Sl(kl(t)).link,n=e?Sl(kl(e)).deep_link_id:null,r=Sl(kl(t)).deep_link_id;return(r?Sl(kl(r)).link:null)||r||n||e||t}class Lv{constructor(e){var n,r,i,s,o,a;const l=Sl(kl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=aF((i=l.mode)!==null&&i!==void 0?i:null);re(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=lF(e);try{return new Lv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.providerId=Va.PROVIDER_ID}static credential(e,n){return Ac._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Lv.parseLink(n);return re(r,"argument-error"),Ac._fromEmailAndCode(e,r.code,r.tenantId)}}Va.PROVIDER_ID="password";Va.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Va.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends Vv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends lu{constructor(){super("facebook.com")}static credential(e){return to._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return to._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Or.credential(n,r)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends lu{constructor(){super("github.com")}static credential(e){return to._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.GITHUB_SIGN_IN_METHOD="github.com";jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends lu{constructor(){super("twitter.com")}static credential(e,n){return to._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ci.credential(n,r)}catch{return null}}}Ci.TWITTER_SIGN_IN_METHOD="twitter.com";Ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cF(t,e){return au(t,"POST","/v1/accounts:signUp",hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ur._fromIdTokenResponse(e,r,i),o=s1(r);return new no({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=s1(r);return new no({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function s1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends nr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Bh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Bh(e,n,r,i)}}function lC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Bh._fromErrorAndOperation(t,s,e,r):s})}async function uF(t,e,n=!1){const r=await Cc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return no._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dF(t,e,n=!1){const{auth:r}=t;if(Qn(r.app))return Promise.reject(qr(r));const i="reauthenticate";try{const s=await Cc(t,lC(r,i,e,t),n);re(s.idToken,r,"internal-error");const o=Mv(s.idToken);re(o,r,"internal-error");const{sub:a}=o;return re(t.uid===a,r,"user-mismatch"),no._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(t,e,n=!1){if(Qn(t.app))return Promise.reject(qr(t));const r="signIn",i=await lC(t,r,e),s=await no._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function hF(t,e){return cC(ps(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(t){const e=ps(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fF(t,e,n){if(Qn(t.app))return Promise.reject(qr(t));const r=ps(t),o=await Ny(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cF).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&uC(t),l}),a=await no._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function pF(t,e,n){return Qn(t.app)?Promise.reject(qr(t)):hF(et(t),Va.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&uC(t),r})}function mF(t,e,n,r){return et(t).onIdTokenChanged(e,n,r)}function gF(t,e,n){return et(t).beforeAuthStateChanged(e,n)}function yF(t,e,n,r){return et(t).onAuthStateChanged(e,n,r)}function vF(t){return et(t).signOut()}const zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zh,"1"),this.storage.removeItem(zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=1e3,wF=10;class hC extends dC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);V4()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,wF):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_F)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hC.type="LOCAL";const xF=hC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC extends dC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fC.type="SESSION";const pC=fC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Qf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await bF(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Fv("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(){return window}function SF(t){mr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){return typeof mr().WorkerGlobalScope<"u"&&typeof mr().importScripts=="function"}async function kF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PF(){return mC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="firebaseLocalStorageDb",IF=1,$h="firebaseLocalStorage",yC="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yf(t,e){return t.transaction([$h],e?"readwrite":"readonly").objectStore($h)}function CF(){const t=indexedDB.deleteDatabase(gC);return new cu(t).toPromise()}function My(){const t=indexedDB.open(gC,IF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($h,{keyPath:yC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($h)?e(r):(r.close(),await CF(),e(await My()))})})}async function o1(t,e,n){const r=Yf(t,!0).put({[yC]:e,value:n});return new cu(r).toPromise()}async function AF(t,e){const n=Yf(t,!1).get(e),r=await new cu(n).toPromise();return r===void 0?null:r.value}function a1(t,e){const n=Yf(t,!0).delete(e);return new cu(n).toPromise()}const RF=800,DF=3;class vC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await My(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>DF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qf._getInstance(PF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kF(),!this.activeServiceWorker)return;this.sender=new TF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await My();return await o1(e,zh,"1"),await a1(e,zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>o1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>AF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>a1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Yf(i,!1).getAll();return new cu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vC.type="LOCAL";const NF=vC;new ou(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e){return e?Br(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv extends jv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MF(t){return cC(t.auth,new Uv(t),t.bypassAuthState)}function OF(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),dF(n,new Uv(t),t.bypassAuthState)}async function jF(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),uF(n,new Uv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MF;case"linkViaPopup":case"linkViaRedirect":return jF;case"reauthViaPopup":case"reauthViaRedirect":return OF;default:Fn(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=new ou(2e3,1e4);async function l1(t,e,n){if(Qn(t.app))return Promise.reject(Jn(t,"operation-not-supported-in-this-environment"));const r=ps(t);_4(t,e,Vv);const i=_C(r,n);return new Fs(r,"signInViaPopup",e,i).executeNotNull()}class Fs extends wC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=Fv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LF.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF="pendingRedirect",Kd=new Map;class FF extends wC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Kd.get(this.auth._key());if(!e){try{const r=await UF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Kd.set(this.auth._key(),e)}return this.bypassAuthState||Kd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UF(t,e){const n=$F(e),r=zF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function BF(t,e){Kd.set(t._key(),e)}function zF(t){return Br(t._redirectPersistence)}function $F(t){return Gd(VF,t.config.apiKey,t.name)}async function WF(t,e,n=!1){if(Qn(t.app))return Promise.reject(qr(t));const r=ps(t),i=_C(r,e),o=await new FF(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=10*60*1e3;class qF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Jn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HF&&this.cachedEventUids.clear(),this.cachedEventUids.has(c1(e))}saveEventToCache(e){this.cachedEventUids.add(c1(e)),this.lastProcessedEventTime=Date.now()}}function c1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KF(t,e={}){return fs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YF=/^https?/;async function XF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KF(t);for(const n of e)try{if(JF(n))return}catch{}Fn(t,"unauthorized-domain")}function JF(t){const e=Ry(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!YF.test(n))return!1;if(QF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=new ou(3e4,6e4);function u1(){const t=mr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function e3(t){return new Promise((e,n)=>{var r,i,s;function o(){u1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{u1(),n(Jn(t,"network-request-failed"))},timeout:ZF.get()})}if(!((i=(r=mr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=mr().gapi)===null||s===void 0)&&s.load)o();else{const a=G4("iframefcb");return mr()[a]=()=>{gapi.load?o():n(Jn(t,"network-request-failed"))},oC(`${q4()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Qd=null,e})}let Qd=null;function t3(t){return Qd=Qd||e3(t),Qd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=new ou(5e3,15e3),r3="__/auth/iframe",i3="emulator/auth/iframe",s3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a3(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Nv(e,i3):`https://${t.config.authDomain}/${r3}`,r={apiKey:e.apiKey,appName:t.name,v:La},i=o3.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${iu(r).slice(1)}`}async function l3(t){const e=await t3(t),n=mr().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:a3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s3,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Jn(t,"network-request-failed"),a=mr().setTimeout(()=>{s(o)},n3.get());function l(){mr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u3=500,d3=600,h3="_blank",f3="http://localhost";class d1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p3(t,e,n,r=u3,i=d3){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},c3),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Wt().toLowerCase();n&&(a=ZI(c)?h3:n),XI(c)&&(e=e||f3,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[m,g])=>`${f}${m}=${g},`,"");if(L4(c)&&a!=="_self")return m3(e||"",a),new d1(null);const h=window.open(e||"",a,u);re(h,t,"popup-blocked");try{h.focus()}catch{}return new d1(h)}function m3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="__/auth/handler",y3="emulator/auth/handler",v3=encodeURIComponent("fac");async function h1(t,e,n,r,i,s){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:La,eventId:i};if(e instanceof Vv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",r5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof lu){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${v3}=${encodeURIComponent(l)}`:"";return`${_3(t)}?${iu(a).slice(1)}${c}`}function _3({config:t}){return t.emulator?Nv(t,y3):`https://${t.authDomain}/${g3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="webStorageSupport";class w3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pC,this._completeRedirectFn=WF,this._overrideRedirectResult=BF}async _openPopup(e,n,r,i){var s;ni((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await h1(e,n,r,Ry(),i);return p3(e,o,Fv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await h1(e,n,r,Ry(),i);return SF(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ni(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await l3(e),r=new qF(e);return n.register("authEvent",i=>(re(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lm,{type:Lm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Lm];o!==void 0&&n(!!o),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iC()||JI()||Ov()}}const x3=w3;var f1="@firebase/auth",p1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S3(t){xr(new er("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sC(t)},c=new $4(r,i,s,l);return J4(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xr(new er("auth-internal",e=>{const n=ps(e.getProvider("auth").getImmediate());return(r=>new b3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),On(f1,p1,T3(t)),On(f1,p1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=5*60,E3=DI("authIdTokenMaxAge")||k3;let m1=null;const P3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>E3)return;const i=n==null?void 0:n.token;m1!==i&&(m1=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function I3(t=UI()){const e=su(t,"auth");if(e.isInitialized())return e.getImmediate();const n=X4(t,{popupRedirectResolver:x3,persistence:[NF,xF,pC]}),r=DI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=P3(s.toString());gF(n,o,()=>o(n.currentUser)),mF(n,a=>o(a))}}const i=AI("auth");return i&&Z4(n,`http://${i}`),n}function C3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}W4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Jn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",C3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S3("Browser");var g1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qs,bC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,S){function k(){}k.prototype=S.prototype,E.D=S.prototype,E.prototype=new k,E.prototype.constructor=E,E.C=function(C,D,M){for(var R=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)R[ee-2]=arguments[ee];return S.prototype[D].apply(C,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,S,k){k||(k=0);var C=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)C[D]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(D=0;16>D;++D)C[D]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=E.g[0],k=E.g[1],D=E.g[2];var M=E.g[3],R=S+(M^k&(D^M))+C[0]+3614090360&4294967295;S=k+(R<<7&4294967295|R>>>25),R=M+(D^S&(k^D))+C[1]+3905402710&4294967295,M=S+(R<<12&4294967295|R>>>20),R=D+(k^M&(S^k))+C[2]+606105819&4294967295,D=M+(R<<17&4294967295|R>>>15),R=k+(S^D&(M^S))+C[3]+3250441966&4294967295,k=D+(R<<22&4294967295|R>>>10),R=S+(M^k&(D^M))+C[4]+4118548399&4294967295,S=k+(R<<7&4294967295|R>>>25),R=M+(D^S&(k^D))+C[5]+1200080426&4294967295,M=S+(R<<12&4294967295|R>>>20),R=D+(k^M&(S^k))+C[6]+2821735955&4294967295,D=M+(R<<17&4294967295|R>>>15),R=k+(S^D&(M^S))+C[7]+4249261313&4294967295,k=D+(R<<22&4294967295|R>>>10),R=S+(M^k&(D^M))+C[8]+1770035416&4294967295,S=k+(R<<7&4294967295|R>>>25),R=M+(D^S&(k^D))+C[9]+2336552879&4294967295,M=S+(R<<12&4294967295|R>>>20),R=D+(k^M&(S^k))+C[10]+4294925233&4294967295,D=M+(R<<17&4294967295|R>>>15),R=k+(S^D&(M^S))+C[11]+2304563134&4294967295,k=D+(R<<22&4294967295|R>>>10),R=S+(M^k&(D^M))+C[12]+1804603682&4294967295,S=k+(R<<7&4294967295|R>>>25),R=M+(D^S&(k^D))+C[13]+4254626195&4294967295,M=S+(R<<12&4294967295|R>>>20),R=D+(k^M&(S^k))+C[14]+2792965006&4294967295,D=M+(R<<17&4294967295|R>>>15),R=k+(S^D&(M^S))+C[15]+1236535329&4294967295,k=D+(R<<22&4294967295|R>>>10),R=S+(D^M&(k^D))+C[1]+4129170786&4294967295,S=k+(R<<5&4294967295|R>>>27),R=M+(k^D&(S^k))+C[6]+3225465664&4294967295,M=S+(R<<9&4294967295|R>>>23),R=D+(S^k&(M^S))+C[11]+643717713&4294967295,D=M+(R<<14&4294967295|R>>>18),R=k+(M^S&(D^M))+C[0]+3921069994&4294967295,k=D+(R<<20&4294967295|R>>>12),R=S+(D^M&(k^D))+C[5]+3593408605&4294967295,S=k+(R<<5&4294967295|R>>>27),R=M+(k^D&(S^k))+C[10]+38016083&4294967295,M=S+(R<<9&4294967295|R>>>23),R=D+(S^k&(M^S))+C[15]+3634488961&4294967295,D=M+(R<<14&4294967295|R>>>18),R=k+(M^S&(D^M))+C[4]+3889429448&4294967295,k=D+(R<<20&4294967295|R>>>12),R=S+(D^M&(k^D))+C[9]+568446438&4294967295,S=k+(R<<5&4294967295|R>>>27),R=M+(k^D&(S^k))+C[14]+3275163606&4294967295,M=S+(R<<9&4294967295|R>>>23),R=D+(S^k&(M^S))+C[3]+4107603335&4294967295,D=M+(R<<14&4294967295|R>>>18),R=k+(M^S&(D^M))+C[8]+1163531501&4294967295,k=D+(R<<20&4294967295|R>>>12),R=S+(D^M&(k^D))+C[13]+2850285829&4294967295,S=k+(R<<5&4294967295|R>>>27),R=M+(k^D&(S^k))+C[2]+4243563512&4294967295,M=S+(R<<9&4294967295|R>>>23),R=D+(S^k&(M^S))+C[7]+1735328473&4294967295,D=M+(R<<14&4294967295|R>>>18),R=k+(M^S&(D^M))+C[12]+2368359562&4294967295,k=D+(R<<20&4294967295|R>>>12),R=S+(k^D^M)+C[5]+4294588738&4294967295,S=k+(R<<4&4294967295|R>>>28),R=M+(S^k^D)+C[8]+2272392833&4294967295,M=S+(R<<11&4294967295|R>>>21),R=D+(M^S^k)+C[11]+1839030562&4294967295,D=M+(R<<16&4294967295|R>>>16),R=k+(D^M^S)+C[14]+4259657740&4294967295,k=D+(R<<23&4294967295|R>>>9),R=S+(k^D^M)+C[1]+2763975236&4294967295,S=k+(R<<4&4294967295|R>>>28),R=M+(S^k^D)+C[4]+1272893353&4294967295,M=S+(R<<11&4294967295|R>>>21),R=D+(M^S^k)+C[7]+4139469664&4294967295,D=M+(R<<16&4294967295|R>>>16),R=k+(D^M^S)+C[10]+3200236656&4294967295,k=D+(R<<23&4294967295|R>>>9),R=S+(k^D^M)+C[13]+681279174&4294967295,S=k+(R<<4&4294967295|R>>>28),R=M+(S^k^D)+C[0]+3936430074&4294967295,M=S+(R<<11&4294967295|R>>>21),R=D+(M^S^k)+C[3]+3572445317&4294967295,D=M+(R<<16&4294967295|R>>>16),R=k+(D^M^S)+C[6]+76029189&4294967295,k=D+(R<<23&4294967295|R>>>9),R=S+(k^D^M)+C[9]+3654602809&4294967295,S=k+(R<<4&4294967295|R>>>28),R=M+(S^k^D)+C[12]+3873151461&4294967295,M=S+(R<<11&4294967295|R>>>21),R=D+(M^S^k)+C[15]+530742520&4294967295,D=M+(R<<16&4294967295|R>>>16),R=k+(D^M^S)+C[2]+3299628645&4294967295,k=D+(R<<23&4294967295|R>>>9),R=S+(D^(k|~M))+C[0]+4096336452&4294967295,S=k+(R<<6&4294967295|R>>>26),R=M+(k^(S|~D))+C[7]+1126891415&4294967295,M=S+(R<<10&4294967295|R>>>22),R=D+(S^(M|~k))+C[14]+2878612391&4294967295,D=M+(R<<15&4294967295|R>>>17),R=k+(M^(D|~S))+C[5]+4237533241&4294967295,k=D+(R<<21&4294967295|R>>>11),R=S+(D^(k|~M))+C[12]+1700485571&4294967295,S=k+(R<<6&4294967295|R>>>26),R=M+(k^(S|~D))+C[3]+2399980690&4294967295,M=S+(R<<10&4294967295|R>>>22),R=D+(S^(M|~k))+C[10]+4293915773&4294967295,D=M+(R<<15&4294967295|R>>>17),R=k+(M^(D|~S))+C[1]+2240044497&4294967295,k=D+(R<<21&4294967295|R>>>11),R=S+(D^(k|~M))+C[8]+1873313359&4294967295,S=k+(R<<6&4294967295|R>>>26),R=M+(k^(S|~D))+C[15]+4264355552&4294967295,M=S+(R<<10&4294967295|R>>>22),R=D+(S^(M|~k))+C[6]+2734768916&4294967295,D=M+(R<<15&4294967295|R>>>17),R=k+(M^(D|~S))+C[13]+1309151649&4294967295,k=D+(R<<21&4294967295|R>>>11),R=S+(D^(k|~M))+C[4]+4149444226&4294967295,S=k+(R<<6&4294967295|R>>>26),R=M+(k^(S|~D))+C[11]+3174756917&4294967295,M=S+(R<<10&4294967295|R>>>22),R=D+(S^(M|~k))+C[2]+718787259&4294967295,D=M+(R<<15&4294967295|R>>>17),R=k+(M^(D|~S))+C[9]+3951481745&4294967295,E.g[0]=E.g[0]+S&4294967295,E.g[1]=E.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+M&4294967295}r.prototype.u=function(E,S){S===void 0&&(S=E.length);for(var k=S-this.blockSize,C=this.B,D=this.h,M=0;M<S;){if(D==0)for(;M<=k;)i(this,E,M),M+=this.blockSize;if(typeof E=="string"){for(;M<S;)if(C[D++]=E.charCodeAt(M++),D==this.blockSize){i(this,C),D=0;break}}else for(;M<S;)if(C[D++]=E[M++],D==this.blockSize){i(this,C),D=0;break}}this.h=D,this.o+=S},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var S=1;S<E.length-8;++S)E[S]=0;var k=8*this.o;for(S=E.length-8;S<E.length;++S)E[S]=k&255,k/=256;for(this.u(E),E=Array(16),S=k=0;4>S;++S)for(var C=0;32>C;C+=8)E[k++]=this.g[S]>>>C&255;return E};function s(E,S){var k=a;return Object.prototype.hasOwnProperty.call(k,E)?k[E]:k[E]=S(E)}function o(E,S){this.h=S;for(var k=[],C=!0,D=E.length-1;0<=D;D--){var M=E[D]|0;C&&M==S||(k[D]=M,C=!1)}this.g=k}var a={};function l(E){return-128<=E&&128>E?s(E,function(S){return new o([S|0],0>S?-1:0)}):new o([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return h;if(0>E)return x(c(-E));for(var S=[],k=1,C=0;E>=k;C++)S[C]=E/k|0,k*=4294967296;return new o(S,0)}function u(E,S){if(E.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E.charAt(0)=="-")return x(u(E.substring(1),S));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(S,8)),C=h,D=0;D<E.length;D+=8){var M=Math.min(8,E.length-D),R=parseInt(E.substring(D,D+M),S);8>M?(M=c(Math.pow(S,M)),C=C.j(M).add(c(R))):(C=C.j(k),C=C.add(c(R)))}return C}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-x(this).m();for(var E=0,S=1,k=0;k<this.g.length;k++){var C=this.i(k);E+=(0<=C?C:4294967296+C)*S,S*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(g(this))return"0";if(v(this))return"-"+x(this).toString(E);for(var S=c(Math.pow(E,6)),k=this,C="";;){var D=P(k,S).g;k=w(k,D.j(S));var M=((0<k.g.length?k.g[0]:k.h)>>>0).toString(E);if(k=D,g(k))return M+C;for(;6>M.length;)M="0"+M;C=M+C}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function g(E){if(E.h!=0)return!1;for(var S=0;S<E.g.length;S++)if(E.g[S]!=0)return!1;return!0}function v(E){return E.h==-1}t.l=function(E){return E=w(this,E),v(E)?-1:g(E)?0:1};function x(E){for(var S=E.g.length,k=[],C=0;C<S;C++)k[C]=~E.g[C];return new o(k,~E.h).add(f)}t.abs=function(){return v(this)?x(this):this},t.add=function(E){for(var S=Math.max(this.g.length,E.g.length),k=[],C=0,D=0;D<=S;D++){var M=C+(this.i(D)&65535)+(E.i(D)&65535),R=(M>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);C=R>>>16,M&=65535,R&=65535,k[D]=R<<16|M}return new o(k,k[k.length-1]&-2147483648?-1:0)};function w(E,S){return E.add(x(S))}t.j=function(E){if(g(this)||g(E))return h;if(v(this))return v(E)?x(this).j(x(E)):x(x(this).j(E));if(v(E))return x(this.j(x(E)));if(0>this.l(m)&&0>E.l(m))return c(this.m()*E.m());for(var S=this.g.length+E.g.length,k=[],C=0;C<2*S;C++)k[C]=0;for(C=0;C<this.g.length;C++)for(var D=0;D<E.g.length;D++){var M=this.i(C)>>>16,R=this.i(C)&65535,ee=E.i(D)>>>16,q=E.i(D)&65535;k[2*C+2*D]+=R*q,_(k,2*C+2*D),k[2*C+2*D+1]+=M*q,_(k,2*C+2*D+1),k[2*C+2*D+1]+=R*ee,_(k,2*C+2*D+1),k[2*C+2*D+2]+=M*ee,_(k,2*C+2*D+2)}for(C=0;C<S;C++)k[C]=k[2*C+1]<<16|k[2*C];for(C=S;C<2*S;C++)k[C]=0;return new o(k,0)};function _(E,S){for(;(E[S]&65535)!=E[S];)E[S+1]+=E[S]>>>16,E[S]&=65535,S++}function T(E,S){this.g=E,this.h=S}function P(E,S){if(g(S))throw Error("division by zero");if(g(E))return new T(h,h);if(v(E))return S=P(x(E),S),new T(x(S.g),x(S.h));if(v(S))return S=P(E,x(S)),new T(x(S.g),S.h);if(30<E.g.length){if(v(E)||v(S))throw Error("slowDivide_ only works with positive integers.");for(var k=f,C=S;0>=C.l(E);)k=A(k),C=A(C);var D=O(k,1),M=O(C,1);for(C=O(C,2),k=O(k,2);!g(C);){var R=M.add(C);0>=R.l(E)&&(D=D.add(k),M=R),C=O(C,1),k=O(k,1)}return S=w(E,D.j(S)),new T(D,S)}for(D=h;0<=E.l(S);){for(k=Math.max(1,Math.floor(E.m()/S.m())),C=Math.ceil(Math.log(k)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),M=c(k),R=M.j(S);v(R)||0<R.l(E);)k-=C,M=c(k),R=M.j(S);g(M)&&(M=f),D=D.add(M),E=w(E,R)}return new T(D,E)}t.A=function(E){return P(this,E).h},t.and=function(E){for(var S=Math.max(this.g.length,E.g.length),k=[],C=0;C<S;C++)k[C]=this.i(C)&E.i(C);return new o(k,this.h&E.h)},t.or=function(E){for(var S=Math.max(this.g.length,E.g.length),k=[],C=0;C<S;C++)k[C]=this.i(C)|E.i(C);return new o(k,this.h|E.h)},t.xor=function(E){for(var S=Math.max(this.g.length,E.g.length),k=[],C=0;C<S;C++)k[C]=this.i(C)^E.i(C);return new o(k,this.h^E.h)};function A(E){for(var S=E.g.length+1,k=[],C=0;C<S;C++)k[C]=E.i(C)<<1|E.i(C-1)>>>31;return new o(k,E.h)}function O(E,S){var k=S>>5;S%=32;for(var C=E.g.length-k,D=[],M=0;M<C;M++)D[M]=0<S?E.i(M+k)>>>S|E.i(M+k+1)<<32-S:E.i(M+k);return new o(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,qs=o}).apply(typeof g1<"u"?g1:typeof self<"u"?self:typeof window<"u"?window:{});var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TC,El,SC,Yd,Oy,kC,EC,PC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,b){return d==Array.prototype||d==Object.prototype||(d[y]=b.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof cd=="object"&&cd];for(var y=0;y<d.length;++y){var b=d[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function i(d,y){if(y)e:{var b=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var j=d[I];if(!(j in b))break e;b=b[j]}d=d[d.length-1],I=b[d],y=y(I),y!=I&&y!=null&&e(b,d,{configurable:!0,writable:!0,value:y})}}function s(d,y){d instanceof String&&(d+="");var b=0,I=!1,j={next:function(){if(!I&&b<d.length){var L=b++;return{value:y(L,d[L]),done:!1}}return I=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}i("Array.prototype.values",function(d){return d||function(){return s(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function c(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function u(d,y,b){return d.call.apply(d.bind,arguments)}function h(d,y,b){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,I),d.apply(y,j)}}return function(){return d.apply(y,arguments)}}function f(d,y,b){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function m(d,y){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function g(d,y){function b(){}b.prototype=y.prototype,d.aa=y.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(I,j,L){for(var z=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)z[Ce-2]=arguments[Ce];return y.prototype[j].apply(I,z)}}function v(d){const y=d.length;if(0<y){const b=Array(y);for(let I=0;I<y;I++)b[I]=d[I];return b}return[]}function x(d,y){for(let b=1;b<arguments.length;b++){const I=arguments[b];if(l(I)){const j=d.length||0,L=I.length||0;d.length=j+L;for(let z=0;z<L;z++)d[j+z]=I[z]}else d.push(I)}}class w{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function _(d){return/^[\s\xa0]*$/.test(d)}function T(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function P(d){return P[" "](d),d}P[" "]=function(){};var A=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function O(d,y,b){for(const I in d)y.call(b,d[I],I,d)}function E(d,y){for(const b in d)y.call(void 0,d[b],b,d)}function S(d){const y={};for(const b in d)y[b]=d[b];return y}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(d,y){let b,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(b in I)d[b]=I[b];for(let L=0;L<k.length;L++)b=k[L],Object.prototype.hasOwnProperty.call(I,b)&&(d[b]=I[b])}}function D(d){var y=1;d=d.split(":");const b=[];for(;0<y&&d.length;)b.push(d.shift()),y--;return d.length&&b.push(d.join(":")),b}function M(d){a.setTimeout(()=>{throw d},0)}function R(){var d=W;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class ee{constructor(){this.h=this.g=null}add(y,b){const I=q.get();I.set(y,b),this.h?this.h.next=I:this.g=I,this.h=I}}var q=new w(()=>new Q,d=>d.reset());class Q{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let se,B=!1,W=new ee,Z=()=>{const d=a.Promise.resolve(void 0);se=()=>{d.then(J)}};var J=()=>{for(var d;d=R();){try{d.h.call(d.g)}catch(b){M(b)}var y=q;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}B=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var tt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};a.addEventListener("test",b,y),a.removeEventListener("test",b,y)}catch{}return d}();function pt(d,y){if(be.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(A){e:{try{P(y.nodeName);var j=!0;break e}catch{}j=!1}j||(y=null)}}else b=="mouseover"?y=d.fromElement:b=="mouseout"&&(y=d.toElement);this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Fe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&pt.aa.h.call(this)}}g(pt,be);var Fe={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Sn="closure_listenable_"+(1e6*Math.random()|0),Np=0;function Wa(d,y,b,I,j){this.listener=d,this.proxy=null,this.src=y,this.type=b,this.capture=!!I,this.ha=j,this.key=++Np,this.da=this.fa=!1}function Sr(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function kn(d){this.src=d,this.g={},this.h=0}kn.prototype.add=function(d,y,b,I,j){var L=d.toString();d=this.g[L],d||(d=this.g[L]=[],this.h++);var z=Mp(d,y,I,j);return-1<z?(y=d[z],b||(y.fa=!1)):(y=new Wa(y,this.src,L,!!I,j),y.fa=b,d.push(y)),y};function Eu(d,y){var b=y.type;if(b in d.g){var I=d.g[b],j=Array.prototype.indexOf.call(I,y,void 0),L;(L=0<=j)&&Array.prototype.splice.call(I,j,1),L&&(Sr(y),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Mp(d,y,b,I){for(var j=0;j<d.length;++j){var L=d[j];if(!L.da&&L.listener==y&&L.capture==!!b&&L.ha==I)return j}return-1}var Op="closure_lm_"+(1e6*Math.random()|0),jp={};function vw(d,y,b,I,j){if(Array.isArray(y)){for(var L=0;L<y.length;L++)vw(d,y[L],b,I,j);return null}return b=xw(b),d&&d[Sn]?d.K(y,b,c(I)?!!I.capture:!1,j):XD(d,y,b,!1,I,j)}function XD(d,y,b,I,j,L){if(!y)throw Error("Invalid event type");var z=c(j)?!!j.capture:!!j,Ce=Vp(d);if(Ce||(d[Op]=Ce=new kn(d)),b=Ce.add(y,b,I,z,L),b.proxy)return b;if(I=JD(),b.proxy=I,I.src=d,I.listener=b,d.addEventListener)tt||(j=z),j===void 0&&(j=!1),d.addEventListener(y.toString(),I,j);else if(d.attachEvent)d.attachEvent(ww(y.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function JD(){function d(b){return y.call(d.src,d.listener,b)}const y=ZD;return d}function _w(d,y,b,I,j){if(Array.isArray(y))for(var L=0;L<y.length;L++)_w(d,y[L],b,I,j);else I=c(I)?!!I.capture:!!I,b=xw(b),d&&d[Sn]?(d=d.i,y=String(y).toString(),y in d.g&&(L=d.g[y],b=Mp(L,b,I,j),-1<b&&(Sr(L[b]),Array.prototype.splice.call(L,b,1),L.length==0&&(delete d.g[y],d.h--)))):d&&(d=Vp(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Mp(y,b,I,j)),(b=-1<d?y[d]:null)&&Lp(b))}function Lp(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Sn])Eu(y.i,d);else{var b=d.type,I=d.proxy;y.removeEventListener?y.removeEventListener(b,I,d.capture):y.detachEvent?y.detachEvent(ww(b),I):y.addListener&&y.removeListener&&y.removeListener(I),(b=Vp(y))?(Eu(b,d),b.h==0&&(b.src=null,y[Op]=null)):Sr(d)}}}function ww(d){return d in jp?jp[d]:jp[d]="on"+d}function ZD(d,y){if(d.da)d=!0;else{y=new pt(y,this);var b=d.listener,I=d.ha||d.src;d.fa&&Lp(d),d=b.call(I,y)}return d}function Vp(d){return d=d[Op],d instanceof kn?d:null}var Fp="__closure_events_fn_"+(1e9*Math.random()>>>0);function xw(d){return typeof d=="function"?d:(d[Fp]||(d[Fp]=function(y){return d.handleEvent(y)}),d[Fp])}function Ct(){le.call(this),this.i=new kn(this),this.M=this,this.F=null}g(Ct,le),Ct.prototype[Sn]=!0,Ct.prototype.removeEventListener=function(d,y,b,I){_w(this,d,y,b,I)};function qt(d,y){var b,I=d.F;if(I)for(b=[];I;I=I.F)b.push(I);if(d=d.M,I=y.type||y,typeof y=="string")y=new be(y,d);else if(y instanceof be)y.target=y.target||d;else{var j=y;y=new be(I,d),C(y,j)}if(j=!0,b)for(var L=b.length-1;0<=L;L--){var z=y.g=b[L];j=Pu(z,I,!0,y)&&j}if(z=y.g=d,j=Pu(z,I,!0,y)&&j,j=Pu(z,I,!1,y)&&j,b)for(L=0;L<b.length;L++)z=y.g=b[L],j=Pu(z,I,!1,y)&&j}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var b=d.g[y],I=0;I<b.length;I++)Sr(b[I]);delete d.g[y],d.h--}}this.F=null},Ct.prototype.K=function(d,y,b,I){return this.i.add(String(d),y,!1,b,I)},Ct.prototype.L=function(d,y,b,I){return this.i.add(String(d),y,!0,b,I)};function Pu(d,y,b,I){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var j=!0,L=0;L<y.length;++L){var z=y[L];if(z&&!z.da&&z.capture==b){var Ce=z.listener,_t=z.ha||z.src;z.fa&&Eu(d.i,z),j=Ce.call(_t,I)!==!1&&j}}return j&&!I.defaultPrevented}function bw(d,y,b){if(typeof d=="function")b&&(d=f(d,b));else if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(d,y||0)}function Tw(d){d.g=bw(()=>{d.g=null,d.i&&(d.i=!1,Tw(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class eN extends le{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Tw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ha(d){le.call(this),this.h=d,this.g={}}g(Ha,le);var Sw=[];function kw(d){O(d.g,function(y,b){this.g.hasOwnProperty(b)&&Lp(y)},d),d.g={}}Ha.prototype.N=function(){Ha.aa.N.call(this),kw(this)},Ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Up=a.JSON.stringify,tN=a.JSON.parse,nN=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Bp(){}Bp.prototype.h=null;function Ew(d){return d.h||(d.h=d.i())}function Pw(){}var qa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zp(){be.call(this,"d")}g(zp,be);function $p(){be.call(this,"c")}g($p,be);var _s={},Iw=null;function Iu(){return Iw=Iw||new Ct}_s.La="serverreachability";function Cw(d){be.call(this,_s.La,d)}g(Cw,be);function Ga(d){const y=Iu();qt(y,new Cw(y))}_s.STAT_EVENT="statevent";function Aw(d,y){be.call(this,_s.STAT_EVENT,d),this.stat=y}g(Aw,be);function Gt(d){const y=Iu();qt(y,new Aw(y,d))}_s.Ma="timingevent";function Rw(d,y){be.call(this,_s.Ma,d),this.size=y}g(Rw,be);function Ka(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},y)}function Qa(){this.g=!0}Qa.prototype.xa=function(){this.g=!1};function rN(d,y,b,I,j,L){d.info(function(){if(d.g)if(L)for(var z="",Ce=L.split("&"),_t=0;_t<Ce.length;_t++){var we=Ce[_t].split("=");if(1<we.length){var At=we[0];we=we[1];var Rt=At.split("_");z=2<=Rt.length&&Rt[1]=="type"?z+(At+"="+we+"&"):z+(At+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+y+`
`+b+`
`+z})}function iN(d,y,b,I,j,L,z){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+y+`
`+b+`
`+L+" "+z})}function bo(d,y,b,I){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+oN(d,b)+(I?" "+I:"")})}function sN(d,y){d.info(function(){return"TIMEOUT: "+y})}Qa.prototype.info=function(){};function oN(d,y){if(!d.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var I=b[d];if(!(2>I.length)){var j=I[1];if(Array.isArray(j)&&!(1>j.length)){var L=j[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<j.length;z++)j[z]=""}}}}return Up(b)}catch{return y}}var Cu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wp;function Au(){}g(Au,Bp),Au.prototype.g=function(){return new XMLHttpRequest},Au.prototype.i=function(){return{}},Wp=new Au;function hi(d,y,b,I){this.j=d,this.i=y,this.l=b,this.R=I||1,this.U=new Ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nw}function Nw(){this.i=null,this.g="",this.h=!1}var Mw={},Hp={};function qp(d,y,b){d.L=1,d.v=Mu(kr(y)),d.m=b,d.P=!0,Ow(d,null)}function Ow(d,y){d.F=Date.now(),Ru(d),d.A=kr(d.v);var b=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),Qw(b.i,"t",I),d.C=0,b=d.j.J,d.h=new Nw,d.g=fx(d.j,b?y:null,!d.m),0<d.O&&(d.M=new eN(f(d.Y,d,d.g),d.O)),y=d.U,b=d.g,I=d.ca;var j="readystatechange";Array.isArray(j)||(j&&(Sw[0]=j.toString()),j=Sw);for(var L=0;L<j.length;L++){var z=vw(b,j[L],I||y.handleEvent,!1,y.h||y);if(!z)break;y.g[z.key]=z}y=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),Ga(),rN(d.i,d.u,d.A,d.l,d.R,d.m)}hi.prototype.ca=function(d){d=d.target;const y=this.M;y&&Er(d)==3?y.j():this.Y(d)},hi.prototype.Y=function(d){try{if(d==this.g)e:{const Rt=Er(this.g);var y=this.g.Ba();const ko=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||nx(this.g)))){this.J||Rt!=4||y==7||(y==8||0>=ko?Ga(3):Ga(2)),Gp(this);var b=this.g.Z();this.X=b;t:if(jw(this)){var I=nx(this.g);d="";var j=I.length,L=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ws(this),Ya(this);var z="";break t}this.h.i=new a.TextDecoder}for(y=0;y<j;y++)this.h.h=!0,d+=this.h.i.decode(I[y],{stream:!(L&&y==j-1)});I.length=0,this.h.g+=d,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=b==200,iN(this.i,this.u,this.A,this.l,this.R,Rt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,_t=this.g;if((Ce=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Ce)){var we=Ce;break t}}we=null}if(b=we)bo(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kp(this,b);else{this.o=!1,this.s=3,Gt(12),ws(this),Ya(this);break e}}if(this.P){b=!0;let zn;for(;!this.J&&this.C<z.length;)if(zn=aN(this,z),zn==Hp){Rt==4&&(this.s=4,Gt(14),b=!1),bo(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==Mw){this.s=4,Gt(15),bo(this.i,this.l,z,"[Invalid Chunk]"),b=!1;break}else bo(this.i,this.l,zn,null),Kp(this,zn);if(jw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||z.length!=0||this.h.h||(this.s=1,Gt(16),b=!1),this.o=this.o&&b,!b)bo(this.i,this.l,z,"[Invalid Chunked Response]"),ws(this),Ya(this);else if(0<z.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),em(At),At.M=!0,Gt(11))}}else bo(this.i,this.l,z,null),Kp(this,z);Rt==4&&ws(this),this.o&&!this.J&&(Rt==4?cx(this.j,this):(this.o=!1,Ru(this)))}else SN(this.g),b==400&&0<z.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),ws(this),Ya(this)}}}catch{}finally{}};function jw(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function aN(d,y){var b=d.C,I=y.indexOf(`
`,b);return I==-1?Hp:(b=Number(y.substring(b,I)),isNaN(b)?Mw:(I+=1,I+b>y.length?Hp:(y=y.slice(I,I+b),d.C=I+b,y)))}hi.prototype.cancel=function(){this.J=!0,ws(this)};function Ru(d){d.S=Date.now()+d.I,Lw(d,d.I)}function Lw(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ka(f(d.ba,d),y)}function Gp(d){d.B&&(a.clearTimeout(d.B),d.B=null)}hi.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(sN(this.i,this.A),this.L!=2&&(Ga(),Gt(17)),ws(this),this.s=2,Ya(this)):Lw(this,this.S-d)};function Ya(d){d.j.G==0||d.J||cx(d.j,d)}function ws(d){Gp(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,kw(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Kp(d,y){try{var b=d.j;if(b.G!=0&&(b.g==d||Qp(b.h,d))){if(!d.K&&Qp(b.h,d)&&b.G==3){try{var I=b.Da.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Uu(b),Vu(b);else break e;Zp(b),Gt(18)}}else b.za=j[1],0<b.za-b.T&&37500>j[2]&&b.F&&b.v==0&&!b.C&&(b.C=Ka(f(b.Za,b),6e3));if(1>=Uw(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else bs(b,11)}else if((d.K||b.g==d)&&Uu(b),!_(y))for(j=b.Da.g.parse(y),y=0;y<j.length;y++){let we=j[y];if(b.T=we[0],we=we[1],b.G==2)if(we[0]=="c"){b.K=we[1],b.ia=we[2];const At=we[3];At!=null&&(b.la=At,b.j.info("VER="+b.la));const Rt=we[4];Rt!=null&&(b.Aa=Rt,b.j.info("SVER="+b.Aa));const ko=we[5];ko!=null&&typeof ko=="number"&&0<ko&&(I=1.5*ko,b.L=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const zn=d.g;if(zn){const zu=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zu){var L=I.h;L.g||zu.indexOf("spdy")==-1&&zu.indexOf("quic")==-1&&zu.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Yp(L,L.h),L.h=null))}if(I.D){const tm=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;tm&&(I.ya=tm,De(I.I,I.D,tm))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),I=b;var z=d;if(I.qa=hx(I,I.J?I.ia:null,I.W),z.K){Bw(I.h,z);var Ce=z,_t=I.L;_t&&(Ce.I=_t),Ce.B&&(Gp(Ce),Ru(Ce)),I.g=z}else ax(I);0<b.i.length&&Fu(b)}else we[0]!="stop"&&we[0]!="close"||bs(b,7);else b.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?bs(b,7):Jp(b):we[0]!="noop"&&b.l&&b.l.ta(we),b.v=0)}}Ga(4)}catch{}}var lN=class{constructor(d,y){this.g=d,this.map=y}};function Vw(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fw(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Uw(d){return d.h?1:d.g?d.g.size:0}function Qp(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Yp(d,y){d.g?d.g.add(y):d.h=y}function Bw(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Vw.prototype.cancel=function(){if(this.i=zw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function zw(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const b of d.g.values())y=y.concat(b.D);return y}return v(d.i)}function cN(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var y=[],b=d.length,I=0;I<b;I++)y.push(d[I]);return y}y=[],b=0;for(I in d)y[b++]=d[I];return y}function uN(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var y=[];d=d.length;for(var b=0;b<d;b++)y.push(b);return y}y=[],b=0;for(const I in d)y[b++]=I;return y}}}function $w(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var b=uN(d),I=cN(d),j=I.length,L=0;L<j;L++)y.call(void 0,I[L],b&&b[L],d)}var Ww=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dN(d,y){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var I=d[b].indexOf("="),j=null;if(0<=I){var L=d[b].substring(0,I);j=d[b].substring(I+1)}else L=d[b];y(L,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function xs(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof xs){this.h=d.h,Du(this,d.j),this.o=d.o,this.g=d.g,Nu(this,d.s),this.l=d.l;var y=d.i,b=new Za;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),Hw(this,b),this.m=d.m}else d&&(y=String(d).match(Ww))?(this.h=!1,Du(this,y[1]||"",!0),this.o=Xa(y[2]||""),this.g=Xa(y[3]||"",!0),Nu(this,y[4]),this.l=Xa(y[5]||"",!0),Hw(this,y[6]||"",!0),this.m=Xa(y[7]||"")):(this.h=!1,this.i=new Za(null,this.h))}xs.prototype.toString=function(){var d=[],y=this.j;y&&d.push(Ja(y,qw,!0),":");var b=this.g;return(b||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Ja(y,qw,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Ja(b,b.charAt(0)=="/"?pN:fN,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Ja(b,gN)),d.join("")};function kr(d){return new xs(d)}function Du(d,y,b){d.j=b?Xa(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Nu(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function Hw(d,y,b){y instanceof Za?(d.i=y,yN(d.i,d.h)):(b||(y=Ja(y,mN)),d.i=new Za(y,d.h))}function De(d,y,b){d.i.set(y,b)}function Mu(d){return De(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Xa(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ja(d,y,b){return typeof d=="string"?(d=encodeURI(d).replace(y,hN),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function hN(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var qw=/[#\/\?@]/g,fN=/[#\?:]/g,pN=/[#\?]/g,mN=/[#\?@]/g,gN=/#/g;function Za(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function fi(d){d.g||(d.g=new Map,d.h=0,d.i&&dN(d.i,function(y,b){d.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}t=Za.prototype,t.add=function(d,y){fi(this),this.i=null,d=To(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(y),this.h+=1,this};function Gw(d,y){fi(d),y=To(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Kw(d,y){return fi(d),y=To(d,y),d.g.has(y)}t.forEach=function(d,y){fi(this),this.g.forEach(function(b,I){b.forEach(function(j){d.call(y,j,I,this)},this)},this)},t.na=function(){fi(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let I=0;I<y.length;I++){const j=d[I];for(let L=0;L<j.length;L++)b.push(y[I])}return b},t.V=function(d){fi(this);let y=[];if(typeof d=="string")Kw(this,d)&&(y=y.concat(this.g.get(To(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)y=y.concat(d[b])}return y},t.set=function(d,y){return fi(this),this.i=null,d=To(this,d),Kw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function Qw(d,y,b){Gw(d,y),0<b.length&&(d.i=null,d.g.set(To(d,y),v(b)),d.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var I=y[b];const L=encodeURIComponent(String(I)),z=this.V(I);for(I=0;I<z.length;I++){var j=L;z[I]!==""&&(j+="="+encodeURIComponent(String(z[I]))),d.push(j)}}return this.i=d.join("&")};function To(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function yN(d,y){y&&!d.j&&(fi(d),d.i=null,d.g.forEach(function(b,I){var j=I.toLowerCase();I!=j&&(Gw(this,I),Qw(this,j,b))},d)),d.j=y}function vN(d,y){const b=new Qa;if(a.Image){const I=new Image;I.onload=m(pi,b,"TestLoadImage: loaded",!0,y,I),I.onerror=m(pi,b,"TestLoadImage: error",!1,y,I),I.onabort=m(pi,b,"TestLoadImage: abort",!1,y,I),I.ontimeout=m(pi,b,"TestLoadImage: timeout",!1,y,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else y(!1)}function _N(d,y){const b=new Qa,I=new AbortController,j=setTimeout(()=>{I.abort(),pi(b,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:I.signal}).then(L=>{clearTimeout(j),L.ok?pi(b,"TestPingServer: ok",!0,y):pi(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),pi(b,"TestPingServer: error",!1,y)})}function pi(d,y,b,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(b)}catch{}}function wN(){this.g=new nN}function xN(d,y,b){const I=b||"";try{$w(d,function(j,L){let z=j;c(j)&&(z=Up(j)),y.push(I+L+"="+encodeURIComponent(z))})}catch(j){throw y.push(I+"type="+encodeURIComponent("_badmap")),j}}function Ou(d){this.l=d.Ub||null,this.j=d.eb||!1}g(Ou,Bp),Ou.prototype.g=function(){return new ju(this.l,this.j)},Ou.prototype.i=function(d){return function(){return d}}({});function ju(d,y){Ct.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(ju,Ct),t=ju.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,tl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,el(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,tl(this)),this.g&&(this.readyState=3,tl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yw(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yw(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?el(this):tl(this),this.readyState==3&&Yw(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,el(this))},t.Qa=function(d){this.g&&(this.response=d,el(this))},t.ga=function(){this.g&&el(this)};function el(d){d.readyState=4,d.l=null,d.j=null,d.v=null,tl(d)}t.setRequestHeader=function(d,y){this.u.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=y.next();return d.join(`\r
`)};function tl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ju.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Xw(d){let y="";return O(d,function(b,I){y+=I,y+=":",y+=b,y+=`\r
`}),y}function Xp(d,y,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=Xw(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):De(d,y,b))}function Ge(d){Ct.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Ge,Ct);var bN=/^https?$/i,TN=["POST","PUT"];t=Ge.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,y,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wp.g(),this.v=this.o?Ew(this.o):Ew(Wp),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(L){Jw(this,L);return}if(d=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)b.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const L of I.keys())b.set(L,I.get(L));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(L=>L.toLowerCase()=="content-type"),j=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(TN,y,void 0))||I||j||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of b)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tx(this),this.u=!0,this.g.send(d),this.u=!1}catch(L){Jw(this,L)}};function Jw(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,Zw(d),Lu(d)}function Zw(d){d.A||(d.A=!0,qt(d,"complete"),qt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,qt(this,"complete"),qt(this,"abort"),Lu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lu(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ex(this):this.bb())},t.bb=function(){ex(this)};function ex(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Er(d)!=4||d.Z()!=2)){if(d.u&&Er(d)==4)bw(d.Ea,0,d);else if(qt(d,"readystatechange"),Er(d)==4){d.h=!1;try{const z=d.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var I;if(I=z===0){var j=String(d.D).match(Ww)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),I=!bN.test(j?j.toLowerCase():"")}b=I}if(b)qt(d,"complete"),qt(d,"success");else{d.m=6;try{var L=2<Er(d)?d.g.statusText:""}catch{L=""}d.l=L+" ["+d.Z()+"]",Zw(d)}}finally{Lu(d)}}}}function Lu(d,y){if(d.g){tx(d);const b=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||qt(d,"ready");try{b.onreadystatechange=I}catch{}}}function tx(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Er(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),tN(y)}};function nx(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function SN(d){const y={};d=(d.g&&2<=Er(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(_(d[I]))continue;var b=D(d[I]);const j=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const L=y[j]||[];y[j]=L,L.push(b)}E(y,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function nl(d,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||y}function rx(d){this.Aa=0,this.i=[],this.j=new Qa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=nl("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=nl("baseRetryDelayMs",5e3,d),this.cb=nl("retryDelaySeedMs",1e4,d),this.Wa=nl("forwardChannelMaxRetries",2,d),this.wa=nl("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Vw(d&&d.concurrentRequestLimit),this.Da=new wN,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=rx.prototype,t.la=8,t.G=1,t.connect=function(d,y,b,I){Gt(0),this.W=d,this.H=y||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.I=hx(this,null,this.W),Fu(this)};function Jp(d){if(ix(d),d.G==3){var y=d.U++,b=kr(d.I);if(De(b,"SID",d.K),De(b,"RID",y),De(b,"TYPE","terminate"),rl(d,b),y=new hi(d,d.j,y),y.L=2,y.v=Mu(kr(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=y.v,b=!0),b||(y.g=fx(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ru(y)}dx(d)}function Vu(d){d.g&&(em(d),d.g.cancel(),d.g=null)}function ix(d){Vu(d),d.u&&(a.clearTimeout(d.u),d.u=null),Uu(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Fu(d){if(!Fw(d.h)&&!d.s){d.s=!0;var y=d.Ga;se||Z(),B||(se(),B=!0),W.add(y,d),d.B=0}}function kN(d,y){return Uw(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ka(f(d.Ga,d,y),ux(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const j=new hi(this,this.j,d);let L=this.o;if(this.S&&(L?(L=S(L),C(L,this.S)):L=this.S),this.m!==null||this.O||(j.H=L,L=null),this.P)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,4096<y){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=ox(this,j,y),b=kr(this.I),De(b,"RID",d),De(b,"CVER",22),this.D&&De(b,"X-HTTP-Session-Id",this.D),rl(this,b),L&&(this.O?y="headers="+encodeURIComponent(String(Xw(L)))+"&"+y:this.m&&Xp(b,this.m,L)),Yp(this.h,j),this.Ua&&De(b,"TYPE","init"),this.P?(De(b,"$req",y),De(b,"SID","null"),j.T=!0,qp(j,b,null)):qp(j,b,y),this.G=2}}else this.G==3&&(d?sx(this,d):this.i.length==0||Fw(this.h)||sx(this))};function sx(d,y){var b;y?b=y.l:b=d.U++;const I=kr(d.I);De(I,"SID",d.K),De(I,"RID",b),De(I,"AID",d.T),rl(d,I),d.m&&d.o&&Xp(I,d.m,d.o),b=new hi(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),y&&(d.i=y.D.concat(d.i)),y=ox(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Yp(d.h,b),qp(b,I,y)}function rl(d,y){d.H&&O(d.H,function(b,I){De(y,I,b)}),d.l&&$w({},function(b,I){De(y,I,b)})}function ox(d,y,b){b=Math.min(d.i.length,b);var I=d.l?f(d.l.Na,d.l,d):null;e:{var j=d.i;let L=-1;for(;;){const z=["count="+b];L==-1?0<b?(L=j[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let Ce=!0;for(let _t=0;_t<b;_t++){let we=j[_t].g;const At=j[_t].map;if(we-=L,0>we)L=Math.max(0,j[_t].g-100),Ce=!1;else try{xN(At,z,"req"+we+"_")}catch{I&&I(At)}}if(Ce){I=z.join("&");break e}}}return d=d.i.splice(0,b),y.D=d,I}function ax(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;se||Z(),B||(se(),B=!0),W.add(y,d),d.v=0}}function Zp(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ka(f(d.Fa,d),ux(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,lx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ka(f(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),Vu(this),lx(this))};function em(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function lx(d){d.g=new hi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=kr(d.qa);De(y,"RID","rpc"),De(y,"SID",d.K),De(y,"AID",d.T),De(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&De(y,"TO",d.ja),De(y,"TYPE","xmlhttp"),rl(d,y),d.m&&d.o&&Xp(y,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=Mu(kr(y)),b.m=null,b.P=!0,Ow(b,d)}t.Za=function(){this.C!=null&&(this.C=null,Vu(this),Zp(this),Gt(19))};function Uu(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function cx(d,y){var b=null;if(d.g==y){Uu(d),em(d),d.g=null;var I=2}else if(Qp(d.h,y))b=y.D,Bw(d.h,y),I=1;else return;if(d.G!=0){if(y.o)if(I==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var j=d.B;I=Iu(),qt(I,new Rw(I,b)),Fu(d)}else ax(d);else if(j=y.s,j==3||j==0&&0<y.X||!(I==1&&kN(d,y)||I==2&&Zp(d)))switch(b&&0<b.length&&(y=d.h,y.i=y.i.concat(b)),j){case 1:bs(d,5);break;case 4:bs(d,10);break;case 3:bs(d,6);break;default:bs(d,2)}}}function ux(d,y){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*y}function bs(d,y){if(d.j.info("Error code "+y),y==2){var b=f(d.fb,d),I=d.Xa;const j=!I;I=new xs(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Du(I,"https"),Mu(I),j?vN(I.toString(),b):_N(I.toString(),b)}else Gt(2);d.G=0,d.l&&d.l.sa(y),dx(d),ix(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function dx(d){if(d.G=0,d.ka=[],d.l){const y=zw(d.h);(y.length!=0||d.i.length!=0)&&(x(d.ka,y),x(d.ka,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.ra()}}function hx(d,y,b){var I=b instanceof xs?kr(b):new xs(b);if(I.g!="")y&&(I.g=y+"."+I.g),Nu(I,I.s);else{var j=a.location;I=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;var L=new xs(null);I&&Du(L,I),y&&(L.g=y),j&&Nu(L,j),b&&(L.l=b),I=L}return b=d.D,y=d.ya,b&&y&&De(I,b,y),De(I,"VER",d.la),rl(d,I),I}function fx(d,y,b){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Ge(new Ou({eb:b})):new Ge(d.pa),y.Ha(d.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function px(){}t=px.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bu(){}Bu.prototype.g=function(d,y){return new fn(d,y)};function fn(d,y){Ct.call(this),this.g=new rx(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!_(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!_(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new So(this)}g(fn,Ct),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Jp(this.g)},fn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=Up(d),d=b);y.i.push(new lN(y.Ya++,d)),y.G==3&&Fu(y)},fn.prototype.N=function(){this.g.l=null,delete this.j,Jp(this.g),delete this.g,fn.aa.N.call(this)};function mx(d){zp.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const b in y){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}g(mx,zp);function gx(){$p.call(this),this.status=1}g(gx,$p);function So(d){this.g=d}g(So,px),So.prototype.ua=function(){qt(this.g,"a")},So.prototype.ta=function(d){qt(this.g,new mx(d))},So.prototype.sa=function(d){qt(this.g,new gx)},So.prototype.ra=function(){qt(this.g,"b")},Bu.prototype.createWebChannel=Bu.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,PC=function(){return new Bu},EC=function(){return Iu()},kC=_s,Oy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cu.NO_ERROR=0,Cu.TIMEOUT=8,Cu.HTTP_ERROR=6,Yd=Cu,Dw.COMPLETE="complete",SC=Dw,Pw.EventType=qa,qa.OPEN="a",qa.CLOSE="b",qa.ERROR="c",qa.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,El=Pw,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,TC=Ge}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});const y1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new Gf("@firebase/firestore");function hl(){return ro.logLevel}function G(t,...e){if(ro.logLevel<=me.DEBUG){const n=e.map(Bv);ro.debug(`Firestore (${Fa}): ${t}`,...n)}}function ri(t,...e){if(ro.logLevel<=me.ERROR){const n=e.map(Bv);ro.error(`Firestore (${Fa}): ${t}`,...n)}}function xa(t,...e){if(ro.logLevel<=me.WARN){const n=e.map(Bv);ro.warn(`Firestore (${Fa}): ${t}`,...n)}}function Bv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${Fa}) INTERNAL ASSERTION FAILED: `+t;throw ri(e),new Error(e)}function Ie(t,e){t||ie()}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class A3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class R3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class D3{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new IC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Vt(e)}}class N3{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class M3{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new N3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class O3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new O3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=L3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function ba(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ft(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new ft(0,0))}static max(){return new oe(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Rc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Rc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends Rc{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const V3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends Rc{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return V3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new $(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Oe.fromString(e))}static fromName(e){return new Y(Oe.fromString(e).popFirst(5))}static empty(){return new Y(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Oe(e.slice()))}}function F3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new ft(n+1,0):new ft(n,r));return new ns(i,Y.empty(),e)}function U3(t){return new ns(t.readTime,t.key,-1)}class ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ns(oe.min(),Y.empty(),-1)}static max(){return new ns(oe.max(),Y.empty(),-1)}}function B3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==z3)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function W3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function du(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zv.oe=-1;function Xf(t){return t==null}function Wh(t){return t===0&&1/t==-1/0}function H3(t){return typeof t=="number"&&Number.isInteger(t)&&!Wh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function go(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){this.comparator=e,this.root=n||bt.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ud(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ud(this.root,e,this.comparator,!1)}getReverseIterator(){return new ud(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ud(this.root,e,this.comparator,!0)}}class ud{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??bt.RED,this.left=i??bt.EMPTY,this.right=s??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new bt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return bt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,i,s){return this}insert(e,n,r){return new bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _1(this.data.getIterator())}getIteratorFrom(e){return new _1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class _1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new vn([])}unionWith(e){let n=new kt(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RC("Invalid base64 string: "+s):s}}(e);return new It(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const q3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=q3.exec(t);if(Ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function io(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Wv(t){const e=t.mapValue.fields.__previous_value__;return $v(e)?Wv(e):e}function Dc(t){const e=rs(t.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Nc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Nc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Nc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd={mapValue:{}};function so(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$v(t)?4:Q3(t)?9007199254740991:K3(t)?10:11:ie()}function br(t,e){if(t===e)return!0;const n=so(t);if(n!==so(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Dc(t).isEqual(Dc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=rs(i.timestampValue),a=rs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return io(i.bytesValue).isEqual(io(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ye(i.doubleValue),a=Ye(s.doubleValue);return o===a?Wh(o)===Wh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ba(t.arrayValue.values||[],e.arrayValue.values||[],br);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(v1(o)!==v1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!br(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Mc(t,e){return(t.values||[]).find(n=>br(n,e))!==void 0}function Ta(t,e){if(t===e)return 0;const n=so(t),r=so(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ye(s.integerValue||s.doubleValue),l=Ye(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return w1(t.timestampValue,e.timestampValue);case 4:return w1(Dc(t),Dc(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=io(s),l=io(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=xe(a[c],l[c]);if(u!==0)return u}return xe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=xe(Ye(s.latitude),Ye(o.latitude));return a!==0?a:xe(Ye(s.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return x1(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const h=s.fields||{},f=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,g=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=xe(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:x1(m,g)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===dd.mapValue&&o===dd.mapValue)return 0;if(s===dd.mapValue)return 1;if(o===dd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=xe(l[h],u[h]);if(f!==0)return f;const m=Ta(a[l[h]],c[u[h]]);if(m!==0)return m}return xe(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ie()}}function w1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=rs(t),r=rs(e),i=xe(n.seconds,r.seconds);return i!==0?i:xe(n.nanos,r.nanos)}function x1(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ta(n[i],r[i]);if(s)return s}return xe(n.length,r.length)}function Sa(t){return jy(t)}function jy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=rs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return io(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=jy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${jy(n.fields[o])}`;return i+"}"}(t.mapValue):ie()}function b1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ly(t){return!!t&&"integerValue"in t}function Hv(t){return!!t&&"arrayValue"in t}function T1(t){return!!t&&"nullValue"in t}function S1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xd(t){return!!t&&"mapValue"in t}function K3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ql(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return go(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ql(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ql(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Q3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ql(n)}setAll(e){let n=Tt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ql(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Xd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return br(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){go(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new rn(ql(this.value))}}function DC(t){const e=[];return go(t.fields,(n,r)=>{const i=new Tt([n]);if(Xd(r)){const s=DC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,oe.min(),oe.min(),oe.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new Ut(e,1,n,oe.min(),r,i,0)}static newNoDocument(e,n){return new Ut(e,2,n,oe.min(),oe.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,oe.min(),oe.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n){this.position=e,this.inclusive=n}}function k1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Ta(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function E1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!br(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n="asc"){this.field=e,this.dir=n}}function Y3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NC=class{};class st extends NC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new J3(e,n,r):n==="array-contains"?new tU(e,r):n==="in"?new nU(e,r):n==="not-in"?new rU(e,r):n==="array-contains-any"?new iU(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Z3(e,r):new eU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ta(n,this.value)):n!==null&&so(this.value)===so(n)&&this.matchesComparison(Ta(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tr extends NC{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new tr(e,n)}matches(e){return MC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function MC(t){return t.op==="and"}function OC(t){return X3(t)&&MC(t)}function X3(t){for(const e of t.filters)if(e instanceof tr)return!1;return!0}function Vy(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Sa(t.value);if(OC(t))return t.filters.map(e=>Vy(e)).join(",");{const e=t.filters.map(n=>Vy(n)).join(",");return`${t.op}(${e})`}}function jC(t,e){return t instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&br(r.value,i.value)}(t,e):t instanceof tr?function(r,i){return i instanceof tr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&jC(o,i.filters[a]),!0):!1}(t,e):void ie()}function LC(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Sa(n.value)}`}(t):t instanceof tr?function(n){return n.op.toString()+" {"+n.getFilters().map(LC).join(" ,")+"}"}(t):"Filter"}class J3 extends st{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class Z3 extends st{constructor(e,n){super(e,"in",n),this.keys=VC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class eU extends st{constructor(e,n){super(e,"not-in",n),this.keys=VC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function VC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class tU extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hv(n)&&Mc(n.arrayValue,this.value)}}class nU extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mc(this.value.arrayValue,n)}}class rU extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Mc(this.value.arrayValue,n)}}class iU extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Mc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function P1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new sU(t,e,n,r,i,s,o)}function qv(t){const e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Xf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Sa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Sa(r)).join(",")),e.ue=n}return e.ue}function Gv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Y3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!E1(t.startAt,e.startAt)&&E1(t.endAt,e.endAt)}function Fy(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function oU(t,e,n,r,i,s,o,a){return new Ua(t,e,n,r,i,s,o,a)}function Kv(t){return new Ua(t)}function I1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FC(t){return t.collectionGroup!==null}function Gl(t){const e=ae(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new kt(Tt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Oc(s,r))}),n.has(Tt.keyField().canonicalString())||e.ce.push(new Oc(Tt.keyField(),r))}return e.ce}function gr(t){const e=ae(t);return e.le||(e.le=aU(e,Gl(t))),e.le}function aU(t,e){if(t.limitType==="F")return P1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Oc(i.field,s)});const n=t.endAt?new Hh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hh(t.startAt.position,t.startAt.inclusive):null;return P1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Uy(t,e){const n=t.filters.concat([e]);return new Ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function By(t,e,n){return new Ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jf(t,e){return Gv(gr(t),gr(e))&&t.limitType===e.limitType}function UC(t){return`${qv(gr(t))}|lt:${t.limitType}`}function Ro(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>LC(i)).join(", ")}]`),Xf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Sa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Sa(i)).join(",")),`Target(${r})`}(gr(t))}; limitType=${t.limitType})`}function Zf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Gl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=k1(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Gl(r),i)||r.endAt&&!function(o,a,l){const c=k1(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Gl(r),i))}(t,e)}function lU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BC(t){return(e,n)=>{let r=!1;for(const i of Gl(t)){const s=cU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function cU(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ta(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return AC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=new qe(Y.comparator);function ii(){return uU}const zC=new qe(Y.comparator);function Pl(...t){let e=zC;for(const n of t)e=e.insert(n.key,n);return e}function $C(t){let e=zC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Us(){return Kl()}function WC(){return Kl()}function Kl(){return new Ba(t=>t.toString(),(t,e)=>t.isEqual(e))}const dU=new qe(Y.comparator),hU=new kt(Y.comparator);function he(...t){let e=hU;for(const n of t)e=e.add(n);return e}const fU=new kt(xe);function pU(){return fU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wh(e)?"-0":e}}function HC(t){return{integerValue:""+t}}function mU(t,e){return H3(e)?HC(e):Qv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this._=void 0}}function gU(t,e,n){return t instanceof qh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&$v(s)&&(s=Wv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof jc?GC(t,e):t instanceof Lc?KC(t,e):function(i,s){const o=qC(i,s),a=C1(o)+C1(i.Pe);return Ly(o)&&Ly(i.Pe)?HC(a):Qv(i.serializer,a)}(t,e)}function yU(t,e,n){return t instanceof jc?GC(t,e):t instanceof Lc?KC(t,e):n}function qC(t,e){return t instanceof Gh?function(r){return Ly(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class qh extends ep{}class jc extends ep{constructor(e){super(),this.elements=e}}function GC(t,e){const n=QC(e);for(const r of t.elements)n.some(i=>br(i,r))||n.push(r);return{arrayValue:{values:n}}}class Lc extends ep{constructor(e){super(),this.elements=e}}function KC(t,e){let n=QC(e);for(const r of t.elements)n=n.filter(i=>!br(i,r));return{arrayValue:{values:n}}}class Gh extends ep{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function C1(t){return Ye(t.integerValue||t.doubleValue)}function QC(t){return Hv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function vU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof jc&&i instanceof jc||r instanceof Lc&&i instanceof Lc?ba(r.elements,i.elements,br):r instanceof Gh&&i instanceof Gh?br(r.Pe,i.Pe):r instanceof qh&&i instanceof qh}(t.transform,e.transform)}class _U{constructor(e,n){this.version=e,this.transformResults=n}}class Xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xt}static exists(e){return new Xt(void 0,e)}static updateTime(e){return new Xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tp{}function YC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new np(t.key,Xt.none()):new hu(t.key,t.data,Xt.none());{const n=t.data,r=rn.empty();let i=new kt(Tt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ms(t.key,r,new vn(i.toArray()),Xt.none())}}function wU(t,e,n){t instanceof hu?function(i,s,o){const a=i.value.clone(),l=R1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ms?function(i,s,o){if(!Jd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=R1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(XC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ql(t,e,n,r){return t instanceof hu?function(s,o,a,l){if(!Jd(s.precondition,o))return a;const c=s.value.clone(),u=D1(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ms?function(s,o,a,l){if(!Jd(s.precondition,o))return a;const c=D1(s.fieldTransforms,l,o),u=o.data;return u.setAll(XC(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Jd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function xU(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=qC(r.transform,i||null);s!=null&&(n===null&&(n=rn.empty()),n.set(r.field,s))}return n||null}function A1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ba(r,i,(s,o)=>vU(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hu extends tp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ms extends tp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function XC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function R1(t,e,n){const r=new Map;Ie(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,yU(o,a,n[i]))}return r}function D1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,gU(s,o,e))}return r}class np extends tp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bU extends tp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&wU(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ql(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ql(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=WC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=YC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,(n,r)=>A1(n,r))&&ba(this.baseMutations,e.baseMutations,(n,r)=>A1(n,r))}}class Yv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length);let i=function(){return dU}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Yv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,ge;function EU(t){switch(t){default:return ie();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function JC(t){if(t===void 0)return ri("GRPC error has no .code"),V.UNKNOWN;switch(t){case nt.OK:return V.OK;case nt.CANCELLED:return V.CANCELLED;case nt.UNKNOWN:return V.UNKNOWN;case nt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case nt.INTERNAL:return V.INTERNAL;case nt.UNAVAILABLE:return V.UNAVAILABLE;case nt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case nt.NOT_FOUND:return V.NOT_FOUND;case nt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case nt.ABORTED:return V.ABORTED;case nt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case nt.DATA_LOSS:return V.DATA_LOSS;default:return ie()}}(ge=nt||(nt={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU=new qs([4294967295,4294967295],0);function N1(t){const e=PU().encode(t),n=new bC;return n.update(e),new Uint8Array(n.digest())}function M1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qs([n,r],0),new qs([i,s],0)]}class Xv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Il(`Invalid padding: ${n}`);if(r<0)throw new Il(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Il(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Il(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=qs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(qs.fromNumber(r)));return i.compare(IU)===1&&(i=new qs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=N1(e),[r,i]=M1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Xv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=N1(e),[r,i]=M1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rp(oe.min(),i,new qe(xe),ii(),he())}}class fu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fu(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class ZC{constructor(e,n){this.targetId=e,this.me=n}}class eA{constructor(e,n,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class O1{constructor(){this.fe=0,this.ge=L1(),this.pe=It.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ie()}}),new fu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=L1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class CU{constructor(e){this.Le=e,this.Be=new Map,this.ke=ii(),this.qe=j1(),this.Qe=new qe(xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Fy(s))if(r===0){const o=new Y(s.path);this.Ue(n,o,Ut.newNoDocument(o,oe.min()))}else Ie(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=io(r).toUint8Array()}catch(l){if(l instanceof RC)return xa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Xv(o,i,s)}catch(l){return xa(l instanceof Il?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Fy(a.target)){const l=new Y(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ut.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=he();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new rp(e,n,this.Qe,this.ke,r);return this.ke=ii(),this.qe=j1(),this.Qe=new qe(xe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new O1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new kt(xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new O1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function j1(){return new qe(Y.comparator)}function L1(){return new qe(Y.comparator)}const AU={asc:"ASCENDING",desc:"DESCENDING"},RU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DU={and:"AND",or:"OR"};class NU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zy(t,e){return t.useProto3Json||Xf(e)?e:{value:e}}function Kh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MU(t,e){return Kh(t,e.toTimestamp())}function yr(t){return Ie(!!t),oe.fromTimestamp(function(n){const r=rs(n);return new ft(r.seconds,r.nanos)}(t))}function Jv(t,e){return $y(t,e).canonicalString()}function $y(t,e){const n=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nA(t){const e=Oe.fromString(t);return Ie(aA(e)),e}function Wy(t,e){return Jv(t.databaseId,e.path)}function Vm(t,e){const n=nA(e);if(n.get(1)!==t.databaseId.projectId)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(iA(n))}function rA(t,e){return Jv(t.databaseId,e)}function OU(t){const e=nA(t);return e.length===4?Oe.emptyPath():iA(e)}function Hy(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iA(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function V1(t,e,n){return{name:Wy(t,e),fields:n.value.mapValue.fields}}function jU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Ie(u===void 0||typeof u=="string"),It.fromBase64String(u||"")):(Ie(u===void 0||u instanceof Buffer||u instanceof Uint8Array),It.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?V.UNKNOWN:JC(c.code);return new $(u,c.message||"")}(o);n=new eA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vm(t,r.document.name),s=yr(r.document.updateTime),o=r.document.createTime?yr(r.document.createTime):oe.min(),a=new rn({mapValue:{fields:r.document.fields}}),l=Ut.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Zd(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Vm(t,r.document),s=r.readTime?yr(r.readTime):oe.min(),o=Ut.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Zd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Vm(t,r.document),s=r.removedTargetIds||[];n=new Zd([],s,i,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new kU(i,s),a=r.targetId;n=new ZC(a,o)}}return n}function LU(t,e){let n;if(e instanceof hu)n={update:V1(t,e.key,e.value)};else if(e instanceof np)n={delete:Wy(t,e.key)};else if(e instanceof ms)n={update:V1(t,e.key,e.data),updateMask:qU(e.fieldMask)};else{if(!(e instanceof bU))return ie();n={verify:Wy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof qh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Lc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:MU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ie()}(t,e.precondition)),n}function VU(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?yr(i.updateTime):yr(s);return o.isEqual(oe.min())&&(o=yr(s)),new _U(o,i.transformResults||[])}(n,e))):[]}function FU(t,e){return{documents:[rA(t,e.path)]}}function UU(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rA(t,i);const s=function(c){if(c.length!==0)return oA(tr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Do(f.field),direction:$U(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=zy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function BU(t){let e=OU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ie(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const f=sA(h);return f instanceof tr&&OC(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(g){return new Oc(No(g.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Xf(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Hh(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new Hh(m,f)}(n.endAt)),oU(e,i,o,s,a,"F",l,c)}function zU(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=No(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=No(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=No(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=No(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return st.create(No(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return tr.create(n.compositeFilter.filters.map(r=>sA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function $U(t){return AU[t]}function WU(t){return RU[t]}function HU(t){return DU[t]}function Do(t){return{fieldPath:t.canonicalString()}}function No(t){return Tt.fromServerFormat(t.fieldPath)}function oA(t){return t instanceof st?function(n){if(n.op==="=="){if(S1(n.value))return{unaryFilter:{field:Do(n.field),op:"IS_NAN"}};if(T1(n.value))return{unaryFilter:{field:Do(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(S1(n.value))return{unaryFilter:{field:Do(n.field),op:"IS_NOT_NAN"}};if(T1(n.value))return{unaryFilter:{field:Do(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Do(n.field),op:WU(n.op),value:n.value}}}(t):t instanceof tr?function(n){const r=n.getFilters().map(i=>oA(i));return r.length===1?r[0]:{compositeFilter:{op:HU(n.op),filters:r}}}(t):ie()}function qU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function aA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n,r,i,s=oe.min(),o=oe.min(),a=It.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e){this.ct=e}}function KU(t){const e=BU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?By(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(){this.un=new YU}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(ns.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class YU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new kt(Oe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ka(0)}static kn(){return new ka(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(){this.changes=new Ba(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ql(r.mutation,i,vn.empty(),ft.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const i=Us();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Pl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Us();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ii();const o=Kl(),a=function(){return Kl()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof ms)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Ql(u.mutation,c,u.mutation.getFieldMask(),ft.now())):o.set(c.key,vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new JU(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Kl();let i=new qe((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||vn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||he()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=WC();u.forEach(f=>{if(!s.has(f)){const m=YC(n.get(f),r.get(f));m!==null&&h.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(Us());let a=-1,l=s;return o.next(c=>F.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?F.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,he())).next(u=>({batchId:a,changes:$C(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=Pl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Pl();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const c=function(h,f){return new Ua(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ut.newInvalidDocument(u)))});let a=Pl();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Ql(u.mutation,c,vn.empty(),ft.now()),Zf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yr(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:KU(i.bundledQuery),readTime:yr(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(){this.overlays=new qe(Y.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Us();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=Us(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new qe((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Us(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Us(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return F.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new SU(n,r));let s=this.Ir.get(n);s===void 0&&(s=he(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.Tr=new kt(mt.Er),this.dr=new kt(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new Oe([])),r=new mt(n,e),i=new mt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new Oe([])),r=new mt(n,e),i=new mt(n,e+1);let s=he();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||xe(e.wr,n.wr)}static Ar(e,n){return xe(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new kt(mt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new TU(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new mt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),i=new mt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(xe);return n.forEach(i=>{const s=new mt(i,0),o=new mt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Y.isDocumentKey(s)||(s=s.child(""));const o=new mt(new Y(s),0);let a=new kt(xe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new mt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new mt(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.Mr=e,this.docs=function(){return new qe(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=ii();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ut.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ii();const o=n.path,a=new Y(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||B3(U3(u),r)<=0||(i.has(u.key)||Zf(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ie()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new s6(this)}getSize(e){return F.resolve(this.size)}}class s6 extends XU{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e){this.persistence=e,this.Nr=new Ba(n=>qv(n),Gv),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Zv,this.targetCount=0,this.kr=ka.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ka(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,n){this.qr={},this.overlays={},this.Qr=new zv(0),this.Kr=!1,this.Kr=!0,this.$r=new n6,this.referenceDelegate=e(this),this.Ur=new o6(this),this.indexManager=new QU,this.remoteDocumentCache=function(i){return new i6(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new GU(n),this.Gr=new e6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new t6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new r6(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new l6(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class l6 extends $3{constructor(e){super(),this.currentSequenceNumber=e}}class e_{constructor(e){this.persistence=e,this.Jr=new Zv,this.Yr=null}static Zr(e){return new e_(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=Y.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=he(),i=he();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return JV()?8:W3(Wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new c6;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(hl()<=me.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Ro(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(hl()<=me.DEBUG&&G("QueryEngine","Query:",Ro(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(hl()<=me.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Ro(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gr(n))):F.resolve())}Yi(e,n){if(I1(n))return F.resolve(null);let r=gr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=By(n,null,"F"),r=gr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=he(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,By(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return I1(n)||i.isEqual(oe.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(hl()<=me.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ro(n)),this.rs(e,o,n,F3(i,-1)).next(a=>a))})}ts(e,n){let r=new kt(BC(e));return n.forEach((i,s)=>{Zf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return hl()<=me.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Ro(n)),this.Ji.getDocumentsMatchingQuery(e,n,ns.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new qe(xe),this._s=new Ba(s=>qv(s),Gv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZU(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function h6(t,e,n,r){return new d6(t,e,n,r)}async function lA(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=he();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function f6(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,f=h.keys();let m=F.resolve();return f.forEach(g=>{m=m.next(()=>u.getEntry(l,g)).next(v=>{const x=c.docVersions.get(g);Ie(x!==null),v.version.compareTo(x)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=he();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function cA(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function p6(t,e){const n=ae(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,h)=>{const f=i.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,u.addedDocuments,h)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(It.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(h,m),function(v,x,w){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,u)&&a.push(n.Ur.updateTargetData(s,m))});let l=ii(),c=he();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(m6(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(oe.min())){const u=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function m6(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ii();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function g6(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function y6(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Mi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function qy(t,e,n){const r=ae(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!du(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function F1(t,e,n){const r=ae(t);let i=oe.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=ae(l),f=h._s.get(u);return f!==void 0?F.resolve(h.os.get(f)):h.Ur.getTargetData(c,u)}(r,o,gr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:oe.min(),n?s:he())).next(a=>(v6(r,lU(e),a),{documents:a,Ts:s})))}function v6(t,e,n){let r=t.us.get(e)||oe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class U1{constructor(){this.activeTargetIds=pU()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _6{constructor(){this.so=new U1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new U1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd=null;function Fm(){return hd===null?hd=function(){return 268435456+Math.round(2147483648*Math.random())}():hd++,"0x"+hd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class T6 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Fm(),l=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(u=>(G("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw xa("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=x6[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Fm();return new Promise((o,a)=>{const l=new TC;l.setWithCredentials(!0),l.listenOnce(SC.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Yd.NO_ERROR:const u=l.getResponseJson();G(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Yd.TIMEOUT:G(Mt,`RPC '${e}' ${s} timed out`),a(new $(V.DEADLINE_EXCEEDED,"Request time out"));break;case Yd.HTTP_ERROR:const h=l.getStatus();if(G(Mt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const g=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(w)>=0?w:V.UNKNOWN}(m.status);a(new $(g,m.message))}else a(new $(V.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new $(V.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{G(Mt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);G(Mt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Fm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=PC(),a=EC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");G(Mt,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let f=!1,m=!1;const g=new b6({Io:x=>{m?G(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(f||(G(Mt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),G(Mt,`RPC '${e}' stream ${i} sending:`,x),h.send(x))},To:()=>h.close()}),v=(x,w,_)=>{x.listen(w,T=>{try{_(T)}catch(P){setTimeout(()=>{throw P},0)}})};return v(h,El.EventType.OPEN,()=>{m||(G(Mt,`RPC '${e}' stream ${i} transport opened.`),g.yo())}),v(h,El.EventType.CLOSE,()=>{m||(m=!0,G(Mt,`RPC '${e}' stream ${i} transport closed`),g.So())}),v(h,El.EventType.ERROR,x=>{m||(m=!0,xa(Mt,`RPC '${e}' stream ${i} transport errored:`,x),g.So(new $(V.UNAVAILABLE,"The operation could not be completed")))}),v(h,El.EventType.MESSAGE,x=>{var w;if(!m){const _=x.data[0];Ie(!!_);const T=_,P=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(P){G(Mt,`RPC '${e}' stream ${i} received error:`,P);const A=P.status;let O=function(k){const C=nt[k];if(C!==void 0)return JC(C)}(A),E=P.message;O===void 0&&(O=V.INTERNAL,E="Unknown error status: "+A+" with message "+P.message),m=!0,g.So(new $(O,E)),h.close()}else G(Mt,`RPC '${e}' stream ${i} received:`,_),g.bo(_)}}),v(a,kC.STAT_EVENT,x=>{x.stat===Oy.PROXY?G(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Oy.NOPROXY&&G(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function Um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){return new NU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new uA(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(ri(n.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new $(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class S6 extends dA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=jU(this.serializer,e),r=function(s){if(!("targetChange"in s))return oe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?yr(o.readTime):oe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Hy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Fy(l)?{documents:FU(s,l)}:{query:UU(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=tA(s,o.resumeToken);const c=zy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=Kh(s,o.snapshotVersion.toTimestamp());const c=zy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=zU(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Hy(this.serializer),n.removeTarget=e,this.a_(n)}}class k6 extends dA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=VU(e.writeResults,e.commitTime),r=yr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Hy(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>LU(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,$y(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(V.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,$y(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class P6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ri(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{yo(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ae(l);c.L_.add(4),await pu(c),c.q_.set("Unknown"),c.L_.delete(4),await sp(c)}(this))})}),this.q_=new P6(r,i)}}async function sp(t){if(yo(t))for(const e of t.B_)await e(!0)}async function pu(t){for(const e of t.B_)await e(!1)}function hA(t,e){const n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),s_(n)?i_(n):za(n).r_()&&r_(n,e))}function n_(t,e){const n=ae(t),r=za(n);n.N_.delete(e),r.r_()&&fA(n,e),n.N_.size===0&&(r.r_()?r.o_():yo(n)&&n.q_.set("Unknown"))}function r_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}za(t).A_(e)}function fA(t,e){t.Q_.xe(e),za(t).R_(e)}function i_(t){t.Q_=new CU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),za(t).start(),t.q_.v_()}function s_(t){return yo(t)&&!za(t).n_()&&t.N_.size>0}function yo(t){return ae(t).L_.size===0}function pA(t){t.Q_=void 0}async function C6(t){t.q_.set("Online")}async function A6(t){t.N_.forEach((e,n)=>{r_(t,e)})}async function R6(t,e){pA(t),s_(t)?(t.q_.M_(e),i_(t)):t.q_.set("Unknown")}async function D6(t,e,n){if(t.q_.set("Online"),e instanceof eA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qh(t,r)}else if(e instanceof Zd?t.Q_.Ke(e):e instanceof ZC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const r=await cA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(It.EMPTY_BYTE_STRING,u.snapshotVersion)),fA(s,l);const h=new Mi(u.target,l,c,u.sequenceNumber);r_(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await Qh(t,r)}}async function Qh(t,e,n){if(!du(e))throw e;t.L_.add(1),await pu(t),t.q_.set("Offline"),n||(n=()=>cA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await sp(t)})}function mA(t,e){return e().catch(n=>Qh(t,n,e))}async function op(t){const e=ae(t),n=is(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;N6(e);)try{const i=await g6(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,M6(e,i)}catch(i){await Qh(e,i)}gA(e)&&yA(e)}function N6(t){return yo(t)&&t.O_.length<10}function M6(t,e){t.O_.push(e);const n=is(t);n.r_()&&n.V_&&n.m_(e.mutations)}function gA(t){return yo(t)&&!is(t).n_()&&t.O_.length>0}function yA(t){is(t).start()}async function O6(t){is(t).p_()}async function j6(t){const e=is(t);for(const n of t.O_)e.m_(n.mutations)}async function L6(t,e,n){const r=t.O_.shift(),i=Yv.from(r,e,n);await mA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await op(t)}async function V6(t,e){e&&is(t).V_&&await async function(r,i){if(function(o){return EU(o)&&o!==V.ABORTED}(i.code)){const s=r.O_.shift();is(r).s_(),await mA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await op(r)}}(t,e),gA(t)&&yA(t)}async function z1(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=yo(n);n.L_.add(3),await pu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await sp(n)}async function F6(t,e){const n=ae(t);e?(n.L_.delete(2),await sp(n)):e||(n.L_.add(2),await pu(n),n.q_.set("Unknown"))}function za(t){return t.K_||(t.K_=function(n,r,i){const s=ae(n);return s.w_(),new S6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:C6.bind(null,t),Ro:A6.bind(null,t),mo:R6.bind(null,t),d_:D6.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),s_(t)?i_(t):t.q_.set("Unknown")):(await t.K_.stop(),pA(t))})),t.K_}function is(t){return t.U_||(t.U_=function(n,r,i){const s=ae(n);return s.w_(),new k6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:O6.bind(null,t),mo:V6.bind(null,t),f_:j6.bind(null,t),g_:L6.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await op(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new o_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function a_(t,e){if(ri("AsyncQueue",`${e}: ${t}`),du(t))return new $(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Pl(),this.sortedSet=new qe(this.comparator)}static emptySet(e){return new aa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof aa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new aa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.W_=new qe(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ea{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ea(e,n,aa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class B6{constructor(){this.queries=W1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ae(n),s=i.queries;i.queries=W1(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new $(V.ABORTED,"Firestore shutting down"))}}function W1(){return new Ba(t=>UC(t),Jf)}async function vA(t,e){const n=ae(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new U6,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=a_(o,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&l_(n)}async function _A(t,e){const n=ae(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function z6(t,e){const n=ae(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&l_(n)}function $6(t,e,n){const r=ae(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function l_(t){t.Y_.forEach(e=>{e.next()})}var Gy,H1;(H1=Gy||(Gy={})).ea="default",H1.Cache="cache";class wA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ea(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Gy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.key=e}}class bA{constructor(e){this.key=e}}class W6{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=BC(e),this.Ra=new aa(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new $1,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const f=i.get(u),m=Zf(this.query,h)?h:null,g=!!f&&this.mutatedKeys.has(f.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;f&&m?f.data.isEqual(m.data)?g!==v&&(r.track({type:3,doc:m}),x=!0):this.ga(f,m)||(r.track({type:2,doc:m}),x=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),x=!0):f&&!m&&(r.track({type:1,doc:f}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,h)=>function(m,g){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return v(m)-v(g)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Ea(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=he(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new bA(r))}),this.da.forEach(r=>{e.has(r)||n.push(new xA(r))}),n}ba(e){this.Ta=e.Ts,this.da=he();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ea.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class H6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class q6{constructor(e){this.key=e,this.va=!1}}class G6{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ba(a=>UC(a),Jf),this.Ma=new Map,this.xa=new Set,this.Oa=new qe(Y.comparator),this.Na=new Map,this.La=new Zv,this.Ba={},this.ka=new Map,this.qa=ka.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function K6(t,e,n=!0){const r=IA(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await TA(r,e,n,!0),i}async function Q6(t,e){const n=IA(t);await TA(n,e,!0,!1)}async function TA(t,e,n,r){const i=await y6(t.localStore,gr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Y6(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&hA(t.remoteStore,i),a}async function Y6(t,e,n,r,i){t.Ka=(h,f,m)=>async function(v,x,w,_){let T=x.view.ma(w);T.ns&&(T=await F1(v.localStore,x.query,!1).then(({documents:E})=>x.view.ma(E,T)));const P=_&&_.targetChanges.get(x.targetId),A=_&&_.targetMismatches.get(x.targetId)!=null,O=x.view.applyChanges(T,v.isPrimaryClient,P,A);return G1(v,x.targetId,O.wa),O.snapshot}(t,h,f,m);const s=await F1(t.localStore,e,!0),o=new W6(e,s.Ts),a=o.ma(s.documents),l=fu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);G1(t,n,c.wa);const u=new H6(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function X6(t,e,n){const r=ae(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Jf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&n_(r.remoteStore,i.targetId),Ky(r,i.targetId)}).catch(uu)):(Ky(r,i.targetId),await qy(r.localStore,i.targetId,!0))}async function J6(t,e){const n=ae(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),n_(n.remoteStore,r.targetId))}async function Z6(t,e,n){const r=oB(t);try{const i=await function(o,a){const l=ae(o),c=ft.now(),u=a.reduce((m,g)=>m.add(g.key),he());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=ii(),v=he();return l.cs.getEntries(m,u).next(x=>{g=x,g.forEach((w,_)=>{_.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,g)).next(x=>{h=x;const w=[];for(const _ of a){const T=xU(_,h.get(_.key).overlayedDocument);T!=null&&w.push(new ms(_.key,T,DC(T.value.mapValue),Xt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(x=>{f=x;const w=x.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,x.batchId,w)})}).then(()=>({batchId:f.batchId,changes:$C(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new qe(xe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await mu(r,i.changes),await op(r.remoteStore)}catch(i){const s=a_(i,"Failed to persist write");n.reject(s)}}async function SA(t,e){const n=ae(t);try{const r=await p6(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ie(o.va):i.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),await mu(n,r,e)}catch(r){await uu(r)}}function q1(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ae(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&l_(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eB(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new qe(Y.comparator);o=o.insert(s,Ut.newNoDocument(s,oe.min()));const a=he().add(s),l=new rp(oe.min(),new Map,new qe(xe),o,a);await SA(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),c_(r)}else await qy(r.localStore,e,!1).then(()=>Ky(r,e,n)).catch(uu)}async function tB(t,e){const n=ae(t),r=e.batch.batchId;try{const i=await f6(n.localStore,e);EA(n,r,null),kA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mu(n,i)}catch(i){await uu(i)}}async function nB(t,e,n){const r=ae(t);try{const i=await function(o,a){const l=ae(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ie(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);EA(r,e,n),kA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mu(r,i)}catch(i){await uu(i)}}function kA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function EA(t,e,n){const r=ae(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ky(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||PA(t,r)})}function PA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(n_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),c_(t))}function G1(t,e,n){for(const r of n)r instanceof xA?(t.La.addReference(r.key,e),rB(t,r)):r instanceof bA?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||PA(t,r.key)):ie()}function rB(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),c_(t))}function c_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(Oe.fromString(e)),r=t.qa.next();t.Na.set(r,new q6(n)),t.Oa=t.Oa.insert(n,r),hA(t.remoteStore,new Mi(gr(Kv(n.path)),r,"TargetPurposeLimboResolution",zv.oe))}}async function mu(t,e,n){const r=ae(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=t_.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=ae(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>F.forEach(c,f=>F.forEach(f.$i,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>F.forEach(f.Ui,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!du(h))throw h;G("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=u.os.get(f),g=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(g);u.os=u.os.insert(f,v)}}}(r.localStore,s))}async function iB(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await lA(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new $(V.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mu(n,r.hs)}}function sB(t,e){const n=ae(t),r=n.Na.get(e);if(r&&r.va)return he().add(r.key);{let i=he();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function IA(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=SA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eB.bind(null,e),e.Ca.d_=z6.bind(null,e.eventManager),e.Ca.$a=$6.bind(null,e.eventManager),e}function oB(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nB.bind(null,e),e}class Yh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ip(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return h6(this.persistence,new u6,e.initialUser,this.serializer)}Ga(e){return new a6(e_.Zr,this.serializer)}Wa(e){return new _6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yh.provider={build:()=>new Yh};class Qy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>q1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iB.bind(null,this.syncEngine),await F6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new B6}()}createDatastore(e){const n=ip(e.databaseInfo.databaseId),r=function(s){return new T6(s)}(e.databaseInfo);return function(s,o,a,l){return new E6(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new I6(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>q1(this.syncEngine,n,0),function(){return B1.D()?new B1:new w6}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const h=new G6(i,s,o,a,l,c);return u&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ae(i);G("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await pu(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Qy.provider={build:()=>new Qy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Vt.UNAUTHENTICATED,this.clientId=CC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=a_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bm(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await lA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function K1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lB(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>z1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>z1(e.remoteStore,i)),t._onlineComponents=e}async function lB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;xa("Error using user provided cache. Falling back to memory cache: "+n),await Bm(t,new Yh)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Bm(t,new Yh);return t._offlineComponents}async function AA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await K1(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await K1(t,new Qy))),t._onlineComponents}function cB(t){return AA(t).then(e=>e.syncEngine)}async function RA(t){const e=await AA(t),n=e.eventManager;return n.onListen=K6.bind(null,e.syncEngine),n.onUnlisten=X6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Q6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=J6.bind(null,e.syncEngine),n}function uB(t,e,n={}){const r=new Gr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new CA({next:f=>{u.Za(),o.enqueueAndForget(()=>_A(s,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new $(V.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new $(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new wA(Kv(a.path),u,{includeMetadataChanges:!0,_a:!0});return vA(s,h)}(await RA(t),t.asyncQueue,e,n,r)),r.promise}function dB(t,e,n={}){const r=new Gr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new CA({next:f=>{u.Za(),o.enqueueAndForget(()=>_A(s,h)),f.fromCache&&l.source==="server"?c.reject(new $(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new wA(a,u,{includeMetadataChanges:!0,_a:!0});return vA(s,h)}(await RA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t,e,n){if(!n)throw new $(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hB(t,e,n,r){if(e===!0&&r===!0)throw new $(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Y1(t){if(!Y.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function X1(t){if(Y.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ap(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ap(t);throw new $(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new A3;switch(r.type){case"firstParty":return new M3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Q1.get(n);r&&(G("ComponentProvider","Removing Datastore"),Q1.delete(n),r.terminate())}(this),Promise.resolve()}}function fB(t,e,n,r={}){var i;const s=(t=Un(t,lp))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Vt.MOCK_USER;else{a=qV(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new $(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Vt(c)}t._authCredentials=new R3(new IC(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vo(this.firestore,e,this._query)}}class Jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class Yi extends vo{constructor(e,n,r){super(e,n,Kv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new Y(e))}withConverter(e){return new Yi(this.firestore,e,this._path)}}function Mo(t,e,...n){if(t=et(t),NA("collection","path",e),t instanceof lp){const r=Oe.fromString(e,...n);return X1(r),new Yi(t,null,r)}{if(!(t instanceof Jt||t instanceof Yi))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return X1(r),new Yi(t.firestore,null,r)}}function ye(t,e,...n){if(t=et(t),arguments.length===1&&(e=CC.newId()),NA("doc","path",e),t instanceof lp){const r=Oe.fromString(e,...n);return Y1(r),new Jt(t,null,new Y(r))}{if(!(t instanceof Jt||t instanceof Yi))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return Y1(r),new Jt(t.firestore,t instanceof Yi?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new uA(this,"async_queue_retry"),this.Vu=()=>{const r=Um();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Gr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!du(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ri("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=o_.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class gs extends lp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Z1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Z1(e),this._firestoreClient=void 0,await e}}}function pB(t,e){const n=typeof t=="object"?t:UI(),r=typeof t=="string"?t:"(default)",i=su(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=WV("firestore");s&&fB(i,...s)}return i}function cp(t){if(t._terminated)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mB(t),t._firestoreClient}function mB(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new G3(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,DA(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new aB(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pa(It.fromBase64String(e))}catch(n){throw new $(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pa(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB=/^__.*__$/;class yB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new hu(e,this.data,n,this.fieldTransforms)}}class MA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ms(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function OA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class f_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new f_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(OA(this.Cu)&&gB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class vB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ip(e)}Qu(e,n,r,i=!1){return new f_({Cu:e,methodName:n,qu:r,path:Tt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yu(t){const e=t._freezeSettings(),n=ip(t._databaseId);return new vB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function p_(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);m_("Data must be an object, but it was:",o,r);const a=VA(r,o);let l,c;if(s.merge)l=new vn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const f=Yy(e,h,n);if(!o.contains(f))throw new $(V.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);UA(u,f)||u.push(f)}l=new vn(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new yB(new rn(a),l,c)}class up extends u_{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof up}}function jA(t,e,n,r){const i=t.Qu(1,e,n);m_("Data must be an object, but it was:",i,r);const s=[],o=rn.empty();go(r,(l,c)=>{const u=g_(e,l,n);c=et(c);const h=i.Nu(u);if(c instanceof up)s.push(u);else{const f=vu(c,h);f!=null&&(s.push(u),o.set(u,f))}});const a=new vn(s);return new MA(o,a,i.fieldTransforms)}function LA(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Yy(e,r,n)],l=[i];if(s.length%2!=0)throw new $(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Yy(e,s[f])),l.push(s[f+1]);const c=[],u=rn.empty();for(let f=a.length-1;f>=0;--f)if(!UA(c,a[f])){const m=a[f];let g=l[f];g=et(g);const v=o.Nu(m);if(g instanceof up)c.push(m);else{const x=vu(g,v);x!=null&&(c.push(m),u.set(m,x))}}const h=new vn(c);return new MA(u,h,o.fieldTransforms)}function _B(t,e,n,r=!1){return vu(n,t.Qu(r?4:3,e))}function vu(t,e){if(FA(t=et(t)))return m_("Unsupported field value:",e,t),VA(t,e);if(t instanceof u_)return function(r,i){if(!OA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=vu(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ft.fromDate(r);return{timestampValue:Kh(i.serializer,s)}}if(r instanceof ft){const s=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kh(i.serializer,s)}}if(r instanceof d_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pa)return{bytesValue:tA(i.serializer,r._byteString)};if(r instanceof Jt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Jv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof h_)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Qv(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ap(r)}`)}(t,e)}function VA(t,e){const n={};return AC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(t,(r,i)=>{const s=vu(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function FA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof d_||t instanceof Pa||t instanceof Jt||t instanceof u_||t instanceof h_)}function m_(t,e,n){if(!FA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ap(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Yy(t,e,n){if((e=et(e))instanceof gu)return e._internalPath;if(typeof e=="string")return g_(t,e);throw Xh("Field path arguments must be of type string or ",t,!1,void 0,n)}const wB=new RegExp("[~\\*/\\[\\]]");function g_(t,e,n){if(e.search(wB)>=0)throw Xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gu(...e.split("."))._internalPath}catch{throw Xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new $(V.INVALID_ARGUMENT,a+t+l)}function UA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xB extends BA{data(){return super.data()}}function dp(t,e){return typeof e=="string"?g_(t,e):e instanceof gu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class y_{}class zA extends y_{}function Xy(t,e,...n){let r=[];e instanceof y_&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof v_).length,a=s.filter(l=>l instanceof hp).length;if(o>1||o>0&&a>0)throw new $(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class hp extends zA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new hp(e,n,r)}_apply(e){const n=this._parse(e);return $A(e._query,n),new vo(e.firestore,e.converter,Uy(e._query,n))}_parse(e){const n=yu(e.firestore);return function(s,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new $(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){tT(h,u);const m=[];for(const g of h)m.push(eT(l,s,g));f={arrayValue:{values:m}}}else f=eT(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||tT(h,u),f=_B(a,o,h,u==="in"||u==="not-in");return st.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Jy(t,e,n){const r=e,i=dp("where",t);return hp._create(i,r,n)}class v_ extends y_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new v_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:tr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)$A(o,l),o=Uy(o,l)}(e._query,n),new vo(e.firestore,e.converter,Uy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class __ extends zA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new __(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oc(s,o)}(e._query,this._field,this._direction);return new vo(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ua(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function TB(t,e="asc"){const n=e,r=dp("orderBy",t);return __._create(r,n)}function eT(t,e,n){if(typeof(n=et(n))=="string"){if(n==="")throw new $(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FC(e)&&n.indexOf("/")!==-1)throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!Y.isDocumentKey(r))throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return b1(t,new Y(r))}if(n instanceof Jt)return b1(t,n._key);throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ap(n)}.`)}function tT(t,e){if(!Array.isArray(t)||t.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $A(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SB{convertValue(e,n="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return go(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ye(o.doubleValue));return new h_(s)}convertGeoPoint(e){return new d_(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Dc(e));default:return null}}convertTimestamp(e){const n=rs(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);Ie(aA(r));const i=new Nc(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||ri(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class WA extends BA{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class eh extends WA{data(e={}){return super.data(e)}}class kB{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Cl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new eh(this._firestore,this._userDataWriter,r.key,r,new Cl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new eh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new eh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:EB(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function EB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t){t=Un(t,Jt);const e=Un(t.firestore,gs);return uB(cp(e),t._key).then(n=>PB(e,t,n))}class HA extends SB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function Zy(t){t=Un(t,vo);const e=Un(t.firestore,gs),n=cp(e),r=new HA(e);return bB(t._query),dB(n,t._query).then(i=>new kB(e,r,t,i))}function Go(t,e,n){t=Un(t,Jt);const r=Un(t.firestore,gs),i=w_(t.converter,e,n);return _u(r,[p_(yu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Xt.none())])}function Qe(t,e,n,...r){t=Un(t,Jt);const i=Un(t.firestore,gs),s=yu(i);let o;return o=typeof(e=et(e))=="string"||e instanceof gu?LA(s,"updateDoc",t._key,e,n,r):jA(s,"updateDoc",t._key,e),_u(i,[o.toMutation(t._key,Xt.exists(!0))])}function e0(t){return _u(Un(t.firestore,gs),[new np(t._key,Xt.none())])}function rT(t,e){const n=Un(t.firestore,gs),r=ye(t),i=w_(t.converter,e);return _u(n,[p_(yu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Xt.exists(!1))]).then(()=>r)}function _u(t,e){return function(r,i){const s=new Gr;return r.asyncQueue.enqueueAndForget(async()=>Z6(await cB(r),i,s)),s.promise}(cp(t),e)}function PB(t,e,n){const r=n.docs.get(e._key),i=new HA(t);return new WA(t,i,e._key,r,new Cl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yu(e)}set(e,n,r){this._verifyNotCommitted();const i=zm(e,this._firestore),s=w_(i.converter,n,r),o=p_(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Xt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=zm(e,this._firestore);let o;return o=typeof(n=et(n))=="string"||n instanceof gu?LA(this._dataReader,"WriteBatch.update",s._key,n,r,i):jA(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Xt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=zm(e,this._firestore);return this._mutations=this._mutations.concat(new np(n._key,Xt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zm(t,e){if((t=et(t)).firestore!==e)throw new $(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(t){return cp(t=Un(t,gs)),new IB(t,e=>_u(t,e))}(function(e,n=!0){(function(i){Fa=i})(La),xr(new er("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new gs(new D3(r.getProvider("auth-internal")),new j3(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nc(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),On(y1,"4.7.3",e),On(y1,"4.7.3","esm2017")})();var AB="firebase",RB="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(AB,RB,"app");const qA="@firebase/installations",x_="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=1e4,KA=`w:${x_}`,QA="FIS_v2",DB="https://firebaseinstallations.googleapis.com/v1",NB=60*60*1e3,MB="installations",OB="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},oo=new mo(MB,OB,jB);function YA(t){return t instanceof nr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA({projectId:t}){return`${DB}/projects/${t}/installations`}function JA(t){return{token:t.token,requestStatus:2,expiresIn:VB(t.expiresIn),creationTime:Date.now()}}async function ZA(t,e){const r=(await e.json()).error;return oo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function e2({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function LB(t,{refreshToken:e}){const n=e2(t);return n.append("Authorization",FB(e)),n}async function t2(t){const e=await t();return e.status>=500&&e.status<600?t():e}function VB(t){return Number(t.replace("s","000"))}function FB(t){return`${QA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UB({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=XA(t),i=e2(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:QA,appId:t.appId,sdkVersion:KA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await t2(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:JA(c.authToken)}}else throw await ZA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BB(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB=/^[cdef][\w-]{21}$/,t0="";function $B(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=WB(t);return zB.test(n)?n:t0}catch{return t0}}function WB(t){return BB(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new Map;function i2(t,e){const n=fp(t);s2(n,e),HB(n,e)}function s2(t,e){const n=r2.get(t);if(n)for(const r of n)r(e)}function HB(t,e){const n=qB();n&&n.postMessage({key:t,fid:e}),GB()}let Bs=null;function qB(){return!Bs&&"BroadcastChannel"in self&&(Bs=new BroadcastChannel("[Firebase] FID Change"),Bs.onmessage=t=>{s2(t.data.key,t.data.fid)}),Bs}function GB(){r2.size===0&&Bs&&(Bs.close(),Bs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="firebase-installations-database",QB=1,ao="firebase-installations-store";let $m=null;function b_(){return $m||($m=VI(KB,QB,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ao)}}})),$m}async function Jh(t,e){const n=fp(t),i=(await b_()).transaction(ao,"readwrite"),s=i.objectStore(ao),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&i2(t,e.fid),e}async function o2(t){const e=fp(t),r=(await b_()).transaction(ao,"readwrite");await r.objectStore(ao).delete(e),await r.done}async function pp(t,e){const n=fp(t),i=(await b_()).transaction(ao,"readwrite"),s=i.objectStore(ao),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&i2(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T_(t){let e;const n=await pp(t.appConfig,r=>{const i=YB(r),s=XB(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===t0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function YB(t){const e=t||{fid:$B(),registrationStatus:0};return a2(e)}function XB(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(oo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=JB(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ZB(t)}:{installationEntry:e}}async function JB(t,e){try{const n=await UB(t,e);return Jh(t.appConfig,n)}catch(n){throw YA(n)&&n.customData.serverCode===409?await o2(t.appConfig):await Jh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ZB(t){let e=await iT(t.appConfig);for(;e.registrationStatus===1;)await n2(100),e=await iT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await T_(t);return r||n}return e}function iT(t){return pp(t,e=>{if(!e)throw oo.create("installation-not-found");return a2(e)})}function a2(t){return ez(t)?{fid:t.fid,registrationStatus:0}:t}function ez(t){return t.registrationStatus===1&&t.registrationTime+GA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tz({appConfig:t,heartbeatServiceProvider:e},n){const r=nz(t,n),i=LB(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:KA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await t2(()=>fetch(r,a));if(l.ok){const c=await l.json();return JA(c)}else throw await ZA("Generate Auth Token",l)}function nz(t,{fid:e}){return`${XA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S_(t,e=!1){let n;const r=await pp(t.appConfig,s=>{if(!l2(s))throw oo.create("not-registered");const o=s.authToken;if(!e&&sz(o))return s;if(o.requestStatus===1)return n=rz(t,e),s;{if(!navigator.onLine)throw oo.create("app-offline");const a=az(s);return n=iz(t,a),a}});return n?await n:r.authToken}async function rz(t,e){let n=await sT(t.appConfig);for(;n.authToken.requestStatus===1;)await n2(100),n=await sT(t.appConfig);const r=n.authToken;return r.requestStatus===0?S_(t,e):r}function sT(t){return pp(t,e=>{if(!l2(e))throw oo.create("not-registered");const n=e.authToken;return lz(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function iz(t,e){try{const n=await tz(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Jh(t.appConfig,r),n}catch(n){if(YA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await o2(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Jh(t.appConfig,r)}throw n}}function l2(t){return t!==void 0&&t.registrationStatus===2}function sz(t){return t.requestStatus===2&&!oz(t)}function oz(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+NB}function az(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function lz(t){return t.requestStatus===1&&t.requestTime+GA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cz(t){const e=t,{installationEntry:n,registrationPromise:r}=await T_(e);return r?r.catch(console.error):S_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uz(t,e=!1){const n=t;return await dz(n),(await S_(n,e)).token}async function dz(t){const{registrationPromise:e}=await T_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(t){if(!t||!t.options)throw Wm("App Configuration");if(!t.name)throw Wm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Wm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Wm(t){return oo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="installations",fz="installations-internal",pz=t=>{const e=t.getProvider("app").getImmediate(),n=hz(e),r=su(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},mz=t=>{const e=t.getProvider("app").getImmediate(),n=su(e,c2).getImmediate();return{getId:()=>cz(n),getToken:i=>uz(n,i)}};function gz(){xr(new er(c2,pz,"PUBLIC")),xr(new er(fz,mz,"PRIVATE"))}gz();On(qA,x_);On(qA,x_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="analytics",yz="firebase_id",vz="origin",_z=60*1e3,wz="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",k_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un=new Gf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},jn=new mo("analytics","Analytics",xz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(t){if(!t.startsWith(k_)){const e=jn.create("invalid-gtag-resource",{gtagURL:t});return un.warn(e.message),""}return t}function u2(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Tz(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Sz(t,e){const n=Tz("firebase-js-sdk-policy",{createScriptURL:bz}),r=document.createElement("script"),i=`${k_}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function kz(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Ez(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await u2(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){un.error(a)}t("config",i,s)}async function Pz(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await u2(n);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){un.error(s)}}function Iz(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await Pz(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await Ez(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){un.error(a)}}return i}function Cz(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Iz(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function Az(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(k_)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=30,Dz=1e3;class Nz{constructor(e={},n=Dz){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const d2=new Nz;function Mz(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Oz(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:Mz(r)},s=wz.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw jn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function jz(t,e=d2,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw jn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw jn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Fz;return setTimeout(async()=>{a.abort()},_z),h2({appId:r,apiKey:i,measurementId:s},o,a,e)}async function h2(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=d2){var s;const{appId:o,measurementId:a}=t;try{await Lz(r,e)}catch(l){if(a)return un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await Oz(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!Vz(c)){if(i.deleteThrottleMetadata(o),a)return un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?Bb(n,i.intervalMillis,Rz):Bb(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(o,h),un.debug(`Calling attemptFetch again in ${u} millis`),h2(t,h,r,i)}}function Lz(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(jn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Vz(t){if(!(t instanceof nr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Fz{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Uz(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bz(){if(MI())try{await OI()}catch(t){return un.warn(jn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return un.warn(jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function zz(t,e,n,r,i,s,o){var a;const l=jz(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&un.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>un.error(m)),e.push(l);const c=Bz().then(m=>{if(m)return r.getId()}),[u,h]=await Promise.all([l,c]);Az(s)||Sz(s,u.measurementId),i("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[vz]="firebase",f.update=!0,h!=null&&(f[yz]=h),i("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e){this.app=e}_delete(){return delete Yl[this.app.options.appId],Promise.resolve()}}let Yl={},aT=[];const lT={};let Hm="dataLayer",Wz="gtag",cT,f2,uT=!1;function Hz(){const t=[];if(NI()&&t.push("This is a browser extension environment."),ZV()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=jn.create("invalid-analytics-context",{errorInfo:e});un.warn(n.message)}}function qz(t,e,n){Hz();const r=t.options.appId;if(!r)throw jn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw jn.create("no-api-key");if(Yl[r]!=null)throw jn.create("already-exists",{id:r});if(!uT){kz(Hm);const{wrappedGtag:s,gtagCore:o}=Cz(Yl,aT,lT,Hm,Wz);f2=s,cT=o,uT=!0}return Yl[r]=zz(t,aT,lT,e,cT,Hm,n),new $z(t)}function Gz(t,e,n,r){t=et(t),Uz(f2,Yl[t.app.options.appId],e,n,r).catch(i=>un.error(i))}const dT="@firebase/analytics",hT="0.10.8";function Kz(){xr(new er(oT,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return qz(r,i,n)},"PUBLIC")),xr(new er("analytics-internal",t,"PRIVATE")),On(dT,hT),On(dT,hT,"esm2017");function t(e){try{const n=e.getProvider(oT).getImmediate();return{logEvent:(r,i,s)=>Gz(n,r,i,s)}}catch(n){throw jn.create("interop-component-reg-failed",{reason:n})}}}Kz();const Qz={apiKey:"YOUR_API_KEY",authDomain:"YOUR_PROJECT.firebaseapp.com",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_PROJECT.appspot.com",messagingSenderId:"YOUR_SENDER_ID",appId:"YOUR_APP_ID",measurementId:"YOUR_MEASUREMENT_ID"},p2=FI(Qz),Po=I3(p2),ue=pB(p2),Yz=new Or,Xz=new jr,qm={theme:"dark",language:"fr",notifications:{enabled:!0,dailyReminder:!0,dailyReminderTime:"09:00",achievementUnlock:!0,streakWarning:!0,weeklyReport:!0},sound:{enabled:!0,volume:.7,taskComplete:!0,levelUp:!0,achievementUnlock:!0},privacy:{publicProfile:!1,showStats:!0,showAchievements:!0}},Gm={type:"default",baseColor:"#6366f1",icon:""},fd=t=>({userId:t,level:1,currentXP:0,totalXP:0,xpToNextLevel:ky,currentStreak:0,longestStreak:0,lastCompletedDate:null,tasksCompleted:0,tasksCreated:0,tasksFailed:0,totalFocusTime:0,averageTaskTime:0,categoryStats:{},achievementPoints:0,achievementsUnlocked:[],coins:100,gems:10,dailyXP:0,weeklyXP:0,dailyTasksCompleted:0,weeklyTasksCompleted:0,lastDailyReset:new Date().toISOString(),lastWeeklyReset:new Date().toISOString()}),pe=Wf()(Hf((t,e)=>({user:null,firebaseUser:null,gameStats:null,isLoading:!0,isInitialized:!1,isDemo:!1,error:null,initializeAuth:async()=>e().initialize(),initialize:async()=>{const n=e();return n.isDemo&&n.user?(t({isLoading:!1,isInitialized:!0}),Promise.resolve()):new Promise(r=>{try{const i=yF(Po,async s=>{if(s)try{const o=await nT(ye(ue,"users",s.uid)),a=await nT(ye(ue,"gameStats",s.uid));if(o.exists())t({user:o.data(),gameStats:a.exists()?a.data():fd(s.uid),firebaseUser:s,isLoading:!1,isInitialized:!0});else{const l={id:s.uid,email:s.email||"",username:s.displayName||`User_${s.uid.slice(0,6)}`,avatar:Gm,createdAt:new Date,lastLoginAt:new Date,settings:qm},c=fd(s.uid);await Go(ye(ue,"users",s.uid),l),await Go(ye(ue,"gameStats",s.uid),c),t({user:l,gameStats:c,firebaseUser:s,isLoading:!1,isInitialized:!0})}}catch(o){console.error("Error loading user data:",o),t({isLoading:!1,isInitialized:!0,error:"Failed to load user data"})}else t({user:null,gameStats:null,firebaseUser:null,isLoading:!1,isInitialized:!0});r()})}catch{console.warn("Firebase auth not configured, demo mode available"),t({isLoading:!1,isInitialized:!0}),r()}})},signInWithEmail:async(n,r)=>{t({isLoading:!0,error:null});try{await pF(Po,n,r)}catch(i){const s=i instanceof Error?i.message:"Sign in failed";throw t({error:s,isLoading:!1}),i}},signUpWithEmail:async(n,r,i)=>{t({isLoading:!0,error:null});try{const s=await fF(Po,n,r),o={id:s.user.uid,email:n,username:i,avatar:Gm,createdAt:new Date,lastLoginAt:new Date,settings:qm},a=fd(s.user.uid);await Go(ye(ue,"users",s.user.uid),o),await Go(ye(ue,"gameStats",s.user.uid),a),t({user:o,gameStats:a,firebaseUser:s.user})}catch(s){const o=s instanceof Error?s.message:"Sign up failed";throw t({error:o,isLoading:!1}),s}},signInWithGoogle:async()=>{t({isLoading:!0,error:null});try{await l1(Po,Yz)}catch(n){const r=n instanceof Error?n.message:"Google sign in failed";throw t({error:r,isLoading:!1}),n}},signInWithGithub:async()=>{t({isLoading:!0,error:null});try{await l1(Po,Xz)}catch(n){const r=n instanceof Error?n.message:"GitHub sign in failed";throw t({error:r,isLoading:!1}),n}},signInDemo:async()=>{t({isLoading:!0,error:null});const n=`demo_${Pi()}`,r={id:n,email:"demo@questify.app",username:"DemoHero",avatar:Gm,createdAt:new Date,lastLoginAt:new Date,settings:qm},i=fd(n);i.coins=500,i.gems=50,t({user:r,gameStats:i,firebaseUser:null,isLoading:!1,isInitialized:!0,isDemo:!0})},signOut:async()=>{const{isDemo:n}=e();try{n||await vF(Po),t({user:null,gameStats:null,firebaseUser:null,isDemo:!1})}catch(r){const i=r instanceof Error?r.message:"Sign out failed";throw t({error:i}),r}},deleteAccount:async()=>{const{firebaseUser:n,user:r,isDemo:i}=e();if(r){if(i){t({user:null,gameStats:null,firebaseUser:null,isDemo:!1});return}if(n)try{await Promise.all([Qe(ye(ue,"users",r.id),{deleted:!0}),Qe(ye(ue,"gameStats",r.id),{deleted:!0})]),await n.delete(),t({user:null,gameStats:null,firebaseUser:null})}catch(s){const o=s instanceof Error?s.message:"Delete account failed";throw t({error:o}),s}}},updateProfile:async n=>{const{user:r,isDemo:i}=e();if(!r)return;const s={...r,...n};i||await Qe(ye(ue,"users",r.id),n),t({user:s})},updateSettings:async n=>{const{user:r,isDemo:i}=e();if(!r)return;const s={...r.settings,...n};i||await Qe(ye(ue,"users",r.id),{settings:s}),t({user:{...r,settings:s}})},updateAvatar:async n=>{const{user:r,isDemo:i}=e();r&&(i||await Qe(ye(ue,"users",r.id),{avatar:n}),t({user:{...r,avatar:n}}))},calculateXPForLevel:n=>Math.floor(ky*Math.pow(MV,n-1)),calculateLevel:n=>{let r=1,i=ky,s=0;for(;s+i<=n;)s+=i,r++,i=e().calculateXPForLevel(r);return{level:r,currentXP:n-s,xpToNextLevel:i}},getStreakBonus:()=>{const{gameStats:n}=e();if(!n)return 0;const r=n.currentStreak;let i=0;for(const{days:s,bonus:o}of jV)r>=s&&(i=o);return i},addXP:async n=>{const{gameStats:r,user:i,isDemo:s,getStreakBonus:o,calculateLevel:a}=e();if(!r||!i)return{leveledUp:!1,newLevel:0};const l=o(),c=Math.floor(n*l),u=n+c,h=r.totalXP+u,{level:f,currentXP:m,xpToNextLevel:g}=a(h),v=f>r.level,x={totalXP:h,level:f,currentXP:m,xpToNextLevel:g,dailyXP:r.dailyXP+u,weeklyXP:r.weeklyXP+u};s||await Qe(ye(ue,"gameStats",i.id),x),t({gameStats:{...r,...x}});const{useQuestStore:w}=await Sy(async()=>{const{useQuestStore:_}=await Promise.resolve().then(()=>n0);return{useQuestStore:_}},void 0,import.meta.url);return await w.getState().checkAndUpdateQuests("xp_gained",{amount:u}),{leveledUp:v,newLevel:f}},updateStreak:async()=>{const{gameStats:n,user:r,isDemo:i}=e();if(!n||!r)return;const s=new Date().toISOString().split("T")[0],o=n.lastCompletedDate;let a=n.currentStreak;if(!o)a=1;else{const u=new Date(o),h=new Date(s),f=Math.floor((h.getTime()-u.getTime())/(1e3*60*60*24));f===0||(f===1?a+=1:a=1)}const l={currentStreak:a,longestStreak:Math.max(a,n.longestStreak),lastCompletedDate:s};i||await Qe(ye(ue,"gameStats",r.id),l),t({gameStats:{...n,...l}});const{useQuestStore:c}=await Sy(async()=>{const{useQuestStore:u}=await Promise.resolve().then(()=>n0);return{useQuestStore:u}},void 0,import.meta.url);await c.getState().checkAndUpdateQuests("streak_updated",{streak:a})},incrementStat:async(n,r=1)=>{const{gameStats:i,user:s,isDemo:o}=e();if(!i||!s)return;const a=i[n];if(typeof a!="number")return;const l={[n]:a+r};o||await Qe(ye(ue,"gameStats",s.id),l),t({gameStats:{...i,...l}})},addCoins:async n=>{const{gameStats:r,user:i,isDemo:s}=e();if(!r||!i)return;const o={coins:r.coins+n};s||await Qe(ye(ue,"gameStats",i.id),o),t({gameStats:{...r,...o}})},addGems:async n=>{const{gameStats:r,user:i,isDemo:s}=e();if(!r||!i)return;const o={gems:r.gems+n};s||await Qe(ye(ue,"gameStats",i.id),o),t({gameStats:{...r,...o}})},spendCoins:async n=>{const{gameStats:r,user:i,isDemo:s}=e();if(!r||!i||r.coins<n)return!1;const o={coins:r.coins-n};return s||await Qe(ye(ue,"gameStats",i.id),o),t({gameStats:{...r,...o}}),!0},spendGems:async n=>{const{gameStats:r,user:i,isDemo:s}=e();if(!r||!i||r.gems<n)return!1;const o={gems:r.gems-n};return s||await Qe(ye(ue,"gameStats",i.id),o),t({gameStats:{...r,...o}}),!0},unlockAchievement:async n=>{const{gameStats:r,user:i,isDemo:s}=e();if(!r||!i||r.achievementsUnlocked.includes(n))return;const o={achievementsUnlocked:[...r.achievementsUnlocked,n]};s||await Qe(ye(ue,"gameStats",i.id),o),t({gameStats:{...r,...o}})}}),{name:"questify-auth",partialize:t=>({user:t.user,gameStats:t.gameStats,isDemo:t.isDemo})})),Jz=(t,e)=>EI[t]+OV[e],Zz=t=>Math.floor(EI[t]/2),ys=Wf()(Hf((t,e)=>({tasks:[],categories:[],filters:{},filter:{status:"all",sortBy:"dueDate",sortDirection:"asc"},sort:{by:"dueDate",order:"asc"},isLoading:!1,selectedTask:null,setFilter:n=>{t(r=>({filter:{...r.filter,...n}}))},updateSubTask:(n,r,i)=>{const{tasks:s}=e(),o=s.find(l=>l.id===n);if(!o||!o.subtasks)return;const a=o.subtasks.map(l=>l.id===r?{...l,...i}:l);t({tasks:s.map(l=>l.id===n?{...l,subtasks:a}:l)})},loadTasks:async n=>{if(t({isLoading:!0}),pe.getState().isDemo){t({isLoading:!1});return}try{const i=Mo(ue,"tasks"),s=Xy(i,Jy("userId","==",n)),a=(await Zy(s)).docs.map(l=>{var c,u,h,f,m;return{...l.data(),id:l.id,createdAt:((c=l.data().createdAt)==null?void 0:c.toDate())||new Date,updatedAt:((u=l.data().updatedAt)==null?void 0:u.toDate())||new Date,dueDate:(h=l.data().dueDate)==null?void 0:h.toDate(),completedAt:(f=l.data().completedAt)==null?void 0:f.toDate(),startedAt:(m=l.data().startedAt)==null?void 0:m.toDate()}});t({tasks:a,isLoading:!1})}catch(i){console.error("Error loading tasks:",i),t({isLoading:!1})}},addTask:async n=>{var u;const r=pe.getState(),i=(u=r.user)==null?void 0:u.id,s=r.isDemo;if(!i)throw new Error("User not authenticated");const{xp:o,coins:a}=e().calculateTaskRewards(n.difficulty,n.priority),l={...n,userId:i,createdAt:new Date,updatedAt:new Date,xpReward:o,coinReward:a,subtasks:n.subtasks||[],tags:n.tags||[],progress:0};let c;if(s)c={...l,id:Pi()};else{const h=await rT(Mo(ue,"tasks"),l);c={...l,id:h.id}}return t(h=>({tasks:[...h.tasks,c]})),await pe.getState().incrementStat("tasksCreated"),c},updateTask:async(n,r)=>{const i=pe.getState().isDemo,s={...r,updatedAt:new Date};i||await Qe(ye(ue,"tasks",n),s),t(o=>({tasks:o.tasks.map(a=>a.id===n?{...a,...s}:a)}))},deleteTask:async n=>{pe.getState().isDemo||await e0(ye(ue,"tasks",n)),t(i=>{var s;return{tasks:i.tasks.filter(o=>o.id!==n),selectedTask:((s=i.selectedTask)==null?void 0:s.id)===n?null:i.selectedTask}})},completeTask:async n=>{const r=e().tasks.find(h=>h.id===n);if(!r)return{xpGained:0,coinsGained:0};const i=pe.getState().isDemo,o={status:"completed",completedAt:new Date,progress:100};i||await Qe(ye(ue,"tasks",n),o),t(h=>({tasks:h.tasks.map(f=>f.id===n?{...f,...o}:f)}));const a=pe.getState(),{leveledUp:l,newLevel:c}=await a.addXP(r.xpReward);await a.addCoins(r.coinReward),await a.incrementStat("tasksCompleted"),await a.incrementStat("dailyTasksCompleted"),await a.incrementStat("weeklyTasksCompleted"),await a.updateStreak();const{useQuestStore:u}=await Sy(async()=>{const{useQuestStore:h}=await Promise.resolve().then(()=>n0);return{useQuestStore:h}},void 0,import.meta.url);return await u.getState().checkAndUpdateQuests("task_completed",{category:r.category,priority:r.priority,difficulty:r.difficulty}),{xpGained:r.xpReward,coinsGained:r.coinReward,leveledUp:l,newLevel:c}},failTask:async n=>{const r=pe.getState().isDemo,i={status:"failed",updatedAt:new Date};r||await Qe(ye(ue,"tasks",n),i),t(s=>({tasks:s.tasks.map(o=>o.id===n?{...o,...i}:o)})),await pe.getState().incrementStat("tasksFailed")},archiveTask:async n=>{const r=pe.getState().isDemo,i={status:"archived",updatedAt:new Date};r||await Qe(ye(ue,"tasks",n),i),t(s=>({tasks:s.tasks.map(o=>o.id===n?{...o,...i}:o)}))},addSubtask:async(n,r)=>{const i=e().tasks.find(a=>a.id===n);if(!i)return;const s={id:Pi(),title:r,completed:!1},o=[...i.subtasks,s];await e().updateTask(n,{subtasks:o})},toggleSubtask:async(n,r)=>{const i=e().tasks.find(l=>l.id===n);if(!i)return;const s=i.subtasks.map(l=>l.id===r?{...l,completed:!l.completed,completedAt:l.completed?void 0:new Date}:l),o=s.filter(l=>l.completed).length,a=Math.round(o/s.length*100);await e().updateTask(n,{subtasks:s,progress:a})},removeSubtask:async(n,r)=>{const i=e().tasks.find(l=>l.id===n);if(!i)return;const s=i.subtasks.filter(l=>l.id!==r),o=s.filter(l=>l.completed).length,a=s.length>0?Math.round(o/s.length*100):0;await e().updateTask(n,{subtasks:s,progress:a})},loadCategories:async n=>{const r=pe.getState().isDemo,i=e().categories;if(!(r&&i.length>0)){if(r){const s=Am.map((o,a)=>({...o,id:Pi(),userId:n,order:a}));t({categories:s});return}try{const s=Mo(ue,"categories"),o=Xy(s,Jy("userId","==",n),TB("order")),a=await Zy(o);if(a.empty){const l=CB(ue),c=Am.map((u,h)=>({...u,id:Pi(),userId:n,order:h}));for(const u of c){const h=ye(Mo(ue,"categories"));l.set(h,{...u,id:h.id}),u.id=h.id}await l.commit(),t({categories:c})}else{const l=a.docs.map(c=>({...c.data(),id:c.id}));t({categories:l})}}catch(s){console.error("Error loading categories:",s)}}},addCategory:async n=>{if(pe.getState().isDemo){const o={...n,id:Pi()};t(a=>({categories:[...a.categories,o]}));return}const i=await rT(Mo(ue,"categories"),n),s={...n,id:i.id};t(o=>({categories:[...o.categories,s]}))},updateCategory:async(n,r)=>{pe.getState().isDemo||await Qe(ye(ue,"categories",n),r),t(s=>({categories:s.categories.map(o=>o.id===n?{...o,...r}:o)}))},deleteCategory:async n=>{pe.getState().isDemo||await e0(ye(ue,"categories",n)),t(i=>({categories:i.categories.filter(s=>s.id!==n)}))},setFilters:n=>{t({filters:n})},clearFilters:()=>{t({filters:{}})},setSort:n=>{t({sort:n})},selectTask:n=>{t({selectedTask:n})},getFilteredTasks:()=>{var o,a,l,c;const{tasks:n,filters:r,sort:i}=e();let s=[...n];if((o=r.status)!=null&&o.length&&(s=s.filter(u=>r.status.includes(u.status))),(a=r.priority)!=null&&a.length&&(s=s.filter(u=>r.priority.includes(u.priority))),(l=r.category)!=null&&l.length&&(s=s.filter(u=>u.category&&r.category.includes(u.category))),(c=r.tags)!=null&&c.length&&(s=s.filter(u=>u.tags.some(h=>r.tags.includes(h)))),r.search){const u=r.search.toLowerCase();s=s.filter(h=>{var f;return h.title.toLowerCase().includes(u)||((f=h.description)==null?void 0:f.toLowerCase().includes(u))})}if(r.dueDate){const u=new Date;u.setHours(0,0,0,0);const h=new Date(u);h.setDate(h.getDate()+7);const f=new Date(u);switch(f.setMonth(f.getMonth()+1),r.dueDate){case"today":s=s.filter(m=>m.dueDate&&new Date(m.dueDate).toDateString()===u.toDateString());break;case"week":s=s.filter(m=>m.dueDate&&new Date(m.dueDate)<=h);break;case"month":s=s.filter(m=>m.dueDate&&new Date(m.dueDate)<=f);break;case"overdue":s=s.filter(m=>m.dueDate&&new Date(m.dueDate)<u&&m.status!=="completed");break;case"no_date":s=s.filter(m=>!m.dueDate);break}}return s.sort((u,h)=>{let f=0;switch(i.by){case"dueDate":!u.dueDate&&!h.dueDate?f=0:u.dueDate?h.dueDate?f=new Date(u.dueDate).getTime()-new Date(h.dueDate).getTime():f=-1:f=1;break;case"priority":const m={critical:0,high:1,medium:2,low:3,none:4};f=(m[u.priority]||4)-(m[h.priority]||4);break;case"createdAt":f=new Date(u.createdAt).getTime()-new Date(h.createdAt).getTime();break;case"xpReward":f=u.xpReward-h.xpReward;break;case"title":f=u.title.localeCompare(h.title);break;case"difficulty":const g={trivial:0,easy:1,medium:2,hard:3,epic:4,legendary:5};f=g[u.difficulty]-g[h.difficulty];break}return i.order==="asc"?f:-f}),s},getTasksByStatus:n=>e().tasks.filter(r=>r.status===n),getTasksByCategory:n=>e().tasks.filter(r=>r.category===n),getTodayTasks:()=>{const n=new Date;n.setHours(0,0,0,0);const r=new Date(n);return r.setDate(r.getDate()+1),e().tasks.filter(i=>i.dueDate&&new Date(i.dueDate)>=n&&new Date(i.dueDate)<r&&i.status!=="completed"&&i.status!=="archived")},getOverdueTasks:()=>{const n=new Date;return n.setHours(0,0,0,0),e().tasks.filter(r=>r.dueDate&&new Date(r.dueDate)<n&&r.status!=="completed"&&r.status!=="archived")},calculateTaskRewards:(n,r)=>({xp:Jz(n,r),coins:Zz(n)}),exportData:()=>{const{tasks:n,categories:r}=e();return{tasks:n,categories:r,exportedAt:new Date().toISOString(),version:"1.0.0"}},importData:n=>{n.tasks&&Array.isArray(n.tasks)&&t({tasks:n.tasks}),n.categories&&Array.isArray(n.categories)&&t({categories:n.categories})},clearAllData:()=>{t({tasks:[],categories:Am.map((n,r)=>({...n,id:`default-${r}`,userId:"",createdAt:new Date().toISOString()}))})}}),{name:"questify-tasks",partialize:t=>({filters:t.filters,sort:t.sort,tasks:t.tasks,categories:t.categories})})),rr=Wf()(Hf(t=>({sidebarOpen:!0,toggleSidebar:()=>t(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarOpen:e=>t({sidebarOpen:e}),isTaskModalOpen:!1,isSettingsModalOpen:!1,isProfileModalOpen:!1,isAchievementModalOpen:!1,isLevelUpModalOpen:!1,newLevel:0,openTaskModal:()=>t({isTaskModalOpen:!0}),closeTaskModal:()=>t({isTaskModalOpen:!1,editingTask:null}),openSettingsModal:()=>t({isSettingsModalOpen:!0}),closeSettingsModal:()=>t({isSettingsModalOpen:!1}),openProfileModal:()=>t({isProfileModalOpen:!0}),closeProfileModal:()=>t({isProfileModalOpen:!1}),openAchievementModal:()=>t({isAchievementModalOpen:!0}),closeAchievementModal:()=>t({isAchievementModalOpen:!1}),showLevelUp:e=>t({isLevelUpModalOpen:!0,newLevel:e}),hideLevelUp:()=>t({isLevelUpModalOpen:!1}),editingTask:null,setEditingTask:e=>t({editingTask:e}),xpGained:null,coinsGained:null,showXPGain:e=>t({xpGained:e}),showCoinsGain:e=>t({coinsGained:e}),hideGains:()=>t({xpGained:null,coinsGained:null}),unlockedAchievement:null,showAchievementUnlock:e=>t({unlockedAchievement:e}),hideAchievementUnlock:()=>t({unlockedAchievement:null}),viewMode:"list",setViewMode:e=>t({viewMode:e}),isMobile:!1,setIsMobile:e=>t({isMobile:e}),theme:"dark",setTheme:e=>t({theme:e}),soundEnabled:!0,toggleSound:()=>t(e=>({soundEnabled:!e.soundEnabled})),notificationsEnabled:!0,toggleNotifications:()=>t(e=>({notificationsEnabled:!e.notificationsEnabled}))}),{name:"questify-ui",partialize:t=>({sidebarOpen:t.sidebarOpen,viewMode:t.viewMode,theme:t.theme,soundEnabled:t.soundEnabled,notificationsEnabled:t.notificationsEnabled})})),e9=[{id:"daily_complete_3",type:"daily",title:"Mise en Route",description:"Compltez 3 tches aujourd'hui",icon:"",objectives:[{description:"Complter 3 tches",type:"complete_tasks",target:3}],rewards:{xp:50,coins:20}},{id:"daily_complete_5",type:"daily",title:"Productivit",description:"Compltez 5 tches aujourd'hui",icon:"",objectives:[{description:"Complter 5 tches",type:"complete_tasks",target:5}],rewards:{xp:100,coins:40}},{id:"daily_xp_100",type:"daily",title:"Chasseur d'XP",description:"Gagnez 100 XP aujourd'hui",icon:"",objectives:[{description:"Gagner 100 XP",type:"earn_xp",target:100}],rewards:{xp:25,coins:30}},{id:"daily_high_priority",type:"daily",title:"Priorits",description:"Compltez 2 tches haute priorit",icon:"",objectives:[{description:"Complter 2 tches haute priorit",type:"complete_priority",target:2,priority:"high"}],rewards:{xp:75,coins:35}},{id:"daily_work",type:"daily",title:"Boss du Boulot",description:"Compltez 3 tches de travail",icon:"",objectives:[{description:"Complter 3 tches de travail",type:"complete_category",target:3,category:"Travail"}],rewards:{xp:75,coins:30}},{id:"daily_personal",type:"daily",title:"Temps Personnel",description:"Compltez 2 tches personnelles",icon:"",objectives:[{description:"Complter 2 tches personnelles",type:"complete_category",target:2,category:"Personnel"}],rewards:{xp:50,coins:25}},{id:"daily_health",type:"daily",title:"Vie Saine",description:"Compltez 2 tches sant",icon:"",objectives:[{description:"Complter 2 tches sant",type:"complete_category",target:2,category:"Sant"}],rewards:{xp:50,coins:25}},{id:"daily_variety",type:"daily",title:"Diversit",description:"Compltez des tches dans 3 catgories diffrentes",icon:"",objectives:[{description:"Tche de travail",type:"complete_category",target:1,category:"Travail"},{description:"Tche personnelle",type:"complete_category",target:1,category:"Personnel"},{description:"Tche sant",type:"complete_category",target:1,category:"Sant"}],rewards:{xp:100,coins:50}}],t9=[{id:"weekly_complete_20",type:"weekly",title:"Travailleur Acharn",description:"Compltez 20 tches cette semaine",icon:"",objectives:[{description:"Complter 20 tches",type:"complete_tasks",target:20}],rewards:{xp:300,coins:150,gems:5}},{id:"weekly_complete_35",type:"weekly",title:"Machine de Productivit",description:"Compltez 35 tches cette semaine",icon:"",objectives:[{description:"Complter 35 tches",type:"complete_tasks",target:35}],rewards:{xp:500,coins:250,gems:10}},{id:"weekly_xp_500",type:"weekly",title:"Accumulateur d'XP",description:"Gagnez 500 XP cette semaine",icon:"",objectives:[{description:"Gagner 500 XP",type:"earn_xp",target:500}],rewards:{xp:100,coins:100,gems:3}},{id:"weekly_streak_7",type:"weekly",title:"Constance",description:"Maintenez un streak de 7 jours",icon:"",objectives:[{description:"Streak de 7 jours",type:"maintain_streak",target:7}],rewards:{xp:250,coins:125,gems:5}},{id:"weekly_all_categories",type:"weekly",title:"quilibre de Vie",description:"Compltez des tches dans toutes les catgories",icon:"",objectives:[{description:"Tche de travail",type:"complete_category",target:3,category:"Travail"},{description:"Tche personnelle",type:"complete_category",target:3,category:"Personnel"},{description:"Tche sant",type:"complete_category",target:2,category:"Sant"},{description:"Tche tudes",type:"complete_category",target:2,category:"tudes"},{description:"Tche loisirs",type:"complete_category",target:2,category:"Loisirs"}],rewards:{xp:400,coins:200,gems:8}},{id:"weekly_critical",type:"weekly",title:"Gestion de Crise",description:"Compltez 5 tches critiques",icon:"",objectives:[{description:"Complter 5 tches critiques",type:"complete_priority",target:5,priority:"critical"}],rewards:{xp:350,coins:175,gems:7}}],m2=(t,e)=>[...t].sort(()=>.5-Math.random()).slice(0,e),n9=()=>m2(e9,3),r9=()=>m2(t9,2),fT=(t,e)=>{const n=new Date,r=new Date;return t.type==="daily"?r.setHours(23,59,59,999):t.type==="weekly"?(r.setDate(r.getDate()+(7-r.getDay())),r.setHours(23,59,59,999)):r.setDate(r.getDate()+30),{id:Pi(),userId:e,type:t.type,title:t.title,description:t.description,icon:t.icon,objectives:t.objectives.map(i=>({id:Pi(),description:i.description,type:i.type,target:i.target,current:0,completed:!1,category:i.category,priority:i.priority})),rewards:t.rewards,startDate:n,endDate:r,completed:!1,claimed:!1}},wu=Wf()(Hf((t,e)=>({quests:[],isLoading:!1,get dailyQuests(){return e().getDailyQuests()},get weeklyQuests(){return e().getWeeklyQuests()},loadQuests:async n=>{if(t({isLoading:!0}),pe.getState().isDemo){const i=e().quests,s=new Date;s.setHours(0,0,0,0);const o=i.some(c=>c.type==="daily"&&c.userId===n&&new Date(c.startDate).toDateString()===s.toDateString()),a=new Date(s);a.setDate(a.getDate()-a.getDay());const l=i.some(c=>c.type==="weekly"&&c.userId===n&&new Date(c.startDate)>=a);t({isLoading:!1}),(!o||!l)&&await e().generateNewQuests(n);return}try{const i=Mo(ue,"quests"),s=Xy(i,Jy("userId","==",n)),a=(await Zy(s)).docs.map(f=>{var m,g,v;return{...f.data(),id:f.id,startDate:((m=f.data().startDate)==null?void 0:m.toDate())||new Date,endDate:((g=f.data().endDate)==null?void 0:g.toDate())||new Date,completedAt:(v=f.data().completedAt)==null?void 0:v.toDate()}}),l=new Date;l.setHours(0,0,0,0);const c=a.some(f=>f.type==="daily"&&new Date(f.startDate).toDateString()===l.toDateString()),u=new Date(l);u.setDate(u.getDate()-u.getDay());const h=a.some(f=>f.type==="weekly"&&new Date(f.startDate)>=u);t({quests:a,isLoading:!1}),(!c||!h)&&await e().generateNewQuests(n)}catch(i){console.error("Error loading quests:",i),t({isLoading:!1})}},generateNewQuests:async n=>{const{quests:r}=e(),i=pe.getState().isDemo,s=new Date;s.setHours(0,0,0,0);const o=r.filter(h=>new Date(h.endDate)<s);if(!i)for(const h of o)await e0(ye(ue,"quests",h.id));const a=r.filter(h=>new Date(h.endDate)>=s);if(!a.some(h=>h.type==="daily"&&new Date(h.startDate).toDateString()===s.toDateString())){const h=n9();for(const f of h){const m=fT(f,n);i||await Go(ye(ue,"quests",m.id),m),a.push(m)}}const c=new Date(s);if(c.setDate(c.getDate()-c.getDay()),!a.some(h=>h.type==="weekly"&&new Date(h.startDate)>=c)){const h=r9();for(const f of h){const m=fT(f,n);i||await Go(ye(ue,"quests",m.id),m),a.push(m)}}t({quests:a})},updateQuestProgress:async(n,r,i)=>{const s=e().quests.find(u=>u.id===n);if(!s)return;const o=pe.getState().isDemo,a=s.objectives.map(u=>{if(u.id===r){const h=Math.min(u.current+i,u.target);return{...u,current:h,completed:h>=u.target}}return u}),l=a.every(u=>u.completed),c={objectives:a,completed:l,completedAt:l?new Date:void 0};o||await Qe(ye(ue,"quests",n),c),t(u=>({quests:u.quests.map(h=>h.id===n?{...h,...c}:h)}))},completeQuest:async n=>{const r=pe.getState().isDemo,i={completed:!0,completedAt:new Date};r||await Qe(ye(ue,"quests",n),i),t(s=>({quests:s.quests.map(o=>o.id===n?{...o,...i}:o)}))},claimQuestRewards:async n=>{const r=e().quests.find(a=>a.id===n);if(!r||!r.completed||r.claimed)return{xp:0,coins:0};const i=pe.getState().isDemo,{rewards:s}=r,o=pe.getState();return await o.addXP(s.xp),await o.addCoins(s.coins),s.gems&&await o.addGems(s.gems),i||await Qe(ye(ue,"quests",n),{claimed:!0}),t(a=>({quests:a.quests.map(l=>l.id===n?{...l,claimed:!0}:l)})),s},getDailyQuests:()=>e().quests.filter(n=>n.type==="daily"),getWeeklyQuests:()=>e().quests.filter(n=>n.type==="weekly"),claimQuestReward:async n=>e().claimQuestRewards(n),refreshQuests:async()=>{const n=pe.getState().user;n&&await e().loadQuests(n.id)},getActiveQuests:()=>{const n=new Date;return e().quests.filter(r=>!r.completed&&new Date(r.endDate)>=n)},getCompletedQuests:()=>e().quests.filter(n=>n.completed),checkAndUpdateQuests:async(n,r)=>{const{quests:i}=e(),s=i.filter(o=>!o.completed);console.log("[Quest Update] Action:",n,"Data:",r),console.log("[Quest Update] Active quests:",s.length);for(const o of s)for(const a of o.objectives){if(a.completed)continue;let l=0;switch(a.type){case"complete_tasks":n==="task_completed"&&(l=1,console.log("[Quest Update] Task completed, progress +1 for quest:",o.title));break;case"complete_category":n==="task_completed"&&(r==null?void 0:r.category)===a.category&&(l=1,console.log("[Quest Update] Category task completed:",r==null?void 0:r.category,"(expected:",a.category,")"));break;case"earn_xp":n==="xp_gained"&&typeof(r==null?void 0:r.amount)=="number"&&(l=r.amount,console.log("[Quest Update] XP gained:",r.amount));break;case"complete_priority":n==="task_completed"&&(r==null?void 0:r.priority)===a.priority&&(l=1,console.log("[Quest Update] Priority task completed:",r==null?void 0:r.priority,"(expected:",a.priority,")"));break;case"maintain_streak":if(n==="streak_updated"&&typeof(r==null?void 0:r.streak)=="number"){const c=Math.min(r.streak,a.target);c>a.current&&(l=c-a.current,console.log("[Quest Update] Streak updated:",r.streak))}break}l>0&&(console.log("[Quest Update] Updating objective progress:",a.description,"+",l),await e().updateQuestProgress(o.id,a.id,l))}}}),{name:"questify-quests"})),n0=Object.freeze(Object.defineProperty({__proto__:null,useQuestStore:wu},Symbol.toStringTag,{value:"Module"})),g2=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),mp=N.createContext({}),gp=N.createContext(null),yp=typeof document<"u",E_=yp?N.useLayoutEffect:N.useEffect,y2=N.createContext({strict:!1}),P_=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i9="framerAppearId",v2="data-"+P_(i9);function s9(t,e,n,r){const{visualElement:i}=N.useContext(mp),s=N.useContext(y2),o=N.useContext(gp),a=N.useContext(g2).reducedMotion,l=N.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;N.useInsertionEffect(()=>{c&&c.update(n,o)});const u=N.useRef(!!(n[v2]&&!window.HandoffComplete));return E_(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),N.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function Ko(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function o9(t,e,n){return N.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ko(n)&&(n.current=r))},[e])}function Vc(t){return typeof t=="string"||Array.isArray(t)}function vp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const I_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],C_=["initial",...I_];function _p(t){return vp(t.animate)||C_.some(e=>Vc(t[e]))}function _2(t){return!!(_p(t)||t.variants)}function a9(t,e){if(_p(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Vc(n)?n:void 0,animate:Vc(r)?r:void 0}}return t.inherit!==!1?e:{}}function l9(t){const{initial:e,animate:n}=a9(t,N.useContext(mp));return N.useMemo(()=>({initial:e,animate:n}),[pT(e),pT(n)])}function pT(t){return Array.isArray(t)?t.join(" "):t}const mT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fc={};for(const t in mT)Fc[t]={isEnabled:e=>mT[t].some(n=>!!e[n])};function c9(t){for(const e in t)Fc[e]={...Fc[e],...t[e]}}const A_=N.createContext({}),w2=N.createContext({}),u9=Symbol.for("motionComponentSymbol");function d9({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&c9(t);function s(a,l){let c;const u={...N.useContext(g2),...a,layoutId:h9(a)},{isStatic:h}=u,f=l9(a),m=r(a,h);if(!h&&yp){f.visualElement=s9(i,m,u,e);const g=N.useContext(w2),v=N.useContext(y2).strict;f.visualElement&&(c=f.visualElement.loadFeatures(u,v,t,g))}return N.createElement(mp.Provider,{value:f},c&&f.visualElement?N.createElement(c,{visualElement:f.visualElement,...u}):null,n(i,a,o9(m,f.visualElement,l),m,h,f.visualElement))}const o=N.forwardRef(s);return o[u9]=i,o}function h9({layoutId:t}){const e=N.useContext(A_).id;return e&&t!==void 0?e+"-"+t:t}function f9(t){function e(r,i={}){return d9(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const p9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function R_(t){return typeof t!="string"||t.includes("-")?!1:!!(p9.indexOf(t)>-1||/[A-Z]/.test(t))}const Zh={};function m9(t){Object.assign(Zh,t)}const xu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_o=new Set(xu);function x2(t,{layout:e,layoutId:n}){return _o.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Zh[t]||t==="opacity")}const hn=t=>!!(t&&t.getVelocity),g9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},y9=xu.length;function v9(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<y9;o++){const a=xu[o];if(t[a]!==void 0){const l=g9[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const b2=t=>e=>typeof e=="string"&&e.startsWith(t),T2=b2("--"),r0=b2("var(--"),_9=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,w9=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ss=(t,e,n)=>Math.min(Math.max(n,t),e),wo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Xl={...wo,transform:t=>ss(0,1,t)},pd={...wo,default:1},Jl=t=>Math.round(t*1e5)/1e5,wp=/(-)?([\d]*\.?[\d])+/g,S2=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,x9=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function bu(t){return typeof t=="string"}const Tu=t=>({test:e=>bu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_i=Tu("deg"),vr=Tu("%"),te=Tu("px"),b9=Tu("vh"),T9=Tu("vw"),gT={...vr,parse:t=>vr.parse(t)/100,transform:t=>vr.transform(t*100)},yT={...wo,transform:Math.round},k2={borderWidth:te,borderTopWidth:te,borderRightWidth:te,borderBottomWidth:te,borderLeftWidth:te,borderRadius:te,radius:te,borderTopLeftRadius:te,borderTopRightRadius:te,borderBottomRightRadius:te,borderBottomLeftRadius:te,width:te,maxWidth:te,height:te,maxHeight:te,size:te,top:te,right:te,bottom:te,left:te,padding:te,paddingTop:te,paddingRight:te,paddingBottom:te,paddingLeft:te,margin:te,marginTop:te,marginRight:te,marginBottom:te,marginLeft:te,rotate:_i,rotateX:_i,rotateY:_i,rotateZ:_i,scale:pd,scaleX:pd,scaleY:pd,scaleZ:pd,skew:_i,skewX:_i,skewY:_i,distance:te,translateX:te,translateY:te,translateZ:te,x:te,y:te,z:te,perspective:te,transformPerspective:te,opacity:Xl,originX:gT,originY:gT,originZ:te,zIndex:yT,fillOpacity:Xl,strokeOpacity:Xl,numOctaves:yT};function D_(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const h in e){const f=e[h];if(T2(h)){s[h]=f;continue}const m=k2[h],g=w9(f,m);if(_o.has(h)){if(l=!0,o[h]=g,!u)continue;f!==(m.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,a[h]=g):i[h]=g}if(e.transform||(l||r?i.transform=v9(t.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:h="50%",originY:f="50%",originZ:m=0}=a;i.transformOrigin=`${h} ${f} ${m}`}}const N_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function E2(t,e,n){for(const r in e)!hn(e[r])&&!x2(r,n)&&(t[r]=e[r])}function S9({transformTemplate:t},e,n){return N.useMemo(()=>{const r=N_();return D_(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function k9(t,e,n){const r=t.style||{},i={};return E2(i,r,t),Object.assign(i,S9(t,e,n)),t.transformValues?t.transformValues(i):i}function E9(t,e,n){const r={},i=k9(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const P9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ef(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||P9.has(t)}let P2=t=>!ef(t);function I9(t){t&&(P2=e=>e.startsWith("on")?!ef(e):t(e))}try{I9(require("@emotion/is-prop-valid").default)}catch{}function C9(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(P2(i)||n===!0&&ef(i)||!e&&!ef(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function vT(t,e,n){return typeof t=="string"?t:te.transform(e+n*t)}function A9(t,e,n){const r=vT(e,t.x,t.width),i=vT(n,t.y,t.height);return`${r} ${i}`}const R9={offset:"stroke-dashoffset",array:"stroke-dasharray"},D9={offset:"strokeDashoffset",array:"strokeDasharray"};function N9(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?R9:D9;t[s.offset]=te.transform(-r);const o=te.transform(e),a=te.transform(n);t[s.array]=`${o} ${a}`}function M_(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h,f){if(D_(t,c,u,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g,dimensions:v}=t;m.transform&&(v&&(g.transform=m.transform),delete m.transform),v&&(i!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=A9(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&N9(m,o,a,l,!1)}const I2=()=>({...N_(),attrs:{}}),O_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function M9(t,e,n,r){const i=N.useMemo(()=>{const s=I2();return M_(s,e,{enableHardwareAcceleration:!1},O_(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};E2(s,t.style,t),i.style={...s,...i.style}}return i}function O9(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(R_(n)?M9:E9)(r,s,o,n),u={...C9(r,typeof n=="string",t),...l,ref:i},{children:h}=r,f=N.useMemo(()=>hn(h)?h.get():h,[h]);return N.createElement(n,{...u,children:f})}}function C2(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const A2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function R2(t,e,n,r){C2(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(A2.has(i)?i:P_(i),e.attrs[i])}function j_(t,e){const{style:n}=t,r={};for(const i in n)(hn(n[i])||e.style&&hn(e.style[i])||x2(i,t))&&(r[i]=n[i]);return r}function D2(t,e){const n=j_(t,e);for(const r in t)if(hn(t[r])||hn(e[r])){const i=xu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function L_(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function N2(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const tf=t=>Array.isArray(t),j9=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),L9=t=>tf(t)?t[t.length-1]||0:t;function th(t){const e=hn(t)?t.get():t;return j9(e)?e.toValue():e}function V9({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:F9(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const M2=t=>(e,n)=>{const r=N.useContext(mp),i=N.useContext(gp),s=()=>V9(t,e,r,i);return n?s():N2(s)};function F9(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=th(s[f]);let{initial:o,animate:a}=t;const l=_p(t),c=_2(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;return h&&typeof h!="boolean"&&!vp(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const g=L_(t,m);if(!g)return;const{transitionEnd:v,transition:x,...w}=g;for(const _ in w){let T=w[_];if(Array.isArray(T)){const P=u?T.length-1:0;T=T[P]}T!==null&&(i[_]=T)}for(const _ in v)i[_]=v[_]}),i}const Je=t=>t;class _T{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function U9(t){let e=new _T,n=new _T,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const h=u&&i,f=h?e:n;return c&&o.add(l),f.add(l)&&h&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];u(l),o.has(u)&&(a.schedule(u),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const md=["prepare","read","update","preRender","render","postRender"],B9=40;function z9(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=md.reduce((h,f)=>(h[f]=U9(()=>n=!0),h),{}),o=h=>s[h].process(i),a=()=>{const h=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(h-i.timestamp,B9),1),i.timestamp=h,i.isProcessing=!0,md.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:md.reduce((h,f)=>{const m=s[f];return h[f]=(g,v=!1,x=!1)=>(n||l(),m.schedule(g,v,x)),h},{}),cancel:h=>md.forEach(f=>s[f].cancel(h)),state:i,steps:s}}const{schedule:Re,cancel:si,state:jt,steps:Km}=z9(typeof requestAnimationFrame<"u"?requestAnimationFrame:Je,!0),$9={useVisualState:M2({scrapeMotionValuesFromProps:D2,createRenderState:I2,onMount:(t,e,{renderState:n,latestValues:r})=>{Re.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Re.render(()=>{M_(n,r,{enableHardwareAcceleration:!1},O_(e.tagName),t.transformTemplate),R2(e,n)})}})},W9={useVisualState:M2({scrapeMotionValuesFromProps:j_,createRenderState:N_})};function H9(t,{forwardMotionProps:e=!1},n,r){return{...R_(t)?$9:W9,preloadedFeatures:n,useRender:O9(e),createVisualElement:r,Component:t}}function zr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const O2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function xp(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const q9=t=>e=>O2(e)&&t(e,xp(e));function Kr(t,e,n,r){return zr(t,e,q9(n),r)}const G9=(t,e)=>n=>e(t(n)),Xi=(...t)=>t.reduce(G9);function j2(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const wT=j2("dragHorizontal"),xT=j2("dragVertical");function L2(t){let e=!1;if(t==="y")e=xT();else if(t==="x")e=wT();else{const n=wT(),r=xT();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function V2(){const t=L2(!0);return t?(t(),!1):!0}class vs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function bT(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||V2())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Re.update(()=>a[r](s,o))};return Kr(t.current,n,i,{passive:!t.getProps()[r]})}class K9 extends vs{mount(){this.unmount=Xi(bT(this.node,!0),bT(this.node,!1))}unmount(){}}class Q9 extends vs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xi(zr(this.node.current,"focus",()=>this.onFocus()),zr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const F2=(t,e)=>e?t===e?!0:F2(t,e.parentElement):!1;function Qm(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,xp(n))}class Y9 extends vs{constructor(){super(...arguments),this.removeStartListeners=Je,this.removeEndListeners=Je,this.removeAccessibleListeners=Je,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Kr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps();Re.update(()=>{!h&&!F2(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Kr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Xi(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Qm("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Re.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=zr(this.node.current,"keyup",o),Qm("down",(a,l)=>{this.startPress(a,l)})},n=zr(this.node.current,"keydown",e),r=()=>{this.isPressing&&Qm("cancel",(s,o)=>this.cancelPress(s,o))},i=zr(this.node.current,"blur",r);this.removeAccessibleListeners=Xi(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Re.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!V2()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Re.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Kr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=zr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Xi(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const i0=new WeakMap,Ym=new WeakMap,X9=t=>{const e=i0.get(t.target);e&&e(t)},J9=t=>{t.forEach(X9)};function Z9({root:t,...e}){const n=t||document;Ym.has(n)||Ym.set(n,{});const r=Ym.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(J9,{root:t,...e})),r[i]}function e$(t,e,n){const r=Z9(e);return i0.set(t,n),r.observe(t),()=>{i0.delete(t),r.unobserve(t)}}const t$={some:0,all:1};class n$ extends vs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:t$[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return e$(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(r$(e,n))&&this.startObserver()}unmount(){}}function r$({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const i$={inView:{Feature:n$},tap:{Feature:Y9},focus:{Feature:Q9},hover:{Feature:K9}};function U2(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function s$(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function o$(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function bp(t,e,n){const r=t.getProps();return L_(r,e,n!==void 0?n:r.custom,s$(t),o$(t))}let V_=Je;const Gs=t=>t*1e3,Qr=t=>t/1e3,a$={current:!1},B2=t=>Array.isArray(t)&&typeof t[0]=="number";function z2(t){return!!(!t||typeof t=="string"&&$2[t]||B2(t)||Array.isArray(t)&&t.every(z2))}const Al=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,$2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Al([0,.65,.55,1]),circOut:Al([.55,0,1,.45]),backIn:Al([.31,.01,.66,-.59]),backOut:Al([.33,1.53,.69,.99])};function W2(t){if(t)return B2(t)?Al(t):Array.isArray(t)?t.map(W2):$2[t]}function l$(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=W2(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function c$(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const H2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,u$=1e-7,d$=12;function h$(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=H2(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>u$&&++a<d$);return o}function Su(t,e,n,r){if(t===e&&n===r)return Je;const i=s=>h$(s,0,1,t,n);return s=>s===0||s===1?s:H2(i(s),e,r)}const f$=Su(.42,0,1,1),p$=Su(0,0,.58,1),q2=Su(.42,0,.58,1),m$=t=>Array.isArray(t)&&typeof t[0]!="number",G2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,K2=t=>e=>1-t(1-e),F_=t=>1-Math.sin(Math.acos(t)),Q2=K2(F_),g$=G2(F_),Y2=Su(.33,1.53,.69,.99),U_=K2(Y2),y$=G2(U_),v$=t=>(t*=2)<1?.5*U_(t):.5*(2-Math.pow(2,-10*(t-1))),_$={linear:Je,easeIn:f$,easeInOut:q2,easeOut:p$,circIn:F_,circInOut:g$,circOut:Q2,backIn:U_,backInOut:y$,backOut:Y2,anticipate:v$},TT=t=>{if(Array.isArray(t)){V_(t.length===4);const[e,n,r,i]=t;return Su(e,n,r,i)}else if(typeof t=="string")return _$[t];return t},B_=(t,e)=>n=>!!(bu(n)&&x9.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),X2=(t,e,n)=>r=>{if(!bu(r))return r;const[i,s,o,a]=r.match(wp);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},w$=t=>ss(0,255,t),Xm={...wo,transform:t=>Math.round(w$(t))},zs={test:B_("rgb","red"),parse:X2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Xm.transform(t)+", "+Xm.transform(e)+", "+Xm.transform(n)+", "+Jl(Xl.transform(r))+")"};function x$(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const s0={test:B_("#"),parse:x$,transform:zs.transform},Qo={test:B_("hsl","hue"),parse:X2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+vr.transform(Jl(e))+", "+vr.transform(Jl(n))+", "+Jl(Xl.transform(r))+")"},Kt={test:t=>zs.test(t)||s0.test(t)||Qo.test(t),parse:t=>zs.test(t)?zs.parse(t):Qo.test(t)?Qo.parse(t):s0.parse(t),transform:t=>bu(t)?t:t.hasOwnProperty("red")?zs.transform(t):Qo.transform(t)},Be=(t,e,n)=>-n*t+n*e+t;function Jm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function b$({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Jm(l,a,t+1/3),s=Jm(l,a,t),o=Jm(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Zm=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},T$=[s0,zs,Qo],S$=t=>T$.find(e=>e.test(t));function ST(t){const e=S$(t);let n=e.parse(t);return e===Qo&&(n=b$(n)),n}const J2=(t,e)=>{const n=ST(t),r=ST(e),i={...n};return s=>(i.red=Zm(n.red,r.red,s),i.green=Zm(n.green,r.green,s),i.blue=Zm(n.blue,r.blue,s),i.alpha=Be(n.alpha,r.alpha,s),zs.transform(i))};function k$(t){var e,n;return isNaN(t)&&bu(t)&&(((e=t.match(wp))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(S2))===null||n===void 0?void 0:n.length)||0)>0}const Z2={regex:_9,countKey:"Vars",token:"${v}",parse:Je},eR={regex:S2,countKey:"Colors",token:"${c}",parse:Kt.parse},tR={regex:wp,countKey:"Numbers",token:"${n}",parse:wo.parse};function eg(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function nf(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&eg(n,Z2),eg(n,eR),eg(n,tR),n}function nR(t){return nf(t).values}function rR(t){const{values:e,numColors:n,numVars:r,tokenised:i}=nf(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(Z2.token,o[l]):l<r+n?a=a.replace(eR.token,Kt.transform(o[l])):a=a.replace(tR.token,Jl(o[l]));return a}}const E$=t=>typeof t=="number"?0:t;function P$(t){const e=nR(t);return rR(t)(e.map(E$))}const os={test:k$,parse:nR,createTransformer:rR,getAnimatableNone:P$},iR=(t,e)=>n=>`${n>0?e:t}`;function sR(t,e){return typeof t=="number"?n=>Be(t,e,n):Kt.test(t)?J2(t,e):t.startsWith("var(")?iR(t,e):aR(t,e)}const oR=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>sR(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},I$=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=sR(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},aR=(t,e)=>{const n=os.createTransformer(e),r=nf(t),i=nf(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Xi(oR(r.values,i.values),n):iR(t,e)},Uc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},kT=(t,e)=>n=>Be(t,e,n);function C$(t){return typeof t=="number"?kT:typeof t=="string"?Kt.test(t)?J2:aR:Array.isArray(t)?oR:typeof t=="object"?I$:kT}function A$(t,e,n){const r=[],i=n||C$(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Je:e;a=Xi(l,a)}r.push(a)}return r}function lR(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(V_(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=A$(e,r,i),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const h=Uc(t[u],t[u+1],c);return o[u](h)};return n?c=>l(ss(t[0],t[s-1],c)):l}function R$(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Uc(0,e,r);t.push(Be(n,1,i))}}function D$(t){const e=[0];return R$(e,t.length-1),e}function N$(t,e){return t.map(n=>n*e)}function M$(t,e){return t.map(()=>e||q2).splice(0,t.length-1)}function rf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=m$(r)?r.map(TT):TT(r),s={done:!1,value:e[0]},o=N$(n&&n.length===e.length?n:D$(e),t),a=lR(o,e,{ease:Array.isArray(i)?i:M$(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function cR(t,e){return e?t*(1e3/e):0}const O$=5;function uR(t,e,n){const r=Math.max(e-O$,0);return cR(n-t(r),e-r)}const tg=.001,j$=.01,L$=10,V$=.05,F$=1;function U$({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=ss(V$,F$,o),t=ss(j$,L$,Qr(t)),o<1?(i=c=>{const u=c*o,h=u*t,f=u-n,m=o0(c,o),g=Math.exp(-h);return tg-f/m*g},s=c=>{const h=c*o*t,f=h*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-h),v=o0(Math.pow(c,2),o);return(-i(c)+tg>0?-1:1)*((f-m)*g)/v}):(i=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-tg+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=z$(i,s,a);if(t=Gs(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const B$=12;function z$(t,e,n){let r=n;for(let i=1;i<B$;i++)r=r-t(r)/e(r);return r}function o0(t,e){return t*Math.sqrt(1-e*e)}const $$=["duration","bounce"],W$=["stiffness","damping","mass"];function ET(t,e){return e.some(n=>t[n]!==void 0)}function H$(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!ET(t,W$)&&ET(t,$$)){const n=U$(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function dR({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:u,velocity:h,isResolvedFromDuration:f}=H$({...r,velocity:-Qr(r.velocity||0)}),m=h||0,g=l/(2*Math.sqrt(a*c)),v=s-i,x=Qr(Math.sqrt(a/c)),w=Math.abs(v)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let _;if(g<1){const T=o0(x,g);_=P=>{const A=Math.exp(-g*x*P);return s-A*((m+g*x*v)/T*Math.sin(T*P)+v*Math.cos(T*P))}}else if(g===1)_=T=>s-Math.exp(-x*T)*(v+(m+x*v)*T);else{const T=x*Math.sqrt(g*g-1);_=P=>{const A=Math.exp(-g*x*P),O=Math.min(T*P,300);return s-A*((m+g*x*v)*Math.sinh(O)+T*v*Math.cosh(O))/T}}return{calculatedDuration:f&&u||null,next:T=>{const P=_(T);if(f)o.done=T>=u;else{let A=m;T!==0&&(g<1?A=uR(_,T,P):A=0);const O=Math.abs(A)<=n,E=Math.abs(s-P)<=e;o.done=O&&E}return o.value=o.done?s:P,o}}}function PT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},m=S=>a!==void 0&&S<a||l!==void 0&&S>l,g=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let v=n*e;const x=h+v,w=o===void 0?x:o(x);w!==x&&(v=w-h);const _=S=>-v*Math.exp(-S/r),T=S=>w+_(S),P=S=>{const k=_(S),C=T(S);f.done=Math.abs(k)<=c,f.value=f.done?w:C};let A,O;const E=S=>{m(f.value)&&(A=S,O=dR({keyframes:[f.value,g(f.value)],velocity:uR(T,S,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:S=>{let k=!1;return!O&&A===void 0&&(k=!0,P(S),E(S)),A!==void 0&&S>A?O.next(S-A):(!k&&P(S),f)}}}const q$=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Re.update(e,!0),stop:()=>si(e),now:()=>jt.isProcessing?jt.timestamp:performance.now()}},IT=2e4;function CT(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<IT;)e+=n,r=t.next(e);return e>=IT?1/0:e}const G$={decay:PT,inertia:PT,tween:rf,keyframes:rf,spring:dR};function sf({autoplay:t=!0,delay:e=0,driver:n=q$,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:h,...f}){let m=1,g=!1,v,x;const w=()=>{x=new Promise(J=>{v=J})};w();let _;const T=G$[i]||rf;let P;T!==rf&&typeof r[0]!="number"&&(P=lR([0,100],r,{clamp:!1}),r=[0,100]);const A=T({...f,keyframes:r});let O;a==="mirror"&&(O=T({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let E="idle",S=null,k=null,C=null;A.calculatedDuration===null&&s&&(A.calculatedDuration=CT(A));const{calculatedDuration:D}=A;let M=1/0,R=1/0;D!==null&&(M=D+o,R=M*(s+1)-o);let ee=0;const q=J=>{if(k===null)return;m>0&&(k=Math.min(k,J)),m<0&&(k=Math.min(J-R/m,k)),S!==null?ee=S:ee=Math.round(J-k)*m;const le=ee-e*(m>=0?1:-1),be=m>=0?le<0:le>R;ee=Math.max(le,0),E==="finished"&&S===null&&(ee=R);let tt=ee,pt=A;if(s){const Wa=Math.min(ee,R)/M;let Sr=Math.floor(Wa),kn=Wa%1;!kn&&Wa>=1&&(kn=1),kn===1&&Sr--,Sr=Math.min(Sr,s+1),!!(Sr%2)&&(a==="reverse"?(kn=1-kn,o&&(kn-=o/M)):a==="mirror"&&(pt=O)),tt=ss(0,1,kn)*M}const Fe=be?{done:!1,value:r[0]}:pt.next(tt);P&&(Fe.value=P(Fe.value));let{done:Sn}=Fe;!be&&D!==null&&(Sn=m>=0?ee>=R:ee<=0);const Np=S===null&&(E==="finished"||E==="running"&&Sn);return h&&h(Fe.value),Np&&B(),Fe},Q=()=>{_&&_.stop(),_=void 0},se=()=>{E="idle",Q(),v(),w(),k=C=null},B=()=>{E="finished",u&&u(),Q(),v()},W=()=>{if(g)return;_||(_=n(q));const J=_.now();l&&l(),S!==null?k=J-S:(!k||E==="finished")&&(k=J),E==="finished"&&w(),C=k,S=null,E="running",_.start()};t&&W();const Z={then(J,le){return x.then(J,le)},get time(){return Qr(ee)},set time(J){J=Gs(J),ee=J,S!==null||!_||m===0?S=J:k=_.now()-J/m},get duration(){const J=A.calculatedDuration===null?CT(A):A.calculatedDuration;return Qr(J)},get speed(){return m},set speed(J){J===m||!_||(m=J,Z.time=Qr(ee))},get state(){return E},play:W,pause:()=>{E="paused",S=ee},stop:()=>{g=!0,E!=="idle"&&(E="idle",c&&c(),se())},cancel:()=>{C!==null&&q(C),se()},complete:()=>{E="finished"},sample:J=>(k=0,q(J))};return Z}function K$(t){let e;return()=>(e===void 0&&(e=t()),e)}const Q$=K$(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Y$=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),gd=10,X$=2e4,J$=(t,e)=>e.type==="spring"||t==="backgroundColor"||!z2(e.ease);function Z$(t,e,{onUpdate:n,onComplete:r,...i}){if(!(Q$()&&Y$.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const u=()=>{l=new Promise(T=>{a=T})};u();let{keyframes:h,duration:f=300,ease:m,times:g}=i;if(J$(e,i)){const T=sf({...i,repeat:0,delay:0});let P={done:!1,value:h[0]};const A=[];let O=0;for(;!P.done&&O<X$;)P=T.sample(O),A.push(P.value),O+=gd;g=void 0,h=A,f=O-gd,m="linear"}const v=l$(t.owner.current,e,h,{...i,duration:f,ease:m,times:g}),x=()=>{c=!1,v.cancel()},w=()=>{c=!0,Re.update(x),a(),u()};return v.onfinish=()=>{c||(t.set(c$(h,i)),r&&r(),w())},{then(T,P){return l.then(T,P)},attachTimeline(T){return v.timeline=T,v.onfinish=null,Je},get time(){return Qr(v.currentTime||0)},set time(T){v.currentTime=Gs(T)},get speed(){return v.playbackRate},set speed(T){v.playbackRate=T},get duration(){return Qr(f)},play:()=>{o||(v.play(),si(x))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:T}=v;if(T){const P=sf({...i,autoplay:!1});t.setWithVelocity(P.sample(T-gd).value,P.sample(T).value,gd)}w()},complete:()=>{c||v.finish()},cancel:w}}function eW({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Je,pause:Je,stop:Je,then:s=>(s(),Promise.resolve()),cancel:Je,complete:Je});return e?sf({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const tW={type:"spring",stiffness:500,damping:25,restSpeed:10},nW=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),rW={type:"keyframes",duration:.8},iW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},sW=(t,{keyframes:e})=>e.length>2?rW:_o.has(t)?t.startsWith("scale")?nW(e[1]):tW:iW,a0=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(os.test(e)||e==="0")&&!e.startsWith("url(")),oW=new Set(["brightness","contrast","saturate","opacity"]);function aW(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(wp)||[];if(!r)return t;const i=n.replace(r,"");let s=oW.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const lW=/([a-z-]*)\(.*?\)/g,l0={...os,getAnimatableNone:t=>{const e=t.match(lW);return e?e.map(aW).join(" "):t}},cW={...k2,color:Kt,backgroundColor:Kt,outlineColor:Kt,fill:Kt,stroke:Kt,borderColor:Kt,borderTopColor:Kt,borderRightColor:Kt,borderBottomColor:Kt,borderLeftColor:Kt,filter:l0,WebkitFilter:l0},z_=t=>cW[t];function hR(t,e){let n=z_(t);return n!==l0&&(n=os),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const fR=t=>/^0[^.\s]+$/.test(t);function uW(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||fR(t)}function dW(t,e,n,r){const i=a0(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),uW(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];s[u]=hR(e,a)}return s}function hW({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function $_(t,e){return t[e]||t.default||t}const fW={skipAnimations:!1},W_=(t,e,n,r={})=>i=>{const s=$_(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Gs(o);const l=dW(e,t,n,s),c=l[0],u=l[l.length-1],h=a0(t,c),f=a0(t,u);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:g=>{e.set(g),s.onUpdate&&s.onUpdate(g)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(hW(s)||(m={...m,...sW(t,m)}),m.duration&&(m.duration=Gs(m.duration)),m.repeatDelay&&(m.repeatDelay=Gs(m.repeatDelay)),!h||!f||a$.current||s.type===!1||fW.skipAnimations)return eW(m);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=Z$(e,t,m);if(g)return g}return sf(m)};function of(t){return!!(hn(t)&&t.add)}const pR=t=>/^\-?\d*\.?\d+$/.test(t);function H_(t,e){t.indexOf(e)===-1&&t.push(e)}function q_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class G_{constructor(){this.subscriptions=[]}add(e){return H_(this.subscriptions,e),()=>q_(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pW=t=>!isNaN(parseFloat(t));class mW{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=jt;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Re.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Re.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=pW(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new G_);const r=this.events[e].add(n);return e==="change"?()=>{r(),Re.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?cR(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ia(t,e){return new mW(t,e)}const mR=t=>e=>e.test(t),gW={test:t=>t==="auto",parse:t=>t},gR=[wo,te,vr,_i,T9,b9,gW],fl=t=>gR.find(mR(t)),yW=[...gR,Kt,os],vW=t=>yW.find(mR(t));function _W(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ia(n))}function wW(t,e){const n=bp(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=L9(s[o]);_W(t,o,a)}}function xW(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),u!=null&&(typeof u=="string"&&(pR(u)||fR(u))?u=parseFloat(u):!vW(u)&&os.test(c)&&(u=hR(l,c)),t.addValue(l,Ia(u,{owner:t})),n[l]===void 0&&(n[l]=u),u!==null&&t.setBaseTarget(l,u))}}function bW(t,e){return e?(e[t]||e.default||e).from:void 0}function TW(t,e,n){const r={};for(const i in t){const s=bW(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function SW({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function kW(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function yR(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const f=t.getValue(h),m=a[h];if(!f||m===void 0||u&&SW(u,h))continue;const g={delay:n,elapsed:0,...$_(s||{},h)};if(window.HandoffAppearAnimations){const w=t.getProps()[v2];if(w){const _=window.HandoffAppearAnimations(w,h,f,Re);_!==null&&(g.elapsed=_,g.isHandoff=!0)}}let v=!g.isHandoff&&!kW(f,m);if(g.type==="spring"&&(f.getVelocity()||g.velocity)&&(v=!1),f.animation&&(v=!1),v)continue;f.start(W_(h,f,m,t.shouldReduceMotion&&_o.has(h)?{type:!1}:g));const x=f.animation;of(l)&&(l.add(h),x.then(()=>l.remove(h))),c.push(x)}return o&&Promise.all(c).then(()=>{o&&wW(t,o)}),c}function c0(t,e,n={}){const r=bp(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(yR(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:h}=i;return EW(t,e,c+l,u,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function EW(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(PW).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(c0(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function PW(t,e){return t.sortNodePosition(e)}function IW(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>c0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=c0(t,e,n);else{const i=typeof e=="function"?bp(t,e,n.custom):e;r=Promise.all(yR(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const CW=[...I_].reverse(),AW=I_.length;function RW(t){return e=>Promise.all(e.map(({animation:n,options:r})=>IW(t,n,r)))}function DW(t){let e=RW(t);const n=MW();let r=!0;const i=(l,c)=>{const u=bp(t,c);if(u){const{transition:h,transitionEnd:f,...m}=u;l={...l,...m,...f}}return l};function s(l){e=l(t)}function o(l,c){const u=t.getProps(),h=t.getVariantContext(!0)||{},f=[],m=new Set;let g={},v=1/0;for(let w=0;w<AW;w++){const _=CW[w],T=n[_],P=u[_]!==void 0?u[_]:h[_],A=Vc(P),O=_===c?T.isActive:null;O===!1&&(v=w);let E=P===h[_]&&P!==u[_]&&A;if(E&&r&&t.manuallyAnimateOnMount&&(E=!1),T.protectedKeys={...g},!T.isActive&&O===null||!P&&!T.prevProp||vp(P)||typeof P=="boolean")continue;let k=NW(T.prevProp,P)||_===c&&T.isActive&&!E&&A||w>v&&A,C=!1;const D=Array.isArray(P)?P:[P];let M=D.reduce(i,{});O===!1&&(M={});const{prevResolvedValues:R={}}=T,ee={...R,...M},q=Q=>{k=!0,m.has(Q)&&(C=!0,m.delete(Q)),T.needsAnimating[Q]=!0};for(const Q in ee){const se=M[Q],B=R[Q];if(g.hasOwnProperty(Q))continue;let W=!1;tf(se)&&tf(B)?W=!U2(se,B):W=se!==B,W?se!==void 0?q(Q):m.add(Q):se!==void 0&&m.has(Q)?q(Q):T.protectedKeys[Q]=!0}T.prevProp=P,T.prevResolvedValues=M,T.isActive&&(g={...g,...M}),r&&t.blockInitialAnimation&&(k=!1),k&&(!E||C)&&f.push(...D.map(Q=>({animation:Q,options:{type:_,...l}})))}if(m.size){const w={};m.forEach(_=>{const T=t.getBaseTarget(_);T!==void 0&&(w[_]=T)}),f.push({animation:w})}let x=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(f):Promise.resolve()}function a(l,c,u){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const f=o(u,l);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function NW(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!U2(e,t):!1}function Ts(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function MW(){return{animate:Ts(!0),whileInView:Ts(),whileHover:Ts(),whileTap:Ts(),whileDrag:Ts(),whileFocus:Ts(),exit:Ts()}}class OW extends vs{constructor(e){super(e),e.animationState||(e.animationState=DW(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),vp(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let jW=0;class LW extends vs{constructor(){super(...arguments),this.id=jW++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const VW={animation:{Feature:OW},exit:{Feature:LW}},AT=(t,e)=>Math.abs(t-e);function FW(t,e){const n=AT(t.x,e.x),r=AT(t.y,e.y);return Math.sqrt(n**2+r**2)}class vR{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=rg(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=FW(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:g}=h,{timestamp:v}=jt;this.history.push({...g,timestamp:v});const{onStart:x,onMove:w}=this.handlers;f||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=ng(f,this.transformPagePoint),Re.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=rg(h.type==="pointercancel"?this.lastMoveEventInfo:ng(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,x),g&&g(h,x)},!O2(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=xp(e),a=ng(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=jt;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,rg(a,this.history)),this.removeListeners=Xi(Kr(this.contextWindow,"pointermove",this.handlePointerMove),Kr(this.contextWindow,"pointerup",this.handlePointerUp),Kr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),si(this.updatePoint)}}function ng(t,e){return e?{point:e(t.point)}:t}function RT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function rg({point:t},e){return{point:t,delta:RT(t,_R(e)),offset:RT(t,UW(e)),velocity:BW(e,.1)}}function UW(t){return t[0]}function _R(t){return t[t.length-1]}function BW(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=_R(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Gs(e)));)n--;if(!r)return{x:0,y:0};const s=Qr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function xn(t){return t.max-t.min}function u0(t,e=0,n=.01){return Math.abs(t-e)<=n}function DT(t,e,n,r=.5){t.origin=r,t.originPoint=Be(e.min,e.max,t.origin),t.scale=xn(n)/xn(e),(u0(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Be(n.min,n.max,t.origin)-t.originPoint,(u0(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Zl(t,e,n,r){DT(t.x,e.x,n.x,r?r.originX:void 0),DT(t.y,e.y,n.y,r?r.originY:void 0)}function NT(t,e,n){t.min=n.min+e.min,t.max=t.min+xn(e)}function zW(t,e,n){NT(t.x,e.x,n.x),NT(t.y,e.y,n.y)}function MT(t,e,n){t.min=e.min-n.min,t.max=t.min+xn(e)}function ec(t,e,n){MT(t.x,e.x,n.x),MT(t.y,e.y,n.y)}function $W(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Be(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Be(n,t,r.max):Math.min(t,n)),t}function OT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function WW(t,{top:e,left:n,bottom:r,right:i}){return{x:OT(t.x,n,i),y:OT(t.y,e,r)}}function jT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function HW(t,e){return{x:jT(t.x,e.x),y:jT(t.y,e.y)}}function qW(t,e){let n=.5;const r=xn(t),i=xn(e);return i>r?n=Uc(e.min,e.max-r,t.min):r>i&&(n=Uc(t.min,t.max-i,e.min)),ss(0,1,n)}function GW(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const d0=.35;function KW(t=d0){return t===!1?t=0:t===!0&&(t=d0),{x:LT(t,"left","right"),y:LT(t,"top","bottom")}}function LT(t,e,n){return{min:VT(t,e),max:VT(t,n)}}function VT(t,e){return typeof t=="number"?t:t[e]||0}const FT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Yo=()=>({x:FT(),y:FT()}),UT=()=>({min:0,max:0}),rt=()=>({x:UT(),y:UT()});function In(t){return[t("x"),t("y")]}function wR({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function QW({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function YW(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ig(t){return t===void 0||t===1}function h0({scale:t,scaleX:e,scaleY:n}){return!ig(t)||!ig(e)||!ig(n)}function As(t){return h0(t)||xR(t)||t.z||t.rotate||t.rotateX||t.rotateY}function xR(t){return BT(t.x)||BT(t.y)}function BT(t){return t&&t!=="0%"}function af(t,e,n){const r=t-n,i=e*r;return n+i}function zT(t,e,n,r,i){return i!==void 0&&(t=af(t,i,r)),af(t,n,r)+e}function f0(t,e=0,n=1,r,i){t.min=zT(t.min,e,n,r,i),t.max=zT(t.max,e,n,r,i)}function bR(t,{x:e,y:n}){f0(t.x,e.translate,e.scale,e.originPoint),f0(t.y,n.translate,n.scale,n.originPoint)}function XW(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Xo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,bR(t,o)),r&&As(s.latestValues)&&Xo(t,s.latestValues))}e.x=$T(e.x),e.y=$T(e.y)}function $T(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function bi(t,e){t.min=t.min+e,t.max=t.max+e}function WT(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Be(t.min,t.max,s);f0(t,e[n],e[r],o,e.scale)}const JW=["x","scaleX","originX"],ZW=["y","scaleY","originY"];function Xo(t,e){WT(t.x,e,JW),WT(t.y,e,ZW)}function TR(t,e){return wR(YW(t.getBoundingClientRect(),e))}function e8(t,e,n){const r=TR(t,n),{scroll:i}=e;return i&&(bi(r.x,i.offset.x),bi(r.y,i.offset.y)),r}const SR=({current:t})=>t?t.ownerDocument.defaultView:null,t8=new WeakMap;class n8{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(xp(u,"page").point)},s=(u,h)=>{const{drag:f,dragPropagation:m,onDragStart:g}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=L2(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),In(x=>{let w=this.getAxisMotionValue(x).get()||0;if(vr.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const T=_.layout.layoutBox[x];T&&(w=xn(T)*(parseFloat(w)/100))}}this.originPoint[x]=w}),g&&Re.update(()=>g(u,h),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:g,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:x}=h;if(m&&this.currentDirection===null){this.currentDirection=r8(x),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),v&&v(u,h)},a=(u,h)=>this.stop(u,h),l=()=>In(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new vR(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:SR(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Re.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!yd(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=$W(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ko(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=WW(i.layoutBox,n):this.constraints=!1,this.elastic=KW(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&In(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=GW(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ko(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=e8(r,i.root,this.visualElement.getTransformPagePoint());let o=HW(i.layout.layoutBox,s);if(n){const a=n(QW(o));this.hasMutatedConstraints=!!a,a&&(o=wR(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=In(u=>{if(!yd(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(W_(e,r,0,n))}stopAnimation(){In(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){In(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){In(n=>{const{drag:r}=this.getProps();if(!yd(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Be(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ko(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};In(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=qW({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),In(o=>{if(!yd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Be(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;t8.set(this.visualElement,this);const e=this.visualElement.current,n=Kr(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ko(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=zr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(In(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=d0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function yd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function r8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class i8 extends vs{constructor(e){super(e),this.removeGroupControls=Je,this.removeListeners=Je,this.controls=new n8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Je}unmount(){this.removeGroupControls(),this.removeListeners()}}const HT=t=>(e,n)=>{t&&Re.update(()=>t(e,n))};class s8 extends vs{constructor(){super(...arguments),this.removePointerDownListener=Je}onPointerDown(e){this.session=new vR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:SR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:HT(e),onStart:HT(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Re.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Kr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function o8(){const t=N.useContext(gp);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=N.useId();return N.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const nh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const pl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(te.test(t))t=parseFloat(t);else return t;const n=qT(t,e.target.x),r=qT(t,e.target.y);return`${n}% ${r}%`}},a8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=os.parse(t);if(i.length>5)return r;const s=os.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Be(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class l8 extends dn.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;m9(c8),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),nh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Re.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kR(t){const[e,n]=o8(),r=N.useContext(A_);return dn.createElement(l8,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(w2),isPresent:e,safeToRemove:n})}const c8={borderRadius:{...pl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pl,borderTopRightRadius:pl,borderBottomLeftRadius:pl,borderBottomRightRadius:pl,boxShadow:a8},ER=["TopLeft","TopRight","BottomLeft","BottomRight"],u8=ER.length,GT=t=>typeof t=="string"?parseFloat(t):t,KT=t=>typeof t=="number"||te.test(t);function d8(t,e,n,r,i,s){i?(t.opacity=Be(0,n.opacity!==void 0?n.opacity:1,h8(r)),t.opacityExit=Be(e.opacity!==void 0?e.opacity:1,0,f8(r))):s&&(t.opacity=Be(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<u8;o++){const a=`border${ER[o]}Radius`;let l=QT(e,a),c=QT(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||KT(l)===KT(c)?(t[a]=Math.max(Be(GT(l),GT(c),r),0),(vr.test(c)||vr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Be(e.rotate||0,n.rotate||0,r))}function QT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const h8=PR(0,.5,Q2),f8=PR(.5,.95,Je);function PR(t,e,n){return r=>r<t?0:r>e?1:n(Uc(t,e,r))}function YT(t,e){t.min=e.min,t.max=e.max}function En(t,e){YT(t.x,e.x),YT(t.y,e.y)}function XT(t,e,n,r,i){return t-=e,t=af(t,1/n,r),i!==void 0&&(t=af(t,1/i,r)),t}function p8(t,e=0,n=1,r=.5,i,s=t,o=t){if(vr.test(e)&&(e=parseFloat(e),e=Be(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Be(s.min,s.max,r);t===s&&(a-=e),t.min=XT(t.min,e,n,a,i),t.max=XT(t.max,e,n,a,i)}function JT(t,e,[n,r,i],s,o){p8(t,e[n],e[r],e[i],e.scale,s,o)}const m8=["x","scaleX","originX"],g8=["y","scaleY","originY"];function ZT(t,e,n,r){JT(t.x,e,m8,n?n.x:void 0,r?r.x:void 0),JT(t.y,e,g8,n?n.y:void 0,r?r.y:void 0)}function eS(t){return t.translate===0&&t.scale===1}function IR(t){return eS(t.x)&&eS(t.y)}function y8(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function CR(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function tS(t){return xn(t.x)/xn(t.y)}class v8{constructor(){this.members=[]}add(e){H_(this.members,e),e.scheduleRender()}remove(e){if(q_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function nS(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:u}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),u&&(r+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const _8=(t,e)=>t.depth-e.depth;class w8{constructor(){this.children=[],this.isDirty=!1}add(e){H_(this.children,e),this.isDirty=!0}remove(e){q_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_8),this.isDirty=!1,this.children.forEach(e)}}function x8(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(si(r),t(s-e))};return Re.read(r,!0),()=>si(r)}function b8(t){window.MotionDebug&&window.MotionDebug.record(t)}function T8(t){return t instanceof SVGElement&&t.tagName!=="svg"}function S8(t,e,n){const r=hn(t)?t:Ia(t);return r.start(W_("",r,e,n)),r.animation}const rS=["","X","Y","Z"],k8={visibility:"hidden"},iS=1e3;let E8=0;const Rs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function AR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=E8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Rs.totalNodes=Rs.resolvedTargetDeltas=Rs.recalculatedProjection=0,this.nodes.forEach(C8),this.nodes.forEach(M8),this.nodes.forEach(O8),this.nodes.forEach(A8),b8(Rs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new w8)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new G_),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=T8(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=x8(f,250),nh.hasAnimatedSinceResize&&(nh.hasAnimatedSinceResize=!1,this.nodes.forEach(oS))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||U8,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=u.getProps(),_=!this.targetLayout||!CR(this.targetLayout,g)||m,T=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||f&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,T);const P={...$_(v,"layout"),onPlay:x,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else f||oS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,si(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(j8),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(sS);return}this.isUpdating||this.nodes.forEach(D8),this.isUpdating=!1,this.nodes.forEach(N8),this.nodes.forEach(P8),this.nodes.forEach(I8),this.clearAllSnapshots();const a=performance.now();jt.delta=ss(0,1e3/60,a-jt.timestamp),jt.timestamp=a,jt.isProcessing=!0,Km.update.process(jt),Km.preRender.process(jt),Km.render.process(jt),jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(R8),this.sharedNodes.forEach(L8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Re.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Re.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!IR(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||As(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),B8(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return rt();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(bi(a.x,l.offset.x),bi(a.y,l.offset.y)),a}removeElementScroll(o){const a=rt();En(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){En(a,o);const{scroll:f}=this.root;f&&(bi(a.x,-f.offset.x),bi(a.y,-f.offset.y))}bi(a.x,u.offset.x),bi(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=rt();En(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Xo(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),As(u.latestValues)&&Xo(l,u.latestValues)}return As(this.latestValues)&&Xo(l,this.latestValues),l}removeTransform(o){const a=rt();En(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!As(c.latestValues))continue;h0(c.latestValues)&&c.updateSnapshot();const u=rt(),h=c.measurePageBox();En(u,h),ZT(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return As(this.latestValues)&&ZT(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=jt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rt(),this.relativeTargetOrigin=rt(),ec(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),En(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=rt(),this.targetWithTransforms=rt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):En(this.target,this.layout.layoutBox),bR(this.target,this.targetDelta)):En(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rt(),this.relativeTargetOrigin=rt(),ec(this.relativeTargetOrigin,this.target,m.target),En(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Rs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||h0(this.parent.latestValues)||xR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===jt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;En(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;XW(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=Yo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Yo(),this.projectionDeltaWithTransform=Yo());const v=this.projectionTransform;Zl(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=nS(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Rs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=Yo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=rt(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=m!==g,x=this.getStack(),w=!x||x.members.length<=1,_=!!(v&&!w&&this.options.crossfade===!0&&!this.path.some(F8));this.animationProgress=0;let T;this.mixTargetDelta=P=>{const A=P/1e3;aS(h.x,o.x,A),aS(h.y,o.y,A),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ec(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),V8(this.relativeTarget,this.relativeTargetOrigin,f,A),T&&y8(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=rt()),En(T,this.relativeTarget)),v&&(this.animationValues=u,d8(u,c,this.latestValues,A,_,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(si(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Re.update(()=>{nh.hasAnimatedSinceResize=!0,this.currentAnimation=S8(0,iS,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&RR(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||rt();const h=xn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=xn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}En(a,l),Xo(a,u),Zl(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new v8),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<rS.length;u++){const h="rotate"+rS[u];l[h]&&(c[h]=l[h],o.setStaticValue(h,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return k8;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=th(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=th(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!As(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=nS(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:m,y:g}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in Zh){if(f[v]===void 0)continue;const{correct:x,applyTo:w}=Zh[v],_=c.transform==="none"?f[v]:x(f[v],h);if(w){const T=w.length;for(let P=0;P<T;P++)c[w[P]]=_}else c[v]=_}return this.options.layoutId&&(c.pointerEvents=h===this?th(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(sS),this.root.sharedNodes.clear()}}}function P8(t){t.updateLayout()}function I8(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?In(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],m=xn(f);f.min=r[h].min,f.max=f.min+m}):RR(s,n.layoutBox,r)&&In(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],m=xn(r[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=Yo();Zl(a,r,n.layoutBox);const l=Yo();o?Zl(l,t.applyTransform(i,!0),n.measuredBox):Zl(l,r,n.layoutBox);const c=!IR(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const g=rt();ec(g,n.layoutBox,f.layoutBox);const v=rt();ec(v,r,m.layoutBox),CR(g,v)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function C8(t){Rs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function A8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function R8(t){t.clearSnapshot()}function sS(t){t.clearMeasurements()}function D8(t){t.isLayoutDirty=!1}function N8(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function oS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function M8(t){t.resolveTargetDelta()}function O8(t){t.calcProjection()}function j8(t){t.resetRotation()}function L8(t){t.removeLeadSnapshot()}function aS(t,e,n){t.translate=Be(e.translate,0,n),t.scale=Be(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function lS(t,e,n,r){t.min=Be(e.min,n.min,r),t.max=Be(e.max,n.max,r)}function V8(t,e,n,r){lS(t.x,e.x,n.x,r),lS(t.y,e.y,n.y,r)}function F8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const U8={duration:.45,ease:[.4,0,.1,1]},cS=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),uS=cS("applewebkit/")&&!cS("chrome/")?Math.round:Je;function dS(t){t.min=uS(t.min),t.max=uS(t.max)}function B8(t){dS(t.x),dS(t.y)}function RR(t,e,n){return t==="position"||t==="preserve-aspect"&&!u0(tS(e),tS(n),.2)}const z8=AR({attachResizeListener:(t,e)=>zr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sg={current:void 0},DR=AR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sg.current){const t=new z8({});t.mount(window),t.setOptions({layoutScroll:!0}),sg.current=t}return sg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),$8={pan:{Feature:s8},drag:{Feature:i8,ProjectionNode:DR,MeasureLayout:kR}},W8=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function H8(t){const e=W8.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function p0(t,e,n=1){const[r,i]=H8(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return pR(o)?parseFloat(o):o}else return r0(i)?p0(i,e,n+1):i}function q8(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!r0(s))return;const o=p0(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!r0(s))continue;const o=p0(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const G8=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),NR=t=>G8.has(t),K8=t=>Object.keys(t).some(NR),hS=t=>t===wo||t===te,fS=(t,e)=>parseFloat(t.split(", ")[e]),pS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return fS(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?fS(s[1],t):0}},Q8=new Set(["x","y","z"]),Y8=xu.filter(t=>!Q8.has(t));function X8(t){const e=[];return Y8.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ca={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:pS(4,13),y:pS(5,14)};Ca.translateX=Ca.x;Ca.translateY=Ca.y;const J8=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Ca[c](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),t[c]=Ca[c](l,s)}),t},Z8=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(NR);let s=[],o=!1;const a=[];if(i.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let u=n[l],h=fl(u);const f=e[l];let m;if(tf(f)){const g=f.length,v=f[0]===null?1:0;u=f[v],h=fl(u);for(let x=v;x<g&&f[x]!==null;x++)m?V_(fl(f[x])===m):m=fl(f[x])}else m=fl(f);if(h!==m)if(hS(h)&&hS(m)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&m===te&&(e[l]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(u===0||f===0)?u===0?c.set(m.transform(u)):e[l]=h.transform(f):(o||(s=X8(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=J8(e,t,a);return s.length&&s.forEach(([u,h])=>{t.getValue(u).set(h)}),t.render(),yp&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function e7(t,e,n,r){return K8(e)?Z8(t,e,n,r):{target:e,transitionEnd:r}}const t7=(t,e,n,r)=>{const i=q8(t,e,r);return e=i.target,r=i.transitionEnd,e7(t,e,n,r)},m0={current:null},MR={current:!1};function n7(){if(MR.current=!0,!!yp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>m0.current=t.matches;t.addListener(e),e()}else m0.current=!1}function r7(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(hn(s))t.addValue(i,s),of(r)&&r.add(i);else if(hn(o))t.addValue(i,Ia(s,{owner:t})),of(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,Ia(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const mS=new WeakMap,OR=Object.keys(Fc),i7=OR.length,gS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],s7=C_.length;class o7{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Re.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=_p(n),this.isVariantNode=_2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const h in u){const f=u[h];a[h]!==void 0&&hn(f)&&(f.set(a[h],!1),of(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,mS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),MR.current||n7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:m0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){mS.delete(this.current),this.projection&&this.projection.unmount(),si(this.notifyUpdate),si(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=_o.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Re.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<i7;l++){const c=OR[l],{isEnabled:u,Feature:h,ProjectionNode:f,MeasureLayout:m}=Fc[c];f&&(o=f),u(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:m}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||h&&Ko(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<gS.length;r++){const i=gS[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=r7(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<s7;r++){const i=C_[r],s=this.props[i];(Vc(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ia(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=L_(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!hn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new G_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class jR extends o7{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=TW(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){xW(this,r,o);const a=t7(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function a7(t){return window.getComputedStyle(t)}class l7 extends jR{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(_o.has(n)){const r=z_(n);return r&&r.default||0}else{const r=a7(e),i=(T2(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return TR(e,n)}build(e,n,r,i){D_(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return j_(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;hn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){C2(e,n,r,i)}}class c7 extends jR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(_o.has(n)){const r=z_(n);return r&&r.default||0}return n=A2.has(n)?n:P_(n),e.getAttribute(n)}measureInstanceViewportBox(){return rt()}scrapeMotionValuesFromProps(e,n){return D2(e,n)}build(e,n,r,i){M_(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){R2(e,n,r,i)}mount(e){this.isSVGTag=O_(e.tagName),super.mount(e)}}const u7=(t,e)=>R_(t)?new c7(e,{enableHardwareAcceleration:!1}):new l7(e,{enableHardwareAcceleration:!0}),d7={layout:{ProjectionNode:DR,MeasureLayout:kR}},h7={...VW,...i$,...$8,...d7},ve=f9((t,e)=>H9(t,e,h7,u7));function LR(){const t=N.useRef(!1);return E_(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function f7(){const t=LR(),[e,n]=N.useState(0),r=N.useCallback(()=>{t.current&&n(e+1)},[e]);return[N.useCallback(()=>Re.postRender(r),[r]),e]}class p7 extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function m7({children:t,isPresent:e}){const n=N.useId(),r=N.useRef(null),i=N.useRef({width:0,height:0,top:0,left:0});return N.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),N.createElement(p7,{isPresent:e,childRef:r,sizeRef:i},N.cloneElement(t,{ref:r}))}const og=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=N2(g7),l=N.useId(),c=N.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u=>{a.set(u,!0);for(const h of a.values())if(!h)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),s?void 0:[n]);return N.useMemo(()=>{a.forEach((u,h)=>a.set(h,!1))},[n]),N.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=N.createElement(m7,{isPresent:n},t)),N.createElement(gp.Provider,{value:c},t)};function g7(){return new Map}function y7(t){return N.useEffect(()=>()=>t(),[])}const Ds=t=>t.key||"";function v7(t,e){t.forEach(n=>{const r=Ds(n);e.set(r,n)})}function _7(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const oi=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=N.useContext(A_).forceRender||f7()[0],l=LR(),c=_7(t);let u=c;const h=N.useRef(new Map).current,f=N.useRef(u),m=N.useRef(new Map).current,g=N.useRef(!0);if(E_(()=>{g.current=!1,v7(c,m),f.current=u}),y7(()=>{g.current=!0,m.clear(),h.clear()}),g.current)return N.createElement(N.Fragment,null,u.map(_=>N.createElement(og,{key:Ds(_),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},_)));u=[...u];const v=f.current.map(Ds),x=c.map(Ds),w=v.length;for(let _=0;_<w;_++){const T=v[_];x.indexOf(T)===-1&&!h.has(T)&&h.set(T,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((_,T)=>{if(x.indexOf(T)!==-1)return;const P=m.get(T);if(!P)return;const A=v.indexOf(T);let O=_;if(!O){const E=()=>{h.delete(T);const S=Array.from(m.keys()).filter(k=>!x.includes(k));if(S.forEach(k=>m.delete(k)),f.current=c.filter(k=>{const C=Ds(k);return C===T||S.includes(C)}),!h.size){if(l.current===!1)return;a(),r&&r()}};O=N.createElement(og,{key:Ds(P),isPresent:!1,onExitComplete:E,custom:e,presenceAffectsLayout:s,mode:o},P),h.set(T,O)}u.splice(A,0,O)}),u=u.map(_=>{const T=_.key;return h.has(T)?_:N.createElement(og,{key:Ds(_),isPresent:!0,presenceAffectsLayout:s,mode:o},_)}),N.createElement(N.Fragment,null,h.size?u:u.map(_=>N.cloneElement(_)))};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var w7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ne=(t,e)=>{const n=N.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>N.createElement("svg",{ref:u,...w7,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${x7(t)}`,a].join(" "),...c},[...e.map(([h,f])=>N.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=ne("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=ne("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=ne("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=ne("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=ne("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=ne("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=ne("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=ne("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=ne("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=ne("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=ne("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=ne("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=ne("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=ne("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=ne("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=ne("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=ne("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=ne("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=ne("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=ne("Scroll",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=ne("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=ne("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=ne("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ne("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=ne("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=ne("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=ne("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Rn=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString(),Q7=t=>{const e=new Date,n=new Date(t),r=n.getTime()-e.getTime(),i=Math.ceil(r/(1e3*60*60*24));return i<-1?`Il y a ${Math.abs(i)} jours`:i===-1?"Hier":i===0?"Aujourd'hui":i===1?"Demain":i<=7?`Dans ${i} jours`:n.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})},Q_=t=>t<5?"Novice":t<10?"Apprenti":t<15?"Initi":t<20?"Adepte":t<25?"Aventurier":t<30?"Explorateur":t<40?"Vtran":t<50?"Expert":t<60?"Matre":t<75?"Grand Matre":t<90?"Champion":t<100?"Hros":"Lgende",Y7=t=>{switch(t){case"low":return"#22c55e";case"medium":return"#f59e0b";case"high":return"#f97316";case"critical":return"#ef4444";default:return"#9ca3af"}},X7=t=>{const e=new Date,r=new Date(t).getTime()-e.getTime();if(r<=0)return"Expir";const i=Math.floor(r/(1e3*60*60)),s=Math.floor(i/24);if(s>0)return`${s}j ${i%24}h`;const o=Math.floor(r%(1e3*60*60)/(1e3*60));return`${i}h ${o}m`},X=(...t)=>t.filter(Boolean).join(" "),dt=({children:t,variant:e="primary",size:n="md",isLoading:r=!1,leftIcon:i,rightIcon:s,className:o,disabled:a,...l})=>{const c="inline-flex items-center justify-center font-medium rounded-2xl transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-soft hover:shadow-soft-lg",u={primary:"bg-gradient-to-r from-primary-400 to-primary-500 text-white hover:from-primary-500 hover:to-primary-600 focus:ring-primary-400",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 text-gray-800 dark:text-gray-200 hover:from-gray-200 hover:to-gray-300 dark:hover:from-gray-600 dark:hover:to-gray-500 focus:ring-gray-400",danger:"bg-gradient-to-r from-red-400 to-red-500 text-white hover:from-red-500 hover:to-red-600 focus:ring-red-400",success:"bg-gradient-to-r from-green-400 to-green-500 text-white hover:from-green-500 hover:to-green-600 focus:ring-green-400",game:"bg-gradient-to-r from-teal-400 via-cyan-400 to-blue-400 text-white hover:from-teal-500 hover:via-cyan-500 hover:to-blue-500 shadow-lg hover:shadow-xl",ghost:"bg-transparent hover:bg-gradient-to-r hover:from-gray-50 hover:to-gray-100 dark:hover:from-gray-800 dark:hover:to-gray-700 text-gray-600 dark:text-gray-400",outline:"bg-transparent border-2 border-primary-300 dark:border-primary-600 text-primary-600 dark:text-primary-300 hover:bg-gradient-to-r hover:from-primary-50 hover:to-primary-100 dark:hover:from-primary-900/30 dark:hover:to-primary-800/30 focus:ring-primary-400"},h={sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-4 py-2 text-base gap-2",lg:"px-6 py-3 text-lg gap-2.5"};return p.jsx("button",{className:X(c,u[e],h[n],o),disabled:a||r,...l,children:r?p.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):p.jsxs(p.Fragment,{children:[i&&p.jsx("span",{className:"flex-shrink-0",children:i}),t,s&&p.jsx("span",{className:"flex-shrink-0",children:s})]})})},ot=({children:t,className:e,variant:n="default",hoverable:r=!1,onClick:i})=>{const s={default:"bg-white dark:bg-gray-800/50 border-2 border-teal-100/50 dark:border-teal-900/30 backdrop-blur-sm",game:"bg-gradient-to-br from-white via-teal-50/30 to-cyan-50/30 dark:from-gray-800/50 dark:via-teal-900/20 dark:to-cyan-900/20 border-2 border-teal-100/50 dark:border-teal-900/30 backdrop-blur-sm",glass:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-md border-2 border-teal-200/30 dark:border-teal-700/30"},o=i?ve.button:ve.div;return p.jsx(o,{className:X("rounded-3xl shadow-soft overflow-hidden",s[n],r&&"hover:shadow-soft-lg transition-shadow duration-200 cursor-pointer",i&&"text-left w-full",e),onClick:i,children:t})},lt=({icon:t,label:e,value:n,color:r="primary",trend:i})=>p.jsx(ot,{className:"p-3 sm:p-4 hover:shadow-soft-lg transition-all duration-300 hover:-translate-y-1",hoverable:!0,children:p.jsxs("div",{className:"flex items-center gap-2 sm:gap-2 sm:gap-4",children:[p.jsx("div",{className:X("w-10 h-10 sm:w-12 sm:h-12 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-soft",`bg-${r}-100 dark:bg-${r}-900/30`),children:t}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 truncate",children:e}),p.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 dark:text-white truncate",children:n})]}),i&&p.jsxs("div",{className:X("px-2 py-1 rounded-full text-sm font-medium shadow-sm",i.isPositive?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 dark:from-green-900/30 dark:to-emerald-900/30 dark:text-green-400":"bg-gradient-to-r from-red-100 to-rose-100 text-red-700 dark:from-red-900/30 dark:to-rose-900/30 dark:text-red-400"),children:[i.isPositive?"+":"",i.value,"%"]})]})}),J7=()=>{const[t,e]=N.useState(!1),[n,r]=N.useState(null),{signInWithGoogle:i,signInDemo:s}=pe(),o=async()=>{r(null),e(!0);try{await i()}catch(l){r(l.message||"chec de la connexion Google")}finally{e(!1)}},a=async()=>{r(null),e(!0);try{await s()}catch(l){r(l.message||"chec du mode dmo")}finally{e(!1)}};return p.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-900 via-cyan-900 to-gray-900 p-4",children:[p.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[p.jsx("div",{className:"absolute w-96 h-96 -top-48 -left-48 bg-teal-500/20 rounded-full blur-3xl"}),p.jsx("div",{className:"absolute w-96 h-96 -bottom-48 -right-48 bg-cyan-500/20 rounded-full blur-3xl"})]}),p.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative z-10 w-full max-w-sm",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-3xl bg-gradient-to-br from-teal-400 via-cyan-400 to-blue-400 mb-4 shadow-soft-lg",children:p.jsx(lo,{className:"w-10 h-10 text-white"})}),p.jsx("h1",{className:"text-3xl font-bold text-white",children:"Questify "}),p.jsx("p",{className:"text-gray-300 mt-2",children:"Transformez vos tches en aventure"})]}),p.jsxs(ot,{className:"p-6",children:[n&&p.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-xl text-sm",children:[" ",n]}),p.jsx(dt,{type:"button",variant:"secondary",className:"w-full mb-4",onClick:o,isLoading:t,leftIcon:p.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),children:"Continuer avec Google"}),p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-3 bg-white dark:bg-gray-800 text-gray-500",children:"ou"})})]}),p.jsx(dt,{type:"button",variant:"outline",className:"w-full",onClick:a,isLoading:t,leftIcon:p.jsx(R7,{className:"w-5 h-5"}),children:"Mode Dmo (sans compte)"}),p.jsx("p",{className:"mt-4 text-xs text-center text-gray-400",children:"Mode dmo : donnes stockes localement sur cet appareil"})]}),p.jsx("p",{className:"mt-6 text-center text-xs text-gray-500",children:"Application rserve aux amis "})]})]})},Y_=({config:t,size:e="md",showLevel:n=!1,level:r,className:i})=>{const s={sm:"w-8 h-8 text-lg",md:"w-12 h-12 text-2xl",lg:"w-16 h-16 text-3xl",xl:"w-24 h-24 text-5xl"},o={sm:"w-4 h-4 text-[8px]",md:"w-5 h-5 text-[10px]",lg:"w-6 h-6 text-xs",xl:"w-8 h-8 text-sm"},l=t||{baseColor:"#6366f1",icon:""};return p.jsxs("div",{className:X("relative",i),children:[p.jsxs("div",{className:X("rounded-full flex items-center justify-center","ring-2 ring-white dark:ring-gray-800 shadow-lg",s[e]),style:{backgroundColor:l.baseColor},children:[p.jsx("span",{children:l.icon}),l.frame&&p.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-yellow-400"})]}),n&&r&&p.jsx("div",{className:X("absolute -bottom-1 -right-1 rounded-full","bg-gradient-to-r from-teal-500 to-cyan-500","flex items-center justify-center font-bold text-white","ring-2 ring-white dark:ring-gray-800",o[e]),children:r})]})},Z7=({selected:t,onSelect:e})=>{const n=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];return p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Icne"}),p.jsx("div",{className:"grid grid-cols-8 gap-2",children:n.map(r=>p.jsx("button",{onClick:()=>e(r),className:X("w-10 h-10 rounded-lg flex items-center justify-center text-xl","hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",t===r&&"ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/30"),children:r},r))})]})})},$c=({value:t,max:e=100,color:n="primary",size:r="md",showLabel:i=!1,animated:s=!0,glow:o=!1})=>{const a=Math.min(t/e*100,100),l={primary:"from-teal-400 via-cyan-400 to-blue-400",xp:"from-green-400 via-emerald-400 to-teal-400",health:"from-red-400 via-rose-400 to-pink-500",mana:"from-blue-400 via-indigo-400 to-purple-400",gold:"from-yellow-400 via-amber-400 to-orange-400"},c={primary:"bg-gradient-to-r from-teal-100 to-cyan-100 dark:from-teal-900/30 dark:to-cyan-900/30",xp:"bg-gradient-to-r from-green-100 to-teal-100 dark:from-green-900/30 dark:to-teal-900/30",health:"bg-gradient-to-r from-red-100 to-pink-100 dark:from-red-900/30 dark:to-pink-900/30",mana:"bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30",gold:"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30"},u={sm:"h-2",md:"h-3.5",lg:"h-5"};return p.jsxs("div",{className:"w-full",children:[p.jsx("div",{className:X("w-full rounded-full overflow-hidden relative",c[n],u[r],"ring-2 ring-purple-200/50 dark:ring-purple-800/30 shadow-sm"),children:p.jsx(ve.div,{className:X("h-full rounded-full bg-gradient-to-r",l[n],o&&"shadow-lg"),initial:s?{width:0}:void 0,animate:{width:`${a}%`},transition:{duration:.5,ease:"easeOut"},children:s&&p.jsx("div",{className:"w-full h-full shimmer"})})}),i&&p.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500 dark:text-gray-400",children:[p.jsx("span",{children:t}),p.jsx("span",{children:e})]})]})},WR=({currentXP:t,xpToNextLevel:e,level:n,showLevel:r=!0})=>{const i=t/e*100;return p.jsxs("div",{className:"w-full",children:[r&&p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Niveau ",n]}),p.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t," / ",e," XP"]})]}),p.jsxs("div",{className:"relative",children:[p.jsx($c,{value:t,max:e,color:"xp",size:"md",animated:!0,glow:!0}),p.jsx(ve.div,{className:"absolute right-0 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 flex items-center justify-center text-xs font-bold text-white shadow-lg",style:{right:`${100-i}%`},animate:{boxShadow:["0 0 10px rgba(34, 197, 94, 0.5)","0 0 20px rgba(34, 197, 94, 0.8)","0 0 10px rgba(34, 197, 94, 0.5)"]},transition:{duration:2,repeat:1/0},children:""})]})]})},la=({children:t,variant:e="default",rarity:n,size:r="md",dot:i=!1})=>{const s={default:"bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-600",primary:"bg-gradient-to-r from-primary-100 to-primary-200 dark:from-primary-900/40 dark:to-primary-800/40 text-primary-700 dark:text-primary-200 border border-primary-200 dark:border-primary-800",success:"bg-gradient-to-r from-green-100 to-green-200 dark:from-green-900/40 dark:to-green-800/40 text-green-700 dark:text-green-200 border border-green-200 dark:border-green-800",warning:"bg-gradient-to-r from-yellow-100 to-amber-200 dark:from-yellow-900/40 dark:to-amber-800/40 text-yellow-700 dark:text-yellow-200 border border-yellow-200 dark:border-yellow-800",danger:"bg-gradient-to-r from-red-100 to-red-200 dark:from-red-900/40 dark:to-red-800/40 text-red-700 dark:text-red-200 border border-red-200 dark:border-red-800",info:"bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-900/40 dark:to-blue-800/40 text-blue-700 dark:text-blue-200 border border-blue-200 dark:border-blue-800"},o={common:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 dark:from-gray-700 dark:to-gray-600 dark:text-gray-200 border border-gray-300",rare:"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-800 dark:from-blue-900 dark:to-cyan-900 dark:text-blue-200 ring-2 ring-blue-400 border border-blue-300",epic:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 dark:from-purple-900 dark:to-pink-900 dark:text-purple-200 ring-2 ring-purple-400 border border-purple-300",legendary:"bg-gradient-to-r from-yellow-300 via-amber-400 to-orange-400 text-white ring-2 ring-yellow-500 border border-yellow-400 shadow-lg"},a={sm:"px-2.5 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"};return p.jsxs("span",{className:X("inline-flex items-center gap-1 rounded-full font-medium shadow-sm",a[r],n?o[n]:s[e]),children:[i&&p.jsx("span",{className:X("w-1.5 h-1.5 rounded-full",e==="success"&&"bg-green-500",e==="warning"&&"bg-yellow-500",e==="danger"&&"bg-red-500",e==="info"&&"bg-blue-500",e==="primary"&&"bg-primary-500",e==="default"&&"bg-gray-500")}),t]})},eH=({priority:t})=>{const e={none:{label:"Aucune",variant:"default"},low:{label:"Basse",variant:"success"},medium:{label:"Moyenne",variant:"warning"},high:{label:"Haute",variant:"danger"},critical:{label:"Critique",variant:"danger"}},{label:n,variant:r}=e[t];return p.jsx(la,{variant:r,size:"sm",dot:!0,children:n})},tH=({difficulty:t})=>{const e={trivial:{label:"Trivial",rarity:"common"},easy:{label:"Facile",rarity:"common"},medium:{label:"Moyen",rarity:"rare"},hard:{label:"Difficile",rarity:"rare"},epic:{label:"pique",rarity:"epic"},legendary:{label:"Lgendaire",rarity:"legendary"}},{label:n,rarity:r}=e[t];return p.jsx(la,{rarity:r,size:"sm",children:n})},X_=({amount:t,bonus:e})=>p.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-sm font-medium",children:[p.jsx("span",{children:""}),p.jsx("span",{children:t}),e&&e>0&&p.jsxs("span",{className:"text-xs text-green-500",children:["+",e]}),p.jsx("span",{className:"text-xs",children:"XP"})]}),J_=({amount:t})=>p.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 text-sm font-medium",children:[p.jsx("span",{children:""}),p.jsx("span",{children:t})]}),nH=({streak:t})=>t===0?null:p.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 text-sm font-medium",children:[p.jsx("span",{className:"fire-animation",children:""}),p.jsx("span",{children:t})]}),HR=[{path:"/",icon:D7,label:"Accueil"},{path:"/tasks",icon:FR,label:"Tches"},{path:"/quests",icon:v0,label:"Qutes"},{path:"/achievements",icon:_r,label:"Achievements"},{path:"/stats",icon:VR,label:"Statistiques"}],rH=()=>{po();const{user:t,gameStats:e,signOut:n}=pe(),{sidebarOpen:r,toggleSidebar:i,isMobile:s}=rr();if(!t||!e)return null;const o=async()=>{await n()};return p.jsxs(p.Fragment,{children:[p.jsx(oi,{children:s&&r&&p.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:i})}),p.jsxs(ve.aside,{initial:!1,animate:{width:r?280:80,x:s&&!r?-280:0},transition:{duration:.3,ease:[.4,0,.2,1]},style:{width:r?"280px":"80px"},className:X("fixed left-0 top-0 h-screen z-50","bg-gradient-to-b from-white via-teal-50/30 to-cyan-50/30 dark:from-gray-900 dark:via-teal-900/10 dark:to-cyan-900/10","border-r-2 border-teal-100 dark:border-teal-900/30","overflow-hidden backdrop-blur-sm",s&&!r?"hidden":"flex flex-col",s&&r&&"shadow-soft-lg"),children:[p.jsxs("div",{className:"p-4 flex items-center justify-between border-b-2 border-teal-100 dark:border-teal-900/30 flex-shrink-0",children:[p.jsx(oi,{mode:"wait",children:r&&p.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-br from-teal-400 via-cyan-400 to-blue-400 flex items-center justify-center shadow-soft",children:p.jsx(lo,{className:"w-6 h-6 text-white"})}),p.jsx("span",{className:"font-bold text-xl gradient-text",children:"Questify "})]})}),p.jsx("button",{onClick:i,className:"p-2 rounded-2xl hover:bg-gradient-to-r hover:from-teal-50 hover:to-cyan-50 dark:hover:from-teal-900/20 dark:hover:to-cyan-900/20 transition-all duration-200",children:r?p.jsx(P7,{className:"w-5 h-5"}):p.jsx(O7,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:X("p-4 border-b-2 border-teal-100 dark:border-teal-900/30 flex-shrink-0",!r&&"flex justify-center"),children:[p.jsxs("div",{className:X("flex items-center gap-3",!r&&"flex-col"),children:[p.jsx(Y_,{config:t.avatar,size:r?"md":"sm",showLevel:!0,level:e.level}),r&&p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"font-medium truncate",children:t.username}),p.jsx("div",{className:"flex items-center gap-2 mt-1",children:p.jsx(nH,{streak:e.currentStreak})})]})]}),r&&p.jsx("div",{className:"mt-3",children:p.jsx(WR,{currentXP:e.currentXP,xpToNextLevel:e.xpToNextLevel,level:e.level,showLevel:!1})})]}),p.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:HR.map(a=>p.jsxs(wy,{to:a.path,className:({isActive:l})=>X("flex items-center gap-3 px-3 py-2.5 rounded-2xl transition-all duration-200","hover:bg-gradient-to-r hover:from-teal-50 hover:to-cyan-50 dark:hover:from-teal-900/20 dark:hover:to-cyan-900/20",l&&"bg-gradient-to-r from-primary-100 to-cyan-100 dark:from-primary-900/30 dark:to-cyan-900/30 text-primary-600 dark:text-primary-400 shadow-sm",!r&&"justify-center"),children:[p.jsx(a.icon,{className:"w-5 h-5 flex-shrink-0"}),r&&p.jsx("span",{children:a.label})]},a.path))}),p.jsxs("div",{className:"p-3 border-t border-gray-200 dark:border-gray-800 space-y-1 flex-shrink-0",children:[p.jsxs(wy,{to:"/settings",className:X("flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors","hover:bg-gray-100 dark:hover:bg-gray-800",!r&&"justify-center"),children:[p.jsx(zR,{className:"w-5 h-5"}),r&&p.jsx("span",{children:"Paramtres"})]}),p.jsxs("button",{onClick:o,className:X("w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors","hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400",!r&&"justify-center"),children:[p.jsx(UR,{className:"w-5 h-5"}),r&&p.jsx("span",{children:"Dconnexion"})]})]})]})]})},iH=()=>{const{isMobile:t}=rr();return t?p.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white/95 dark:bg-gray-900/95 border-t border-gray-200 dark:border-gray-800 backdrop-blur-lg safe-area-bottom",children:p.jsx("div",{className:"flex justify-around items-center h-16 px-2 pb-safe",children:HR.slice(0,5).map(e=>p.jsxs(wy,{to:e.path,className:({isActive:n})=>X("flex flex-col items-center justify-center flex-1 h-full py-2 rounded-xl mx-0.5 transition-all duration-200 touch-manipulation","text-gray-500 dark:text-gray-400",n&&"text-primary-500 bg-primary-50 dark:bg-primary-900/20"),children:[p.jsx(e.icon,{className:"w-5 h-5"}),p.jsx("span",{className:"text-[10px] mt-1 font-medium",children:e.label})]},e.path))})}):null};var sH={easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},oH=sH;function aH(t){return t*Math.PI/180}function pn(t,e){return t+Math.random()*(e-t)}function lH(t,e){return Math.floor(t+Math.random()*(e-t+1))}var nc;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(nc||(nc={}));var Ti;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Ti||(Ti={}));const cH=1e3/60;class uH{constructor(e,n,r,i){this.getOptions=n;const{colors:s,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=pn(5,20),this.h=pn(5,20),this.radius=pn(5,10),this.vx=typeof o=="number"?pn(-o,o):pn(o.min,o.max),this.vy=typeof a=="number"?pn(-a,0):pn(a.min,a.max),this.shape=lH(0,2),this.angle=aH(pn(0,360)),this.angularSpin=pn(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=pn(0,1),this.rotationDirection=pn(0,1)?Ti.Positive:Ti.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:s,drawShape:o}=this.getOptions(),a=e/cH;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=i**a,this.vy*=i**a,this.rotateY>=1&&this.rotationDirection===Ti.Positive?this.rotationDirection=Ti.Negative:this.rotateY<=-1&&this.rotationDirection===Ti.Negative&&(this.rotationDirection=Ti.Positive);const l=.1*this.rotationDirection*a;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case nc.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case nc.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case nc.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class dH{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=pn(this.x,this.w+this.x),s=pn(this.y,this.h+this.y);return new uH(this.context,this.getOptions,i,s)},this.animate=i=>{const{canvas:s,context:o,particlesGenerated:a,lastNumberOfPieces:l}=this,{run:c,recycle:u,numberOfPieces:h,debug:f,tweenFunction:m,tweenDuration:g}=this.getOptions();if(!c)return!1;const v=this.particles.length,x=u?v:a;if(x<h){l!==h&&(this.tweenProgress=0,this.tweenFrom=x,this.lastNumberOfPieces=h),this.tweenProgress=Math.min(g,Math.max(0,this.tweenProgress+i));const w=m(this.tweenProgress,this.tweenFrom,h,g),_=Math.round(w-x);for(let T=0;T<_;T++)this.particles.push(this.getParticle());this.particlesGenerated+=_}f&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${v}`,s.width-10,s.height-20));for(let w=this.particles.length-1;w>=0;w--){const _=this.particles[w];_.update(i),(_.y>s.height||_.y<-100||_.x>s.width+100||_.x<-100)&&(u&&x<=h?this.particles[w]=this.getParticle():this.removeParticleAt(w))}return v>0||x<h},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const Z_={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:oH.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class hH{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const s={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...s,...Z_,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:s,onConfettiComplete:o,frameRate:a},canvas:l,context:c}=this,u=Math.min(i-this.lastFrameTime,50);if(a&&u<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(a?u%a:0),s&&(c.fillStyle="white",c.clearRect(0,0,l.width,l.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new dH(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,s;const n=(i=this._options)==null?void 0:i.run,r=(s=this._options)==null?void 0:s.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const fH=dn.createRef();class ew extends dn.Component{constructor(e){super(e),this.canvas=dn.createRef(),this.canvas=e.canvasRef||fH}componentDidMount(){if(this.canvas.current){const e=ag(this.props)[0];this.confetti=new hH(this.canvas.current,e)}}componentDidUpdate(){const e=ag(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=ag(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return p.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}ew.defaultProps={...Z_};ew.displayName="ReactConfetti";function ag(t){const e={},n={},r={},i=[...Object.keys(Z_),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const o in t){const a=t[o];i.includes(o)?e[o]=a:s.includes(o)?s[o]=a:r[o]=a}return[e,r,n]}const pH=dn.forwardRef((t,e)=>p.jsx(ew,{canvasRef:e,...t})),mH=[{id:"tasks",name:"Tches",icon:""},{id:"streaks",name:"Sries",icon:""},{id:"quests",name:"Qutes",icon:""},{id:"level",name:"Niveau",icon:""},{id:"social",name:"Social",icon:""},{id:"special",name:"Spcial",icon:""}],Nr=[{id:"first_task",name:"Premier Pas",description:"Compltez votre premire tche",icon:"",rarity:"common",category:"tasks",xpReward:10,coinReward:5,requirement:{type:"tasks_completed",value:1}},{id:"task_10",name:"Dbutant",description:"Compltez 10 tches",icon:"",rarity:"common",category:"tasks",xpReward:25,coinReward:10,requirement:{type:"tasks_completed",value:10}},{id:"task_50",name:"Travailleur",description:"Compltez 50 tches",icon:"",rarity:"rare",category:"tasks",xpReward:100,coinReward:50,requirement:{type:"tasks_completed",value:50}},{id:"task_100",name:"Productif",description:"Compltez 100 tches",icon:"",rarity:"rare",category:"tasks",xpReward:200,coinReward:100,requirement:{type:"tasks_completed",value:100}},{id:"task_500",name:"Machine de Guerre",description:"Compltez 500 tches",icon:"",rarity:"epic",category:"tasks",xpReward:500,coinReward:250,requirement:{type:"tasks_completed",value:500}},{id:"task_1000",name:"Lgende Vivante",description:"Compltez 1000 tches",icon:"",rarity:"legendary",category:"tasks",xpReward:1e3,coinReward:500,requirement:{type:"tasks_completed",value:1e3}},{id:"streak_3",name:"Rgularit",description:"Maintenez un streak de 3 jours",icon:"",rarity:"common",category:"streaks",xpReward:30,coinReward:15,requirement:{type:"streak",value:3}},{id:"streak_7",name:"Semaine Parfaite",description:"Maintenez un streak de 7 jours",icon:"",rarity:"common",category:"streaks",xpReward:75,coinReward:35,requirement:{type:"streak",value:7}},{id:"streak_14",name:"Persvrant",description:"Maintenez un streak de 14 jours",icon:"",rarity:"rare",category:"streaks",xpReward:150,coinReward:75,requirement:{type:"streak",value:14}},{id:"streak_30",name:"Mois Lgendaire",description:"Maintenez un streak de 30 jours",icon:"",rarity:"epic",category:"streaks",xpReward:300,coinReward:150,requirement:{type:"streak",value:30}},{id:"streak_100",name:"Centurion",description:"Maintenez un streak de 100 jours",icon:"",rarity:"legendary",category:"streaks",xpReward:1e3,coinReward:500,requirement:{type:"streak",value:100}},{id:"streak_365",name:"Anne Incroyable",description:"Maintenez un streak de 365 jours",icon:"",rarity:"legendary",category:"streaks",xpReward:5e3,coinReward:2500,requirement:{type:"streak",value:365},secret:!0},{id:"level_5",name:"Apprenti",description:"Atteignez le niveau 5",icon:"",rarity:"common",category:"xp",xpReward:50,coinReward:25,requirement:{type:"level",value:5}},{id:"level_10",name:"Aventurier",description:"Atteignez le niveau 10",icon:"",rarity:"common",category:"xp",xpReward:100,coinReward:50,requirement:{type:"level",value:10}},{id:"level_25",name:"Hros",description:"Atteignez le niveau 25",icon:"",rarity:"rare",category:"xp",xpReward:250,coinReward:125,requirement:{type:"level",value:25}},{id:"level_50",name:"Champion",description:"Atteignez le niveau 50",icon:"",rarity:"epic",category:"xp",xpReward:500,coinReward:250,requirement:{type:"level",value:50}},{id:"level_100",name:"Matre Lgendaire",description:"Atteignez le niveau 100",icon:"",rarity:"legendary",category:"xp",xpReward:2e3,coinReward:1e3,requirement:{type:"level",value:100}},{id:"xp_1000",name:"Collectionneur d'XP",description:"Gagnez 1000 XP au total",icon:"",rarity:"common",category:"xp",xpReward:50,coinReward:25,requirement:{type:"total_xp",value:1e3}},{id:"xp_10000",name:"Chasseur d'XP",description:"Gagnez 10000 XP au total",icon:"",rarity:"rare",category:"xp",xpReward:200,coinReward:100,requirement:{type:"total_xp",value:1e4}},{id:"xp_100000",name:"Matre de l'XP",description:"Gagnez 100000 XP au total",icon:"",rarity:"legendary",category:"xp",xpReward:1e3,coinReward:500,requirement:{type:"total_xp",value:1e5}},{id:"first_epic",name:"Premier Dfi pique",description:"Compltez une tche pique",icon:"",rarity:"rare",category:"tasks",xpReward:100,coinReward:50,requirement:{type:"epic_tasks",value:1}},{id:"first_legendary",name:"Lgende",description:"Compltez une tche lgendaire",icon:"",rarity:"epic",category:"tasks",xpReward:250,coinReward:125,requirement:{type:"legendary_tasks",value:1}},{id:"legendary_10",name:"Chasseur de Lgendes",description:"Compltez 10 tches lgendaires",icon:"",rarity:"legendary",category:"tasks",xpReward:1e3,coinReward:500,requirement:{type:"legendary_tasks",value:10}},{id:"early_bird",name:"Lve-tt",description:"Compltez une tche avant 7h du matin",icon:"",rarity:"common",category:"time",xpReward:25,coinReward:10,requirement:{type:"early_completion",value:1}},{id:"night_owl",name:"Oiseau de Nuit",description:"Compltez une tche aprs minuit",icon:"",rarity:"common",category:"time",xpReward:25,coinReward:10,requirement:{type:"late_completion",value:1}},{id:"speed_demon",name:"clair",description:"Compltez 5 tches en moins d'une heure",icon:"",rarity:"rare",category:"time",xpReward:150,coinReward:75,requirement:{type:"fast_completion",value:5}},{id:"perfect_day",name:"Journe Parfaite",description:"Compltez toutes vos tches du jour",icon:"",rarity:"rare",category:"time",xpReward:100,coinReward:50,requirement:{type:"perfect_day",value:1}},{id:"perfect_week",name:"Semaine Parfaite",description:"Compltez toutes vos tches de la semaine",icon:"",rarity:"epic",category:"time",xpReward:500,coinReward:250,requirement:{type:"perfect_week",value:1}},{id:"category_master",name:"Spcialiste",description:"Compltez 50 tches dans une mme catgorie",icon:"",rarity:"rare",category:"categories",xpReward:150,coinReward:75,requirement:{type:"category_tasks",value:50}},{id:"well_rounded",name:"Polyvalent",description:"Compltez des tches dans toutes les catgories",icon:"",rarity:"rare",category:"categories",xpReward:200,coinReward:100,requirement:{type:"all_categories",value:1}},{id:"comeback",name:"Le Retour",description:"Reconnectez-vous aprs 7 jours d'absence",icon:"",rarity:"common",category:"special",xpReward:50,coinReward:25,requirement:{type:"comeback",value:7},secret:!0},{id:"perfectionist",name:"Perfectionniste",description:"Compltez 10 tches avec toutes les sous-tches",icon:"",rarity:"rare",category:"special",xpReward:150,coinReward:75,requirement:{type:"perfect_tasks",value:10}},{id:"overachiever",name:"Surpassement",description:"Gagnez 500 XP en une seule journe",icon:"",rarity:"epic",category:"special",xpReward:250,coinReward:125,requirement:{type:"daily_xp",value:500}},{id:"founder",name:"Fondateur",description:"Crez votre compte",icon:"",rarity:"common",category:"special",xpReward:50,coinReward:25,requirement:{type:"account_created",value:1}},{id:"collector_10",name:"Petit Collectionneur",description:"Dbloquez 10 achievements",icon:"",rarity:"common",category:"collection",xpReward:100,coinReward:50,requirement:{type:"achievements",value:10}},{id:"collector_25",name:"Grand Collectionneur",description:"Dbloquez 25 achievements",icon:"",rarity:"rare",category:"collection",xpReward:300,coinReward:150,requirement:{type:"achievements",value:25}},{id:"collector_all",name:"Collectionneur Ultime",description:"Dbloquez tous les achievements",icon:"",rarity:"legendary",category:"collection",xpReward:2e3,coinReward:1e3,requirement:{type:"achievements",value:999},secret:!0},{id:"quest_first",name:"Quteur",description:"Compltez votre premire qute",icon:"",rarity:"common",category:"special",xpReward:50,coinReward:25,requirement:{type:"quests_completed",value:1}},{id:"quest_10",name:"Aventurier Confirm",description:"Compltez 10 qutes",icon:"",rarity:"rare",category:"special",xpReward:200,coinReward:100,requirement:{type:"quests_completed",value:10}},{id:"daily_warrior",name:"Guerrier Quotidien",description:"Compltez 30 qutes journalires",icon:"",rarity:"epic",category:"special",xpReward:500,coinReward:250,requirement:{type:"daily_quests",value:30}}],vS={common:"#9ca3af",rare:"#3b82f6",epic:"#8b5cf6",legendary:"#f59e0b"},gH=t=>Nr.find(e=>e.id===t),yH=()=>{const{xpGained:t,hideGains:e}=rr();return dn.useEffect(()=>{if(t){const n=setTimeout(e,2e3);return()=>clearTimeout(n)}},[t,e]),p.jsx(oi,{children:t&&p.jsx(ve.div,{initial:{opacity:0,y:50,scale:.5},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50},className:"fixed bottom-20 right-4 z-50 pointer-events-none",children:p.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-full shadow-lg",children:[p.jsx(Sp,{className:"w-5 h-5"}),p.jsxs("span",{className:"font-bold text-lg",children:["+",t," XP"]})]})})})},vH=()=>{const{isLevelUpModalOpen:t,newLevel:e,hideLevelUp:n}=rr(),{gameStats:r}=pe(),[i,s]=dn.useState(!1);return dn.useEffect(()=>{if(t){s(!0);const o=setTimeout(()=>{s(!1),n()},5e3);return()=>clearTimeout(o)}},[t,n]),p.jsx(oi,{children:t&&p.jsxs(p.Fragment,{children:[i&&p.jsx(pH,{width:window.innerWidth,height:window.innerHeight,recycle:!1,numberOfPieces:200,gravity:.3}),p.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:n,children:p.jsxs(ve.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",stiffness:200,damping:20},className:"text-center",onClick:o=>o.stopPropagation(),children:[p.jsx(ve.div,{animate:{boxShadow:["0 0 20px rgba(251, 191, 36, 0.5)","0 0 60px rgba(251, 191, 36, 0.8)","0 0 20px rgba(251, 191, 36, 0.5)"]},transition:{duration:1.5,repeat:1/0},className:"w-32 h-32 mx-auto mb-6 rounded-full bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center",children:p.jsx(T7,{className:"w-16 h-16 text-white"})}),p.jsx(ve.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-4xl font-bold text-white mb-2",children:"LEVEL UP!"}),p.jsx(ve.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.5,type:"spring"},className:"text-6xl font-black gradient-text mb-4",children:e}),p.jsx(ve.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"text-xl text-gray-300",children:Q_(e)}),p.jsx(ve.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"mt-8 px-8 py-3 bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-bold rounded-full",onClick:n,children:"Continuer l'aventure !"})]})})]})})},_H=()=>{const{unlockedAchievement:t,hideAchievementUnlock:e}=rr(),n=t?gH(t):null;return dn.useEffect(()=>{if(t){const r=setTimeout(e,4e3);return()=>clearTimeout(r)}},[t,e]),p.jsx(oi,{children:n&&p.jsx(ve.div,{initial:{x:400,opacity:0},animate:{x:0,opacity:1},exit:{x:400,opacity:0},transition:{type:"spring",stiffness:200,damping:25},className:"fixed top-4 right-4 z-50",children:p.jsx("div",{className:"p-4 rounded-xl shadow-2xl bg-white dark:bg-gray-800 border-2",style:{borderColor:vS[n.rarity]},children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(ve.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring"},className:"w-16 h-16 rounded-xl flex items-center justify-center text-3xl",style:{backgroundColor:vS[n.rarity]+"20"},children:n.icon}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx(_r,{className:"w-5 h-5 text-yellow-500"}),p.jsx("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Achievement Dbloqu !"})]}),p.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:n.name}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n.description}),p.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[p.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600",children:[p.jsx($R,{className:"w-3 h-3"}),"+",n.xpReward," XP"]}),p.jsxs("span",{className:"text-xs text-yellow-600",children:["+",n.coinReward," "]})]})]})]})})})})},wH=()=>p.jsxs(p.Fragment,{children:[p.jsx(yH,{}),p.jsx(vH,{}),p.jsx(_H,{})]}),cf=({isOpen:t,onClose:e,title:n,children:r,size:i="md",showCloseButton:s=!0})=>{const o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-4xl"};return p.jsx(oi,{children:t&&p.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:p.jsxs("div",{className:"flex min-h-screen items-end sm:items-center justify-center sm:p-4",children:[p.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),p.jsxs(ve.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{duration:.3,type:"spring",damping:25},className:X("relative w-full bg-white dark:bg-gray-800 shadow-xl","rounded-t-3xl sm:rounded-2xl","max-h-[90vh] sm:max-h-[85vh] overflow-hidden flex flex-col",o[i]),children:[(n||s)&&p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[p.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full sm:hidden"}),n&&p.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white pt-2 sm:pt-0",children:n}),s&&p.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors touch-manipulation",children:p.jsx(K7,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),p.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:r})]})]})})})},Ai=({label:t,error:e,leftIcon:n,rightIcon:r,className:i,...s})=>p.jsxs("div",{className:"w-full",children:[t&&p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),p.jsxs("div",{className:"relative",children:[n&&p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:n}),p.jsx("input",{className:X("w-full px-4 py-2.5 rounded-2xl border-2 border-purple-200 dark:border-purple-800/30","bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-300 focus:border-primary-300","placeholder-gray-400 dark:placeholder-gray-500","transition-all duration-200 shadow-sm focus:shadow-soft",n?"pl-10":"",r?"pr-10":"",e&&"border-red-300 focus:ring-red-300",i),...s}),r&&p.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400",children:r})]}),e&&p.jsx("p",{className:"mt-1 text-sm text-red-500",children:e})]}),xH=({label:t,error:e,className:n,...r})=>p.jsxs("div",{className:"w-full",children:[t&&p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),p.jsx("textarea",{className:X("w-full px-4 py-2.5 rounded-2xl border-2 border-purple-200 dark:border-purple-800/30","bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-300 focus:border-primary-300","placeholder-gray-400 dark:placeholder-gray-500","transition-all duration-200 resize-none shadow-sm focus:shadow-soft",e&&"border-red-300 focus:ring-red-300",n),...r}),e&&p.jsx("p",{className:"mt-1 text-sm text-red-500",children:e})]}),vd=({label:t,error:e,options:n,className:r,...i})=>p.jsxs("div",{className:"w-full",children:[t&&p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),p.jsx("select",{className:X("w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","transition-colors duration-200 cursor-pointer",e&&"border-red-500 focus:ring-red-500",r),...i,children:n.map(s=>p.jsx("option",{value:s.value,children:s.label},s.value))}),e&&p.jsx("p",{className:"mt-1 text-sm text-red-500",children:e})]}),qn=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null,Ot=(t,e,n="sine",r=.3)=>{if(!qn)return;const i=qn.createOscillator(),s=qn.createGain();i.connect(s),s.connect(qn.destination),i.frequency.value=t,i.type=n,s.gain.setValueAtTime(r,qn.currentTime),s.gain.exponentialRampToValueAtTime(.01,qn.currentTime+e),i.start(qn.currentTime),i.stop(qn.currentTime+e)},bH={taskComplete:()=>{Ot(523.25,.1,"sine",.3),setTimeout(()=>Ot(659.25,.1,"sine",.3),100),setTimeout(()=>Ot(783.99,.2,"sine",.3),200)},xpGain:()=>{Ot(987.77,.05,"square",.2),setTimeout(()=>Ot(1318.51,.1,"square",.2),50)},levelUp:()=>{[523.25,659.25,783.99,1046.5].forEach((e,n)=>{setTimeout(()=>Ot(e,.2,"sine",.4),n*150)})},achievementUnlock:()=>{Ot(392,.15,"triangle",.3),setTimeout(()=>Ot(523.25,.15,"triangle",.3),150),setTimeout(()=>Ot(659.25,.15,"triangle",.3),300),setTimeout(()=>Ot(783.99,.3,"triangle",.4),450)},questComplete:()=>{[261.63,329.63,392,523.25,659.25,783.99].forEach((e,n)=>{setTimeout(()=>Ot(e,.15,"sine",.25),n*100)})},error:()=>{Ot(200,.2,"sawtooth",.2)},click:()=>{Ot(800,.05,"square",.1)},streak:()=>{Ot(349.23,.1,"triangle",.3),setTimeout(()=>Ot(440,.1,"triangle",.3),80),setTimeout(()=>Ot(523.25,.15,"triangle",.4),160)}},rc=(t,e=!0)=>{e&&qn&&(qn.state==="suspended"&&qn.resume(),bH[t]())},TH=({isOpen:t,onClose:e,editTask:n})=>{var O,E;const{addTask:r,updateTask:i,categories:s,calculateTaskRewards:o}=ys(),{user:a}=pe(),[l,c]=N.useState(!1),[u,h]=N.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",category:(n==null?void 0:n.category)||((O=s[0])==null?void 0:O.name)||"Travail",priority:(n==null?void 0:n.priority)||"medium",difficulty:(n==null?void 0:n.difficulty)||"medium",dueDate:n!=null&&n.dueDate?new Date(n.dueDate).toISOString().slice(0,16):"",estimatedTime:((E=n==null?void 0:n.estimatedTime)==null?void 0:E.toString())||"",recurrence:(n==null?void 0:n.recurrence)||"none",subtasks:(n==null?void 0:n.subtasks.map(S=>S.title))||[],tags:(n==null?void 0:n.tags.join(", "))||""}),[f,m]=N.useState(""),g=o(u.difficulty,u.priority),v=async S=>{if(S.preventDefault(),!(!u.title.trim()||!a)){c(!0);try{const k={userId:a.id,title:u.title.trim(),description:u.description.trim()||void 0,category:u.category,priority:u.priority,difficulty:u.difficulty,dueDate:u.dueDate?new Date(u.dueDate):void 0,estimatedTime:u.estimatedTime?parseInt(u.estimatedTime):void 0,recurrence:u.recurrence,subtasks:u.subtasks.map((C,D)=>({id:`subtask-${D}-${Date.now()}`,title:C,completed:!1})),tags:u.tags.split(",").map(C=>C.trim()).filter(Boolean),status:"pending",progress:0};n?await i(n.id,k):(await r(k),rc("click")),e(),x()}catch(k){console.error("Error saving task:",k)}finally{c(!1)}}},x=()=>{var S;h({title:"",description:"",category:((S=s[0])==null?void 0:S.name)||"Travail",priority:"medium",difficulty:"medium",dueDate:"",estimatedTime:"",recurrence:"none",subtasks:[],tags:""}),m("")},w=()=>{f.trim()&&(h(S=>({...S,subtasks:[...S.subtasks,f.trim()]})),m(""))},_=S=>{h(k=>({...k,subtasks:k.subtasks.filter((C,D)=>D!==S)}))},T=[{value:"low",label:" Basse"},{value:"medium",label:" Moyenne"},{value:"high",label:" Haute"},{value:"critical",label:" Critique"}],P=[{value:"trivial",label:" Trivial (5 XP)"},{value:"easy",label:" Facile (10 XP)"},{value:"medium",label:" Moyen (25 XP)"},{value:"hard",label:" Difficile (50 XP)"},{value:"epic",label:" pique (100 XP)"},{value:"legendary",label:" Lgendaire (200 XP)"}],A=[{value:"none",label:"Aucune"},{value:"daily",label:"Quotidien"},{value:"weekly",label:"Hebdomadaire"},{value:"monthly",label:"Mensuel"}];return p.jsx(cf,{isOpen:t,onClose:e,title:n?"Modifier la tche":"Nouvelle tche",size:"lg",children:p.jsxs("form",{onSubmit:v,className:"space-y-4",children:[p.jsx(Ai,{label:"Titre *",placeholder:"Que devez-vous faire ?",value:u.title,onChange:S=>h({...u,title:S.target.value}),autoFocus:!0}),p.jsx(xH,{label:"Description",placeholder:"Dtails supplmentaires...",rows:3,value:u.description,onChange:S=>h({...u,description:S.target.value})}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx(vd,{label:"Catgorie",options:s.map(S=>({value:S.name,label:`${S.icon||""} ${S.name}`})),value:u.category,onChange:S=>h({...u,category:S.target.value})}),p.jsx(Ai,{label:"Date d'chance",type:"datetime-local",value:u.dueDate,onChange:S=>h({...u,dueDate:S.target.value})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx(vd,{label:"Priorit",options:T,value:u.priority,onChange:S=>h({...u,priority:S.target.value})}),p.jsx(vd,{label:"Difficult",options:P,value:u.difficulty,onChange:S=>h({...u,difficulty:S.target.value})})]}),p.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Rcompenses estimes :"}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(X_,{amount:g.xp}),p.jsx(J_,{amount:g.coins})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx(Ai,{label:"Temps estim (minutes)",type:"number",placeholder:"30",min:"1",value:u.estimatedTime,onChange:S=>h({...u,estimatedTime:S.target.value})}),p.jsx(vd,{label:"Rcurrence",options:A,value:u.recurrence,onChange:S=>h({...u,recurrence:S.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sous-tches"}),p.jsxs("div",{className:"flex gap-2 mb-2",children:[p.jsx(Ai,{placeholder:"Ajouter une sous-tche...",value:f,onChange:S=>m(S.target.value),onKeyPress:S=>S.key==="Enter"&&(S.preventDefault(),w())}),p.jsx(dt,{type:"button",variant:"secondary",onClick:w,children:p.jsx(zc,{className:"w-4 h-4"})})]}),u.subtasks.length>0&&p.jsx("ul",{className:"space-y-1",children:u.subtasks.map((S,k)=>p.jsxs(ve.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-900 rounded",children:[p.jsx("span",{className:"text-sm",children:S}),p.jsx("button",{type:"button",onClick:()=>_(k),className:"text-red-500 hover:text-red-600",children:p.jsx(lf,{className:"w-4 h-4"})})]},k))})]}),p.jsx(Ai,{label:"Tags",placeholder:"travail, urgent, projet... (spars par des virgules)",value:u.tags,onChange:S=>h({...u,tags:S.target.value})}),p.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.jsx(dt,{type:"button",variant:"secondary",onClick:e,children:"Annuler"}),p.jsx(dt,{type:"submit",variant:"game",isLoading:l,children:n?"Enregistrer":"Crer la tche"})]})]})})},SH=()=>{const{sidebarOpen:t,isMobile:e,isTaskModalOpen:n,openTaskModal:r,closeTaskModal:i}=rr(),{user:s}=pe();return p.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 overflow-x-hidden",children:[p.jsx(rH,{}),p.jsx("main",{className:X("min-h-screen transition-all duration-200 overflow-x-hidden",!e&&t?"ml-[280px]":"",!e&&!t?"ml-20":"",e?"ml-0 pb-20":""),children:p.jsx("div",{className:"container mx-auto max-w-7xl p-4 sm:p-6 lg:p-8",children:p.jsx(qj,{})})}),p.jsx(iH,{}),p.jsx(ve.div,{initial:{scale:0},animate:{scale:1},className:X("fixed z-40",e?"bottom-20 right-4":"bottom-6 right-6"),children:p.jsx(dt,{variant:"game",className:"w-14 h-14 rounded-full shadow-lg",onClick:r,children:p.jsx(zc,{className:"w-6 h-6"})})}),p.jsx(TH,{isOpen:n,onClose:i}),p.jsx(wH,{})]})},qR=({task:t,onComplete:e,compact:n=!1})=>{const[r,i]=N.useState(!1),[s,o]=N.useState(!1),{completeTask:a,deleteTask:l,archiveTask:c,toggleSubtask:u,selectTask:h}=ys(),{showXPGain:f,showCoinsGain:m,showLevelUp:g}=rr(),v=async()=>{const P=await a(t.id);rc("taskComplete"),f(P.xpGained),m(P.coinsGained),P.leveledUp&&setTimeout(()=>{g(P.newLevel),rc("levelUp")},500),e==null||e()},x=async P=>{await u(t.id,P),rc("click")},w=t.status==="completed",_=t.dueDate&&new Date(t.dueDate)<new Date&&!w,T=t.subtasks.filter(P=>P.completed).length;return p.jsx(ve.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:p.jsxs(ot,{variant:"game",className:X("p-4 relative overflow-hidden transition-shadow duration-200 hover:shadow-soft-lg",w&&"opacity-60",_&&"border-l-4 border-l-red-500"),children:[p.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 -mr-8 -mt-8 rounded-full opacity-20",style:{backgroundColor:Y7(t.priority)}}),p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("button",{onClick:v,disabled:w,className:X("flex-shrink-0 mt-0.5 transition-colors",w?"text-green-500":"text-gray-400 hover:text-green-500"),children:w?p.jsx(Tr,{className:"w-6 h-6"}):p.jsx(yS,{className:"w-6 h-6"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsx("h3",{className:X("font-medium text-gray-900 dark:text-white",w&&"line-through text-gray-500"),children:t.title}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>i(!r),className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700",children:p.jsx(L7,{className:"w-4 h-4 text-gray-400"})}),p.jsx(oi,{children:r&&p.jsxs(ve.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute right-0 top-full mt-1 w-40 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-10",children:[p.jsxs("button",{onClick:()=>{h(t),i(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[p.jsx(U7,{className:"w-4 h-4"})," Modifier"]}),p.jsxs("button",{onClick:()=>{c(t.id),i(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[p.jsx(b7,{className:"w-4 h-4"})," Archiver"]}),p.jsxs("button",{onClick:()=>{l(t.id),i(!1)},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[p.jsx(lf,{className:"w-4 h-4"})," Supprimer"]})]})})]})]}),t.description&&!n&&p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:t.description}),p.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[p.jsx(eH,{priority:t.priority}),p.jsx(tH,{difficulty:t.difficulty}),t.category&&p.jsx(la,{variant:"default",size:"sm",children:t.category})]}),t.subtasks.length>0&&p.jsxs("div",{className:"mt-3",children:[p.jsxs("button",{onClick:()=>o(!s),className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:[s?p.jsx(E7,{className:"w-4 h-4"}):p.jsx(Bc,{className:"w-4 h-4"}),p.jsxs("span",{children:[T,"/",t.subtasks.length," sous-tches"]})]}),!s&&t.subtasks.length>0&&p.jsx($c,{value:T,max:t.subtasks.length,color:"primary",size:"sm"}),p.jsx(oi,{children:s&&p.jsx(ve.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-2 space-y-1 overflow-hidden",children:t.subtasks.map(P=>p.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[p.jsx("button",{onClick:()=>x(P.id),className:X("flex-shrink-0",P.completed?"text-green-500":"text-gray-400 hover:text-green-500"),children:P.completed?p.jsx(Tr,{className:"w-4 h-4"}):p.jsx(yS,{className:"w-4 h-4"})}),p.jsx("span",{className:X(P.completed&&"line-through text-gray-400"),children:P.title})]},P.id))})})]}),p.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100 dark:border-gray-700",children:[p.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[t.dueDate&&p.jsxs("span",{className:X("flex items-center gap-1",_&&"text-red-500"),children:[p.jsx(Tp,{className:"w-4 h-4"}),Q7(t.dueDate)]}),t.estimatedTime&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(K_,{className:"w-4 h-4"}),t.estimatedTime,"m"]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(X_,{amount:t.xpReward}),p.jsx(J_,{amount:t.coinReward})]})]})]})]})]})})},GR=({quest:t,compact:e=!1})=>{const{claimQuestRewards:n}=wu(),[r,i]=dn.useState(!1),s=t.objectives.filter(g=>g.completed).length,o=t.objectives.length,a=t.objectives.reduce((g,v)=>g+v.current,0),l=t.objectives.reduce((g,v)=>g+v.target,0),c=X7(t.endDate),u=()=>{if(t.completed)return"Termin ";if(o===1){const g=t.objectives[0];return`${g.current}/${g.target}`}return l>o?`${a}/${l}`:`${s}/${o}`},h=async()=>{i(!0);try{await n(t.id),rc("questComplete")}finally{i(!1)}},f={daily:"border-l-blue-500 bg-blue-50 dark:bg-blue-900/10",weekly:"border-l-cyan-500 bg-cyan-50 dark:bg-cyan-900/10",special:"border-l-yellow-500 bg-yellow-50 dark:bg-yellow-900/10",story:"border-l-green-500 bg-green-50 dark:bg-green-900/10"},m={daily:"Quotidienne",weekly:"Hebdomadaire",special:"Spciale",story:"Histoire"};return p.jsx(ve.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:p.jsx(ot,{className:X("p-4 border-l-4 transition-shadow duration-200 hover:shadow-soft-lg",f[t.type],t.completed&&!t.claimed&&"ring-2 ring-yellow-400 ring-opacity-50"),children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:X("w-12 h-12 rounded-2xl flex items-center justify-center text-2xl","bg-gradient-to-br from-white to-teal-50 dark:from-gray-800 dark:to-teal-900/20 shadow-soft border-2 border-teal-100 dark:border-teal-900/30"),children:t.icon}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"flex items-start justify-between gap-3 mb-2",children:p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[p.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:t.title}),p.jsx(la,{variant:t.type==="daily"?"info":t.type==="weekly"?"primary":"warning",size:"sm",children:m[t.type]}),p.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:[p.jsx(K_,{className:"w-3.5 h-3.5"}),p.jsx("span",{children:c})]})]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:t.description}),e&&p.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[p.jsx("div",{className:"flex-1",children:p.jsx($c,{value:t.completed?100:a,max:t.completed?100:l,color:t.completed?"gold":"primary",size:"sm"})}),p.jsx("span",{className:X("text-xs font-medium whitespace-nowrap",t.completed?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"),children:u()}),t.completed&&!t.claimed&&p.jsxs(dt,{variant:"game",size:"sm",onClick:h,isLoading:r,className:"ml-1 text-xs py-1 px-2",children:[p.jsx(y0,{className:"w-3 h-3 mr-1"}),"Rclamer"]})]})]})}),!e&&p.jsx("div",{className:"mt-3 space-y-2",children:t.objectives.map(g=>p.jsx(kH,{objective:g},g.id))}),!e&&p.jsxs("div",{className:"mt-3",children:[p.jsxs("div",{className:"flex justify-between text-xs font-medium mb-2",children:[p.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:t.completed?" Qute termine !":"Progression"}),p.jsx("span",{className:X("font-semibold",t.completed?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"),children:u()})]}),p.jsx($c,{value:t.completed?100:a,max:t.completed?100:l,color:t.completed?"gold":"primary",size:"md"})]}),!e&&p.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[p.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:"Rcompenses:"}),p.jsx(X_,{amount:t.rewards.xp}),p.jsx(J_,{amount:t.rewards.coins}),t.rewards.gems&&p.jsxs(la,{variant:"primary",size:"sm",children:[" ",t.rewards.gems]})]}),t.completed&&!t.claimed&&p.jsx(dt,{variant:"game",size:"sm",onClick:h,isLoading:r,leftIcon:p.jsx(y0,{className:"w-4 h-4"}),children:"Rcuprer"}),t.claimed&&p.jsxs(la,{variant:"success",size:"sm",children:[p.jsx(Tr,{className:"w-3 h-3 mr-1"}),"Rcupr"]})]})]})]})})})},kH=({objective:t})=>(Math.min(t.current/t.target*100,100),p.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[p.jsx("div",{className:X("w-5 h-5 rounded-full flex items-center justify-center",t.completed?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700"),children:t.completed?p.jsx(Tr,{className:"w-3 h-3"}):p.jsx(Bc,{className:"w-3 h-3 text-gray-400"})}),p.jsx("span",{className:X("flex-1",t.completed&&"line-through text-gray-400"),children:t.description}),p.jsxs("span",{className:"text-xs text-gray-500",children:[t.current,"/",t.target]})]})),EH=()=>{const{gameStats:t}=pe();if(!t)return null;const e=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],n=new Date().getDay(),r=n===0?6:n-1;return p.jsxs(ot,{className:"p-4",children:[p.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[p.jsx(_0,{className:"w-5 h-5"}),"Cette semaine"]}),p.jsx("div",{className:"flex justify-between items-end h-24",children:e.map((i,s)=>{const o=s===r,l=s<r||o;return p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx("div",{className:`w-8 rounded-full transition-all ${o?"bg-primary-500 h-16":l?"bg-primary-300 dark:bg-primary-700 h-12":"bg-gray-200 dark:bg-gray-700 h-4"}`}),p.jsx("span",{className:`text-xs ${o?"font-bold text-primary-500":"text-gray-500"}`,children:i})]},i)})}),p.jsxs("div",{className:"flex justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500",children:"XP cette semaine"}),p.jsx("p",{className:"text-xl font-bold",children:Rn(t.weeklyXP)})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Tches"}),p.jsx("p",{className:"text-xl font-bold",children:t.weeklyTasksCompleted})]})]})]})};function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function ai(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Le(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Et(t){Le(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||uf(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function KR(t,e){Le(2,arguments);var n=Et(t),r=ai(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function PH(t,e){Le(2,arguments);var n=Et(t).getTime(),r=ai(e);return new Date(n+r)}var IH={};function kp(){return IH}function CH(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function _S(t){Le(1,arguments);var e=Et(t);return e.setHours(0,0,0,0),e}var AH=6e4,RH=36e5;function tw(t,e){Le(2,arguments);var n=_S(t),r=_S(e);return n.getTime()===r.getTime()}function DH(t){return Le(1,arguments),t instanceof Date||uf(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function NH(t){if(Le(1,arguments),!DH(t)&&typeof t!="number")return!1;var e=Et(t);return!isNaN(Number(e))}function QR(t,e){return Le(2,arguments),Et(t).getTime()-Et(e).getTime()}var MH={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},OH="trunc";function YR(t){return MH[OH]}function jH(t,e,n){Le(2,arguments);var r=QR(t,e)/RH;return YR()(r)}function LH(t,e,n){Le(2,arguments);var r=QR(t,e)/AH;return YR()(r)}function VH(t,e){var n;Le(1,arguments);var r=t||{},i=Et(r.start),s=Et(r.end),o=s.getTime();if(!(i.getTime()<=o))throw new RangeError("Invalid interval");var a=[],l=i;l.setHours(0,0,0,0);var c=Number((n=void 0)!==null&&n!==void 0?n:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=o;)a.push(Et(l)),l.setDate(l.getDate()+c),l.setHours(0,0,0,0);return a}function FH(t,e){Le(2,arguments);var n=ai(e);return PH(t,-n)}var UH=864e5;function BH(t){Le(1,arguments);var e=Et(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/UH)+1}function df(t){Le(1,arguments);var e=1,n=Et(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function XR(t){Le(1,arguments);var e=Et(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=df(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=df(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function zH(t){Le(1,arguments);var e=XR(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=df(n);return r}var $H=6048e5;function WH(t){Le(1,arguments);var e=Et(t),n=df(e).getTime()-zH(e).getTime();return Math.round(n/$H)+1}function hf(t,e){var n,r,i,s,o,a,l,c;Le(1,arguments);var u=kp(),h=ai((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Et(t),m=f.getUTCDay(),g=(m<h?7:0)+m-h;return f.setUTCDate(f.getUTCDate()-g),f.setUTCHours(0,0,0,0),f}function JR(t,e){var n,r,i,s,o,a,l,c;Le(1,arguments);var u=Et(t),h=u.getUTCFullYear(),f=kp(),m=ai((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(h+1,0,m),g.setUTCHours(0,0,0,0);var v=hf(g,e),x=new Date(0);x.setUTCFullYear(h,0,m),x.setUTCHours(0,0,0,0);var w=hf(x,e);return u.getTime()>=v.getTime()?h+1:u.getTime()>=w.getTime()?h:h-1}function HH(t,e){var n,r,i,s,o,a,l,c;Le(1,arguments);var u=kp(),h=ai((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:u.firstWeekContainsDate)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=JR(t,e),m=new Date(0);m.setUTCFullYear(f,0,h),m.setUTCHours(0,0,0,0);var g=hf(m,e);return g}var qH=6048e5;function GH(t,e){Le(1,arguments);var n=Et(t),r=hf(n,e).getTime()-HH(n,e).getTime();return Math.round(r/qH)+1}function Se(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var yi={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return Se(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):Se(r+1,2)},d:function(e,n){return Se(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return Se(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Se(e.getUTCHours(),n.length)},m:function(e,n){return Se(e.getUTCMinutes(),n.length)},s:function(e,n){return Se(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return Se(s,n.length)}},Io={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},KH={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return yi.y(e,n)},Y:function(e,n,r,i){var s=JR(e,i),o=s>0?s:1-s;if(n==="YY"){var a=o%100;return Se(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Se(o,n.length)},R:function(e,n){var r=XR(e);return Se(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return Se(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return Se(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return Se(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return yi.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return Se(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var s=GH(e,i);return n==="wo"?r.ordinalNumber(s,{unit:"week"}):Se(s,n.length)},I:function(e,n,r){var i=WH(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):Se(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):yi.d(e,n)},D:function(e,n,r){var i=BH(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):Se(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Se(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Se(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return Se(s,n.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),s;switch(i===12?s=Io.noon:i===0?s=Io.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),s;switch(i>=17?s=Io.evening:i>=12?s=Io.afternoon:i>=4?s=Io.morning:s=Io.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return yi.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):yi.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):Se(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):Se(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):yi.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):yi.s(e,n)},S:function(e,n){return yi.S(e,n)},X:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return xS(o);case"XXXX":case"XX":return Ns(o);case"XXXXX":case"XXX":default:return Ns(o,":")}},x:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"x":return xS(o);case"xxxx":case"xx":return Ns(o);case"xxxxx":case"xxx":default:return Ns(o,":")}},O:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+wS(o,":");case"OOOO":default:return"GMT"+Ns(o,":")}},z:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+wS(o,":");case"zzzz":default:return"GMT"+Ns(o,":")}},t:function(e,n,r,i){var s=i._originalDate||e,o=Math.floor(s.getTime()/1e3);return Se(o,n.length)},T:function(e,n,r,i){var s=i._originalDate||e,o=s.getTime();return Se(o,n.length)}};function wS(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e;return n+String(i)+o+Se(s,2)}function xS(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Se(Math.abs(t)/60,2)}return Ns(t,e)}function Ns(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=Se(Math.floor(i/60),2),o=Se(i%60,2);return r+s+n+o}var bS=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},ZR=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},QH=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return bS(e,n);var o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",bS(i,n)).replace("{{time}}",ZR(s,n))},YH={p:ZR,P:QH},XH=["D","DD"],JH=["YY","YYYY"];function ZH(t){return XH.indexOf(t)!==-1}function eq(t){return JH.indexOf(t)!==-1}function TS(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var tq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nq=function(e,n,r){var i,s=tq[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function ca(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var rq={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},iq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},oq={date:ca({formats:rq,defaultWidth:"full"}),time:ca({formats:iq,defaultWidth:"full"}),dateTime:ca({formats:sq,defaultWidth:"full"})},aq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},lq=function(e,n,r,i){return aq[e]};function ur(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}var c=t.argumentCallback?t.argumentCallback(e):e;return i[c]}}var cq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},uq={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},dq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},pq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mq=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},gq={ordinalNumber:mq,era:ur({values:cq,defaultWidth:"wide"}),quarter:ur({values:uq,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ur({values:dq,defaultWidth:"wide"}),day:ur({values:hq,defaultWidth:"wide"}),dayPeriod:ur({values:fq,defaultWidth:"wide",formattingValues:pq,defaultFormattingWidth:"wide"})};function dr(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?vq(a,function(h){return h.test(o)}):yq(a,function(h){return h.test(o)}),c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;var u=e.slice(o.length);return{value:c,rest:u}}}function yq(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function vq(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function eD(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var _q=/^(\d+)(th|st|nd|rd)?/i,wq=/\d+/i,xq={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bq={any:[/^b/i,/^(a|c)/i]},Tq={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Sq={any:[/1/i,/2/i,/3/i,/4/i]},kq={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Eq={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Pq={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Iq={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Cq={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Aq={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Rq={ordinalNumber:eD({matchPattern:_q,parsePattern:wq,valueCallback:function(e){return parseInt(e,10)}}),era:dr({matchPatterns:xq,defaultMatchWidth:"wide",parsePatterns:bq,defaultParseWidth:"any"}),quarter:dr({matchPatterns:Tq,defaultMatchWidth:"wide",parsePatterns:Sq,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:dr({matchPatterns:kq,defaultMatchWidth:"wide",parsePatterns:Eq,defaultParseWidth:"any"}),day:dr({matchPatterns:Pq,defaultMatchWidth:"wide",parsePatterns:Iq,defaultParseWidth:"any"}),dayPeriod:dr({matchPatterns:Cq,defaultMatchWidth:"any",parsePatterns:Aq,defaultParseWidth:"any"})},Dq={code:"en-US",formatDistance:nq,formatLong:oq,formatRelative:lq,localize:gq,match:Rq,options:{weekStartsOn:0,firstWeekContainsDate:1}},Nq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Oq=/^'([^]*?)'?$/,jq=/''/g,Lq=/[a-zA-Z]/;function ff(t,e,n){var r,i,s,o,a,l,c,u,h,f,m,g,v,x,w,_,T,P;Le(2,arguments);var A=String(e),O=kp(),E=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:O.locale)!==null&&r!==void 0?r:Dq,S=ai((s=(o=(a=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(c=n.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:O.firstWeekContainsDate)!==null&&o!==void 0?o:(h=O.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=ai((m=(g=(v=(x=n==null?void 0:n.weekStartsOn)!==null&&x!==void 0?x:n==null||(w=n.locale)===null||w===void 0||(_=w.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&v!==void 0?v:O.weekStartsOn)!==null&&g!==void 0?g:(T=O.locale)===null||T===void 0||(P=T.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&m!==void 0?m:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var C=Et(t);if(!NH(C))throw new RangeError("Invalid time value");var D=CH(C),M=FH(C,D),R={firstWeekContainsDate:S,weekStartsOn:k,locale:E,_originalDate:C},ee=A.match(Mq).map(function(q){var Q=q[0];if(Q==="p"||Q==="P"){var se=YH[Q];return se(q,E.formatLong)}return q}).join("").match(Nq).map(function(q){if(q==="''")return"'";var Q=q[0];if(Q==="'")return Vq(q);var se=KH[Q];if(se)return!(n!=null&&n.useAdditionalWeekYearTokens)&&eq(q)&&TS(q,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&ZH(q)&&TS(q,e,String(t)),se(M,q,E.localize,R);if(Q.match(Lq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Q+"`");return q}).join("");return ee}function Vq(t){var e=t.match(Oq);return e?e[1].replace(jq,"'"):t}function SS(t){return Le(1,arguments),tw(t,Date.now())}function Fq(t){return Le(1,arguments),tw(t,KR(Date.now(),1))}function Uq(t,e){Le(2,arguments);var n=ai(e);return KR(t,-n)}var Bq={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},zq=function(e,n,r){var i,s=Bq[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",String(n)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+i:"il y a "+i:i},$q={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Wq={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Hq={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qq={date:ca({formats:$q,defaultWidth:"full"}),time:ca({formats:Wq,defaultWidth:"full"}),dateTime:ca({formats:Hq,defaultWidth:"full"})},Gq={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},Kq=function(e,n,r,i){return Gq[e]},Qq={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},Yq={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},Xq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},Jq={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Zq={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},eG=function(e,n){var r=Number(e),i=n==null?void 0:n.unit;if(r===0)return"0";var s=["year","week","hour","minute","second"],o;return r===1?o=i&&s.includes(i)?"re":"er":o="me",r+o},tG={ordinalNumber:eG,era:ur({values:Qq,defaultWidth:"wide"}),quarter:ur({values:Yq,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ur({values:Xq,defaultWidth:"wide"}),day:ur({values:Jq,defaultWidth:"wide"}),dayPeriod:ur({values:Zq,defaultWidth:"wide"})},nG=/^(\d+)(ime|re|me|er|e)?/i,rG=/\d+/i,iG={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},sG={any:[/^av/i,/^ap/i]},oG={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},aG={any:[/1/i,/2/i,/3/i,/4/i]},lG={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},cG={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},uG={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},dG={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},hG={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},fG={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},pG={ordinalNumber:eD({matchPattern:nG,parsePattern:rG,valueCallback:function(e){return parseInt(e)}}),era:dr({matchPatterns:iG,defaultMatchWidth:"wide",parsePatterns:sG,defaultParseWidth:"any"}),quarter:dr({matchPatterns:oG,defaultMatchWidth:"wide",parsePatterns:aG,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:dr({matchPatterns:lG,defaultMatchWidth:"wide",parsePatterns:cG,defaultParseWidth:"any"}),day:dr({matchPatterns:uG,defaultMatchWidth:"wide",parsePatterns:dG,defaultParseWidth:"any"}),dayPeriod:dr({matchPatterns:hG,defaultMatchWidth:"any",parsePatterns:fG,defaultParseWidth:"any"})},tD={code:"fr",formatDistance:zq,formatLong:qq,formatRelative:Kq,localize:tG,match:pG,options:{weekStartsOn:1,firstWeekContainsDate:4}};const mG=()=>{const{user:t,gameStats:e}=pe(),{tasks:n}=ys(),{getDailyQuests:r,getWeeklyQuests:i}=wu(),{openTaskModal:s}=rr(),o=r(),a=i();if(!t||!e)return null;const l=n.filter(f=>f.status==="completed"||!f.dueDate?!1:SS(new Date(f.dueDate))||Fq(new Date(f.dueDate))).slice(0,4),c=[...o,...a].filter(f=>!f.claimed).sort((f,m)=>f.completed&&!m.completed?-1:!f.completed&&m.completed?1:0).slice(0,3),u=n.filter(f=>f.status==="completed"&&SS(new Date(f.completedAt))).length,h=n.filter(f=>f.status==="pending").length;return p.jsxs("div",{className:"space-y-6 w-full overflow-x-hidden",children:[p.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-teal-400 via-cyan-400 to-blue-500 p-4 sm:p-6 text-white shadow-soft-lg",children:[p.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),p.jsxs("div",{className:"relative z-10",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsxs("h1",{className:"text-xl sm:text-2xl font-bold truncate",children:["Bonjour, ",t.username,"! "]}),p.jsx("p",{className:"mt-1 text-white/80 text-sm sm:text-base",children:ff(new Date,"EEEE d MMMM",{locale:tD})})]}),p.jsx(Y_,{config:t.avatar,size:"lg",showLevel:!0,level:e.level})]}),p.jsxs("div",{className:"mt-4 sm:mt-6",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsxs("span",{className:"text-sm font-medium",children:["Niveau ",e.level]}),p.jsx("span",{className:"text-sm text-white/60",children:Q_(e.level)})]}),p.jsx(WR,{currentXP:e.currentXP,xpToNextLevel:e.xpToNextLevel,level:e.level,showLevel:!1})]})]}),p.jsx("div",{className:"absolute -right-8 -top-8 w-32 h-32 bg-white/10 rounded-full hidden sm:block"}),p.jsx("div",{className:"absolute -right-4 -bottom-4 w-24 h-24 bg-white/10 rounded-full hidden sm:block"})]}),p.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[p.jsx(lt,{icon:p.jsx(Tr,{className:"w-5 h-5 sm:w-6 sm:h-6"}),label:"Compltes aujourd'hui",value:u,color:"primary"}),p.jsx(lt,{icon:p.jsx(Ji,{className:"w-5 h-5 sm:w-6 sm:h-6"}),label:"Tches en attente",value:h,color:"yellow"}),p.jsx(lt,{icon:p.jsx(tc,{className:"w-5 h-5 sm:w-6 sm:h-6"}),label:"Streak actuel",value:`${e.currentStreak} jours`,color:"orange"}),p.jsx(lt,{icon:p.jsx(_r,{className:"w-5 h-5 sm:w-6 sm:h-6"}),label:"XP Total",value:Rn(e.totalXP),color:"purple"})]}),p.jsxs("div",{className:"grid lg:grid-cols-3 gap-4 sm:gap-6",children:[p.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[p.jsxs(ot,{className:"p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Tp,{className:"w-5 h-5 text-primary-500"}),p.jsx("h2",{className:"font-semibold",children:"Tches du jour"})]}),p.jsxs(_y,{to:"/tasks",className:"text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Voir tout",p.jsx(Bc,{className:"w-4 h-4"})]})]}),l.length>0?p.jsx("div",{className:"space-y-3",children:l.map(f=>p.jsx(qR,{task:f,compact:!0},f.id))}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 mx-auto flex items-center justify-center mb-3",children:p.jsx(Tr,{className:"w-8 h-8 text-gray-400"})}),p.jsx("p",{className:"text-gray-500 mb-3",children:"Aucune tche pour aujourd'hui"}),p.jsxs(dt,{variant:"primary",size:"sm",onClick:s,children:[p.jsx(zc,{className:"w-4 h-4 mr-1"}),"Ajouter une tche"]})]})]}),p.jsxs(ot,{className:"p-4",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx(lo,{className:"w-5 h-5 text-primary-500"}),p.jsx("h2",{className:"font-semibold",children:"Progression hebdomadaire"})]}),p.jsx(EH,{})]})]}),p.jsx("div",{className:"space-y-6",children:p.jsxs(ot,{className:"p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ji,{className:"w-5 h-5 text-primary-500"}),p.jsx("h2",{className:"font-semibold",children:"Qutes actives"})]}),p.jsxs(_y,{to:"/quests",className:"text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Voir tout",p.jsx(Bc,{className:"w-4 h-4"})]})]}),c.length>0?p.jsx("div",{className:"space-y-3",children:c.map(f=>p.jsx(GR,{quest:f,compact:!0},f.id))}):p.jsxs("div",{className:"text-center py-6 text-gray-500",children:[p.jsx(Ji,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),p.jsx("p",{children:"Toutes les qutes sont compltes!"})]})]})})]})]})},gG=()=>{const{tasks:t,categories:e,filter:n,setFilter:r,updateTask:i,deleteTask:s}=ys(),{openTaskModal:o,setEditingTask:a}=rr(),[l,c]=N.useState("none"),[u,h]=N.useState(""),[f,m]=N.useState(!1),g=N.useMemo(()=>{let x=t;if(n.status!=="all"&&(x=x.filter(w=>w.status===n.status)),n.priority&&(x=x.filter(w=>w.priority===n.priority)),n.categoryId&&(x=x.filter(w=>w.categoryId===n.categoryId)),u){const w=u.toLowerCase();x=x.filter(_=>{var T;return _.title.toLowerCase().includes(w)||((T=_.description)==null?void 0:T.toLowerCase().includes(w))})}return x=[...x].sort((w,_)=>{switch(n.sortBy){case"dueDate":return w.dueDate?_.dueDate?new Date(w.dueDate).getTime()-new Date(_.dueDate).getTime():-1:1;case"priority":const T={critical:0,high:1,medium:2,low:3,none:4};return T[w.priority]-T[_.priority];case"createdAt":default:return new Date(_.createdAt).getTime()-new Date(w.createdAt).getTime()}}),n.sortDirection==="desc"&&x.reverse(),x},[t,n,u]),v=N.useMemo(()=>{if(l==="none")return{"Toutes les tches":g};const x={};return g.forEach(w=>{let _;switch(l){case"category":const T=e.find(A=>A.id===w.categoryId);_=(T==null?void 0:T.name)||"Sans catgorie";break;case"priority":_={critical:" Critique",high:" Haute priorit",medium:" Priorit moyenne",low:" Basse priorit",none:" Sans priorit"}[w.priority]||"Sans priorit";break;case"dueDate":if(!w.dueDate)_="Sans date";else{const A=new Date(w.dueDate),O=new Date,E=new Date(O);E.setDate(E.getDate()+1),A.toDateString()===O.toDateString()?_="Aujourd'hui":A.toDateString()===E.toDateString()?_="Demain":A<O?_=" En retard":_=" venir"}break;default:_="Autres"}x[_]||(x[_]=[]),x[_].push(w)}),x},[g,l,e]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[p.jsxs("div",{children:[p.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[p.jsx(FR,{className:"w-7 h-7 text-primary-500"}),"Mes Tches"]}),p.jsxs("p",{className:"text-gray-500 mt-1",children:[g.length," tche",g.length>1?"s":""]})]}),p.jsxs(dt,{variant:"game",onClick:o,children:[p.jsx(zc,{className:"w-5 h-5 mr-1"}),"Nouvelle tche"]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[p.jsx("div",{className:"flex-1",children:p.jsx(Ai,{placeholder:"Rechercher une tche...",value:u,onChange:x=>h(x.target.value),leftIcon:p.jsx(BR,{className:"w-5 h-5"})})}),p.jsx("div",{className:"flex gap-2",children:p.jsx(dt,{variant:"secondary",onClick:()=>m(!f),children:p.jsx(C7,{className:"w-5 h-5"})})})]}),p.jsx(oi,{children:f&&p.jsx(ve.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:p.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2 block",children:"Statut"}),p.jsxs("select",{value:n.status,onChange:x=>r({status:x.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",children:[p.jsx("option",{value:"all",children:"Toutes"}),p.jsx("option",{value:"pending",children:"En attente"}),p.jsx("option",{value:"in-progress",children:"En cours"}),p.jsx("option",{value:"completed",children:"Compltes"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2 block",children:"Priorit"}),p.jsxs("select",{value:n.priority||"",onChange:x=>r({priority:x.target.value||void 0}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",children:[p.jsx("option",{value:"",children:"Toutes"}),p.jsx("option",{value:"high",children:"Haute"}),p.jsx("option",{value:"medium",children:"Moyenne"}),p.jsx("option",{value:"low",children:"Basse"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2 block",children:"Catgorie"}),p.jsxs("select",{value:n.categoryId||"",onChange:x=>r({categoryId:x.target.value||void 0}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",children:[p.jsx("option",{value:"",children:"Toutes"}),e.map(x=>p.jsxs("option",{value:x.id,children:[x.icon," ",x.name]},x.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2 block",children:"Grouper par"}),p.jsxs("select",{value:l,onChange:x=>c(x.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",children:[p.jsx("option",{value:"none",children:"Aucun"}),p.jsx("option",{value:"category",children:"Catgorie"}),p.jsx("option",{value:"priority",children:"Priorit"}),p.jsx("option",{value:"dueDate",children:"Date"})]})]})]})})}),g.length>0?p.jsx("div",{className:"space-y-6",children:Object.entries(v).map(([x,w])=>p.jsxs("div",{children:[l!=="none"&&p.jsxs("h3",{className:"font-medium text-gray-600 dark:text-gray-400 mb-3 flex items-center gap-2",children:[p.jsx(A7,{className:"w-4 h-4"}),x,p.jsx("span",{className:"text-sm bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded-full",children:w.length})]}),p.jsx("div",{className:"space-y-3",children:w.map(_=>p.jsx(qR,{task:_},_.id))})]},x))}):p.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[p.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-100 dark:bg-gray-800 mx-auto flex items-center justify-center mb-4",children:p.jsx(Tr,{className:"w-12 h-12 text-gray-400"})}),p.jsx("h3",{className:"text-xl font-medium mb-2",children:"Aucune tche trouve"}),p.jsx("p",{className:"text-gray-500 mb-4",children:u?"Essayez de modifier votre recherche":"Crez votre premire tche pour commencer!"}),p.jsxs(dt,{variant:"game",onClick:o,children:[p.jsx(zc,{className:"w-5 h-5 mr-1"}),"Nouvelle tche"]})]})]})},yG=()=>{const{getDailyQuests:t,getWeeklyQuests:e,refreshQuests:n,claimQuestReward:r}=wu(),{gameStats:i}=pe(),[s,o]=N.useState("daily"),a=t(),l=e();if(!i)return null;const c=s==="daily"?a:l,u=a.filter(P=>P.completed).length,h=l.filter(P=>P.completed).length,f=a.filter(P=>P.completed&&!P.claimed).length,m=l.filter(P=>P.completed&&!P.claimed).length,g=new Date,v=new Date(g);v.setDate(v.getDate()+1),v.setHours(0,0,0,0);const x=jH(v,g),w=LH(v,g)%60,_=new Date(g);_.setDate(_.getDate()+((7-_.getDay()+1)%7||7)),_.setHours(0,0,0,0);const T=Math.ceil((_.getTime()-g.getTime())/(1e3*60*60*24));return p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("div",{children:[p.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[p.jsx(v0,{className:"w-7 h-7 text-primary-500"}),"Qutes"]}),p.jsx("p",{className:"text-gray-500 mt-1",children:"Compltez des qutes pour gagner des rcompenses bonus!"})]})}),p.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(lt,{icon:p.jsx(Ji,{className:"w-6 h-6"}),label:"Qutes quotidiennes",value:`${u}/${a.length}`,color:"primary"}),p.jsx(lt,{icon:p.jsx(lo,{className:"w-6 h-6"}),label:"Qutes hebdomadaires",value:`${h}/${l.length}`,color:"purple"}),p.jsx(lt,{icon:p.jsx(y0,{className:"w-6 h-6"}),label:"Rcompenses  rclamer",value:f+m,color:"yellow"}),p.jsx(lt,{icon:p.jsx(Tr,{className:"w-6 h-6"}),label:"Total compltes",value:Rn(i.questsCompleted||0),color:"green"})]}),p.jsx(ot,{className:"bg-gradient-to-r from-primary-500/10 to-cyan-500/10",children:p.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary-500/20 flex items-center justify-center",children:p.jsx(K_,{className:"w-6 h-6 text-primary-500"})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium",children:"Prochaine rinitialisation"}),p.jsxs("p",{className:"text-sm text-gray-500",children:["Quotidienne: ",x,"h ",w,"m | Hebdomadaire: ",T," jour",T>1?"s":""]})]})]}),p.jsxs(dt,{variant:"secondary",size:"sm",onClick:()=>n(),children:[p.jsx(B7,{className:"w-4 h-4 mr-1"}),"Actualiser"]})]})}),p.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[p.jsxs("button",{onClick:()=>o("daily"),className:X("flex-1 py-3 rounded-md text-sm font-medium transition-colors flex items-center justify-center gap-2",s==="daily"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500"),children:[p.jsx(Ji,{className:"w-5 h-5"}),"Quotidiennes",f>0&&p.jsx("span",{className:"w-5 h-5 rounded-full bg-primary-500 text-white text-xs flex items-center justify-center",children:f})]}),p.jsxs("button",{onClick:()=>o("weekly"),className:X("flex-1 py-3 rounded-md text-sm font-medium transition-colors flex items-center justify-center gap-2",s==="weekly"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500"),children:[p.jsx(lo,{className:"w-5 h-5"}),"Hebdomadaires",m>0&&p.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500 text-white text-xs flex items-center justify-center",children:m})]})]}),p.jsx("div",{className:"space-y-4",children:c.map((P,A)=>p.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.1},children:p.jsx(GR,{quest:P})},P.id))}),c.length===0&&p.jsxs("div",{className:"text-center py-16",children:[p.jsx(v0,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),p.jsx("p",{className:"text-gray-500",children:"Aucune qute disponible pour le moment"}),p.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Les nouvelles qutes seront disponibles  la prochaine rinitialisation"})]}),p.jsx(ot,{className:"bg-gradient-to-r from-yellow-500/10 to-orange-500/10",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center flex-shrink-0",children:""}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium",children:"Astuce du jour"}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Compltez toutes vos qutes quotidiennes pour maximiser vos gains d'XP. Les qutes hebdomadaires offrent des rcompenses plus importantes mais demandent plus d'efforts!"})]})]})})]})},vG=()=>{const{gameStats:t}=pe(),[e,n]=N.useState("all"),[r,i]=N.useState("all"),[s,o]=N.useState("");if(!t)return null;const a=Nr.filter(g=>{if(e!=="all"&&g.category!==e||r!=="all"&&g.rarity!==r)return!1;if(s){const v=s.toLowerCase();if(!g.name.toLowerCase().includes(v)&&!g.description.toLowerCase().includes(v))return!1}return!0}),l=Nr.filter(g=>t.achievementsUnlocked.includes(g.id)),c=l.reduce((g,v)=>g+v.xpReward,0),u=Math.round(l.length/Nr.length*100),h={common:l.filter(g=>g.rarity==="common").length,rare:l.filter(g=>g.rarity==="rare").length,epic:l.filter(g=>g.rarity==="epic").length,legendary:l.filter(g=>g.rarity==="legendary").length},f={common:"from-gray-400 to-gray-500",rare:"from-blue-400 to-blue-500",epic:"from-purple-400 to-purple-500",legendary:"from-yellow-400 to-orange-500"},m={common:"border-gray-300 dark:border-gray-600",rare:"border-blue-400 dark:border-blue-500",epic:"border-purple-400 dark:border-purple-500",legendary:"border-yellow-400 dark:border-yellow-500"};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[p.jsx(_r,{className:"w-7 h-7 text-yellow-500"}),"Achievements"]}),p.jsxs("p",{className:"text-gray-500 mt-1",children:[l.length," / ",Nr.length," dbloqus (",u,"%)"]})]}),p.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(lt,{icon:p.jsx(_r,{className:"w-6 h-6"}),label:"Total dbloqu",value:`${l.length}/${Nr.length}`,color:"yellow"}),p.jsx(lt,{icon:p.jsx(Sp,{className:"w-6 h-6"}),label:"XP Gagne",value:Rn(c),color:"primary"}),p.jsx(lt,{icon:p.jsx(g0,{className:"w-6 h-6"}),label:"Lgendaires",value:`${h.legendary}/5`,color:"orange"}),p.jsx(lt,{icon:p.jsx(Ji,{className:"w-6 h-6"}),label:"Progression",value:`${u}%`,color:"green"})]}),p.jsxs(ot,{children:[p.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[p.jsx(lo,{className:"w-5 h-5 text-primary-500"}),"Progression par raret"]}),p.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:["common","rare","epic","legendary"].map(g=>{const v=Nr.filter(_=>_.rarity===g).length,x=h[g],w=Math.round(x/v*100);return p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:X("w-16 h-16 mx-auto rounded-full bg-gradient-to-br flex items-center justify-center mb-2",f[g]),children:p.jsx("span",{className:"text-2xl font-bold text-white",children:x})}),p.jsx("p",{className:"font-medium capitalize",children:g}),p.jsxs("p",{className:"text-sm text-gray-500",children:[w,"%"]})]},g)})})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[p.jsx("div",{className:"flex-1",children:p.jsx(Ai,{placeholder:"Rechercher un achievement...",value:s,onChange:g=>o(g.target.value),leftIcon:p.jsx(BR,{className:"w-5 h-5"})})}),p.jsxs("select",{value:e,onChange:g=>n(g.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[p.jsx("option",{value:"all",children:"Toutes les catgories"}),mH.map(g=>p.jsxs("option",{value:g.id,children:[g.icon," ",g.name]},g.id))]}),p.jsxs("select",{value:r,onChange:g=>i(g.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[p.jsx("option",{value:"all",children:"Toutes rarets"}),p.jsx("option",{value:"common",children:"Commun"}),p.jsx("option",{value:"rare",children:"Rare"}),p.jsx("option",{value:"epic",children:"pique"}),p.jsx("option",{value:"legendary",children:"Lgendaire"})]})]}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((g,v)=>{const x=t.achievementsUnlocked.includes(g.id),w=x?100:0;return p.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:v*.05},children:p.jsxs(ot,{className:X("relative overflow-hidden border-2 transition-all",x?m[g.rarity]:"border-gray-200 dark:border-gray-700 opacity-75",x&&"hover:shadow-lg"),children:[p.jsx("div",{className:X("absolute top-0 right-0 w-16 h-16 -mr-8 -mt-8 rounded-full bg-gradient-to-br opacity-20",f[g.rarity])}),p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:X("w-14 h-14 rounded-xl flex items-center justify-center text-2xl flex-shrink-0",x?`bg-gradient-to-br ${f[g.rarity]} shadow-lg`:"bg-gray-200 dark:bg-gray-700"),children:x?g.icon:p.jsx(M7,{className:"w-6 h-6 text-gray-400"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h3",{className:X("font-semibold truncate",!x&&"text-gray-500"),children:g.name}),g.rarity==="legendary"&&p.jsx(g0,{className:"w-4 h-4 text-yellow-500 flex-shrink-0"})]}),p.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 mt-1",children:g.description}),p.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[p.jsxs("span",{className:X("text-xs px-2 py-0.5 rounded-full",x?"bg-primary-100 dark:bg-primary-900/30 text-primary-600":"bg-gray-100 dark:bg-gray-700 text-gray-500"),children:["+",g.xpReward," XP"]}),g.coinReward&&p.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600",children:["+",g.coinReward," "]})]}),!x&&w>0&&p.jsx("div",{className:"mt-3",children:p.jsx($c,{value:w,max:100,size:"sm",color:"primary",showLabel:!0})})]})]})]})},g.id)})}),a.length===0&&p.jsxs("div",{className:"text-center py-16",children:[p.jsx(_r,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),p.jsx("p",{className:"text-gray-500",children:"Aucun achievement trouv"})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ku(t){return t+.5|0}const Oi=(t,e,n)=>Math.max(Math.min(t,n),e);function Rl(t){return Oi(ku(t*2.55),0,255)}function Zi(t){return Oi(ku(t*255),0,255)}function Mr(t){return Oi(ku(t/2.55)/100,0,1)}function kS(t){return Oi(ku(t*100),0,100)}const Pn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},w0=[..."0123456789ABCDEF"],_G=t=>w0[t&15],wG=t=>w0[(t&240)>>4]+w0[t&15],_d=t=>(t&240)>>4===(t&15),xG=t=>_d(t.r)&&_d(t.g)&&_d(t.b)&&_d(t.a);function bG(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Pn[t[1]]*17,g:255&Pn[t[2]]*17,b:255&Pn[t[3]]*17,a:e===5?Pn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Pn[t[1]]<<4|Pn[t[2]],g:Pn[t[3]]<<4|Pn[t[4]],b:Pn[t[5]]<<4|Pn[t[6]],a:e===9?Pn[t[7]]<<4|Pn[t[8]]:255})),n}const TG=(t,e)=>t<255?e(t):"";function SG(t){var e=xG(t)?_G:wG;return t?"#"+e(t.r)+e(t.g)+e(t.b)+TG(t.a,e):void 0}const kG=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function nD(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function EG(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function PG(t,e,n){const r=nD(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function IG(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function nw(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=IG(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function rw(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Zi)}function iw(t,e,n){return rw(nD,t,e,n)}function CG(t,e,n){return rw(PG,t,e,n)}function AG(t,e,n){return rw(EG,t,e,n)}function rD(t){return(t%360+360)%360}function RG(t){const e=kG.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Rl(+e[5]):Zi(+e[5]));const i=rD(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=CG(i,s,o):e[1]==="hsv"?r=AG(i,s,o):r=iw(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function DG(t,e){var n=nw(t);n[0]=rD(n[0]+e),n=iw(n),t.r=n[0],t.g=n[1],t.b=n[2]}function NG(t){if(!t)return;const e=nw(t),n=e[0],r=kS(e[1]),i=kS(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Mr(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const ES={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},PS={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function MG(){const t={},e=Object.keys(PS),n=Object.keys(ES);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,ES[s]);s=parseInt(PS[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let wd;function OG(t){wd||(wd=MG(),wd.transparent=[0,0,0,0]);const e=wd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const jG=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function LG(t){const e=jG.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Rl(o):Oi(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Rl(r):Oi(r,0,255)),i=255&(e[4]?Rl(i):Oi(i,0,255)),s=255&(e[6]?Rl(s):Oi(s,0,255)),{r,g:i,b:s,a:n}}}function VG(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Mr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const lg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Co=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function FG(t,e,n){const r=Co(Mr(t.r)),i=Co(Mr(t.g)),s=Co(Mr(t.b));return{r:Zi(lg(r+n*(Co(Mr(e.r))-r))),g:Zi(lg(i+n*(Co(Mr(e.g))-i))),b:Zi(lg(s+n*(Co(Mr(e.b))-s))),a:t.a+n*(e.a-t.a)}}function xd(t,e,n){if(t){let r=nw(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=iw(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function iD(t,e){return t&&Object.assign(e||{},t)}function IS(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Zi(t[3]))):(e=iD(t,{r:0,g:0,b:0,a:1}),e.a=Zi(e.a)),e}function UG(t){return t.charAt(0)==="r"?LG(t):RG(t)}class Wc{constructor(e){if(e instanceof Wc)return e;const n=typeof e;let r;n==="object"?r=IS(e):n==="string"&&(r=bG(e)||OG(e)||UG(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=iD(this._rgb);return e&&(e.a=Mr(e.a)),e}set rgb(e){this._rgb=IS(e)}rgbString(){return this._valid?VG(this._rgb):void 0}hexString(){return this._valid?SG(this._rgb):void 0}hslString(){return this._valid?NG(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=FG(this._rgb,e._rgb,n)),this}clone(){return new Wc(this.rgb)}alpha(e){return this._rgb.a=Zi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ku(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return xd(this._rgb,2,e),this}darken(e){return xd(this._rgb,2,-e),this}saturate(e){return xd(this._rgb,1,e),this}desaturate(e){return xd(this._rgb,1,-e),this}rotate(e){return DG(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ir(){}const BG=(()=>{let t=0;return()=>t++})();function Te(t){return t==null}function at(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function fe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ht(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function sr(t,e){return Ht(t)?t:e}function ce(t,e){return typeof t>"u"?e:t}const zG=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,sD=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Me(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ke(t,e,n,r){let i,s,o;if(at(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(fe(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function pf(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function mf(t){if(at(t))return t.map(mf);if(fe(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=mf(t[n[i]]);return e}return t}function oD(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function $G(t,e,n,r){if(!oD(t))return;const i=e[t],s=n[t];fe(i)&&fe(s)?Hc(i,s,r):e[t]=mf(s)}function Hc(t,e,n){const r=at(e)?e:[e],i=r.length;if(!fe(t))return t;n=n||{};const s=n.merger||$G;let o;for(let a=0;a<i;++a){if(o=r[a],!fe(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function ic(t,e){return Hc(t,e,{merger:WG})}function WG(t,e,n){if(!oD(t))return;const r=e[t],i=n[t];fe(r)&&fe(i)?ic(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=mf(i))}const CS={"":t=>t,x:t=>t.x,y:t=>t.y};function HG(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function qG(t){const e=HG(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function co(t,e){return(CS[e]||(CS[e]=qG(e)))(t)}function sw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const qc=t=>typeof t<"u",as=t=>typeof t=="function",AS=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function GG(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ee=Math.PI,ze=2*Ee,KG=ze+Ee,gf=Number.POSITIVE_INFINITY,QG=Ee/180,ht=Ee/2,Ss=Ee/4,RS=Ee*2/3,aD=Math.log10,wr=Math.sign;function sc(t,e,n){return Math.abs(t-e)<n}function DS(t){const e=Math.round(t);t=sc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(aD(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function YG(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function XG(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Gc(t){return!XG(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function JG(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function ZG(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function $r(t){return t*(Ee/180)}function eK(t){return t*(180/Ee)}function NS(t){if(!Ht(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function lD(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Ee&&(s+=ze),{angle:s,distance:i}}function x0(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function tK(t,e){return(t-e+KG)%ze-Ee}function gn(t){return(t%ze+ze)%ze}function Kc(t,e,n,r){const i=gn(t),s=gn(e),o=gn(n),a=gn(s-i),l=gn(o-i),c=gn(i-s),u=gn(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function Bt(t,e,n){return Math.max(e,Math.min(n,t))}function nK(t){return Bt(t,-32768,32767)}function Wr(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function ow(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const $s=(t,e,n,r)=>ow(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),rK=(t,e,n)=>ow(t,n,r=>t[r][e]>=n);function iK(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const cD=["push","pop","shift","splice","unshift"];function sK(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),cD.forEach(n=>{const r="_onData"+sw(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function MS(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(cD.forEach(s=>{delete t[s]}),delete t._chartjs)}function uD(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const dD=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function hD(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,dD.call(window,()=>{r=!1,t.apply(e,n)}))}}function oK(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const aw=t=>t==="start"?"left":t==="end"?"right":"center",Lt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,aK=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function lK(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:m,maxDefined:g}=o.getUserBounds();if(m){if(i=Math.min($s(l,u,h).lo,n?r:$s(e,u,o.getPixelForValue(h)).lo),c){const v=l.slice(0,i+1).reverse().findIndex(x=>!Te(x[a.axis]));i-=Math.max(0,v)}i=Bt(i,0,r-1)}if(g){let v=Math.max($s(l,o.axis,f,!0).hi+1,n?0:$s(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const x=l.slice(v-1).findIndex(w=>!Te(w[a.axis]));v+=Math.max(0,x)}s=Bt(v,i,r)-i}else s=r-i}return{start:i,count:s}}function cK(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const bd=t=>t===0||t===1,OS=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ze/n)),jS=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ze/n)+1,oc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ht)+1,easeOutSine:t=>Math.sin(t*ht),easeInOutSine:t=>-.5*(Math.cos(Ee*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>bd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>bd(t)?t:OS(t,.075,.3),easeOutElastic:t=>bd(t)?t:jS(t,.075,.3),easeInOutElastic(t){return bd(t)?t:t<.5?.5*OS(t*2,.1125,.45):.5+.5*jS(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-oc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?oc.easeInBounce(t*2)*.5:oc.easeOutBounce(t*2-1)*.5+.5};function lw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function LS(t){return lw(t)?t:new Wc(t)}function cg(t){return lw(t)?t:new Wc(t).saturate(.5).darken(.1).hexString()}const uK=["x","y","borderWidth","radius","tension"],dK=["color","borderColor","backgroundColor"];function hK(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:dK},numbers:{type:"number",properties:uK}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function fK(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const VS=new Map;function pK(t,e){e=e||{};const n=t+JSON.stringify(e);let r=VS.get(n);return r||(r=new Intl.NumberFormat(t,e),VS.set(n,r)),r}function cw(t,e,n){return pK(e,n).format(t)}const mK={values(t){return at(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=gK(t,n)}const o=aD(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),cw(t,r,l)}};function gK(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var fD={formatters:mK};function yK(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:fD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const uo=Object.create(null),b0=Object.create(null);function ac(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function ug(t,e,n){return typeof e=="string"?Hc(ac(t,e),n):Hc(ac(t,""),e)}class vK{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>cg(i.backgroundColor),this.hoverBorderColor=(r,i)=>cg(i.borderColor),this.hoverColor=(r,i)=>cg(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return ug(this,e,n)}get(e){return ac(this,e)}describe(e,n){return ug(b0,e,n)}override(e,n){return ug(uo,e,n)}route(e,n,r,i){const s=ac(this,e),o=ac(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return fe(l)?Object.assign({},c,l):ce(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ze=new vK({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[hK,fK,yK]);function _K(t){return!t||Te(t.size)||Te(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function FS(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function ks(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function US(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function T0(t,e,n,r){pD(t,e,n,r,null)}function pD(t,e,n,r,i){let s,o,a,l,c,u,h,f;const m=e.pointStyle,g=e.rotation,v=e.radius;let x=(g||0)*QG;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,v,0,0,ze):t.arc(n,r,v,0,ze),t.closePath();break;case"triangle":u=i?i/2:v,t.moveTo(n+Math.sin(x)*u,r-Math.cos(x)*v),x+=RS,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*v),x+=RS,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(x+Ss)*l,h=Math.cos(x+Ss)*(i?i/2-c:l),a=Math.sin(x+Ss)*l,f=Math.sin(x+Ss)*(i?i/2-c:l),t.arc(n-h,r-a,c,x-Ee,x-ht),t.arc(n+f,r-o,c,x-ht,x),t.arc(n+h,r+a,c,x,x+ht),t.arc(n-f,r+o,c,x+ht,x+Ee),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*v,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}x+=Ss;case"rectRot":h=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,f=Math.sin(x)*(i?i/2:v),t.moveTo(n-h,r-a),t.lineTo(n+f,r-o),t.lineTo(n+h,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":x+=Ss;case"cross":h=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,f=Math.sin(x)*(i?i/2:v),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":h=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,f=Math.sin(x)*(i?i/2:v),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),x+=Ss,h=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,f=Math.sin(x)*(i?i/2:v),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(x)*v,a=Math.sin(x)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(x)*(i?i/2:v),r+Math.sin(x)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Qc(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Ep(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Pp(t){t.restore()}function wK(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function xK(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function bK(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Te(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function TK(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function SK(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Yc(t,e,n,r,i,s={}){const o=at(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,bK(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&SK(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Te(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),TK(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function yf(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ee,Ee,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Ee,ht,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,ht,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-ht,!0),t.lineTo(n+o.topLeft,r)}const kK=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,EK=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function PK(t,e){const n=(""+t).match(kK);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const IK=t=>+t||0;function uw(t,e){const n={},r=fe(e),i=r?Object.keys(e):e,s=fe(t)?r?o=>ce(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=IK(s(o));return n}function mD(t){return uw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ua(t){return uw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Bn(t){const e=mD(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function zt(t,e){t=t||{},e=e||Ze.font;let n=ce(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ce(t.style,e.style);r&&!(""+r).match(EK)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ce(t.family,e.family),lineHeight:PK(ce(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ce(t.weight,e.weight),string:""};return i.string=_K(i),i}function Td(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function CK(t,e,n){const{min:r,max:i}=t,s=sD(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function xo(t,e){return Object.assign(Object.create(t),e)}function dw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=_D("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>dw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return yD(a,l,()=>LK(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return zS(a).includes(l)},ownKeys(a){return zS(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Aa(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:gD(t,r),setContext:s=>Aa(t,s,n,r),override:s=>Aa(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return yD(s,o,()=>RK(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function gD(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:as(n)?n:()=>n,isIndexable:as(r)?r:()=>r}}const AK=(t,e)=>t?t+sw(e):e,hw=(t,e)=>fe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function yD(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function RK(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return as(a)&&o.isScriptable(e)&&(a=DK(e,a,t,n)),at(a)&&a.length&&(a=NK(e,a,t,o.isIndexable)),hw(e,a)&&(a=Aa(a,i,s&&s[e],o)),a}function DK(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),hw(t,l)&&(l=fw(i._scopes,i,t,l)),l}function NK(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(fe(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=fw(c,i,t,u);e.push(Aa(h,s,o&&o[t],a))}}return e}function vD(t,e,n){return as(t)?t(e,n):t}const MK=(t,e)=>t===!0?e:typeof t=="string"?co(e,t):void 0;function OK(t,e,n,r,i){for(const s of e){const o=MK(n,s);if(o){t.add(o);const a=vD(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function fw(t,e,n,r){const i=e._rootScopes,s=vD(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=BS(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=BS(a,o,s,l,r),l===null)?!1:dw(Array.from(a),[""],i,s,()=>jK(e,n,r))}function BS(t,e,n,r,i){for(;n;)n=OK(t,e,n,r,i);return n}function jK(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return at(i)&&fe(n)?n:i||{}}function LK(t,e,n,r){let i;for(const s of e)if(i=_D(AK(s,t),n),typeof i<"u")return hw(t,i)?fw(n,r,t,i):i}function _D(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function zS(t){let e=t._keys;return e||(e=t._keys=VK(t._scopes)),e}function VK(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const FK=Number.EPSILON||1e-14,Ra=(t,e)=>e<t.length&&!t[e].skip&&t[e],wD=t=>t==="x"?"y":"x";function UK(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=x0(s,i),l=x0(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,f=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function BK(t,e,n){const r=t.length;let i,s,o,a,l,c=Ra(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Ra(t,u+1),!(!l||!c)){if(sc(e[u],0,FK)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function zK(t,e,n="x"){const r=wD(n),i=t.length;let s,o,a,l=Ra(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Ra(t,c+1),!a)continue;const u=a[n],h=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=h-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=h+s*e[c])}}function $K(t,e="x"){const n=wD(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Ra(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Ra(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?wr(i[o-1])!==wr(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}BK(t,i,s),zK(t,s,e)}function Sd(t,e,n){return Math.max(Math.min(t,n),e)}function WK(t,e){let n,r,i,s,o,a=Qc(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Qc(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Sd(i.cp1x,e.left,e.right),i.cp1y=Sd(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Sd(i.cp2x,e.left,e.right),i.cp2y=Sd(i.cp2y,e.top,e.bottom)))}function HK(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")$K(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=UK(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&WK(t,n)}function pw(){return typeof window<"u"&&typeof document<"u"}function mw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function vf(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Ip=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function qK(t,e){return Ip(t).getPropertyValue(e)}const GK=["top","right","bottom","left"];function Ks(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=GK[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const KK=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function QK(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(KK(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ms(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Ip(n),s=i.boxSizing==="border-box",o=Ks(i,"padding"),a=Ks(i,"border","width"),{x:l,y:c,box:u}=QK(t,n),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:m,height:g}=e;return s&&(m-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/m*n.width/r),y:Math.round((c-f)/g*n.height/r)}}function YK(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&mw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Ip(s),l=Ks(a,"border","width"),c=Ks(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=vf(a.maxWidth,s,"clientWidth"),i=vf(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||gf,maxHeight:i||gf}}const ji=t=>Math.round(t*10)/10;function XK(t,e,n,r){const i=Ip(t),s=Ks(i,"margin"),o=vf(i.maxWidth,t,"clientWidth")||gf,a=vf(i.maxHeight,t,"clientHeight")||gf,l=YK(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=Ks(i,"border","width"),m=Ks(i,"padding");c-=m.width+f.width,u-=m.height+f.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=ji(Math.min(c,o,l.maxWidth)),u=ji(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ji(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=ji(Math.floor(u*r))),{width:c,height:u}}function $S(t,e,n){const r=e||1,i=ji(t.height*r),s=ji(t.width*r);t.height=ji(t.height),t.width=ji(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const JK=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};pw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function WS(t,e){const n=qK(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Os(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function ZK(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function eQ(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Os(t,i,n),a=Os(i,s,n),l=Os(s,e,n),c=Os(o,a,n),u=Os(a,l,n);return Os(c,u,n)}const tQ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},nQ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function da(t,e,n){return t?tQ(e,n):nQ()}function xD(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function bD(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function TD(t){return t==="angle"?{between:Kc,compare:tK,normalize:gn}:{between:Wr,compare:(e,n)=>e-n,normalize:e=>e}}function HS({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function rQ(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=TD(r),l=e.length;let{start:c,end:u,loop:h}=t,f,m;if(h){for(c+=l,u+=l,f=0,m=l;f<m&&o(a(e[c%l][r]),i,s);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function SD(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=TD(r),{start:u,end:h,loop:f,style:m}=rQ(t,e,n),g=[];let v=!1,x=null,w,_,T;const P=()=>l(i,T,w)&&a(i,T)!==0,A=()=>a(s,w)===0||l(s,T,w),O=()=>v||P(),E=()=>!v||A();for(let S=u,k=u;S<=h;++S)_=e[S%o],!_.skip&&(w=c(_[r]),w!==T&&(v=l(w,i,s),x===null&&O()&&(x=a(w,i)===0?S:k),x!==null&&E()&&(g.push(HS({start:x,end:S,loop:f,count:o,style:m})),x=null),k=S,T=w));return x!==null&&g.push(HS({start:x,end:h,loop:f,count:o,style:m})),g}function kD(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=SD(r[i],t.points,e);s.length&&n.push(...s)}return n}function iQ(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function sQ(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function oQ(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=iQ(n,i,s,r);if(r===!0)return qS(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return qS(t,sQ(n,o,l,c),n,e)}function qS(t,e,n,r){return!r||!r.setContext||!n?e:aQ(t,e,n,r)}function aQ(t,e,n,r){const i=t._chart.getContext(),s=GS(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,f=h;function m(g,v,x,w){const _=a?-1:1;if(g!==v){for(g+=l;n[g%l].skip;)g-=_;for(;n[v%l].skip;)v+=_;g%l!==v%l&&(c.push({start:g%l,end:v%l,loop:x,style:w}),u=w,h=v%l)}}for(const g of e){h=a?h:g.start;let v=n[h%l],x;for(f=h+1;f<=g.end;f++){const w=n[f%l];x=GS(r.setContext(xo(i,{type:"segment",p0:v,p1:w,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),lQ(x,u)&&m(h,f-1,g.loop,u),v=w,u=x}h<f-1&&m(h,f-1,g.loop,u)}return c}function GS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function lQ(t,e){if(!e)return!1;const n=[],r=function(i,s){return lw(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function kd(t,e,n){return t.options.clip?t[n]:e[n]}function cQ(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:kd(n,e,"left"),right:kd(n,e,"right"),top:kd(r,e,"top"),bottom:kd(r,e,"bottom")}:e}function ED(t,e){const n=e._clip;if(n.disabled)return!1;const r=cQ(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class uQ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=dD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Cr=new uQ;const KS="transparent",dQ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=LS(t||KS),i=r.valid&&LS(e||KS);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class hQ{constructor(e,n,r,i){const s=n[r];i=Td([e.to,i,s,e.from]);const o=Td([e.from,s,i]);this._active=!0,this._fn=e.fn||dQ[e.type||typeof o],this._easing=oc[e.easing]||oc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Td([e.to,n,i,e.from]),this._from=Td([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class PD{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!fe(e))return;const n=Object.keys(Ze.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!fe(s))return;const o={};for(const a of n)o[a]=s[a];(at(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=pQ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&fQ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let h=s[c];const f=r.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}s[c]=h=new hQ(f,e,c,u),i.push(h)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Cr.add(this._chart,r),!0}}function fQ(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function pQ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function QS(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function mQ(t,e,n){if(n===!1)return!1;const r=QS(t,n),i=QS(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function gQ(t){let e,n,r,i;return fe(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function ID(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function YS(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Ht(c)&&(s||e===0||wr(e)===wr(c))&&(e+=c)}return!u&&!r.all?0:e}function yQ(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function dg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function vQ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function _Q(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function wQ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function XS(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function JS(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=vQ(s,o,r),h=e.length;let f;for(let m=0;m<h;++m){const g=e[m],{[l]:v,[c]:x}=g,w=g._stacks||(g._stacks={});f=w[c]=wQ(i,u,v),f[a]=x,f._top=XS(f,o,!0,r.type),f._bottom=XS(f,o,!1,r.type);const _=f._visualValues||(f._visualValues={});_[a]=x}}function hg(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function xQ(t,e){return xo(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function bQ(t,e,n){return xo(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ml(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const fg=t=>t==="reset"||t==="none",ZS=(t,e)=>e?t:Object.assign({},t),TQ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:ID(n,!0),values:null};class Qs{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=dg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ml(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(h,f,m,g)=>h==="x"?f:h==="r"?g:m,s=n.xAxisID=ce(r.xAxisID,hg(e,"x")),o=n.yAxisID=ce(r.yAxisID,hg(e,"y")),a=n.rAxisID=ce(r.rAxisID,hg(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&MS(this._data,this),e._stacked&&ml(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(fe(n)){const i=this._cachedMeta;this._data=yQ(n,i)}else if(r!==n){if(r){MS(r,this);const i=this._cachedMeta;ml(i),i._parsed=[]}n&&Object.isExtensible(n)&&sK(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=dg(n.vScale,n),n.stack!==r.stack&&(i=!0,ml(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(JS(this,n._parsed),n._stacked=dg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,h,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{at(i[e])?f=this.parseArrayData(r,i,e,n):fe(i[e])?f=this.parseObjectData(r,i,e,n):f=this.parsePrimitiveData(r,i,e,n);const m=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=h=f[u],l&&(m()&&(l=!1),c=h);r._sorted=l}o&&JS(this,f)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(i);let f,m,g;for(f=0,m=i;f<m;++f)g=f+r,h[f]={[a]:u||s.parse(c[g],g),[l]:o.parse(n[g],g)};return h}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,h;for(l=0,c=i;l<c;++l)u=l+r,h=n[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,h,f,m;for(u=0,h=i;u<h;++u)f=u+r,m=n[f],c[u]={x:s.parse(co(m,a),f),y:o.parse(co(m,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:ID(i,!0),values:n._stacks[e.axis]._visualValues};return YS(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=YS(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=TQ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=_Q(a);let f,m;function g(){m=i[f];const v=m[a.axis];return!Ht(m[e.axis])||u>v||h<v}for(f=0;f<o&&!(!g()&&(this.updateRangeFromParsed(c,e,m,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Ht(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=gQ(ce(this.options.clip,mQ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=bQ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=xQ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&qc(r);if(a)return ZS(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),m=Object.keys(Ze.elements[e]),g=()=>this.getContext(r,i,n),v=c.resolveNamedOptions(f,m,g,h);return v.$shared&&(v.$shared=l,s[o]=Object.freeze(ZS(v,l))),v}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,r,n))}const c=new PD(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||fg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){fg(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!fg(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&ml(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}K(Qs,"defaults",{}),K(Qs,"datasetElementType",null),K(Qs,"dataElementType",null);function SQ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=uD(r.sort((i,s)=>i-s))}return t._cache.$bar}function kQ(t){const e=t.iScale,n=SQ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(qc(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function EQ(t,e,n,r){const i=n.barThickness;let s,o;return Te(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function PQ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function IQ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function CD(t,e,n,r){return at(t)?IQ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function ek(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,h,f;for(c=n,u=n+r;c<u;++c)f=e[c],h={},h[i.axis]=a||i.parse(o[c],c),l.push(CD(f,h,s,c));return l}function pg(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function CQ(t,e,n){return t!==0?wr(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function AQ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function RQ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=AQ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[tk(u,o,a,l)]=!0,i=c)),s[tk(i,o,a,l)]=!0,t.borderSkipped=s}function tk(t,e,n,r){return r?(t=DQ(t,e,n),t=nk(t,n,e)):t=nk(t,e,n),t}function DQ(t,e,n){return t===e?n:t===n?e:t}function nk(t,e,n){return t==="start"?e:t==="end"?n:t}function NQ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class rh extends Qs{parsePrimitiveData(e,n,r,i){return ek(e,n,r,i)}parseArrayData(e,n,r,i){return ek(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let f,m,g,v;for(f=r,m=r+i;f<m;++f)v=n[f],g={},g[s.axis]=s.parse(co(v,c),f),h.push(CD(co(v,u),g,o,f));return h}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=pg(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const g=this.getParsed(m),v=s||Te(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,u),w=(g._stacks||{})[a.axis],_={horizontal:c,base:v.base,enableBorderRadius:!w||pg(g._custom)||o===w._top||o===w._bottom,x:c?v.head:x.center,y:c?x.center:v.head,height:c?x.size:Math.abs(v.size),width:c?Math.abs(v.size):x.size};f&&(_.options=h||this.resolveDataElementOptions(m,e[m].active?"active":i));const T=_.options||e[m].options;RQ(_,T,w,o),NQ(_,T,u.ratio),this.updateElement(e[m],m,_,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const h=u._parsed.find(m=>m[r.axis]===l),f=h&&h[u.vScale.axis];if(Te(f)||isNaN(f))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[ce(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||kQ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=pg(c);let h=l[n.axis],f=0,m=r?this.applyStack(n,l,r):h,g,v;m!==h&&(f=m-h,m=h),u&&(h=c.barStart,m=c.barEnd-c.barStart,h!==0&&wr(h)!==wr(c.barEnd)&&(f=0),f+=h);const x=!Te(s)&&!u?s:f;let w=n.getPixelForValue(x);if(this.chart.getDataVisibility(e)?g=n.getPixelForValue(f+m):g=w,v=g-w,Math.abs(v)<o){v=CQ(v,n,a)*o,h===a&&(w-=v/2);const _=n.getPixelForDecimal(0),T=n.getPixelForDecimal(1),P=Math.min(_,T),A=Math.max(_,T);w=Math.max(Math.min(w,A),P),g=w+v,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(g)-n.getValueForPixel(w))}if(w===n.getPixelForValue(a)){const _=wr(v)*n.getLineWidthForValue(a)/2;w+=_,v-=_}return{size:v,base:w,head:g,center:g+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=ce(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=s?this._getStackCount(e):n.stackCount,h=i.barThickness==="flex"?PQ(e,n,i,u*c):EQ(e,n,i,u*c),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(ce(f,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+m;a=h.start+h.chunk*g+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}K(rh,"id","bar"),K(rh,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),K(rh,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function MQ(t,e,n){let r=1,i=1,s=0,o=0;if(e<ze){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),f=Math.sin(l),m=(T,P,A)=>Kc(T,a,l,!0)?1:Math.max(P,P*n,A,A*n),g=(T,P,A)=>Kc(T,a,l,!0)?-1:Math.min(P,P*n,A,A*n),v=m(0,c,h),x=m(ht,u,f),w=g(Ee,c,h),_=g(Ee+ht,u,f);r=(v-w)/2,i=(x-_)/2,s=-(v+w)/2,o=-(x+_)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Dl extends Qs{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(fe(r[e])){const{key:l="value"}=this._parsing;s=c=>+co(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return $r(this.options.rotation-90)}_getCircumference(){return $r(this.options.circumference)}_getRotationExtents(){let e=ze,n=-ze;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(zG(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:g,offsetY:v}=MQ(h,u,l),x=(r.width-o)/f,w=(r.height-o)/m,_=Math.max(Math.min(x,w)/2,0),T=sD(this.options.radius,_),P=Math.max(T*l,0),A=(T-P)/this._getVisibleDatasetWeightTotal();this.offsetX=g*T,this.offsetY=v*T,i.total=this.calculateTotal(),this.outerRadius=T-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/ze)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=s&&c.animateScale,m=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:v,includeOptions:x}=this._getSharedOptions(n,i);let w=this._getRotation(),_;for(_=0;_<n;++_)w+=this._circumference(_,s);for(_=n;_<n+r;++_){const T=this._circumference(_,s),P=e[_],A={x:u+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+T,circumference:T,outerRadius:g,innerRadius:m};x&&(A.options=v||this.resolveDataElementOptions(_,P.active?"active":i)),w+=T,this.updateElement(P,_,A,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ze*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=cw(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ce(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}K(Dl,"id","doughnut"),K(Dl,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),K(Dl,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),K(Dl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const h=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:h.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(c),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:i,pointStyle:r,borderRadius:o&&(a||h.borderRadius),index:c}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class ih extends Qs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=lK(n,i,o);this._drawStart=a,this._drawCount=l,cK(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,i),f=o.axis,m=a.axis,{spanGaps:g,segment:v}=this.options,x=Gc(g)?g:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||i==="none",_=n+r,T=e.length;let P=n>0&&this.getParsed(n-1);for(let A=0;A<T;++A){const O=e[A],E=w?O:{};if(A<n||A>=_){E.skip=!0;continue}const S=this.getParsed(A),k=Te(S[m]),C=E[f]=o.getPixelForValue(S[f],A),D=E[m]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,S,l):S[m],A);E.skip=isNaN(C)||isNaN(D)||k,E.stop=A>0&&Math.abs(S[f]-P[f])>x,v&&(E.parsed=S,E.raw=c.data[A]),h&&(E.options=u||this.resolveDataElementOptions(A,O.active?"active":i)),w||this.updateElement(O,A,E,i),P=S}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}K(ih,"id","line"),K(ih,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),K(ih,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Es(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class gw{constructor(e){K(this,"options");this.options=e||{}}static override(e){Object.assign(gw.prototype,e)}init(){}formats(){return Es()}parse(){return Es()}format(){return Es()}add(){return Es()}diff(){return Es()}startOf(){return Es()}endOf(){return Es()}}var OQ={_date:gw};function jQ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?rK:$s;if(r){if(i._sharedOptions){const u=s[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=c(s,e,n-h),m=c(s,e,n+h);return{lo:f.lo,hi:m.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:h}=i._cachedMeta,{_parsed:f}=t,m=f.slice(0,u.lo+1).reverse().findIndex(v=>!Te(v[h.axis]));u.lo-=Math.max(0,m);const g=f.slice(u.hi).findIndex(v=>!Te(v[h.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:s.length-1}}function Cp(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:f}=jQ(s[a],e,o,i);for(let m=h;m<=f;++m){const g=u[m];g.skip||r(g,c,m)}}}function LQ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function mg(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Cp(t,n,e,function(a,l,c){!i&&!Qc(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function VQ(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=lD(o,{x:e.x,y:e.y});Kc(h,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return Cp(t,n,e,s),i}function FQ(t,e,n,r,i,s){let o=[];const a=LQ(n);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const m=u.inRange(e.x,e.y,i);if(r&&!m)return;const g=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(g))&&!m)return;const x=a(e,g);x<l?(o=[{element:u,datasetIndex:h,index:f}],l=x):x===l&&o.push({element:u,datasetIndex:h,index:f})}return Cp(t,n,e,c),o}function gg(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?VQ(t,e,n,i):FQ(t,e,n,r,i,s)}function rk(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Cp(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var UQ={modes:{index(t,e,n,r){const i=Ms(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?mg(t,i,s,r,o):gg(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=Ms(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?mg(t,i,s,r,o):gg(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=Ms(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return mg(t,i,s,r,o)},nearest(t,e,n,r){const i=Ms(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return gg(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Ms(e,t);return rk(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Ms(e,t);return rk(t,i,"y",n.intersect,r)}}};const AD=["left","top","right","bottom"];function gl(t,e){return t.filter(n=>n.pos===e)}function ik(t,e){return t.filter(n=>AD.indexOf(n.pos)===-1&&n.box.axis===e)}function yl(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function BQ(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function zQ(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!AD.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function $Q(t,e){const n=zQ(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function WQ(t){const e=BQ(t),n=yl(e.filter(c=>c.box.fullSize),!0),r=yl(gl(e,"left"),!0),i=yl(gl(e,"right")),s=yl(gl(e,"top"),!0),o=yl(gl(e,"bottom")),a=ik(e,"x"),l=ik(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:gl(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function sk(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function RD(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function HQ(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!fe(i)){n.size&&(t[i]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[i]+=n.size}s.getPadding&&RD(o,s.getPadding());const a=Math.max(0,e.outerWidth-sk(o,t,"left","right")),l=Math.max(0,e.outerHeight-sk(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function qQ(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function GQ(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Nl(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,GQ(a.horizontal,e));const{same:h,other:f}=HQ(e,n,a,r);c|=h&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&Nl(i,e,n,r)||u}function Ed(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function ok(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,f=c.size||l.height;qc(c.start)&&(o=c.start),l.fullSize?Ed(l,i.left,o,n.outerWidth-i.right-i.left,f):Ed(l,e.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,f=c.size||l.width;qc(c.start)&&(s=c.start),l.fullSize?Ed(l,s,i.top,f,n.outerHeight-i.bottom-i.top):Ed(l,s,e.top+c.placed,f,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var Nn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Bn(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=WQ(t.boxes),l=a.vertical,c=a.horizontal;ke(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,x)=>x.box.options&&x.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);RD(f,Bn(r));const m=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),g=$Q(l.concat(c),h);Nl(a.fullSize,m,h,g),Nl(l,m,h,g),Nl(c,m,h,g)&&Nl(l,m,h,g),qQ(m),ok(a.leftAndTop,m,h,g),m.x+=m.w,m.y+=m.h,ok(a.rightAndBottom,m,h,g),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ke(a.chartArea,v=>{const x=v.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class DD{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class KQ extends DD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const sh="$chartjs",QQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ak=t=>t===null||t==="";function YQ(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[sh]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ak(i)){const s=WS(t,"width");s!==void 0&&(t.width=s)}if(ak(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=WS(t,"height");s!==void 0&&(t.height=s)}return t}const ND=JK?{passive:!0}:!1;function XQ(t,e,n){t&&t.addEventListener(e,n,ND)}function JQ(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,ND)}function ZQ(t,e){const n=QQ[t.type]||t.type,{x:r,y:i}=Ms(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function _f(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function eY(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||_f(a.addedNodes,r),o=o&&!_f(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function tY(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||_f(a.removedNodes,r),o=o&&!_f(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Xc=new Map;let lk=0;function MD(){const t=window.devicePixelRatio;t!==lk&&(lk=t,Xc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function nY(t,e){Xc.size||window.addEventListener("resize",MD),Xc.set(t,e)}function rY(t){Xc.delete(t),Xc.size||window.removeEventListener("resize",MD)}function iY(t,e,n){const r=t.canvas,i=r&&mw(r);if(!i)return;const s=hD((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),nY(t,s),o}function yg(t,e,n){n&&n.disconnect(),e==="resize"&&rY(t)}function sY(t,e,n){const r=t.canvas,i=hD(s=>{t.ctx!==null&&n(ZQ(s,t))},t);return XQ(r,e,i),i}class oY extends DD{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(YQ(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[sh])return!1;const r=n[sh].initial;["height","width"].forEach(s=>{const o=r[s];Te(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[sh],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:eY,detach:tY,resize:iY}[n]||sY;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:yg,detach:yg,resize:yg}[n]||JQ)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return XK(e,n,r,i)}isAttached(e){const n=e&&mw(e);return!!(n&&n.isConnected)}}function aY(t){return!pw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?KQ:oY}var Dd;let di=(Dd=class{constructor(){K(this,"x");K(this,"y");K(this,"active",!1);K(this,"options");K(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Gc(this.x)&&Gc(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},K(Dd,"defaults",{}),K(Dd,"defaultRoutes"),Dd);function lY(t,e){const n=t.options.ticks,r=cY(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?dY(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return hY(e,c,s,o/i),c;const u=uY(s,e,i);if(o>0){let h,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(Pd(e,c,u,Te(m)?0:a-m,a),h=0,f=o-1;h<f;h++)Pd(e,c,u,s[h],s[h+1]);return Pd(e,c,u,l,Te(m)?e.length:l+m),c}return Pd(e,c,u),c}function cY(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function uY(t,e,n){const r=fY(t),i=e.length/n;if(!r)return Math.max(i,1);const s=YG(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function dY(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function hY(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Pd(t,e,n,r,i){const s=ce(r,0),o=Math.min(ce(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function fY(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const pY=t=>t==="left"?"right":t==="right"?"left":t,ck=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,uk=(t,e)=>Math.min(e||t,t);function dk(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function mY(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function gY(t,e){ke(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function vl(t){return t.drawTicks?t.tickLength:0}function hk(t,e){if(!t.display)return 0;const n=zt(t.font,e),r=Bn(t.padding);return(at(t.text)?t.text.length:1)*n.lineHeight+r.height}function yY(t,e){return xo(t,{scale:e,type:"scale"})}function vY(t,e,n){return xo(t,{tick:n,index:e,type:"tick"})}function _Y(t,e,n){let r=aw(t);return(n&&e!=="right"||!n&&e==="right")&&(r=pY(r)),r}function wY(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,f,m,g;const v=o-i,x=a-s;if(t.isHorizontal()){if(m=Lt(r,s,a),fe(n)){const w=Object.keys(n)[0],_=n[w];g=u[w].getPixelForValue(_)+v-e}else n==="center"?g=(c.bottom+c.top)/2+v-e:g=ck(t,n,e);f=a-s}else{if(fe(n)){const w=Object.keys(n)[0],_=n[w];m=u[w].getPixelForValue(_)-x+e}else n==="center"?m=(c.left+c.right)/2-x+e:m=ck(t,n,e);g=Lt(r,o,i),h=n==="left"?-ht:ht}return{titleX:m,titleY:g,maxWidth:f,rotation:h}}class $a extends di{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=sr(e,Number.POSITIVE_INFINITY),n=sr(n,Number.NEGATIVE_INFINITY),r=sr(r,Number.POSITIVE_INFINITY),i=sr(i,Number.NEGATIVE_INFINITY),{min:sr(e,r),max:sr(n,i),minDefined:Ht(e),maxDefined:Ht(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:sr(n,sr(r,n)),max:sr(r,sr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Me(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=CK(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?dk(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=lY(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Me(this.options.afterUpdate,[this])}beforeSetDimensions(){Me(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Me(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Me(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Me(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Me(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Me(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Me(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=uk(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=Bt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),h+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-vl(e.grid)-n.padding-hk(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=eK(Math.min(Math.asin(Bt((u.highest.height+6)/a,-1,1)),Math.asin(Bt(l/c,-1,1))-Math.asin(Bt(f/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Me(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Me(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=hk(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=vl(s)+l):(e.height=this.maxHeight,e.width=vl(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),m=r.padding*2,g=$r(this.labelRotation),v=Math.cos(g),x=Math.sin(g);if(a){const w=r.mirror?0:x*h.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+w+m)}else{const w=r.mirror?0:v*h.width+x*f.height;e.width=Math.min(this.maxWidth,e.width+w+m)}this._calculatePadding(c,u,x,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?c?(f=i*e.width,m=r*n.height):(f=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Me(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Te(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=dk(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/uk(n,r));let c=0,u=0,h,f,m,g,v,x,w,_,T,P,A;for(h=0;h<n;h+=l){if(g=e[h].label,v=this._resolveTickFontOptions(h),i.font=x=v.string,w=s[x]=s[x]||{data:{},gc:[]},_=v.lineHeight,T=P=0,!Te(g)&&!at(g))T=FS(i,w.data,w.gc,T,g),P=_;else if(at(g))for(f=0,m=g.length;f<m;++f)A=g[f],!Te(A)&&!at(A)&&(T=FS(i,w.data,w.gc,T,A),P+=_);o.push(T),a.push(P),c=Math.max(T,c),u=Math.max(P,u)}gY(s,n);const O=o.indexOf(c),E=a.indexOf(u),S=k=>({width:o[k]||0,height:a[k]||0});return{first:S(0),last:S(n-1),widest:S(O),highest:S(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return nK(this._alignToPixels?ks(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=vY(this.getContext(),e,r))}return this.$context||(this.$context=yY(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=$r(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=vl(s),m=[],g=a.setContext(this.getContext()),v=g.display?g.width:0,x=v/2,w=function(Q){return ks(r,Q,v)};let _,T,P,A,O,E,S,k,C,D,M,R;if(o==="top")_=w(this.bottom),E=this.bottom-f,k=_-x,D=w(e.top)+x,R=e.bottom;else if(o==="bottom")_=w(this.top),D=e.top,R=w(e.bottom)-x,E=_+x,k=this.top+f;else if(o==="left")_=w(this.right),O=this.right-f,S=_-x,C=w(e.left)+x,M=e.right;else if(o==="right")_=w(this.left),C=e.left,M=w(e.right)-x,O=_+x,S=this.left+f;else if(n==="x"){if(o==="center")_=w((e.top+e.bottom)/2+.5);else if(fe(o)){const Q=Object.keys(o)[0],se=o[Q];_=w(this.chart.scales[Q].getPixelForValue(se))}D=e.top,R=e.bottom,E=_+x,k=E+f}else if(n==="y"){if(o==="center")_=w((e.left+e.right)/2);else if(fe(o)){const Q=Object.keys(o)[0],se=o[Q];_=w(this.chart.scales[Q].getPixelForValue(se))}O=_-x,S=O-f,C=e.left,M=e.right}const ee=ce(i.ticks.maxTicksLimit,h),q=Math.max(1,Math.ceil(h/ee));for(T=0;T<h;T+=q){const Q=this.getContext(T),se=s.setContext(Q),B=a.setContext(Q),W=se.lineWidth,Z=se.color,J=B.dash||[],le=B.dashOffset,be=se.tickWidth,tt=se.tickColor,pt=se.tickBorderDash||[],Fe=se.tickBorderDashOffset;P=mY(this,T,l),P!==void 0&&(A=ks(r,P,W),c?O=S=C=M=A:E=k=D=R=A,m.push({tx1:O,ty1:E,tx2:S,ty2:k,x1:C,y1:D,x2:M,y2:R,width:W,color:Z,borderDash:J,borderDashOffset:le,tickWidth:be,tickColor:tt,tickBorderDash:pt,tickBorderDashOffset:Fe}))}return this._ticksLength=h,this._borderValue=_,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,f=vl(r.grid),m=f+u,g=h?-u:m,v=-$r(this.labelRotation),x=[];let w,_,T,P,A,O,E,S,k,C,D,M,R="middle";if(i==="top")O=this.bottom-g,E=this._getXAxisLabelAlignment();else if(i==="bottom")O=this.top+g,E=this._getXAxisLabelAlignment();else if(i==="left"){const q=this._getYAxisLabelAlignment(f);E=q.textAlign,A=q.x}else if(i==="right"){const q=this._getYAxisLabelAlignment(f);E=q.textAlign,A=q.x}else if(n==="x"){if(i==="center")O=(e.top+e.bottom)/2+m;else if(fe(i)){const q=Object.keys(i)[0],Q=i[q];O=this.chart.scales[q].getPixelForValue(Q)+m}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")A=(e.left+e.right)/2-m;else if(fe(i)){const q=Object.keys(i)[0],Q=i[q];A=this.chart.scales[q].getPixelForValue(Q)}E=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const ee=this._getLabelSizes();for(w=0,_=a.length;w<_;++w){T=a[w],P=T.label;const q=s.setContext(this.getContext(w));S=this.getPixelForTick(w)+s.labelOffset,k=this._resolveTickFontOptions(w),C=k.lineHeight,D=at(P)?P.length:1;const Q=D/2,se=q.color,B=q.textStrokeColor,W=q.textStrokeWidth;let Z=E;o?(A=S,E==="inner"&&(w===_-1?Z=this.options.reverse?"left":"right":w===0?Z=this.options.reverse?"right":"left":Z="center"),i==="top"?c==="near"||v!==0?M=-D*C+C/2:c==="center"?M=-ee.highest.height/2-Q*C+C:M=-ee.highest.height+C/2:c==="near"||v!==0?M=C/2:c==="center"?M=ee.highest.height/2-Q*C:M=ee.highest.height-D*C,h&&(M*=-1),v!==0&&!q.showLabelBackdrop&&(A+=C/2*Math.sin(v))):(O=S,M=(1-D)*C/2);let J;if(q.showLabelBackdrop){const le=Bn(q.backdropPadding),be=ee.heights[w],tt=ee.widths[w];let pt=M-le.top,Fe=0-le.left;switch(R){case"middle":pt-=be/2;break;case"bottom":pt-=be;break}switch(E){case"center":Fe-=tt/2;break;case"right":Fe-=tt;break;case"inner":w===_-1?Fe-=tt:w>0&&(Fe-=tt/2);break}J={left:Fe,top:pt,width:tt+le.width,height:be+le.height,color:q.backdropColor}}x.push({label:P,font:k,textOffset:M,options:{rotation:v,color:se,strokeColor:B,strokeWidth:W,textAlign:Z,textBaseline:R,translation:[A,O],backdrop:J}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-$r(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=ks(e,this.left,o)-o/2,u=ks(e,this.right,a)+a/2,h=f=l):(h=ks(e,this.top,o)-o/2,f=ks(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Ep(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Yc(r,c,0,u,l,a)}i&&Pp(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=zt(r.font),o=Bn(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||fe(n)?(l+=o.bottom,at(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=wY(this,l,n,a);Yc(e,r.text,0,0,s,{color:r.color,maxWidth:h,rotation:f,textAlign:_Y(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ce(e.grid&&e.grid.z,-1),i=ce(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==$a.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return zt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Id{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;TY(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,xY(e,o,r),this.override&&Ze.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Ze[i]&&(delete Ze[i][r],this.override&&delete uo[r])}}function xY(t,e,n){const r=Hc(Object.create(null),[n?Ze.get(n):{},Ze.get(e),t.defaults]);Ze.set(e,r),t.defaultRoutes&&bY(e,t.defaultRoutes),t.descriptors&&Ze.describe(e,t.descriptors)}function bY(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ze.route(s,i,l,a)})}function TY(t){return"id"in t&&"defaults"in t}class SY{constructor(){this.controllers=new Id(Qs,"datasets",!0),this.elements=new Id(di,"elements"),this.plugins=new Id(Object,"plugins"),this.scales=new Id($a,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ke(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=sw(e);Me(r["before"+i],[],r),n[e](r),Me(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var lr=new SY;class kY{constructor(){this._init=void 0}notify(e,n,r,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Me(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Te(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ce(r.options&&r.options.plugins,{}),s=EY(r);return i===!1&&!n?[]:IY(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function EY(t){const e={},n=[],r=Object.keys(lr.plugins.items);for(let s=0;s<r.length;s++)n.push(lr.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function PY(t,e){return!e&&t===!1?null:t===!0?{}:t}function IY(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=PY(r[l],i);c!==null&&s.push({plugin:a,options:CY(t.config,{plugin:a,local:n[l]},c,o)})}return s}function CY(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function S0(t,e){const n=Ze.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function AY(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function RY(t,e){return t===e?"_index_":"_value_"}function fk(t){if(t==="x"||t==="y"||t==="r")return t}function DY(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function k0(t,...e){if(fk(t))return t;for(const n of e){const r=n.axis||DY(n.position)||t.length>1&&fk(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function pk(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function NY(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return pk(t,"x",n[0])||pk(t,"y",n[0])}return{}}function MY(t,e){const n=uo[t.type]||{scales:{}},r=e.scales||{},i=S0(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!fe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=k0(o,a,NY(o,t),Ze.scales[a.type]),c=RY(l,i),u=n.scales||{};s[o]=ic(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||S0(a,e),u=(uo[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=AY(h,l),m=o[f+"AxisID"]||f;s[m]=s[m]||Object.create(null),ic(s[m],[{axis:f},r[m],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];ic(a,[Ze.scales[a.type],Ze.scale])}),s}function OD(t){const e=t.options||(t.options={});e.plugins=ce(e.plugins,{}),e.scales=MY(t,e)}function jD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function OY(t){return t=t||{},t.data=jD(t.data),OD(t),t}const mk=new Map,LD=new Set;function Cd(t,e){let n=mk.get(t);return n||(n=e(),mk.set(t,n),LD.add(n)),n}const _l=(t,e,n)=>{const r=co(e,n);r!==void 0&&t.add(r)};class jY{constructor(e){this._config=OY(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=jD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),OD(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Cd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Cd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Cd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Cd(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>_l(l,e,h))),u.forEach(h=>_l(l,i,h)),u.forEach(h=>_l(l,uo[s]||{},h)),u.forEach(h=>_l(l,Ze,h)),u.forEach(h=>_l(l,b0,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),LD.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,uo[n]||{},Ze.datasets[n]||{},{type:n},Ze,b0]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=gk(this._resolverCache,e,i);let l=o;if(VY(o,n)){s.$shared=!1,r=as(r)?r():r;const c=this.createResolver(e,r,a);l=Aa(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=gk(this._resolverCache,e,r);return fe(n)?Aa(s,n,void 0,i):s}}function gk(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:dw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const LY=t=>fe(t)&&Object.getOwnPropertyNames(t).some(e=>as(t[e]));function VY(t,e){const{isScriptable:n,isIndexable:r}=gD(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(as(a)||LY(a))||o&&at(a))return!0}return!1}var FY="4.5.1";const UY=["top","bottom","left","right","chartArea"];function yk(t,e){return t==="top"||t==="bottom"||UY.indexOf(t)===-1&&e==="x"}function vk(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function _k(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Me(n&&n.onComplete,[t],e)}function BY(t){const e=t.chart,n=e.options.animation;Me(n&&n.onProgress,[t],e)}function VD(t){return pw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const oh={},wk=t=>{const e=VD(t);return Object.values(oh).filter(n=>n.canvas===e).pop()};function zY(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function $Y(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var vi;let Ap=(vi=class{static register(...e){lr.add(...e),xk()}static unregister(...e){lr.remove(...e),xk()}constructor(e,n){const r=this.config=new jY(n),i=VD(e),s=wk(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||aY(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=BG(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new kY,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=oK(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],oh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Cr.listen(this,"complete",_k),Cr.listen(this,"progress",BY),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Te(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return lr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$S(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return US(this.canvas,this.ctx),this}stop(){return Cr.stop(this),this}resize(e,n){Cr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,$S(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Me(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ke(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=k0(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ke(s,o=>{const a=o.options,l=a.id,c=k0(l,a),u=ce(a.type,o.dtype);(a.position===void 0||yk(a.position,c)!==yk(o.dposition))&&(a.position=o.dposition),i[l]=!0;let h=null;if(l in r&&r[l].type===u)h=r[l];else{const f=lr.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),ke(i,(o,a)=>{o||delete r[a]}),ke(r,o=>{Nn.configure(this,o,o.options),Nn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(vk("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||S0(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=lr.getController(a),{datasetElementType:c,dataElementType:u}=Ze.datasets[a];Object.assign(l,{dataElementType:lr.getElement(u),datasetElementType:c&&lr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ke(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!i&&s.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ke(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(vk("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ke(this.scales,e=>{Nn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!AS(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;zY(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!AS(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Nn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ke(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,as(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Cr.has(this)?this.attached&&!Cr.running(this)&&Cr.start(this):(this.draw(),_k({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=ED(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Ep(n,i),e.controller.draw(),i&&Pp(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Qc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=UQ.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=xo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);qc(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Cr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),US(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete oh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ke(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ke(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ke(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!pf(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=GG(e),c=$Y(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Me(s.onHover,[e,a,this],this),l&&Me(s.onClick,[e,a,this],this));const u=!pf(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},K(vi,"defaults",Ze),K(vi,"instances",oh),K(vi,"overrides",uo),K(vi,"registry",lr),K(vi,"version",FY),K(vi,"getChart",wk),vi);function xk(){return ke(Ap.instances,t=>t._plugins.invalidate())}function WY(t,e,n){const{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/o,gn(r-n));if(t.beginPath(),t.arc(i,s,o-c/2,r+h/2,n-h/2),a>0){const f=Math.min(c/a,gn(r-n));t.arc(i,s,a+c/2,n-f/2,r+f/2,!0)}else{const f=Math.min(c/2,o*gn(r-n));if(u==="round")t.arc(i,s,f,n-Ee/2,r+Ee/2,!0);else if(u==="bevel"){const m=2*f*f,g=-m*Math.cos(n+Ee/2)+i,v=-m*Math.sin(n+Ee/2)+s,x=m*Math.cos(r+Ee/2)+i,w=m*Math.sin(r+Ee/2)+s;t.lineTo(g,v),t.lineTo(x,w)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function HY(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+ht,r-ht),t.closePath(),t.clip()}function qY(t){return uw(t,["outerStart","outerEnd","innerStart","innerEnd"])}function GY(t,e,n,r){const i=qY(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Bt(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Bt(i.innerStart,0,o),innerEnd:Bt(i.innerEnd,0,o)}}function Ao(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function wf(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+r+n-c,0),f=u>0?u+r+n+c:0;let m=0;const g=i-l;if(r){const q=u>0?u-r:0,Q=h>0?h-r:0,se=(q+Q)/2,B=se!==0?g*se/(se+r):g;m=(g-B)/2}const v=Math.max(.001,g*h-n/Ee)/h,x=(g-v)/2,w=l+x+m,_=i-x-m,{outerStart:T,outerEnd:P,innerStart:A,innerEnd:O}=GY(e,f,h,_-w),E=h-T,S=h-P,k=w+T/E,C=_-P/S,D=f+A,M=f+O,R=w+A/D,ee=_-O/M;if(t.beginPath(),s){const q=(k+C)/2;if(t.arc(o,a,h,k,q),t.arc(o,a,h,q,C),P>0){const W=Ao(S,C,o,a);t.arc(W.x,W.y,P,C,_+ht)}const Q=Ao(M,_,o,a);if(t.lineTo(Q.x,Q.y),O>0){const W=Ao(M,ee,o,a);t.arc(W.x,W.y,O,_+ht,ee+Math.PI)}const se=(_-O/f+(w+A/f))/2;if(t.arc(o,a,f,_-O/f,se,!0),t.arc(o,a,f,se,w+A/f,!0),A>0){const W=Ao(D,R,o,a);t.arc(W.x,W.y,A,R+Math.PI,w-ht)}const B=Ao(E,w,o,a);if(t.lineTo(B.x,B.y),T>0){const W=Ao(E,k,o,a);t.arc(W.x,W.y,T,w-ht,k)}}else{t.moveTo(o,a);const q=Math.cos(k)*h+o,Q=Math.sin(k)*h+a;t.lineTo(q,Q);const se=Math.cos(C)*h+o,B=Math.sin(C)*h+a;t.lineTo(se,B)}t.closePath()}function KY(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){wf(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%ze||ze))}return wf(t,e,n,r,l,i),t.fill(),l}function QY(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:f,borderRadius:m}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=f,g?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let v=e.endAngle;if(s){wf(t,e,n,r,v,i);for(let x=0;x<s;++x)t.stroke();isNaN(a)||(v=o+(a%ze||ze))}g&&HY(t,e,v),l.selfJoin&&v-o>=Ee&&m===0&&u!=="miter"&&WY(t,e,v),s||(wf(t,e,n,r,v,i),t.stroke())}class Ml extends di{constructor(n){super();K(this,"circumference");K(this,"endAngle");K(this,"fullCircles");K(this,"innerRadius");K(this,"outerRadius");K(this,"pixelMargin");K(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=lD(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,g=ce(f,c-l),v=Kc(o,l,c)&&l!==c,x=g>=ze||v,w=Wr(a,u+m,h+m);return x&&w}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(s+o)/2,f=(a+l+u+c)/2;return{x:r+Math.cos(h)*f,y:i+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>ze?Math.floor(i/ze):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Ee,i||0)),u=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,KY(n,this,u,o,a),QY(n,this,u,o,a),n.restore()}}K(Ml,"id","arc"),K(Ml,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),K(Ml,"defaultRoutes",{backgroundColor:"backgroundColor"}),K(Ml,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function FD(t,e,n=e){t.lineCap=ce(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ce(n.borderDash,e.borderDash)),t.lineDashOffset=ce(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ce(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ce(n.borderWidth,e.borderWidth),t.strokeStyle=ce(n.borderColor,e.borderColor)}function YY(t,e,n){t.lineTo(n.x,n.y)}function XY(t){return t.stepped?wK:t.tension||t.cubicInterpolationMode==="monotone"?xK:YY}function UD(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function JY(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=UD(i,n,r),u=XY(s);let{move:h=!0,reverse:f}=r||{},m,g,v;for(m=0;m<=c;++m)g=i[(a+(f?c-m:m))%o],!g.skip&&(h?(t.moveTo(g.x,g.y),h=!1):u(t,v,g,f,s.stepped),v=g);return l&&(g=i[(a+(f?c:0))%o],u(t,v,g,f,s.stepped)),!!l}function ZY(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=UD(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,h=0,f,m,g,v,x,w;const _=P=>(o+(c?a-P:P))%s,T=()=>{v!==x&&(t.lineTo(u,x),t.lineTo(u,v),t.lineTo(u,w))};for(l&&(m=i[_(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=i[_(f)],m.skip)continue;const P=m.x,A=m.y,O=P|0;O===g?(A<v?v=A:A>x&&(x=A),u=(h*u+P)/++h):(T(),t.lineTo(P,A),g=O,h=0,v=x=A),w=A}T()}function E0(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?ZY:JY}function eX(t){return t.stepped?ZK:t.tension||t.cubicInterpolationMode==="monotone"?eQ:Os}function tX(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),FD(t,e.options),t.stroke(i)}function nX(t,e,n,r){const{segments:i,options:s}=e,o=E0(e);for(const a of i)FD(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const rX=typeof Path2D=="function";function iX(t,e,n,r){rX&&!e.options.segment?tX(t,e,n,r):nX(t,e,n,r)}class Li extends di{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;HK(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=oQ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=kD(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=eX(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:f}=o[c],m=s[h],g=s[f];if(m===g){a.push(m);continue}const v=Math.abs((i-m[n])/(g[n]-m[n])),x=l(m,g,v,r.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,r){return E0(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=E0(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),iX(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}K(Li,"id","line"),K(Li,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),K(Li,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),K(Li,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function bk(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class ah extends di{constructor(n){super();K(this,"parsed");K(this,"skip");K(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return bk(this,n,"x",r)}inYRange(n,r){return bk(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Qc(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,T0(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}K(ah,"id","point"),K(ah,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),K(ah,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function BD(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-h,u=r+h):(h=s/2,a=n-h,l=n+h,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function Vi(t,e,n,r){return t?0:Bt(e,n,r)}function sX(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=mD(r);return{t:Vi(i.top,s.top,0,n),r:Vi(i.right,s.right,0,e),b:Vi(i.bottom,s.bottom,0,n),l:Vi(i.left,s.left,0,e)}}function oX(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=ua(i),o=Math.min(e,n),a=t.borderSkipped,l=r||fe(i);return{topLeft:Vi(!l||a.top||a.left,s.topLeft,0,o),topRight:Vi(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Vi(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Vi(!l||a.bottom||a.right,s.bottomRight,0,o)}}function aX(t){const e=BD(t),n=e.right-e.left,r=e.bottom-e.top,i=sX(t,n/2,r/2),s=oX(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function vg(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&BD(t,r);return a&&(i||Wr(e,a.left,a.right))&&(s||Wr(n,a.top,a.bottom))}function lX(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function cX(t,e){t.rect(e.x,e.y,e.w,e.h)}function _g(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class lh extends di{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=aX(this),a=lX(o.radius)?yf:cX;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,_g(o,n,s)),e.clip(),a(e,_g(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,_g(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return vg(this,e,n,r)}inXRange(e,n){return vg(this,e,null,n)}inYRange(e,n){return vg(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}K(lh,"id","bar"),K(lh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),K(lh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function uX(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=Rp(l,c,i);const u=P0(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const h=kD(e,u);for(const f of h){const m=P0(n,s[f.start],s[f.end],f.loop),g=SD(a,i,m);for(const v of g)o.push({source:v,target:f,start:{[n]:Tk(u,m,"start",Math.max)},end:{[n]:Tk(u,m,"end",Math.min)}})}}return o}function P0(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=gn(i),s=gn(s)),{property:t,start:i,end:s}}function dX(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=Rp(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function Rp(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Tk(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function zD(t,e){let n=[],r=!1;return at(t)?(r=!0,n=t):n=dX(t,e),n.length?new Li({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Sk(t){return t&&t.fill!==!1}function hX(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Ht(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function fX(t,e,n){const r=yX(t);if(fe(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Ht(i)&&Math.floor(i)===i?pX(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function pX(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function mX(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:fe(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function gX(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:fe(t)?r=t.value:r=e.getBaseValue(),r}function yX(t){const e=t.options,n=e.fill;let r=ce(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function vX(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=_X(e,n);a.push(zD({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)wX(i,o[u],a)}return new Li({points:i,options:{}})}function _X(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function wX(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=xX(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function xX(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],h=o[u.start][n],f=o[u.end][n];if(Wr(i,h,f)){a=i===h,l=i===f;break}}return{first:a,last:l,point:r}}class $D{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:ze},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function bX(t){const{chart:e,fill:n,line:r}=t;if(Ht(n))return TX(e,n);if(n==="stack")return vX(t);if(n==="shape")return!0;const i=SX(t);return i instanceof $D?i:zD(i,r)}function TX(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function SX(t){return(t.scale||{}).getPointPositionForValue?EX(t):kX(t)}function kX(t){const{scale:e={},fill:n}=t,r=mX(n,e);if(Ht(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function EX(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=gX(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new $D({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function wg(t,e,n){const r=bX(e),{chart:i,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,h=c.backgroundColor,{above:f=h,below:m=h}=u||{},g=i.getDatasetMeta(s),v=ED(i,g);r&&o.points.length&&(Ep(t,n),PX(t,{line:o,target:r,above:f,below:m,area:n,scale:a,axis:l,clip:v}),Pp(t))}function PX(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=s;s!==i&&(c==="x"?(kk(t,r,o.top),xg(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),kk(t,r,o.bottom)):c==="y"&&(Ek(t,r,o.left),xg(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),Ek(t,r,o.right),u=i)),xg(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function kk(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],h=i[Rp(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Ek(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],h=i[Rp(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,h.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function xg(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,l=uX(n,r,i);for(const{source:c,target:u,start:h,end:f}of l){const{style:{backgroundColor:m=s}={}}=c,g=r!==!0;t.save(),t.fillStyle=m,IX(t,o,a,g&&P0(i,h,f)),t.beginPath();const v=!!n.pathSegment(t,c);let x;if(g){v?t.closePath():Pk(t,r,f,i);const w=!!r.pathSegment(t,u,{move:v,reverse:!0});x=v&&w,x||Pk(t,r,h,i)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function IX(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let l,c,u,h;s==="x"?(l=o,c=i.top,u=a,h=i.bottom):(l=i.left,c=o,u=i.right,h=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),h=Math.min(h,n.bottom)),t.rect(l,c,u-l,h-c),t.clip()}}function Pk(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var CX={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Li&&(l={visible:t.isDatasetVisible(o),index:o,fill:fX(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=hX(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&wg(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;Sk(s)&&wg(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!Sk(r)||n.drawTime!=="beforeDatasetDraw"||wg(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ik=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},AX=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Ck extends di{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Me(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=zt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Ik(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let h=e;s.textAlign="left",s.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((g,v)=>{const x=r+n/2+s.measureText(g.text).width;(v===0||c[c.length-1]+x+2*a>o)&&(h+=u,c[c.length-(v>0?0:1)]=0,m+=u,f++),l[v]={left:0,top:m,row:f,width:x,height:i},c[c.length-1]+=x+a}),h}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,f=0,m=0,g=0,v=0;return this.legendItems.forEach((x,w)=>{const{itemWidth:_,itemHeight:T}=RX(r,n,s,x,i);w>0&&m+T+2*a>u&&(h+=f+a,c.push({width:f,height:m}),g+=f+a,v++,f=m=0),l[w]={left:g,top:m,col:v,width:_,height:T},f=Math.max(f,_),m+=T+a}),h+=f,c.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=da(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Lt(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Lt(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Lt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Lt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Ep(e,this),this._draw(),Pp(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Ze.color,l=da(e.rtl,this.left,this.width),c=zt(o.font),{padding:u}=o,h=c.size,f=h/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:v,itemHeight:x}=Ik(o,h),w=function(O,E,S){if(isNaN(g)||g<=0||isNaN(v)||v<0)return;i.save();const k=ce(S.lineWidth,1);if(i.fillStyle=ce(S.fillStyle,a),i.lineCap=ce(S.lineCap,"butt"),i.lineDashOffset=ce(S.lineDashOffset,0),i.lineJoin=ce(S.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=ce(S.strokeStyle,a),i.setLineDash(ce(S.lineDash,[])),o.usePointStyle){const C={radius:v*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:k},D=l.xPlus(O,g/2),M=E+f;pD(i,C,D,M,o.pointStyleWidth&&g)}else{const C=E+Math.max((h-v)/2,0),D=l.leftForLtr(O,g),M=ua(S.borderRadius);i.beginPath(),Object.values(M).some(R=>R!==0)?yf(i,{x:D,y:C,w:g,h:v,radius:M}):i.rect(D,C,g,v),i.fill(),k!==0&&i.stroke()}i.restore()},_=function(O,E,S){Yc(i,S.text,O,E+x/2,c,{strikethrough:S.hidden,textAlign:l.textAlign(S.textAlign)})},T=this.isHorizontal(),P=this._computeTitleHeight();T?m={x:Lt(s,this.left+u,this.right-r[0]),y:this.top+u+P,line:0}:m={x:this.left+u,y:Lt(s,this.top+P+u,this.bottom-n[0].height),line:0},xD(this.ctx,e.textDirection);const A=x+u;this.legendItems.forEach((O,E)=>{i.strokeStyle=O.fontColor,i.fillStyle=O.fontColor;const S=i.measureText(O.text).width,k=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),C=g+f+S;let D=m.x,M=m.y;l.setWidth(this.width),T?E>0&&D+C+u>this.right&&(M=m.y+=A,m.line++,D=m.x=Lt(s,this.left+u,this.right-r[m.line])):E>0&&M+A>this.bottom&&(D=m.x=D+n[m.line].width+u,m.line++,M=m.y=Lt(s,this.top+P+u,this.bottom-n[m.line].height));const R=l.x(D);if(w(R,M,O),D=aK(k,D+g+f,T?D+C:this.right,e.rtl),_(l.x(D),M,O),T)m.x+=C+u;else if(typeof O.text!="string"){const ee=c.lineHeight;m.y+=WD(O,ee)+u}else m.y+=A}),bD(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=zt(n.font),i=Bn(n.padding);if(!n.display)return;const s=da(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=Lt(e.align,h,this.right-f);else{const g=this.columnSizes.reduce((v,x)=>Math.max(v,x.height),0);u=c+Lt(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const m=Lt(a,h,h+f);o.textAlign=s.textAlign(aw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Yc(o,n.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,n=zt(e.font),r=Bn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Wr(e,this.left,this.right)&&Wr(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Wr(e,i.left,i.left+i.width)&&Wr(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!MX(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=AX(i,r);i&&!s&&Me(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Me(n.onHover,[e,r,this],this)}else r&&Me(n.onClick,[e,r,this],this)}}function RX(t,e,n,r,i){const s=DX(r,t,e,n),o=NX(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function DX(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function NX(t,e,n){let r=t;return typeof e.text!="string"&&(r=WD(e,n)),r}function WD(t,e){const n=t.text?t.text.length:0;return e*n}function MX(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var OX={id:"legend",_element:Ck,start(t,e,n){const r=t.legend=new Ck({ctx:t.ctx,options:n,chart:t});Nn.configure(t,r,n),Nn.addBox(t,r)},stop(t){Nn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Nn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Bn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class HD extends di{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=at(r.text)?r.text.length:1;this._padding=Bn(r.padding);const s=i*zt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Lt(a,r,s),h=n+e,c=s-r):(o.position==="left"?(u=r+e,h=Lt(a,i,n),l=Ee*-.5):(u=s-e,h=Lt(a,n,i),l=Ee*.5),c=i-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=zt(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Yc(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:aw(n.align),textBaseline:"middle",translation:[o,a]})}}function jX(t,e){const n=new HD({ctx:t.ctx,options:e,chart:t});Nn.configure(t,n,e),Nn.addBox(t,n),t.titleBlock=n}var LX={id:"title",_element:HD,start(t,e,n){jX(t,n)},stop(t){const e=t.titleBlock;Nn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Nn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ol={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=x0(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function or(t,e){return e&&(at(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ar(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function VX(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Ak(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=zt(e.bodyFont),c=zt(e.titleFont),u=zt(e.footerFont),h=s.length,f=i.length,m=r.length,g=Bn(e.padding);let v=g.height,x=0,w=r.reduce((P,A)=>P+A.before.length+A.lines.length+A.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,h&&(v+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),w){const P=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=m*P+(w-m)*l.lineHeight+(w-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let _=0;const T=function(P){x=Math.max(x,n.measureText(P).width+_)};return n.save(),n.font=c.string,ke(t.title,T),n.font=l.string,ke(t.beforeBody.concat(t.afterBody),T),_=e.displayColors?o+2+e.boxPadding:0,ke(r,P=>{ke(P.before,T),ke(P.lines,T),ke(P.after,T)}),_=0,n.font=u.string,ke(t.footer,T),n.restore(),x+=g.width,{width:x,height:v}}function FX(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function UX(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function BX(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),UX(c,t,e,n)&&(c="center"),c}function Rk(t,e,n){const r=n.yAlign||e.yAlign||FX(t,n);return{xAlign:n.xAlign||e.xAlign||BX(t,e,n,r),yAlign:r}}function zX(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function $X(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function Dk(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=ua(o);let g=zX(e,a);const v=$X(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,f)+i:a==="right"&&(g+=Math.max(h,m)+i),{x:Bt(g,0,r.width-e.width),y:Bt(v,0,r.height-e.height)}}function Ad(t,e,n){const r=Bn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Nk(t){return or([],Ar(t))}function WX(t,e,n){return xo(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Mk(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const qD={beforeTitle:Ir,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Ir,beforeBody:Ir,beforeLabel:Ir,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Te(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ir,afterBody:Ir,beforeFooter:Ir,footer:Ir,afterFooter:Ir};function tn(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?qD[e].call(n,r):i}class I0 extends di{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new PD(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=WX(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=tn(r,"beforeTitle",this,e),s=tn(r,"title",this,e),o=tn(r,"afterTitle",this,e);let a=[];return a=or(a,Ar(i)),a=or(a,Ar(s)),a=or(a,Ar(o)),a}getBeforeBody(e,n){return Nk(tn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ke(e,s=>{const o={before:[],lines:[],after:[]},a=Mk(r,s);or(o.before,Ar(tn(a,"beforeLabel",this,s))),or(o.lines,tn(a,"label",this,s)),or(o.after,Ar(tn(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return Nk(tn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=tn(r,"beforeFooter",this,e),s=tn(r,"footer",this,e),o=tn(r,"afterFooter",this,e);let a=[];return a=or(a,Ar(i)),a=or(a,Ar(s)),a=or(a,Ar(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(VX(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,r))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,r))),ke(a,u=>{const h=Mk(e.callbacks,u);i.push(tn(h,"labelColor",this,u)),s.push(tn(h,"labelPointStyle",this,u)),o.push(tn(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Ol[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Ak(this,r),c=Object.assign({},a,l),u=Rk(this.chart,r,c),h=Dk(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=ua(a),{x:f,y:m}=e,{width:g,height:v}=n;let x,w,_,T,P,A;return s==="center"?(P=m+v/2,i==="left"?(x=f,w=x-o,T=P+o,A=P-o):(x=f+g,w=x+o,T=P-o,A=P+o),_=x):(i==="left"?w=f+Math.max(l,u)+o:i==="right"?w=f+g-Math.max(c,h)-o:w=this.caretX,s==="top"?(T=m,P=T-o,x=w-o,_=w+o):(T=m+v,P=T+o,x=w+o,_=w-o),A=T),{x1:x,x2:w,x3:_,y1:T,y2:P,y3:A}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=da(r.rtl,this.x,this.width);for(e.x=Ad(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=zt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=zt(s.bodyFont),h=Ad(this,"left",s),f=i.x(h),m=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+m;if(s.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=i.leftForLtr(f,c)+c/2,w=g+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,T0(e,v,x,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,T0(e,v,x,w)}else{e.lineWidth=fe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=i.leftForLtr(f,c),x=i.leftForLtr(i.xPlus(f,1),c-2),w=ua(o.borderRadius);Object.values(w).some(_=>_!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,yf(e,{x:v,y:g,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),yf(e,{x,y:g+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,g,c,l),e.strokeRect(v,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,h=zt(r.bodyFont);let f=h.lineHeight,m=0;const g=da(r.rtl,this.x,this.width),v=function(S){n.fillText(S,g.x(e.x+m),e.y+f/2),e.y+=f+s},x=g.textAlign(o);let w,_,T,P,A,O,E;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Ad(this,x,r),n.fillStyle=r.bodyColor,ke(this.beforeBody,v),m=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,P=0,O=i.length;P<O;++P){for(w=i[P],_=this.labelTextColors[P],n.fillStyle=_,ke(w.before,v),T=w.lines,a&&T.length&&(this._drawColorBox(n,e,P,g,r),f=Math.max(h.lineHeight,l)),A=0,E=T.length;A<E;++A)v(T[A]),f=h.lineHeight;ke(w.after,v)}m=0,f=h.lineHeight,ke(this.afterBody,v),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=da(r.rtl,this.x,this.width);for(e.x=Ad(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=zt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:g}=ua(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+u),n.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Ol[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Ak(this,e),l=Object.assign({},o,this._size),c=Rk(n,e,l),u=Dk(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Bn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),xD(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),bD(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!pf(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!pf(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Ol[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}K(I0,"positioners",Ol);var HX={id:"tooltip",_element:I0,positioners:Ol,afterInit(t,e,n){n&&(t.tooltip=new I0({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:qD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const qX=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function GX(t,e,n,r){const i=t.indexOf(e);if(i===-1)return qX(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const KX=(t,e)=>t===null?null:Bt(Math.round(t),0,e);function Ok(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class C0 extends $a{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Te(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:GX(r,e,ce(n,e),this._addedLabels),KX(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return Ok.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}K(C0,"id","category"),K(C0,"defaults",{ticks:{callback:Ok}});function QX(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=t,m=s||1,g=u-1,{min:v,max:x}=e,w=!Te(o),_=!Te(a),T=!Te(c),P=(x-v)/(h+1);let A=DS((x-v)/g/m)*m,O,E,S,k;if(A<1e-14&&!w&&!_)return[{value:v},{value:x}];k=Math.ceil(x/A)-Math.floor(v/A),k>g&&(A=DS(k*A/g/m)*m),Te(l)||(O=Math.pow(10,l),A=Math.ceil(A*O)/O),i==="ticks"?(E=Math.floor(v/A)*A,S=Math.ceil(x/A)*A):(E=v,S=x),w&&_&&s&&JG((a-o)/s,A/1e3)?(k=Math.round(Math.min((a-o)/A,u)),A=(a-o)/k,E=o,S=a):T?(E=w?o:E,S=_?a:S,k=c-1,A=(S-E)/k):(k=(S-E)/A,sc(k,Math.round(k),A/1e3)?k=Math.round(k):k=Math.ceil(k));const C=Math.max(NS(A),NS(E));O=Math.pow(10,Te(l)?C:l),E=Math.round(E*O)/O,S=Math.round(S*O)/O;let D=0;for(w&&(f&&E!==o?(n.push({value:o}),E<o&&D++,sc(Math.round((E+D*A)*O)/O,o,jk(o,P,t))&&D++):E<o&&D++);D<k;++D){const M=Math.round((E+D*A)*O)/O;if(_&&M>a)break;n.push({value:M})}return _&&f&&S!==a?n.length&&sc(n[n.length-1].value,a,jk(a,P,t))?n[n.length-1].value=a:n.push({value:a}):(!_||S===a)&&n.push({value:S}),n}function jk(t,e,{horizontal:n,minRotation:r}){const i=$r(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class YX extends $a{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Te(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=wr(i),c=wr(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=QX(i,s);return e.bounds==="ticks"&&ZG(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return cw(e,this.chart.options.locale,this.options.ticks.format)}}class A0 extends YX{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ht(e)?e:0,this.max=Ht(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=$r(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}K(A0,"id","linear"),K(A0,"defaults",{ticks:{callback:fD.formatters.numeric}});const Dp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},sn=Object.keys(Dp);function Lk(t,e){return t-e}function Vk(t,e){if(Te(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Ht(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Gc(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function Fk(t,e,n,r){const i=sn.length;for(let s=sn.indexOf(t);s<i-1;++s){const o=Dp[sn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return sn[s]}return sn[i-1]}function XX(t,e,n,r,i){for(let s=sn.length-1;s>=sn.indexOf(n);s--){const o=sn[s];if(Dp[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return sn[n?sn.indexOf(n):0]}function JX(t){for(let e=sn.indexOf(t)+1,n=sn.length;e<n;++e)if(Dp[sn[e]].common)return sn[e]}function Uk(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=ow(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function ZX(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Bk(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:ZX(t,r,i,n)}class xf extends $a{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new OQ._date(e.adapters.date);i.init(n),ic(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Vk(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Ht(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Ht(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=iK(i,s,o);return this._unit=n.unit||(r.autoSkip?Fk(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):XX(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:JX(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),Bk(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Bt(n,0,o),r=Bt(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||Fk(s.minUnit,n,r,this._getLabelCapacity(n)),a=ce(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Gc(l)||l===!0,u={};let h=n,f,m;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<r;f=+e.add(f,a,o),m++)Uk(u,f,g);return(f===r||i.bounds==="ticks"||m===1)&&Uk(u,f,g),Object.keys(u).sort(Lk).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Me(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=r[n],m=c&&h&&f&&f.major;return this._adapter.format(e,i||(m?h:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=$r(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,Bk(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(Vk(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return uD(e.sort(Lk))}}K(xf,"id","time"),K(xf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Rd(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=$s(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=$s(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class zk extends xf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Rd(n,this.min),this._tableRange=Rd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Rd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Rd(this._table,r*this._tableRange+this._minPos,!0)}}K(zk,"id","timeseries"),K(zk,"defaults",xf.defaults);const GD="label";function $k(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function eJ(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function KD(t,e){t.labels=e}function QD(t,e,n=GD){const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function tJ(t,e=GD){const n={labels:[],datasets:[]};return KD(n,t.labels),QD(n,t.datasets,e),n}function nJ(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...f}=t,m=N.useRef(null),g=N.useRef(null),v=()=>{m.current&&(g.current=new Ap(m.current,{type:o,data:tJ(a,s),options:l&&{...l},plugins:c}),$k(e,g.current))},x=()=>{$k(e,null),g.current&&(g.current.destroy(),g.current=null)};return N.useEffect(()=>{!i&&g.current&&l&&eJ(g.current,l)},[i,l]),N.useEffect(()=>{!i&&g.current&&KD(g.current.config.data,a.labels)},[i,a.labels]),N.useEffect(()=>{!i&&g.current&&a.datasets&&QD(g.current.config.data,a.datasets,s)},[i,a.datasets]),N.useEffect(()=>{g.current&&(i?(x(),setTimeout(v)):g.current.update(h))},[i,l,a.labels,a.datasets,h]),N.useEffect(()=>{g.current&&(x(),setTimeout(v))},[o]),N.useEffect(()=>(v(),()=>x()),[]),p.jsx("canvas",{ref:m,role:"img",height:n,width:r,...f,children:u})}const rJ=N.forwardRef(nJ);function yw(t,e){return Ap.register(e),N.forwardRef((n,r)=>p.jsx(rJ,{...n,ref:r,type:t}))}const iJ=yw("line",ih),sJ=yw("bar",rh),oJ=yw("doughnut",Dl);Ap.register(C0,A0,ah,Li,lh,Ml,LX,HX,OX,CX);const aJ=()=>{const{user:t,gameStats:e}=pe(),{tasks:n,categories:r}=ys(),[i,s]=N.useState("7days");if(!t||!e)return null;const o=i==="7days"?7:i==="30days"?30:90,a=Uq(new Date,o-1),l=VH({start:a,end:new Date}),c=l.map(A=>n.filter(O=>O.status==="completed"&&O.completedAt&&tw(new Date(O.completedAt),A)).length),u=l.map((A,O)=>Math.floor(Math.random()*500)+100),h=r.map(A=>({name:A.name,count:n.filter(O=>O.categoryId===A.id).length,color:A.color})),f={high:n.filter(A=>A.priority==="high").length,medium:n.filter(A=>A.priority==="medium").length,low:n.filter(A=>A.priority==="low").length},m=n.filter(A=>A.status==="completed").length,g=n.length,v=g>0?Math.round(m/g*100):0,x=Math.round(m/o),w={labels:l.map(A=>ff(A,"dd/MM")),datasets:[{label:"Tches compltes",data:c,borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4}]},_={labels:l.map(A=>ff(A,"dd/MM")),datasets:[{label:"XP gagne",data:u,backgroundColor:"rgba(168, 85, 247, 0.8)",borderRadius:4}]},T={labels:h.map(A=>A.name),datasets:[{data:h.map(A=>A.count),backgroundColor:h.map(A=>A.color),borderWidth:0}]},P={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}}};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[p.jsxs("div",{children:[p.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[p.jsx(VR,{className:"w-7 h-7 text-primary-500"}),"Statistiques"]}),p.jsx("p",{className:"text-gray-500 mt-1",children:"Suivez votre progression et vos performances"})]}),p.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[{value:"7days",label:"7 jours"},{value:"30days",label:"30 jours"},{value:"90days",label:"90 jours"}].map(({value:A,label:O})=>p.jsx("button",{onClick:()=>s(A),className:X("px-4 py-2 rounded-md text-sm font-medium transition-colors",i===A?"bg-white dark:bg-gray-700 shadow-sm":"text-gray-500"),children:O},A))})]}),p.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(lt,{icon:p.jsx(Tr,{className:"w-6 h-6"}),label:"Total compltes",value:Rn(m),color:"primary"}),p.jsx(lt,{icon:p.jsx(Ji,{className:"w-6 h-6"}),label:"Taux de compltion",value:`${v}%`,color:"green"}),p.jsx(lt,{icon:p.jsx(_0,{className:"w-6 h-6"}),label:"Moyenne par jour",value:x,color:"purple"}),p.jsx(lt,{icon:p.jsx(tc,{className:"w-6 h-6"}),label:"Plus long streak",value:`${e.longestStreak} jours`,color:"orange"})]}),p.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[p.jsxs(ot,{children:[p.jsx("div",{className:"flex items-center justify-between mb-4",children:p.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[p.jsx(_0,{className:"w-5 h-5 text-primary-500"}),"Tches compltes"]})}),p.jsx("div",{className:"h-64",children:p.jsx(iJ,{data:w,options:P})})]}),p.jsxs(ot,{children:[p.jsx("div",{className:"flex items-center justify-between mb-4",children:p.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[p.jsx(Sp,{className:"w-5 h-5 text-purple-500"}),"XP gagne"]})}),p.jsx("div",{className:"h-64",children:p.jsx(sJ,{data:_,options:P})})]}),p.jsxs(ot,{children:[p.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[p.jsx(Tp,{className:"w-5 h-5 text-primary-500"}),"Rpartition par catgorie"]}),p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsx("div",{className:"w-48 h-48",children:p.jsx(oJ,{data:T,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},cutout:"60%"}})}),p.jsx("div",{className:"flex-1 space-y-2",children:h.map(A=>p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:A.color}}),p.jsx("span",{className:"text-sm",children:A.name})]}),p.jsx("span",{className:"text-sm font-medium",children:A.count})]},A.name))})]})]}),p.jsxs(ot,{children:[p.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[p.jsx(Ji,{className:"w-5 h-5 text-primary-500"}),"Rpartition par priorit"]}),p.jsx("div",{className:"space-y-4",children:[{label:"Haute",value:f.high,color:"bg-red-500"},{label:"Moyenne",value:f.medium,color:"bg-yellow-500"},{label:"Basse",value:f.low,color:"bg-green-500"}].map(({label:A,value:O,color:E})=>p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("span",{className:"text-sm",children:A}),p.jsx("span",{className:"text-sm font-medium",children:O})]}),p.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:p.jsx("div",{className:X("h-full rounded-full",E),style:{width:`${g>0?O/g*100:0}%`}})})]},A))})]})]}),p.jsxs(ot,{children:[p.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[p.jsx(_r,{className:"w-5 h-5 text-yellow-500"}),"Statistiques de jeu"]}),p.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[p.jsx("div",{className:"text-3xl font-bold gradient-text",children:e.level}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Niveau actuel"})]}),p.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[p.jsx("div",{className:"text-3xl font-bold text-purple-500",children:Rn(e.totalXP)}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"XP Total"})]}),p.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[p.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:e.achievementsUnlocked.length}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Achievements"})]}),p.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[p.jsx("div",{className:"text-3xl font-bold text-orange-500",children:Rn(e.coins)}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Pices"})]})]})]})]})},lJ=()=>{var x;const{user:t,gameStats:e,updateProfile:n,updateAvatar:r}=pe(),{tasks:i}=ys(),[s,o]=N.useState(!1),[a,l]=N.useState(!1),[c,u]=N.useState({username:(t==null?void 0:t.username)||""});if(!t||!e)return null;const h=i.filter(w=>w.status==="completed").length,f=Nr.filter(w=>e.achievementsUnlocked.includes(w.id)),m=async()=>{await n(c),o(!1)},g=async w=>{var _;await r({icon:w,type:"default",baseColor:((_=t.avatar)==null?void 0:_.baseColor)||"#6366f1"}),l(!1)},v=f.slice(-4).reverse();return p.jsxs("div",{className:"space-y-6",children:[p.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-teal-500 via-cyan-500 to-blue-500 p-6 text-white",children:[p.jsx("div",{className:"absolute inset-0 bg-black/10"}),p.jsx("div",{className:"absolute -right-16 -top-16 w-48 h-48 bg-white/10 rounded-full"}),p.jsx("div",{className:"absolute -right-8 -bottom-8 w-32 h-32 bg-white/10 rounded-full"}),p.jsxs("div",{className:"relative z-10",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[p.jsxs("div",{className:"relative group",children:[p.jsx(Y_,{config:t.avatar,size:"xl",showLevel:!0,level:e.level}),p.jsx("button",{onClick:()=>l(!0),className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(k7,{className:"w-8 h-8"})})]}),p.jsx("div",{className:"flex-1 text-center sm:text-left",children:s?p.jsxs("div",{className:"space-y-3",children:[p.jsx(Ai,{value:c.username,onChange:w=>u({...c,username:w.target.value}),className:"bg-white/20 border-white/30 text-white placeholder-white/50",placeholder:"Nom d'utilisateur"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(dt,{variant:"secondary",size:"sm",onClick:()=>o(!1),children:"Annuler"}),p.jsxs(dt,{variant:"primary",size:"sm",onClick:m,children:[p.jsx(z7,{className:"w-4 h-4 mr-1"}),"Sauvegarder"]})]})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2",children:[p.jsx("h1",{className:"text-2xl font-bold",children:t.username}),e.level>=50&&p.jsx(g0,{className:"w-6 h-6 text-yellow-400"}),p.jsx("button",{onClick:()=>o(!0),className:"p-1 hover:bg-white/20 rounded",children:p.jsx(F7,{className:"w-4 h-4"})})]}),p.jsx("p",{className:"text-white/80 mt-1",children:Q_(e.level)}),p.jsxs("p",{className:"text-white/60 text-sm mt-2 flex items-center justify-center sm:justify-start gap-1",children:[p.jsx(Tp,{className:"w-4 h-4"}),"Membre depuis ",ff(new Date(t.createdAt),"MMMM yyyy",{locale:tD})]})]})}),p.jsxs("div",{className:"flex gap-4 sm:gap-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-2xl font-bold",children:e.level}),p.jsx("p",{className:"text-sm text-white/70",children:"Niveau"})]}),p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:"text-2xl font-bold flex items-center justify-center gap-1",children:[p.jsx(tc,{className:"w-5 h-5 text-orange-300"}),e.currentStreak]}),p.jsx("p",{className:"text-sm text-white/70",children:"Streak"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-2xl font-bold",children:f.length}),p.jsx("p",{className:"text-sm text-white/70",children:"Trophes"})]})]})]}),p.jsxs("div",{className:"mt-6",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[p.jsxs("span",{children:["Niveau ",e.level]}),p.jsxs("span",{children:[Rn(e.currentXP)," / ",Rn(e.xpToNextLevel)," XP"]})]}),p.jsx("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden",children:p.jsx(ve.div,{initial:{width:0},animate:{width:`${e.currentXP/e.xpToNextLevel*100}%`},className:"h-full bg-white rounded-full",transition:{duration:1}})})]})]})]}),p.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(lt,{icon:p.jsx(Sp,{className:"w-6 h-6"}),label:"XP Total",value:Rn(e.totalXP),color:"primary"}),p.jsx(lt,{icon:p.jsx(Tr,{className:"w-6 h-6"}),label:"Tches compltes",value:h,color:"green"}),p.jsx(lt,{icon:p.jsx(tc,{className:"w-6 h-6"}),label:"Plus long streak",value:`${e.longestStreak} jours`,color:"orange"}),p.jsx(lt,{icon:p.jsx(_r,{className:"w-6 h-6"}),label:"Achievements",value:`${f.length}/${Nr.length}`,color:"yellow"})]}),p.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[p.jsxs(ot,{children:[p.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[p.jsx(_r,{className:"w-5 h-5 text-yellow-500"}),"Achievements rcents"]}),v.length>0?p.jsx("div",{className:"space-y-3",children:v.map(w=>p.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center text-xl",children:w.icon}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"font-medium",children:w.name}),p.jsx("p",{className:"text-sm text-gray-500",children:w.description})]}),p.jsxs("span",{className:"text-sm text-primary-500",children:["+",w.xpReward," XP"]})]},w.id))}):p.jsxs("div",{className:"text-center py-8 text-gray-500",children:[p.jsx(_r,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),p.jsx("p",{children:"Aucun achievement dbloqu"})]})]}),p.jsxs(ot,{children:[p.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[p.jsx($R,{className:"w-5 h-5 text-primary-500"}),"Statistiques de jeu"]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pices"}),p.jsxs("span",{className:"font-medium flex items-center gap-1",children:[" ",Rn(e.coins)]})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Gemmes"}),p.jsxs("span",{className:"font-medium flex items-center gap-1",children:[" ",Rn(e.gems)]})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Qutes compltes"}),p.jsx("span",{className:"font-medium",children:e.questsCompleted||0})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Streak actuel"}),p.jsxs("span",{className:"font-medium flex items-center gap-1",children:[p.jsx(tc,{className:"w-4 h-4 text-orange-500"}),e.currentStreak," jours"]})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Meilleur streak"}),p.jsxs("span",{className:"font-medium",children:[e.longestStreak," jours"]})]})]})]})]}),p.jsx(cf,{isOpen:a,onClose:()=>l(!1),title:"Personnaliser l'avatar",size:"lg",children:p.jsx(Z7,{selected:((x=t.avatar)==null?void 0:x.icon)||"",onSelect:g})})]})},cJ=()=>{const{user:t,signOut:e,deleteAccount:n}=pe(),{theme:r,setTheme:i,soundEnabled:s,toggleSound:o,notificationsEnabled:a,toggleNotifications:l}=rr(),{tasks:c,categories:u,exportData:h,importData:f,clearAllData:m}=ys(),[g,v]=N.useState(!1),[x,w]=N.useState(!1),[_,T]=N.useState(""),P=()=>{const C=h(),D=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),M=URL.createObjectURL(D),R=document.createElement("a");R.href=M,R.download=`questify-backup-${new Date().toISOString().split("T")[0]}.json`,R.click(),URL.revokeObjectURL(M)},A=C=>{var R;const D=(R=C.target.files)==null?void 0:R[0];if(!D)return;const M=new FileReader;M.onload=ee=>{var q;try{const Q=JSON.parse((q=ee.target)==null?void 0:q.result);f(Q),alert("Donnes importes avec succs!")}catch{alert("Erreur lors de l'importation des donnes")}},M.readAsText(D)},O=async()=>{_==="SUPPRIMER"&&await n()},E=()=>{m(),w(!1)},S=({title:C,children:D})=>p.jsxs(ot,{className:"overflow-hidden",children:[p.jsx("h3",{className:"font-semibold text-lg mb-4",children:C}),p.jsx("div",{className:"space-y-1",children:D})]}),k=({icon:C,label:D,description:M,action:R,onClick:ee,danger:q})=>p.jsxs("div",{onClick:ee,className:X("flex items-center gap-4 p-3 -mx-3 rounded-lg transition-colors",ee&&"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",q&&"text-red-600 dark:text-red-400"),children:[p.jsx("div",{className:X("w-10 h-10 rounded-lg flex items-center justify-center",q?"bg-red-100 dark:bg-red-900/30":"bg-gray-100 dark:bg-gray-800"),children:C}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"font-medium",children:D}),M&&p.jsx("p",{className:"text-sm text-gray-500",children:M})]}),R,ee&&!R&&p.jsx(Bc,{className:"w-5 h-5 text-gray-400"})]});return p.jsxs("div",{className:"space-y-6 max-w-2xl",children:[p.jsxs("div",{children:[p.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[p.jsx(zR,{className:"w-7 h-7 text-primary-500"}),"Paramtres"]}),p.jsx("p",{className:"text-gray-500 mt-1",children:"Personnalisez votre exprience"})]}),p.jsxs(S,{title:"Apparence",children:[p.jsx(k,{icon:r==="dark"?p.jsx(j7,{className:"w-5 h-5"}):p.jsx(W7,{className:"w-5 h-5"}),label:"Thme",description:"Choisissez votre thme prfr",action:p.jsxs("select",{value:r,onChange:C=>i(C.target.value),className:"px-3 py-1.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[p.jsx("option",{value:"light",children:"Clair"}),p.jsx("option",{value:"dark",children:"Sombre"}),p.jsx("option",{value:"system",children:"Systme"})]})}),p.jsx(k,{icon:p.jsx(V7,{className:"w-5 h-5"}),label:"Couleur d'accent",description:"Personnalisez la couleur principale",action:p.jsx("div",{className:"flex gap-2",children:["#6366f1","#8b5cf6","#ec4899","#10b981","#f59e0b"].map(C=>p.jsx("button",{className:"w-6 h-6 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:C}},C))})})]}),p.jsxs(S,{title:"Notifications & Sons",children:[p.jsx(k,{icon:p.jsx(S7,{className:"w-5 h-5"}),label:"Notifications",description:"Recevoir des rappels et alertes",action:p.jsx("button",{onClick:l,className:X("w-12 h-6 rounded-full transition-colors",a?"bg-primary-500":"bg-gray-300 dark:bg-gray-600"),children:p.jsx("div",{className:X("w-5 h-5 bg-white rounded-full shadow-sm transition-transform",a?"translate-x-6":"translate-x-0.5")})})}),p.jsx(k,{icon:s?p.jsx(q7,{className:"w-5 h-5"}):p.jsx(G7,{className:"w-5 h-5"}),label:"Effets sonores",description:"Sons lors des actions",action:p.jsx("button",{onClick:o,className:X("w-12 h-6 rounded-full transition-colors",s?"bg-primary-500":"bg-gray-300 dark:bg-gray-600"),children:p.jsx("div",{className:X("w-5 h-5 bg-white rounded-full shadow-sm transition-transform",s?"translate-x-6":"translate-x-0.5")})})})]}),p.jsxs(S,{title:"Donnes",children:[p.jsx(k,{icon:p.jsx(I7,{className:"w-5 h-5"}),label:"Exporter les donnes",description:"Tlcharger une sauvegarde de vos donnes",onClick:P}),p.jsx(k,{icon:p.jsx(H7,{className:"w-5 h-5"}),label:"Importer des donnes",description:"Restaurer depuis une sauvegarde",action:p.jsxs("label",{className:"cursor-pointer",children:[p.jsx("input",{type:"file",accept:".json",onChange:A,className:"hidden"}),p.jsx("span",{className:"text-primary-500 hover:underline",children:"Choisir un fichier"})]})}),p.jsx(k,{icon:p.jsx(lf,{className:"w-5 h-5"}),label:"Effacer les donnes",description:"Supprimer toutes les tches et catgories",onClick:()=>w(!0),danger:!0})]}),p.jsxs(S,{title:"Compte",children:[p.jsx(k,{icon:p.jsx($7,{className:"w-5 h-5"}),label:"Scurit",description:"Grer les options de scurit",onClick:()=>{}}),p.jsx(k,{icon:p.jsx(UR,{className:"w-5 h-5"}),label:"Se dconnecter",description:"Vous serez dconnect de ce compte",onClick:e}),p.jsx(k,{icon:p.jsx(lf,{className:"w-5 h-5"}),label:"Supprimer le compte",description:"Cette action est irrversible",onClick:()=>v(!0),danger:!0})]}),p.jsx(S,{title:" propos",children:p.jsx(k,{icon:p.jsx(N7,{className:"w-5 h-5"}),label:"Version",description:"Questify v1.0.0"})}),p.jsx(cf,{isOpen:x,onClose:()=>w(!1),title:"Effacer les donnes",children:p.jsxs("div",{className:"space-y-4",children:[p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"tes-vous sr de vouloir effacer toutes vos donnes? Cette action supprimera:"}),p.jsxs("ul",{className:"list-disc list-inside text-gray-600 dark:text-gray-400 space-y-1",children:[p.jsxs("li",{children:[c.length," tches"]}),p.jsxs("li",{children:[u.length," catgories"]})]}),p.jsx("p",{className:"text-red-500 font-medium",children:"Cette action est irrversible!"}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx(dt,{variant:"secondary",className:"flex-1",onClick:()=>w(!1),children:"Annuler"}),p.jsx(dt,{variant:"danger",className:"flex-1",onClick:E,children:"Effacer tout"})]})]})}),p.jsx(cf,{isOpen:g,onClose:()=>v(!1),title:"Supprimer le compte",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Cette action supprimera dfinitivement votre compte et toutes vos donnes. Cette action est ",p.jsx("strong",{children:"irrversible"}),"."]}),p.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Pour confirmer, tapez ",p.jsx("strong",{children:"SUPPRIMER"})," ci-dessous:"]}),p.jsx("input",{type:"text",value:_,onChange:C=>T(C.target.value),placeholder:"SUPPRIMER",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg"}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx(dt,{variant:"secondary",className:"flex-1",onClick:()=>{v(!1),T("")},children:"Annuler"}),p.jsx(dt,{variant:"danger",className:"flex-1",disabled:_!=="SUPPRIMER",onClick:O,children:"Supprimer le compte"})]})]})})]})},uJ=({children:t})=>{const{user:e,isLoading:n}=pe();return n?p.jsx(YD,{}):e?p.jsx(p.Fragment,{children:t}):p.jsx(yy,{to:"/auth",replace:!0})},YD=()=>p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-900 via-cyan-900 to-gray-900",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-teal-500 to-cyan-500 flex items-center justify-center mx-auto mb-4 animate-pulse",children:p.jsx(lo,{className:"w-10 h-10 text-white"})}),p.jsx("h1",{className:"text-2xl font-bold text-white",children:"Questify"}),p.jsx("p",{className:"text-gray-400 mt-2",children:"Chargement..."})]})});function dJ(){const{initializeAuth:t,user:e}=pe(),{theme:n,setIsMobile:r}=rr(),{loadQuests:i}=wu(),{loadTasks:s,loadCategories:o}=ys(),[a,l]=N.useState(!1);return N.useEffect(()=>{(async()=>{await t(),l(!0)})()},[t]),N.useEffect(()=>{e&&(async()=>(await o(e.id),await s(e.id),await i(e.id)))()},[e,o,s,i]),N.useEffect(()=>{const c=document.documentElement;if(n==="system"){const u=window.matchMedia("(prefers-color-scheme: dark)").matches;c.classList.toggle("dark",u)}else c.classList.toggle("dark",n==="dark")},[n]),N.useEffect(()=>{const c=()=>{r(window.innerWidth<1024)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[r]),N.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{console.log("SW registration failed")})})},[]),a?p.jsxs(nL,{children:[p.jsxs(Kj,{children:[p.jsx(Wn,{path:"/auth",element:e?p.jsx(yy,{to:"/",replace:!0}):p.jsx(J7,{})}),p.jsxs(Wn,{element:p.jsx(uJ,{children:p.jsx(SH,{})}),children:[p.jsx(Wn,{path:"/",element:p.jsx(mG,{})}),p.jsx(Wn,{path:"/tasks",element:p.jsx(gG,{})}),p.jsx(Wn,{path:"/quests",element:p.jsx(yG,{})}),p.jsx(Wn,{path:"/achievements",element:p.jsx(vG,{})}),p.jsx(Wn,{path:"/stats",element:p.jsx(aJ,{})}),p.jsx(Wn,{path:"/profile",element:p.jsx(lJ,{})}),p.jsx(Wn,{path:"/settings",element:p.jsx(cJ,{})})]}),p.jsx(Wn,{path:"*",element:p.jsx(yy,{to:"/",replace:!0})})]}),p.jsx(QL,{position:"top-right",toastOptions:{duration:3e3,style:{background:"var(--toast-bg)",color:"var(--toast-color)",borderRadius:"12px",padding:"12px 16px"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}):p.jsx(YD,{})}bg.createRoot(document.getElementById("root")).render(p.jsx(dn.StrictMode,{children:p.jsx(dJ,{})}));
