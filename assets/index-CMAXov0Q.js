var oM=Object.defineProperty;var aM=(t,e,n)=>e in t?oM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var J=(t,e,n)=>aM(t,typeof e!="symbol"?e+"":e,n);function lM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function CE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var PE={exports:{}},Kf={},IE={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu=Symbol.for("react.element"),cM=Symbol.for("react.portal"),uM=Symbol.for("react.fragment"),dM=Symbol.for("react.strict_mode"),hM=Symbol.for("react.profiler"),fM=Symbol.for("react.provider"),mM=Symbol.for("react.context"),pM=Symbol.for("react.forward_ref"),gM=Symbol.for("react.suspense"),yM=Symbol.for("react.memo"),vM=Symbol.for("react.lazy"),Q_=Symbol.iterator;function xM(t){return t===null||typeof t!="object"?null:(t=Q_&&t[Q_]||t["@@iterator"],typeof t=="function"?t:null)}var AE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RE=Object.assign,NE={};function Ya(t,e,n){this.props=t,this.context=e,this.refs=NE,this.updater=n||AE}Ya.prototype.isReactComponent={};Ya.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ya.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function DE(){}DE.prototype=Ya.prototype;function sv(t,e,n){this.props=t,this.context=e,this.refs=NE,this.updater=n||AE}var iv=sv.prototype=new DE;iv.constructor=sv;RE(iv,Ya.prototype);iv.isPureReactComponent=!0;var Y_=Array.isArray,ME=Object.prototype.hasOwnProperty,ov={current:null},jE={key:!0,ref:!0,__self:!0,__source:!0};function OE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ME.call(e,r)&&!jE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:mu,type:t,key:i,ref:o,props:s,_owner:ov.current}}function wM(t,e){return{$$typeof:mu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function av(t){return typeof t=="object"&&t!==null&&t.$$typeof===mu}function _M(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var X_=/\/+/g;function Ip(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_M(""+t.key):e.toString(36)}function Jd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case mu:case cM:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ip(o,0):r,Y_(s)?(n="",t!=null&&(n=t.replace(X_,"$&/")+"/"),Jd(s,e,n,"",function(c){return c})):s!=null&&(av(s)&&(s=wM(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(X_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Y_(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Ip(i,a);o+=Jd(i,e,n,l,s)}else if(l=xM(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Ip(i,a++),o+=Jd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ad(t,e,n){if(t==null)return t;var r=[],s=0;return Jd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function bM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nn={current:null},Zd={transition:null},kM={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:Zd,ReactCurrentOwner:ov};function LE(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:ad,forEach:function(t,e,n){ad(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ad(t,function(){e++}),e},toArray:function(t){return ad(t,function(e){return e})||[]},only:function(t){if(!av(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Ya;me.Fragment=uM;me.Profiler=hM;me.PureComponent=sv;me.StrictMode=dM;me.Suspense=gM;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kM;me.act=LE;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=RE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ov.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ME.call(e,l)&&!jE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:mu,type:t.type,key:s,ref:i,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:mM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fM,_context:t},t.Consumer=t};me.createElement=OE;me.createFactory=function(t){var e=OE.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:pM,render:t}};me.isValidElement=av;me.lazy=function(t){return{$$typeof:vM,_payload:{_status:-1,_result:t},_init:bM}};me.memo=function(t,e){return{$$typeof:yM,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Zd.transition;Zd.transition={};try{t()}finally{Zd.transition=e}};me.unstable_act=LE;me.useCallback=function(t,e){return nn.current.useCallback(t,e)};me.useContext=function(t){return nn.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return nn.current.useDeferredValue(t)};me.useEffect=function(t,e){return nn.current.useEffect(t,e)};me.useId=function(){return nn.current.useId()};me.useImperativeHandle=function(t,e,n){return nn.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return nn.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return nn.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return nn.current.useMemo(t,e)};me.useReducer=function(t,e,n){return nn.current.useReducer(t,e,n)};me.useRef=function(t){return nn.current.useRef(t)};me.useState=function(t){return nn.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return nn.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return nn.current.useTransition()};me.version="18.3.1";IE.exports=me;var M=IE.exports;const mn=CE(M),TM=lM({__proto__:null,default:mn},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SM=M,EM=Symbol.for("react.element"),CM=Symbol.for("react.fragment"),PM=Object.prototype.hasOwnProperty,IM=SM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AM={key:!0,ref:!0,__self:!0,__source:!0};function VE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)PM.call(e,r)&&!AM.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:EM,type:t,key:i,ref:o,props:s,_owner:IM.current}}Kf.Fragment=CM;Kf.jsx=VE;Kf.jsxs=VE;PE.exports=Kf;var d=PE.exports,Xg={},FE={exports:{}},En={},UE={exports:{}},zE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,q){var re=B.length;B.push(q);e:for(;0<re;){var te=re-1>>>1,ue=B[te];if(0<s(ue,q))B[te]=q,B[re]=ue,re=te;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var q=B[0],re=B.pop();if(re!==q){B[0]=re;e:for(var te=0,ue=B.length,ve=ue>>>1;te<ve;){var st=2*(te+1)-1,gt=B[st],Be=st+1,Pn=B[Be];if(0>s(gt,re))Be<ue&&0>s(Pn,gt)?(B[te]=Pn,B[Be]=re,te=Be):(B[te]=gt,B[st]=re,te=st);else if(Be<ue&&0>s(Pn,re))B[te]=Pn,B[Be]=re,te=Be;else break e}}return q}function s(B,q){var re=B.sortIndex-q.sortIndex;return re!==0?re:B.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,m=3,p=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=B)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function C(B){if(v=!1,b(B),!g)if(n(l)!==null)g=!0,z(P);else{var q=n(c);q!==null&&K(C,q.startTime-B)}}function P(B,q){g=!1,v&&(v=!1,w(T),T=-1),p=!0;var re=m;try{for(b(q),h=n(l);h!==null&&(!(h.expirationTime>q)||B&&!I());){var te=h.callback;if(typeof te=="function"){h.callback=null,m=h.priorityLevel;var ue=te(h.expirationTime<=q);q=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===n(l)&&r(l),b(q)}else r(l);h=n(l)}if(h!==null)var ve=!0;else{var st=n(c);st!==null&&K(C,st.startTime-q),ve=!1}return ve}finally{h=null,m=re,p=!1}}var j=!1,S=null,T=-1,E=5,R=-1;function I(){return!(t.unstable_now()-R<E)}function D(){if(S!==null){var B=t.unstable_now();R=B;var q=!0;try{q=S(!0,B)}finally{q?N():(j=!1,S=null)}}else j=!1}var N;if(typeof x=="function")N=function(){x(D)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,W=F.port2;F.port1.onmessage=D,N=function(){W.postMessage(null)}}else N=function(){_(D,0)};function z(B){S=B,j||(j=!0,N())}function K(B,q){T=_(function(){B(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,z(P))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var re=m;m=q;try{return B()}finally{m=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var re=m;m=B;try{return q()}finally{m=re}},t.unstable_scheduleCallback=function(B,q,re){var te=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?te+re:te):re=te,B){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=re+ue,B={id:u++,callback:q,priorityLevel:B,startTime:re,expirationTime:ue,sortIndex:-1},re>te?(B.sortIndex=re,e(c,B),n(l)===null&&B===n(c)&&(v?(w(T),T=-1):v=!0,K(C,re-te))):(B.sortIndex=ue,e(l,B),g||p||(g=!0,z(P))),B},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(B){var q=m;return function(){var re=m;m=q;try{return B.apply(this,arguments)}finally{m=re}}}})(zE);UE.exports=zE;var RM=UE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NM=M,kn=RM;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BE=new Set,Cc={};function Po(t,e){Aa(t,e),Aa(t+"Capture",e)}function Aa(t,e){for(Cc[t]=e,t=0;t<e.length;t++)BE.add(e[t])}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jg=Object.prototype.hasOwnProperty,DM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J_={},Z_={};function MM(t){return Jg.call(Z_,t)?!0:Jg.call(J_,t)?!1:DM.test(t)?Z_[t]=!0:(J_[t]=!0,!1)}function jM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OM(t,e,n,r){if(e===null||typeof e>"u"||jM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var lv=/[\-:]([a-z])/g;function cv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lv,cv);Ct[e]=new rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lv,cv);Ct[e]=new rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lv,cv);Ct[e]=new rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new rn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function uv(t,e,n,r){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OM(e,n,s,r)&&(n=null),r||s===null?MM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vs=NM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ld=Symbol.for("react.element"),Zo=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),dv=Symbol.for("react.strict_mode"),Zg=Symbol.for("react.profiler"),$E=Symbol.for("react.provider"),WE=Symbol.for("react.context"),hv=Symbol.for("react.forward_ref"),ey=Symbol.for("react.suspense"),ty=Symbol.for("react.suspense_list"),fv=Symbol.for("react.memo"),Ns=Symbol.for("react.lazy"),HE=Symbol.for("react.offscreen"),eb=Symbol.iterator;function bl(t){return t===null||typeof t!="object"?null:(t=eb&&t[eb]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,Ap;function Vl(t){if(Ap===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ap=e&&e[1]||""}return`
`+Ap+t}var Rp=!1;function Np(t,e){if(!t||Rp)return"";Rp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Rp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vl(t):""}function LM(t){switch(t.tag){case 5:return Vl(t.type);case 16:return Vl("Lazy");case 13:return Vl("Suspense");case 19:return Vl("SuspenseList");case 0:case 2:case 15:return t=Np(t.type,!1),t;case 11:return t=Np(t.type.render,!1),t;case 1:return t=Np(t.type,!0),t;default:return""}}function ny(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ea:return"Fragment";case Zo:return"Portal";case Zg:return"Profiler";case dv:return"StrictMode";case ey:return"Suspense";case ty:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WE:return(t.displayName||"Context")+".Consumer";case $E:return(t._context.displayName||"Context")+".Provider";case hv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fv:return e=t.displayName||null,e!==null?e:ny(t.type)||"Memo";case Ns:e=t._payload,t=t._init;try{return ny(t(e))}catch{}}return null}function VM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ny(e);case 8:return e===dv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FM(t){var e=qE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cd(t){t._valueTracker||(t._valueTracker=FM(t))}function GE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ry(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function KE(t,e){e=e.checked,e!=null&&uv(t,"checked",e,!1)}function sy(t,e){KE(t,e);var n=fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?iy(t,e.type,n):e.hasOwnProperty("defaultValue")&&iy(t,e.type,fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function iy(t,e,n){(e!=="number"||Nh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fl=Array.isArray;function ga(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function oy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Fl(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fi(n)}}function QE(t,e){var n=fi(e.value),r=fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ay(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ud,XE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ud=ud||document.createElement("div"),ud.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ud.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ec={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UM=["Webkit","ms","Moz","O"];Object.keys(ec).forEach(function(t){UM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ec[e]=ec[t]})});function JE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ec.hasOwnProperty(t)&&ec[t]?(""+e).trim():e+"px"}function ZE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=JE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var zM=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ly(t,e){if(e){if(zM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function cy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uy=null;function mv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dy=null,ya=null,va=null;function ib(t){if(t=yu(t)){if(typeof dy!="function")throw Error($(280));var e=t.stateNode;e&&(e=Zf(e),dy(t.stateNode,t.type,e))}}function e2(t){ya?va?va.push(t):va=[t]:ya=t}function t2(){if(ya){var t=ya,e=va;if(va=ya=null,ib(t),e)for(t=0;t<e.length;t++)ib(e[t])}}function n2(t,e){return t(e)}function r2(){}var Dp=!1;function s2(t,e,n){if(Dp)return t(e,n);Dp=!0;try{return n2(t,e,n)}finally{Dp=!1,(ya!==null||va!==null)&&(r2(),t2())}}function Ic(t,e){var n=t.stateNode;if(n===null)return null;var r=Zf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var hy=!1;if(ls)try{var kl={};Object.defineProperty(kl,"passive",{get:function(){hy=!0}}),window.addEventListener("test",kl,kl),window.removeEventListener("test",kl,kl)}catch{hy=!1}function BM(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var tc=!1,Dh=null,Mh=!1,fy=null,$M={onError:function(t){tc=!0,Dh=t}};function WM(t,e,n,r,s,i,o,a,l){tc=!1,Dh=null,BM.apply($M,arguments)}function HM(t,e,n,r,s,i,o,a,l){if(WM.apply(this,arguments),tc){if(tc){var c=Dh;tc=!1,Dh=null}else throw Error($(198));Mh||(Mh=!0,fy=c)}}function Io(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function i2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ob(t){if(Io(t)!==t)throw Error($(188))}function qM(t){var e=t.alternate;if(!e){if(e=Io(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ob(s),t;if(i===r)return ob(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function o2(t){return t=qM(t),t!==null?a2(t):null}function a2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=a2(t);if(e!==null)return e;t=t.sibling}return null}var l2=kn.unstable_scheduleCallback,ab=kn.unstable_cancelCallback,GM=kn.unstable_shouldYield,KM=kn.unstable_requestPaint,tt=kn.unstable_now,QM=kn.unstable_getCurrentPriorityLevel,pv=kn.unstable_ImmediatePriority,c2=kn.unstable_UserBlockingPriority,jh=kn.unstable_NormalPriority,YM=kn.unstable_LowPriority,u2=kn.unstable_IdlePriority,Qf=null,Sr=null;function XM(t){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(Qf,t,void 0,(t.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:ej,JM=Math.log,ZM=Math.LN2;function ej(t){return t>>>=0,t===0?32:31-(JM(t)/ZM|0)|0}var dd=64,hd=4194304;function Ul(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ul(a):(i&=o,i!==0&&(r=Ul(i)))}else o=n&~s,o!==0?r=Ul(o):i!==0&&(r=Ul(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sr(e),s=1<<n,r|=t[n],e&=~s;return r}function tj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-sr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=tj(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function my(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function d2(){var t=dd;return dd<<=1,!(dd&4194240)&&(dd=64),t}function Mp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sr(e),t[e]=n}function rj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-sr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function gv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function h2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f2,yv,m2,p2,g2,py=!1,fd=[],Js=null,Zs=null,ei=null,Ac=new Map,Rc=new Map,Ls=[],sj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lb(t,e){switch(t){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":Ac.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rc.delete(e.pointerId)}}function Tl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=yu(e),e!==null&&yv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ij(t,e,n,r,s){switch(e){case"focusin":return Js=Tl(Js,t,e,n,r,s),!0;case"dragenter":return Zs=Tl(Zs,t,e,n,r,s),!0;case"mouseover":return ei=Tl(ei,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ac.set(i,Tl(Ac.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rc.set(i,Tl(Rc.get(i)||null,t,e,n,r,s)),!0}return!1}function y2(t){var e=Xi(t.target);if(e!==null){var n=Io(e);if(n!==null){if(e=n.tag,e===13){if(e=i2(n),e!==null){t.blockedOn=e,g2(t.priority,function(){m2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);uy=r,n.target.dispatchEvent(r),uy=null}else return e=yu(n),e!==null&&yv(e),t.blockedOn=n,!1;e.shift()}return!0}function cb(t,e,n){eh(t)&&n.delete(e)}function oj(){py=!1,Js!==null&&eh(Js)&&(Js=null),Zs!==null&&eh(Zs)&&(Zs=null),ei!==null&&eh(ei)&&(ei=null),Ac.forEach(cb),Rc.forEach(cb)}function Sl(t,e){t.blockedOn===e&&(t.blockedOn=null,py||(py=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,oj)))}function Nc(t){function e(s){return Sl(s,t)}if(0<fd.length){Sl(fd[0],t);for(var n=1;n<fd.length;n++){var r=fd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Js!==null&&Sl(Js,t),Zs!==null&&Sl(Zs,t),ei!==null&&Sl(ei,t),Ac.forEach(e),Rc.forEach(e),n=0;n<Ls.length;n++)r=Ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ls.length&&(n=Ls[0],n.blockedOn===null);)y2(n),n.blockedOn===null&&Ls.shift()}var xa=vs.ReactCurrentBatchConfig,Lh=!0;function aj(t,e,n,r){var s=Ie,i=xa.transition;xa.transition=null;try{Ie=1,vv(t,e,n,r)}finally{Ie=s,xa.transition=i}}function lj(t,e,n,r){var s=Ie,i=xa.transition;xa.transition=null;try{Ie=4,vv(t,e,n,r)}finally{Ie=s,xa.transition=i}}function vv(t,e,n,r){if(Lh){var s=gy(t,e,n,r);if(s===null)Wp(t,e,r,Vh,n),lb(t,r);else if(ij(s,t,e,n,r))r.stopPropagation();else if(lb(t,r),e&4&&-1<sj.indexOf(t)){for(;s!==null;){var i=yu(s);if(i!==null&&f2(i),i=gy(t,e,n,r),i===null&&Wp(t,e,r,Vh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wp(t,e,r,null,n)}}var Vh=null;function gy(t,e,n,r){if(Vh=null,t=mv(r),t=Xi(t),t!==null)if(e=Io(t),e===null)t=null;else if(n=e.tag,n===13){if(t=i2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vh=t,null}function v2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QM()){case pv:return 1;case c2:return 4;case jh:case YM:return 16;case u2:return 536870912;default:return 16}default:return 16}}var $s=null,xv=null,th=null;function x2(){if(th)return th;var t,e=xv,n=e.length,r,s="value"in $s?$s.value:$s.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return th=s.slice(t,1<r?1-r:void 0)}function nh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function md(){return!0}function ub(){return!1}function Cn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?md:ub,this.isPropagationStopped=ub,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=md)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=md)},persist:function(){},isPersistent:md}),e}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wv=Cn(Xa),gu=Ke({},Xa,{view:0,detail:0}),cj=Cn(gu),jp,Op,El,Yf=Ke({},gu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_v,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==El&&(El&&t.type==="mousemove"?(jp=t.screenX-El.screenX,Op=t.screenY-El.screenY):Op=jp=0,El=t),jp)},movementY:function(t){return"movementY"in t?t.movementY:Op}}),db=Cn(Yf),uj=Ke({},Yf,{dataTransfer:0}),dj=Cn(uj),hj=Ke({},gu,{relatedTarget:0}),Lp=Cn(hj),fj=Ke({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),mj=Cn(fj),pj=Ke({},Xa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gj=Cn(pj),yj=Ke({},Xa,{data:0}),hb=Cn(yj),vj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _j(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wj[t])?!!e[t]:!1}function _v(){return _j}var bj=Ke({},gu,{key:function(t){if(t.key){var e=vj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_v,charCode:function(t){return t.type==="keypress"?nh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kj=Cn(bj),Tj=Ke({},Yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fb=Cn(Tj),Sj=Ke({},gu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_v}),Ej=Cn(Sj),Cj=Ke({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pj=Cn(Cj),Ij=Ke({},Yf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Aj=Cn(Ij),Rj=[9,13,27,32],bv=ls&&"CompositionEvent"in window,nc=null;ls&&"documentMode"in document&&(nc=document.documentMode);var Nj=ls&&"TextEvent"in window&&!nc,w2=ls&&(!bv||nc&&8<nc&&11>=nc),mb=" ",pb=!1;function _2(t,e){switch(t){case"keyup":return Rj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ta=!1;function Dj(t,e){switch(t){case"compositionend":return b2(e);case"keypress":return e.which!==32?null:(pb=!0,mb);case"textInput":return t=e.data,t===mb&&pb?null:t;default:return null}}function Mj(t,e){if(ta)return t==="compositionend"||!bv&&_2(t,e)?(t=x2(),th=xv=$s=null,ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return w2&&e.locale!=="ko"?null:e.data;default:return null}}var jj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jj[t.type]:e==="textarea"}function k2(t,e,n,r){e2(r),e=Fh(e,"onChange"),0<e.length&&(n=new wv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rc=null,Dc=null;function Oj(t){M2(t,0)}function Xf(t){var e=sa(t);if(GE(e))return t}function Lj(t,e){if(t==="change")return e}var T2=!1;if(ls){var Vp;if(ls){var Fp="oninput"in document;if(!Fp){var yb=document.createElement("div");yb.setAttribute("oninput","return;"),Fp=typeof yb.oninput=="function"}Vp=Fp}else Vp=!1;T2=Vp&&(!document.documentMode||9<document.documentMode)}function vb(){rc&&(rc.detachEvent("onpropertychange",S2),Dc=rc=null)}function S2(t){if(t.propertyName==="value"&&Xf(Dc)){var e=[];k2(e,Dc,t,mv(t)),s2(Oj,e)}}function Vj(t,e,n){t==="focusin"?(vb(),rc=e,Dc=n,rc.attachEvent("onpropertychange",S2)):t==="focusout"&&vb()}function Fj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xf(Dc)}function Uj(t,e){if(t==="click")return Xf(e)}function zj(t,e){if(t==="input"||t==="change")return Xf(e)}function Bj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ar=typeof Object.is=="function"?Object.is:Bj;function Mc(t,e){if(ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Jg.call(e,s)||!ar(t[s],e[s]))return!1}return!0}function xb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wb(t,e){var n=xb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xb(n)}}function E2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?E2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function C2(){for(var t=window,e=Nh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nh(t.document)}return e}function kv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $j(t){var e=C2(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&E2(n.ownerDocument.documentElement,n)){if(r!==null&&kv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=wb(n,i);var o=wb(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Wj=ls&&"documentMode"in document&&11>=document.documentMode,na=null,yy=null,sc=null,vy=!1;function _b(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vy||na==null||na!==Nh(r)||(r=na,"selectionStart"in r&&kv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sc&&Mc(sc,r)||(sc=r,r=Fh(yy,"onSelect"),0<r.length&&(e=new wv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=na)))}function pd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ra={animationend:pd("Animation","AnimationEnd"),animationiteration:pd("Animation","AnimationIteration"),animationstart:pd("Animation","AnimationStart"),transitionend:pd("Transition","TransitionEnd")},Up={},P2={};ls&&(P2=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Jf(t){if(Up[t])return Up[t];if(!ra[t])return t;var e=ra[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in P2)return Up[t]=e[n];return t}var I2=Jf("animationend"),A2=Jf("animationiteration"),R2=Jf("animationstart"),N2=Jf("transitionend"),D2=new Map,bb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(t,e){D2.set(t,e),Po(e,[t])}for(var zp=0;zp<bb.length;zp++){var Bp=bb[zp],Hj=Bp.toLowerCase(),qj=Bp[0].toUpperCase()+Bp.slice(1);_i(Hj,"on"+qj)}_i(I2,"onAnimationEnd");_i(A2,"onAnimationIteration");_i(R2,"onAnimationStart");_i("dblclick","onDoubleClick");_i("focusin","onFocus");_i("focusout","onBlur");_i(N2,"onTransitionEnd");Aa("onMouseEnter",["mouseout","mouseover"]);Aa("onMouseLeave",["mouseout","mouseover"]);Aa("onPointerEnter",["pointerout","pointerover"]);Aa("onPointerLeave",["pointerout","pointerover"]);Po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Po("onBeforeInput",["compositionend","keypress","textInput","paste"]);Po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gj=new Set("cancel close invalid load scroll toggle".split(" ").concat(zl));function kb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,HM(r,e,void 0,t),t.currentTarget=null}function M2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;kb(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;kb(s,a,c),i=l}}}if(Mh)throw t=fy,Mh=!1,fy=null,t}function Oe(t,e){var n=e[ky];n===void 0&&(n=e[ky]=new Set);var r=t+"__bubble";n.has(r)||(j2(e,t,2,!1),n.add(r))}function $p(t,e,n){var r=0;e&&(r|=4),j2(n,t,r,e)}var gd="_reactListening"+Math.random().toString(36).slice(2);function jc(t){if(!t[gd]){t[gd]=!0,BE.forEach(function(n){n!=="selectionchange"&&(Gj.has(n)||$p(n,!1,t),$p(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gd]||(e[gd]=!0,$p("selectionchange",!1,e))}}function j2(t,e,n,r){switch(v2(e)){case 1:var s=aj;break;case 4:s=lj;break;default:s=vv}n=s.bind(null,e,n,t),s=void 0,!hy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Xi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}s2(function(){var c=i,u=mv(n),h=[];e:{var m=D2.get(t);if(m!==void 0){var p=wv,g=t;switch(t){case"keypress":if(nh(n)===0)break e;case"keydown":case"keyup":p=kj;break;case"focusin":g="focus",p=Lp;break;case"focusout":g="blur",p=Lp;break;case"beforeblur":case"afterblur":p=Lp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=db;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=dj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Ej;break;case I2:case A2:case R2:p=mj;break;case N2:p=Pj;break;case"scroll":p=cj;break;case"wheel":p=Aj;break;case"copy":case"cut":case"paste":p=gj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=fb}var v=(e&4)!==0,_=!v&&t==="scroll",w=v?m!==null?m+"Capture":null:m;v=[];for(var x=c,b;x!==null;){b=x;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,w!==null&&(C=Ic(x,w),C!=null&&v.push(Oc(x,C,b)))),_)break;x=x.return}0<v.length&&(m=new p(m,g,null,n,u),h.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==uy&&(g=n.relatedTarget||n.fromElement)&&(Xi(g)||g[cs]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Xi(g):null,g!==null&&(_=Io(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(v=db,C="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=fb,C="onPointerLeave",w="onPointerEnter",x="pointer"),_=p==null?m:sa(p),b=g==null?m:sa(g),m=new v(C,x+"leave",p,n,u),m.target=_,m.relatedTarget=b,C=null,Xi(u)===c&&(v=new v(w,x+"enter",g,n,u),v.target=b,v.relatedTarget=_,C=v),_=C,p&&g)t:{for(v=p,w=g,x=0,b=v;b;b=Bo(b))x++;for(b=0,C=w;C;C=Bo(C))b++;for(;0<x-b;)v=Bo(v),x--;for(;0<b-x;)w=Bo(w),b--;for(;x--;){if(v===w||w!==null&&v===w.alternate)break t;v=Bo(v),w=Bo(w)}v=null}else v=null;p!==null&&Tb(h,m,p,v,!1),g!==null&&_!==null&&Tb(h,_,g,v,!0)}}e:{if(m=c?sa(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var P=Lj;else if(gb(m))if(T2)P=zj;else{P=Fj;var j=Vj}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(P=Uj);if(P&&(P=P(t,c))){k2(h,P,n,u);break e}j&&j(t,m,c),t==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&iy(m,"number",m.value)}switch(j=c?sa(c):window,t){case"focusin":(gb(j)||j.contentEditable==="true")&&(na=j,yy=c,sc=null);break;case"focusout":sc=yy=na=null;break;case"mousedown":vy=!0;break;case"contextmenu":case"mouseup":case"dragend":vy=!1,_b(h,n,u);break;case"selectionchange":if(Wj)break;case"keydown":case"keyup":_b(h,n,u)}var S;if(bv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ta?_2(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(w2&&n.locale!=="ko"&&(ta||T!=="onCompositionStart"?T==="onCompositionEnd"&&ta&&(S=x2()):($s=u,xv="value"in $s?$s.value:$s.textContent,ta=!0)),j=Fh(c,T),0<j.length&&(T=new hb(T,t,null,n,u),h.push({event:T,listeners:j}),S?T.data=S:(S=b2(n),S!==null&&(T.data=S)))),(S=Nj?Dj(t,n):Mj(t,n))&&(c=Fh(c,"onBeforeInput"),0<c.length&&(u=new hb("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=S))}M2(h,e)})}function Oc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ic(t,n),i!=null&&r.unshift(Oc(t,i,s)),i=Ic(t,e),i!=null&&r.push(Oc(t,i,s))),t=t.return}return r}function Bo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tb(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ic(n,i),l!=null&&o.unshift(Oc(n,l,a))):s||(l=Ic(n,i),l!=null&&o.push(Oc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Kj=/\r\n?/g,Qj=/\u0000|\uFFFD/g;function Sb(t){return(typeof t=="string"?t:""+t).replace(Kj,`
`).replace(Qj,"")}function yd(t,e,n){if(e=Sb(e),Sb(t)!==e&&n)throw Error($(425))}function Uh(){}var xy=null,wy=null;function _y(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var by=typeof setTimeout=="function"?setTimeout:void 0,Yj=typeof clearTimeout=="function"?clearTimeout:void 0,Eb=typeof Promise=="function"?Promise:void 0,Xj=typeof queueMicrotask=="function"?queueMicrotask:typeof Eb<"u"?function(t){return Eb.resolve(null).then(t).catch(Jj)}:by;function Jj(t){setTimeout(function(){throw t})}function Hp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Nc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Nc(e)}function ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ja=Math.random().toString(36).slice(2),xr="__reactFiber$"+Ja,Lc="__reactProps$"+Ja,cs="__reactContainer$"+Ja,ky="__reactEvents$"+Ja,Zj="__reactListeners$"+Ja,eO="__reactHandles$"+Ja;function Xi(t){var e=t[xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cs]||n[xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cb(t);t!==null;){if(n=t[xr])return n;t=Cb(t)}return e}t=n,n=t.parentNode}return null}function yu(t){return t=t[xr]||t[cs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Zf(t){return t[Lc]||null}var Ty=[],ia=-1;function bi(t){return{current:t}}function Fe(t){0>ia||(t.current=Ty[ia],Ty[ia]=null,ia--)}function De(t,e){ia++,Ty[ia]=t.current,t.current=e}var mi={},Ht=bi(mi),un=bi(!1),fo=mi;function Ra(t,e){var n=t.type.contextTypes;if(!n)return mi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function dn(t){return t=t.childContextTypes,t!=null}function zh(){Fe(un),Fe(Ht)}function Pb(t,e,n){if(Ht.current!==mi)throw Error($(168));De(Ht,e),De(un,n)}function O2(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,VM(t)||"Unknown",s));return Ke({},n,r)}function Bh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mi,fo=Ht.current,De(Ht,t),De(un,un.current),!0}function Ib(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=O2(t,e,fo),r.__reactInternalMemoizedMergedChildContext=t,Fe(un),Fe(Ht),De(Ht,t)):Fe(un),De(un,n)}var Hr=null,em=!1,qp=!1;function L2(t){Hr===null?Hr=[t]:Hr.push(t)}function tO(t){em=!0,L2(t)}function ki(){if(!qp&&Hr!==null){qp=!0;var t=0,e=Ie;try{var n=Hr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hr=null,em=!1}catch(s){throw Hr!==null&&(Hr=Hr.slice(t+1)),l2(pv,ki),s}finally{Ie=e,qp=!1}}return null}var oa=[],aa=0,$h=null,Wh=0,Mn=[],jn=0,mo=null,Qr=1,Yr="";function Bi(t,e){oa[aa++]=Wh,oa[aa++]=$h,$h=t,Wh=e}function V2(t,e,n){Mn[jn++]=Qr,Mn[jn++]=Yr,Mn[jn++]=mo,mo=t;var r=Qr;t=Yr;var s=32-sr(r)-1;r&=~(1<<s),n+=1;var i=32-sr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Qr=1<<32-sr(e)+s|n<<s|r,Yr=i+t}else Qr=1<<i|n<<s|r,Yr=t}function Tv(t){t.return!==null&&(Bi(t,1),V2(t,1,0))}function Sv(t){for(;t===$h;)$h=oa[--aa],oa[aa]=null,Wh=oa[--aa],oa[aa]=null;for(;t===mo;)mo=Mn[--jn],Mn[jn]=null,Yr=Mn[--jn],Mn[jn]=null,Qr=Mn[--jn],Mn[jn]=null}var bn=null,wn=null,ze=!1,tr=null;function F2(t,e){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ab(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,wn=ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=mo!==null?{id:Qr,overflow:Yr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,wn=null,!0):!1;default:return!1}}function Sy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ey(t){if(ze){var e=wn;if(e){var n=e;if(!Ab(t,e)){if(Sy(t))throw Error($(418));e=ti(n.nextSibling);var r=bn;e&&Ab(t,e)?F2(r,n):(t.flags=t.flags&-4097|2,ze=!1,bn=t)}}else{if(Sy(t))throw Error($(418));t.flags=t.flags&-4097|2,ze=!1,bn=t}}}function Rb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function vd(t){if(t!==bn)return!1;if(!ze)return Rb(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_y(t.type,t.memoizedProps)),e&&(e=wn)){if(Sy(t))throw U2(),Error($(418));for(;e;)F2(t,e),e=ti(e.nextSibling)}if(Rb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=ti(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=bn?ti(t.stateNode.nextSibling):null;return!0}function U2(){for(var t=wn;t;)t=ti(t.nextSibling)}function Na(){wn=bn=null,ze=!1}function Ev(t){tr===null?tr=[t]:tr.push(t)}var nO=vs.ReactCurrentBatchConfig;function Cl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function xd(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Nb(t){var e=t._init;return e(t._payload)}function z2(t){function e(w,x){if(t){var b=w.deletions;b===null?(w.deletions=[x],w.flags|=16):b.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function s(w,x){return w=ii(w,x),w.index=0,w.sibling=null,w}function i(w,x,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<x?(w.flags|=2,x):b):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,x,b,C){return x===null||x.tag!==6?(x=Zp(b,w.mode,C),x.return=w,x):(x=s(x,b),x.return=w,x)}function l(w,x,b,C){var P=b.type;return P===ea?u(w,x,b.props.children,C,b.key):x!==null&&(x.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ns&&Nb(P)===x.type)?(C=s(x,b.props),C.ref=Cl(w,x,b),C.return=w,C):(C=ch(b.type,b.key,b.props,null,w.mode,C),C.ref=Cl(w,x,b),C.return=w,C)}function c(w,x,b,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=eg(b,w.mode,C),x.return=w,x):(x=s(x,b.children||[]),x.return=w,x)}function u(w,x,b,C,P){return x===null||x.tag!==7?(x=ao(b,w.mode,C,P),x.return=w,x):(x=s(x,b),x.return=w,x)}function h(w,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Zp(""+x,w.mode,b),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ld:return b=ch(x.type,x.key,x.props,null,w.mode,b),b.ref=Cl(w,null,x),b.return=w,b;case Zo:return x=eg(x,w.mode,b),x.return=w,x;case Ns:var C=x._init;return h(w,C(x._payload),b)}if(Fl(x)||bl(x))return x=ao(x,w.mode,b,null),x.return=w,x;xd(w,x)}return null}function m(w,x,b,C){var P=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return P!==null?null:a(w,x,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ld:return b.key===P?l(w,x,b,C):null;case Zo:return b.key===P?c(w,x,b,C):null;case Ns:return P=b._init,m(w,x,P(b._payload),C)}if(Fl(b)||bl(b))return P!==null?null:u(w,x,b,C,null);xd(w,b)}return null}function p(w,x,b,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return w=w.get(b)||null,a(x,w,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ld:return w=w.get(C.key===null?b:C.key)||null,l(x,w,C,P);case Zo:return w=w.get(C.key===null?b:C.key)||null,c(x,w,C,P);case Ns:var j=C._init;return p(w,x,b,j(C._payload),P)}if(Fl(C)||bl(C))return w=w.get(b)||null,u(x,w,C,P,null);xd(x,C)}return null}function g(w,x,b,C){for(var P=null,j=null,S=x,T=x=0,E=null;S!==null&&T<b.length;T++){S.index>T?(E=S,S=null):E=S.sibling;var R=m(w,S,b[T],C);if(R===null){S===null&&(S=E);break}t&&S&&R.alternate===null&&e(w,S),x=i(R,x,T),j===null?P=R:j.sibling=R,j=R,S=E}if(T===b.length)return n(w,S),ze&&Bi(w,T),P;if(S===null){for(;T<b.length;T++)S=h(w,b[T],C),S!==null&&(x=i(S,x,T),j===null?P=S:j.sibling=S,j=S);return ze&&Bi(w,T),P}for(S=r(w,S);T<b.length;T++)E=p(S,w,T,b[T],C),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?T:E.key),x=i(E,x,T),j===null?P=E:j.sibling=E,j=E);return t&&S.forEach(function(I){return e(w,I)}),ze&&Bi(w,T),P}function v(w,x,b,C){var P=bl(b);if(typeof P!="function")throw Error($(150));if(b=P.call(b),b==null)throw Error($(151));for(var j=P=null,S=x,T=x=0,E=null,R=b.next();S!==null&&!R.done;T++,R=b.next()){S.index>T?(E=S,S=null):E=S.sibling;var I=m(w,S,R.value,C);if(I===null){S===null&&(S=E);break}t&&S&&I.alternate===null&&e(w,S),x=i(I,x,T),j===null?P=I:j.sibling=I,j=I,S=E}if(R.done)return n(w,S),ze&&Bi(w,T),P;if(S===null){for(;!R.done;T++,R=b.next())R=h(w,R.value,C),R!==null&&(x=i(R,x,T),j===null?P=R:j.sibling=R,j=R);return ze&&Bi(w,T),P}for(S=r(w,S);!R.done;T++,R=b.next())R=p(S,w,T,R.value,C),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?T:R.key),x=i(R,x,T),j===null?P=R:j.sibling=R,j=R);return t&&S.forEach(function(D){return e(w,D)}),ze&&Bi(w,T),P}function _(w,x,b,C){if(typeof b=="object"&&b!==null&&b.type===ea&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ld:e:{for(var P=b.key,j=x;j!==null;){if(j.key===P){if(P=b.type,P===ea){if(j.tag===7){n(w,j.sibling),x=s(j,b.props.children),x.return=w,w=x;break e}}else if(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ns&&Nb(P)===j.type){n(w,j.sibling),x=s(j,b.props),x.ref=Cl(w,j,b),x.return=w,w=x;break e}n(w,j);break}else e(w,j);j=j.sibling}b.type===ea?(x=ao(b.props.children,w.mode,C,b.key),x.return=w,w=x):(C=ch(b.type,b.key,b.props,null,w.mode,C),C.ref=Cl(w,x,b),C.return=w,w=C)}return o(w);case Zo:e:{for(j=b.key;x!==null;){if(x.key===j)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(w,x.sibling),x=s(x,b.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else e(w,x);x=x.sibling}x=eg(b,w.mode,C),x.return=w,w=x}return o(w);case Ns:return j=b._init,_(w,x,j(b._payload),C)}if(Fl(b))return g(w,x,b,C);if(bl(b))return v(w,x,b,C);xd(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(w,x.sibling),x=s(x,b),x.return=w,w=x):(n(w,x),x=Zp(b,w.mode,C),x.return=w,w=x),o(w)):n(w,x)}return _}var Da=z2(!0),B2=z2(!1),Hh=bi(null),qh=null,la=null,Cv=null;function Pv(){Cv=la=qh=null}function Iv(t){var e=Hh.current;Fe(Hh),t._currentValue=e}function Cy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wa(t,e){qh=t,Cv=la=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(Cv!==t)if(t={context:t,memoizedValue:e,next:null},la===null){if(qh===null)throw Error($(308));la=t,qh.dependencies={lanes:0,firstContext:t}}else la=la.next=t;return e}var Ji=null;function Av(t){Ji===null?Ji=[t]:Ji.push(t)}function $2(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Av(e)):(n.next=s.next,s.next=n),e.interleaved=n,us(t,r)}function us(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ds=!1;function Rv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,us(t,n)}return s=r.interleaved,s===null?(e.next=e,Av(r)):(e.next=s.next,s.next=e),r.interleaved=e,us(t,n)}function rh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gv(t,n)}}function Db(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gh(t,e,n,r){var s=t.updateQueue;Ds=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,u=c=l=null,a=i;do{var m=a.lane,p=a.eventTime;if((r&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(m=e,p=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(p,h,m);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(p,h,m):g,m==null)break e;h=Ke({},h,m);break e;case 2:Ds=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);go|=o,t.lanes=o,t.memoizedState=h}}function Mb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var vu={},Er=bi(vu),Vc=bi(vu),Fc=bi(vu);function Zi(t){if(t===vu)throw Error($(174));return t}function Nv(t,e){switch(De(Fc,e),De(Vc,t),De(Er,vu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ay(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ay(e,t)}Fe(Er),De(Er,e)}function Ma(){Fe(Er),Fe(Vc),Fe(Fc)}function H2(t){Zi(Fc.current);var e=Zi(Er.current),n=ay(e,t.type);e!==n&&(De(Vc,t),De(Er,n))}function Dv(t){Vc.current===t&&(Fe(Er),Fe(Vc))}var $e=bi(0);function Kh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gp=[];function Mv(){for(var t=0;t<Gp.length;t++)Gp[t]._workInProgressVersionPrimary=null;Gp.length=0}var sh=vs.ReactCurrentDispatcher,Kp=vs.ReactCurrentBatchConfig,po=0,qe=null,dt=null,vt=null,Qh=!1,ic=!1,Uc=0,rO=0;function Nt(){throw Error($(321))}function jv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function Ov(t,e,n,r,s,i){if(po=i,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sh.current=t===null||t.memoizedState===null?aO:lO,t=n(r,s),ic){i=0;do{if(ic=!1,Uc=0,25<=i)throw Error($(301));i+=1,vt=dt=null,e.updateQueue=null,sh.current=cO,t=n(r,s)}while(ic)}if(sh.current=Yh,e=dt!==null&&dt.next!==null,po=0,vt=dt=qe=null,Qh=!1,e)throw Error($(300));return t}function Lv(){var t=Uc!==0;return Uc=0,t}function gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?qe.memoizedState=vt=t:vt=vt.next=t,vt}function Wn(){if(dt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=vt===null?qe.memoizedState:vt.next;if(e!==null)vt=e,dt=t;else{if(t===null)throw Error($(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},vt===null?qe.memoizedState=vt=t:vt=vt.next=t}return vt}function zc(t,e){return typeof e=="function"?e(t):e}function Qp(t){var e=Wn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=dt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((po&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,qe.lanes|=u,go|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,ar(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,qe.lanes|=i,go|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yp(t){var e=Wn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ar(i,e.memoizedState)||(cn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function q2(){}function G2(t,e){var n=qe,r=Wn(),s=e(),i=!ar(r.memoizedState,s);if(i&&(r.memoizedState=s,cn=!0),r=r.queue,Vv(Y2.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,Bc(9,Q2.bind(null,n,r,s,e),void 0,null),xt===null)throw Error($(349));po&30||K2(n,e,s)}return s}function K2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q2(t,e,n,r){e.value=n,e.getSnapshot=r,X2(e)&&J2(t)}function Y2(t,e,n){return n(function(){X2(e)&&J2(t)})}function X2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch{return!0}}function J2(t){var e=us(t,1);e!==null&&ir(e,t,1,-1)}function jb(t){var e=gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zc,lastRenderedState:t},e.queue=t,t=t.dispatch=oO.bind(null,qe,t),[e.memoizedState,t]}function Bc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Z2(){return Wn().memoizedState}function ih(t,e,n,r){var s=gr();qe.flags|=t,s.memoizedState=Bc(1|e,n,void 0,r===void 0?null:r)}function tm(t,e,n,r){var s=Wn();r=r===void 0?null:r;var i=void 0;if(dt!==null){var o=dt.memoizedState;if(i=o.destroy,r!==null&&jv(r,o.deps)){s.memoizedState=Bc(e,n,i,r);return}}qe.flags|=t,s.memoizedState=Bc(1|e,n,i,r)}function Ob(t,e){return ih(8390656,8,t,e)}function Vv(t,e){return tm(2048,8,t,e)}function eC(t,e){return tm(4,2,t,e)}function tC(t,e){return tm(4,4,t,e)}function nC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rC(t,e,n){return n=n!=null?n.concat([t]):null,tm(4,4,nC.bind(null,e,t),n)}function Fv(){}function sC(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function iC(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oC(t,e,n){return po&21?(ar(n,e)||(n=d2(),qe.lanes|=n,go|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function sO(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Kp.transition;Kp.transition={};try{t(!1),e()}finally{Ie=n,Kp.transition=r}}function aC(){return Wn().memoizedState}function iO(t,e,n){var r=si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lC(t))cC(e,n);else if(n=$2(t,e,n,r),n!==null){var s=Zt();ir(n,t,r,s),uC(n,e,r)}}function oO(t,e,n){var r=si(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lC(t))cC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ar(a,o)){var l=e.interleaved;l===null?(s.next=s,Av(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=$2(t,e,s,r),n!==null&&(s=Zt(),ir(n,t,r,s),uC(n,e,r))}}function lC(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function cC(t,e){ic=Qh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gv(t,n)}}var Yh={readContext:$n,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},aO={readContext:$n,useCallback:function(t,e){return gr().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:Ob,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ih(4194308,4,nC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return ih(4,2,t,e)},useMemo:function(t,e){var n=gr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=iO.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=gr();return t={current:t},e.memoizedState=t},useState:jb,useDebugValue:Fv,useDeferredValue:function(t){return gr().memoizedState=t},useTransition:function(){var t=jb(!1),e=t[0];return t=sO.bind(null,t[1]),gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,s=gr();if(ze){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),xt===null)throw Error($(349));po&30||K2(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ob(Y2.bind(null,r,i,t),[t]),r.flags|=2048,Bc(9,Q2.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=gr(),e=xt.identifierPrefix;if(ze){var n=Yr,r=Qr;n=(r&~(1<<32-sr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Uc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lO={readContext:$n,useCallback:sC,useContext:$n,useEffect:Vv,useImperativeHandle:rC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:iC,useReducer:Qp,useRef:Z2,useState:function(){return Qp(zc)},useDebugValue:Fv,useDeferredValue:function(t){var e=Wn();return oC(e,dt.memoizedState,t)},useTransition:function(){var t=Qp(zc)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:q2,useSyncExternalStore:G2,useId:aC,unstable_isNewReconciler:!1},cO={readContext:$n,useCallback:sC,useContext:$n,useEffect:Vv,useImperativeHandle:rC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:iC,useReducer:Yp,useRef:Z2,useState:function(){return Yp(zc)},useDebugValue:Fv,useDeferredValue:function(t){var e=Wn();return dt===null?e.memoizedState=t:oC(e,dt.memoizedState,t)},useTransition:function(){var t=Yp(zc)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:q2,useSyncExternalStore:G2,useId:aC,unstable_isNewReconciler:!1};function Jn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Py(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nm={isMounted:function(t){return(t=t._reactInternals)?Io(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=si(t),i=rs(r,s);i.payload=e,n!=null&&(i.callback=n),e=ni(t,i,s),e!==null&&(ir(e,t,s,r),rh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=si(t),i=rs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ni(t,i,s),e!==null&&(ir(e,t,s,r),rh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),r=si(t),s=rs(n,r);s.tag=2,e!=null&&(s.callback=e),e=ni(t,s,r),e!==null&&(ir(e,t,r,n),rh(e,t,r))}};function Lb(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Mc(n,r)||!Mc(s,i):!0}function dC(t,e,n){var r=!1,s=mi,i=e.contextType;return typeof i=="object"&&i!==null?i=$n(i):(s=dn(e)?fo:Ht.current,r=e.contextTypes,i=(r=r!=null)?Ra(t,s):mi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Vb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nm.enqueueReplaceState(e,e.state,null)}function Iy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Rv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$n(i):(i=dn(e)?fo:Ht.current,s.context=Ra(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Py(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&nm.enqueueReplaceState(s,s.state,null),Gh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ja(t,e){try{var n="",r=e;do n+=LM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Xp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ay(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uO=typeof WeakMap=="function"?WeakMap:Map;function hC(t,e,n){n=rs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jh||(Jh=!0,Uy=r),Ay(t,e)},n}function fC(t,e,n){n=rs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ay(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ay(t,e),typeof r!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fb(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new uO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=TO.bind(null,t,e,n),e.then(t,t))}function Ub(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zb(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rs(-1,1),e.tag=2,ni(n,e,1))),n.lanes|=1),t)}var dO=vs.ReactCurrentOwner,cn=!1;function Jt(t,e,n,r){e.child=t===null?B2(e,null,n,r):Da(e,t.child,n,r)}function Bb(t,e,n,r,s){n=n.render;var i=e.ref;return wa(e,s),r=Ov(t,e,n,r,i,s),n=Lv(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ds(t,e,s)):(ze&&n&&Tv(e),e.flags|=1,Jt(t,e,r,s),e.child)}function $b(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Gv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,mC(t,e,i,r,s)):(t=ch(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Mc,n(o,r)&&t.ref===e.ref)return ds(t,e,s)}return e.flags|=1,t=ii(i,r),t.ref=e.ref,t.return=e,e.child=t}function mC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Mc(i,r)&&t.ref===e.ref)if(cn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,ds(t,e,s)}return Ry(t,e,n,r,s)}function pC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(ua,vn),vn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(ua,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,De(ua,vn),vn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,De(ua,vn),vn|=r;return Jt(t,e,s,n),e.child}function gC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ry(t,e,n,r,s){var i=dn(n)?fo:Ht.current;return i=Ra(e,i),wa(e,s),n=Ov(t,e,n,r,i,s),r=Lv(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ds(t,e,s)):(ze&&r&&Tv(e),e.flags|=1,Jt(t,e,n,s),e.child)}function Wb(t,e,n,r,s){if(dn(n)){var i=!0;Bh(e)}else i=!1;if(wa(e,s),e.stateNode===null)oh(t,e),dC(e,n,r),Iy(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=$n(c):(c=dn(n)?fo:Ht.current,c=Ra(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Vb(e,o,r,c),Ds=!1;var m=e.memoizedState;o.state=m,Gh(e,r,o,s),l=e.memoizedState,a!==r||m!==l||un.current||Ds?(typeof u=="function"&&(Py(e,n,u,r),l=e.memoizedState),(a=Ds||Lb(e,n,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,W2(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Jn(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$n(l):(l=dn(n)?fo:Ht.current,l=Ra(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&Vb(e,o,r,l),Ds=!1,m=e.memoizedState,o.state=m,Gh(e,r,o,s);var g=e.memoizedState;a!==h||m!==g||un.current||Ds?(typeof p=="function"&&(Py(e,n,p,r),g=e.memoizedState),(c=Ds||Lb(e,n,c,r,m,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ny(t,e,n,r,i,s)}function Ny(t,e,n,r,s,i){gC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ib(e,n,!1),ds(t,e,i);r=e.stateNode,dO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Da(e,t.child,null,i),e.child=Da(e,null,a,i)):Jt(t,e,a,i),e.memoizedState=r.state,s&&Ib(e,n,!0),e.child}function yC(t){var e=t.stateNode;e.pendingContext?Pb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Pb(t,e.context,!1),Nv(t,e.containerInfo)}function Hb(t,e,n,r,s){return Na(),Ev(s),e.flags|=256,Jt(t,e,n,r),e.child}var Dy={dehydrated:null,treeContext:null,retryLane:0};function My(t){return{baseLanes:t,cachePool:null,transitions:null}}function vC(t,e,n){var r=e.pendingProps,s=$e.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),De($e,s&1),t===null)return Ey(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=im(o,r,0,null),t=ao(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=My(n),e.memoizedState=Dy,t):Uv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return hO(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ii(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ii(a,i):(i=ao(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?My(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Dy,r}return i=t.child,t=i.sibling,r=ii(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Uv(t,e){return e=im({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wd(t,e,n,r){return r!==null&&Ev(r),Da(e,t.child,null,n),t=Uv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hO(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Xp(Error($(422))),wd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=im({mode:"visible",children:r.children},s,0,null),i=ao(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Da(e,t.child,null,o),e.child.memoizedState=My(o),e.memoizedState=Dy,i);if(!(e.mode&1))return wd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error($(419)),r=Xp(i,r,void 0),wd(t,e,o,r)}if(a=(o&t.childLanes)!==0,cn||a){if(r=xt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,us(t,s),ir(r,t,s,-1))}return qv(),r=Xp(Error($(421))),wd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=SO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,wn=ti(s.nextSibling),bn=e,ze=!0,tr=null,t!==null&&(Mn[jn++]=Qr,Mn[jn++]=Yr,Mn[jn++]=mo,Qr=t.id,Yr=t.overflow,mo=e),e=Uv(e,r.children),e.flags|=4096,e)}function qb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cy(t.return,e,n)}function Jp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function xC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Jt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qb(t,n,e);else if(t.tag===19)qb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De($e,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Kh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Jp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Kh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Jp(e,!0,n,null,i);break;case"together":Jp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ds(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),go|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=ii(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ii(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fO(t,e,n){switch(e.tag){case 3:yC(e),Na();break;case 5:H2(e);break;case 1:dn(e.type)&&Bh(e);break;case 4:Nv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;De(Hh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?vC(t,e,n):(De($e,$e.current&1),t=ds(t,e,n),t!==null?t.sibling:null);De($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),De($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,pC(t,e,n)}return ds(t,e,n)}var wC,jy,_C,bC;wC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jy=function(){};_C=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zi(Er.current);var i=null;switch(n){case"input":s=ry(t,s),r=ry(t,r),i=[];break;case"select":s=Ke({},s,{value:void 0}),r=Ke({},r,{value:void 0}),i=[];break;case"textarea":s=oy(t,s),r=oy(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uh)}ly(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Oe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};bC=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pl(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mO(t,e,n){var r=e.pendingProps;switch(Sv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return dn(e.type)&&zh(),Dt(e),null;case 3:return r=e.stateNode,Ma(),Fe(un),Fe(Ht),Mv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&($y(tr),tr=null))),jy(t,e),Dt(e),null;case 5:Dv(e);var s=Zi(Fc.current);if(n=e.type,t!==null&&e.stateNode!=null)_C(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Dt(e),null}if(t=Zi(Er.current),vd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[xr]=e,r[Lc]=i,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(s=0;s<zl.length;s++)Oe(zl[s],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":tb(r,i),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Oe("invalid",r);break;case"textarea":rb(r,i),Oe("invalid",r)}ly(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&yd(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&yd(r.textContent,a,t),s=["children",""+a]):Cc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Oe("scroll",r)}switch(n){case"input":cd(r),nb(r,i,!0);break;case"textarea":cd(r),sb(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Uh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xr]=e,t[Lc]=r,wC(t,e,!1,!1),e.stateNode=t;e:{switch(o=cy(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),s=r;break;case"iframe":case"object":case"embed":Oe("load",t),s=r;break;case"video":case"audio":for(s=0;s<zl.length;s++)Oe(zl[s],t);s=r;break;case"source":Oe("error",t),s=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),s=r;break;case"details":Oe("toggle",t),s=r;break;case"input":tb(t,r),s=ry(t,r),Oe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ke({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":rb(t,r),s=oy(t,r),Oe("invalid",t);break;default:s=r}ly(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?ZE(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&XE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pc(t,l):typeof l=="number"&&Pc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Cc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Oe("scroll",t):l!=null&&uv(t,i,l,o))}switch(n){case"input":cd(t),nb(t,r,!1);break;case"textarea":cd(t),sb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ga(t,!!r.multiple,i,!1):r.defaultValue!=null&&ga(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Uh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)bC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Zi(Fc.current),Zi(Er.current),vd(e)){if(r=e.stateNode,n=e.memoizedProps,r[xr]=e,(i=r.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:yd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xr]=e,e.stateNode=r}return Dt(e),null;case 13:if(Fe($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&wn!==null&&e.mode&1&&!(e.flags&128))U2(),Na(),e.flags|=98560,i=!1;else if(i=vd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[xr]=e}else Na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),i=!1}else tr!==null&&($y(tr),tr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?ft===0&&(ft=3):qv())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return Ma(),jy(t,e),t===null&&jc(e.stateNode.containerInfo),Dt(e),null;case 10:return Iv(e.type._context),Dt(e),null;case 17:return dn(e.type)&&zh(),Dt(e),null;case 19:if(Fe($e),i=e.memoizedState,i===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Pl(i,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kh(t),o!==null){for(e.flags|=128,Pl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De($e,$e.current&1|2),e.child}t=t.sibling}i.tail!==null&&tt()>Oa&&(e.flags|=128,r=!0,Pl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Kh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ze)return Dt(e),null}else 2*tt()-i.renderingStartTime>Oa&&n!==1073741824&&(e.flags|=128,r=!0,Pl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=tt(),e.sibling=null,n=$e.current,De($e,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return Hv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function pO(t,e){switch(Sv(e),e.tag){case 1:return dn(e.type)&&zh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ma(),Fe(un),Fe(Ht),Mv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dv(e),null;case 13:if(Fe($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe($e),null;case 4:return Ma(),null;case 10:return Iv(e.type._context),null;case 22:case 23:return Hv(),null;case 24:return null;default:return null}}var _d=!1,Ft=!1,gO=typeof WeakSet=="function"?WeakSet:Set,Q=null;function ca(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function Oy(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var Gb=!1;function yO(t,e){if(xy=Lh,t=C2(),kv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,m=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++u===r&&(l=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(wy={focusedElem:t,selectionRange:n},Lh=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,_=g.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:Jn(e.type,v),_);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(C){Xe(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return g=Gb,Gb=!1,g}function oc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Oy(e,n,i)}s=s.next}while(s!==r)}}function rm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ly(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kC(t){var e=t.alternate;e!==null&&(t.alternate=null,kC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xr],delete e[Lc],delete e[ky],delete e[Zj],delete e[eO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function TC(t){return t.tag===5||t.tag===3||t.tag===4}function Kb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||TC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uh));else if(r!==4&&(t=t.child,t!==null))for(Vy(t,e,n),t=t.sibling;t!==null;)Vy(t,e,n),t=t.sibling}function Fy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Fy(t,e,n),t=t.sibling;t!==null;)Fy(t,e,n),t=t.sibling}var bt=null,er=!1;function Es(t,e,n){for(n=n.child;n!==null;)SC(t,e,n),n=n.sibling}function SC(t,e,n){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(Qf,n)}catch{}switch(n.tag){case 5:Ft||ca(n,e);case 6:var r=bt,s=er;bt=null,Es(t,e,n),bt=r,er=s,bt!==null&&(er?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(er?(t=bt,n=n.stateNode,t.nodeType===8?Hp(t.parentNode,n):t.nodeType===1&&Hp(t,n),Nc(t)):Hp(bt,n.stateNode));break;case 4:r=bt,s=er,bt=n.stateNode.containerInfo,er=!0,Es(t,e,n),bt=r,er=s;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Oy(n,e,o),s=s.next}while(s!==r)}Es(t,e,n);break;case 1:if(!Ft&&(ca(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xe(n,e,a)}Es(t,e,n);break;case 21:Es(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,Es(t,e,n),Ft=r):Es(t,e,n);break;default:Es(t,e,n)}}function Qb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gO),e.forEach(function(r){var s=EO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bt=a.stateNode,er=!1;break e;case 3:bt=a.stateNode.containerInfo,er=!0;break e;case 4:bt=a.stateNode.containerInfo,er=!0;break e}a=a.return}if(bt===null)throw Error($(160));SC(i,o,s),bt=null,er=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Xe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EC(e,t),e=e.sibling}function EC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xn(e,t),fr(t),r&4){try{oc(3,t,t.return),rm(3,t)}catch(v){Xe(t,t.return,v)}try{oc(5,t,t.return)}catch(v){Xe(t,t.return,v)}}break;case 1:Xn(e,t),fr(t),r&512&&n!==null&&ca(n,n.return);break;case 5:if(Xn(e,t),fr(t),r&512&&n!==null&&ca(n,n.return),t.flags&32){var s=t.stateNode;try{Pc(s,"")}catch(v){Xe(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&KE(s,i),cy(a,o);var c=cy(a,i);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?ZE(s,h):u==="dangerouslySetInnerHTML"?XE(s,h):u==="children"?Pc(s,h):uv(s,u,h,c)}switch(a){case"input":sy(s,i);break;case"textarea":QE(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ga(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?ga(s,!!i.multiple,i.defaultValue,!0):ga(s,!!i.multiple,i.multiple?[]:"",!1))}s[Lc]=i}catch(v){Xe(t,t.return,v)}}break;case 6:if(Xn(e,t),fr(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){Xe(t,t.return,v)}}break;case 3:if(Xn(e,t),fr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nc(e.containerInfo)}catch(v){Xe(t,t.return,v)}break;case 4:Xn(e,t),fr(t);break;case 13:Xn(e,t),fr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($v=tt())),r&4&&Qb(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(c=Ft)||u,Xn(e,t),Ft=c):Xn(e,t),fr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Q=t,u=t.child;u!==null;){for(h=Q=u;Q!==null;){switch(m=Q,p=m.child,m.tag){case 0:case 11:case 14:case 15:oc(4,m,m.return);break;case 1:ca(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Xe(r,n,v)}}break;case 5:ca(m,m.return);break;case 22:if(m.memoizedState!==null){Xb(h);continue}}p!==null?(p.return=m,Q=p):Xb(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=JE("display",o))}catch(v){Xe(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Xe(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xn(e,t),fr(t),r&4&&Qb(t);break;case 21:break;default:Xn(e,t),fr(t)}}function fr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(TC(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Pc(s,""),r.flags&=-33);var i=Kb(t);Fy(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Kb(t);Vy(t,a,o);break;default:throw Error($(161))}}catch(l){Xe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vO(t,e,n){Q=t,CC(t)}function CC(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_d;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=_d;var c=Ft;if(_d=o,(Ft=l)&&!c)for(Q=s;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?Jb(s):l!==null?(l.return=o,Q=l):Jb(s);for(;i!==null;)Q=i,CC(i),i=i.sibling;Q=s,_d=a,Ft=c}Yb(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):Yb(t)}}function Yb(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||rm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Jn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Mb(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Nc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Ft||e.flags&512&&Ly(e)}catch(m){Xe(e,e.return,m)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Xb(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Jb(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rm(4,e)}catch(l){Xe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Xe(e,s,l)}}var i=e.return;try{Ly(e)}catch(l){Xe(e,i,l)}break;case 5:var o=e.return;try{Ly(e)}catch(l){Xe(e,o,l)}}}catch(l){Xe(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var xO=Math.ceil,Xh=vs.ReactCurrentDispatcher,zv=vs.ReactCurrentOwner,Un=vs.ReactCurrentBatchConfig,we=0,xt=null,at=null,St=0,vn=0,ua=bi(0),ft=0,$c=null,go=0,sm=0,Bv=0,ac=null,on=null,$v=0,Oa=1/0,$r=null,Jh=!1,Uy=null,ri=null,bd=!1,Ws=null,Zh=0,lc=0,zy=null,ah=-1,lh=0;function Zt(){return we&6?tt():ah!==-1?ah:ah=tt()}function si(t){return t.mode&1?we&2&&St!==0?St&-St:nO.transition!==null?(lh===0&&(lh=d2()),lh):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:v2(t.type)),t):1}function ir(t,e,n,r){if(50<lc)throw lc=0,zy=null,Error($(185));pu(t,n,r),(!(we&2)||t!==xt)&&(t===xt&&(!(we&2)&&(sm|=n),ft===4&&Vs(t,St)),hn(t,r),n===1&&we===0&&!(e.mode&1)&&(Oa=tt()+500,em&&ki()))}function hn(t,e){var n=t.callbackNode;nj(t,e);var r=Oh(t,t===xt?St:0);if(r===0)n!==null&&ab(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ab(n),e===1)t.tag===0?tO(Zb.bind(null,t)):L2(Zb.bind(null,t)),Xj(function(){!(we&6)&&ki()}),n=null;else{switch(h2(r)){case 1:n=pv;break;case 4:n=c2;break;case 16:n=jh;break;case 536870912:n=u2;break;default:n=jh}n=jC(n,PC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function PC(t,e){if(ah=-1,lh=0,we&6)throw Error($(327));var n=t.callbackNode;if(_a()&&t.callbackNode!==n)return null;var r=Oh(t,t===xt?St:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ef(t,r);else{e=r;var s=we;we|=2;var i=AC();(xt!==t||St!==e)&&($r=null,Oa=tt()+500,oo(t,e));do try{bO();break}catch(a){IC(t,a)}while(!0);Pv(),Xh.current=i,we=s,at!==null?e=0:(xt=null,St=0,e=ft)}if(e!==0){if(e===2&&(s=my(t),s!==0&&(r=s,e=By(t,s))),e===1)throw n=$c,oo(t,0),Vs(t,r),hn(t,tt()),n;if(e===6)Vs(t,r);else{if(s=t.current.alternate,!(r&30)&&!wO(s)&&(e=ef(t,r),e===2&&(i=my(t),i!==0&&(r=i,e=By(t,i))),e===1))throw n=$c,oo(t,0),Vs(t,r),hn(t,tt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:$i(t,on,$r);break;case 3:if(Vs(t,r),(r&130023424)===r&&(e=$v+500-tt(),10<e)){if(Oh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Zt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=by($i.bind(null,t,on,$r),e);break}$i(t,on,$r);break;case 4:if(Vs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-sr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xO(r/1960))-r,10<r){t.timeoutHandle=by($i.bind(null,t,on,$r),r);break}$i(t,on,$r);break;case 5:$i(t,on,$r);break;default:throw Error($(329))}}}return hn(t,tt()),t.callbackNode===n?PC.bind(null,t):null}function By(t,e){var n=ac;return t.current.memoizedState.isDehydrated&&(oo(t,e).flags|=256),t=ef(t,e),t!==2&&(e=on,on=n,e!==null&&$y(e)),t}function $y(t){on===null?on=t:on.push.apply(on,t)}function wO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ar(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vs(t,e){for(e&=~Bv,e&=~sm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sr(e),r=1<<n;t[n]=-1,e&=~r}}function Zb(t){if(we&6)throw Error($(327));_a();var e=Oh(t,0);if(!(e&1))return hn(t,tt()),null;var n=ef(t,e);if(t.tag!==0&&n===2){var r=my(t);r!==0&&(e=r,n=By(t,r))}if(n===1)throw n=$c,oo(t,0),Vs(t,e),hn(t,tt()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$i(t,on,$r),hn(t,tt()),null}function Wv(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Oa=tt()+500,em&&ki())}}function yo(t){Ws!==null&&Ws.tag===0&&!(we&6)&&_a();var e=we;we|=1;var n=Un.transition,r=Ie;try{if(Un.transition=null,Ie=1,t)return t()}finally{Ie=r,Un.transition=n,we=e,!(we&6)&&ki()}}function Hv(){vn=ua.current,Fe(ua)}function oo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Yj(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(Sv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zh();break;case 3:Ma(),Fe(un),Fe(Ht),Mv();break;case 5:Dv(r);break;case 4:Ma();break;case 13:Fe($e);break;case 19:Fe($e);break;case 10:Iv(r.type._context);break;case 22:case 23:Hv()}n=n.return}if(xt=t,at=t=ii(t.current,null),St=vn=e,ft=0,$c=null,Bv=sm=go=0,on=ac=null,Ji!==null){for(e=0;e<Ji.length;e++)if(n=Ji[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ji=null}return t}function IC(t,e){do{var n=at;try{if(Pv(),sh.current=Yh,Qh){for(var r=qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qh=!1}if(po=0,vt=dt=qe=null,ic=!1,Uc=0,zv.current=null,n===null||n.return===null){ft=1,$c=e,at=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=St,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Ub(o);if(p!==null){p.flags&=-257,zb(p,o,a,i,e),p.mode&1&&Fb(i,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){Fb(i,c,e),qv();break e}l=Error($(426))}}else if(ze&&a.mode&1){var _=Ub(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),zb(_,o,a,i,e),Ev(ja(l,a));break e}}i=l=ja(l,a),ft!==4&&(ft=2),ac===null?ac=[i]:ac.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=hC(i,l,e);Db(i,w);break e;case 1:a=l;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ri===null||!ri.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=fC(i,a,e);Db(i,C);break e}}i=i.return}while(i!==null)}NC(n)}catch(P){e=P,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function AC(){var t=Xh.current;return Xh.current=Yh,t===null?Yh:t}function qv(){(ft===0||ft===3||ft===2)&&(ft=4),xt===null||!(go&268435455)&&!(sm&268435455)||Vs(xt,St)}function ef(t,e){var n=we;we|=2;var r=AC();(xt!==t||St!==e)&&($r=null,oo(t,e));do try{_O();break}catch(s){IC(t,s)}while(!0);if(Pv(),we=n,Xh.current=r,at!==null)throw Error($(261));return xt=null,St=0,ft}function _O(){for(;at!==null;)RC(at)}function bO(){for(;at!==null&&!GM();)RC(at)}function RC(t){var e=MC(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?NC(t):at=e,zv.current=null}function NC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pO(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,at=null;return}}else if(n=mO(n,e,vn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ft===0&&(ft=5)}function $i(t,e,n){var r=Ie,s=Un.transition;try{Un.transition=null,Ie=1,kO(t,e,n,r)}finally{Un.transition=s,Ie=r}return null}function kO(t,e,n,r){do _a();while(Ws!==null);if(we&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(rj(t,i),t===xt&&(at=xt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bd||(bd=!0,jC(jh,function(){return _a(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Un.transition,Un.transition=null;var o=Ie;Ie=1;var a=we;we|=4,zv.current=null,yO(t,n),EC(n,t),$j(wy),Lh=!!xy,wy=xy=null,t.current=n,vO(n),KM(),we=a,Ie=o,Un.transition=i}else t.current=n;if(bd&&(bd=!1,Ws=t,Zh=s),i=t.pendingLanes,i===0&&(ri=null),XM(n.stateNode),hn(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Jh)throw Jh=!1,t=Uy,Uy=null,t;return Zh&1&&t.tag!==0&&_a(),i=t.pendingLanes,i&1?t===zy?lc++:(lc=0,zy=t):lc=0,ki(),null}function _a(){if(Ws!==null){var t=h2(Zh),e=Un.transition,n=Ie;try{if(Un.transition=null,Ie=16>t?16:t,Ws===null)var r=!1;else{if(t=Ws,Ws=null,Zh=0,we&6)throw Error($(331));var s=we;for(we|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Q=c;Q!==null;){var u=Q;switch(u.tag){case 0:case 11:case 15:oc(8,u,i)}var h=u.child;if(h!==null)h.return=u,Q=h;else for(;Q!==null;){u=Q;var m=u.sibling,p=u.return;if(kC(u),u===c){Q=null;break}if(m!==null){m.return=p,Q=m;break}Q=p}}}var g=i.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:oc(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Q=w;break e}Q=i.return}}var x=t.current;for(Q=x;Q!==null;){o=Q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Q=b;else e:for(o=x;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:rm(9,a)}}catch(P){Xe(a,a.return,P)}if(a===o){Q=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Q=C;break e}Q=a.return}}if(we=s,ki(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(Qf,t)}catch{}r=!0}return r}finally{Ie=n,Un.transition=e}}return!1}function e1(t,e,n){e=ja(n,e),e=hC(t,e,1),t=ni(t,e,1),e=Zt(),t!==null&&(pu(t,1,e),hn(t,e))}function Xe(t,e,n){if(t.tag===3)e1(t,t,n);else for(;e!==null;){if(e.tag===3){e1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ri===null||!ri.has(r))){t=ja(n,t),t=fC(e,t,1),e=ni(e,t,1),t=Zt(),e!==null&&(pu(e,1,t),hn(e,t));break}}e=e.return}}function TO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(St&n)===n&&(ft===4||ft===3&&(St&130023424)===St&&500>tt()-$v?oo(t,0):Bv|=n),hn(t,e)}function DC(t,e){e===0&&(t.mode&1?(e=hd,hd<<=1,!(hd&130023424)&&(hd=4194304)):e=1);var n=Zt();t=us(t,e),t!==null&&(pu(t,e,n),hn(t,n))}function SO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),DC(t,n)}function EO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),DC(t,n)}var MC;MC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,fO(t,e,n);cn=!!(t.flags&131072)}else cn=!1,ze&&e.flags&1048576&&V2(e,Wh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;oh(t,e),t=e.pendingProps;var s=Ra(e,Ht.current);wa(e,n),s=Ov(null,e,r,t,s,n);var i=Lv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(r)?(i=!0,Bh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rv(e),s.updater=nm,e.stateNode=s,s._reactInternals=e,Iy(e,r,t,n),e=Ny(null,e,r,!0,i,n)):(e.tag=0,ze&&i&&Tv(e),Jt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(oh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=PO(r),t=Jn(r,t),s){case 0:e=Ry(null,e,r,t,n);break e;case 1:e=Wb(null,e,r,t,n);break e;case 11:e=Bb(null,e,r,t,n);break e;case 14:e=$b(null,e,r,Jn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),Ry(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),Wb(t,e,r,s,n);case 3:e:{if(yC(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,W2(t,e),Gh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ja(Error($(423)),e),e=Hb(t,e,r,n,s);break e}else if(r!==s){s=ja(Error($(424)),e),e=Hb(t,e,r,n,s);break e}else for(wn=ti(e.stateNode.containerInfo.firstChild),bn=e,ze=!0,tr=null,n=B2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Na(),r===s){e=ds(t,e,n);break e}Jt(t,e,r,n)}e=e.child}return e;case 5:return H2(e),t===null&&Ey(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,_y(r,s)?o=null:i!==null&&_y(r,i)&&(e.flags|=32),gC(t,e),Jt(t,e,o,n),e.child;case 6:return t===null&&Ey(e),null;case 13:return vC(t,e,n);case 4:return Nv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Da(e,null,r,n):Jt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),Bb(t,e,r,s,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,De(Hh,r._currentValue),r._currentValue=o,i!==null)if(ar(i.value,o)){if(i.children===s.children&&!un.current){e=ds(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=rs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Cy(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Cy(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Jt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,wa(e,n),s=$n(s),r=r(s),e.flags|=1,Jt(t,e,r,n),e.child;case 14:return r=e.type,s=Jn(r,e.pendingProps),s=Jn(r.type,s),$b(t,e,r,s,n);case 15:return mC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),oh(t,e),e.tag=1,dn(r)?(t=!0,Bh(e)):t=!1,wa(e,n),dC(e,r,s),Iy(e,r,s,n),Ny(null,e,r,!0,t,n);case 19:return xC(t,e,n);case 22:return pC(t,e,n)}throw Error($(156,e.tag))};function jC(t,e){return l2(t,e)}function CO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,e,n,r){return new CO(t,e,n,r)}function Gv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PO(t){if(typeof t=="function")return Gv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hv)return 11;if(t===fv)return 14}return 2}function ii(t,e){var n=t.alternate;return n===null?(n=Ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ch(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Gv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ea:return ao(n.children,s,i,e);case dv:o=8,s|=8;break;case Zg:return t=Ln(12,n,e,s|2),t.elementType=Zg,t.lanes=i,t;case ey:return t=Ln(13,n,e,s),t.elementType=ey,t.lanes=i,t;case ty:return t=Ln(19,n,e,s),t.elementType=ty,t.lanes=i,t;case HE:return im(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $E:o=10;break e;case WE:o=9;break e;case hv:o=11;break e;case fv:o=14;break e;case Ns:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Ln(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ao(t,e,n,r){return t=Ln(7,t,r,e),t.lanes=n,t}function im(t,e,n,r){return t=Ln(22,t,r,e),t.elementType=HE,t.lanes=n,t.stateNode={isHidden:!1},t}function Zp(t,e,n){return t=Ln(6,t,null,e),t.lanes=n,t}function eg(t,e,n){return e=Ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mp(0),this.expirationTimes=Mp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kv(t,e,n,r,s,i,o,a,l){return t=new IO(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ln(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rv(i),t}function AO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function OC(t){if(!t)return mi;t=t._reactInternals;e:{if(Io(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(dn(n))return O2(t,n,e)}return e}function LC(t,e,n,r,s,i,o,a,l){return t=Kv(n,r,!0,t,s,i,o,a,l),t.context=OC(null),n=t.current,r=Zt(),s=si(n),i=rs(r,s),i.callback=e??null,ni(n,i,s),t.current.lanes=s,pu(t,s,r),hn(t,r),t}function om(t,e,n,r){var s=e.current,i=Zt(),o=si(s);return n=OC(n),e.context===null?e.context=n:e.pendingContext=n,e=rs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ni(s,e,o),t!==null&&(ir(t,s,o,i),rh(t,s,o)),o}function tf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function t1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qv(t,e){t1(t,e),(t=t.alternate)&&t1(t,e)}function RO(){return null}var VC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yv(t){this._internalRoot=t}am.prototype.render=Yv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));om(t,e,null,null)};am.prototype.unmount=Yv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yo(function(){om(null,t,null,null)}),e[cs]=null}};function am(t){this._internalRoot=t}am.prototype.unstable_scheduleHydration=function(t){if(t){var e=p2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ls.length&&e!==0&&e<Ls[n].priority;n++);Ls.splice(n,0,t),n===0&&y2(t)}};function Xv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function n1(){}function NO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=tf(o);i.call(c)}}var o=LC(e,r,t,0,null,!1,!1,"",n1);return t._reactRootContainer=o,t[cs]=o.current,jc(t.nodeType===8?t.parentNode:t),yo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=tf(l);a.call(c)}}var l=Kv(t,0,!1,null,null,!1,!1,"",n1);return t._reactRootContainer=l,t[cs]=l.current,jc(t.nodeType===8?t.parentNode:t),yo(function(){om(e,l,n,r)}),l}function cm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=tf(o);a.call(l)}}om(e,o,t,s)}else o=NO(n,e,t,s,r);return tf(o)}f2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ul(e.pendingLanes);n!==0&&(gv(e,n|1),hn(e,tt()),!(we&6)&&(Oa=tt()+500,ki()))}break;case 13:yo(function(){var r=us(t,1);if(r!==null){var s=Zt();ir(r,t,1,s)}}),Qv(t,1)}};yv=function(t){if(t.tag===13){var e=us(t,134217728);if(e!==null){var n=Zt();ir(e,t,134217728,n)}Qv(t,134217728)}};m2=function(t){if(t.tag===13){var e=si(t),n=us(t,e);if(n!==null){var r=Zt();ir(n,t,e,r)}Qv(t,e)}};p2=function(){return Ie};g2=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};dy=function(t,e,n){switch(e){case"input":if(sy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Zf(r);if(!s)throw Error($(90));GE(r),sy(r,s)}}}break;case"textarea":QE(t,n);break;case"select":e=n.value,e!=null&&ga(t,!!n.multiple,e,!1)}};n2=Wv;r2=yo;var DO={usingClientEntryPoint:!1,Events:[yu,sa,Zf,e2,t2,Wv]},Il={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MO={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=o2(t),t===null?null:t.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||RO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kd.isDisabled&&kd.supportsFiber)try{Qf=kd.inject(MO),Sr=kd}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DO;En.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xv(e))throw Error($(200));return AO(t,e,null,n)};En.createRoot=function(t,e){if(!Xv(t))throw Error($(299));var n=!1,r="",s=VC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Kv(t,1,!1,null,null,n,!1,r,s),t[cs]=e.current,jc(t.nodeType===8?t.parentNode:t),new Yv(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=o2(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return yo(t)};En.hydrate=function(t,e,n){if(!lm(e))throw Error($(200));return cm(null,t,e,!0,n)};En.hydrateRoot=function(t,e,n){if(!Xv(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=VC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=LC(e,null,t,1,n??null,s,!1,i,o),t[cs]=e.current,jc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new am(e)};En.render=function(t,e,n){if(!lm(e))throw Error($(200));return cm(null,t,e,!1,n)};En.unmountComponentAtNode=function(t){if(!lm(t))throw Error($(40));return t._reactRootContainer?(yo(function(){cm(null,null,t,!1,function(){t._reactRootContainer=null,t[cs]=null})}),!0):!1};En.unstable_batchedUpdates=Wv;En.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lm(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return cm(t,e,n,!1,r)};En.version="18.3.1-next-f1338f8080-20240426";function FC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FC)}catch(t){console.error(t)}}FC(),FE.exports=En;var jO=FE.exports,r1=jO;Xg.createRoot=r1.createRoot,Xg.hydrateRoot=r1.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wc(){return Wc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wc.apply(this,arguments)}var Hs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Hs||(Hs={}));const s1="popstate";function OO(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Ao(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Wy("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:nf(i))}function r(s,i){um(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return VO(e,n,r,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function um(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LO(){return Math.random().toString(36).substr(2,8)}function i1(t,e){return{usr:t.state,key:t.key,idx:e}}function Wy(t,e,n,r){return n===void 0&&(n=null),Wc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ao(e):e,{state:n,key:e&&e.key||r||LO()})}function nf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ao(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function VO(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Hs.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Wc({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Hs.Pop;let _=u(),w=_==null?null:_-c;c=_,l&&l({action:a,location:v.location,delta:w})}function m(_,w){a=Hs.Push;let x=Wy(v.location,_,w);n&&n(x,_),c=u()+1;let b=i1(x,c),C=v.createHref(x);try{o.pushState(b,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(C)}i&&l&&l({action:a,location:v.location,delta:1})}function p(_,w){a=Hs.Replace;let x=Wy(v.location,_,w);n&&n(x,_),c=u();let b=i1(x,c),C=v.createHref(x);o.replaceState(b,"",C),i&&l&&l({action:a,location:v.location,delta:0})}function g(_){let w=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof _=="string"?_:nf(_);return x=x.replace(/ $/,"%20"),Ge(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let v={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(s1,h),l=_,()=>{s.removeEventListener(s1,h),l=null}},createHref(_){return e(s,_)},createURL:g,encodeLocation(_){let w=g(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:p,go(_){return o.go(_)}};return v}var o1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(o1||(o1={}));function FO(t,e,n){return n===void 0&&(n="/"),UO(t,e,n)}function UO(t,e,n,r){let s=typeof e=="string"?Ao(e):e,i=La(s.pathname||"/",n);if(i==null)return null;let o=UC(t);zO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=JO(i);a=YO(o[l],c)}return a}function UC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ge(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=oi([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(Ge(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),UC(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:KO(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of zC(i.path))s(i,o,l)}),e}function zC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=zC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function zO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:QO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const BO=/^:[\w-]+$/,$O=3,WO=2,HO=1,qO=10,GO=-2,a1=t=>t==="*";function KO(t,e){let n=t.split("/"),r=n.length;return n.some(a1)&&(r+=GO),e&&(r+=WO),n.filter(s=>!a1(s)).reduce((s,i)=>s+(BO.test(i)?$O:i===""?HO:qO),r)}function QO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function YO(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=Hy({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:oi([i,h.pathname]),pathnameBase:r5(oi([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=oi([i,h.pathnameBase]))}return o}function Hy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=XO(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:m,isOptional:p}=u;if(m==="*"){let v=a[h]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[h];return p&&!g?c[m]=void 0:c[m]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function XO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),um(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function JO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return um(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function La(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const ZO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e5=t=>ZO.test(t);function t5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ao(t):t,i;if(n)if(e5(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),um(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=l1(n.substring(1),"/"):i=l1(n,e)}else i=e;return{pathname:i,search:s5(r),hash:i5(s)}}function l1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function tg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function n5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jv(t,e){let n=n5(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Zv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ao(t):(s=Wc({},t),Ge(!s.pathname||!s.pathname.includes("?"),tg("?","pathname","search",s)),Ge(!s.pathname||!s.pathname.includes("#"),tg("#","pathname","hash",s)),Ge(!s.search||!s.search.includes("#"),tg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=t5(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const oi=t=>t.join("/").replace(/\/\/+/g,"/"),r5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),s5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,i5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function o5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const BC=["post","put","patch","delete"];new Set(BC);const a5=["get",...BC];new Set(a5);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hc(){return Hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hc.apply(this,arguments)}const dm=M.createContext(null),$C=M.createContext(null),xs=M.createContext(null),hm=M.createContext(null),ws=M.createContext({outlet:null,matches:[],isDataRoute:!1}),WC=M.createContext(null);function l5(t,e){let{relative:n}=e===void 0?{}:e;Za()||Ge(!1);let{basename:r,navigator:s}=M.useContext(xs),{hash:i,pathname:o,search:a}=fm(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:oi([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Za(){return M.useContext(hm)!=null}function Ti(){return Za()||Ge(!1),M.useContext(hm).location}function HC(t){M.useContext(xs).static||M.useLayoutEffect(t)}function qC(){let{isDataRoute:t}=M.useContext(ws);return t?k5():c5()}function c5(){Za()||Ge(!1);let t=M.useContext(dm),{basename:e,future:n,navigator:r}=M.useContext(xs),{matches:s}=M.useContext(ws),{pathname:i}=Ti(),o=JSON.stringify(Jv(s,n.v7_relativeSplatPath)),a=M.useRef(!1);return HC(()=>{a.current=!0}),M.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Zv(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:oi([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,i,t])}const u5=M.createContext(null);function d5(t){let e=M.useContext(ws).outlet;return e&&M.createElement(u5.Provider,{value:t},e)}function fm(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(xs),{matches:s}=M.useContext(ws),{pathname:i}=Ti(),o=JSON.stringify(Jv(s,r.v7_relativeSplatPath));return M.useMemo(()=>Zv(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function h5(t,e){return f5(t,e)}function f5(t,e,n,r){Za()||Ge(!1);let{navigator:s}=M.useContext(xs),{matches:i}=M.useContext(ws),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ti(),u;if(e){var h;let _=typeof e=="string"?Ao(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||Ge(!1),u=_}else u=c;let m=u.pathname||"/",p=m;if(l!=="/"){let _=l.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let g=FO(t,{pathname:p}),v=v5(g&&g.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:oi([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:oi([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&v?M.createElement(hm.Provider,{value:{location:Hc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Hs.Pop}},v):v}function m5(){let t=b5(),e=o5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const p5=M.createElement(m5,null);class g5 extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(ws.Provider,{value:this.props.routeContext},M.createElement(WC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function y5(t){let{routeContext:e,match:n,children:r}=t,s=M.useContext(dm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(ws.Provider,{value:e},r)}function v5(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Ge(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:m,errors:p}=n,g=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,m)=>{let p,g=!1,v=null,_=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||p5,l&&(c<0&&m===0?(T5("route-fallback"),g=!0,_=null):c===m&&(g=!0,_=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),x=()=>{let b;return p?b=v:g?b=_:h.route.Component?b=M.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=u,M.createElement(y5,{match:h,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?M.createElement(g5,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var GC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(GC||{}),KC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(KC||{});function x5(t){let e=M.useContext(dm);return e||Ge(!1),e}function w5(t){let e=M.useContext($C);return e||Ge(!1),e}function _5(t){let e=M.useContext(ws);return e||Ge(!1),e}function QC(t){let e=_5(),n=e.matches[e.matches.length-1];return n.route.id||Ge(!1),n.route.id}function b5(){var t;let e=M.useContext(WC),n=w5(),r=QC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function k5(){let{router:t}=x5(GC.UseNavigateStable),e=QC(KC.UseNavigateStable),n=M.useRef(!1);return HC(()=>{n.current=!0}),M.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Hc({fromRouteId:e},i)))},[t,e])}const c1={};function T5(t,e,n){c1[t]||(c1[t]=!0)}function S5(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function qy(t){let{to:e,replace:n,state:r,relative:s}=t;Za()||Ge(!1);let{future:i,static:o}=M.useContext(xs),{matches:a}=M.useContext(ws),{pathname:l}=Ti(),c=qC(),u=Zv(e,Jv(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(u);return M.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function E5(t){return d5(t.context)}function Nn(t){Ge(!1)}function C5(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Hs.Pop,navigator:i,static:o=!1,future:a}=t;Za()&&Ge(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:i,static:o,future:Hc({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Ao(r));let{pathname:u="/",search:h="",hash:m="",state:p=null,key:g="default"}=r,v=M.useMemo(()=>{let _=La(u,l);return _==null?null:{location:{pathname:_,search:h,hash:m,state:p,key:g},navigationType:s}},[l,u,h,m,p,g,s]);return v==null?null:M.createElement(xs.Provider,{value:c},M.createElement(hm.Provider,{children:n,value:v}))}function P5(t){let{children:e,location:n}=t;return h5(Gy(e),n)}new Promise(()=>{});function Gy(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,s)=>{if(!M.isValidElement(r))return;let i=[...e,s];if(r.type===M.Fragment){n.push.apply(n,Gy(r.props.children,i));return}r.type!==Nn&&Ge(!1),!r.props.index||!r.props.children||Ge(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Gy(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rf(){return rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rf.apply(this,arguments)}function YC(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function I5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function A5(t,e){return t.button===0&&(!e||e==="_self")&&!I5(t)}const R5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],N5=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],D5="6";try{window.__reactRouterVersion=D5}catch{}const M5=M.createContext({isTransitioning:!1}),j5="startTransition",u1=TM[j5];function O5(t){let{basename:e,children:n,future:r,window:s}=t,i=M.useRef();i.current==null&&(i.current=OO({window:s,v5Compat:!0}));let o=i.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=M.useCallback(h=>{c&&u1?u1(()=>l(h)):l(h)},[l,c]);return M.useLayoutEffect(()=>o.listen(u),[o,u]),M.useEffect(()=>S5(r),[r]),M.createElement(C5,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const L5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",V5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,As=M.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,m=YC(e,R5),{basename:p}=M.useContext(xs),g,v=!1;if(typeof c=="string"&&V5.test(c)&&(g=c,L5))try{let b=new URL(window.location.href),C=c.startsWith("//")?new URL(b.protocol+c):new URL(c),P=La(C.pathname,p);C.origin===b.origin&&P!=null?c=P+C.search+C.hash:v=!0}catch{}let _=l5(c,{relative:s}),w=U5(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function x(b){r&&r(b),b.defaultPrevented||w(b)}return M.createElement("a",rf({},m,{href:g||_,onClick:v||i?r:x,ref:n,target:l}))}),Ky=M.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,h=YC(e,N5),m=fm(l,{relative:h.relative}),p=Ti(),g=M.useContext($C),{navigator:v,basename:_}=M.useContext(xs),w=g!=null&&z5(m)&&c===!0,x=v.encodeLocation?v.encodeLocation(m).pathname:m.pathname,b=p.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;s||(b=b.toLowerCase(),C=C?C.toLowerCase():null,x=x.toLowerCase()),C&&_&&(C=La(C,_)||C);const P=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=b===x||!o&&b.startsWith(x)&&b.charAt(P)==="/",S=C!=null&&(C===x||!o&&C.startsWith(x)&&C.charAt(x.length)==="/"),T={isActive:j,isPending:S,isTransitioning:w},E=j?r:void 0,R;typeof i=="function"?R=i(T):R=[i,j?"active":null,S?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(T):a;return M.createElement(As,rf({},h,{"aria-current":E,className:R,ref:n,style:I,to:l,viewTransition:c}),typeof u=="function"?u(T):u)});var Qy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qy||(Qy={}));var d1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(d1||(d1={}));function F5(t){let e=M.useContext(dm);return e||Ge(!1),e}function U5(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=qC(),c=Ti(),u=fm(t,{relative:o});return M.useCallback(h=>{if(A5(h,n)){h.preventDefault();let m=r!==void 0?r:nf(c)===nf(u);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}function z5(t,e){e===void 0&&(e={});let n=M.useContext(M5);n==null&&Ge(!1);let{basename:r}=F5(Qy.useViewTransitionState),s=fm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=La(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=La(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Hy(s.pathname,o)!=null||Hy(s.pathname,i)!=null}let B5={data:""},$5=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||B5},W5=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,H5=/\/\*[^]*?\*\/|  +/g,h1=/\n+/g,Fs=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?Fs(o,i):i+"{"+Fs(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=Fs(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Fs.p?Fs.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Fr={},XC=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+XC(t[n]);return e}return t},q5=(t,e,n,r,s)=>{let i=XC(t),o=Fr[i]||(Fr[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!Fr[o]){let l=i!==t?t:(c=>{let u,h,m=[{}];for(;u=W5.exec(c.replace(H5,""));)u[4]?m.shift():u[3]?(h=u[3].replace(h1," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][u[1]]=u[2].replace(h1," ").trim();return m[0]})(t);Fr[o]=Fs(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Fr.g?Fr.g:null;return n&&(Fr.g=Fr[o]),((l,c,u,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Fr[o],e,r,a),o},G5=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Fs(a,""):a===!1?"":a}return r+s+(o??"")},"");function mm(t){let e=this||{},n=t.call?t(e.p):t;return q5(n.unshift?n.raw?G5(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,$5(e.target),e.g,e.o,e.k)}let JC,Yy,Xy;mm.bind({g:1});let hs=mm.bind({k:1});function K5(t,e,n,r){Fs.p=e,JC=t,Yy=n,Xy=r}function Si(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:Yy&&Yy()},a),n.o=/ *go\d+/.test(l),a.className=mm.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),Xy&&c[0]&&Xy(a),JC(c,a)}return s}}var Q5=t=>typeof t=="function",sf=(t,e)=>Q5(t)?t(e):t,Y5=(()=>{let t=0;return()=>(++t).toString()})(),ZC=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),X5=20,ex="default",eP=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return eP(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},uh=[],tP={toasts:[],pausedAt:void 0,settings:{toastLimit:X5}},Tr={},nP=(t,e=ex)=>{Tr[e]=eP(Tr[e]||tP,t),uh.forEach(([n,r])=>{n===e&&r(Tr[e])})},rP=t=>Object.keys(Tr).forEach(e=>nP(t,e)),J5=t=>Object.keys(Tr).find(e=>Tr[e].toasts.some(n=>n.id===t)),pm=(t=ex)=>e=>{nP(e,t)},Z5={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},eL=(t={},e=ex)=>{let[n,r]=M.useState(Tr[e]||tP),s=M.useRef(Tr[e]);M.useEffect(()=>(s.current!==Tr[e]&&r(Tr[e]),uh.push([e,r]),()=>{let o=uh.findIndex(([a])=>a===e);o>-1&&uh.splice(o,1)}),[e]);let i=n.toasts.map(o=>{var a,l,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((a=t[o.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((l=t[o.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||Z5[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...n,toasts:i}},tL=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Y5()}),xu=t=>(e,n)=>{let r=tL(e,t,n);return pm(r.toasterId||J5(r.id))({type:2,toast:r}),r.id},ht=(t,e)=>xu("blank")(t,e);ht.error=xu("error");ht.success=xu("success");ht.loading=xu("loading");ht.custom=xu("custom");ht.dismiss=(t,e)=>{let n={type:3,toastId:t};e?pm(e)(n):rP(n)};ht.dismissAll=t=>ht.dismiss(void 0,t);ht.remove=(t,e)=>{let n={type:4,toastId:t};e?pm(e)(n):rP(n)};ht.removeAll=t=>ht.remove(void 0,t);ht.promise=(t,e,n)=>{let r=ht.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?sf(e.success,s):void 0;return i?ht.success(i,{id:r,...n,...n==null?void 0:n.success}):ht.dismiss(r),s}).catch(s=>{let i=e.error?sf(e.error,s):void 0;i?ht.error(i,{id:r,...n,...n==null?void 0:n.error}):ht.dismiss(r)}),t};var nL=1e3,rL=(t,e="default")=>{let{toasts:n,pausedAt:r}=eL(t,e),s=M.useRef(new Map).current,i=M.useCallback((h,m=nL)=>{if(s.has(h))return;let p=setTimeout(()=>{s.delete(h),o({type:4,toastId:h})},m);s.set(h,p)},[]);M.useEffect(()=>{if(r)return;let h=Date.now(),m=n.map(p=>{if(p.duration===1/0)return;let g=(p.duration||0)+p.pauseDuration-(h-p.createdAt);if(g<0){p.visible&&ht.dismiss(p.id);return}return setTimeout(()=>ht.dismiss(p.id,e),g)});return()=>{m.forEach(p=>p&&clearTimeout(p))}},[n,r,e]);let o=M.useCallback(pm(e),[e]),a=M.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=M.useCallback((h,m)=>{o({type:1,toast:{id:h,height:m}})},[o]),c=M.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),u=M.useCallback((h,m)=>{let{reverseOrder:p=!1,gutter:g=8,defaultPosition:v}=m||{},_=n.filter(b=>(b.position||v)===(h.position||v)&&b.height),w=_.findIndex(b=>b.id===h.id),x=_.filter((b,C)=>C<w&&b.visible).length;return _.filter(b=>b.visible).slice(...p?[x+1]:[0,x]).reduce((b,C)=>b+(C.height||0)+g,0)},[n]);return M.useEffect(()=>{n.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let m=s.get(h.id);m&&(clearTimeout(m),s.delete(h.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},sL=hs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,iL=hs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,oL=hs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,aL=Si("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${sL} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${iL} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${oL} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,lL=hs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,cL=Si("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${lL} 1s linear infinite;
`,uL=hs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,dL=hs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,hL=Si("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uL} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${dL} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,fL=Si("div")`
  position: absolute;
`,mL=Si("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,pL=hs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,gL=Si("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${pL} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,yL=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?M.createElement(gL,null,e):e:n==="blank"?null:M.createElement(mL,null,M.createElement(cL,{...r}),n!=="loading"&&M.createElement(fL,null,n==="error"?M.createElement(aL,{...r}):M.createElement(hL,{...r})))},vL=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,xL=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,wL="0%{opacity:0;} 100%{opacity:1;}",_L="0%{opacity:1;} 100%{opacity:0;}",bL=Si("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,kL=Si("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,TL=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=ZC()?[wL,_L]:[vL(n),xL(n)];return{animation:e?`${hs(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${hs(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},SL=M.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?TL(t.position||e||"top-center",t.visible):{opacity:0},i=M.createElement(yL,{toast:t}),o=M.createElement(kL,{...t.ariaProps},sf(t.message,t));return M.createElement(bL,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):M.createElement(M.Fragment,null,i,o))});K5(M.createElement);var EL=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=M.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return M.createElement("div",{ref:i,className:e,style:n},s)},CL=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ZC()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},PL=mm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Td=16,IL=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=rL(n,i);return M.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Td,left:Td,right:Td,bottom:Td,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let h=u.position||e,m=c.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),p=CL(h,m);return M.createElement(EL,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?PL:"",style:p},u.type==="custom"?sf(u.message,u):s?s(u):M.createElement(SL,{toast:u,position:h}))}))},Yt=ht;const AL="modulepreload",RL=function(t){return"/"+t},f1={},Wr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=RL(l),l in f1)return;f1[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":AL,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},NL={},m1=t=>{let e;const n=new Set,r=(u,h)=>{const m=typeof u=="function"?u(e):u;if(!Object.is(m,e)){const p=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(g=>g(e,p))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(NL?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,s,l);return l},DL=t=>t?m1(t):m1;var sP={exports:{}},iP={},oP={exports:{}},aP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=M;function ML(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jL=typeof Object.is=="function"?Object.is:ML,OL=Va.useState,LL=Va.useEffect,VL=Va.useLayoutEffect,FL=Va.useDebugValue;function UL(t,e){var n=e(),r=OL({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return VL(function(){s.value=n,s.getSnapshot=e,ng(s)&&i({inst:s})},[t,n,e]),LL(function(){return ng(s)&&i({inst:s}),t(function(){ng(s)&&i({inst:s})})},[t]),FL(n),n}function ng(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jL(t,n)}catch{return!0}}function zL(t,e){return e()}var BL=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?zL:UL;aP.useSyncExternalStore=Va.useSyncExternalStore!==void 0?Va.useSyncExternalStore:BL;oP.exports=aP;var $L=oP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm=M,WL=$L;function HL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qL=typeof Object.is=="function"?Object.is:HL,GL=WL.useSyncExternalStore,KL=gm.useRef,QL=gm.useEffect,YL=gm.useMemo,XL=gm.useDebugValue;iP.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=KL(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=YL(function(){function l(p){if(!c){if(c=!0,u=p,p=r(p),s!==void 0&&o.hasValue){var g=o.value;if(s(g,p))return h=g}return h=p}if(g=h,qL(u,p))return g;var v=r(p);return s!==void 0&&s(g,v)?(u=p,g):(u=p,h=v)}var c=!1,u,h,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,s]);var a=GL(t,i[0],i[1]);return QL(function(){o.hasValue=!0,o.value=a},[a]),XL(a),a};sP.exports=iP;var JL=sP.exports;const ZL=CE(JL),lP={},{useDebugValue:eV}=mn,{useSyncExternalStoreWithSelector:tV}=ZL;let p1=!1;const nV=t=>t;function rV(t,e=nV,n){(lP?"production":void 0)!=="production"&&n&&!p1&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),p1=!0);const r=tV(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return eV(r),r}const sV=t=>{(lP?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?DL(t):t,n=(r,s)=>rV(e,r,s);return Object.assign(n,e),n},ym=t=>sV,iV={};function oV(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const qc=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return qc(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return qc(r)(n)}}}},aV=(t,e)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,w)=>({...w,..._}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(..._)},r,s);const u=qc(i.serialize),h=()=>{const _=i.partialize({...r()});let w;const x=u({state:_,version:i.version}).then(b=>c.setItem(i.name,b)).catch(b=>{w=b});if(w)throw w;return x},m=s.setState;s.setState=(_,w)=>{m(_,w),h()};const p=t((..._)=>{n(..._),h()},r,s);let g;const v=()=>{var _;if(!c)return;o=!1,a.forEach(x=>x(r()));const w=((_=i.onRehydrateStorage)==null?void 0:_.call(i,r()))||void 0;return qc(c.getItem.bind(c))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var b;return g=i.merge(x,(b=r())!=null?b:p),n(g,!0),h()}).then(()=>{w==null||w(g,void 0),o=!0,l.forEach(x=>x(g))}).catch(x=>{w==null||w(void 0,x)})};return s.persist={setOptions:_=>{i={...i,..._},_.getStorage&&(c=_.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},v(),g||p},lV=(t,e)=>(n,r,s)=>{let i={storage:oV(()=>localStorage),partialize:v=>v,version:0,merge:(v,_)=>({..._,...v}),...e},o=!1;const a=new Set,l=new Set;let c=i.storage;if(!c)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,s);const u=()=>{const v=i.partialize({...r()});return c.setItem(i.name,{state:v,version:i.version})},h=s.setState;s.setState=(v,_)=>{h(v,_),u()};const m=t((...v)=>{n(...v),u()},r,s);s.getInitialState=()=>m;let p;const g=()=>{var v,_;if(!c)return;o=!1,a.forEach(x=>{var b;return x((b=r())!=null?b:m)});const w=((_=i.onRehydrateStorage)==null?void 0:_.call(i,(v=r())!=null?v:m))||void 0;return qc(c.getItem.bind(c))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return[!0,i.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var b;const[C,P]=x;if(p=i.merge(P,(b=r())!=null?b:m),n(p,!0),C)return u()}).then(()=>{w==null||w(p,void 0),p=r(),o=!0,l.forEach(x=>x(p))}).catch(x=>{w==null||w(void 0,x)})};return s.persist={setOptions:v=>{i={...i,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:v=>(a.add(v),()=>{a.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},i.skipHydration||g(),p||m},cV=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((iV?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),aV(t,e)):lV(t,e),vm=cV;let Sd;const uV=new Uint8Array(16);function dV(){if(!Sd&&(Sd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Sd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Sd(uV)}const _t=[];for(let t=0;t<256;++t)_t.push((t+256).toString(16).slice(1));function hV(t,e=0){return _t[t[e+0]]+_t[t[e+1]]+_t[t[e+2]]+_t[t[e+3]]+"-"+_t[t[e+4]]+_t[t[e+5]]+"-"+_t[t[e+6]]+_t[t[e+7]]+"-"+_t[t[e+8]]+_t[t[e+9]]+"-"+_t[t[e+10]]+_t[t[e+11]]+_t[t[e+12]]+_t[t[e+13]]+_t[t[e+14]]+_t[t[e+15]]}const fV=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),g1={randomUUID:fV};function Us(t,e,n){if(g1.randomUUID&&!t)return g1.randomUUID();t=t||{};const r=t.random||(t.rng||dV)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,hV(r)}const rg=[{name:"Travail",color:"#3b82f6",icon:"briefcase",order:0,isDefault:!0},{name:"Personnel",color:"#22c55e",icon:"user",order:1,isDefault:!0},{name:"Sant",color:"#ef4444",icon:"heart",order:2,isDefault:!0},{name:"tudes",color:"#8b5cf6",icon:"book",order:3,isDefault:!0},{name:"Finances",color:"#f59e0b",icon:"wallet",order:4,isDefault:!0},{name:"Social",color:"#ec4899",icon:"users",order:5,isDefault:!0},{name:"Loisirs",color:"#06b6d4",icon:"gamepad-2",order:6,isDefault:!0},{name:"Maison",color:"#84cc16",icon:"home",order:7,isDefault:!0}],Jy=100,mV=1.5,cP={trivial:5,easy:10,medium:25,hard:50,epic:100,legendary:200},pV={none:0,low:0,medium:5,high:10,critical:20},gV=[{days:3,bonus:.1},{days:7,bonus:.25},{days:14,bonus:.5},{days:30,bonus:.75},{days:60,bonus:1},{days:100,bonus:1.5},{days:365,bonus:2}];var y1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},yV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},dP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(m=64)),r.push(n[u],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new vV;const m=i<<2|a>>4;if(r.push(m),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xV=function(t){const e=uP(t);return dP.encodeByteArray(e,!0)},of=function(t){return xV(t).replace(/\./g,"")},hP=function(t){try{return dP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=()=>wV().__FIREBASE_DEFAULTS__,bV=()=>{if(typeof process>"u"||typeof y1>"u")return;const t=y1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hP(t[1]);return e&&JSON.parse(e)},xm=()=>{try{return _V()||bV()||kV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fP=t=>{var e,n;return(n=(e=xm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TV=t=>{const e=fP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mP=()=>{var t;return(t=xm())===null||t===void 0?void 0:t.config},pP=t=>{var e;return(e=xm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[of(JSON.stringify(n)),of(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function PV(){var t;const e=(t=xm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RV(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function NV(){return!PV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yP(){try{return typeof indexedDB=="object"}catch{return!1}}function vP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function DV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MV,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ro.prototype.create)}}class Ro{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?jV(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new dr(s,a,r)}}function jV(t,e){return t.replace(OV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const OV=/\{\$([^}]+)}/g;function LV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function af(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(v1(i)&&v1(o)){if(!af(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function v1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function $l(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VV(t,e){const n=new FV(t,e);return n.subscribe.bind(n)}class FV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=sg),s.error===void 0&&(s.error=sg),s.complete===void 0&&(s.complete=sg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=1e3,BV=2,$V=4*60*60*1e3,WV=.5;function x1(t,e=zV,n=BV){const r=e*Math.pow(n,t),s=Math.round(WV*r*(Math.random()-.5)*2);return Math.min($V,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){return t&&t._delegate?t._delegate:t}class lr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new SV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GV(e))try{this.getOrInitializeService({instanceIdentifier:Wi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wi){return this.instances.has(e)}getOptions(e=Wi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wi){return this.component?this.component.multipleInstances?e:Wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qV(t){return t===Wi?void 0:t}function GV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const QV={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},YV=ye.INFO,XV={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},JV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=XV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wm{constructor(e){this.name=e,this._logLevel=YV,this._logHandler=JV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const ZV=(t,e)=>e.some(n=>t instanceof n);let w1,_1;function e4(){return w1||(w1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t4(){return _1||(_1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xP=new WeakMap,Zy=new WeakMap,wP=new WeakMap,ig=new WeakMap,tx=new WeakMap;function n4(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ai(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xP.set(n,t)}).catch(()=>{}),tx.set(e,t),e}function r4(t){if(Zy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Zy.set(t,e)}let e0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function s4(t){e0=t(e0)}function i4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(og(this),e,...n);return wP.set(r,e.sort?e.sort():[e]),ai(r)}:t4().includes(t)?function(...e){return t.apply(og(this),e),ai(xP.get(this))}:function(...e){return ai(t.apply(og(this),e))}}function o4(t){return typeof t=="function"?i4(t):(t instanceof IDBTransaction&&r4(t),ZV(t,e4())?new Proxy(t,e0):t)}function ai(t){if(t instanceof IDBRequest)return n4(t);if(ig.has(t))return ig.get(t);const e=o4(t);return e!==t&&(ig.set(t,e),tx.set(e,t)),e}const og=t=>tx.get(t);function _P(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ai(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ai(o.result),l.oldVersion,l.newVersion,ai(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const a4=["get","getKey","getAll","getAllKeys","count"],l4=["put","add","delete","clear"],ag=new Map;function b1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ag.get(e))return ag.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=l4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||a4.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ag.set(e,i),i}s4(t=>({...t,get:(e,n,r)=>b1(e,n)||t.get(e,n,r),has:(e,n)=>!!b1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function u4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const t0="@firebase/app",k1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new wm("@firebase/app"),d4="@firebase/app-compat",h4="@firebase/analytics-compat",f4="@firebase/analytics",m4="@firebase/app-check-compat",p4="@firebase/app-check",g4="@firebase/auth",y4="@firebase/auth-compat",v4="@firebase/database",x4="@firebase/data-connect",w4="@firebase/database-compat",_4="@firebase/functions",b4="@firebase/functions-compat",k4="@firebase/installations",T4="@firebase/installations-compat",S4="@firebase/messaging",E4="@firebase/messaging-compat",C4="@firebase/performance",P4="@firebase/performance-compat",I4="@firebase/remote-config",A4="@firebase/remote-config-compat",R4="@firebase/storage",N4="@firebase/storage-compat",D4="@firebase/firestore",M4="@firebase/vertexai-preview",j4="@firebase/firestore-compat",O4="firebase",L4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="[DEFAULT]",V4={[t0]:"fire-core",[d4]:"fire-core-compat",[f4]:"fire-analytics",[h4]:"fire-analytics-compat",[p4]:"fire-app-check",[m4]:"fire-app-check-compat",[g4]:"fire-auth",[y4]:"fire-auth-compat",[v4]:"fire-rtdb",[x4]:"fire-data-connect",[w4]:"fire-rtdb-compat",[_4]:"fire-fn",[b4]:"fire-fn-compat",[k4]:"fire-iid",[T4]:"fire-iid-compat",[S4]:"fire-fcm",[E4]:"fire-fcm-compat",[C4]:"fire-perf",[P4]:"fire-perf-compat",[I4]:"fire-rc",[A4]:"fire-rc-compat",[R4]:"fire-gcs",[N4]:"fire-gcs-compat",[D4]:"fire-fst",[j4]:"fire-fst-compat",[M4]:"fire-vertex","fire-js":"fire-js",[O4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=new Map,F4=new Map,r0=new Map;function T1(t,e){try{t.container.addComponent(e)}catch(n){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dr(t){const e=t.name;if(r0.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;r0.set(e,t);for(const n of lf.values())T1(n,t);for(const n of F4.values())T1(n,t);return!0}function _u(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new Ro("app","Firebase",U4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=L4;function bP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:n0,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw li.create("bad-app-name",{appName:String(s)});if(n||(n=mP()),!n)throw li.create("no-options");const i=lf.get(s);if(i){if(af(n,i.options)&&af(r,i.config))return i;throw li.create("duplicate-app",{appName:s})}const o=new KV(s);for(const l of r0.values())o.addComponent(l);const a=new z4(n,r,o);return lf.set(s,a),a}function kP(t=n0){const e=lf.get(t);if(!e&&t===n0&&mP())return bP();if(!e)throw li.create("no-app",{appName:t});return e}function zn(t,e,n){var r;let s=(r=V4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(a.join(" "));return}Dr(new lr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4="firebase-heartbeat-database",$4=1,Gc="firebase-heartbeat-store";let lg=null;function TP(){return lg||(lg=_P(B4,$4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gc)}catch(n){console.warn(n)}}}}).catch(t=>{throw li.create("idb-open",{originalErrorMessage:t.message})})),lg}async function W4(t){try{const n=(await TP()).transaction(Gc),r=await n.objectStore(Gc).get(SP(t));return await n.done,r}catch(e){if(e instanceof dr)fs.warn(e.message);else{const n=li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fs.warn(n.message)}}}async function S1(t,e){try{const r=(await TP()).transaction(Gc,"readwrite");await r.objectStore(Gc).put(e,SP(t)),await r.done}catch(n){if(n instanceof dr)fs.warn(n.message);else{const r=li.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fs.warn(r.message)}}}function SP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=1024,q4=30*24*60*60*1e3;class G4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Q4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=E1();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=q4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=E1(),{heartbeatsToSend:r,unsentEntries:s}=K4(this._heartbeatsCache.heartbeats),i=of(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return fs.warn(n),""}}}function E1(){return new Date().toISOString().substring(0,10)}function K4(t,e=H4){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),C1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),C1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Q4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yP()?vP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await W4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return S1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return S1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function C1(t){return of(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(t){Dr(new lr("platform-logger",e=>new c4(e),"PRIVATE")),Dr(new lr("heartbeat",e=>new G4(e),"PRIVATE")),zn(t0,k1,t),zn(t0,k1,"esm2017"),zn("fire-js","")}Y4("");function nx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function EP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const X4=EP,CP=new Ro("auth","Firebase",EP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new wm("@firebase/auth");function J4(t,...e){cf.logLevel<=ye.WARN&&cf.warn(`Auth (${el}): ${t}`,...e)}function dh(t,...e){cf.logLevel<=ye.ERROR&&cf.error(`Auth (${el}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t,...e){throw sx(t,...e)}function or(t,...e){return sx(t,...e)}function rx(t,e,n){const r=Object.assign(Object.assign({},X4()),{[e]:n});return new Ro("auth","Firebase",r).create(e,{appName:t.name})}function ss(t){return rx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Hn(t,"argument-error"),rx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return CP.create(t,...e)}function ie(t,e,...n){if(!t)throw sx(e,...n)}function Xr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dh(e),new Error(e)}function ms(t,e){t||Xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eF(){return P1()==="http:"||P1()==="https:"}function P1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eF()||gP()||"connection"in navigator)?navigator.onLine:!0}function nF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ms(n>e,"Short delay should be less than long delay!"),this.isMobile=CV()||AV()}get(){return tF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e){ms(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=new bu(3e4,6e4);function Ei(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ci(t,e,n,r,s={}){return IP(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=wu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return IV()||(c.referrerPolicy="no-referrer"),PP.fetch()(AP(t,t.config.apiHost,n,a),c)})}async function IP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},rF),e);try{const s=new oF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ed(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ed(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ed(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ed(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw rx(t,u,c);Hn(t,u)}}catch(s){if(s instanceof dr)throw s;Hn(t,"network-request-failed",{message:String(s)})}}async function ku(t,e,n,r,s={}){const i=await Ci(t,e,n,r,s);return"mfaPendingCredential"in i&&Hn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function AP(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ix(t.config,s):`${t.config.apiScheme}://${s}`}function iF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(or(this.auth,"network-request-failed")),sF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ed(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=or(t,e,r);return s.customData._tokenResponse=n,s}function I1(t){return t!==void 0&&t.enterprise!==void 0}class aF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return iF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function lF(t,e){return Ci(t,"GET","/v2/recaptchaConfig",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cF(t,e){return Ci(t,"POST","/v1/accounts:delete",e)}async function RP(t,e){return Ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uF(t,e=!1){const n=Je(t),r=await n.getIdToken(e),s=ox(r);ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:cc(cg(s.auth_time)),issuedAtTime:cc(cg(s.iat)),expirationTime:cc(cg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function cg(t){return Number(t)*1e3}function ox(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const s=hP(n);return s?JSON.parse(s):(dh("Failed to decode base64 JWT payload"),null)}catch(s){return dh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function A1(t){const e=ox(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dr&&dF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uf(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Kc(t,RP(n,{idToken:r}));ie(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?NP(i.providerUserInfo):[],a=mF(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new i0(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function fF(t){const e=Je(t);await uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function NP(t){return t.map(e=>{var{providerId:n}=e,r=nx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pF(t,e){const n=await IP(t,{},async()=>{const r=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=AP(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",PP.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gF(t,e){return Ci(t,"POST","/v2/accounts:revokeToken",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):A1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const n=A1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await pF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ba;return r&&(ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ie(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ba,this.toJSON())}_performRefresh(){return Xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=nx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new i0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Kc(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uF(this,e)}reload(){return fF(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await uf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(ss(this.auth));const e=await this.getIdToken();return await Kc(this,cF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:b,emailVerified:C,isAnonymous:P,providerData:j,stsTokenManager:S}=n;ie(b&&S,e,"internal-error");const T=ba.fromJSON(this.name,S);ie(typeof b=="string",e,"internal-error"),Cs(h,e.name),Cs(m,e.name),ie(typeof C=="boolean",e,"internal-error"),ie(typeof P=="boolean",e,"internal-error"),Cs(p,e.name),Cs(g,e.name),Cs(v,e.name),Cs(_,e.name),Cs(w,e.name),Cs(x,e.name);const E=new Jr({uid:b,auth:e,email:m,emailVerified:C,displayName:h,isAnonymous:P,photoURL:g,phoneNumber:p,tenantId:v,stsTokenManager:T,createdAt:w,lastLoginAt:x});return j&&Array.isArray(j)&&(E.providerData=j.map(R=>Object.assign({},R))),_&&(E._redirectEventId=_),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new ba;s.updateFromServerResponse(n);const i=new Jr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await uf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ie(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?NP(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ba;a.updateFromIdToken(r);const l=new Jr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new i0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=new Map;function Zr(t){ms(t instanceof Function,"Expected a class definition");let e=R1.get(t);return e?(ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,R1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DP.type="NONE";const N1=DP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t,e,n){return`firebase:${t}:${e}:${n}`}class ka{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=hh(this.userKey,s.apiKey,i),this.fullPersistenceKey=hh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ka(Zr(N1),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Zr(N1);const o=hh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Jr._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ka(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ka(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FP(e))return"Blackberry";if(UP(e))return"Webos";if(jP(e))return"Safari";if((e.includes("chrome/")||OP(e))&&!e.includes("edge/"))return"Chrome";if(VP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function MP(t=qt()){return/firefox\//i.test(t)}function jP(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OP(t=qt()){return/crios\//i.test(t)}function LP(t=qt()){return/iemobile/i.test(t)}function VP(t=qt()){return/android/i.test(t)}function FP(t=qt()){return/blackberry/i.test(t)}function UP(t=qt()){return/webos/i.test(t)}function ax(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yF(t=qt()){var e;return ax(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vF(){return RV()&&document.documentMode===10}function zP(t=qt()){return ax(t)||VP(t)||UP(t)||FP(t)||/windows phone/i.test(t)||LP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t,e=[]){let n;switch(t){case"Browser":n=D1(qt());break;case"Worker":n=`${D1(qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${el}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF(t,e={}){return Ci(t,"GET","/v2/passwordPolicy",Ei(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=6;class bF{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_F,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M1(this),this.idTokenSubscription=new M1(this),this.beforeStateQueue=new xF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ka.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await RP(this,{idToken:e}),r=await Jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(nr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(ss(this));const n=e?Je(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wF(this),n=new bF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ro("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zr(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await ka.create(this,[Zr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&J4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Pi(t){return Je(t)}class M1{constructor(e){this.auth=e,this.observer=null,this.addObserver=VV(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _m={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TF(t){_m=t}function $P(t){return _m.loadJS(t)}function SF(){return _m.recaptchaEnterpriseScript}function EF(){return _m.gapiScript}function CF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const PF="recaptcha-enterprise",IF="NO_RECAPTCHA";class AF{constructor(e){this.type=PF,this.auth=Pi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{lF(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new aF(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;I1(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(IF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&I1(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=SF();l.length!==0&&(l+=a),$P(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function j1(t,e,n,r=!1){const s=new AF(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function o0(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await j1(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await j1(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(t,e){const n=_u(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(af(i,e??{}))return s;Hn(s,"already-initialized")}return n.initialize({options:e})}function NF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function DF(t,e,n){const r=Pi(t);ie(r._canInitEmulator,r,"emulator-config-failed"),ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=WP(e),{host:o,port:a}=MF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),jF()}function WP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MF(t){const e=WP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:O1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:O1(o)}}}function O1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xr("not implemented")}_getIdTokenResponse(e){return Xr("not implemented")}_linkToIdToken(e,n){return Xr("not implemented")}_getReauthenticationResolver(e){return Xr("not implemented")}}async function OF(t,e){return Ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LF(t,e){return ku(t,"POST","/v1/accounts:signInWithPassword",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VF(t,e){return ku(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}async function FF(t,e){return ku(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends lx{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Qc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Qc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return o0(e,n,"signInWithPassword",LF);case"emailLink":return VF(e,{email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return o0(e,r,"signUpPassword",OF);case"emailLink":return FF(e,{idToken:n,email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t,e){return ku(t,"POST","/v1/accounts:signInWithIdp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF="http://localhost";class vo extends lx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=nx(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new vo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ta(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ta(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ta(e,n)}buildRequest(){const e={requestUri:UF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BF(t){const e=Bl($l(t)).link,n=e?Bl($l(e)).deep_link_id:null,r=Bl($l(t)).deep_link_id;return(r?Bl($l(r)).link:null)||r||n||e||t}class cx{constructor(e){var n,r,s,i,o,a;const l=Bl($l(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=zF((s=l.mode)!==null&&s!==void 0?s:null);ie(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=BF(e);try{return new cx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.providerId=tl.PROVIDER_ID}static credential(e,n){return Qc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=cx.parseLink(n);return ie(r,"argument-error"),Qc._fromEmailAndCode(e,r.code,r.tenantId)}}tl.PROVIDER_ID="password";tl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends ux{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Tu{constructor(){super("facebook.com")}static credential(e){return vo._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vo._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gr.credential(n,r)}catch{return null}}}Gr.GOOGLE_SIGN_IN_METHOD="google.com";Gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Tu{constructor(){super("github.com")}static credential(e){return vo._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.GITHUB_SIGN_IN_METHOD="github.com";Kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Tu{constructor(){super("twitter.com")}static credential(e,n){return vo._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Bs.credential(n,r)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $F(t,e){return ku(t,"POST","/v1/accounts:signUp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Jr._fromIdTokenResponse(e,r,s),o=L1(r);return new xo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=L1(r);return new xo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function L1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends dr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,df.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new df(e,n,r,s)}}function HP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?df._fromErrorAndOperation(t,i,e,r):i})}async function WF(t,e,n=!1){const r=await Kc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF(t,e,n=!1){const{auth:r}=t;if(nr(r.app))return Promise.reject(ss(r));const s="reauthenticate";try{const i=await Kc(t,HP(r,s,e,t),n);ie(i.idToken,r,"internal-error");const o=ox(i.idToken);ie(o,r,"internal-error");const{sub:a}=o;return ie(t.uid===a,r,"user-mismatch"),xo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Hn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(t,e,n=!1){if(nr(t.app))return Promise.reject(ss(t));const r="signIn",s=await HP(t,r,e),i=await xo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function qF(t,e){return qP(Pi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(t){const e=Pi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GF(t,e,n){if(nr(t.app))return Promise.reject(ss(t));const r=Pi(t),o=await o0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$F).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&GP(t),l}),a=await xo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function KF(t,e,n){return nr(t.app)?Promise.reject(ss(t)):qF(Je(t),tl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&GP(t),r})}function QF(t,e,n,r){return Je(t).onIdTokenChanged(e,n,r)}function YF(t,e,n){return Je(t).beforeAuthStateChanged(e,n)}function XF(t,e,n,r){return Je(t).onAuthStateChanged(e,n,r)}function JF(t){return Je(t).signOut()}const hf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hf,"1"),this.storage.removeItem(hf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=1e3,e3=10;class QP extends KP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);vF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,e3):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}QP.type="LOCAL";const t3=QP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP extends KP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}YP.type="SESSION";const XP=YP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new bm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await n3(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=dx("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(){return window}function s3(t){Cr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(){return typeof Cr().WorkerGlobalScope<"u"&&typeof Cr().importScripts=="function"}async function i3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function a3(){return JP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="firebaseLocalStorageDb",l3=1,ff="firebaseLocalStorage",eI="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function km(t,e){return t.transaction([ff],e?"readwrite":"readonly").objectStore(ff)}function c3(){const t=indexedDB.deleteDatabase(ZP);return new Su(t).toPromise()}function a0(){const t=indexedDB.open(ZP,l3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ff,{keyPath:eI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ff)?e(r):(r.close(),await c3(),e(await a0()))})})}async function V1(t,e,n){const r=km(t,!0).put({[eI]:e,value:n});return new Su(r).toPromise()}async function u3(t,e){const n=km(t,!1).get(e),r=await new Su(n).toPromise();return r===void 0?null:r.value}function F1(t,e){const n=km(t,!0).delete(e);return new Su(n).toPromise()}const d3=800,h3=3;class tI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await a0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>h3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bm._getInstance(a3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await i3(),!this.activeServiceWorker)return;this.sender=new r3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await a0();return await V1(e,hf,"1"),await F1(e,hf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>V1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>u3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>F1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=km(s,!1).getAll();return new Su(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tI.type="LOCAL";const f3=tI;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t,e){return e?Zr(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx extends lx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ta(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ta(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ta(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function m3(t){return qP(t.auth,new hx(t),t.bypassAuthState)}function p3(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),HF(n,new hx(t),t.bypassAuthState)}async function g3(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),WF(n,new hx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m3;case"linkViaPopup":case"linkViaRedirect":return g3;case"reauthViaPopup":case"reauthViaRedirect":return p3;default:Hn(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=new bu(2e3,1e4);async function U1(t,e,n){if(nr(t.app))return Promise.reject(or(t,"operation-not-supported-in-this-environment"));const r=Pi(t);Z4(t,e,ux);const s=nI(r,n);return new eo(r,"signInViaPopup",e,s).executeNotNull()}class eo extends rI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const e=dx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y3.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3="pendingRedirect",fh=new Map;class x3 extends rI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const r=await w3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w3(t,e){const n=k3(e),r=b3(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function _3(t,e){fh.set(t._key(),e)}function b3(t){return Zr(t._redirectPersistence)}function k3(t){return hh(v3,t.config.apiKey,t.name)}async function T3(t,e,n=!1){if(nr(t.app))return Promise.reject(ss(t));const r=Pi(t),s=nI(r,e),o=await new x3(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=10*60*1e3;class E3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!sI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(or(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S3&&this.cachedEventUids.clear(),this.cachedEventUids.has(z1(e))}saveEventToCache(e){this.cachedEventUids.add(z1(e)),this.lastProcessedEventTime=Date.now()}}function z1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function C3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P3(t,e={}){return Ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A3=/^https?/;async function R3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await P3(t);for(const n of e)try{if(N3(n))return}catch{}Hn(t,"unauthorized-domain")}function N3(t){const e=s0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!A3.test(n))return!1;if(I3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=new bu(3e4,6e4);function B1(){const t=Cr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function M3(t){return new Promise((e,n)=>{var r,s,i;function o(){B1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B1(),n(or(t,"network-request-failed"))},timeout:D3.get()})}if(!((s=(r=Cr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Cr().gapi)===null||i===void 0)&&i.load)o();else{const a=CF("iframefcb");return Cr()[a]=()=>{gapi.load?o():n(or(t,"network-request-failed"))},$P(`${EF()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw mh=null,e})}let mh=null;function j3(t){return mh=mh||M3(t),mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=new bu(5e3,15e3),L3="__/auth/iframe",V3="emulator/auth/iframe",F3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z3(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ix(e,V3):`https://${t.config.authDomain}/${L3}`,r={apiKey:e.apiKey,appName:t.name,v:el},s=U3.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${wu(r).slice(1)}`}async function B3(t){const e=await j3(t),n=Cr().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:z3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=or(t,"network-request-failed"),a=Cr().setTimeout(()=>{i(o)},O3.get());function l(){Cr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W3=500,H3=600,q3="_blank",G3="http://localhost";class $1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function K3(t,e,n,r=W3,s=H3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},$3),{width:r.toString(),height:s.toString(),top:i,left:o}),c=qt().toLowerCase();n&&(a=OP(c)?q3:n),MP(c)&&(e=e||G3,l.scrollbars="yes");const u=Object.entries(l).reduce((m,[p,g])=>`${m}${p}=${g},`,"");if(yF(c)&&a!=="_self")return Q3(e||"",a),new $1(null);const h=window.open(e||"",a,u);ie(h,t,"popup-blocked");try{h.focus()}catch{}return new $1(h)}function Q3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3="__/auth/handler",X3="emulator/auth/handler",J3=encodeURIComponent("fac");async function W1(t,e,n,r,s,i){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:el,eventId:s};if(e instanceof ux){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",LV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof Tu){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${J3}=${encodeURIComponent(l)}`:"";return`${Z3(t)}?${wu(a).slice(1)}${c}`}function Z3({config:t}){return t.emulator?ix(t,X3):`https://${t.authDomain}/${Y3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="webStorageSupport";class e6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XP,this._completeRedirectFn=T3,this._overrideRedirectResult=_3}async _openPopup(e,n,r,s){var i;ms((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await W1(e,n,r,s0(),s);return K3(e,o,dx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await W1(e,n,r,s0(),s);return s3(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ms(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await B3(e),r=new E3(e);return n.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ug,{type:ug},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[ug];o!==void 0&&n(!!o),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=R3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zP()||jP()||ax()}}const t6=e6;var H1="@firebase/auth",q1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s6(t){Dr(new lr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BP(t)},c=new kF(r,s,i,l);return NF(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Dr(new lr("auth-internal",e=>{const n=Pi(e.getProvider("auth").getImmediate());return(r=>new n6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(H1,q1,r6(t)),zn(H1,q1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=5*60,o6=pP("authIdTokenMaxAge")||i6;let G1=null;const a6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>o6)return;const s=n==null?void 0:n.token;G1!==s&&(G1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function l6(t=kP()){const e=_u(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RF(t,{popupRedirectResolver:t6,persistence:[f3,t3,XP]}),r=pP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=a6(i.toString());YF(n,o,()=>o(n.currentUser)),QF(n,a=>o(a))}}const s=fP("auth");return s&&DF(n,`http://${s}`),n}function c6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=or("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",c6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s6("Browser");var K1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lo,iI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function E(){}E.prototype=T.prototype,S.D=T.prototype,S.prototype=new E,S.prototype.constructor=S,S.C=function(R,I,D){for(var N=Array(arguments.length-2),F=2;F<arguments.length;F++)N[F-2]=arguments[F];return T.prototype[I].apply(R,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,T,E){E||(E=0);var R=Array(16);if(typeof T=="string")for(var I=0;16>I;++I)R[I]=T.charCodeAt(E++)|T.charCodeAt(E++)<<8|T.charCodeAt(E++)<<16|T.charCodeAt(E++)<<24;else for(I=0;16>I;++I)R[I]=T[E++]|T[E++]<<8|T[E++]<<16|T[E++]<<24;T=S.g[0],E=S.g[1],I=S.g[2];var D=S.g[3],N=T+(D^E&(I^D))+R[0]+3614090360&4294967295;T=E+(N<<7&4294967295|N>>>25),N=D+(I^T&(E^I))+R[1]+3905402710&4294967295,D=T+(N<<12&4294967295|N>>>20),N=I+(E^D&(T^E))+R[2]+606105819&4294967295,I=D+(N<<17&4294967295|N>>>15),N=E+(T^I&(D^T))+R[3]+3250441966&4294967295,E=I+(N<<22&4294967295|N>>>10),N=T+(D^E&(I^D))+R[4]+4118548399&4294967295,T=E+(N<<7&4294967295|N>>>25),N=D+(I^T&(E^I))+R[5]+1200080426&4294967295,D=T+(N<<12&4294967295|N>>>20),N=I+(E^D&(T^E))+R[6]+2821735955&4294967295,I=D+(N<<17&4294967295|N>>>15),N=E+(T^I&(D^T))+R[7]+4249261313&4294967295,E=I+(N<<22&4294967295|N>>>10),N=T+(D^E&(I^D))+R[8]+1770035416&4294967295,T=E+(N<<7&4294967295|N>>>25),N=D+(I^T&(E^I))+R[9]+2336552879&4294967295,D=T+(N<<12&4294967295|N>>>20),N=I+(E^D&(T^E))+R[10]+4294925233&4294967295,I=D+(N<<17&4294967295|N>>>15),N=E+(T^I&(D^T))+R[11]+2304563134&4294967295,E=I+(N<<22&4294967295|N>>>10),N=T+(D^E&(I^D))+R[12]+1804603682&4294967295,T=E+(N<<7&4294967295|N>>>25),N=D+(I^T&(E^I))+R[13]+4254626195&4294967295,D=T+(N<<12&4294967295|N>>>20),N=I+(E^D&(T^E))+R[14]+2792965006&4294967295,I=D+(N<<17&4294967295|N>>>15),N=E+(T^I&(D^T))+R[15]+1236535329&4294967295,E=I+(N<<22&4294967295|N>>>10),N=T+(I^D&(E^I))+R[1]+4129170786&4294967295,T=E+(N<<5&4294967295|N>>>27),N=D+(E^I&(T^E))+R[6]+3225465664&4294967295,D=T+(N<<9&4294967295|N>>>23),N=I+(T^E&(D^T))+R[11]+643717713&4294967295,I=D+(N<<14&4294967295|N>>>18),N=E+(D^T&(I^D))+R[0]+3921069994&4294967295,E=I+(N<<20&4294967295|N>>>12),N=T+(I^D&(E^I))+R[5]+3593408605&4294967295,T=E+(N<<5&4294967295|N>>>27),N=D+(E^I&(T^E))+R[10]+38016083&4294967295,D=T+(N<<9&4294967295|N>>>23),N=I+(T^E&(D^T))+R[15]+3634488961&4294967295,I=D+(N<<14&4294967295|N>>>18),N=E+(D^T&(I^D))+R[4]+3889429448&4294967295,E=I+(N<<20&4294967295|N>>>12),N=T+(I^D&(E^I))+R[9]+568446438&4294967295,T=E+(N<<5&4294967295|N>>>27),N=D+(E^I&(T^E))+R[14]+3275163606&4294967295,D=T+(N<<9&4294967295|N>>>23),N=I+(T^E&(D^T))+R[3]+4107603335&4294967295,I=D+(N<<14&4294967295|N>>>18),N=E+(D^T&(I^D))+R[8]+1163531501&4294967295,E=I+(N<<20&4294967295|N>>>12),N=T+(I^D&(E^I))+R[13]+2850285829&4294967295,T=E+(N<<5&4294967295|N>>>27),N=D+(E^I&(T^E))+R[2]+4243563512&4294967295,D=T+(N<<9&4294967295|N>>>23),N=I+(T^E&(D^T))+R[7]+1735328473&4294967295,I=D+(N<<14&4294967295|N>>>18),N=E+(D^T&(I^D))+R[12]+2368359562&4294967295,E=I+(N<<20&4294967295|N>>>12),N=T+(E^I^D)+R[5]+4294588738&4294967295,T=E+(N<<4&4294967295|N>>>28),N=D+(T^E^I)+R[8]+2272392833&4294967295,D=T+(N<<11&4294967295|N>>>21),N=I+(D^T^E)+R[11]+1839030562&4294967295,I=D+(N<<16&4294967295|N>>>16),N=E+(I^D^T)+R[14]+4259657740&4294967295,E=I+(N<<23&4294967295|N>>>9),N=T+(E^I^D)+R[1]+2763975236&4294967295,T=E+(N<<4&4294967295|N>>>28),N=D+(T^E^I)+R[4]+1272893353&4294967295,D=T+(N<<11&4294967295|N>>>21),N=I+(D^T^E)+R[7]+4139469664&4294967295,I=D+(N<<16&4294967295|N>>>16),N=E+(I^D^T)+R[10]+3200236656&4294967295,E=I+(N<<23&4294967295|N>>>9),N=T+(E^I^D)+R[13]+681279174&4294967295,T=E+(N<<4&4294967295|N>>>28),N=D+(T^E^I)+R[0]+3936430074&4294967295,D=T+(N<<11&4294967295|N>>>21),N=I+(D^T^E)+R[3]+3572445317&4294967295,I=D+(N<<16&4294967295|N>>>16),N=E+(I^D^T)+R[6]+76029189&4294967295,E=I+(N<<23&4294967295|N>>>9),N=T+(E^I^D)+R[9]+3654602809&4294967295,T=E+(N<<4&4294967295|N>>>28),N=D+(T^E^I)+R[12]+3873151461&4294967295,D=T+(N<<11&4294967295|N>>>21),N=I+(D^T^E)+R[15]+530742520&4294967295,I=D+(N<<16&4294967295|N>>>16),N=E+(I^D^T)+R[2]+3299628645&4294967295,E=I+(N<<23&4294967295|N>>>9),N=T+(I^(E|~D))+R[0]+4096336452&4294967295,T=E+(N<<6&4294967295|N>>>26),N=D+(E^(T|~I))+R[7]+1126891415&4294967295,D=T+(N<<10&4294967295|N>>>22),N=I+(T^(D|~E))+R[14]+2878612391&4294967295,I=D+(N<<15&4294967295|N>>>17),N=E+(D^(I|~T))+R[5]+4237533241&4294967295,E=I+(N<<21&4294967295|N>>>11),N=T+(I^(E|~D))+R[12]+1700485571&4294967295,T=E+(N<<6&4294967295|N>>>26),N=D+(E^(T|~I))+R[3]+2399980690&4294967295,D=T+(N<<10&4294967295|N>>>22),N=I+(T^(D|~E))+R[10]+4293915773&4294967295,I=D+(N<<15&4294967295|N>>>17),N=E+(D^(I|~T))+R[1]+2240044497&4294967295,E=I+(N<<21&4294967295|N>>>11),N=T+(I^(E|~D))+R[8]+1873313359&4294967295,T=E+(N<<6&4294967295|N>>>26),N=D+(E^(T|~I))+R[15]+4264355552&4294967295,D=T+(N<<10&4294967295|N>>>22),N=I+(T^(D|~E))+R[6]+2734768916&4294967295,I=D+(N<<15&4294967295|N>>>17),N=E+(D^(I|~T))+R[13]+1309151649&4294967295,E=I+(N<<21&4294967295|N>>>11),N=T+(I^(E|~D))+R[4]+4149444226&4294967295,T=E+(N<<6&4294967295|N>>>26),N=D+(E^(T|~I))+R[11]+3174756917&4294967295,D=T+(N<<10&4294967295|N>>>22),N=I+(T^(D|~E))+R[2]+718787259&4294967295,I=D+(N<<15&4294967295|N>>>17),N=E+(D^(I|~T))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(I+(N<<21&4294967295|N>>>11))&4294967295,S.g[2]=S.g[2]+I&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var E=T-this.blockSize,R=this.B,I=this.h,D=0;D<T;){if(I==0)for(;D<=E;)s(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<T;)if(R[I++]=S.charCodeAt(D++),I==this.blockSize){s(this,R),I=0;break}}else for(;D<T;)if(R[I++]=S[D++],I==this.blockSize){s(this,R),I=0;break}}this.h=I,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var E=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=E&255,E/=256;for(this.u(S),S=Array(16),T=E=0;4>T;++T)for(var R=0;32>R;R+=8)S[E++]=this.g[T]>>>R&255;return S};function i(S,T){var E=a;return Object.prototype.hasOwnProperty.call(E,S)?E[S]:E[S]=T(S)}function o(S,T){this.h=T;for(var E=[],R=!0,I=S.length-1;0<=I;I--){var D=S[I]|0;R&&D==T||(E[I]=D,R=!1)}this.g=E}var a={};function l(S){return-128<=S&&128>S?i(S,function(T){return new o([T|0],0>T?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return _(c(-S));for(var T=[],E=1,R=0;S>=E;R++)T[R]=S/E|0,E*=4294967296;return new o(T,0)}function u(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return _(u(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(T,8)),R=h,I=0;I<S.length;I+=8){var D=Math.min(8,S.length-I),N=parseInt(S.substring(I,I+D),T);8>D?(D=c(Math.pow(T,D)),R=R.j(D).add(c(N))):(R=R.j(E),R=R.add(c(N)))}return R}var h=l(0),m=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-_(this).m();for(var S=0,T=1,E=0;E<this.g.length;E++){var R=this.i(E);S+=(0<=R?R:4294967296+R)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(g(this))return"0";if(v(this))return"-"+_(this).toString(S);for(var T=c(Math.pow(S,6)),E=this,R="";;){var I=C(E,T).g;E=w(E,I.j(T));var D=((0<E.g.length?E.g[0]:E.h)>>>0).toString(S);if(E=I,g(E))return D+R;for(;6>D.length;)D="0"+D;R=D+R}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function g(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=w(this,S),v(S)?-1:g(S)?0:1};function _(S){for(var T=S.g.length,E=[],R=0;R<T;R++)E[R]=~S.g[R];return new o(E,~S.h).add(m)}t.abs=function(){return v(this)?_(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),E=[],R=0,I=0;I<=T;I++){var D=R+(this.i(I)&65535)+(S.i(I)&65535),N=(D>>>16)+(this.i(I)>>>16)+(S.i(I)>>>16);R=N>>>16,D&=65535,N&=65535,E[I]=N<<16|D}return new o(E,E[E.length-1]&-2147483648?-1:0)};function w(S,T){return S.add(_(T))}t.j=function(S){if(g(this)||g(S))return h;if(v(this))return v(S)?_(this).j(_(S)):_(_(this).j(S));if(v(S))return _(this.j(_(S)));if(0>this.l(p)&&0>S.l(p))return c(this.m()*S.m());for(var T=this.g.length+S.g.length,E=[],R=0;R<2*T;R++)E[R]=0;for(R=0;R<this.g.length;R++)for(var I=0;I<S.g.length;I++){var D=this.i(R)>>>16,N=this.i(R)&65535,F=S.i(I)>>>16,W=S.i(I)&65535;E[2*R+2*I]+=N*W,x(E,2*R+2*I),E[2*R+2*I+1]+=D*W,x(E,2*R+2*I+1),E[2*R+2*I+1]+=N*F,x(E,2*R+2*I+1),E[2*R+2*I+2]+=D*F,x(E,2*R+2*I+2)}for(R=0;R<T;R++)E[R]=E[2*R+1]<<16|E[2*R];for(R=T;R<2*T;R++)E[R]=0;return new o(E,0)};function x(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function b(S,T){this.g=S,this.h=T}function C(S,T){if(g(T))throw Error("division by zero");if(g(S))return new b(h,h);if(v(S))return T=C(_(S),T),new b(_(T.g),_(T.h));if(v(T))return T=C(S,_(T)),new b(_(T.g),T.h);if(30<S.g.length){if(v(S)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var E=m,R=T;0>=R.l(S);)E=P(E),R=P(R);var I=j(E,1),D=j(R,1);for(R=j(R,2),E=j(E,2);!g(R);){var N=D.add(R);0>=N.l(S)&&(I=I.add(E),D=N),R=j(R,1),E=j(E,1)}return T=w(S,I.j(T)),new b(I,T)}for(I=h;0<=S.l(T);){for(E=Math.max(1,Math.floor(S.m()/T.m())),R=Math.ceil(Math.log(E)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),D=c(E),N=D.j(T);v(N)||0<N.l(S);)E-=R,D=c(E),N=D.j(T);g(D)&&(D=m),I=I.add(D),S=w(S,N)}return new b(I,S)}t.A=function(S){return C(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),E=[],R=0;R<T;R++)E[R]=this.i(R)&S.i(R);return new o(E,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),E=[],R=0;R<T;R++)E[R]=this.i(R)|S.i(R);return new o(E,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),E=[],R=0;R<T;R++)E[R]=this.i(R)^S.i(R);return new o(E,this.h^S.h)};function P(S){for(var T=S.g.length+1,E=[],R=0;R<T;R++)E[R]=S.i(R)<<1|S.i(R-1)>>>31;return new o(E,S.h)}function j(S,T){var E=T>>5;T%=32;for(var R=S.g.length-E,I=[],D=0;D<R;D++)I[D]=0<T?S.i(D+E)>>>T|S.i(D+E+1)<<32-T:S.i(D+E);return new o(I,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,lo=o}).apply(typeof K1<"u"?K1:typeof self<"u"?self:typeof window<"u"?window:{});var Cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oI,Wl,aI,ph,l0,lI,cI,uI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,k){return f==Array.prototype||f==Object.prototype||(f[y]=k.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cd=="object"&&Cd];for(var y=0;y<f.length;++y){var k=f[y];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=n(this);function s(f,y){if(y)e:{var k=r;f=f.split(".");for(var A=0;A<f.length-1;A++){var O=f[A];if(!(O in k))break e;k=k[O]}f=f[f.length-1],A=k[f],y=y(A),y!=A&&y!=null&&e(k,f,{configurable:!0,writable:!0,value:y})}}function i(f,y){f instanceof String&&(f+="");var k=0,A=!1,O={next:function(){if(!A&&k<f.length){var L=k++;return{value:y(L,f[L]),done:!1}}return A=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(f){return f||function(){return i(this,function(y,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function c(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function u(f,y,k){return f.call.apply(f.bind,arguments)}function h(f,y,k){if(!f)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,A),f.apply(y,O)}}return function(){return f.apply(y,arguments)}}function m(f,y,k){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,m.apply(null,arguments)}function p(f,y){var k=Array.prototype.slice.call(arguments,1);return function(){var A=k.slice();return A.push.apply(A,arguments),f.apply(this,A)}}function g(f,y){function k(){}k.prototype=y.prototype,f.aa=y.prototype,f.prototype=new k,f.prototype.constructor=f,f.Qb=function(A,O,L){for(var H=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)H[Re-2]=arguments[Re];return y.prototype[O].apply(A,H)}}function v(f){const y=f.length;if(0<y){const k=Array(y);for(let A=0;A<y;A++)k[A]=f[A];return k}return[]}function _(f,y){for(let k=1;k<arguments.length;k++){const A=arguments[k];if(l(A)){const O=f.length||0,L=A.length||0;f.length=O+L;for(let H=0;H<L;H++)f[O+H]=A[H]}else f.push(A)}}class w{constructor(y,k){this.i=y,this.j=k,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function x(f){return/^[\s\xa0]*$/.test(f)}function b(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function C(f){return C[" "](f),f}C[" "]=function(){};var P=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function j(f,y,k){for(const A in f)y.call(k,f[A],A,f)}function S(f,y){for(const k in f)y.call(void 0,f[k],k,f)}function T(f){const y={};for(const k in f)y[k]=f[k];return y}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(f,y){let k,A;for(let O=1;O<arguments.length;O++){A=arguments[O];for(k in A)f[k]=A[k];for(let L=0;L<E.length;L++)k=E[L],Object.prototype.hasOwnProperty.call(A,k)&&(f[k]=A[k])}}function I(f){var y=1;f=f.split(":");const k=[];for(;0<y&&f.length;)k.push(f.shift()),y--;return f.length&&k.push(f.join(":")),k}function D(f){a.setTimeout(()=>{throw f},0)}function N(){var f=q;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class F{constructor(){this.h=this.g=null}add(y,k){const A=W.get();A.set(y,k),this.h?this.h.next=A:this.g=A,this.h=A}}var W=new w(()=>new z,f=>f.reset());class z{constructor(){this.next=this.g=this.h=null}set(y,k){this.h=y,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let K,B=!1,q=new F,re=()=>{const f=a.Promise.resolve(void 0);K=()=>{f.then(te)}};var te=()=>{for(var f;f=N();){try{f.h.call(f.g)}catch(k){D(k)}var y=W;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}B=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var st=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const k=()=>{};a.addEventListener("test",k,y),a.removeEventListener("test",k,y)}catch{}return f}();function gt(f,y){if(ve.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var k=this.type=f.type,A=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(P){e:{try{C(y.nodeName);var O=!0;break e}catch{}O=!1}O||(y=null)}}else k=="mouseover"?y=f.fromElement:k=="mouseout"&&(y=f.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Be[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&gt.aa.h.call(this)}}g(gt,ve);var Be={2:"touch",3:"pen",4:"mouse"};gt.prototype.h=function(){gt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Pn="closure_listenable_"+(1e6*Math.random()|0),op=0;function ll(f,y,k,A,O){this.listener=f,this.proxy=null,this.src=y,this.type=k,this.capture=!!A,this.ha=O,this.key=++op,this.da=this.fa=!1}function Or(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function In(f){this.src=f,this.g={},this.h=0}In.prototype.add=function(f,y,k,A,O){var L=f.toString();f=this.g[L],f||(f=this.g[L]=[],this.h++);var H=ap(f,y,A,O);return-1<H?(y=f[H],k||(y.fa=!1)):(y=new ll(y,this.src,L,!!A,O),y.fa=k,f.push(y)),y};function Wu(f,y){var k=y.type;if(k in f.g){var A=f.g[k],O=Array.prototype.indexOf.call(A,y,void 0),L;(L=0<=O)&&Array.prototype.splice.call(A,O,1),L&&(Or(y),f.g[k].length==0&&(delete f.g[k],f.h--))}}function ap(f,y,k,A){for(var O=0;O<f.length;++O){var L=f[O];if(!L.da&&L.listener==y&&L.capture==!!k&&L.ha==A)return O}return-1}var lp="closure_lm_"+(1e6*Math.random()|0),cp={};function Yw(f,y,k,A,O){if(Array.isArray(y)){for(var L=0;L<y.length;L++)Yw(f,y[L],k,A,O);return null}return k=Zw(k),f&&f[Pn]?f.K(y,k,c(A)?!!A.capture:!1,O):RD(f,y,k,!1,A,O)}function RD(f,y,k,A,O,L){if(!y)throw Error("Invalid event type");var H=c(O)?!!O.capture:!!O,Re=dp(f);if(Re||(f[lp]=Re=new In(f)),k=Re.add(y,k,A,H,L),k.proxy)return k;if(A=ND(),k.proxy=A,A.src=f,A.listener=k,f.addEventListener)st||(O=H),O===void 0&&(O=!1),f.addEventListener(y.toString(),A,O);else if(f.attachEvent)f.attachEvent(Jw(y.toString()),A);else if(f.addListener&&f.removeListener)f.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return k}function ND(){function f(k){return y.call(f.src,f.listener,k)}const y=DD;return f}function Xw(f,y,k,A,O){if(Array.isArray(y))for(var L=0;L<y.length;L++)Xw(f,y[L],k,A,O);else A=c(A)?!!A.capture:!!A,k=Zw(k),f&&f[Pn]?(f=f.i,y=String(y).toString(),y in f.g&&(L=f.g[y],k=ap(L,k,A,O),-1<k&&(Or(L[k]),Array.prototype.splice.call(L,k,1),L.length==0&&(delete f.g[y],f.h--)))):f&&(f=dp(f))&&(y=f.g[y.toString()],f=-1,y&&(f=ap(y,k,A,O)),(k=-1<f?y[f]:null)&&up(k))}function up(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[Pn])Wu(y.i,f);else{var k=f.type,A=f.proxy;y.removeEventListener?y.removeEventListener(k,A,f.capture):y.detachEvent?y.detachEvent(Jw(k),A):y.addListener&&y.removeListener&&y.removeListener(A),(k=dp(y))?(Wu(k,f),k.h==0&&(k.src=null,y[lp]=null)):Or(f)}}}function Jw(f){return f in cp?cp[f]:cp[f]="on"+f}function DD(f,y){if(f.da)f=!0;else{y=new gt(y,this);var k=f.listener,A=f.ha||f.src;f.fa&&up(f),f=k.call(A,y)}return f}function dp(f){return f=f[lp],f instanceof In?f:null}var hp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zw(f){return typeof f=="function"?f:(f[hp]||(f[hp]=function(y){return f.handleEvent(y)}),f[hp])}function It(){ue.call(this),this.i=new In(this),this.M=this,this.F=null}g(It,ue),It.prototype[Pn]=!0,It.prototype.removeEventListener=function(f,y,k,A){Xw(this,f,y,k,A)};function Kt(f,y){var k,A=f.F;if(A)for(k=[];A;A=A.F)k.push(A);if(f=f.M,A=y.type||y,typeof y=="string")y=new ve(y,f);else if(y instanceof ve)y.target=y.target||f;else{var O=y;y=new ve(A,f),R(y,O)}if(O=!0,k)for(var L=k.length-1;0<=L;L--){var H=y.g=k[L];O=Hu(H,A,!0,y)&&O}if(H=y.g=f,O=Hu(H,A,!0,y)&&O,O=Hu(H,A,!1,y)&&O,k)for(L=0;L<k.length;L++)H=y.g=k[L],O=Hu(H,A,!1,y)&&O}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var k=f.g[y],A=0;A<k.length;A++)Or(k[A]);delete f.g[y],f.h--}}this.F=null},It.prototype.K=function(f,y,k,A){return this.i.add(String(f),y,!1,k,A)},It.prototype.L=function(f,y,k,A){return this.i.add(String(f),y,!0,k,A)};function Hu(f,y,k,A){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var O=!0,L=0;L<y.length;++L){var H=y[L];if(H&&!H.da&&H.capture==k){var Re=H.listener,wt=H.ha||H.src;H.fa&&Wu(f.i,H),O=Re.call(wt,A)!==!1&&O}}return O&&!A.defaultPrevented}function e_(f,y,k){if(typeof f=="function")k&&(f=m(f,k));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function t_(f){f.g=e_(()=>{f.g=null,f.i&&(f.i=!1,t_(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class MD extends ue{constructor(y,k){super(),this.m=y,this.l=k,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:t_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cl(f){ue.call(this),this.h=f,this.g={}}g(cl,ue);var n_=[];function r_(f){j(f.g,function(y,k){this.g.hasOwnProperty(k)&&up(y)},f),f.g={}}cl.prototype.N=function(){cl.aa.N.call(this),r_(this)},cl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fp=a.JSON.stringify,jD=a.JSON.parse,OD=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function mp(){}mp.prototype.h=null;function s_(f){return f.h||(f.h=f.i())}function i_(){}var ul={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pp(){ve.call(this,"d")}g(pp,ve);function gp(){ve.call(this,"c")}g(gp,ve);var Ni={},o_=null;function qu(){return o_=o_||new It}Ni.La="serverreachability";function a_(f){ve.call(this,Ni.La,f)}g(a_,ve);function dl(f){const y=qu();Kt(y,new a_(y))}Ni.STAT_EVENT="statevent";function l_(f,y){ve.call(this,Ni.STAT_EVENT,f),this.stat=y}g(l_,ve);function Qt(f){const y=qu();Kt(y,new l_(y,f))}Ni.Ma="timingevent";function c_(f,y){ve.call(this,Ni.Ma,f),this.size=y}g(c_,ve);function hl(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function fl(){this.g=!0}fl.prototype.xa=function(){this.g=!1};function LD(f,y,k,A,O,L){f.info(function(){if(f.g)if(L)for(var H="",Re=L.split("&"),wt=0;wt<Re.length;wt++){var be=Re[wt].split("=");if(1<be.length){var At=be[0];be=be[1];var Rt=At.split("_");H=2<=Rt.length&&Rt[1]=="type"?H+(At+"="+be+"&"):H+(At+"=redacted&")}}else H=null;else H=L;return"XMLHTTP REQ ("+A+") [attempt "+O+"]: "+y+`
`+k+`
`+H})}function VD(f,y,k,A,O,L,H){f.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+O+"]: "+y+`
`+k+`
`+L+" "+H})}function Vo(f,y,k,A){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+UD(f,k)+(A?" "+A:"")})}function FD(f,y){f.info(function(){return"TIMEOUT: "+y})}fl.prototype.info=function(){};function UD(f,y){if(!f.g)return y;if(!y)return null;try{var k=JSON.parse(y);if(k){for(f=0;f<k.length;f++)if(Array.isArray(k[f])){var A=k[f];if(!(2>A.length)){var O=A[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var H=1;H<O.length;H++)O[H]=""}}}}return fp(k)}catch{return y}}var Gu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},u_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yp;function Ku(){}g(Ku,mp),Ku.prototype.g=function(){return new XMLHttpRequest},Ku.prototype.i=function(){return{}},yp=new Ku;function ks(f,y,k,A){this.j=f,this.i=y,this.l=k,this.R=A||1,this.U=new cl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new d_}function d_(){this.i=null,this.g="",this.h=!1}var h_={},vp={};function xp(f,y,k){f.L=1,f.v=Ju(Lr(y)),f.m=k,f.P=!0,f_(f,null)}function f_(f,y){f.F=Date.now(),Qu(f),f.A=Lr(f.v);var k=f.A,A=f.R;Array.isArray(A)||(A=[String(A)]),C_(k.i,"t",A),f.C=0,k=f.j.J,f.h=new d_,f.g=H_(f.j,k?y:null,!f.m),0<f.O&&(f.M=new MD(m(f.Y,f,f.g),f.O)),y=f.U,k=f.g,A=f.ca;var O="readystatechange";Array.isArray(O)||(O&&(n_[0]=O.toString()),O=n_);for(var L=0;L<O.length;L++){var H=Yw(k,O[L],A||y.handleEvent,!1,y.h||y);if(!H)break;y.g[H.key]=H}y=f.H?T(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),dl(),LD(f.i,f.u,f.A,f.l,f.R,f.m)}ks.prototype.ca=function(f){f=f.target;const y=this.M;y&&Vr(f)==3?y.j():this.Y(f)},ks.prototype.Y=function(f){try{if(f==this.g)e:{const Rt=Vr(this.g);var y=this.g.Ba();const zo=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||M_(this.g)))){this.J||Rt!=4||y==7||(y==8||0>=zo?dl(3):dl(2)),wp(this);var k=this.g.Z();this.X=k;t:if(m_(this)){var A=M_(this.g);f="";var O=A.length,L=Vr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Di(this),ml(this);var H="";break t}this.h.i=new a.TextDecoder}for(y=0;y<O;y++)this.h.h=!0,f+=this.h.i.decode(A[y],{stream:!(L&&y==O-1)});A.length=0,this.h.g+=f,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=k==200,VD(this.i,this.u,this.A,this.l,this.R,Rt,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,wt=this.g;if((Re=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Re)){var be=Re;break t}}be=null}if(k=be)Vo(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_p(this,k);else{this.o=!1,this.s=3,Qt(12),Di(this),ml(this);break e}}if(this.P){k=!0;let Yn;for(;!this.J&&this.C<H.length;)if(Yn=zD(this,H),Yn==vp){Rt==4&&(this.s=4,Qt(14),k=!1),Vo(this.i,this.l,null,"[Incomplete Response]");break}else if(Yn==h_){this.s=4,Qt(15),Vo(this.i,this.l,H,"[Invalid Chunk]"),k=!1;break}else Vo(this.i,this.l,Yn,null),_p(this,Yn);if(m_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||H.length!=0||this.h.h||(this.s=1,Qt(16),k=!1),this.o=this.o&&k,!k)Vo(this.i,this.l,H,"[Invalid Chunked Response]"),Di(this),ml(this);else if(0<H.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Cp(At),At.M=!0,Qt(11))}}else Vo(this.i,this.l,H,null),_p(this,H);Rt==4&&Di(this),this.o&&!this.J&&(Rt==4?z_(this.j,this):(this.o=!1,Qu(this)))}else sM(this.g),k==400&&0<H.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),Di(this),ml(this)}}}catch{}finally{}};function m_(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function zD(f,y){var k=f.C,A=y.indexOf(`
`,k);return A==-1?vp:(k=Number(y.substring(k,A)),isNaN(k)?h_:(A+=1,A+k>y.length?vp:(y=y.slice(A,A+k),f.C=A+k,y)))}ks.prototype.cancel=function(){this.J=!0,Di(this)};function Qu(f){f.S=Date.now()+f.I,p_(f,f.I)}function p_(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=hl(m(f.ba,f),y)}function wp(f){f.B&&(a.clearTimeout(f.B),f.B=null)}ks.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(FD(this.i,this.A),this.L!=2&&(dl(),Qt(17)),Di(this),this.s=2,ml(this)):p_(this,this.S-f)};function ml(f){f.j.G==0||f.J||z_(f.j,f)}function Di(f){wp(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,r_(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function _p(f,y){try{var k=f.j;if(k.G!=0&&(k.g==f||bp(k.h,f))){if(!f.K&&bp(k.h,f)&&k.G==3){try{var A=k.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var O=A;if(O[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<f.F)sd(k),nd(k);else break e;Ep(k),Qt(18)}}else k.za=O[1],0<k.za-k.T&&37500>O[2]&&k.F&&k.v==0&&!k.C&&(k.C=hl(m(k.Za,k),6e3));if(1>=v_(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else ji(k,11)}else if((f.K||k.g==f)&&sd(k),!x(y))for(O=k.Da.g.parse(y),y=0;y<O.length;y++){let be=O[y];if(k.T=be[0],be=be[1],k.G==2)if(be[0]=="c"){k.K=be[1],k.ia=be[2];const At=be[3];At!=null&&(k.la=At,k.j.info("VER="+k.la));const Rt=be[4];Rt!=null&&(k.Aa=Rt,k.j.info("SVER="+k.Aa));const zo=be[5];zo!=null&&typeof zo=="number"&&0<zo&&(A=1.5*zo,k.L=A,k.j.info("backChannelRequestTimeoutMs_="+A)),A=k;const Yn=f.g;if(Yn){const od=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(od){var L=A.h;L.g||od.indexOf("spdy")==-1&&od.indexOf("quic")==-1&&od.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(kp(L,L.h),L.h=null))}if(A.D){const Pp=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Pp&&(A.ya=Pp,je(A.I,A.D,Pp))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-f.F,k.j.info("Handshake RTT: "+k.R+"ms")),A=k;var H=f;if(A.qa=W_(A,A.J?A.ia:null,A.W),H.K){x_(A.h,H);var Re=H,wt=A.L;wt&&(Re.I=wt),Re.B&&(wp(Re),Qu(Re)),A.g=H}else F_(A);0<k.i.length&&rd(k)}else be[0]!="stop"&&be[0]!="close"||ji(k,7);else k.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?ji(k,7):Sp(k):be[0]!="noop"&&k.l&&k.l.ta(be),k.v=0)}}dl(4)}catch{}}var BD=class{constructor(f,y){this.g=f,this.map=y}};function g_(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function y_(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function v_(f){return f.h?1:f.g?f.g.size:0}function bp(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function kp(f,y){f.g?f.g.add(y):f.h=y}function x_(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}g_.prototype.cancel=function(){if(this.i=w_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function w_(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const k of f.g.values())y=y.concat(k.D);return y}return v(f.i)}function $D(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var y=[],k=f.length,A=0;A<k;A++)y.push(f[A]);return y}y=[],k=0;for(A in f)y[k++]=f[A];return y}function WD(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var y=[];f=f.length;for(var k=0;k<f;k++)y.push(k);return y}y=[],k=0;for(const A in f)y[k++]=A;return y}}}function __(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var k=WD(f),A=$D(f),O=A.length,L=0;L<O;L++)y.call(void 0,A[L],k&&k[L],f)}var b_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HD(f,y){if(f){f=f.split("&");for(var k=0;k<f.length;k++){var A=f[k].indexOf("="),O=null;if(0<=A){var L=f[k].substring(0,A);O=f[k].substring(A+1)}else L=f[k];y(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Mi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Mi){this.h=f.h,Yu(this,f.j),this.o=f.o,this.g=f.g,Xu(this,f.s),this.l=f.l;var y=f.i,k=new yl;k.i=y.i,y.g&&(k.g=new Map(y.g),k.h=y.h),k_(this,k),this.m=f.m}else f&&(y=String(f).match(b_))?(this.h=!1,Yu(this,y[1]||"",!0),this.o=pl(y[2]||""),this.g=pl(y[3]||"",!0),Xu(this,y[4]),this.l=pl(y[5]||"",!0),k_(this,y[6]||"",!0),this.m=pl(y[7]||"")):(this.h=!1,this.i=new yl(null,this.h))}Mi.prototype.toString=function(){var f=[],y=this.j;y&&f.push(gl(y,T_,!0),":");var k=this.g;return(k||y=="file")&&(f.push("//"),(y=this.o)&&f.push(gl(y,T_,!0),"@"),f.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&f.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&f.push("/"),f.push(gl(k,k.charAt(0)=="/"?KD:GD,!0))),(k=this.i.toString())&&f.push("?",k),(k=this.m)&&f.push("#",gl(k,YD)),f.join("")};function Lr(f){return new Mi(f)}function Yu(f,y,k){f.j=k?pl(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function Xu(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function k_(f,y,k){y instanceof yl?(f.i=y,XD(f.i,f.h)):(k||(y=gl(y,QD)),f.i=new yl(y,f.h))}function je(f,y,k){f.i.set(y,k)}function Ju(f){return je(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function pl(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function gl(f,y,k){return typeof f=="string"?(f=encodeURI(f).replace(y,qD),k&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function qD(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var T_=/[#\/\?@]/g,GD=/[#\?:]/g,KD=/[#\?]/g,QD=/[#\?@]/g,YD=/#/g;function yl(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function Ts(f){f.g||(f.g=new Map,f.h=0,f.i&&HD(f.i,function(y,k){f.add(decodeURIComponent(y.replace(/\+/g," ")),k)}))}t=yl.prototype,t.add=function(f,y){Ts(this),this.i=null,f=Fo(this,f);var k=this.g.get(f);return k||this.g.set(f,k=[]),k.push(y),this.h+=1,this};function S_(f,y){Ts(f),y=Fo(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function E_(f,y){return Ts(f),y=Fo(f,y),f.g.has(y)}t.forEach=function(f,y){Ts(this),this.g.forEach(function(k,A){k.forEach(function(O){f.call(y,O,A,this)},this)},this)},t.na=function(){Ts(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),k=[];for(let A=0;A<y.length;A++){const O=f[A];for(let L=0;L<O.length;L++)k.push(y[A])}return k},t.V=function(f){Ts(this);let y=[];if(typeof f=="string")E_(this,f)&&(y=y.concat(this.g.get(Fo(this,f))));else{f=Array.from(this.g.values());for(let k=0;k<f.length;k++)y=y.concat(f[k])}return y},t.set=function(f,y){return Ts(this),this.i=null,f=Fo(this,f),E_(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},t.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function C_(f,y,k){S_(f,y),0<k.length&&(f.i=null,f.g.set(Fo(f,y),v(k)),f.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var k=0;k<y.length;k++){var A=y[k];const L=encodeURIComponent(String(A)),H=this.V(A);for(A=0;A<H.length;A++){var O=L;H[A]!==""&&(O+="="+encodeURIComponent(String(H[A]))),f.push(O)}}return this.i=f.join("&")};function Fo(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function XD(f,y){y&&!f.j&&(Ts(f),f.i=null,f.g.forEach(function(k,A){var O=A.toLowerCase();A!=O&&(S_(this,A),C_(this,O,k))},f)),f.j=y}function JD(f,y){const k=new fl;if(a.Image){const A=new Image;A.onload=p(Ss,k,"TestLoadImage: loaded",!0,y,A),A.onerror=p(Ss,k,"TestLoadImage: error",!1,y,A),A.onabort=p(Ss,k,"TestLoadImage: abort",!1,y,A),A.ontimeout=p(Ss,k,"TestLoadImage: timeout",!1,y,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=f}else y(!1)}function ZD(f,y){const k=new fl,A=new AbortController,O=setTimeout(()=>{A.abort(),Ss(k,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:A.signal}).then(L=>{clearTimeout(O),L.ok?Ss(k,"TestPingServer: ok",!0,y):Ss(k,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(O),Ss(k,"TestPingServer: error",!1,y)})}function Ss(f,y,k,A,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),A(k)}catch{}}function eM(){this.g=new OD}function tM(f,y,k){const A=k||"";try{__(f,function(O,L){let H=O;c(O)&&(H=fp(O)),y.push(A+L+"="+encodeURIComponent(H))})}catch(O){throw y.push(A+"type="+encodeURIComponent("_badmap")),O}}function Zu(f){this.l=f.Ub||null,this.j=f.eb||!1}g(Zu,mp),Zu.prototype.g=function(){return new ed(this.l,this.j)},Zu.prototype.i=function(f){return function(){return f}}({});function ed(f,y){It.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(ed,It),t=ed.prototype,t.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,xl(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vl(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,xl(this)),this.g&&(this.readyState=3,xl(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;P_(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function P_(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?vl(this):xl(this),this.readyState==3&&P_(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,vl(this))},t.Qa=function(f){this.g&&(this.response=f,vl(this))},t.ga=function(){this.g&&vl(this)};function vl(f){f.readyState=4,f.l=null,f.j=null,f.v=null,xl(f)}t.setRequestHeader=function(f,y){this.u.append(f,y)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var k=y.next();!k.done;)k=k.value,f.push(k[0]+": "+k[1]),k=y.next();return f.join(`\r
`)};function xl(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(ed.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function I_(f){let y="";return j(f,function(k,A){y+=A,y+=":",y+=k,y+=`\r
`}),y}function Tp(f,y,k){e:{for(A in k){var A=!1;break e}A=!0}A||(k=I_(k),typeof f=="string"?k!=null&&encodeURIComponent(String(k)):je(f,y,k))}function Ye(f){It.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Ye,It);var nM=/^https?$/i,rM=["POST","PUT"];t=Ye.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,y,k,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yp.g(),this.v=this.o?s_(this.o):s_(yp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(L){A_(this,L);return}if(f=k||"",k=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var O in A)k.set(O,A[O]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const L of A.keys())k.set(L,A.get(L));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(k.keys()).find(L=>L.toLowerCase()=="content-type"),O=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(rM,y,void 0))||A||O||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,H]of k)this.g.setRequestHeader(L,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{D_(this),this.u=!0,this.g.send(f),this.u=!1}catch(L){A_(this,L)}};function A_(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,R_(f),td(f)}function R_(f){f.A||(f.A=!0,Kt(f,"complete"),Kt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Kt(this,"complete"),Kt(this,"abort"),td(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),td(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?N_(this):this.bb())},t.bb=function(){N_(this)};function N_(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Vr(f)!=4||f.Z()!=2)){if(f.u&&Vr(f)==4)e_(f.Ea,0,f);else if(Kt(f,"readystatechange"),Vr(f)==4){f.h=!1;try{const H=f.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var k;if(!(k=y)){var A;if(A=H===0){var O=String(f.D).match(b_)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),A=!nM.test(O?O.toLowerCase():"")}k=A}if(k)Kt(f,"complete"),Kt(f,"success");else{f.m=6;try{var L=2<Vr(f)?f.g.statusText:""}catch{L=""}f.l=L+" ["+f.Z()+"]",R_(f)}}finally{td(f)}}}}function td(f,y){if(f.g){D_(f);const k=f.g,A=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Kt(f,"ready");try{k.onreadystatechange=A}catch{}}}function D_(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Vr(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Vr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),jD(y)}};function M_(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function sM(f){const y={};f=(f.g&&2<=Vr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<f.length;A++){if(x(f[A]))continue;var k=I(f[A]);const O=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const L=y[O]||[];y[O]=L,L.push(k)}S(y,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wl(f,y,k){return k&&k.internalChannelParams&&k.internalChannelParams[f]||y}function j_(f){this.Aa=0,this.i=[],this.j=new fl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wl("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wl("baseRetryDelayMs",5e3,f),this.cb=wl("retryDelaySeedMs",1e4,f),this.Wa=wl("forwardChannelMaxRetries",2,f),this.wa=wl("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new g_(f&&f.concurrentRequestLimit),this.Da=new eM,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=j_.prototype,t.la=8,t.G=1,t.connect=function(f,y,k,A){Qt(0),this.W=f,this.H=y||{},k&&A!==void 0&&(this.H.OSID=k,this.H.OAID=A),this.F=this.X,this.I=W_(this,null,this.W),rd(this)};function Sp(f){if(O_(f),f.G==3){var y=f.U++,k=Lr(f.I);if(je(k,"SID",f.K),je(k,"RID",y),je(k,"TYPE","terminate"),_l(f,k),y=new ks(f,f.j,y),y.L=2,y.v=Ju(Lr(k)),k=!1,a.navigator&&a.navigator.sendBeacon)try{k=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!k&&a.Image&&(new Image().src=y.v,k=!0),k||(y.g=H_(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Qu(y)}$_(f)}function nd(f){f.g&&(Cp(f),f.g.cancel(),f.g=null)}function O_(f){nd(f),f.u&&(a.clearTimeout(f.u),f.u=null),sd(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function rd(f){if(!y_(f.h)&&!f.s){f.s=!0;var y=f.Ga;K||re(),B||(K(),B=!0),q.add(y,f),f.B=0}}function iM(f,y){return v_(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=hl(m(f.Ga,f,y),B_(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const O=new ks(this,this.j,f);let L=this.o;if(this.S&&(L?(L=T(L),R(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var y=0,k=0;k<this.i.length;k++){t:{var A=this.i[k];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=k;break e}if(y===4096||k===this.i.length-1){y=k+1;break e}}y=1e3}else y=1e3;y=V_(this,O,y),k=Lr(this.I),je(k,"RID",f),je(k,"CVER",22),this.D&&je(k,"X-HTTP-Session-Id",this.D),_l(this,k),L&&(this.O?y="headers="+encodeURIComponent(String(I_(L)))+"&"+y:this.m&&Tp(k,this.m,L)),kp(this.h,O),this.Ua&&je(k,"TYPE","init"),this.P?(je(k,"$req",y),je(k,"SID","null"),O.T=!0,xp(O,k,null)):xp(O,k,y),this.G=2}}else this.G==3&&(f?L_(this,f):this.i.length==0||y_(this.h)||L_(this))};function L_(f,y){var k;y?k=y.l:k=f.U++;const A=Lr(f.I);je(A,"SID",f.K),je(A,"RID",k),je(A,"AID",f.T),_l(f,A),f.m&&f.o&&Tp(A,f.m,f.o),k=new ks(f,f.j,k,f.B+1),f.m===null&&(k.H=f.o),y&&(f.i=y.D.concat(f.i)),y=V_(f,k,1e3),k.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),kp(f.h,k),xp(k,A,y)}function _l(f,y){f.H&&j(f.H,function(k,A){je(y,A,k)}),f.l&&__({},function(k,A){je(y,A,k)})}function V_(f,y,k){k=Math.min(f.i.length,k);var A=f.l?m(f.l.Na,f.l,f):null;e:{var O=f.i;let L=-1;for(;;){const H=["count="+k];L==-1?0<k?(L=O[0].g,H.push("ofs="+L)):L=0:H.push("ofs="+L);let Re=!0;for(let wt=0;wt<k;wt++){let be=O[wt].g;const At=O[wt].map;if(be-=L,0>be)L=Math.max(0,O[wt].g-100),Re=!1;else try{tM(At,H,"req"+be+"_")}catch{A&&A(At)}}if(Re){A=H.join("&");break e}}}return f=f.i.splice(0,k),y.D=f,A}function F_(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;K||re(),B||(K(),B=!0),q.add(y,f),f.v=0}}function Ep(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=hl(m(f.Fa,f),B_(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,U_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=hl(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qt(10),nd(this),U_(this))};function Cp(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function U_(f){f.g=new ks(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=Lr(f.qa);je(y,"RID","rpc"),je(y,"SID",f.K),je(y,"AID",f.T),je(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&je(y,"TO",f.ja),je(y,"TYPE","xmlhttp"),_l(f,y),f.m&&f.o&&Tp(y,f.m,f.o),f.L&&(f.g.I=f.L);var k=f.g;f=f.ia,k.L=1,k.v=Ju(Lr(y)),k.m=null,k.P=!0,f_(k,f)}t.Za=function(){this.C!=null&&(this.C=null,nd(this),Ep(this),Qt(19))};function sd(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function z_(f,y){var k=null;if(f.g==y){sd(f),Cp(f),f.g=null;var A=2}else if(bp(f.h,y))k=y.D,x_(f.h,y),A=1;else return;if(f.G!=0){if(y.o)if(A==1){k=y.m?y.m.length:0,y=Date.now()-y.F;var O=f.B;A=qu(),Kt(A,new c_(A,k)),rd(f)}else F_(f);else if(O=y.s,O==3||O==0&&0<y.X||!(A==1&&iM(f,y)||A==2&&Ep(f)))switch(k&&0<k.length&&(y=f.h,y.i=y.i.concat(k)),O){case 1:ji(f,5);break;case 4:ji(f,10);break;case 3:ji(f,6);break;default:ji(f,2)}}}function B_(f,y){let k=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(k*=2),k*y}function ji(f,y){if(f.j.info("Error code "+y),y==2){var k=m(f.fb,f),A=f.Xa;const O=!A;A=new Mi(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yu(A,"https"),Ju(A),O?JD(A.toString(),k):ZD(A.toString(),k)}else Qt(2);f.G=0,f.l&&f.l.sa(y),$_(f),O_(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function $_(f){if(f.G=0,f.ka=[],f.l){const y=w_(f.h);(y.length!=0||f.i.length!=0)&&(_(f.ka,y),_(f.ka,f.i),f.h.i.length=0,v(f.i),f.i.length=0),f.l.ra()}}function W_(f,y,k){var A=k instanceof Mi?Lr(k):new Mi(k);if(A.g!="")y&&(A.g=y+"."+A.g),Xu(A,A.s);else{var O=a.location;A=O.protocol,y=y?y+"."+O.hostname:O.hostname,O=+O.port;var L=new Mi(null);A&&Yu(L,A),y&&(L.g=y),O&&Xu(L,O),k&&(L.l=k),A=L}return k=f.D,y=f.ya,k&&y&&je(A,k,y),je(A,"VER",f.la),_l(f,A),A}function H_(f,y,k){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new Ye(new Zu({eb:k})):new Ye(f.pa),y.Ha(f.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function q_(){}t=q_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function id(){}id.prototype.g=function(f,y){return new gn(f,y)};function gn(f,y){It.call(this),this.g=new j_(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!x(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new Uo(this)}g(gn,It),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Sp(this.g)},gn.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var k={};k.__data__=f,f=k}else this.u&&(k={},k.__data__=fp(f),f=k);y.i.push(new BD(y.Ya++,f)),y.G==3&&rd(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,Sp(this.g),delete this.g,gn.aa.N.call(this)};function G_(f){pp.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const k in y){f=k;break e}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}g(G_,pp);function K_(){gp.call(this),this.status=1}g(K_,gp);function Uo(f){this.g=f}g(Uo,q_),Uo.prototype.ua=function(){Kt(this.g,"a")},Uo.prototype.ta=function(f){Kt(this.g,new G_(f))},Uo.prototype.sa=function(f){Kt(this.g,new K_)},Uo.prototype.ra=function(){Kt(this.g,"b")},id.prototype.createWebChannel=id.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,uI=function(){return new id},cI=function(){return qu()},lI=Ni,l0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gu.NO_ERROR=0,Gu.TIMEOUT=8,Gu.HTTP_ERROR=6,ph=Gu,u_.COMPLETE="complete",aI=u_,i_.EventType=ul,ul.OPEN="a",ul.CLOSE="b",ul.ERROR="c",ul.MESSAGE="d",It.prototype.listen=It.prototype.K,Wl=i_,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,oI=Ye}).apply(typeof Cd<"u"?Cd:typeof self<"u"?self:typeof window<"u"?window:{});const Q1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=new wm("@firebase/firestore");function Al(){return wo.logLevel}function X(t,...e){if(wo.logLevel<=ye.DEBUG){const n=e.map(fx);wo.debug(`Firestore (${nl}): ${t}`,...n)}}function ps(t,...e){if(wo.logLevel<=ye.ERROR){const n=e.map(fx);wo.error(`Firestore (${nl}): ${t}`,...n)}}function Fa(t,...e){if(wo.logLevel<=ye.WARN){const n=e.map(fx);wo.warn(`Firestore (${nl}): ${t}`,...n)}}function fx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: `+t;throw ps(e),new Error(e)}function Ae(t,e){t||ae()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class u6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class d6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class h6{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new is;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new is,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new is)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new dI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new Vt(e)}}class f6{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class m6{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new f6(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ae(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.R=n.token,new p6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=y6(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function Ua(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new pt(0,0))}static max(){return new le(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Yc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ve extends Yc{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const v6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends Yc{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return v6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new G(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Ve.fromString(e))}static fromName(e){return new ne(Ve.fromString(e).popFirst(5))}static empty(){return new ne(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Ve(e.slice()))}}function x6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new pi(s,ne.empty(),e)}function w6(t){return new pi(t.readTime,t.key,-1)}class pi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pi(le.min(),ne.empty(),-1)}static max(){return new pi(le.max(),ne.empty(),-1)}}function _6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==b6)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function T6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}mx.oe=-1;function Tm(t){return t==null}function mf(t){return t===0&&1/t==-1/0}function S6(t){return typeof t=="number"&&Number.isInteger(t)&&!mf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function No(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pd(this.root,e,this.comparator,!0)}}class Pd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??kt.RED,this.left=s??kt.EMPTY,this.right=i??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new kt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return kt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,s,i){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new X1(this.data.getIterator())}getIteratorFrom(e){return new X1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class X1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new _n([])}unionWith(e){let n=new Et(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new mI("Invalid base64 string: "+i):i}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const E6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=E6.exec(t);if(Ae(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _o(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function gx(t){const e=t.mapValue.fields.__previous_value__;return px(e)?gx(e):e}function Xc(t){const e=gi(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Jc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Jc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Jc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id={mapValue:{}};function bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?px(t)?4:I6(t)?9007199254740991:P6(t)?10:11:ae()}function Mr(t,e){if(t===e)return!0;const n=bo(t);if(n!==bo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xc(t).isEqual(Xc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=gi(s.timestampValue),a=gi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return _o(s.bytesValue).isEqual(_o(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return et(s.geoPointValue.latitude)===et(i.geoPointValue.latitude)&&et(s.geoPointValue.longitude)===et(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return et(s.integerValue)===et(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=et(s.doubleValue),a=et(i.doubleValue);return o===a?mf(o)===mf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ua(t.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Y1(o)!==Y1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mr(o[l],a[l])))return!1;return!0}(t,e);default:return ae()}}function Zc(t,e){return(t.values||[]).find(n=>Mr(n,e))!==void 0}function za(t,e){if(t===e)return 0;const n=bo(t),r=bo(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=et(i.integerValue||i.doubleValue),l=et(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return J1(t.timestampValue,e.timestampValue);case 4:return J1(Xc(t),Xc(e));case 5:return ke(t.stringValue,e.stringValue);case 6:return function(i,o){const a=_o(i),l=_o(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ke(a[c],l[c]);if(u!==0)return u}return ke(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ke(et(i.latitude),et(o.latitude));return a!==0?a:ke(et(i.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Z1(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const h=i.fields||{},m=o.fields||{},p=(a=h.value)===null||a===void 0?void 0:a.arrayValue,g=(l=m.value)===null||l===void 0?void 0:l.arrayValue,v=ke(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:Z1(p,g)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Id.mapValue&&o===Id.mapValue)return 0;if(i===Id.mapValue)return 1;if(o===Id.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const m=ke(l[h],u[h]);if(m!==0)return m;const p=za(a[l[h]],c[u[h]]);if(p!==0)return p}return ke(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ae()}}function J1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=gi(t),r=gi(e),s=ke(n.seconds,r.seconds);return s!==0?s:ke(n.nanos,r.nanos)}function Z1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=za(n[s],r[s]);if(i)return i}return ke(n.length,r.length)}function Ba(t){return c0(t)}function c0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _o(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=c0(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${c0(n.fields[o])}`;return s+"}"}(t.mapValue):ae()}function ek(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function u0(t){return!!t&&"integerValue"in t}function yx(t){return!!t&&"arrayValue"in t}function tk(t){return!!t&&"nullValue"in t}function nk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gh(t){return!!t&&"mapValue"in t}function P6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function uc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return No(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=uc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function I6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(n)}setAll(e){let n=Tt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=uc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];gh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){No(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new an(uc(this.value))}}function pI(t){const e=[];return No(t.fields,(n,r)=>{const s=new Tt([n]);if(gh(r)){const i=pI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new _n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,le.min(),le.min(),le.min(),an.empty(),0)}static newFoundDocument(e,n,r,s){return new Ut(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new Ut(e,2,n,le.min(),le.min(),an.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,le.min(),le.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n){this.position=e,this.inclusive=n}}function rk(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=za(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function sk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n="asc"){this.field=e,this.dir=n}}function A6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gI=class{};class lt extends gI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new N6(e,n,r):n==="array-contains"?new j6(e,r):n==="in"?new O6(e,r):n==="not-in"?new L6(e,r):n==="array-contains-any"?new V6(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new D6(e,r):new M6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(za(n,this.value)):n!==null&&bo(this.value)===bo(n)&&this.matchesComparison(za(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends gI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new cr(e,n)}matches(e){return yI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yI(t){return t.op==="and"}function vI(t){return R6(t)&&yI(t)}function R6(t){for(const e of t.filters)if(e instanceof cr)return!1;return!0}function d0(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+Ba(t.value);if(vI(t))return t.filters.map(e=>d0(e)).join(",");{const e=t.filters.map(n=>d0(n)).join(",");return`${t.op}(${e})`}}function xI(t,e){return t instanceof lt?function(r,s){return s instanceof lt&&r.op===s.op&&r.field.isEqual(s.field)&&Mr(r.value,s.value)}(t,e):t instanceof cr?function(r,s){return s instanceof cr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&xI(o,s.filters[a]),!0):!1}(t,e):void ae()}function wI(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ba(n.value)}`}(t):t instanceof cr?function(n){return n.op.toString()+" {"+n.getFilters().map(wI).join(" ,")+"}"}(t):"Filter"}class N6 extends lt{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class D6 extends lt{constructor(e,n){super(e,"in",n),this.keys=_I("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class M6 extends lt{constructor(e,n){super(e,"not-in",n),this.keys=_I("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _I(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class j6 extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yx(n)&&Zc(n.arrayValue,this.value)}}class O6 extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zc(this.value.arrayValue,n)}}class L6 extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Zc(this.value.arrayValue,n)}}class V6 extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function ik(t,e=null,n=[],r=[],s=null,i=null,o=null){return new F6(t,e,n,r,s,i,o)}function vx(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>d0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Tm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ba(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ba(r)).join(",")),e.ue=n}return e.ue}function xx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!A6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sk(t.startAt,e.startAt)&&sk(t.endAt,e.endAt)}function h0(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function U6(t,e,n,r,s,i,o,a){return new rl(t,e,n,r,s,i,o,a)}function Sm(t){return new rl(t)}function ok(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bI(t){return t.collectionGroup!==null}function dc(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Et(Tt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new eu(i,r))}),n.has(Tt.keyField().canonicalString())||e.ce.push(new eu(Tt.keyField(),r))}return e.ce}function Pr(t){const e=ce(t);return e.le||(e.le=z6(e,dc(t))),e.le}function z6(t,e){if(t.limitType==="F")return ik(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new eu(s.field,i)});const n=t.endAt?new pf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pf(t.startAt.position,t.startAt.inclusive):null;return ik(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function f0(t,e){const n=t.filters.concat([e]);return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function m0(t,e,n){return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Em(t,e){return xx(Pr(t),Pr(e))&&t.limitType===e.limitType}function kI(t){return`${vx(Pr(t))}|lt:${t.limitType}`}function Qo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>wI(s)).join(", ")}]`),Tm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ba(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ba(s)).join(",")),`Target(${r})`}(Pr(t))}; limitType=${t.limitType})`}function Cm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of dc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=rk(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,dc(r),s)||r.endAt&&!function(o,a,l){const c=rk(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,dc(r),s))}(t,e)}function B6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TI(t){return(e,n)=>{let r=!1;for(const s of dc(t)){const i=$6(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function $6(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?za(l,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){No(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return fI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6=new Qe(ne.comparator);function gs(){return W6}const SI=new Qe(ne.comparator);function Hl(...t){let e=SI;for(const n of t)e=e.insert(n.key,n);return e}function EI(t){let e=SI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function to(){return hc()}function CI(){return hc()}function hc(){return new sl(t=>t.toString(),(t,e)=>t.isEqual(e))}const H6=new Qe(ne.comparator),q6=new Et(ne.comparator);function pe(...t){let e=q6;for(const n of t)e=e.add(n);return e}const G6=new Et(ke);function K6(){return G6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(e)?"-0":e}}function PI(t){return{integerValue:""+t}}function Q6(t,e){return S6(e)?PI(e):wx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this._=void 0}}function Y6(t,e,n){return t instanceof gf?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&px(i)&&(i=gx(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof tu?AI(t,e):t instanceof nu?RI(t,e):function(s,i){const o=II(s,i),a=ak(o)+ak(s.Pe);return u0(o)&&u0(s.Pe)?PI(a):wx(s.serializer,a)}(t,e)}function X6(t,e,n){return t instanceof tu?AI(t,e):t instanceof nu?RI(t,e):n}function II(t,e){return t instanceof yf?function(r){return u0(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class gf extends Pm{}class tu extends Pm{constructor(e){super(),this.elements=e}}function AI(t,e){const n=NI(e);for(const r of t.elements)n.some(s=>Mr(s,r))||n.push(r);return{arrayValue:{values:n}}}class nu extends Pm{constructor(e){super(),this.elements=e}}function RI(t,e){let n=NI(e);for(const r of t.elements)n=n.filter(s=>!Mr(s,r));return{arrayValue:{values:n}}}class yf extends Pm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ak(t){return et(t.integerValue||t.doubleValue)}function NI(t){return yx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function J6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof tu&&s instanceof tu||r instanceof nu&&s instanceof nu?Ua(r.elements,s.elements,Mr):r instanceof yf&&s instanceof yf?Mr(r.Pe,s.Pe):r instanceof gf&&s instanceof gf}(t.transform,e.transform)}class Z6{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Im{}function DI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Am(t.key,en.none()):new Pu(t.key,t.data,en.none());{const n=t.data,r=an.empty();let s=new Et(Tt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ii(t.key,r,new _n(s.toArray()),en.none())}}function eU(t,e,n){t instanceof Pu?function(s,i,o){const a=s.value.clone(),l=ck(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ii?function(s,i,o){if(!yh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ck(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(MI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fc(t,e,n,r){return t instanceof Pu?function(i,o,a,l){if(!yh(i.precondition,o))return a;const c=i.value.clone(),u=uk(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ii?function(i,o,a,l){if(!yh(i.precondition,o))return a;const c=uk(i.fieldTransforms,l,o),u=o.data;return u.setAll(MI(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return yh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function tU(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=II(r.transform,s||null);i!=null&&(n===null&&(n=an.empty()),n.set(r.field,i))}return n||null}function lk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ua(r,s,(i,o)=>J6(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pu extends Im{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ii extends Im{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function MI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ck(t,e,n){const r=new Map;Ae(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,X6(o,a,n[s]))}return r}function uk(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Y6(i,o,e))}return r}class Am extends Im{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nU extends Im{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&eU(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=DI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,(n,r)=>lk(n,r))&&Ua(this.baseMutations,e.baseMutations,(n,r)=>lk(n,r))}}class _x{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ae(e.mutations.length===r.length);let s=function(){return H6}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new _x(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,xe;function oU(t){switch(t){default:return ae();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function jI(t){if(t===void 0)return ps("GRPC error has no .code"),V.UNKNOWN;switch(t){case it.OK:return V.OK;case it.CANCELLED:return V.CANCELLED;case it.UNKNOWN:return V.UNKNOWN;case it.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case it.INTERNAL:return V.INTERNAL;case it.UNAVAILABLE:return V.UNAVAILABLE;case it.UNAUTHENTICATED:return V.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case it.NOT_FOUND:return V.NOT_FOUND;case it.ALREADY_EXISTS:return V.ALREADY_EXISTS;case it.PERMISSION_DENIED:return V.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case it.ABORTED:return V.ABORTED;case it.OUT_OF_RANGE:return V.OUT_OF_RANGE;case it.UNIMPLEMENTED:return V.UNIMPLEMENTED;case it.DATA_LOSS:return V.DATA_LOSS;default:return ae()}}(xe=it||(it={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=new lo([4294967295,4294967295],0);function dk(t){const e=aU().encode(t),n=new iI;return n.update(e),new Uint8Array(n.digest())}function hk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new lo([n,r],0),new lo([s,i],0)]}class bx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ql(`Invalid padding: ${n}`);if(r<0)throw new ql(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ql(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=lo.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(lo.fromNumber(r)));return s.compare(lU)===1&&(s=new lo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=dk(e),[r,s]=hk(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new bx(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=dk(e),[r,s]=hk(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Iu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rm(le.min(),s,new Qe(ke),gs(),pe())}}class Iu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Iu(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class OI{constructor(e,n){this.targetId=e,this.me=n}}class LI{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class fk{constructor(){this.fe=0,this.ge=pk(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ae()}}),new Iu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=pk()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cU{constructor(e){this.Le=e,this.Be=new Map,this.ke=gs(),this.qe=mk(),this.Qe=new Qe(ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(h0(i))if(r===0){const o=new ne(i.path);this.Ue(n,o,Ut.newNoDocument(o,le.min()))}else Ae(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=_o(r).toUint8Array()}catch(l){if(l instanceof mI)return Fa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new bx(o,s,i)}catch(l){return Fa(l instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&h0(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ut.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=pe();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Rm(e,n,this.Qe,this.ke,r);return this.ke=gs(),this.qe=mk(),this.Qe=new Qe(ke),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new fk,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Et(ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new fk),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function mk(){return new Qe(ne.comparator)}function pk(){return new Qe(ne.comparator)}const uU={asc:"ASCENDING",desc:"DESCENDING"},dU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hU={and:"AND",or:"OR"};class fU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function p0(t,e){return t.useProto3Json||Tm(e)?e:{value:e}}function vf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mU(t,e){return vf(t,e.toTimestamp())}function Ir(t){return Ae(!!t),le.fromTimestamp(function(n){const r=gi(n);return new pt(r.seconds,r.nanos)}(t))}function kx(t,e){return g0(t,e).canonicalString()}function g0(t,e){const n=function(s){return new Ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function FI(t){const e=Ve.fromString(t);return Ae(WI(e)),e}function y0(t,e){return kx(t.databaseId,e.path)}function dg(t,e){const n=FI(e);if(n.get(1)!==t.databaseId.projectId)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(zI(n))}function UI(t,e){return kx(t.databaseId,e)}function pU(t){const e=FI(t);return e.length===4?Ve.emptyPath():zI(e)}function v0(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zI(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function gk(t,e,n){return{name:y0(t,e),fields:n.value.mapValue.fields}}function gU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Ae(u===void 0||typeof u=="string"),Pt.fromBase64String(u||"")):(Ae(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Pt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?V.UNKNOWN:jI(c.code);return new G(u,c.message||"")}(o);n=new LI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=dg(t,r.document.name),i=Ir(r.document.updateTime),o=r.document.createTime?Ir(r.document.createTime):le.min(),a=new an({mapValue:{fields:r.document.fields}}),l=Ut.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new vh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=dg(t,r.document),i=r.readTime?Ir(r.readTime):le.min(),o=Ut.newNoDocument(s,i),a=r.removedTargetIds||[];n=new vh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=dg(t,r.document),i=r.removedTargetIds||[];n=new vh([],i,s,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new iU(s,i),a=r.targetId;n=new OI(a,o)}}return n}function yU(t,e){let n;if(e instanceof Pu)n={update:gk(t,e.key,e.value)};else if(e instanceof Am)n={delete:y0(t,e.key)};else if(e instanceof Ii)n={update:gk(t,e.key,e.data),updateMask:EU(e.fieldMask)};else{if(!(e instanceof nU))return ae();n={verify:y0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof gf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof nu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yf)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:mU(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae()}(t,e.precondition)),n}function vU(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Ir(s.updateTime):Ir(i);return o.isEqual(le.min())&&(o=Ir(i)),new Z6(o,s.transformResults||[])}(n,e))):[]}function xU(t,e){return{documents:[UI(t,e.path)]}}function wU(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=UI(t,s);const i=function(c){if(c.length!==0)return $I(cr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(m){return{field:Yo(m.field),direction:kU(m.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=p0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function _U(t){let e=pU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ae(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const m=BI(h);return m instanceof cr&&vI(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(g){return new eu(Xo(g.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,Tm(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,p=h.values||[];return new pf(p,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,p=h.values||[];return new pf(p,m)}(n.endAt)),U6(e,s,o,i,a,"F",l,c)}function bU(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xo(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Xo(n.unaryFilter.field);return lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xo(n.unaryFilter.field);return lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xo(n.unaryFilter.field);return lt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(Xo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cr.create(n.compositeFilter.filters.map(r=>BI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function kU(t){return uU[t]}function TU(t){return dU[t]}function SU(t){return hU[t]}function Yo(t){return{fieldPath:t.canonicalString()}}function Xo(t){return Tt.fromServerFormat(t.fieldPath)}function $I(t){return t instanceof lt?function(n){if(n.op==="=="){if(nk(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NAN"}};if(tk(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nk(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NAN"}};if(tk(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(n.field),op:TU(n.op),value:n.value}}}(t):t instanceof cr?function(n){const r=n.getFilters().map(s=>$I(s));return r.length===1?r[0]:{compositeFilter:{op:SU(n.op),filters:r}}}(t):ae()}function EU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function WI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n,r,s,i=le.min(),o=le.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e){this.ct=e}}function PU(t){const e=_U({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?m0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(){this.un=new AU}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(pi.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(pi.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class AU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Et(Ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Et(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $a(0)}static kn(){return new $a(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(){this.changes=new sl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&fc(r.mutation,s,_n.empty(),pt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=to();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Hl();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=to();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=gs();const o=hc(),a=function(){return hc()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Ii)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),fc(u.mutation,c,u.mutation.getFieldMask(),pt.now())):o.set(c.key,_n.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new NU(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=hc();let s=new Qe((o,a)=>o-a),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||_n.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||pe()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=CI();u.forEach(m=>{if(!i.has(m)){const p=DI(n.get(m),r.get(m));p!==null&&h.set(m,p),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(to());let a=-1,l=i;return o.next(c=>U.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?U.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,pe())).next(u=>({batchId:a,changes:EI(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=Hl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Hl();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,l=>{const c=function(h,m){return new rl(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ut.newInvalidDocument(u)))});let a=Hl();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&fc(u.mutation,c,_n.empty(),pt.now()),Cm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ir(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:PU(s.bundledQuery),readTime:Ir(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(){this.overlays=new Qe(ne.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=to();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=to(),i=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Qe((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=to(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=to(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return U.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sU(n,r));let i=this.Ir.get(n);i===void 0&&(i=pe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.Tr=new Et(yt.Er),this.dr=new Et(yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new yt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ne(new Ve([])),r=new yt(n,e),s=new yt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ne(new Ve([])),r=new yt(n,e),s=new yt(n,e+1);let i=pe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new yt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ne.comparator(e.key,n.key)||ke(e.wr,n.wr)}static Ar(e,n){return ke(e.wr,n.wr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Et(yt.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rU(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new yt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),s=new yt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(ke);return n.forEach(s=>{const i=new yt(s,0),o=new yt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new yt(new ne(i),0);let a=new Et(ke);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ae(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new yt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new yt(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.Mr=e,this.docs=function(){return new Qe(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=gs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ut.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=gs();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||_6(w6(u),r)<=0||(s.has(u.key)||Cm(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ae()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FU(this)}getSize(e){return U.resolve(this.size)}}class FU extends RU{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e){this.persistence=e,this.Nr=new sl(n=>vx(n),xx),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Tx,this.targetCount=0,this.kr=$a.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $a(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,n){this.qr={},this.overlays={},this.Qr=new mx(0),this.Kr=!1,this.Kr=!0,this.$r=new OU,this.referenceDelegate=e(this),this.Ur=new UU(this),this.indexManager=new IU,this.remoteDocumentCache=function(s){return new VU(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new CU(n),this.Gr=new MU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new LU(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new BU(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class BU extends k6{constructor(e){super(),this.currentSequenceNumber=e}}class Sx{constructor(e){this.persistence=e,this.Jr=new Tx,this.Yr=null}static Zr(e){return new Sx(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=ne.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ex(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return NV()?8:T6(qt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $U;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Al()<=ye.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Qo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Al()<=ye.DEBUG&&X("QueryEngine","Query:",Qo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Al()<=ye.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Qo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(n))):U.resolve())}Yi(e,n){if(ok(n))return U.resolve(null);let r=Pr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=m0(n,null,"F"),r=Pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,m0(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return ok(n)||s.isEqual(le.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(Al()<=ye.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qo(n)),this.rs(e,o,n,x6(s,-1)).next(a=>a))})}ts(e,n){let r=new Et(TI(e));return n.forEach((s,i)=>{Cm(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Al()<=ye.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Qo(n)),this.Ji.getDocumentsMatchingQuery(e,n,pi.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Qe(ke),this._s=new sl(i=>vx(i),xx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DU(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function qU(t,e,n,r){return new HU(t,e,n,r)}async function HI(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=pe();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function GU(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,m=h.keys();let p=U.resolve();return m.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(v=>{const _=c.docVersions.get(g);Ae(_!==null),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function qI(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function KU(t,e){const n=ce(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((u,h)=>{const m=s.get(h);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(i,u.addedDocuments,h)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Pt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),s=s.insert(h,p),function(v,_,w){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,p,u)&&a.push(n.Ur.updateTargetData(i,p))});let l=gs(),c=pe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(QU(i,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(le.min())){const u=n.Ur.getLastRemoteSnapshotVersion(i).next(h=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function QU(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=gs();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function YU(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XU(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new qs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function x0(t,e,n){const r=ce(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Cu(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function yk(t,e,n){const r=ce(t);let s=le.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=ce(l),m=h._s.get(u);return m!==void 0?U.resolve(h.os.get(m)):h.Ur.getTargetData(c,u)}(r,o,Pr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:le.min(),n?i:pe())).next(a=>(JU(r,B6(e),a),{documents:a,Ts:i})))}function JU(t,e,n){let r=t.us.get(e)||le.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class vk{constructor(){this.activeTargetIds=K6()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZU{constructor(){this.so=new vk,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad=null;function hg(){return Ad===null?Ad=function(){return 268435456+Math.round(2147483648*Math.random())}():Ad++,"0x"+Ad.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class r9 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=hg(),l=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(u=>(X("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Fa("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=t9[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=hg();return new Promise((o,a)=>{const l=new oI;l.setWithCredentials(!0),l.listenOnce(aI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ph.NO_ERROR:const u=l.getResponseJson();X(Mt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case ph.TIMEOUT:X(Mt,`RPC '${e}' ${i} timed out`),a(new G(V.DEADLINE_EXCEEDED,"Request time out"));break;case ph.HTTP_ERROR:const h=l.getStatus();if(X(Mt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const g=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(w)>=0?w:V.UNKNOWN}(p.status);a(new G(g,p.message))}else a(new G(V.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(V.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{X(Mt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);X(Mt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=hg(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uI(),a=cI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");X(Mt,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let m=!1,p=!1;const g=new n9({Io:_=>{p?X(Mt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(X(Mt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),X(Mt,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},To:()=>h.close()}),v=(_,w,x)=>{_.listen(w,b=>{try{x(b)}catch(C){setTimeout(()=>{throw C},0)}})};return v(h,Wl.EventType.OPEN,()=>{p||(X(Mt,`RPC '${e}' stream ${s} transport opened.`),g.yo())}),v(h,Wl.EventType.CLOSE,()=>{p||(p=!0,X(Mt,`RPC '${e}' stream ${s} transport closed`),g.So())}),v(h,Wl.EventType.ERROR,_=>{p||(p=!0,Fa(Mt,`RPC '${e}' stream ${s} transport errored:`,_),g.So(new G(V.UNAVAILABLE,"The operation could not be completed")))}),v(h,Wl.EventType.MESSAGE,_=>{var w;if(!p){const x=_.data[0];Ae(!!x);const b=x,C=b.error||((w=b[0])===null||w===void 0?void 0:w.error);if(C){X(Mt,`RPC '${e}' stream ${s} received error:`,C);const P=C.status;let j=function(E){const R=it[E];if(R!==void 0)return jI(R)}(P),S=C.message;j===void 0&&(j=V.INTERNAL,S="Unknown error status: "+P+" with message "+C.message),p=!0,g.So(new G(j,S)),h.close()}else X(Mt,`RPC '${e}' stream ${s} received:`,x),g.bo(x)}}),v(a,lI.STAT_EVENT,_=>{_.stat===l0.PROXY?X(Mt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===l0.NOPROXY&&X(Mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function fg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t){return new fU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new GI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(ps(n.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s9 extends KI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=gU(this.serializer,e),r=function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Ir(o.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=v0(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=h0(l)?{documents:xU(i,l)}:{query:wU(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=VI(i,o.resumeToken);const c=p0(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=vf(i,o.snapshotVersion.toTimestamp());const c=p0(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=bU(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=v0(this.serializer),n.removeTarget=e,this.a_(n)}}class i9 extends KI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=vU(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=v0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yU(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,g0(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,g0(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class a9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ps(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Do(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ce(l);c.L_.add(4),await Au(c),c.q_.set("Unknown"),c.L_.delete(4),await Dm(c)}(this))})}),this.q_=new a9(r,s)}}async function Dm(t){if(Do(t))for(const e of t.B_)await e(!0)}async function Au(t){for(const e of t.B_)await e(!1)}function QI(t,e){const n=ce(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ax(n)?Ix(n):il(n).r_()&&Px(n,e))}function Cx(t,e){const n=ce(t),r=il(n);n.N_.delete(e),r.r_()&&YI(n,e),n.N_.size===0&&(r.r_()?r.o_():Do(n)&&n.q_.set("Unknown"))}function Px(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}il(t).A_(e)}function YI(t,e){t.Q_.xe(e),il(t).R_(e)}function Ix(t){t.Q_=new cU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),il(t).start(),t.q_.v_()}function Ax(t){return Do(t)&&!il(t).n_()&&t.N_.size>0}function Do(t){return ce(t).L_.size===0}function XI(t){t.Q_=void 0}async function c9(t){t.q_.set("Online")}async function u9(t){t.N_.forEach((e,n)=>{Px(t,e)})}async function d9(t,e){XI(t),Ax(t)?(t.q_.M_(e),Ix(t)):t.q_.set("Unknown")}async function h9(t,e,n){if(t.q_.set("Online"),e instanceof LI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xf(t,r)}else if(e instanceof vh?t.Q_.Ke(e):e instanceof OI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const r=await qI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(Pt.EMPTY_BYTE_STRING,u.snapshotVersion)),YI(i,l);const h=new qs(u.target,l,c,u.sequenceNumber);Px(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await xf(t,r)}}async function xf(t,e,n){if(!Cu(e))throw e;t.L_.add(1),await Au(t),t.q_.set("Offline"),n||(n=()=>qI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Dm(t)})}function JI(t,e){return e().catch(n=>xf(t,n,e))}async function Mm(t){const e=ce(t),n=yi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;f9(e);)try{const s=await YU(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,m9(e,s)}catch(s){await xf(e,s)}ZI(e)&&eA(e)}function f9(t){return Do(t)&&t.O_.length<10}function m9(t,e){t.O_.push(e);const n=yi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ZI(t){return Do(t)&&!yi(t).n_()&&t.O_.length>0}function eA(t){yi(t).start()}async function p9(t){yi(t).p_()}async function g9(t){const e=yi(t);for(const n of t.O_)e.m_(n.mutations)}async function y9(t,e,n){const r=t.O_.shift(),s=_x.from(r,e,n);await JI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Mm(t)}async function v9(t,e){e&&yi(t).V_&&await async function(r,s){if(function(o){return oU(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();yi(r).s_(),await JI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Mm(r)}}(t,e),ZI(t)&&eA(t)}async function wk(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=Do(n);n.L_.add(3),await Au(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Dm(n)}async function x9(t,e){const n=ce(t);e?(n.L_.delete(2),await Dm(n)):e||(n.L_.add(2),await Au(n),n.q_.set("Unknown"))}function il(t){return t.K_||(t.K_=function(n,r,s){const i=ce(n);return i.w_(),new s9(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:c9.bind(null,t),Ro:u9.bind(null,t),mo:d9.bind(null,t),d_:h9.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ax(t)?Ix(t):t.q_.set("Unknown")):(await t.K_.stop(),XI(t))})),t.K_}function yi(t){return t.U_||(t.U_=function(n,r,s){const i=ce(n);return i.w_(),new i9(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:p9.bind(null,t),mo:v9.bind(null,t),f_:g9.bind(null,t),g_:y9.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Mm(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Rx(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nx(t,e){if(ps("AsyncQueue",`${e}: ${t}`),Cu(t))return new G(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Hl(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new Sa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Sa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.W_=new Qe(ne.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wa{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Wa(e,n,Sa.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Em(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _9{constructor(){this.queries=bk(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ce(n),i=s.queries;s.queries=bk(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new G(V.ABORTED,"Firestore shutting down"))}}function bk(){return new sl(t=>kI(t),Em)}async function Dx(t,e){const n=ce(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new w9,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Nx(o,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&jx(n)}async function Mx(t,e){const n=ce(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function b9(t,e){const n=ce(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&jx(n)}function k9(t,e,n){const r=ce(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function jx(t){t.Y_.forEach(e=>{e.next()})}var w0,kk;(kk=w0||(w0={})).ea="default",kk.Cache="cache";class Ox{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==w0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.key=e}}class nA{constructor(e){this.key=e}}class T9{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=TI(e),this.Ra=new Sa(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new _k,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const m=s.get(u),p=Cm(this.query,h)?h:null,g=!!m&&this.mutatedKeys.has(m.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;m&&p?m.data.isEqual(p.data)?g!==v&&(r.track({type:3,doc:p}),_=!0):this.ga(m,p)||(r.track({type:2,doc:p}),_=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),_=!0):m&&!p&&(r.track({type:1,doc:m}),_=!0,(l||c)&&(a=!0)),_&&(p?(o=o.add(p),i=v?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,h)=>function(p,g){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return v(p)-v(g)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Wa(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _k,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new nA(r))}),this.da.forEach(r=>{e.has(r)||n.push(new tA(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Wa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class S9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class E9{constructor(e){this.key=e,this.va=!1}}class C9{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new sl(a=>kI(a),Em),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(ne.comparator),this.Na=new Map,this.La=new Tx,this.Ba={},this.ka=new Map,this.qa=$a.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function P9(t,e,n=!0){const r=lA(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await rA(r,e,n,!0),s}async function I9(t,e){const n=lA(t);await rA(n,e,!0,!1)}async function rA(t,e,n,r){const s=await XU(t.localStore,Pr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await A9(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&QI(t.remoteStore,s),a}async function A9(t,e,n,r,s){t.Ka=(h,m,p)=>async function(v,_,w,x){let b=_.view.ma(w);b.ns&&(b=await yk(v.localStore,_.query,!1).then(({documents:S})=>_.view.ma(S,b)));const C=x&&x.targetChanges.get(_.targetId),P=x&&x.targetMismatches.get(_.targetId)!=null,j=_.view.applyChanges(b,v.isPrimaryClient,C,P);return Sk(v,_.targetId,j.wa),j.snapshot}(t,h,m,p);const i=await yk(t.localStore,e,!0),o=new T9(e,i.Ts),a=o.ma(i.documents),l=Iu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Sk(t,n,c.wa);const u=new S9(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function R9(t,e,n){const r=ce(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Em(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await x0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Cx(r.remoteStore,s.targetId),_0(r,s.targetId)}).catch(Eu)):(_0(r,s.targetId),await x0(r.localStore,s.targetId,!0))}async function N9(t,e){const n=ce(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cx(n.remoteStore,r.targetId))}async function D9(t,e,n){const r=U9(t);try{const s=await function(o,a){const l=ce(o),c=pt.now(),u=a.reduce((p,g)=>p.add(g.key),pe());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=gs(),v=pe();return l.cs.getEntries(p,u).next(_=>{g=_,g.forEach((w,x)=>{x.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(_=>{h=_;const w=[];for(const x of a){const b=tU(x,h.get(x.key).overlayedDocument);b!=null&&w.push(new Ii(x.key,b,pI(b.value.mapValue),en.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,w,a)}).next(_=>{m=_;const w=_.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(p,_.batchId,w)})}).then(()=>({batchId:m.batchId,changes:EI(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Qe(ke)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await Ru(r,s.changes),await Mm(r.remoteStore)}catch(s){const i=Nx(s,"Failed to persist write");n.reject(i)}}async function sA(t,e){const n=ce(t);try{const r=await KU(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ae(o.va):s.removedDocuments.size>0&&(Ae(o.va),o.va=!1))}),await Ru(n,r,e)}catch(r){await Eu(r)}}function Tk(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ce(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const m of h.j_)m.Z_(a)&&(c=!0)}),c&&jx(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function M9(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Qe(ne.comparator);o=o.insert(i,Ut.newNoDocument(i,le.min()));const a=pe().add(i),l=new Rm(le.min(),new Map,new Qe(ke),o,a);await sA(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Lx(r)}else await x0(r.localStore,e,!1).then(()=>_0(r,e,n)).catch(Eu)}async function j9(t,e){const n=ce(t),r=e.batch.batchId;try{const s=await GU(n.localStore,e);oA(n,r,null),iA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ru(n,s)}catch(s){await Eu(s)}}async function O9(t,e,n){const r=ce(t);try{const s=await function(o,a){const l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ae(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);oA(r,e,n),iA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ru(r,s)}catch(s){await Eu(s)}}function iA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function oA(t,e,n){const r=ce(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function _0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||aA(t,r)})}function aA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Cx(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Lx(t))}function Sk(t,e,n){for(const r of n)r instanceof tA?(t.La.addReference(r.key,e),L9(t,r)):r instanceof nA?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||aA(t,r.key)):ae()}function L9(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),Lx(t))}function Lx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ne(Ve.fromString(e)),r=t.qa.next();t.Na.set(r,new E9(n)),t.Oa=t.Oa.insert(n,r),QI(t.remoteStore,new qs(Pr(Sm(n.path)),r,"TargetPurposeLimboResolution",mx.oe))}}async function Ru(t,e,n){const r=ce(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Ex.Wi(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const u=ce(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(c,m=>U.forEach(m.$i,p=>u.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>U.forEach(m.Ui,p=>u.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!Cu(h))throw h;X("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const p=u.os.get(m),g=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(g);u.os=u.os.insert(m,v)}}}(r.localStore,i))}async function V9(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await HI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new G(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ru(n,r.hs)}}function F9(t,e){const n=ce(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let s=pe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function lA(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M9.bind(null,e),e.Ca.d_=b9.bind(null,e.eventManager),e.Ca.$a=k9.bind(null,e.eventManager),e}function U9(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O9.bind(null,e),e}class wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return qU(this.persistence,new WU,e.initialUser,this.serializer)}Ga(e){return new zU(Sx.Zr,this.serializer)}Wa(e){return new ZU}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wf.provider={build:()=>new wf};class b0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Tk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V9.bind(null,this.syncEngine),await x9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _9}()}createDatastore(e){const n=Nm(e.databaseInfo.databaseId),r=function(i){return new r9(i)}(e.databaseInfo);return function(i,o,a,l){return new o9(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new l9(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Tk(this.syncEngine,n,0),function(){return xk.D()?new xk:new e9}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const h=new C9(s,i,o,a,l,c);return u&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ce(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Au(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}b0.provider={build:()=>new b0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Vt.UNAUTHENTICATED,this.clientId=hI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Nx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function mg(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await HI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ek(t,e){t.asyncQueue.verifyOperationInProgress();const n=await B9(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wk(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>wk(e.remoteStore,s)),t._onlineComponents=e}async function B9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await mg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Fa("Error using user provided cache. Falling back to memory cache: "+n),await mg(t,new wf)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await mg(t,new wf);return t._offlineComponents}async function cA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Ek(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Ek(t,new b0))),t._onlineComponents}function $9(t){return cA(t).then(e=>e.syncEngine)}async function _f(t){const e=await cA(t),n=e.eventManager;return n.onListen=P9.bind(null,e.syncEngine),n.onUnlisten=R9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=I9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=N9.bind(null,e.syncEngine),n}function W9(t,e,n={}){const r=new is;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Vx({next:m=>{u.Za(),o.enqueueAndForget(()=>Mx(i,h));const p=m.docs.has(a);!p&&m.fromCache?c.reject(new G(V.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new G(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new Ox(Sm(a.path),u,{includeMetadataChanges:!0,_a:!0});return Dx(i,h)}(await _f(t),t.asyncQueue,e,n,r)),r.promise}function H9(t,e,n={}){const r=new is;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Vx({next:m=>{u.Za(),o.enqueueAndForget(()=>Mx(i,h)),m.fromCache&&l.source==="server"?c.reject(new G(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new Ox(a,u,{includeMetadataChanges:!0,_a:!0});return Dx(i,h)}(await _f(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t,e,n){if(!n)throw new G(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function q9(t,e,n,r){if(e===!0&&r===!0)throw new G(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Pk(t){if(!ne.isDocumentKey(t))throw new G(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ik(t){if(ne.isDocumentKey(t))throw new G(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jm(t);throw new G(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Om{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ak({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ak(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new u6;switch(r.type){case"firstParty":return new m6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ck.get(n);r&&(X("ComponentProvider","Removing Datastore"),Ck.delete(n),r.terminate())}(this),Promise.resolve()}}function G9(t,e,n,r={}){var s;const i=(t=tn(t,Om))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Vt.MOCK_USER;else{a=EV(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Vt(c)}t._authCredentials=new d6(new dI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ai(this.firestore,e,this._query)}}class Wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class ci extends Ai{constructor(e,n,r){super(e,n,Sm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new ne(e))}withConverter(e){return new ci(this.firestore,e,this._path)}}function Jo(t,e,...n){if(t=Je(t),dA("collection","path",e),t instanceof Om){const r=Ve.fromString(e,...n);return Ik(r),new ci(t,null,r)}{if(!(t instanceof Wt||t instanceof ci))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Ik(r),new ci(t.firestore,null,r)}}function de(t,e,...n){if(t=Je(t),arguments.length===1&&(e=hI.newId()),dA("doc","path",e),t instanceof Om){const r=Ve.fromString(e,...n);return Pk(r),new Wt(t,null,new ne(r))}{if(!(t instanceof Wt||t instanceof ci))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Pk(r),new Wt(t.firestore,t instanceof ci?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new GI(this,"async_queue_retry"),this.Vu=()=>{const r=fg();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=fg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=fg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new is;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Cu(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ps("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Rx.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Nk(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class jr extends Om{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Rk,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rk(e),this._firestoreClient=void 0,await e}}}function K9(t,e){const n=typeof t=="object"?t:kP(),r=typeof t=="string"?t:"(default)",s=_u(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=TV("firestore");i&&G9(s,...i)}return s}function Nu(t){if(t._terminated)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Q9(t),t._firestoreClient}function Q9(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new C6(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,uA(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new z9(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ha(Pt.fromBase64String(e))}catch(n){throw new G(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ha(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=/^__.*__$/;class X9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ii(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pu(e,this.data,n,this.fieldTransforms)}}class hA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ii(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Bx{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Bx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fA(this.Cu)&&Y9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class J9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nm(e)}Qu(e,n,r,s=!1){return new Bx({Cu:e,methodName:n,qu:r,path:Tt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mu(t){const e=t._freezeSettings(),n=Nm(t._databaseId);return new J9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $x(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Wx("Data must be an object, but it was:",o,r);const a=gA(r,o);let l,c;if(i.merge)l=new _n(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const m=k0(e,h,n);if(!o.contains(m))throw new G(V.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);vA(u,m)||u.push(m)}l=new _n(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new X9(new an(a),l,c)}class Lm extends Fx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lm}}function mA(t,e,n,r){const s=t.Qu(1,e,n);Wx("Data must be an object, but it was:",s,r);const i=[],o=an.empty();No(r,(l,c)=>{const u=Hx(e,l,n);c=Je(c);const h=s.Nu(u);if(c instanceof Lm)i.push(u);else{const m=ju(c,h);m!=null&&(i.push(u),o.set(u,m))}});const a=new _n(i);return new hA(o,a,s.fieldTransforms)}function pA(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[k0(e,r,n)],l=[s];if(i.length%2!=0)throw new G(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(k0(e,i[m])),l.push(i[m+1]);const c=[],u=an.empty();for(let m=a.length-1;m>=0;--m)if(!vA(c,a[m])){const p=a[m];let g=l[m];g=Je(g);const v=o.Nu(p);if(g instanceof Lm)c.push(p);else{const _=ju(g,v);_!=null&&(c.push(p),u.set(p,_))}}const h=new _n(c);return new hA(u,h,o.fieldTransforms)}function Z9(t,e,n,r=!1){return ju(n,t.Qu(r?4:3,e))}function ju(t,e){if(yA(t=Je(t)))return Wx("Unsupported field value:",e,t),gA(t,e);if(t instanceof Fx)return function(r,s){if(!fA(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=ju(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Q6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=pt.fromDate(r);return{timestampValue:vf(s.serializer,i)}}if(r instanceof pt){const i=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vf(s.serializer,i)}}if(r instanceof Ux)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ha)return{bytesValue:VI(s.serializer,r._byteString)};if(r instanceof Wt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:kx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof zx)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return wx(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${jm(r)}`)}(t,e)}function gA(t,e){const n={};return fI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):No(t,(r,s)=>{const i=ju(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function yA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Ux||t instanceof Ha||t instanceof Wt||t instanceof Fx||t instanceof zx)}function Wx(t,e,n){if(!yA(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=jm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function k0(t,e,n){if((e=Je(e))instanceof Du)return e._internalPath;if(typeof e=="string")return Hx(t,e);throw bf("Field path arguments must be of type string or ",t,!1,void 0,n)}const ez=new RegExp("[~\\*/\\[\\]]");function Hx(t,e,n){if(e.search(ez)>=0)throw bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Du(...e.split("."))._internalPath}catch{throw bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new G(V.INVALID_ARGUMENT,a+t+l)}function vA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tz extends xA{data(){return super.data()}}function Vm(t,e){return typeof e=="string"?Hx(t,e):e instanceof Du?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qx{}class _A extends qx{}function T0(t,e,...n){let r=[];e instanceof qx&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Gx).length,a=i.filter(l=>l instanceof Fm).length;if(o>1||o>0&&a>0)throw new G(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Fm extends _A{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fm(e,n,r)}_apply(e){const n=this._parse(e);return bA(e._query,n),new Ai(e.firestore,e.converter,f0(e._query,n))}_parse(e){const n=Mu(e.firestore);return function(i,o,a,l,c,u,h){let m;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new G(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Mk(h,u);const p=[];for(const g of h)p.push(Dk(l,i,g));m={arrayValue:{values:p}}}else m=Dk(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Mk(h,u),m=Z9(a,o,h,u==="in"||u==="not-in");return lt.create(c,u,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function S0(t,e,n){const r=e,s=Vm("where",t);return Fm._create(s,r,n)}class Gx extends qx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)bA(o,l),o=f0(o,l)}(e._query,n),new Ai(e.firestore,e.converter,f0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kx extends _A{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Kx(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eu(i,o)}(e._query,this._field,this._direction);return new Ai(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new rl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function nz(t,e="asc"){const n=e,r=Vm("orderBy",t);return Kx._create(r,n)}function Dk(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new G(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bI(e)&&n.indexOf("/")!==-1)throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!ne.isDocumentKey(r))throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ek(t,new ne(r))}if(n instanceof Wt)return ek(t,n._key);throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jm(n)}.`)}function Mk(t,e){if(!Array.isArray(t)||t.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bA(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rz{convertValue(e,n="none"){switch(bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return No(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>et(o.doubleValue));return new zx(i)}convertGeoPoint(e){return new Ux(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const n=gi(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Ae(WI(r));const s=new Jc(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||ps(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kA extends xA{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Vm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class xh extends kA{data(e={}){return super.data(e)}}class TA{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Gl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xh(this._firestore,this._userDataWriter,r.key,r,new Gl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new xh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Gl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new xh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Gl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:sz(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function sz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){t=tn(t,Wt);const e=tn(t.firestore,jr);return W9(Nu(e),t._key).then(n=>SA(e,t,n))}class Yx extends rz{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ha(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}function iz(t){t=tn(t,Ai);const e=tn(t.firestore,jr),n=Nu(e),r=new Yx(e);return wA(t._query),H9(n,t._query).then(s=>new TA(e,r,t,s))}function Gs(t,e,n){t=tn(t,Wt);const r=tn(t.firestore,jr),s=Qx(t.converter,e,n);return Ou(r,[$x(Mu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,en.none())])}function Ze(t,e,n,...r){t=tn(t,Wt);const s=tn(t.firestore,jr),i=Mu(s);let o;return o=typeof(e=Je(e))=="string"||e instanceof Du?pA(i,"updateDoc",t._key,e,n,r):mA(i,"updateDoc",t._key,e),Ou(s,[o.toMutation(t._key,en.exists(!0))])}function kf(t){return Ou(tn(t.firestore,jr),[new Am(t._key,en.none())])}function Ok(t,e){const n=tn(t.firestore,jr),r=de(t),s=Qx(t.converter,e);return Ou(n,[$x(Mu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,en.exists(!1))]).then(()=>r)}function Tf(t,...e){var n,r,s;t=Je(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Nk(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Nk(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(t instanceof Wt)c=tn(t.firestore,jr),u=Sm(t._key.path),l={next:h=>{e[o]&&e[o](SA(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=tn(t,Ai);c=tn(h.firestore,jr),u=h._query;const m=new Yx(c);l={next:p=>{e[o]&&e[o](new TA(c,m,h,p))},error:e[o+1],complete:e[o+2]},wA(t._query)}return function(m,p,g,v){const _=new Vx(v),w=new Ox(p,_,g);return m.asyncQueue.enqueueAndForget(async()=>Dx(await _f(m),w)),()=>{_.Za(),m.asyncQueue.enqueueAndForget(async()=>Mx(await _f(m),w))}}(Nu(c),u,a,l)}function Ou(t,e){return function(r,s){const i=new is;return r.asyncQueue.enqueueAndForget(async()=>D9(await $9(r),s,i)),i.promise}(Nu(t),e)}function SA(t,e,n){const r=n.docs.get(e._key),s=new Yx(t);return new kA(t,s,e._key,r,new Gl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Mu(e)}set(e,n,r){this._verifyNotCommitted();const s=pg(e,this._firestore),i=Qx(s.converter,n,r),o=$x(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,en.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=pg(e,this._firestore);let o;return o=typeof(n=Je(n))=="string"||n instanceof Du?pA(this._dataReader,"WriteBatch.update",i._key,n,r,s):mA(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,en.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=pg(e,this._firestore);return this._mutations=this._mutations.concat(new Am(n._key,en.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pg(t,e){if((t=Je(t)).firestore!==e)throw new G(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t){return Nu(t=tn(t,jr)),new oz(t,e=>Ou(t,e))}(function(e,n=!0){(function(s){nl=s})(el),Dr(new lr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new jr(new h6(r.getProvider("auth-internal")),new g6(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jc(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),zn(Q1,"4.7.3",e),zn(Q1,"4.7.3","esm2017")})();var az="firebase",lz="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(az,lz,"app");const EA="@firebase/installations",Xx="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=1e4,PA=`w:${Xx}`,IA="FIS_v2",cz="https://firebaseinstallations.googleapis.com/v1",uz=60*60*1e3,dz="installations",hz="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ko=new Ro(dz,hz,fz);function AA(t){return t instanceof dr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA({projectId:t}){return`${cz}/projects/${t}/installations`}function NA(t){return{token:t.token,requestStatus:2,expiresIn:pz(t.expiresIn),creationTime:Date.now()}}async function DA(t,e){const r=(await e.json()).error;return ko.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function MA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function mz(t,{refreshToken:e}){const n=MA(t);return n.append("Authorization",gz(e)),n}async function jA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function pz(t){return Number(t.replace("s","000"))}function gz(t){return`${IA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yz({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=RA(t),s=MA(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:IA,appId:t.appId,sdkVersion:PA},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await jA(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:NA(c.authToken)}}else throw await DA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz=/^[cdef][\w-]{21}$/,E0="";function wz(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=_z(t);return xz.test(n)?n:E0}catch{return E0}}function _z(t){return vz(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=new Map;function VA(t,e){const n=Um(t);FA(n,e),bz(n,e)}function FA(t,e){const n=LA.get(t);if(n)for(const r of n)r(e)}function bz(t,e){const n=kz();n&&n.postMessage({key:t,fid:e}),Tz()}let no=null;function kz(){return!no&&"BroadcastChannel"in self&&(no=new BroadcastChannel("[Firebase] FID Change"),no.onmessage=t=>{FA(t.data.key,t.data.fid)}),no}function Tz(){LA.size===0&&no&&(no.close(),no=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sz="firebase-installations-database",Ez=1,To="firebase-installations-store";let gg=null;function Jx(){return gg||(gg=_P(Sz,Ez,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(To)}}})),gg}async function Sf(t,e){const n=Um(t),s=(await Jx()).transaction(To,"readwrite"),i=s.objectStore(To),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&VA(t,e.fid),e}async function UA(t){const e=Um(t),r=(await Jx()).transaction(To,"readwrite");await r.objectStore(To).delete(e),await r.done}async function zm(t,e){const n=Um(t),s=(await Jx()).transaction(To,"readwrite"),i=s.objectStore(To),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&VA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zx(t){let e;const n=await zm(t.appConfig,r=>{const s=Cz(r),i=Pz(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===E0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Cz(t){const e=t||{fid:wz(),registrationStatus:0};return zA(e)}function Pz(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ko.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Iz(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Az(t)}:{installationEntry:e}}async function Iz(t,e){try{const n=await yz(t,e);return Sf(t.appConfig,n)}catch(n){throw AA(n)&&n.customData.serverCode===409?await UA(t.appConfig):await Sf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Az(t){let e=await Vk(t.appConfig);for(;e.registrationStatus===1;)await OA(100),e=await Vk(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Zx(t);return r||n}return e}function Vk(t){return zm(t,e=>{if(!e)throw ko.create("installation-not-found");return zA(e)})}function zA(t){return Rz(t)?{fid:t.fid,registrationStatus:0}:t}function Rz(t){return t.registrationStatus===1&&t.registrationTime+CA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nz({appConfig:t,heartbeatServiceProvider:e},n){const r=Dz(t,n),s=mz(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:PA,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await jA(()=>fetch(r,a));if(l.ok){const c=await l.json();return NA(c)}else throw await DA("Generate Auth Token",l)}function Dz(t,{fid:e}){return`${RA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ew(t,e=!1){let n;const r=await zm(t.appConfig,i=>{if(!BA(i))throw ko.create("not-registered");const o=i.authToken;if(!e&&Oz(o))return i;if(o.requestStatus===1)return n=Mz(t,e),i;{if(!navigator.onLine)throw ko.create("app-offline");const a=Vz(i);return n=jz(t,a),a}});return n?await n:r.authToken}async function Mz(t,e){let n=await Fk(t.appConfig);for(;n.authToken.requestStatus===1;)await OA(100),n=await Fk(t.appConfig);const r=n.authToken;return r.requestStatus===0?ew(t,e):r}function Fk(t){return zm(t,e=>{if(!BA(e))throw ko.create("not-registered");const n=e.authToken;return Fz(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function jz(t,e){try{const n=await Nz(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Sf(t.appConfig,r),n}catch(n){if(AA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await UA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Sf(t.appConfig,r)}throw n}}function BA(t){return t!==void 0&&t.registrationStatus===2}function Oz(t){return t.requestStatus===2&&!Lz(t)}function Lz(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+uz}function Vz(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Fz(t){return t.requestStatus===1&&t.requestTime+CA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uz(t){const e=t,{installationEntry:n,registrationPromise:r}=await Zx(e);return r?r.catch(console.error):ew(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zz(t,e=!1){const n=t;return await Bz(n),(await ew(n,e)).token}async function Bz(t){const{registrationPromise:e}=await Zx(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(t){if(!t||!t.options)throw yg("App Configuration");if(!t.name)throw yg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw yg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function yg(t){return ko.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="installations",Wz="installations-internal",Hz=t=>{const e=t.getProvider("app").getImmediate(),n=$z(e),r=_u(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},qz=t=>{const e=t.getProvider("app").getImmediate(),n=_u(e,$A).getImmediate();return{getId:()=>Uz(n),getToken:s=>zz(n,s)}};function Gz(){Dr(new lr($A,Hz,"PUBLIC")),Dr(new lr(Wz,qz,"PRIVATE"))}Gz();zn(EA,Xx);zn(EA,Xx,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="analytics",Kz="firebase_id",Qz="origin",Yz=60*1e3,Xz="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tw="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn=new wm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Bn=new Ro("analytics","Analytics",Jz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(t){if(!t.startsWith(tw)){const e=Bn.create("invalid-gtag-resource",{gtagURL:t});return fn.warn(e.message),""}return t}function WA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function eB(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function tB(t,e){const n=eB("firebase-js-sdk-policy",{createScriptURL:Zz}),r=document.createElement("script"),s=`${tw}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function nB(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function rB(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await WA(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){fn.error(a)}t("config",s,i)}async function sB(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await WA(n);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&e[c.appId];if(u)i.push(u);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){fn.error(i)}}function iB(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await sB(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await rB(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){fn.error(a)}}return s}function oB(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=iB(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function aB(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(tw)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB=30,cB=1e3;class uB{constructor(e={},n=cB){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const HA=new uB;function dB(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function hB(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:dB(r)},i=Xz.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Bn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function fB(t,e=HA,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Bn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Bn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new gB;return setTimeout(async()=>{a.abort()},Yz),qA({appId:r,apiKey:s,measurementId:i},o,a,e)}async function qA(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=HA){var i;const{appId:o,measurementId:a}=t;try{await mB(r,e)}catch(l){if(a)return fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await hB(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!pB(c)){if(s.deleteThrottleMetadata(o),a)return fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?x1(n,s.intervalMillis,lB):x1(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,h),fn.debug(`Calling attemptFetch again in ${u} millis`),qA(t,h,r,s)}}function mB(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Bn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function pB(t){if(!(t instanceof dr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class gB{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function yB(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vB(){if(yP())try{await vP()}catch(t){return fn.warn(Bn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return fn.warn(Bn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function xB(t,e,n,r,s,i,o){var a;const l=fB(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&fn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>fn.error(p)),e.push(l);const c=vB().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([l,c]);aB(i)||tB(i,u.measurementId),s("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[Qz]="firebase",m.update=!0,h!=null&&(m[Kz]=h),s("config",u.measurementId,m),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e){this.app=e}_delete(){return delete mc[this.app.options.appId],Promise.resolve()}}let mc={},zk=[];const Bk={};let vg="dataLayer",_B="gtag",$k,GA,Wk=!1;function bB(){const t=[];if(gP()&&t.push("This is a browser extension environment."),DV()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Bn.create("invalid-analytics-context",{errorInfo:e});fn.warn(n.message)}}function kB(t,e,n){bB();const r=t.options.appId;if(!r)throw Bn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Bn.create("no-api-key");if(mc[r]!=null)throw Bn.create("already-exists",{id:r});if(!Wk){nB(vg);const{wrappedGtag:i,gtagCore:o}=oB(mc,zk,Bk,vg,_B);GA=i,$k=o,Wk=!0}return mc[r]=xB(t,zk,Bk,e,$k,vg,n),new wB(t)}function TB(t,e,n,r){t=Je(t),yB(GA,mc[t.app.options.appId],e,n,r).catch(s=>fn.error(s))}const Hk="@firebase/analytics",qk="0.10.8";function SB(){Dr(new lr(Uk,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return kB(r,s,n)},"PUBLIC")),Dr(new lr("analytics-internal",t,"PRIVATE")),zn(Hk,qk),zn(Hk,qk,"esm2017");function t(e){try{const n=e.getProvider(Uk).getImmediate();return{logEvent:(r,s,i)=>TB(n,r,s,i)}}catch(n){throw Bn.create("interop-component-reg-failed",{reason:n})}}}SB();const EB={apiKey:"AIzaSyBMgyg_KLqvZIxViT_qzgxtEHHEp8dkbGU",authDomain:"omnitask-9aceb.firebaseapp.com",projectId:"omnitask-9aceb",storageBucket:"omnitask-9aceb.firebasestorage.app",messagingSenderId:"531435434202",appId:"1:531435434202:web:34a8a4c9f59a661665b5e3",measurementId:"G-RD63ZQPQT2"},KA=bP(EB),$o=l6(KA),oe=K9(KA),CB=new Gr,PB=new Kr;let Oi=null,Li=null;const xg={theme:"dark",language:"fr",notifications:{enabled:!0,dailyReminder:!0,dailyReminderTime:"09:00",achievementUnlock:!0,streakWarning:!0,weeklyReport:!0},sound:{enabled:!0,volume:.7,taskComplete:!0,levelUp:!0,achievementUnlock:!0},privacy:{publicProfile:!1,showStats:!0,showAchievements:!0}},wg={type:"default",baseColor:"#6366f1",icon:""},Rd=t=>({userId:t,level:1,currentXP:0,totalXP:0,xpToNextLevel:Jy,currentStreak:0,longestStreak:0,lastCompletedDate:null,tasksCompleted:0,tasksCreated:0,tasksFailed:0,totalFocusTime:0,averageTaskTime:0,categoryStats:{},achievementPoints:0,achievementsUnlocked:[],coins:100,gems:10,dailyXP:0,weeklyXP:0,dailyTasksCompleted:0,weeklyTasksCompleted:0,lastDailyReset:new Date().toISOString(),lastWeeklyReset:new Date().toISOString()}),he=ym()(vm((t,e)=>({user:null,firebaseUser:null,gameStats:null,isLoading:!0,isInitialized:!1,isDemo:!1,error:null,initializeAuth:async()=>e().initialize(),initialize:async()=>{const n=e();return n.isDemo&&n.user?(t({isLoading:!1,isInitialized:!0}),Promise.resolve()):new Promise(r=>{try{const s=XF($o,async i=>{if(Oi&&(Oi(),Oi=null),Li&&(Li(),Li=null),i)try{const o=await jk(de(oe,"users",i.uid)),a=await jk(de(oe,"gameStats",i.uid));if(!o.exists()){const l={id:i.uid,email:i.email||"",username:i.displayName||`User_${i.uid.slice(0,6)}`,avatar:wg,createdAt:new Date,lastLoginAt:new Date,settings:xg},c=Rd(i.uid);await Gs(de(oe,"users",i.uid),l),await Gs(de(oe,"gameStats",i.uid),c)}Oi=Tf(de(oe,"users",i.uid),l=>{l.exists()&&(console.log("[Auth] User data updated in real-time"),t({user:l.data()}))},l=>console.error("[Auth] User listener error:",l)),Li=Tf(de(oe,"gameStats",i.uid),l=>{l.exists()&&(console.log("[Auth] GameStats updated in real-time"),t({gameStats:l.data()}))},l=>console.error("[Auth] GameStats listener error:",l)),t({user:o.exists()?o.data():null,gameStats:a.exists()?a.data():Rd(i.uid),firebaseUser:i,isLoading:!1,isInitialized:!0})}catch(o){console.error("Error loading user data:",o),t({isLoading:!1,isInitialized:!0,error:"Failed to load user data"})}else t({user:null,gameStats:null,firebaseUser:null,isLoading:!1,isInitialized:!0});r()})}catch{console.warn("Firebase auth not configured, demo mode available"),t({isLoading:!1,isInitialized:!0}),r()}})},signInWithEmail:async(n,r)=>{t({isLoading:!0,error:null});try{await KF($o,n,r)}catch(s){const i=s instanceof Error?s.message:"Sign in failed";throw t({error:i,isLoading:!1}),s}},signUpWithEmail:async(n,r,s)=>{t({isLoading:!0,error:null});try{const i=await GF($o,n,r),o={id:i.user.uid,email:n,username:s,avatar:wg,createdAt:new Date,lastLoginAt:new Date,settings:xg},a=Rd(i.user.uid);await Gs(de(oe,"users",i.user.uid),o),await Gs(de(oe,"gameStats",i.user.uid),a),t({user:o,gameStats:a,firebaseUser:i.user})}catch(i){const o=i instanceof Error?i.message:"Sign up failed";throw t({error:o,isLoading:!1}),i}},signInWithGoogle:async()=>{t({isLoading:!0,error:null});try{await U1($o,CB)}catch(n){const r=n instanceof Error?n.message:"Google sign in failed";throw t({error:r,isLoading:!1}),n}},signInWithGithub:async()=>{t({isLoading:!0,error:null});try{await U1($o,PB)}catch(n){const r=n instanceof Error?n.message:"GitHub sign in failed";throw t({error:r,isLoading:!1}),n}},signInDemo:async()=>{t({isLoading:!0,error:null});const n=`demo_${Us()}`,r={id:n,email:"demo@questify.app",username:"DemoHero",avatar:wg,createdAt:new Date,lastLoginAt:new Date,settings:xg},s=Rd(n);s.coins=500,s.gems=50,t({user:r,gameStats:s,firebaseUser:null,isLoading:!1,isInitialized:!0,isDemo:!0})},signOut:async()=>{const{isDemo:n}=e();try{Oi&&(Oi(),Oi=null),Li&&(Li(),Li=null);const{useTaskStore:r}=await Wr(async()=>{const{useTaskStore:i}=await Promise.resolve().then(()=>RB);return{useTaskStore:i}},void 0),{useQuestStore:s}=await Wr(async()=>{const{useQuestStore:i}=await Promise.resolve().then(()=>wh);return{useQuestStore:i}},void 0);r.getState().unsubscribeFromTasks(),s.getState().unsubscribeFromQuests(),n||await JF($o),t({user:null,gameStats:null,firebaseUser:null,isDemo:!1})}catch(r){const s=r instanceof Error?r.message:"Sign out failed";throw t({error:s}),r}},deleteAccount:async()=>{const{firebaseUser:n,user:r,isDemo:s}=e();if(r){if(s){t({user:null,gameStats:null,firebaseUser:null,isDemo:!1});return}if(n)try{await Promise.all([Ze(de(oe,"users",r.id),{deleted:!0}),Ze(de(oe,"gameStats",r.id),{deleted:!0})]),await n.delete(),t({user:null,gameStats:null,firebaseUser:null})}catch(i){const o=i instanceof Error?i.message:"Delete account failed";throw t({error:o}),i}}},updateProfile:async n=>{const{user:r,isDemo:s}=e();if(!r)return;const i={...r,...n};s||await Ze(de(oe,"users",r.id),n),t({user:i})},updateSettings:async n=>{const{user:r,isDemo:s}=e();if(!r)return;const i={...r.settings,...n};s||await Ze(de(oe,"users",r.id),{settings:i}),t({user:{...r,settings:i}})},updateAvatar:async n=>{const{user:r,isDemo:s}=e();r&&(s||await Ze(de(oe,"users",r.id),{avatar:n}),t({user:{...r,avatar:n}}))},calculateXPForLevel:n=>Math.floor(Jy*Math.pow(mV,n-1)),calculateLevel:n=>{let r=1,s=Jy,i=0;for(;i+s<=n;)i+=s,r++,s=e().calculateXPForLevel(r);return{level:r,currentXP:n-i,xpToNextLevel:s}},getStreakBonus:()=>{const{gameStats:n}=e();if(!n)return 0;const r=n.currentStreak;let s=0;for(const{days:i,bonus:o}of gV)r>=i&&(s=o);return s},addXP:async n=>{const{gameStats:r,user:s,isDemo:i,getStreakBonus:o,calculateLevel:a}=e();if(!r||!s)return{leveledUp:!1,newLevel:0};const l=o(),c=Math.floor(n*l),u=n+c,h=r.totalXP+u,{level:m,currentXP:p,xpToNextLevel:g}=a(h),v=m>r.level,_={totalXP:h,level:m,currentXP:p,xpToNextLevel:g,dailyXP:r.dailyXP+u,weeklyXP:r.weeklyXP+u};if(i||await Ze(de(oe,"gameStats",s.id),_),t({gameStats:{...r,..._}}),v){const{ACHIEVEMENTS:x}=await Wr(async()=>{const{ACHIEVEMENTS:C}=await Promise.resolve().then(()=>kh);return{ACHIEVEMENTS:C}},void 0),b=e().gameStats;if(b)for(const C of x)C.requirement.type==="level"&&m>=C.requirement.value&&!b.achievementsUnlocked.includes(C.id)&&await e().unlockAchievement(C.id)}const{useQuestStore:w}=await Wr(async()=>{const{useQuestStore:x}=await Promise.resolve().then(()=>wh);return{useQuestStore:x}},void 0);return await w.getState().checkAndUpdateQuests("xp_gained",{amount:u}),{leveledUp:v,newLevel:m}},updateStreak:async()=>{const{gameStats:n,user:r,isDemo:s}=e();if(!n||!r)return;const i=new Date().toISOString().split("T")[0],o=n.lastCompletedDate;let a=n.currentStreak;if(!o)a=1;else{const m=new Date(o),p=new Date(i),g=Math.floor((p.getTime()-m.getTime())/(1e3*60*60*24));g===0||(g===1?a+=1:a=1)}const l={currentStreak:a,longestStreak:Math.max(a,n.longestStreak),lastCompletedDate:i};s||await Ze(de(oe,"gameStats",r.id),l),t({gameStats:{...n,...l}});const{ACHIEVEMENTS:c}=await Wr(async()=>{const{ACHIEVEMENTS:m}=await Promise.resolve().then(()=>kh);return{ACHIEVEMENTS:m}},void 0),u=e().gameStats;if(u)for(const m of c)m.requirement.type==="streak"&&a>=m.requirement.value&&!u.achievementsUnlocked.includes(m.id)&&await e().unlockAchievement(m.id);const{useQuestStore:h}=await Wr(async()=>{const{useQuestStore:m}=await Promise.resolve().then(()=>wh);return{useQuestStore:m}},void 0);await h.getState().checkAndUpdateQuests("streak_updated",{streak:a})},incrementStat:async(n,r=1)=>{const{gameStats:s,user:i,isDemo:o}=e();if(!s||!i)return;const a=s[n];if(typeof a!="number")return;const l={[n]:a+r};o||await Ze(de(oe,"gameStats",i.id),l),t({gameStats:{...s,...l}})},addCoins:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s)return;const o={coins:r.coins+n};i||await Ze(de(oe,"gameStats",s.id),o),t({gameStats:{...r,...o}})},addGems:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s)return;const o={gems:r.gems+n};i||await Ze(de(oe,"gameStats",s.id),o),t({gameStats:{...r,...o}})},spendCoins:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s||r.coins<n)return!1;const o={coins:r.coins-n};return i||await Ze(de(oe,"gameStats",s.id),o),t({gameStats:{...r,...o}}),!0},spendGems:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s||r.gems<n)return!1;const o={gems:r.gems-n};return i||await Ze(de(oe,"gameStats",s.id),o),t({gameStats:{...r,...o}}),!0},unlockAchievement:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s||r.achievementsUnlocked.includes(n))return;const{ACHIEVEMENTS:o}=await Wr(async()=>{const{ACHIEVEMENTS:c}=await Promise.resolve().then(()=>kh);return{ACHIEVEMENTS:c}},void 0),a=o.find(c=>c.id===n),l={achievementsUnlocked:[...r.achievementsUnlocked,n],...a?{totalXP:r.totalXP+a.xpReward,coins:r.coins+a.coinReward,achievementPoints:r.achievementPoints+a.xpReward}:{}};i||await Ze(de(oe,"gameStats",s.id),l),t({gameStats:{...r,...l}})}}),{name:"questify-auth",partialize:t=>({user:t.user,gameStats:t.gameStats,isDemo:t.isDemo})}));let Wo=null;const IB=(t,e)=>cP[t]+pV[e],AB=t=>Math.floor(cP[t]/2),Qn=ym()(vm((t,e)=>({tasks:[],categories:[],filters:{},filter:{status:"all",sortBy:"dueDate",sortDirection:"asc"},sort:{by:"dueDate",order:"asc"},isLoading:!1,selectedTask:null,setFilter:n=>{t(r=>({filter:{...r.filter,...n}}))},updateSubTask:(n,r,s)=>{const{tasks:i}=e(),o=i.find(l=>l.id===n);if(!o||!o.subtasks)return;const a=o.subtasks.map(l=>l.id===r?{...l,...s}:l);t({tasks:i.map(l=>l.id===n?{...l,subtasks:a}:l)})},loadTasks:async n=>{if(t({isLoading:!0}),he.getState().isDemo){t({isLoading:!1});return}e().subscribeToTasks(n)},subscribeToTasks:n=>{if(!he.getState().isDemo){Wo&&Wo(),t({isLoading:!0});try{const s=Jo(oe,"tasks"),i=T0(s,S0("userId","==",n));Wo=Tf(i,o=>{const a=o.docs.map(l=>{var c,u,h,m,p;return{...l.data(),id:l.id,createdAt:((c=l.data().createdAt)==null?void 0:c.toDate())||new Date,updatedAt:((u=l.data().updatedAt)==null?void 0:u.toDate())||new Date,dueDate:(h=l.data().dueDate)==null?void 0:h.toDate(),completedAt:(m=l.data().completedAt)==null?void 0:m.toDate(),startedAt:(p=l.data().startedAt)==null?void 0:p.toDate()}});console.log("[Tasks] Real-time update:",a.length,"tasks"),t({tasks:a,isLoading:!1})},o=>{console.error("[Tasks] Real-time listener error:",o),t({isLoading:!1})})}catch(s){console.error("Error setting up tasks listener:",s),t({isLoading:!1})}}},unsubscribeFromTasks:()=>{Wo&&(Wo(),Wo=null)},addTask:async n=>{var u;const r=he.getState(),s=(u=r.user)==null?void 0:u.id,i=r.isDemo;if(!s)throw new Error("User not authenticated");const{xp:o,coins:a}=e().calculateTaskRewards(n.difficulty,n.priority),l={title:n.title,description:n.description||"",difficulty:n.difficulty,priority:n.priority,status:n.status||"pending",category:n.category||"personal",recurrence:n.recurrence||"none",userId:s,createdAt:new Date,updatedAt:new Date,xpReward:o,coinReward:a,subtasks:n.subtasks||[],tags:n.tags||[],progress:0,...n.dueDate&&{dueDate:n.dueDate},...n.recurrenceConfig&&{recurrenceConfig:n.recurrenceConfig}};let c;if(i)c={...l,id:Us()},t(h=>({tasks:[...h.tasks,c]}));else{const h=await Ok(Jo(oe,"tasks"),l);c={...l,id:h.id}}try{await he.getState().incrementStat("tasksCreated")}catch(h){console.warn("Could not increment stat:",h)}return c},updateTask:async(n,r)=>{const s=he.getState().isDemo,i={updatedAt:new Date};Object.entries(r).forEach(([o,a])=>{a!==void 0&&(i[o]=a)}),s?t(o=>({tasks:o.tasks.map(a=>a.id===n?{...a,...i}:a)})):await Ze(de(oe,"tasks",n),i)},deleteTask:async n=>{var s;if(he.getState().isDemo)t(i=>{var o;return{tasks:i.tasks.filter(a=>a.id!==n),selectedTask:((o=i.selectedTask)==null?void 0:o.id)===n?null:i.selectedTask}});else try{await kf(de(oe,"tasks",n))}catch(i){console.warn("Firebase delete failed:",i)}((s=e().selectedTask)==null?void 0:s.id)===n&&t({selectedTask:null})},completeTask:async n=>{const r=e().tasks.find(a=>a.id===n);if(!r)return{xpGained:0,coinsGained:0};const s=he.getState().isDemo,o={status:"completed",completedAt:new Date,progress:100};if(s)t(a=>({tasks:a.tasks.map(l=>l.id===n?{...l,...o}:l)}));else try{await Ze(de(oe,"tasks",n),o)}catch(a){console.warn("Firebase update failed:",a)}try{const a=he.getState(),{leveledUp:l,newLevel:c}=await a.addXP(r.xpReward);await a.addCoins(r.coinReward),await a.incrementStat("tasksCompleted"),await a.incrementStat("dailyTasksCompleted"),await a.incrementStat("weeklyTasksCompleted"),await a.updateStreak();const{ACHIEVEMENTS:u}=await Wr(async()=>{const{ACHIEVEMENTS:p}=await Promise.resolve().then(()=>kh);return{ACHIEVEMENTS:p}},void 0),h=he.getState().gameStats;if(h){const p=h.tasksCompleted;for(const g of u)g.requirement.type==="tasks_completed"&&p>=g.requirement.value&&!h.achievementsUnlocked.includes(g.id)&&await a.unlockAchievement(g.id)}const{useQuestStore:m}=await Wr(async()=>{const{useQuestStore:p}=await Promise.resolve().then(()=>wh);return{useQuestStore:p}},void 0);return await m.getState().checkAndUpdateQuests("task_completed",{category:r.category,priority:r.priority,difficulty:r.difficulty}),{xpGained:r.xpReward,coinsGained:r.coinReward,leveledUp:l,newLevel:c}}catch(a){return console.warn("Error updating stats:",a),{xpGained:r.xpReward,coinsGained:r.coinReward}}},failTask:async n=>{const r=he.getState().isDemo,s={status:"failed",updatedAt:new Date};if(r)t(i=>({tasks:i.tasks.map(o=>o.id===n?{...o,...s}:o)}));else try{await Ze(de(oe,"tasks",n),s)}catch(i){console.warn("Firebase update failed:",i)}try{await he.getState().incrementStat("tasksFailed")}catch(i){console.warn("Could not increment stat:",i)}},archiveTask:async n=>{const r=he.getState().isDemo,s={status:"archived",updatedAt:new Date};r?t(i=>({tasks:i.tasks.map(o=>o.id===n?{...o,...s}:o)})):await Ze(de(oe,"tasks",n),s)},addSubtask:async(n,r)=>{const s=e().tasks.find(a=>a.id===n);if(!s)return;const i={id:Us(),title:r,completed:!1},o=[...s.subtasks,i];await e().updateTask(n,{subtasks:o})},toggleSubtask:async(n,r)=>{const s=e().tasks.find(l=>l.id===n);if(!s)return;const i=s.subtasks.map(l=>l.id===r?{...l,completed:!l.completed,completedAt:l.completed?void 0:new Date}:l),o=i.filter(l=>l.completed).length,a=Math.round(o/i.length*100);await e().updateTask(n,{subtasks:i,progress:a})},removeSubtask:async(n,r)=>{const s=e().tasks.find(l=>l.id===n);if(!s)return;const i=s.subtasks.filter(l=>l.id!==r),o=i.filter(l=>l.completed).length,a=i.length>0?Math.round(o/i.length*100):0;await e().updateTask(n,{subtasks:i,progress:a})},loadCategories:async n=>{const r=he.getState().isDemo,s=e().categories;if(!(r&&s.length>0)){if(r){const i=rg.map((o,a)=>({...o,id:Us(),userId:n,order:a}));t({categories:i});return}try{const i=Jo(oe,"categories"),o=T0(i,S0("userId","==",n),nz("order")),a=await iz(o);if(a.empty){const l=Lk(oe),c=rg.map((u,h)=>({...u,id:Us(),userId:n,order:h}));for(const u of c){const h=de(Jo(oe,"categories"));l.set(h,{...u,id:h.id}),u.id=h.id}await l.commit(),t({categories:c})}else{const l=a.docs.map(c=>({...c.data(),id:c.id}));t({categories:l})}}catch(i){console.error("Error loading categories:",i)}}},addCategory:async n=>{if(he.getState().isDemo){const o={...n,id:Us()};t(a=>({categories:[...a.categories,o]}));return}const s=await Ok(Jo(oe,"categories"),n),i={...n,id:s.id};t(o=>({categories:[...o.categories,i]}))},updateCategory:async(n,r)=>{he.getState().isDemo||await Ze(de(oe,"categories",n),r),t(i=>({categories:i.categories.map(o=>o.id===n?{...o,...r}:o)}))},deleteCategory:async n=>{he.getState().isDemo||await kf(de(oe,"categories",n)),t(s=>({categories:s.categories.filter(i=>i.id!==n)}))},setFilters:n=>{t({filters:n})},clearFilters:()=>{t({filters:{}})},setSort:n=>{t({sort:n})},selectTask:n=>{t({selectedTask:n})},getFilteredTasks:()=>{var o,a,l,c;const{tasks:n,filters:r,sort:s}=e();let i=[...n];if((o=r.status)!=null&&o.length&&(i=i.filter(u=>r.status.includes(u.status))),(a=r.priority)!=null&&a.length&&(i=i.filter(u=>r.priority.includes(u.priority))),(l=r.category)!=null&&l.length&&(i=i.filter(u=>u.category&&r.category.includes(u.category))),(c=r.tags)!=null&&c.length&&(i=i.filter(u=>u.tags.some(h=>r.tags.includes(h)))),r.search){const u=r.search.toLowerCase();i=i.filter(h=>{var m;return h.title.toLowerCase().includes(u)||((m=h.description)==null?void 0:m.toLowerCase().includes(u))})}if(r.dueDate){const u=new Date;u.setHours(0,0,0,0);const h=new Date(u);h.setDate(h.getDate()+7);const m=new Date(u);switch(m.setMonth(m.getMonth()+1),r.dueDate){case"today":i=i.filter(p=>p.dueDate&&new Date(p.dueDate).toDateString()===u.toDateString());break;case"week":i=i.filter(p=>p.dueDate&&new Date(p.dueDate)<=h);break;case"month":i=i.filter(p=>p.dueDate&&new Date(p.dueDate)<=m);break;case"overdue":i=i.filter(p=>p.dueDate&&new Date(p.dueDate)<u&&p.status!=="completed");break;case"no_date":i=i.filter(p=>!p.dueDate);break}}return i.sort((u,h)=>{let m=0;switch(s.by){case"dueDate":!u.dueDate&&!h.dueDate?m=0:u.dueDate?h.dueDate?m=new Date(u.dueDate).getTime()-new Date(h.dueDate).getTime():m=-1:m=1;break;case"priority":const p={critical:0,high:1,medium:2,low:3,none:4};m=(p[u.priority]||4)-(p[h.priority]||4);break;case"createdAt":m=new Date(u.createdAt).getTime()-new Date(h.createdAt).getTime();break;case"xpReward":m=u.xpReward-h.xpReward;break;case"title":m=u.title.localeCompare(h.title);break;case"difficulty":const g={trivial:0,easy:1,medium:2,hard:3,epic:4,legendary:5};m=g[u.difficulty]-g[h.difficulty];break}return s.order==="asc"?m:-m}),i},getTasksByStatus:n=>e().tasks.filter(r=>r.status===n),getTasksByCategory:n=>e().tasks.filter(r=>r.category===n),getTodayTasks:()=>{const n=new Date;n.setHours(0,0,0,0);const r=new Date(n);return r.setDate(r.getDate()+1),e().tasks.filter(s=>s.dueDate&&new Date(s.dueDate)>=n&&new Date(s.dueDate)<r&&s.status!=="completed"&&s.status!=="archived")},getOverdueTasks:()=>{const n=new Date;return n.setHours(0,0,0,0),e().tasks.filter(r=>r.dueDate&&new Date(r.dueDate)<n&&r.status!=="completed"&&r.status!=="archived")},calculateTaskRewards:(n,r)=>({xp:IB(n,r),coins:AB(n)}),exportData:()=>{const{tasks:n,categories:r}=e();return{tasks:n,categories:r,exportedAt:new Date().toISOString(),version:"1.0.0"}},importData:n=>{n.tasks&&Array.isArray(n.tasks)&&t({tasks:n.tasks}),n.categories&&Array.isArray(n.categories)&&t({categories:n.categories})},clearAllData:()=>{t({tasks:[],categories:rg.map((n,r)=>({...n,id:`default-${r}`,userId:"",createdAt:new Date().toISOString()}))})},bulkDeleteTasks:async n=>{const r=he.getState().isDemo;let s=0;if(r)t(i=>{var o;return{tasks:i.tasks.filter(a=>!n.includes(a.id)),selectedTask:n.includes(((o=i.selectedTask)==null?void 0:o.id)||"")?null:i.selectedTask}}),s=n.length;else try{const i=Lk(oe);n.forEach(o=>{i.delete(de(oe,"tasks",o))}),await i.commit(),s=n.length}catch(i){console.warn("Firebase bulk delete failed:",i)}return s},deleteTasksByDateRange:async(n,r)=>{const i=e().tasks.filter(a=>{if(!a.dueDate)return!1;const l=new Date(a.dueDate);l.setHours(0,0,0,0);const c=new Date(n);c.setHours(0,0,0,0);const u=new Date(r);return u.setHours(23,59,59,999),l>=c&&l<=u});if(i.length===0)return 0;const o=i.map(a=>a.id);return await e().bulkDeleteTasks(o)},getTasksCountByDateRange:(n,r)=>e().tasks.filter(i=>{if(!i.dueDate)return!1;const o=new Date(i.dueDate);o.setHours(0,0,0,0);const a=new Date(n);a.setHours(0,0,0,0);const l=new Date(r);return l.setHours(23,59,59,999),o>=a&&o<=l}).length}),{name:"questify-tasks",partialize:t=>({filters:t.filters,sort:t.sort,tasks:t.tasks,categories:t.categories})})),RB=Object.freeze(Object.defineProperty({__proto__:null,useTaskStore:Qn},Symbol.toStringTag,{value:"Module"})),hr=ym()(vm(t=>({sidebarOpen:!0,toggleSidebar:()=>t(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarOpen:e=>t({sidebarOpen:e}),isTaskModalOpen:!1,isSettingsModalOpen:!1,isProfileModalOpen:!1,isAchievementModalOpen:!1,isLevelUpModalOpen:!1,newLevel:0,openTaskModal:()=>t({isTaskModalOpen:!0}),closeTaskModal:()=>t({isTaskModalOpen:!1,editingTask:null}),openSettingsModal:()=>t({isSettingsModalOpen:!0}),closeSettingsModal:()=>t({isSettingsModalOpen:!1}),openProfileModal:()=>t({isProfileModalOpen:!0}),closeProfileModal:()=>t({isProfileModalOpen:!1}),openAchievementModal:()=>t({isAchievementModalOpen:!0}),closeAchievementModal:()=>t({isAchievementModalOpen:!1}),showLevelUp:e=>t({isLevelUpModalOpen:!0,newLevel:e}),hideLevelUp:()=>t({isLevelUpModalOpen:!1}),editingTask:null,setEditingTask:e=>t({editingTask:e}),xpGained:null,coinsGained:null,showXPGain:e=>t({xpGained:e}),showCoinsGain:e=>t({coinsGained:e}),hideGains:()=>t({xpGained:null,coinsGained:null}),unlockedAchievement:null,showAchievementUnlock:e=>t({unlockedAchievement:e}),hideAchievementUnlock:()=>t({unlockedAchievement:null}),viewMode:"list",setViewMode:e=>t({viewMode:e}),isMobile:!1,setIsMobile:e=>t({isMobile:e}),theme:"dark",setTheme:e=>t({theme:e}),accentColor:"teal",setAccentColor:e=>t({accentColor:e}),soundEnabled:!0,toggleSound:()=>t(e=>({soundEnabled:!e.soundEnabled})),notificationsEnabled:!0,toggleNotifications:()=>t(e=>({notificationsEnabled:!e.notificationsEnabled}))}),{name:"questify-ui",partialize:t=>({sidebarOpen:t.sidebarOpen,viewMode:t.viewMode,theme:t.theme,accentColor:t.accentColor,soundEnabled:t.soundEnabled,notificationsEnabled:t.notificationsEnabled})})),NB=[{id:"daily_complete_3",type:"daily",title:"Mise en Route",description:"Compltez 3 tches aujourd'hui",icon:"",objectives:[{description:"Complter 3 tches",type:"complete_tasks",target:3}],rewards:{xp:50,coins:20}},{id:"daily_complete_5",type:"daily",title:"Productivit",description:"Compltez 5 tches aujourd'hui",icon:"",objectives:[{description:"Complter 5 tches",type:"complete_tasks",target:5}],rewards:{xp:100,coins:40}},{id:"daily_xp_100",type:"daily",title:"Chasseur d'XP",description:"Gagnez 100 XP aujourd'hui",icon:"",objectives:[{description:"Gagner 100 XP",type:"earn_xp",target:100}],rewards:{xp:25,coins:30}},{id:"daily_high_priority",type:"daily",title:"Priorits",description:"Compltez 2 tches haute priorit",icon:"",objectives:[{description:"Complter 2 tches haute priorit",type:"complete_priority",target:2,priority:"high"}],rewards:{xp:75,coins:35}},{id:"daily_work",type:"daily",title:"Boss du Boulot",description:"Compltez 3 tches de travail",icon:"",objectives:[{description:"Complter 3 tches de travail",type:"complete_category",target:3,category:"Travail"}],rewards:{xp:75,coins:30}},{id:"daily_personal",type:"daily",title:"Temps Personnel",description:"Compltez 2 tches personnelles",icon:"",objectives:[{description:"Complter 2 tches personnelles",type:"complete_category",target:2,category:"Personnel"}],rewards:{xp:50,coins:25}},{id:"daily_health",type:"daily",title:"Vie Saine",description:"Compltez 2 tches sant",icon:"",objectives:[{description:"Complter 2 tches sant",type:"complete_category",target:2,category:"Sant"}],rewards:{xp:50,coins:25}},{id:"daily_variety",type:"daily",title:"Diversit",description:"Compltez des tches dans 3 catgories diffrentes",icon:"",objectives:[{description:"Tche de travail",type:"complete_category",target:1,category:"Travail"},{description:"Tche personnelle",type:"complete_category",target:1,category:"Personnel"},{description:"Tche sant",type:"complete_category",target:1,category:"Sant"}],rewards:{xp:100,coins:50}}],DB=[{id:"weekly_complete_20",type:"weekly",title:"Travailleur Acharn",description:"Compltez 20 tches cette semaine",icon:"",objectives:[{description:"Complter 20 tches",type:"complete_tasks",target:20}],rewards:{xp:300,coins:150,gems:5}},{id:"weekly_complete_35",type:"weekly",title:"Machine de Productivit",description:"Compltez 35 tches cette semaine",icon:"",objectives:[{description:"Complter 35 tches",type:"complete_tasks",target:35}],rewards:{xp:500,coins:250,gems:10}},{id:"weekly_xp_500",type:"weekly",title:"Accumulateur d'XP",description:"Gagnez 500 XP cette semaine",icon:"",objectives:[{description:"Gagner 500 XP",type:"earn_xp",target:500}],rewards:{xp:100,coins:100,gems:3}},{id:"weekly_streak_7",type:"weekly",title:"Constance",description:"Maintenez un streak de 7 jours",icon:"",objectives:[{description:"Streak de 7 jours",type:"maintain_streak",target:7}],rewards:{xp:250,coins:125,gems:5}},{id:"weekly_all_categories",type:"weekly",title:"quilibre de Vie",description:"Compltez des tches dans toutes les catgories",icon:"",objectives:[{description:"Tche de travail",type:"complete_category",target:3,category:"Travail"},{description:"Tche personnelle",type:"complete_category",target:3,category:"Personnel"},{description:"Tche sant",type:"complete_category",target:2,category:"Sant"},{description:"Tche tudes",type:"complete_category",target:2,category:"tudes"},{description:"Tche loisirs",type:"complete_category",target:2,category:"Loisirs"}],rewards:{xp:400,coins:200,gems:8}},{id:"weekly_critical",type:"weekly",title:"Gestion de Crise",description:"Compltez 5 tches critiques",icon:"",objectives:[{description:"Complter 5 tches critiques",type:"complete_priority",target:5,priority:"critical"}],rewards:{xp:350,coins:175,gems:7}}],QA=(t,e)=>[...t].sort(()=>.5-Math.random()).slice(0,e),Gk=()=>QA(NB,3),Kk=()=>QA(DB,2);let Ho=null;const Nd=(t,e)=>{const n=new Date,r=new Date;return t.type==="daily"?r.setHours(23,59,59,999):t.type==="weekly"?(r.setDate(r.getDate()+(7-r.getDay())),r.setHours(23,59,59,999)):r.setDate(r.getDate()+30),{id:Us(),userId:e,type:t.type,title:t.title,description:t.description,icon:t.icon,objectives:t.objectives.map(s=>({id:Us(),description:s.description,type:s.type,target:s.target,current:0,completed:!1,category:s.category,priority:s.priority})),rewards:t.rewards,startDate:n,endDate:r,completed:!1,claimed:!1}},Lu=ym()(vm((t,e)=>({quests:[],isLoading:!1,lastDailyRefresh:null,lastWeeklyRefresh:null,get dailyQuests(){return e().getDailyQuests()},get weeklyQuests(){return e().getWeeklyQuests()},loadQuests:async n=>{t({isLoading:!0});const r=he.getState().isDemo,s=new Date;s.setHours(0,0,0,0);const i=new Date(s),o=i.getDay(),a=o===0?6:o-1;if(i.setDate(i.getDate()-a),console.log("[Quests] Loading quests for user:",n),r){const l=e().quests.filter(h=>h.userId===n),c=l.some(h=>h.type==="daily"&&new Date(h.startDate).toDateString()===s.toDateString()),u=l.some(h=>h.type==="weekly"&&new Date(h.startDate)>=i);console.log("[Quests] Has valid daily quests:",c,"Has valid weekly:",u),t({isLoading:!1}),(!c||!u)&&(console.log("[Quests] Generating new quests (demo mode)"),await e().generateNewQuests(n));return}e().subscribeToQuests(n)},subscribeToQuests:n=>{if(!he.getState().isDemo){Ho&&Ho(),t({isLoading:!0});try{const s=Jo(oe,"quests"),i=T0(s,S0("userId","==",n));Ho=Tf(i,async o=>{console.log("[Quests] Real-time update:",o.docs.length,"quests");const a=o.docs.map(g=>{var _,w,x;const v=g.data();return{...v,id:g.id,startDate:(_=v.startDate)!=null&&_.toDate?v.startDate.toDate():new Date(v.startDate),endDate:(w=v.endDate)!=null&&w.toDate?v.endDate.toDate():new Date(v.endDate),completedAt:(x=v.completedAt)!=null&&x.toDate?v.completedAt.toDate():v.completedAt?new Date(v.completedAt):void 0}}),l=new Date;l.setHours(0,0,0,0);const c=a.some(g=>g.type==="daily"&&new Date(g.startDate).toDateString()===l.toDateString()),u=new Date(l),h=u.getDay(),m=h===0?6:h-1;u.setDate(u.getDate()-m);const p=a.some(g=>g.type==="weekly"&&new Date(g.startDate)>=u);t({quests:a,isLoading:!1}),(a.length===0||!c&&!p)&&(console.log("[Quests] Firebase - Generating new quests"),await e().generateNewQuests(n))},o=>{console.error("[Quests] Real-time listener error:",o),t({isLoading:!1})})}catch(s){console.error("[Quests] Error setting up quests listener:",s),t({isLoading:!1})}}},unsubscribeFromQuests:()=>{Ho&&(Ho(),Ho=null)},generateNewQuests:async n=>{const{quests:r}=e(),s=he.getState().isDemo,i=new Date;i.setHours(0,0,0,0);const o=i.toISOString().split("T")[0],a=new Date(i),l=a.getDay(),c=l===0?6:l-1;a.setDate(a.getDate()-c);const u=a.toISOString().split("T")[0];console.log("[Quests] Generating new quests for user:",n,"isDemo:",s);const h=r.filter(w=>new Date(w.endDate)<i||w.claimed);if(!s)for(const w of h)try{await kf(de(oe,"quests",w.id))}catch(x){console.warn("[Quests] Error deleting quest (continuing anyway):",x)}let m=r.filter(w=>new Date(w.endDate)>=i&&!w.claimed&&w.userId===n);const p=m.some(w=>w.type==="daily"&&new Date(w.startDate).toDateString()===i.toDateString());let g=!1;if(!p){console.log("[Quests] Generating new daily quests"),m=m.filter(x=>x.type!=="daily");const w=Gk();for(const x of w){const b=Nd(x,n);if(!s)try{await Gs(de(oe,"quests",b.id),b)}catch(C){console.warn("[Quests] Error saving quest to Firebase (continuing anyway):",C)}m.push(b)}g=!0}const v=m.some(w=>w.type==="weekly"&&new Date(w.startDate)>=a);let _=!1;if(!v){console.log("[Quests] Generating new weekly quests"),m=m.filter(x=>x.type!=="weekly");const w=Kk();for(const x of w){const b=Nd(x,n);if(!s)try{await Gs(de(oe,"quests",b.id),b)}catch(C){console.warn("[Quests] Error saving weekly quest to Firebase (continuing anyway):",C)}m.push(b)}_=!0}console.log("[Quests] Valid quests after refresh:",m.length),t({quests:m,lastDailyRefresh:g?o:e().lastDailyRefresh||o,lastWeeklyRefresh:_?u:e().lastWeeklyRefresh||u})},forceRegenerateQuests:async n=>{const r=he.getState().isDemo;console.log("[Quests] Force regenerating all quests for user:",n,"isDemo:",r);const{quests:s}=e();if(!r)for(const g of s)try{await kf(de(oe,"quests",g.id))}catch(v){console.warn("[Quests] Error deleting quest (continuing anyway):",v)}t({quests:[],lastDailyRefresh:null,lastWeeklyRefresh:null});const i=new Date;i.setHours(0,0,0,0);const o=i.toISOString().split("T")[0],a=new Date(i),l=a.getDay(),c=l===0?6:l-1;a.setDate(a.getDate()-c);const u=a.toISOString().split("T")[0],h=[],m=Gk();for(const g of m){const v=Nd(g,n);if(!r)try{await Gs(de(oe,"quests",v.id),v)}catch(_){console.warn("[Quests] Error saving daily quest to Firebase (continuing anyway):",_)}h.push(v)}const p=Kk();for(const g of p){const v=Nd(g,n);if(!r)try{await Gs(de(oe,"quests",v.id),v)}catch(_){console.warn("[Quests] Error saving weekly quest to Firebase (continuing anyway):",_)}h.push(v)}console.log("[Quests] Generated",h.length,"new quests"),t({quests:h,lastDailyRefresh:o,lastWeeklyRefresh:u})},updateQuestProgress:async(n,r,s)=>{const i=e().quests.find(u=>u.id===n);if(!i)return;const o=he.getState().isDemo,a=i.objectives.map(u=>{if(u.id===r){const h=Math.min(u.current+s,u.target);return{...u,current:h,completed:h>=u.target}}return u}),l=a.every(u=>u.completed),c={objectives:a,completed:l,completedAt:l?new Date:void 0};if(!o)try{await Ze(de(oe,"quests",n),c)}catch(u){console.warn("[Quests] Error updating quest progress in Firebase:",u)}t(u=>({quests:u.quests.map(h=>h.id===n?{...h,...c}:h)}))},completeQuest:async n=>{const r=he.getState().isDemo,s={completed:!0,completedAt:new Date};if(!r)try{await Ze(de(oe,"quests",n),s)}catch(i){console.warn("[Quests] Error completing quest in Firebase:",i)}t(i=>({quests:i.quests.map(o=>o.id===n?{...o,...s}:o)}))},claimQuestRewards:async n=>{const r=e().quests.find(a=>a.id===n);if(!r||!r.completed||r.claimed)return{xp:0,coins:0};const s=he.getState().isDemo,{rewards:i}=r,o=he.getState();if(await o.addXP(i.xp),await o.addCoins(i.coins),i.gems&&await o.addGems(i.gems),!s)try{await Ze(de(oe,"quests",n),{claimed:!0})}catch(a){console.warn("[Quests] Error claiming quest in Firebase:",a)}return t(a=>({quests:a.quests.map(l=>l.id===n?{...l,claimed:!0}:l)})),i},getDailyQuests:()=>{const n=new Date;return n.setHours(0,0,0,0),e().quests.filter(r=>r.type==="daily"&&new Date(r.startDate).toDateString()===n.toDateString())},getWeeklyQuests:()=>{const n=new Date;n.setHours(0,0,0,0);const r=new Date(n),s=r.getDay(),i=s===0?6:s-1;return r.setDate(r.getDate()-i),e().quests.filter(o=>o.type==="weekly"&&new Date(o.startDate)>=r)},claimQuestReward:async n=>e().claimQuestRewards(n),refreshQuests:async()=>{const n=he.getState().user;n&&await e().loadQuests(n.id)},getActiveQuests:()=>{const n=new Date;return e().quests.filter(r=>!r.completed&&new Date(r.endDate)>=n)},getCompletedQuests:()=>e().quests.filter(n=>n.completed),checkAndUpdateQuests:async(n,r)=>{const{quests:s}=e(),i=s.filter(o=>!o.completed);console.log("[Quest Update] Action:",n,"Data:",r),console.log("[Quest Update] Active quests:",i.length);for(const o of i)for(const a of o.objectives){if(a.completed)continue;let l=0;switch(a.type){case"complete_tasks":n==="task_completed"&&(l=1,console.log("[Quest Update] Task completed, progress +1 for quest:",o.title));break;case"complete_category":n==="task_completed"&&(r==null?void 0:r.category)===a.category&&(l=1,console.log("[Quest Update] Category task completed:",r==null?void 0:r.category,"(expected:",a.category,")"));break;case"earn_xp":n==="xp_gained"&&typeof(r==null?void 0:r.amount)=="number"&&(l=r.amount,console.log("[Quest Update] XP gained:",r.amount));break;case"complete_priority":n==="task_completed"&&(r==null?void 0:r.priority)===a.priority&&(l=1,console.log("[Quest Update] Priority task completed:",r==null?void 0:r.priority,"(expected:",a.priority,")"));break;case"maintain_streak":if(n==="streak_updated"&&typeof(r==null?void 0:r.streak)=="number"){const c=Math.min(r.streak,a.target);c>a.current&&(l=c-a.current,console.log("[Quest Update] Streak updated:",r.streak))}break}l>0&&(console.log("[Quest Update] Updating objective progress:",a.description,"+",l),await e().updateQuestProgress(o.id,a.id,l))}}}),{name:"questify-quests"})),wh=Object.freeze(Object.defineProperty({__proto__:null,useQuestStore:Lu},Symbol.toStringTag,{value:"Module"})),YA=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Bm=M.createContext({}),$m=M.createContext(null),Wm=typeof document<"u",nw=Wm?M.useLayoutEffect:M.useEffect,XA=M.createContext({strict:!1}),rw=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),MB="framerAppearId",JA="data-"+rw(MB);function jB(t,e,n,r){const{visualElement:s}=M.useContext(Bm),i=M.useContext(XA),o=M.useContext($m),a=M.useContext(YA).reducedMotion,l=M.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;M.useInsertionEffect(()=>{c&&c.update(n,o)});const u=M.useRef(!!(n[JA]&&!window.HandoffComplete));return nw(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),M.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function da(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function OB(t,e,n){return M.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):da(n)&&(n.current=r))},[e])}function ru(t){return typeof t=="string"||Array.isArray(t)}function Hm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const sw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iw=["initial",...sw];function qm(t){return Hm(t.animate)||iw.some(e=>ru(t[e]))}function ZA(t){return!!(qm(t)||t.variants)}function LB(t,e){if(qm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ru(n)?n:void 0,animate:ru(r)?r:void 0}}return t.inherit!==!1?e:{}}function VB(t){const{initial:e,animate:n}=LB(t,M.useContext(Bm));return M.useMemo(()=>({initial:e,animate:n}),[Qk(e),Qk(n)])}function Qk(t){return Array.isArray(t)?t.join(" "):t}const Yk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},su={};for(const t in Yk)su[t]={isEnabled:e=>Yk[t].some(n=>!!e[n])};function FB(t){for(const e in t)su[e]={...su[e],...t[e]}}const ow=M.createContext({}),eR=M.createContext({}),UB=Symbol.for("motionComponentSymbol");function zB({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&FB(t);function i(a,l){let c;const u={...M.useContext(YA),...a,layoutId:BB(a)},{isStatic:h}=u,m=VB(a),p=r(a,h);if(!h&&Wm){m.visualElement=jB(s,p,u,e);const g=M.useContext(eR),v=M.useContext(XA).strict;m.visualElement&&(c=m.visualElement.loadFeatures(u,v,t,g))}return M.createElement(Bm.Provider,{value:m},c&&m.visualElement?M.createElement(c,{visualElement:m.visualElement,...u}):null,n(s,a,OB(p,m.visualElement,l),p,h,m.visualElement))}const o=M.forwardRef(i);return o[UB]=s,o}function BB({layoutId:t}){const e=M.useContext(ow).id;return e&&t!==void 0?e+"-"+t:t}function $B(t){function e(r,s={}){return zB(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const WB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function aw(t){return typeof t!="string"||t.includes("-")?!1:!!(WB.indexOf(t)>-1||/[A-Z]/.test(t))}const Ef={};function HB(t){Object.assign(Ef,t)}const Vu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mo=new Set(Vu);function tR(t,{layout:e,layoutId:n}){return Mo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ef[t]||t==="opacity")}const pn=t=>!!(t&&t.getVelocity),qB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},GB=Vu.length;function KB(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<GB;o++){const a=Vu[o];if(t[a]!==void 0){const l=qB[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const nR=t=>e=>typeof e=="string"&&e.startsWith(t),rR=nR("--"),C0=nR("var(--"),QB=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,YB=(t,e)=>e&&typeof t=="number"?e.transform(t):t,vi=(t,e,n)=>Math.min(Math.max(n,t),e),jo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},pc={...jo,transform:t=>vi(0,1,t)},Dd={...jo,default:1},gc=t=>Math.round(t*1e5)/1e5,Gm=/(-)?([\d]*\.?[\d])+/g,sR=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,XB=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Fu(t){return typeof t=="string"}const Uu=t=>({test:e=>Fu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rs=Uu("deg"),Ar=Uu("%"),se=Uu("px"),JB=Uu("vh"),ZB=Uu("vw"),Xk={...Ar,parse:t=>Ar.parse(t)/100,transform:t=>Ar.transform(t*100)},Jk={...jo,transform:Math.round},iR={borderWidth:se,borderTopWidth:se,borderRightWidth:se,borderBottomWidth:se,borderLeftWidth:se,borderRadius:se,radius:se,borderTopLeftRadius:se,borderTopRightRadius:se,borderBottomRightRadius:se,borderBottomLeftRadius:se,width:se,maxWidth:se,height:se,maxHeight:se,size:se,top:se,right:se,bottom:se,left:se,padding:se,paddingTop:se,paddingRight:se,paddingBottom:se,paddingLeft:se,margin:se,marginTop:se,marginRight:se,marginBottom:se,marginLeft:se,rotate:Rs,rotateX:Rs,rotateY:Rs,rotateZ:Rs,scale:Dd,scaleX:Dd,scaleY:Dd,scaleZ:Dd,skew:Rs,skewX:Rs,skewY:Rs,distance:se,translateX:se,translateY:se,translateZ:se,x:se,y:se,z:se,perspective:se,transformPerspective:se,opacity:pc,originX:Xk,originY:Xk,originZ:se,zIndex:Jk,fillOpacity:pc,strokeOpacity:pc,numOctaves:Jk};function lw(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const h in e){const m=e[h];if(rR(h)){i[h]=m;continue}const p=iR[h],g=YB(m,p);if(Mo.has(h)){if(l=!0,o[h]=g,!u)continue;m!==(p.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,a[h]=g):s[h]=g}if(e.transform||(l||r?s.transform=KB(t.transform,n,u,r):s.transform&&(s.transform="none")),c){const{originX:h="50%",originY:m="50%",originZ:p=0}=a;s.transformOrigin=`${h} ${m} ${p}`}}const cw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function oR(t,e,n){for(const r in e)!pn(e[r])&&!tR(r,n)&&(t[r]=e[r])}function e$({transformTemplate:t},e,n){return M.useMemo(()=>{const r=cw();return lw(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function t$(t,e,n){const r=t.style||{},s={};return oR(s,r,t),Object.assign(s,e$(t,e,n)),t.transformValues?t.transformValues(s):s}function n$(t,e,n){const r={},s=t$(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const r$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||r$.has(t)}let aR=t=>!Cf(t);function s$(t){t&&(aR=e=>e.startsWith("on")?!Cf(e):t(e))}try{s$(require("@emotion/is-prop-valid").default)}catch{}function i$(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(aR(s)||n===!0&&Cf(s)||!e&&!Cf(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function Zk(t,e,n){return typeof t=="string"?t:se.transform(e+n*t)}function o$(t,e,n){const r=Zk(e,t.x,t.width),s=Zk(n,t.y,t.height);return`${r} ${s}`}const a$={offset:"stroke-dashoffset",array:"stroke-dasharray"},l$={offset:"strokeDashoffset",array:"strokeDasharray"};function c$(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?a$:l$;t[i.offset]=se.transform(-r);const o=se.transform(e),a=se.transform(n);t[i.array]=`${o} ${a}`}function uw(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h,m){if(lw(t,c,u,m),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g,dimensions:v}=t;p.transform&&(v&&(g.transform=p.transform),delete p.transform),v&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=o$(v,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&c$(p,o,a,l,!1)}const lR=()=>({...cw(),attrs:{}}),dw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function u$(t,e,n,r){const s=M.useMemo(()=>{const i=lR();return uw(i,e,{enableHardwareAcceleration:!1},dw(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};oR(i,t.style,t),s.style={...i,...s.style}}return s}function d$(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(aw(n)?u$:n$)(r,i,o,n),u={...i$(r,typeof n=="string",t),...l,ref:s},{children:h}=r,m=M.useMemo(()=>pn(h)?h.get():h,[h]);return M.createElement(n,{...u,children:m})}}function cR(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const uR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dR(t,e,n,r){cR(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(uR.has(s)?s:rw(s),e.attrs[s])}function hw(t,e){const{style:n}=t,r={};for(const s in n)(pn(n[s])||e.style&&pn(e.style[s])||tR(s,t))&&(r[s]=n[s]);return r}function hR(t,e){const n=hw(t,e);for(const r in t)if(pn(t[r])||pn(e[r])){const s=Vu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function fw(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function fR(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const Pf=t=>Array.isArray(t),h$=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),f$=t=>Pf(t)?t[t.length-1]||0:t;function _h(t){const e=pn(t)?t.get():t;return h$(e)?e.toValue():e}function m$({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:p$(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const mR=t=>(e,n)=>{const r=M.useContext(Bm),s=M.useContext($m),i=()=>m$(t,e,r,s);return n?i():fR(i)};function p$(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=_h(i[m]);let{initial:o,animate:a}=t;const l=qm(t),c=ZA(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;return h&&typeof h!="boolean"&&!Hm(h)&&(Array.isArray(h)?h:[h]).forEach(p=>{const g=fw(t,p);if(!g)return;const{transitionEnd:v,transition:_,...w}=g;for(const x in w){let b=w[x];if(Array.isArray(b)){const C=u?b.length-1:0;b=b[C]}b!==null&&(s[x]=b)}for(const x in v)s[x]=v[x]}),s}const nt=t=>t;class eT{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function g$(t){let e=new eT,n=new eT,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const h=u&&s,m=h?e:n;return c&&o.add(l),m.add(l)&&h&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];u(l),o.has(u)&&(a.schedule(u),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const Md=["prepare","read","update","preRender","render","postRender"],y$=40;function v$(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Md.reduce((h,m)=>(h[m]=g$(()=>n=!0),h),{}),o=h=>i[h].process(s),a=()=>{const h=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(h-s.timestamp,y$),1),s.timestamp=h,s.isProcessing=!0,Md.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:Md.reduce((h,m)=>{const p=i[m];return h[m]=(g,v=!1,_=!1)=>(n||l(),p.schedule(g,v,_)),h},{}),cancel:h=>Md.forEach(m=>i[m].cancel(h)),state:s,steps:i}}const{schedule:Me,cancel:ys,state:Ot,steps:_g}=v$(typeof requestAnimationFrame<"u"?requestAnimationFrame:nt,!0),x$={useVisualState:mR({scrapeMotionValuesFromProps:hR,createRenderState:lR,onMount:(t,e,{renderState:n,latestValues:r})=>{Me.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Me.render(()=>{uw(n,r,{enableHardwareAcceleration:!1},dw(e.tagName),t.transformTemplate),dR(e,n)})}})},w$={useVisualState:mR({scrapeMotionValuesFromProps:hw,createRenderState:cw})};function _$(t,{forwardMotionProps:e=!1},n,r){return{...aw(t)?x$:w$,preloadedFeatures:n,useRender:d$(e),createVisualElement:r,Component:t}}function es(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const pR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Km(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const b$=t=>e=>pR(e)&&t(e,Km(e));function os(t,e,n,r){return es(t,e,b$(n),r)}const k$=(t,e)=>n=>e(t(n)),ui=(...t)=>t.reduce(k$);function gR(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const tT=gR("dragHorizontal"),nT=gR("dragVertical");function yR(t){let e=!1;if(t==="y")e=nT();else if(t==="x")e=tT();else{const n=tT(),r=nT();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function vR(){const t=yR(!0);return t?(t(),!1):!0}class Ri{constructor(e){this.isMounted=!1,this.node=e}update(){}}function rT(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||vR())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Me.update(()=>a[r](i,o))};return os(t.current,n,s,{passive:!t.getProps()[r]})}class T$ extends Ri{mount(){this.unmount=ui(rT(this.node,!0),rT(this.node,!1))}unmount(){}}class S$ extends Ri{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ui(es(this.node.current,"focus",()=>this.onFocus()),es(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const xR=(t,e)=>e?t===e?!0:xR(t,e.parentElement):!1;function bg(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Km(n))}class E$ extends Ri{constructor(){super(...arguments),this.removeStartListeners=nt,this.removeEndListeners=nt,this.removeAccessibleListeners=nt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=os(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps();Me.update(()=>{!h&&!xR(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=os(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ui(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||bg("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Me.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=es(this.node.current,"keyup",o),bg("down",(a,l)=>{this.startPress(a,l)})},n=es(this.node.current,"keydown",e),r=()=>{this.isPressing&&bg("cancel",(i,o)=>this.cancelPress(i,o))},s=es(this.node.current,"blur",r);this.removeAccessibleListeners=ui(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Me.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!vR()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Me.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=os(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=es(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ui(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const P0=new WeakMap,kg=new WeakMap,C$=t=>{const e=P0.get(t.target);e&&e(t)},P$=t=>{t.forEach(C$)};function I$({root:t,...e}){const n=t||document;kg.has(n)||kg.set(n,{});const r=kg.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(P$,{root:t,...e})),r[s]}function A$(t,e,n){const r=I$(e);return P0.set(t,n),r.observe(t),()=>{P0.delete(t),r.unobserve(t)}}const R$={some:0,all:1};class N$ extends Ri{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:R$[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=c?u:h;m&&m(l)};return A$(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(D$(e,n))&&this.startObserver()}unmount(){}}function D$({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const M$={inView:{Feature:N$},tap:{Feature:E$},focus:{Feature:S$},hover:{Feature:T$}};function wR(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function j$(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function O$(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Qm(t,e,n){const r=t.getProps();return fw(r,e,n!==void 0?n:r.custom,j$(t),O$(t))}let mw=nt;const co=t=>t*1e3,as=t=>t/1e3,L$={current:!1},_R=t=>Array.isArray(t)&&typeof t[0]=="number";function bR(t){return!!(!t||typeof t=="string"&&kR[t]||_R(t)||Array.isArray(t)&&t.every(bR))}const Kl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,kR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kl([0,.65,.55,1]),circOut:Kl([.55,0,1,.45]),backIn:Kl([.31,.01,.66,-.59]),backOut:Kl([.33,1.53,.69,.99])};function TR(t){if(t)return _R(t)?Kl(t):Array.isArray(t)?t.map(TR):kR[t]}function V$(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=TR(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function F$(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const SR=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,U$=1e-7,z$=12;function B$(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=SR(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>U$&&++a<z$);return o}function zu(t,e,n,r){if(t===e&&n===r)return nt;const s=i=>B$(i,0,1,t,n);return i=>i===0||i===1?i:SR(s(i),e,r)}const $$=zu(.42,0,1,1),W$=zu(0,0,.58,1),ER=zu(.42,0,.58,1),H$=t=>Array.isArray(t)&&typeof t[0]!="number",CR=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,PR=t=>e=>1-t(1-e),pw=t=>1-Math.sin(Math.acos(t)),IR=PR(pw),q$=CR(pw),AR=zu(.33,1.53,.69,.99),gw=PR(AR),G$=CR(gw),K$=t=>(t*=2)<1?.5*gw(t):.5*(2-Math.pow(2,-10*(t-1))),Q$={linear:nt,easeIn:$$,easeInOut:ER,easeOut:W$,circIn:pw,circInOut:q$,circOut:IR,backIn:gw,backInOut:G$,backOut:AR,anticipate:K$},sT=t=>{if(Array.isArray(t)){mw(t.length===4);const[e,n,r,s]=t;return zu(e,n,r,s)}else if(typeof t=="string")return Q$[t];return t},yw=(t,e)=>n=>!!(Fu(n)&&XB.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),RR=(t,e,n)=>r=>{if(!Fu(r))return r;const[s,i,o,a]=r.match(Gm);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Y$=t=>vi(0,255,t),Tg={...jo,transform:t=>Math.round(Y$(t))},ro={test:yw("rgb","red"),parse:RR("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Tg.transform(t)+", "+Tg.transform(e)+", "+Tg.transform(n)+", "+gc(pc.transform(r))+")"};function X$(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const I0={test:yw("#"),parse:X$,transform:ro.transform},ha={test:yw("hsl","hue"),parse:RR("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ar.transform(gc(e))+", "+Ar.transform(gc(n))+", "+gc(pc.transform(r))+")"},Xt={test:t=>ro.test(t)||I0.test(t)||ha.test(t),parse:t=>ro.test(t)?ro.parse(t):ha.test(t)?ha.parse(t):I0.parse(t),transform:t=>Fu(t)?t:t.hasOwnProperty("red")?ro.transform(t):ha.transform(t)},We=(t,e,n)=>-n*t+n*e+t;function Sg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function J$({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Sg(l,a,t+1/3),i=Sg(l,a,t),o=Sg(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Eg=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},Z$=[I0,ro,ha],e8=t=>Z$.find(e=>e.test(t));function iT(t){const e=e8(t);let n=e.parse(t);return e===ha&&(n=J$(n)),n}const NR=(t,e)=>{const n=iT(t),r=iT(e),s={...n};return i=>(s.red=Eg(n.red,r.red,i),s.green=Eg(n.green,r.green,i),s.blue=Eg(n.blue,r.blue,i),s.alpha=We(n.alpha,r.alpha,i),ro.transform(s))};function t8(t){var e,n;return isNaN(t)&&Fu(t)&&(((e=t.match(Gm))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(sR))===null||n===void 0?void 0:n.length)||0)>0}const DR={regex:QB,countKey:"Vars",token:"${v}",parse:nt},MR={regex:sR,countKey:"Colors",token:"${c}",parse:Xt.parse},jR={regex:Gm,countKey:"Numbers",token:"${n}",parse:jo.parse};function Cg(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function If(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Cg(n,DR),Cg(n,MR),Cg(n,jR),n}function OR(t){return If(t).values}function LR(t){const{values:e,numColors:n,numVars:r,tokenised:s}=If(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(DR.token,o[l]):l<r+n?a=a.replace(MR.token,Xt.transform(o[l])):a=a.replace(jR.token,gc(o[l]));return a}}const n8=t=>typeof t=="number"?0:t;function r8(t){const e=OR(t);return LR(t)(e.map(n8))}const xi={test:t8,parse:OR,createTransformer:LR,getAnimatableNone:r8},VR=(t,e)=>n=>`${n>0?e:t}`;function FR(t,e){return typeof t=="number"?n=>We(t,e,n):Xt.test(t)?NR(t,e):t.startsWith("var(")?VR(t,e):zR(t,e)}const UR=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>FR(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},s8=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=FR(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},zR=(t,e)=>{const n=xi.createTransformer(e),r=If(t),s=If(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?ui(UR(r.values,s.values),n):VR(t,e)},iu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},oT=(t,e)=>n=>We(t,e,n);function i8(t){return typeof t=="number"?oT:typeof t=="string"?Xt.test(t)?NR:zR:Array.isArray(t)?UR:typeof t=="object"?s8:oT}function o8(t,e,n){const r=[],s=n||i8(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||nt:e;a=ui(l,a)}r.push(a)}return r}function BR(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(mw(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=o8(e,r,s),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const h=iu(t[u],t[u+1],c);return o[u](h)};return n?c=>l(vi(t[0],t[i-1],c)):l}function a8(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=iu(0,e,r);t.push(We(n,1,s))}}function l8(t){const e=[0];return a8(e,t.length-1),e}function c8(t,e){return t.map(n=>n*e)}function u8(t,e){return t.map(()=>e||ER).splice(0,t.length-1)}function Af({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=H$(r)?r.map(sT):sT(r),i={done:!1,value:e[0]},o=c8(n&&n.length===e.length?n:l8(e),t),a=BR(o,e,{ease:Array.isArray(s)?s:u8(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function $R(t,e){return e?t*(1e3/e):0}const d8=5;function WR(t,e,n){const r=Math.max(e-d8,0);return $R(n-t(r),e-r)}const Pg=.001,h8=.01,f8=10,m8=.05,p8=1;function g8({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=vi(m8,p8,o),t=vi(h8,f8,as(t)),o<1?(s=c=>{const u=c*o,h=u*t,m=u-n,p=A0(c,o),g=Math.exp(-h);return Pg-m/p*g},i=c=>{const h=c*o*t,m=h*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-h),v=A0(Math.pow(c,2),o);return(-s(c)+Pg>0?-1:1)*((m-p)*g)/v}):(s=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-Pg+u*h},i=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=v8(s,i,a);if(t=co(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const y8=12;function v8(t,e,n){let r=n;for(let s=1;s<y8;s++)r=r-t(r)/e(r);return r}function A0(t,e){return t*Math.sqrt(1-e*e)}const x8=["duration","bounce"],w8=["stiffness","damping","mass"];function aT(t,e){return e.some(n=>t[n]!==void 0)}function _8(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!aT(t,w8)&&aT(t,x8)){const n=g8(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function HR({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:u,velocity:h,isResolvedFromDuration:m}=_8({...r,velocity:-as(r.velocity||0)}),p=h||0,g=l/(2*Math.sqrt(a*c)),v=i-s,_=as(Math.sqrt(a/c)),w=Math.abs(v)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let x;if(g<1){const b=A0(_,g);x=C=>{const P=Math.exp(-g*_*C);return i-P*((p+g*_*v)/b*Math.sin(b*C)+v*Math.cos(b*C))}}else if(g===1)x=b=>i-Math.exp(-_*b)*(v+(p+_*v)*b);else{const b=_*Math.sqrt(g*g-1);x=C=>{const P=Math.exp(-g*_*C),j=Math.min(b*C,300);return i-P*((p+g*_*v)*Math.sinh(j)+b*v*Math.cosh(j))/b}}return{calculatedDuration:m&&u||null,next:b=>{const C=x(b);if(m)o.done=b>=u;else{let P=p;b!==0&&(g<1?P=WR(x,b,C):P=0);const j=Math.abs(P)<=n,S=Math.abs(i-C)<=e;o.done=j&&S}return o.value=o.done?i:C,o}}}function lT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],m={done:!1,value:h},p=T=>a!==void 0&&T<a||l!==void 0&&T>l,g=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let v=n*e;const _=h+v,w=o===void 0?_:o(_);w!==_&&(v=w-h);const x=T=>-v*Math.exp(-T/r),b=T=>w+x(T),C=T=>{const E=x(T),R=b(T);m.done=Math.abs(E)<=c,m.value=m.done?w:R};let P,j;const S=T=>{p(m.value)&&(P=T,j=HR({keyframes:[m.value,g(m.value)],velocity:WR(b,T,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return S(0),{calculatedDuration:null,next:T=>{let E=!1;return!j&&P===void 0&&(E=!0,C(T),S(T)),P!==void 0&&T>P?j.next(T-P):(!E&&C(T),m)}}}const b8=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Me.update(e,!0),stop:()=>ys(e),now:()=>Ot.isProcessing?Ot.timestamp:performance.now()}},cT=2e4;function uT(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<cT;)e+=n,r=t.next(e);return e>=cT?1/0:e}const k8={decay:lT,inertia:lT,tween:Af,keyframes:Af,spring:HR};function Rf({autoplay:t=!0,delay:e=0,driver:n=b8,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:h,...m}){let p=1,g=!1,v,_;const w=()=>{_=new Promise(te=>{v=te})};w();let x;const b=k8[s]||Af;let C;b!==Af&&typeof r[0]!="number"&&(C=BR([0,100],r,{clamp:!1}),r=[0,100]);const P=b({...m,keyframes:r});let j;a==="mirror"&&(j=b({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let S="idle",T=null,E=null,R=null;P.calculatedDuration===null&&i&&(P.calculatedDuration=uT(P));const{calculatedDuration:I}=P;let D=1/0,N=1/0;I!==null&&(D=I+o,N=D*(i+1)-o);let F=0;const W=te=>{if(E===null)return;p>0&&(E=Math.min(E,te)),p<0&&(E=Math.min(te-N/p,E)),T!==null?F=T:F=Math.round(te-E)*p;const ue=F-e*(p>=0?1:-1),ve=p>=0?ue<0:ue>N;F=Math.max(ue,0),S==="finished"&&T===null&&(F=N);let st=F,gt=P;if(i){const ll=Math.min(F,N)/D;let Or=Math.floor(ll),In=ll%1;!In&&ll>=1&&(In=1),In===1&&Or--,Or=Math.min(Or,i+1),!!(Or%2)&&(a==="reverse"?(In=1-In,o&&(In-=o/D)):a==="mirror"&&(gt=j)),st=vi(0,1,In)*D}const Be=ve?{done:!1,value:r[0]}:gt.next(st);C&&(Be.value=C(Be.value));let{done:Pn}=Be;!ve&&I!==null&&(Pn=p>=0?F>=N:F<=0);const op=T===null&&(S==="finished"||S==="running"&&Pn);return h&&h(Be.value),op&&B(),Be},z=()=>{x&&x.stop(),x=void 0},K=()=>{S="idle",z(),v(),w(),E=R=null},B=()=>{S="finished",u&&u(),z(),v()},q=()=>{if(g)return;x||(x=n(W));const te=x.now();l&&l(),T!==null?E=te-T:(!E||S==="finished")&&(E=te),S==="finished"&&w(),R=E,T=null,S="running",x.start()};t&&q();const re={then(te,ue){return _.then(te,ue)},get time(){return as(F)},set time(te){te=co(te),F=te,T!==null||!x||p===0?T=te:E=x.now()-te/p},get duration(){const te=P.calculatedDuration===null?uT(P):P.calculatedDuration;return as(te)},get speed(){return p},set speed(te){te===p||!x||(p=te,re.time=as(F))},get state(){return S},play:q,pause:()=>{S="paused",T=F},stop:()=>{g=!0,S!=="idle"&&(S="idle",c&&c(),K())},cancel:()=>{R!==null&&W(R),K()},complete:()=>{S="finished"},sample:te=>(E=0,W(te))};return re}function T8(t){let e;return()=>(e===void 0&&(e=t()),e)}const S8=T8(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),E8=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),jd=10,C8=2e4,P8=(t,e)=>e.type==="spring"||t==="backgroundColor"||!bR(e.ease);function I8(t,e,{onUpdate:n,onComplete:r,...s}){if(!(S8()&&E8.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const u=()=>{l=new Promise(b=>{a=b})};u();let{keyframes:h,duration:m=300,ease:p,times:g}=s;if(P8(e,s)){const b=Rf({...s,repeat:0,delay:0});let C={done:!1,value:h[0]};const P=[];let j=0;for(;!C.done&&j<C8;)C=b.sample(j),P.push(C.value),j+=jd;g=void 0,h=P,m=j-jd,p="linear"}const v=V$(t.owner.current,e,h,{...s,duration:m,ease:p,times:g}),_=()=>{c=!1,v.cancel()},w=()=>{c=!0,Me.update(_),a(),u()};return v.onfinish=()=>{c||(t.set(F$(h,s)),r&&r(),w())},{then(b,C){return l.then(b,C)},attachTimeline(b){return v.timeline=b,v.onfinish=null,nt},get time(){return as(v.currentTime||0)},set time(b){v.currentTime=co(b)},get speed(){return v.playbackRate},set speed(b){v.playbackRate=b},get duration(){return as(m)},play:()=>{o||(v.play(),ys(_))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:b}=v;if(b){const C=Rf({...s,autoplay:!1});t.setWithVelocity(C.sample(b-jd).value,C.sample(b).value,jd)}w()},complete:()=>{c||v.finish()},cancel:w}}function A8({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:nt,pause:nt,stop:nt,then:i=>(i(),Promise.resolve()),cancel:nt,complete:nt});return e?Rf({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const R8={type:"spring",stiffness:500,damping:25,restSpeed:10},N8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),D8={type:"keyframes",duration:.8},M8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},j8=(t,{keyframes:e})=>e.length>2?D8:Mo.has(t)?t.startsWith("scale")?N8(e[1]):R8:M8,R0=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(xi.test(e)||e==="0")&&!e.startsWith("url(")),O8=new Set(["brightness","contrast","saturate","opacity"]);function L8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Gm)||[];if(!r)return t;const s=n.replace(r,"");let i=O8.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const V8=/([a-z-]*)\(.*?\)/g,N0={...xi,getAnimatableNone:t=>{const e=t.match(V8);return e?e.map(L8).join(" "):t}},F8={...iR,color:Xt,backgroundColor:Xt,outlineColor:Xt,fill:Xt,stroke:Xt,borderColor:Xt,borderTopColor:Xt,borderRightColor:Xt,borderBottomColor:Xt,borderLeftColor:Xt,filter:N0,WebkitFilter:N0},vw=t=>F8[t];function qR(t,e){let n=vw(t);return n!==N0&&(n=xi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const GR=t=>/^0[^.\s]+$/.test(t);function U8(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||GR(t)}function z8(t,e,n,r){const s=R0(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),U8(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];i[u]=qR(e,a)}return i}function B8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function xw(t,e){return t[e]||t.default||t}const $8={skipAnimations:!1},ww=(t,e,n,r={})=>s=>{const i=xw(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-co(o);const l=z8(e,t,n,i),c=l[0],u=l[l.length-1],h=R0(t,c),m=R0(t,u);let p={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:g=>{e.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(B8(i)||(p={...p,...j8(t,p)}),p.duration&&(p.duration=co(p.duration)),p.repeatDelay&&(p.repeatDelay=co(p.repeatDelay)),!h||!m||L$.current||i.type===!1||$8.skipAnimations)return A8(p);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=I8(e,t,p);if(g)return g}return Rf(p)};function Nf(t){return!!(pn(t)&&t.add)}const KR=t=>/^\-?\d*\.?\d+$/.test(t);function _w(t,e){t.indexOf(e)===-1&&t.push(e)}function bw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class kw{constructor(){this.subscriptions=[]}add(e){return _w(this.subscriptions,e),()=>bw(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const W8=t=>!isNaN(parseFloat(t));class H8{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Ot;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Me.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Me.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=W8(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new kw);const r=this.events[e].add(n);return e==="change"?()=>{r(),Me.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?$R(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qa(t,e){return new H8(t,e)}const QR=t=>e=>e.test(t),q8={test:t=>t==="auto",parse:t=>t},YR=[jo,se,Ar,Rs,ZB,JB,q8],Rl=t=>YR.find(QR(t)),G8=[...YR,Xt,xi],K8=t=>G8.find(QR(t));function Q8(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,qa(n))}function Y8(t,e){const n=Qm(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=f$(i[o]);Q8(t,o,a)}}function X8(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),u!=null&&(typeof u=="string"&&(KR(u)||GR(u))?u=parseFloat(u):!K8(u)&&xi.test(c)&&(u=qR(l,c)),t.addValue(l,qa(u,{owner:t})),n[l]===void 0&&(n[l]=u),u!==null&&t.setBaseTarget(l,u))}}function J8(t,e){return e?(e[t]||e.default||e).from:void 0}function Z8(t,e,n){const r={};for(const s in t){const i=J8(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function e7({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function t7(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function XR(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const h in a){const m=t.getValue(h),p=a[h];if(!m||p===void 0||u&&e7(u,h))continue;const g={delay:n,elapsed:0,...xw(i||{},h)};if(window.HandoffAppearAnimations){const w=t.getProps()[JA];if(w){const x=window.HandoffAppearAnimations(w,h,m,Me);x!==null&&(g.elapsed=x,g.isHandoff=!0)}}let v=!g.isHandoff&&!t7(m,p);if(g.type==="spring"&&(m.getVelocity()||g.velocity)&&(v=!1),m.animation&&(v=!1),v)continue;m.start(ww(h,m,p,t.shouldReduceMotion&&Mo.has(h)?{type:!1}:g));const _=m.animation;Nf(l)&&(l.add(h),_.then(()=>l.remove(h))),c.push(_)}return o&&Promise.all(c).then(()=>{o&&Y8(t,o)}),c}function D0(t,e,n={}){const r=Qm(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(XR(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:h}=s;return n7(t,e,c+l,u,h,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,c]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function n7(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(r7).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(D0(c,e,{...i,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function r7(t,e){return t.sortNodePosition(e)}function s7(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>D0(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=D0(t,e,n);else{const s=typeof e=="function"?Qm(t,e,n.custom):e;r=Promise.all(XR(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const i7=[...sw].reverse(),o7=sw.length;function a7(t){return e=>Promise.all(e.map(({animation:n,options:r})=>s7(t,n,r)))}function l7(t){let e=a7(t);const n=u7();let r=!0;const s=(l,c)=>{const u=Qm(t,c);if(u){const{transition:h,transitionEnd:m,...p}=u;l={...l,...p,...m}}return l};function i(l){e=l(t)}function o(l,c){const u=t.getProps(),h=t.getVariantContext(!0)||{},m=[],p=new Set;let g={},v=1/0;for(let w=0;w<o7;w++){const x=i7[w],b=n[x],C=u[x]!==void 0?u[x]:h[x],P=ru(C),j=x===c?b.isActive:null;j===!1&&(v=w);let S=C===h[x]&&C!==u[x]&&P;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...g},!b.isActive&&j===null||!C&&!b.prevProp||Hm(C)||typeof C=="boolean")continue;let E=c7(b.prevProp,C)||x===c&&b.isActive&&!S&&P||w>v&&P,R=!1;const I=Array.isArray(C)?C:[C];let D=I.reduce(s,{});j===!1&&(D={});const{prevResolvedValues:N={}}=b,F={...N,...D},W=z=>{E=!0,p.has(z)&&(R=!0,p.delete(z)),b.needsAnimating[z]=!0};for(const z in F){const K=D[z],B=N[z];if(g.hasOwnProperty(z))continue;let q=!1;Pf(K)&&Pf(B)?q=!wR(K,B):q=K!==B,q?K!==void 0?W(z):p.add(z):K!==void 0&&p.has(z)?W(z):b.protectedKeys[z]=!0}b.prevProp=C,b.prevResolvedValues=D,b.isActive&&(g={...g,...D}),r&&t.blockInitialAnimation&&(E=!1),E&&(!S||R)&&m.push(...I.map(z=>({animation:z,options:{type:x,...l}})))}if(p.size){const w={};p.forEach(x=>{const b=t.getBaseTarget(x);b!==void 0&&(w[x]=b)}),m.push({animation:w})}let _=!!m.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(m):Promise.resolve()}function a(l,c,u){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(p=>{var g;return(g=p.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const m=o(u,l);for(const p in n)n[p].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function c7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!wR(e,t):!1}function Vi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function u7(){return{animate:Vi(!0),whileInView:Vi(),whileHover:Vi(),whileTap:Vi(),whileDrag:Vi(),whileFocus:Vi(),exit:Vi()}}class d7 extends Ri{constructor(e){super(e),e.animationState||(e.animationState=l7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Hm(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let h7=0;class f7 extends Ri{constructor(){super(...arguments),this.id=h7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const m7={animation:{Feature:d7},exit:{Feature:f7}},dT=(t,e)=>Math.abs(t-e);function p7(t,e){const n=dT(t.x,e.x),r=dT(t.y,e.y);return Math.sqrt(n**2+r**2)}class JR{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Ag(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=p7(h.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:g}=h,{timestamp:v}=Ot;this.history.push({...g,timestamp:v});const{onStart:_,onMove:w}=this.handlers;m||(_&&_(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Ig(m,this.transformPagePoint),Me.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Ag(h.type==="pointercancel"?this.lastMoveEventInfo:Ig(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,_),g&&g(h,_)},!pR(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Km(e),a=Ig(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Ot;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,Ag(a,this.history)),this.removeListeners=ui(os(this.contextWindow,"pointermove",this.handlePointerMove),os(this.contextWindow,"pointerup",this.handlePointerUp),os(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ys(this.updatePoint)}}function Ig(t,e){return e?{point:e(t.point)}:t}function hT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ag({point:t},e){return{point:t,delta:hT(t,ZR(e)),offset:hT(t,g7(e)),velocity:y7(e,.1)}}function g7(t){return t[0]}function ZR(t){return t[t.length-1]}function y7(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=ZR(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>co(e)));)n--;if(!r)return{x:0,y:0};const i=as(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Tn(t){return t.max-t.min}function M0(t,e=0,n=.01){return Math.abs(t-e)<=n}function fT(t,e,n,r=.5){t.origin=r,t.originPoint=We(e.min,e.max,t.origin),t.scale=Tn(n)/Tn(e),(M0(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=We(n.min,n.max,t.origin)-t.originPoint,(M0(t.translate)||isNaN(t.translate))&&(t.translate=0)}function yc(t,e,n,r){fT(t.x,e.x,n.x,r?r.originX:void 0),fT(t.y,e.y,n.y,r?r.originY:void 0)}function mT(t,e,n){t.min=n.min+e.min,t.max=t.min+Tn(e)}function v7(t,e,n){mT(t.x,e.x,n.x),mT(t.y,e.y,n.y)}function pT(t,e,n){t.min=e.min-n.min,t.max=t.min+Tn(e)}function vc(t,e,n){pT(t.x,e.x,n.x),pT(t.y,e.y,n.y)}function x7(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?We(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?We(n,t,r.max):Math.min(t,n)),t}function gT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function w7(t,{top:e,left:n,bottom:r,right:s}){return{x:gT(t.x,n,s),y:gT(t.y,e,r)}}function yT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function _7(t,e){return{x:yT(t.x,e.x),y:yT(t.y,e.y)}}function b7(t,e){let n=.5;const r=Tn(t),s=Tn(e);return s>r?n=iu(e.min,e.max-r,t.min):r>s&&(n=iu(t.min,t.max-s,e.min)),vi(0,1,n)}function k7(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const j0=.35;function T7(t=j0){return t===!1?t=0:t===!0&&(t=j0),{x:vT(t,"left","right"),y:vT(t,"top","bottom")}}function vT(t,e,n){return{min:xT(t,e),max:xT(t,n)}}function xT(t,e){return typeof t=="number"?t:t[e]||0}const wT=()=>({translate:0,scale:1,origin:0,originPoint:0}),fa=()=>({x:wT(),y:wT()}),_T=()=>({min:0,max:0}),ot=()=>({x:_T(),y:_T()});function Dn(t){return[t("x"),t("y")]}function eN({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function S7({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function E7(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Rg(t){return t===void 0||t===1}function O0({scale:t,scaleX:e,scaleY:n}){return!Rg(t)||!Rg(e)||!Rg(n)}function Hi(t){return O0(t)||tN(t)||t.z||t.rotate||t.rotateX||t.rotateY}function tN(t){return bT(t.x)||bT(t.y)}function bT(t){return t&&t!=="0%"}function Df(t,e,n){const r=t-n,s=e*r;return n+s}function kT(t,e,n,r,s){return s!==void 0&&(t=Df(t,s,r)),Df(t,n,r)+e}function L0(t,e=0,n=1,r,s){t.min=kT(t.min,e,n,r,s),t.max=kT(t.max,e,n,r,s)}function nN(t,{x:e,y:n}){L0(t.x,e.translate,e.scale,e.originPoint),L0(t.y,n.translate,n.scale,n.originPoint)}function C7(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ma(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,nN(t,o)),r&&Hi(i.latestValues)&&ma(t,i.latestValues))}e.x=TT(e.x),e.y=TT(e.y)}function TT(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ms(t,e){t.min=t.min+e,t.max=t.max+e}function ST(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=We(t.min,t.max,i);L0(t,e[n],e[r],o,e.scale)}const P7=["x","scaleX","originX"],I7=["y","scaleY","originY"];function ma(t,e){ST(t.x,e,P7),ST(t.y,e,I7)}function rN(t,e){return eN(E7(t.getBoundingClientRect(),e))}function A7(t,e,n){const r=rN(t,n),{scroll:s}=e;return s&&(Ms(r.x,s.offset.x),Ms(r.y,s.offset.y)),r}const sN=({current:t})=>t?t.ownerDocument.defaultView:null,R7=new WeakMap;class N7{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ot(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Km(u,"page").point)},i=(u,h)=>{const{drag:m,dragPropagation:p,onDragStart:g}=this.getProps();if(m&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=yR(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Dn(_=>{let w=this.getAxisMotionValue(_).get()||0;if(Ar.test(w)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[_];b&&(w=Tn(b)*(parseFloat(w)/100))}}this.originPoint[_]=w}),g&&Me.update(()=>g(u,h),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:g,onDrag:v}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:_}=h;if(p&&this.currentDirection===null){this.currentDirection=D7(_),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,_),this.updateAxis("y",h.point,_),this.visualElement.render(),v&&v(u,h)},a=(u,h)=>this.stop(u,h),l=()=>Dn(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new JR(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:sN(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Me.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Od(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=x7(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&da(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=w7(s.layoutBox,n):this.constraints=!1,this.elastic=T7(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Dn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=k7(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!da(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=A7(r,s.root,this.visualElement.getTransformPagePoint());let o=_7(s.layout.layoutBox,i);if(n){const a=n(S7(o));this.hasMutatedConstraints=!!a,a&&(o=eN(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Dn(u=>{if(!Od(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const m=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(ww(e,r,0,n))}stopAnimation(){Dn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Dn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Dn(n=>{const{drag:r}=this.getProps();if(!Od(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-We(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!da(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Dn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=b7({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Dn(o=>{if(!Od(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(We(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;R7.set(this.visualElement,this);const e=this.visualElement.current,n=os(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();da(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=es(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Dn(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=j0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Od(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function D7(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class M7 extends Ri{constructor(e){super(e),this.removeGroupControls=nt,this.removeListeners=nt,this.controls=new N7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||nt}unmount(){this.removeGroupControls(),this.removeListeners()}}const ET=t=>(e,n)=>{t&&Me.update(()=>t(e,n))};class j7 extends Ri{constructor(){super(...arguments),this.removePointerDownListener=nt}onPointerDown(e){this.session=new JR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:ET(e),onStart:ET(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Me.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=os(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function O7(){const t=M.useContext($m);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=M.useId();return M.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const bh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function CT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Nl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(se.test(t))t=parseFloat(t);else return t;const n=CT(t,e.target.x),r=CT(t,e.target.y);return`${n}% ${r}%`}},L7={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=xi.parse(t);if(s.length>5)return r;const i=xi.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=We(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class V7 extends mn.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;HB(F7),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),bh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Me.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function iN(t){const[e,n]=O7(),r=M.useContext(ow);return mn.createElement(V7,{...t,layoutGroup:r,switchLayoutGroup:M.useContext(eR),isPresent:e,safeToRemove:n})}const F7={borderRadius:{...Nl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Nl,borderTopRightRadius:Nl,borderBottomLeftRadius:Nl,borderBottomRightRadius:Nl,boxShadow:L7},oN=["TopLeft","TopRight","BottomLeft","BottomRight"],U7=oN.length,PT=t=>typeof t=="string"?parseFloat(t):t,IT=t=>typeof t=="number"||se.test(t);function z7(t,e,n,r,s,i){s?(t.opacity=We(0,n.opacity!==void 0?n.opacity:1,B7(r)),t.opacityExit=We(e.opacity!==void 0?e.opacity:1,0,$7(r))):i&&(t.opacity=We(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<U7;o++){const a=`border${oN[o]}Radius`;let l=AT(e,a),c=AT(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||IT(l)===IT(c)?(t[a]=Math.max(We(PT(l),PT(c),r),0),(Ar.test(c)||Ar.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=We(e.rotate||0,n.rotate||0,r))}function AT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const B7=aN(0,.5,IR),$7=aN(.5,.95,nt);function aN(t,e,n){return r=>r<t?0:r>e?1:n(iu(t,e,r))}function RT(t,e){t.min=e.min,t.max=e.max}function An(t,e){RT(t.x,e.x),RT(t.y,e.y)}function NT(t,e,n,r,s){return t-=e,t=Df(t,1/n,r),s!==void 0&&(t=Df(t,1/s,r)),t}function W7(t,e=0,n=1,r=.5,s,i=t,o=t){if(Ar.test(e)&&(e=parseFloat(e),e=We(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=We(i.min,i.max,r);t===i&&(a-=e),t.min=NT(t.min,e,n,a,s),t.max=NT(t.max,e,n,a,s)}function DT(t,e,[n,r,s],i,o){W7(t,e[n],e[r],e[s],e.scale,i,o)}const H7=["x","scaleX","originX"],q7=["y","scaleY","originY"];function MT(t,e,n,r){DT(t.x,e,H7,n?n.x:void 0,r?r.x:void 0),DT(t.y,e,q7,n?n.y:void 0,r?r.y:void 0)}function jT(t){return t.translate===0&&t.scale===1}function lN(t){return jT(t.x)&&jT(t.y)}function G7(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function cN(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function OT(t){return Tn(t.x)/Tn(t.y)}class K7{constructor(){this.members=[]}add(e){_w(this.members,e),e.scheduleRender()}remove(e){if(bw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function LT(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:u}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),u&&(r+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const Q7=(t,e)=>t.depth-e.depth;class Y7{constructor(){this.children=[],this.isDirty=!1}add(e){_w(this.children,e),this.isDirty=!0}remove(e){bw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Q7),this.isDirty=!1,this.children.forEach(e)}}function X7(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(ys(r),t(i-e))};return Me.read(r,!0),()=>ys(r)}function J7(t){window.MotionDebug&&window.MotionDebug.record(t)}function Z7(t){return t instanceof SVGElement&&t.tagName!=="svg"}function eW(t,e,n){const r=pn(t)?t:qa(t);return r.start(ww("",r,e,n)),r.animation}const VT=["","X","Y","Z"],tW={visibility:"hidden"},FT=1e3;let nW=0;const qi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function uN({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=nW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qi.totalNodes=qi.resolvedTargetDeltas=qi.recalculatedProjection=0,this.nodes.forEach(iW),this.nodes.forEach(uW),this.nodes.forEach(dW),this.nodes.forEach(oW),J7(qi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Y7)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new kw),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Z7(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=X7(m,250),bh.hasAnimatedSinceResize&&(bh.hasAnimatedSinceResize=!1,this.nodes.forEach(zT))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||gW,{onLayoutAnimationStart:_,onLayoutAnimationComplete:w}=u.getProps(),x=!this.targetLayout||!cN(this.targetLayout,g)||p,b=!m&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||m&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const C={...xw(v,"layout"),onPlay:_,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else m||zT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ys(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(UT);return}this.isUpdating||this.nodes.forEach(lW),this.isUpdating=!1,this.nodes.forEach(cW),this.nodes.forEach(rW),this.nodes.forEach(sW),this.clearAllSnapshots();const a=performance.now();Ot.delta=vi(0,1e3/60,a-Ot.timestamp),Ot.timestamp=a,Ot.isProcessing=!0,_g.update.process(Ot),_g.preRender.process(Ot),_g.render.process(Ot),Ot.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(aW),this.sharedNodes.forEach(fW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ot(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!lN(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Hi(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),yW(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ot();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Ms(a.x,l.offset.x),Ms(a.y,l.offset.y)),a}removeElementScroll(o){const a=ot();An(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){An(a,o);const{scroll:m}=this.root;m&&(Ms(a.x,-m.offset.x),Ms(a.y,-m.offset.y))}Ms(a.x,u.offset.x),Ms(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=ot();An(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&ma(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Hi(u.latestValues)&&ma(l,u.latestValues)}return Hi(this.latestValues)&&ma(l,this.latestValues),l}removeTransform(o){const a=ot();An(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Hi(c.latestValues))continue;O0(c.latestValues)&&c.updateSnapshot();const u=ot(),h=c.measurePageBox();An(u,h),MT(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Hi(this.latestValues)&&MT(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ot.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=Ot.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),vc(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),An(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ot(),this.targetWithTransforms=ot()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),v7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):An(this.target,this.layout.layoutBox),nN(this.target,this.targetDelta)):An(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),vc(this.relativeTargetOrigin,this.target,p.target),An(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||O0(this.parent.latestValues)||tN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ot.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;An(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;C7(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=fa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=fa(),this.projectionDeltaWithTransform=fa());const v=this.projectionTransform;yc(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=LT(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==m||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),qi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=fa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=ot(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=p!==g,_=this.getStack(),w=!_||_.members.length<=1,x=!!(v&&!w&&this.options.crossfade===!0&&!this.path.some(pW));this.animationProgress=0;let b;this.mixTargetDelta=C=>{const P=C/1e3;BT(h.x,o.x,P),BT(h.y,o.y,P),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mW(this.relativeTarget,this.relativeTargetOrigin,m,P),b&&G7(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ot()),An(b,this.relativeTarget)),v&&(this.animationValues=u,z7(u,c,this.latestValues,P,x,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ys(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Me.update(()=>{bh.hasAnimatedSinceResize=!0,this.currentAnimation=eW(0,FT,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(FT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&dN(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ot();const h=Tn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=Tn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}An(a,l),ma(a,u),yc(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new K7),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<VT.length;u++){const h="rotate"+VT[u];l[h]&&(c[h]=l[h],o.setStaticValue(h,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return tW;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=_h(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=_h(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Hi(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=LT(this.projectionDeltaWithTransform,this.treeScale,m),u&&(c.transform=u(m,c.transform));const{x:p,y:g}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const v in Ef){if(m[v]===void 0)continue;const{correct:_,applyTo:w}=Ef[v],x=c.transform==="none"?m[v]:_(m[v],h);if(w){const b=w.length;for(let C=0;C<b;C++)c[w[C]]=x}else c[v]=x}return this.options.layoutId&&(c.pointerEvents=h===this?_h(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(UT),this.root.sharedNodes.clear()}}}function rW(t){t.updateLayout()}function sW(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?Dn(h=>{const m=o?n.measuredBox[h]:n.layoutBox[h],p=Tn(m);m.min=r[h].min,m.max=m.min+p}):dN(i,n.layoutBox,r)&&Dn(h=>{const m=o?n.measuredBox[h]:n.layoutBox[h],p=Tn(r[h]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=fa();yc(a,r,n.layoutBox);const l=fa();o?yc(l,t.applyTransform(s,!0),n.measuredBox):yc(l,r,n.layoutBox);const c=!lN(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:p}=h;if(m&&p){const g=ot();vc(g,n.layoutBox,m.layoutBox);const v=ot();vc(v,r,p.layoutBox),cN(g,v)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function iW(t){qi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function oW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function aW(t){t.clearSnapshot()}function UT(t){t.clearMeasurements()}function lW(t){t.isLayoutDirty=!1}function cW(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function zT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function uW(t){t.resolveTargetDelta()}function dW(t){t.calcProjection()}function hW(t){t.resetRotation()}function fW(t){t.removeLeadSnapshot()}function BT(t,e,n){t.translate=We(e.translate,0,n),t.scale=We(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function $T(t,e,n,r){t.min=We(e.min,n.min,r),t.max=We(e.max,n.max,r)}function mW(t,e,n,r){$T(t.x,e.x,n.x,r),$T(t.y,e.y,n.y,r)}function pW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const gW={duration:.45,ease:[.4,0,.1,1]},WT=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),HT=WT("applewebkit/")&&!WT("chrome/")?Math.round:nt;function qT(t){t.min=HT(t.min),t.max=HT(t.max)}function yW(t){qT(t.x),qT(t.y)}function dN(t,e,n){return t==="position"||t==="preserve-aspect"&&!M0(OT(e),OT(n),.2)}const vW=uN({attachResizeListener:(t,e)=>es(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ng={current:void 0},hN=uN({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ng.current){const t=new vW({});t.mount(window),t.setOptions({layoutScroll:!0}),Ng.current=t}return Ng.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),xW={pan:{Feature:j7},drag:{Feature:M7,ProjectionNode:hN,MeasureLayout:iN}},wW=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function _W(t){const e=wW.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function V0(t,e,n=1){const[r,s]=_W(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return KR(o)?parseFloat(o):o}else return C0(s)?V0(s,e,n+1):s}function bW(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!C0(i))return;const o=V0(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!C0(i))continue;const o=V0(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const kW=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),fN=t=>kW.has(t),TW=t=>Object.keys(t).some(fN),GT=t=>t===jo||t===se,KT=(t,e)=>parseFloat(t.split(", ")[e]),QT=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return KT(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?KT(i[1],t):0}},SW=new Set(["x","y","z"]),EW=Vu.filter(t=>!SW.has(t));function CW(t){const e=[];return EW.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ga={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:QT(4,13),y:QT(5,14)};Ga.translateX=Ga.x;Ga.translateY=Ga.y;const PW=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Ga[c](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),t[c]=Ga[c](l,i)}),t},IW=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(fN);let i=[],o=!1;const a=[];if(s.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let u=n[l],h=Rl(u);const m=e[l];let p;if(Pf(m)){const g=m.length,v=m[0]===null?1:0;u=m[v],h=Rl(u);for(let _=v;_<g&&m[_]!==null;_++)p?mw(Rl(m[_])===p):p=Rl(m[_])}else p=Rl(m);if(h!==p)if(GT(h)&&GT(p)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof m=="string"?e[l]=parseFloat(m):Array.isArray(m)&&p===se&&(e[l]=m.map(parseFloat))}else h!=null&&h.transform&&(p!=null&&p.transform)&&(u===0||m===0)?u===0?c.set(p.transform(u)):e[l]=h.transform(m):(o||(i=CW(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(m))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=PW(e,t,a);return i.length&&i.forEach(([u,h])=>{t.getValue(u).set(h)}),t.render(),Wm&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function AW(t,e,n,r){return TW(e)?IW(t,e,n,r):{target:e,transitionEnd:r}}const RW=(t,e,n,r)=>{const s=bW(t,e,r);return e=s.target,r=s.transitionEnd,AW(t,e,n,r)},F0={current:null},mN={current:!1};function NW(){if(mN.current=!0,!!Wm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>F0.current=t.matches;t.addListener(e),e()}else F0.current=!1}function DW(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(pn(i))t.addValue(s,i),Nf(r)&&r.add(s);else if(pn(o))t.addValue(s,qa(i,{owner:t})),Nf(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,qa(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const YT=new WeakMap,pN=Object.keys(su),MW=pN.length,XT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],jW=iw.length;class OW{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Me.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=qm(n),this.isVariantNode=ZA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const h in u){const m=u[h];a[h]!==void 0&&pn(m)&&(m.set(a[h],!1),Nf(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,YT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),mN.current||NW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:F0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){YT.delete(this.current),this.projection&&this.projection.unmount(),ys(this.notifyUpdate),ys(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Mo.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Me.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<MW;l++){const c=pN[l],{isEnabled:u,Feature:h,ProjectionNode:m,MeasureLayout:p}=su[c];m&&(o=m),u(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),p&&(a=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:h,layoutScroll:m,layoutRoot:p}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||h&&da(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:p})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ot()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<XT.length;r++){const s=XT[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=DW(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<jW;r++){const s=iw[r],i=this.props[s];(ru(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=qa(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=fw(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!pn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new kw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class gN extends OW{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=Z8(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){X8(this,r,o);const a=RW(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function LW(t){return window.getComputedStyle(t)}class VW extends gN{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Mo.has(n)){const r=vw(n);return r&&r.default||0}else{const r=LW(e),s=(rR(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return rN(e,n)}build(e,n,r,s){lw(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return hw(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){cR(e,n,r,s)}}class FW extends gN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Mo.has(n)){const r=vw(n);return r&&r.default||0}return n=uR.has(n)?n:rw(n),e.getAttribute(n)}measureInstanceViewportBox(){return ot()}scrapeMotionValuesFromProps(e,n){return hR(e,n)}build(e,n,r,s){uw(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){dR(e,n,r,s)}mount(e){this.isSVGTag=dw(e.tagName),super.mount(e)}}const UW=(t,e)=>aw(t)?new FW(e,{enableHardwareAcceleration:!1}):new VW(e,{enableHardwareAcceleration:!0}),zW={layout:{ProjectionNode:hN,MeasureLayout:iN}},BW={...m7,...M$,...xW,...zW},Y=$B((t,e)=>_$(t,e,BW,UW));function yN(){const t=M.useRef(!1);return nw(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function $W(){const t=yN(),[e,n]=M.useState(0),r=M.useCallback(()=>{t.current&&n(e+1)},[e]);return[M.useCallback(()=>Me.postRender(r),[r]),e]}class WW extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function HW({children:t,isPresent:e}){const n=M.useId(),r=M.useRef(null),s=M.useRef({width:0,height:0,top:0,left:0});return M.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),M.createElement(WW,{isPresent:e,childRef:r,sizeRef:s},M.cloneElement(t,{ref:r}))}const Dg=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=fR(qW),l=M.useId(),c=M.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:u=>{a.set(u,!0);for(const h of a.values())if(!h)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),i?void 0:[n]);return M.useMemo(()=>{a.forEach((u,h)=>a.set(h,!1))},[n]),M.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=M.createElement(HW,{isPresent:n},t)),M.createElement($m.Provider,{value:c},t)};function qW(){return new Map}function GW(t){return M.useEffect(()=>()=>t(),[])}const Gi=t=>t.key||"";function KW(t,e){t.forEach(n=>{const r=Gi(n);e.set(r,n)})}function QW(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const qn=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=M.useContext(ow).forceRender||$W()[0],l=yN(),c=QW(t);let u=c;const h=M.useRef(new Map).current,m=M.useRef(u),p=M.useRef(new Map).current,g=M.useRef(!0);if(nw(()=>{g.current=!1,KW(c,p),m.current=u}),GW(()=>{g.current=!0,p.clear(),h.clear()}),g.current)return M.createElement(M.Fragment,null,u.map(x=>M.createElement(Dg,{key:Gi(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},x)));u=[...u];const v=m.current.map(Gi),_=c.map(Gi),w=v.length;for(let x=0;x<w;x++){const b=v[x];_.indexOf(b)===-1&&!h.has(b)&&h.set(b,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((x,b)=>{if(_.indexOf(b)!==-1)return;const C=p.get(b);if(!C)return;const P=v.indexOf(b);let j=x;if(!j){const S=()=>{h.delete(b);const T=Array.from(p.keys()).filter(E=>!_.includes(E));if(T.forEach(E=>p.delete(E)),m.current=c.filter(E=>{const R=Gi(E);return R===b||T.includes(R)}),!h.size){if(l.current===!1)return;a(),r&&r()}};j=M.createElement(Dg,{key:Gi(C),isPresent:!1,onExitComplete:S,custom:e,presenceAffectsLayout:i,mode:o},C),h.set(b,j)}u.splice(P,0,j)}),u=u.map(x=>{const b=x.key;return h.has(b)?x:M.createElement(Dg,{key:Gi(x),isPresent:!0,presenceAffectsLayout:i,mode:o},x)}),M.createElement(M.Fragment,null,h.size?u:u.map(x=>M.cloneElement(x)))};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ee=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>M.createElement("svg",{ref:u,...YW,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${XW(t)}`,a].join(" "),...c},[...e.map(([h,m])=>M.createElement(h,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=ee("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=ee("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=ee("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=ee("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=ee("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=ee("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=ee("CalendarOff",[["path",{d:"M4.18 4.18A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18",key:"1feomx"}],["path",{d:"M21 15.5V6a2 2 0 0 0-2-2H9.5",key:"yhw86o"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h7",key:"1wap6i"}],["path",{d:"M21 10h-5.5",key:"quycpq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=ee("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=ee("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=ee("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=ee("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=ee("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=ee("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=ee("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=ee("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=ee("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cH=ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=ee("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hH=ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=ee("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mH=ee("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pH=ee("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gH=ee("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yH=ee("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vH=ee("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xH=ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=ee("Scroll",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=ee("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=ee("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=ee("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wH=ee("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=ee("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=ee("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=ee("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=ee("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kH=ee("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=ee("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),On=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString(),TH=t=>{const e=new Date,n=new Date(t),r=n.getTime()-e.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s<-1?`Il y a ${Math.abs(s)} jours`:s===-1?"Hier":s===0?"Aujourd'hui":s===1?"Demain":s<=7?`Dans ${s} jours`:n.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})},Ew=t=>t<5?"Novice":t<10?"Apprenti":t<15?"Initi":t<20?"Adepte":t<25?"Aventurier":t<30?"Explorateur":t<40?"Vtran":t<50?"Expert":t<60?"Matre":t<75?"Grand Matre":t<90?"Champion":t<100?"Hros":"Lgende",SH=t=>{switch(t){case"low":return"#22c55e";case"medium":return"#f59e0b";case"high":return"#f97316";case"critical":return"#ef4444";default:return"#9ca3af"}},EH=t=>{const e=new Date,r=new Date(t).getTime()-e.getTime();if(r<=0)return"Expir";const s=Math.floor(r/(1e3*60*60)),i=Math.floor(s/24);if(i>0)return`${i}j ${s%24}h`;const o=Math.floor(r%(1e3*60*60)/(1e3*60));return`${s}h ${o}m`},Z=(...t)=>t.filter(Boolean).join(" "),Ne=({children:t,variant:e="primary",size:n="md",isLoading:r=!1,leftIcon:s,rightIcon:i,className:o,disabled:a,...l})=>{const c="inline-flex items-center justify-center font-medium rounded-2xl transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-soft hover:shadow-soft-lg",u={primary:"bg-accent-gradient text-white hover:opacity-90 focus:ring-2",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 text-gray-800 dark:text-gray-200 hover:from-gray-200 hover:to-gray-300 dark:hover:from-gray-600 dark:hover:to-gray-500 focus:ring-gray-400",danger:"bg-gradient-to-r from-red-400 to-red-500 text-white hover:from-red-500 hover:to-red-600 focus:ring-red-400",success:"bg-gradient-to-r from-green-400 to-green-500 text-white hover:from-green-500 hover:to-green-600 focus:ring-green-400",game:"bg-accent-gradient text-white hover:opacity-90 shadow-lg hover:shadow-xl",ghost:"bg-transparent hover:bg-gradient-to-r hover:from-gray-50 hover:to-gray-100 dark:hover:from-gray-800 dark:hover:to-gray-700 text-gray-600 dark:text-gray-400",outline:"bg-transparent border-2 border-accent text-accent hover:bg-[var(--color-accent-50)] dark:hover:bg-[var(--color-accent-900)]/30 focus:ring-2"},h={sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-4 py-2 text-base gap-2",lg:"px-6 py-3 text-lg gap-2.5"};return d.jsx("button",{className:Z(c,u[e],h[n],o),disabled:a||r,...l,children:r?d.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d.jsxs(d.Fragment,{children:[s&&d.jsx("span",{className:"flex-shrink-0",children:s}),t,i&&d.jsx("span",{className:"flex-shrink-0",children:i})]})})},Te=({children:t,className:e,variant:n="default",hoverable:r=!1,onClick:s})=>{const i={default:"bg-white dark:bg-gray-800/90 border border-gray-100 dark:border-gray-700/50 shadow-sm",game:"bg-gradient-to-br from-white to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/60 border border-gray-100 dark:border-gray-700/50 shadow-sm",glass:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl border border-white/20 dark:border-gray-700/30 shadow-soft"},o=s?Y.button:Y.div;return d.jsx(o,{className:Z("rounded-2xl overflow-hidden transition-all duration-300",i[n],r&&"hover:shadow-soft-lg hover:border-gray-200 dark:hover:border-gray-600 cursor-pointer active:scale-[0.98]",s&&"text-left w-full",e),onClick:s,whileTap:s?{scale:.98}:void 0,children:t})},CH={primary:"bg-[var(--color-accent-100)] dark:bg-[var(--color-accent-900)]/40 text-accent",yellow:"bg-gradient-to-br from-yellow-500/20 to-amber-500/20 text-yellow-600 dark:text-yellow-400",orange:"bg-gradient-to-br from-orange-500/20 to-red-500/20 text-orange-600 dark:text-orange-400",purple:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 text-purple-600 dark:text-purple-400",green:"bg-gradient-to-br from-green-500/20 to-emerald-500/20 text-green-600 dark:text-green-400",red:"bg-gradient-to-br from-red-500/20 to-pink-500/20 text-red-600 dark:text-red-400",blue:"bg-gradient-to-br from-blue-500/20 to-indigo-500/20 text-blue-600 dark:text-blue-400"},ut=({icon:t,label:e,value:n,color:r="primary",trend:s})=>d.jsx(Te,{className:"p-3 sm:p-4 group",hoverable:!0,children:d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[d.jsx("div",{className:Z("w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-transform duration-300 group-hover:scale-110",CH[r]),children:t}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-400 truncate leading-tight font-medium uppercase tracking-wide",children:e}),d.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white truncate",children:n})]}),s&&d.jsxs("div",{className:Z("px-2 py-1 rounded-lg text-xs font-semibold hidden sm:block",s.isPositive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[s.isPositive?"+":"",s.value,"%"]})]})}),PH=()=>{const[t,e]=M.useState(!1),[n,r]=M.useState(null),{signInWithGoogle:s,signInDemo:i}=he(),o=async()=>{r(null),e(!0);try{await s()}catch(l){r(l.message||"chec de la connexion Google")}finally{e(!1)}},a=async()=>{r(null),e(!0);try{await i()}catch(l){r(l.message||"chec du mode dmo")}finally{e(!1)}};return d.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-900 via-cyan-900 to-gray-900 p-4",children:[d.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[d.jsx("div",{className:"absolute w-96 h-96 -top-48 -left-48 bg-teal-500/20 rounded-full blur-3xl"}),d.jsx("div",{className:"absolute w-96 h-96 -bottom-48 -right-48 bg-cyan-500/20 rounded-full blur-3xl"})]}),d.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative z-10 w-full max-w-sm",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-3xl bg-gradient-to-br from-teal-400 via-cyan-400 to-blue-400 mb-4 shadow-soft-lg",children:d.jsx(Gn,{className:"w-10 h-10 text-white"})}),d.jsx("h1",{className:"text-3xl font-bold text-white",children:"Questify "}),d.jsx("p",{className:"text-gray-300 mt-2",children:"Transformez vos tches en aventure"})]}),d.jsxs(Te,{className:"p-6",children:[n&&d.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-xl text-sm",children:[" ",n]}),d.jsx(Ne,{type:"button",variant:"secondary",className:"w-full mb-4",onClick:o,isLoading:t,leftIcon:d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),children:"Continuer avec Google"}),d.jsxs("div",{className:"relative my-6",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-3 bg-white dark:bg-gray-800 text-gray-500",children:"ou"})})]}),d.jsx(Ne,{type:"button",variant:"outline",className:"w-full",onClick:a,isLoading:t,leftIcon:d.jsx(lH,{className:"w-5 h-5"}),children:"Mode Dmo (sans compte)"}),d.jsx("p",{className:"mt-4 text-xs text-center text-gray-400",children:"Mode dmo : donnes stockes localement sur cet appareil"})]}),d.jsx("p",{className:"mt-6 text-center text-xs text-gray-500",children:"Application rserve aux amis "})]})]})},Cw=({config:t,size:e="md",showLevel:n=!1,level:r,className:s})=>{const i={sm:"w-8 h-8 text-lg",md:"w-12 h-12 text-2xl",lg:"w-16 h-16 text-3xl",xl:"w-24 h-24 text-5xl"},o={sm:"w-4 h-4 text-[8px]",md:"w-5 h-5 text-[10px]",lg:"w-6 h-6 text-xs",xl:"w-8 h-8 text-sm"},l=t||{baseColor:"#6366f1",icon:""};return d.jsxs("div",{className:Z("relative",s),children:[d.jsxs("div",{className:Z("rounded-full flex items-center justify-center","ring-2 ring-white dark:ring-gray-800 shadow-lg",i[e]),style:{backgroundColor:l.baseColor},children:[d.jsx("span",{children:l.icon}),l.frame&&d.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-yellow-400"})]}),n&&r&&d.jsx("div",{className:Z("absolute -bottom-1 -right-1 rounded-full","bg-gradient-to-r from-teal-500 to-cyan-500","flex items-center justify-center font-bold text-white","ring-2 ring-white dark:ring-gray-800",o[e]),children:r})]})},IH=({selected:t,onSelect:e})=>{const n=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];return d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Icne"}),d.jsx("div",{className:"grid grid-cols-8 gap-2",children:n.map(r=>d.jsx("button",{onClick:()=>e(r),className:Z("w-10 h-10 rounded-lg flex items-center justify-center text-xl","hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",t===r&&"ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/30"),children:r},r))})]})})},jf=({value:t,max:e=100,color:n="primary",size:r="md",showLabel:s=!1,animated:i=!0,glow:o=!1})=>{const a=Math.min(t/e*100,100),l={primary:"from-teal-400 via-cyan-400 to-blue-400",xp:"from-green-400 via-emerald-400 to-teal-400",health:"from-red-400 via-rose-400 to-pink-500",mana:"from-blue-400 via-indigo-400 to-purple-400",gold:"from-yellow-400 via-amber-400 to-orange-400"},c={primary:"bg-gradient-to-r from-teal-100 to-cyan-100 dark:from-teal-900/30 dark:to-cyan-900/30",xp:"bg-gradient-to-r from-green-100 to-teal-100 dark:from-green-900/30 dark:to-teal-900/30",health:"bg-gradient-to-r from-red-100 to-pink-100 dark:from-red-900/30 dark:to-pink-900/30",mana:"bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30",gold:"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30"},u={sm:"h-2",md:"h-3.5",lg:"h-5"};return d.jsxs("div",{className:"w-full",children:[d.jsx("div",{className:Z("w-full rounded-full overflow-hidden relative",c[n],u[r],"ring-2 ring-purple-200/50 dark:ring-purple-800/30 shadow-sm"),children:d.jsx(Y.div,{className:Z("h-full rounded-full bg-gradient-to-r",l[n],o&&"shadow-lg"),initial:i?{width:0}:void 0,animate:{width:`${a}%`},transition:{duration:.5,ease:"easeOut"},children:i&&d.jsx("div",{className:"w-full h-full shimmer"})})}),s&&d.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500 dark:text-gray-400",children:[d.jsx("span",{children:t}),d.jsx("span",{children:e})]})]})},TN=({currentXP:t,xpToNextLevel:e,level:n,showLevel:r=!0})=>{const s=t/e*100;return d.jsxs("div",{className:"w-full",children:[r&&d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Niveau ",n]}),d.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t," / ",e," XP"]})]}),d.jsxs("div",{className:"relative",children:[d.jsx(jf,{value:t,max:e,color:"xp",size:"md",animated:!0,glow:!0}),d.jsx(Y.div,{className:"absolute right-0 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 flex items-center justify-center text-xs font-bold text-white shadow-lg",style:{right:`${100-s}%`},animate:{boxShadow:["0 0 10px rgba(34, 197, 94, 0.5)","0 0 20px rgba(34, 197, 94, 0.8)","0 0 10px rgba(34, 197, 94, 0.5)"]},transition:{duration:2,repeat:1/0},children:""})]})]})},Ea=({children:t,variant:e="default",rarity:n,size:r="md",dot:s=!1})=>{const i={default:"bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-600",primary:"bg-gradient-to-r from-primary-100 to-primary-200 dark:from-primary-900/40 dark:to-primary-800/40 text-primary-700 dark:text-primary-200 border border-primary-200 dark:border-primary-800",success:"bg-gradient-to-r from-green-100 to-green-200 dark:from-green-900/40 dark:to-green-800/40 text-green-700 dark:text-green-200 border border-green-200 dark:border-green-800",warning:"bg-gradient-to-r from-yellow-100 to-amber-200 dark:from-yellow-900/40 dark:to-amber-800/40 text-yellow-700 dark:text-yellow-200 border border-yellow-200 dark:border-yellow-800",danger:"bg-gradient-to-r from-red-100 to-red-200 dark:from-red-900/40 dark:to-red-800/40 text-red-700 dark:text-red-200 border border-red-200 dark:border-red-800",info:"bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-900/40 dark:to-blue-800/40 text-blue-700 dark:text-blue-200 border border-blue-200 dark:border-blue-800"},o={common:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 dark:from-gray-700 dark:to-gray-600 dark:text-gray-200 border border-gray-300",rare:"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-800 dark:from-blue-900 dark:to-cyan-900 dark:text-blue-200 ring-2 ring-blue-400 border border-blue-300",epic:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 dark:from-purple-900 dark:to-pink-900 dark:text-purple-200 ring-2 ring-purple-400 border border-purple-300",legendary:"bg-gradient-to-r from-yellow-300 via-amber-400 to-orange-400 text-white ring-2 ring-yellow-500 border border-yellow-400 shadow-lg"},a={sm:"px-2.5 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"};return d.jsxs("span",{className:Z("inline-flex items-center gap-1 rounded-full font-medium shadow-sm",a[r],n?o[n]:i[e]),children:[s&&d.jsx("span",{className:Z("w-1.5 h-1.5 rounded-full",e==="success"&&"bg-green-500",e==="warning"&&"bg-yellow-500",e==="danger"&&"bg-red-500",e==="info"&&"bg-blue-500",e==="primary"&&"bg-primary-500",e==="default"&&"bg-gray-500")}),t]})},AH=({priority:t})=>{const e={none:{label:"Aucune",variant:"default"},low:{label:"Basse",variant:"success"},medium:{label:"Moyenne",variant:"warning"},high:{label:"Haute",variant:"danger"},critical:{label:"Critique",variant:"danger"}},{label:n,variant:r}=e[t];return d.jsx(Ea,{variant:r,size:"sm",dot:!0,children:n})},RH=({difficulty:t})=>{const e={trivial:{label:"Trivial",rarity:"common"},easy:{label:"Facile",rarity:"common"},medium:{label:"Moyen",rarity:"rare"},hard:{label:"Difficile",rarity:"rare"},epic:{label:"pique",rarity:"epic"},legendary:{label:"Lgendaire",rarity:"legendary"}},{label:n,rarity:r}=e[t];return d.jsx(Ea,{rarity:r,size:"sm",children:n})},Pw=({amount:t,bonus:e})=>d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-sm font-medium",children:[d.jsx("span",{children:""}),d.jsx("span",{children:t}),e&&e>0&&d.jsxs("span",{className:"text-xs text-green-500",children:["+",e]}),d.jsx("span",{className:"text-xs",children:"XP"})]}),Iw=({amount:t})=>d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 text-sm font-medium",children:[d.jsx("span",{children:""}),d.jsx("span",{children:t})]}),NH=({streak:t})=>t===0?null:d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 text-sm font-medium",children:[d.jsx("span",{className:"fire-animation",children:""}),d.jsx("span",{children:t})]}),SN=[{path:"/",icon:cH,label:"Accueil"},{path:"/tasks",icon:Tw,label:"Tches"},{path:"/calendar",icon:_s,label:"Calendrier"},{path:"/quests",icon:B0,label:"Qutes"},{path:"/achievements",icon:Rr,label:"Achievements"},{path:"/stats",icon:vN,label:"Statistiques"}],DH=()=>{Ti();const{user:t,gameStats:e,signOut:n}=he(),{sidebarOpen:r,toggleSidebar:s,isMobile:i}=hr();if(!t||!e)return null;const o=async()=>{await n()};return d.jsxs(d.Fragment,{children:[d.jsx(qn,{children:i&&r&&d.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:s})}),d.jsxs(Y.aside,{initial:!1,animate:{width:r?280:80,x:i&&!r?-280:0},transition:{duration:.3,ease:[.4,0,.2,1]},style:{width:r?"280px":"80px"},className:Z("fixed left-0 top-0 h-screen z-50","bg-white/95 dark:bg-gray-900/95","border-r border-gray-200/80 dark:border-gray-700/50","overflow-hidden backdrop-blur-md",i&&!r?"hidden":"flex flex-col",i&&r&&"shadow-2xl"),children:[d.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-gray-100 dark:border-gray-800 flex-shrink-0",children:[d.jsx(qn,{mode:"wait",children:r&&d.jsxs(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-gradient-br flex items-center justify-center shadow-md",children:d.jsx(Gn,{className:"w-5 h-5 text-white"})}),d.jsx("span",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Questify"})]})}),d.jsx("button",{onClick:s,className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r?d.jsx(pa,{className:"w-5 h-5 text-gray-500"}):d.jsx(hH,{className:"w-5 h-5 text-gray-500"})})]}),d.jsxs("div",{className:Z("p-4 border-b border-gray-100 dark:border-gray-800 flex-shrink-0",!r&&"flex justify-center"),children:[d.jsxs("div",{className:Z("flex items-center gap-3",!r&&"flex-col"),children:[d.jsx(Cw,{config:t.avatar,size:r?"md":"sm",showLevel:!0,level:e.level}),r&&d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-medium truncate",children:t.username}),d.jsx("div",{className:"flex items-center gap-2 mt-1",children:d.jsx(NH,{streak:e.currentStreak})})]})]}),r&&d.jsx("div",{className:"mt-3",children:d.jsx(TN,{currentXP:e.currentXP,xpToNextLevel:e.xpToNextLevel,level:e.level,showLevel:!1})})]}),d.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:SN.map(a=>d.jsxs(Ky,{to:a.path,className:({isActive:l})=>Z("flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200","hover:bg-gray-100 dark:hover:bg-gray-800",l&&"bg-[var(--color-accent-50)] dark:bg-[var(--color-accent-900)]/30 text-accent font-medium",!l&&"text-gray-600 dark:text-gray-400",!r&&"justify-center"),children:[d.jsx(a.icon,{className:"w-5 h-5 flex-shrink-0"}),r&&d.jsx("span",{children:a.label})]},a.path))}),d.jsxs("div",{className:"p-3 border-t border-gray-200 dark:border-gray-800 space-y-1 flex-shrink-0",children:[d.jsxs(Ky,{to:"/settings",className:Z("flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors","hover:bg-gray-100 dark:hover:bg-gray-800",!r&&"justify-center"),children:[d.jsx(kN,{className:"w-5 h-5"}),r&&d.jsx("span",{children:"Paramtres"})]}),d.jsxs("button",{onClick:o,className:Z("w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors","hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400",!r&&"justify-center"),children:[d.jsx(_N,{className:"w-5 h-5"}),r&&d.jsx("span",{children:"Dconnexion"})]})]})]})]})},MH=()=>{const{isMobile:t}=hr(),e=Ti();return t?d.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-40 safe-area-bottom",children:[d.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-t border-white/20 dark:border-gray-700/30"}),d.jsx("div",{className:"relative flex justify-around items-center h-16 px-2 pb-safe max-w-lg mx-auto",children:SN.slice(0,5).map(n=>{const r=e.pathname===n.path;return d.jsxs(Ky,{to:n.path,className:"relative flex flex-col items-center justify-center flex-1 h-full py-1.5 touch-manipulation group",children:[r&&d.jsx(Y.div,{layoutId:"bottomNavIndicator",className:"absolute inset-x-2 top-1 h-1 bg-accent-gradient rounded-full",transition:{type:"spring",stiffness:500,damping:30}}),d.jsx(Y.div,{whileTap:{scale:.9},className:Z("p-1.5 rounded-xl transition-colors duration-200",r?"text-accent":"text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-300"),children:d.jsx(n.icon,{className:"w-5 h-5",strokeWidth:r?2.5:2})}),d.jsx("span",{className:Z("text-[10px] font-medium transition-colors duration-200",r?"text-accent":"text-gray-400 dark:text-gray-500"),children:n.label})]},n.path)})})]}):null};var jH={easeInOutQuad:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e}},OH=jH;function LH(t){return t*Math.PI/180}function yn(t,e){return t+Math.random()*(e-t)}function VH(t,e){return Math.floor(t+Math.random()*(e-t+1))}var wc;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(wc||(wc={}));var js;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(js||(js={}));const FH=1e3/60;class UH{constructor(e,n,r,s){this.getOptions=n;const{colors:i,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=s,this.w=yn(5,20),this.h=yn(5,20),this.radius=yn(5,10),this.vx=typeof o=="number"?yn(-o,o):yn(o.min,o.max),this.vy=typeof a=="number"?yn(-a,0):yn(a.min,a.max),this.shape=VH(0,2),this.angle=LH(yn(0,360)),this.angularSpin=yn(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=yn(0,1),this.rotationDirection=yn(0,1)?js.Positive:js.Negative}update(e){const{gravity:n,wind:r,friction:s,opacity:i,drawShape:o}=this.getOptions(),a=e/FH;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=s**a,this.vy*=s**a,this.rotateY>=1&&this.rotationDirection===js.Positive?this.rotationDirection=js.Negative:this.rotateY<=-1&&this.rotationDirection===js.Negative&&(this.rotationDirection=js.Positive);const l=.1*this.rotationDirection*a;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case wc.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case wc.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case wc.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class zH{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=yn(this.x,this.w+this.x),i=yn(this.y,this.h+this.y);return new UH(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:o,particlesGenerated:a,lastNumberOfPieces:l}=this,{run:c,recycle:u,numberOfPieces:h,debug:m,tweenFunction:p,tweenDuration:g}=this.getOptions();if(!c)return!1;const v=this.particles.length,_=u?v:a;if(_<h){l!==h&&(this.tweenProgress=0,this.tweenFrom=_,this.lastNumberOfPieces=h),this.tweenProgress=Math.min(g,Math.max(0,this.tweenProgress+s));const w=p(this.tweenProgress,this.tweenFrom,h,g),x=Math.round(w-_);for(let b=0;b<x;b++)this.particles.push(this.getParticle());this.particlesGenerated+=x}m&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${v}`,i.width-10,i.height-20));for(let w=this.particles.length-1;w>=0;w--){const x=this.particles[w];x.update(s),(x.y>i.height||x.y<-100||x.x>i.width+100||x.x<-100)&&(u&&_<=h?this.particles[w]=this.getParticle():this.removeParticleAt(w))}return v>0||_<h},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const Aw={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:OH.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class BH{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...Aw,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:a},canvas:l,context:c}=this,u=Math.min(s-this.lastFrameTime,50);if(a&&u<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(a?u%a:0),i&&(c.fillStyle="white",c.clearRect(0,0,l.width,l.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new zH(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var s,i;const n=(s=this._options)==null?void 0:s.run,r=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const $H=mn.createRef();class Rw extends mn.Component{constructor(e){super(e),this.canvas=mn.createRef(),this.canvas=e.canvasRef||$H}componentDidMount(){if(this.canvas.current){const e=jg(this.props)[0];this.confetti=new BH(this.canvas.current,e)}}componentDidUpdate(){const e=jg(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=jg(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return d.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}Rw.defaultProps={...Aw};Rw.displayName="ReactConfetti";function jg(t){const e={},n={},r={},s=[...Object.keys(Aw),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in t){const a=t[o];s.includes(o)?e[o]=a:i.includes(o)?i[o]=a:r[o]=a}return[e,r,n]}const WH=mn.forwardRef((t,e)=>d.jsx(Rw,{canvasRef:e,...t})),EN=[{id:"tasks",name:"Tches",icon:""},{id:"streaks",name:"Sries",icon:""},{id:"quests",name:"Qutes",icon:""},{id:"level",name:"Niveau",icon:""},{id:"social",name:"Social",icon:""},{id:"special",name:"Spcial",icon:""}],vr=[{id:"first_task",name:"Premier Pas",description:"Compltez votre premire tche",icon:"",rarity:"common",category:"tasks",xpReward:10,coinReward:5,requirement:{type:"tasks_completed",value:1}},{id:"task_10",name:"Dbutant",description:"Compltez 10 tches",icon:"",rarity:"common",category:"tasks",xpReward:25,coinReward:10,requirement:{type:"tasks_completed",value:10}},{id:"task_50",name:"Travailleur",description:"Compltez 50 tches",icon:"",rarity:"rare",category:"tasks",xpReward:100,coinReward:50,requirement:{type:"tasks_completed",value:50}},{id:"task_100",name:"Productif",description:"Compltez 100 tches",icon:"",rarity:"rare",category:"tasks",xpReward:200,coinReward:100,requirement:{type:"tasks_completed",value:100}},{id:"task_500",name:"Machine de Guerre",description:"Compltez 500 tches",icon:"",rarity:"epic",category:"tasks",xpReward:500,coinReward:250,requirement:{type:"tasks_completed",value:500}},{id:"task_1000",name:"Lgende Vivante",description:"Compltez 1000 tches",icon:"",rarity:"legendary",category:"tasks",xpReward:1e3,coinReward:500,requirement:{type:"tasks_completed",value:1e3}},{id:"streak_3",name:"Rgularit",description:"Maintenez un streak de 3 jours",icon:"",rarity:"common",category:"streaks",xpReward:30,coinReward:15,requirement:{type:"streak",value:3}},{id:"streak_7",name:"Semaine Parfaite",description:"Maintenez un streak de 7 jours",icon:"",rarity:"common",category:"streaks",xpReward:75,coinReward:35,requirement:{type:"streak",value:7}},{id:"streak_14",name:"Persvrant",description:"Maintenez un streak de 14 jours",icon:"",rarity:"rare",category:"streaks",xpReward:150,coinReward:75,requirement:{type:"streak",value:14}},{id:"streak_30",name:"Mois Lgendaire",description:"Maintenez un streak de 30 jours",icon:"",rarity:"epic",category:"streaks",xpReward:300,coinReward:150,requirement:{type:"streak",value:30}},{id:"streak_100",name:"Centurion",description:"Maintenez un streak de 100 jours",icon:"",rarity:"legendary",category:"streaks",xpReward:1e3,coinReward:500,requirement:{type:"streak",value:100}},{id:"streak_365",name:"Anne Incroyable",description:"Maintenez un streak de 365 jours",icon:"",rarity:"legendary",category:"streaks",xpReward:5e3,coinReward:2500,requirement:{type:"streak",value:365},secret:!0},{id:"level_5",name:"Apprenti",description:"Atteignez le niveau 5",icon:"",rarity:"common",category:"xp",xpReward:50,coinReward:25,requirement:{type:"level",value:5}},{id:"level_10",name:"Aventurier",description:"Atteignez le niveau 10",icon:"",rarity:"common",category:"xp",xpReward:100,coinReward:50,requirement:{type:"level",value:10}},{id:"level_25",name:"Hros",description:"Atteignez le niveau 25",icon:"",rarity:"rare",category:"xp",xpReward:250,coinReward:125,requirement:{type:"level",value:25}},{id:"level_50",name:"Champion",description:"Atteignez le niveau 50",icon:"",rarity:"epic",category:"xp",xpReward:500,coinReward:250,requirement:{type:"level",value:50}},{id:"level_100",name:"Matre Lgendaire",description:"Atteignez le niveau 100",icon:"",rarity:"legendary",category:"xp",xpReward:2e3,coinReward:1e3,requirement:{type:"level",value:100}},{id:"xp_1000",name:"Collectionneur d'XP",description:"Gagnez 1000 XP au total",icon:"",rarity:"common",category:"xp",xpReward:50,coinReward:25,requirement:{type:"total_xp",value:1e3}},{id:"xp_10000",name:"Chasseur d'XP",description:"Gagnez 10000 XP au total",icon:"",rarity:"rare",category:"xp",xpReward:200,coinReward:100,requirement:{type:"total_xp",value:1e4}},{id:"xp_100000",name:"Matre de l'XP",description:"Gagnez 100000 XP au total",icon:"",rarity:"legendary",category:"xp",xpReward:1e3,coinReward:500,requirement:{type:"total_xp",value:1e5}},{id:"first_epic",name:"Premier Dfi pique",description:"Compltez une tche pique",icon:"",rarity:"rare",category:"tasks",xpReward:100,coinReward:50,requirement:{type:"epic_tasks",value:1}},{id:"first_legendary",name:"Lgende",description:"Compltez une tche lgendaire",icon:"",rarity:"epic",category:"tasks",xpReward:250,coinReward:125,requirement:{type:"legendary_tasks",value:1}},{id:"legendary_10",name:"Chasseur de Lgendes",description:"Compltez 10 tches lgendaires",icon:"",rarity:"legendary",category:"tasks",xpReward:1e3,coinReward:500,requirement:{type:"legendary_tasks",value:10}},{id:"early_bird",name:"Lve-tt",description:"Compltez une tche avant 7h du matin",icon:"",rarity:"common",category:"time",xpReward:25,coinReward:10,requirement:{type:"early_completion",value:1}},{id:"night_owl",name:"Oiseau de Nuit",description:"Compltez une tche aprs minuit",icon:"",rarity:"common",category:"time",xpReward:25,coinReward:10,requirement:{type:"late_completion",value:1}},{id:"speed_demon",name:"clair",description:"Compltez 5 tches en moins d'une heure",icon:"",rarity:"rare",category:"time",xpReward:150,coinReward:75,requirement:{type:"fast_completion",value:5}},{id:"perfect_day",name:"Journe Parfaite",description:"Compltez toutes vos tches du jour",icon:"",rarity:"rare",category:"time",xpReward:100,coinReward:50,requirement:{type:"perfect_day",value:1}},{id:"perfect_week",name:"Semaine Parfaite",description:"Compltez toutes vos tches de la semaine",icon:"",rarity:"epic",category:"time",xpReward:500,coinReward:250,requirement:{type:"perfect_week",value:1}},{id:"category_master",name:"Spcialiste",description:"Compltez 50 tches dans une mme catgorie",icon:"",rarity:"rare",category:"categories",xpReward:150,coinReward:75,requirement:{type:"category_tasks",value:50}},{id:"well_rounded",name:"Polyvalent",description:"Compltez des tches dans toutes les catgories",icon:"",rarity:"rare",category:"categories",xpReward:200,coinReward:100,requirement:{type:"all_categories",value:1}},{id:"comeback",name:"Le Retour",description:"Reconnectez-vous aprs 7 jours d'absence",icon:"",rarity:"common",category:"special",xpReward:50,coinReward:25,requirement:{type:"comeback",value:7},secret:!0},{id:"perfectionist",name:"Perfectionniste",description:"Compltez 10 tches avec toutes les sous-tches",icon:"",rarity:"rare",category:"special",xpReward:150,coinReward:75,requirement:{type:"perfect_tasks",value:10}},{id:"overachiever",name:"Surpassement",description:"Gagnez 500 XP en une seule journe",icon:"",rarity:"epic",category:"special",xpReward:250,coinReward:125,requirement:{type:"daily_xp",value:500}},{id:"founder",name:"Fondateur",description:"Crez votre compte",icon:"",rarity:"common",category:"special",xpReward:50,coinReward:25,requirement:{type:"account_created",value:1}},{id:"collector_10",name:"Petit Collectionneur",description:"Dbloquez 10 achievements",icon:"",rarity:"common",category:"collection",xpReward:100,coinReward:50,requirement:{type:"achievements",value:10}},{id:"collector_25",name:"Grand Collectionneur",description:"Dbloquez 25 achievements",icon:"",rarity:"rare",category:"collection",xpReward:300,coinReward:150,requirement:{type:"achievements",value:25}},{id:"collector_all",name:"Collectionneur Ultime",description:"Dbloquez tous les achievements",icon:"",rarity:"legendary",category:"collection",xpReward:2e3,coinReward:1e3,requirement:{type:"achievements",value:999},secret:!0},{id:"quest_first",name:"Quteur",description:"Compltez votre premire qute",icon:"",rarity:"common",category:"special",xpReward:50,coinReward:25,requirement:{type:"quests_completed",value:1}},{id:"quest_10",name:"Aventurier Confirm",description:"Compltez 10 qutes",icon:"",rarity:"rare",category:"special",xpReward:200,coinReward:100,requirement:{type:"quests_completed",value:10}},{id:"daily_warrior",name:"Guerrier Quotidien",description:"Compltez 30 qutes journalires",icon:"",rarity:"epic",category:"special",xpReward:500,coinReward:250,requirement:{type:"daily_quests",value:30}}],W0={common:"#9ca3af",rare:"#3b82f6",epic:"#8b5cf6",legendary:"#f59e0b"},CN=t=>vr.find(e=>e.id===t),kh=Object.freeze(Object.defineProperty({__proto__:null,ACHIEVEMENTS:vr,ACHIEVEMENT_CATEGORIES:EN,RARITY_COLORS:W0,getAchievementById:CN},Symbol.toStringTag,{value:"Module"})),HH=()=>{const{xpGained:t,hideGains:e}=hr();return mn.useEffect(()=>{if(t){const n=setTimeout(e,2e3);return()=>clearTimeout(n)}},[t,e]),d.jsx(qn,{children:t&&d.jsx(Y.div,{initial:{opacity:0,y:50,scale:.5},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50},className:"fixed bottom-20 right-4 z-50 pointer-events-none",children:d.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-full shadow-lg",children:[d.jsx(Jm,{className:"w-5 h-5"}),d.jsxs("span",{className:"font-bold text-lg",children:["+",t," XP"]})]})})})},qH=()=>{const{isLevelUpModalOpen:t,newLevel:e,hideLevelUp:n}=hr(),{gameStats:r}=he(),[s,i]=mn.useState(!1);return mn.useEffect(()=>{if(t){i(!0);const o=setTimeout(()=>{i(!1),n()},5e3);return()=>clearTimeout(o)}},[t,n]),d.jsx(qn,{children:t&&d.jsxs(d.Fragment,{children:[s&&d.jsx(WH,{width:window.innerWidth,height:window.innerHeight,recycle:!1,numberOfPieces:200,gravity:.3}),d.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:n,children:d.jsxs(Y.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",stiffness:200,damping:20},className:"text-center",onClick:o=>o.stopPropagation(),children:[d.jsx(Y.div,{animate:{boxShadow:["0 0 20px rgba(251, 191, 36, 0.5)","0 0 60px rgba(251, 191, 36, 0.8)","0 0 20px rgba(251, 191, 36, 0.5)"]},transition:{duration:1.5,repeat:1/0},className:"w-32 h-32 mx-auto mb-6 rounded-full bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center",children:d.jsx(eH,{className:"w-16 h-16 text-white"})}),d.jsx(Y.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-4xl font-bold text-white mb-2",children:"LEVEL UP!"}),d.jsx(Y.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.5,type:"spring"},className:"text-6xl font-black gradient-text mb-4",children:e}),d.jsx(Y.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"text-xl text-gray-300",children:Ew(e)}),d.jsx(Y.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"mt-8 px-8 py-3 bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-bold rounded-full",onClick:n,children:"Continuer l'aventure !"})]})})]})})},GH=()=>{const{unlockedAchievement:t,hideAchievementUnlock:e}=hr(),n=t?CN(t):null;return mn.useEffect(()=>{if(t){const r=setTimeout(e,4e3);return()=>clearTimeout(r)}},[t,e]),d.jsx(qn,{children:n&&d.jsx(Y.div,{initial:{x:400,opacity:0},animate:{x:0,opacity:1},exit:{x:400,opacity:0},transition:{type:"spring",stiffness:200,damping:25},className:"fixed top-4 right-4 z-50",children:d.jsx("div",{className:"p-4 rounded-xl shadow-2xl bg-white dark:bg-gray-800 border-2",style:{borderColor:W0[n.rarity]},children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx(Y.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring"},className:"w-16 h-16 rounded-xl flex items-center justify-center text-3xl",style:{backgroundColor:W0[n.rarity]+"20"},children:n.icon}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(Rr,{className:"w-5 h-5 text-yellow-500"}),d.jsx("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Achievement Dbloqu !"})]}),d.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:n.name}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n.description}),d.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[d.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600",children:[d.jsx(Sw,{className:"w-3 h-3"}),"+",n.xpReward," XP"]}),d.jsxs("span",{className:"text-xs text-yellow-600",children:["+",n.coinReward," "]})]})]})]})})})})},KH=()=>d.jsxs(d.Fragment,{children:[d.jsx(HH,{}),d.jsx(qH,{}),d.jsx(GH,{})]}),_c=({isOpen:t,onClose:e,title:n,children:r,size:s="md",showCloseButton:i=!0})=>{const o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-4xl"};return d.jsx(qn,{children:t&&d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-end sm:items-center justify-center sm:p-4",children:[d.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),d.jsxs(Y.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{duration:.3,type:"spring",damping:25},className:Z("relative w-full bg-white dark:bg-gray-800 shadow-xl","rounded-t-3xl sm:rounded-2xl","max-h-[90vh] sm:max-h-[85vh] overflow-hidden flex flex-col",o[s]),children:[(n||i)&&d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[d.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full sm:hidden"}),n&&d.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white pt-2 sm:pt-0",children:n}),i&&d.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors touch-manipulation",children:d.jsx(Xm,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),d.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:r})]})]})})})},_r=({label:t,error:e,leftIcon:n,rightIcon:r,className:s,...i})=>d.jsxs("div",{className:"w-full",children:[t&&d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),d.jsxs("div",{className:"relative",children:[n&&d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:n}),d.jsx("input",{className:Z("w-full px-4 py-2.5 rounded-2xl border-2 border-purple-200 dark:border-purple-800/30","bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-300 focus:border-primary-300","placeholder-gray-400 dark:placeholder-gray-500","transition-all duration-200 shadow-sm focus:shadow-soft",n?"pl-10":"",r?"pr-10":"",e&&"border-red-300 focus:ring-red-300",s),...i}),r&&d.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400",children:r})]}),e&&d.jsx("p",{className:"mt-1 text-sm text-red-500",children:e})]}),PN=({label:t,error:e,className:n,...r})=>d.jsxs("div",{className:"w-full",children:[t&&d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),d.jsx("textarea",{className:Z("w-full px-4 py-2.5 rounded-2xl border-2 border-purple-200 dark:border-purple-800/30","bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-300 focus:border-primary-300","placeholder-gray-400 dark:placeholder-gray-500","transition-all duration-200 resize-none shadow-sm focus:shadow-soft",e&&"border-red-300 focus:ring-red-300",n),...r}),e&&d.jsx("p",{className:"mt-1 text-sm text-red-500",children:e})]}),so=({label:t,error:e,options:n,className:r,...s})=>d.jsxs("div",{className:"w-full",children:[t&&d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),d.jsx("select",{className:Z("w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","transition-colors duration-200 cursor-pointer",e&&"border-red-500 focus:ring-red-500",r),...s,children:n.map(i=>d.jsx("option",{value:i.value,children:i.label},i.value))}),e&&d.jsx("p",{className:"mt-1 text-sm text-red-500",children:e})]}),Zn=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null,jt=(t,e,n="sine",r=.3)=>{if(!Zn)return;const s=Zn.createOscillator(),i=Zn.createGain();s.connect(i),i.connect(Zn.destination),s.frequency.value=t,s.type=n,i.gain.setValueAtTime(r,Zn.currentTime),i.gain.exponentialRampToValueAtTime(.01,Zn.currentTime+e),s.start(Zn.currentTime),s.stop(Zn.currentTime+e)},QH={taskComplete:()=>{jt(523.25,.1,"sine",.3),setTimeout(()=>jt(659.25,.1,"sine",.3),100),setTimeout(()=>jt(783.99,.2,"sine",.3),200)},xpGain:()=>{jt(987.77,.05,"square",.2),setTimeout(()=>jt(1318.51,.1,"square",.2),50)},levelUp:()=>{[523.25,659.25,783.99,1046.5].forEach((e,n)=>{setTimeout(()=>jt(e,.2,"sine",.4),n*150)})},achievementUnlock:()=>{jt(392,.15,"triangle",.3),setTimeout(()=>jt(523.25,.15,"triangle",.3),150),setTimeout(()=>jt(659.25,.15,"triangle",.3),300),setTimeout(()=>jt(783.99,.3,"triangle",.4),450)},questComplete:()=>{[261.63,329.63,392,523.25,659.25,783.99].forEach((e,n)=>{setTimeout(()=>jt(e,.15,"sine",.25),n*100)})},error:()=>{jt(200,.2,"sawtooth",.2)},click:()=>{jt(800,.05,"square",.1)},streak:()=>{jt(349.23,.1,"triangle",.3),setTimeout(()=>jt(440,.1,"triangle",.3),80),setTimeout(()=>jt(523.25,.15,"triangle",.4),160)}},bc=(t,e=!0)=>{e&&Zn&&(Zn.state==="suspended"&&Zn.resume(),QH[t]())},YH=[{value:"Travail",label:" Travail",color:"#3b82f6"},{value:"Personnel",label:" Personnel",color:"#22c55e"},{value:"Sant",label:" Sant",color:"#ef4444"},{value:"tudes",label:" tudes",color:"#8b5cf6"},{value:"Finances",label:" Finances",color:"#f59e0b"},{value:"Social",label:" Social",color:"#ec4899"},{value:"Loisirs",label:" Loisirs",color:"#06b6d4"},{value:"Maison",label:" Maison",color:"#84cc16"}],XH=({isOpen:t,onClose:e,editTask:n})=>{var N;const{addTask:r,updateTask:s,categories:i,calculateTaskRewards:o}=Qn(),{user:a}=he(),[l,c]=M.useState(!1),[u,h]=M.useState({}),[m,p]=M.useState({}),[g,v]=M.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",category:(n==null?void 0:n.category)||"Personnel",priority:(n==null?void 0:n.priority)||"medium",difficulty:(n==null?void 0:n.difficulty)||"medium",dueDate:n!=null&&n.dueDate?new Date(n.dueDate).toISOString().slice(0,16):"",estimatedTime:((N=n==null?void 0:n.estimatedTime)==null?void 0:N.toString())||"",recurrence:(n==null?void 0:n.recurrence)||"none",subtasks:(n==null?void 0:n.subtasks.map(F=>F.title))||[],tags:(n==null?void 0:n.tags.join(", "))||""}),[_,w]=M.useState("");M.useEffect(()=>{var F,W,z;t&&(v({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",category:(n==null?void 0:n.category)||"Personnel",priority:(n==null?void 0:n.priority)||"medium",difficulty:(n==null?void 0:n.difficulty)||"medium",dueDate:n!=null&&n.dueDate?new Date(n.dueDate).toISOString().slice(0,16):"",estimatedTime:((F=n==null?void 0:n.estimatedTime)==null?void 0:F.toString())||"",recurrence:(n==null?void 0:n.recurrence)||"none",subtasks:((W=n==null?void 0:n.subtasks)==null?void 0:W.map(K=>K.title))||[],tags:((z=n==null?void 0:n.tags)==null?void 0:z.join(", "))||""}),h({}),p({}))},[t,n]);const x=o(g.difficulty,g.priority),b=()=>{const F={};return g.title.trim()?g.title.trim().length<2&&(F.title="Le titre doit faire au moins 2 caractres"):F.title="Le titre est obligatoire",h(F),Object.keys(F).length===0},C=async F=>{if(F.preventDefault(),p({title:!0}),!!b()){if(!a){h({general:"Vous devez tre connect pour crer une tche"});return}c(!0);try{const W={userId:a.id,title:g.title.trim(),description:g.description.trim()||void 0,category:g.category,priority:g.priority,difficulty:g.difficulty,dueDate:g.dueDate?new Date(g.dueDate):void 0,estimatedTime:g.estimatedTime?parseInt(g.estimatedTime):void 0,recurrence:g.recurrence,subtasks:g.subtasks.map((z,K)=>({id:`subtask-${K}-${Date.now()}`,title:z,completed:!1})),tags:g.tags.split(",").map(z=>z.trim()).filter(Boolean),status:"pending",progress:0};n?await s(n.id,W):(await r(W),bc("click")),e(),P()}catch(W){console.error("Error saving task:",W);const z=(W==null?void 0:W.message)||"Une erreur est survenue lors de la cration de la tche";h({general:z})}finally{c(!1)}}},P=()=>{v({title:"",description:"",category:"Personnel",priority:"medium",difficulty:"medium",dueDate:"",estimatedTime:"",recurrence:"none",subtasks:[],tags:""}),w(""),h({}),p({})},j=()=>{_.trim()&&(v(F=>({...F,subtasks:[...F.subtasks,_.trim()]})),w(""))},S=F=>{v(W=>({...W,subtasks:W.subtasks.filter((z,K)=>K!==F)}))},T=F=>{v({...g,title:F.target.value}),m.title&&(F.target.value.trim()?h(W=>({...W,title:void 0})):h(W=>({...W,title:"Le titre est obligatoire"})))},E=()=>{p(F=>({...F,title:!0})),g.title.trim()||h(F=>({...F,title:"Le titre est obligatoire"}))},R=[{value:"low",label:" Basse"},{value:"medium",label:" Moyenne"},{value:"high",label:" Haute"},{value:"critical",label:" Critique"}],I=[{value:"trivial",label:" Trivial (5 XP)"},{value:"easy",label:" Facile (10 XP)"},{value:"medium",label:" Moyen (25 XP)"},{value:"hard",label:" Difficile (50 XP)"},{value:"epic",label:" pique (100 XP)"},{value:"legendary",label:" Lgendaire (200 XP)"}],D=[{value:"none",label:"Aucune"},{value:"daily",label:"Quotidien"},{value:"weekly",label:"Hebdomadaire"},{value:"monthly",label:"Mensuel"}];return d.jsx(_c,{isOpen:t,onClose:e,title:n?"Modifier la tche":"Nouvelle tche",size:"xl",children:d.jsxs("form",{onSubmit:C,noValidate:!0,className:"space-y-5",children:[d.jsx(qn,{children:u.general&&d.jsxs(Y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-3 p-3 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500",children:[d.jsx(JW,{className:"w-5 h-5 flex-shrink-0"}),d.jsx("span",{className:"text-sm",children:u.general})]})}),d.jsx("div",{children:d.jsx(_r,{label:"Titre de la tche *",placeholder:"Que devez-vous accomplir ?",value:g.title,onChange:T,onBlur:E,error:m.title?u.title:void 0,autoFocus:!0})}),d.jsx(PN,{label:"Description (optionnel)",placeholder:"Ajoutez des dtails ou des notes...",rows:2,value:g.description,onChange:F=>v({...g,description:F.target.value})}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx(so,{label:"Catgorie",options:YH,value:g.category,onChange:F=>v({...g,category:F.target.value})}),d.jsx(so,{label:"Priorit",options:R,value:g.priority,onChange:F=>v({...g,priority:F.target.value})})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx(so,{label:"Difficult",options:I,value:g.difficulty,onChange:F=>v({...g,difficulty:F.target.value})}),d.jsx(_r,{label:"Date d'chance (optionnel)",type:"datetime-local",value:g.dueDate,onChange:F=>v({...g,dueDate:F.target.value}),required:!1})]}),d.jsxs("div",{className:"p-4 bg-gradient-to-r from-teal-500/10 to-cyan-500/10 border border-teal-500/20 rounded-xl",children:[d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2 font-medium",children:" Rcompenses estimes :"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Pw,{amount:x.xp}),d.jsx(Iw,{amount:x.coins})]})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx(_r,{label:"Temps estim (minutes)",type:"number",placeholder:"Ex: 30",min:"1",value:g.estimatedTime,onChange:F=>v({...g,estimatedTime:F.target.value})}),d.jsx(so,{label:"Rcurrence",options:D,value:g.recurrence,onChange:F=>v({...g,recurrence:F.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sous-tches (optionnel)"}),d.jsxs("div",{className:"flex gap-2 mb-2",children:[d.jsx(_r,{placeholder:"Ajouter une tape...",value:_,onChange:F=>w(F.target.value),onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),j())}),d.jsx(Ne,{type:"button",variant:"secondary",onClick:j,className:"flex-shrink-0",children:d.jsx(So,{className:"w-4 h-4"})})]}),g.subtasks.length>0&&d.jsx("ul",{className:"space-y-2 max-h-32 overflow-y-auto",children:g.subtasks.map((F,W)=>d.jsxs(Y.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-2.5 bg-gray-100 dark:bg-gray-900 rounded-lg",children:[d.jsx("span",{className:"text-sm truncate flex-1 mr-2",children:F}),d.jsx("button",{type:"button",onClick:()=>S(W),className:"text-red-500 hover:text-red-600 p-1 flex-shrink-0",children:d.jsx(di,{className:"w-4 h-4"})})]},W))})]}),d.jsx(_r,{label:"Tags (optionnel)",placeholder:"projet, urgent, ide... (spars par des virgules)",value:g.tags,onChange:F=>v({...g,tags:F.target.value})}),d.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[d.jsx(Ne,{type:"button",variant:"secondary",onClick:e,className:"w-full sm:w-auto",children:"Annuler"}),d.jsx(Ne,{type:"submit",variant:"game",isLoading:l,className:"w-full sm:w-auto",children:n?"Enregistrer":"Crer la tche"})]})]})})},JH=()=>{const{sidebarOpen:t,isMobile:e,isTaskModalOpen:n,editingTask:r,openTaskModal:s,closeTaskModal:i}=hr();return d.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 overflow-x-hidden",children:[d.jsx(DH,{}),d.jsx("main",{className:Z("min-h-screen transition-all duration-300 overflow-x-hidden",!e&&t?"ml-[280px]":"",!e&&!t?"ml-20":"",e?"ml-0 pb-24":""),children:d.jsx("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8",children:d.jsx(E5,{})})}),d.jsx(MH,{}),d.jsx(Y.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:400,damping:25},className:Z("fixed z-40",e?"bottom-[88px] right-4":"bottom-8 right-8"),children:d.jsxs(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"relative w-14 h-14 rounded-2xl bg-accent-gradient-br text-white shadow-lg shadow-accent flex items-center justify-center group",children:[d.jsx("span",{className:"absolute inset-0 rounded-2xl bg-accent-gradient-br animate-ping opacity-20"}),d.jsx(So,{className:"w-6 h-6 relative z-10 transition-transform group-hover:rotate-90"})]})}),d.jsx(XH,{isOpen:n,onClose:i,editTask:r}),d.jsx(KH,{})]})},ZH={initial:{opacity:0,y:12},animate:{opacity:1,y:0,transition:{duration:.3,ease:[.25,.1,.25,1]}},exit:{opacity:0,y:-8,transition:{duration:.2}}},Oo=({children:t,className:e})=>d.jsx(Y.div,{variants:ZH,initial:"initial",animate:"animate",exit:"exit",className:e,children:t}),Nw={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.06,delayChildren:.1}}},Vn={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:[.25,.1,.25,1]}}},Th=({task:t,onComplete:e,compact:n=!1})=>{const[r,s]=M.useState(!1),[i,o]=M.useState(!1),{completeTask:a,deleteTask:l,archiveTask:c,toggleSubtask:u}=Qn(),{showXPGain:h,showCoinsGain:m,showLevelUp:p,setEditingTask:g,openTaskModal:v}=hr(),_=()=>{g(t),v(),s(!1)},w=async()=>{const j=await a(t.id);bc("taskComplete"),h(j.xpGained),m(j.coinsGained),j.leveledUp&&setTimeout(()=>{p(j.newLevel),bc("levelUp")},500),e==null||e()},x=async j=>{await u(t.id,j),bc("click")},b=t.status==="completed",C=t.dueDate&&new Date(t.dueDate)<new Date&&!b,P=t.subtasks.filter(j=>j.completed).length;return d.jsx(Y.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:d.jsxs(Te,{variant:"game",className:Z("p-3 sm:p-4 relative overflow-hidden transition-shadow duration-200 hover:shadow-soft-lg",b&&"opacity-60",C&&"border-l-4 border-l-red-500"),children:[d.jsx("div",{className:"absolute top-0 right-0 w-12 sm:w-16 h-12 sm:h-16 -mr-6 sm:-mr-8 -mt-6 sm:-mt-8 rounded-full opacity-20",style:{backgroundColor:SH(t.priority)}}),d.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[d.jsx("button",{onClick:w,disabled:b,className:Z("flex-shrink-0 mt-0.5 transition-colors touch-manipulation",b?"text-green-500":"text-gray-400 hover:text-green-500"),children:b?d.jsx(ur,{className:"w-5 h-5 sm:w-6 sm:h-6"}):d.jsx(U0,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsx("h3",{className:Z("font-medium text-sm sm:text-base text-gray-900 dark:text-white line-clamp-2",b&&"line-through text-gray-500"),children:t.title}),d.jsxs("div",{className:"relative flex-shrink-0",children:[d.jsx("button",{onClick:()=>s(!r),className:"p-1.5 rounded hover:bg-gray-100 dark:hover:bg-gray-700 touch-manipulation",children:d.jsx(pH,{className:"w-4 h-4 text-gray-400"})}),d.jsx(qn,{children:r&&d.jsxs(Y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute right-0 top-full mt-1 w-36 sm:w-40 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-10",children:[d.jsxs("button",{onClick:_,className:"w-full px-3 py-2.5 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 touch-manipulation",children:[d.jsx(vH,{className:"w-4 h-4"})," Modifier"]}),d.jsxs("button",{onClick:()=>{c(t.id),s(!1)},className:"w-full px-3 py-2.5 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 touch-manipulation",children:[d.jsx(ZW,{className:"w-4 h-4"})," Archiver"]}),d.jsxs("button",{onClick:()=>{l(t.id),s(!1)},className:"w-full px-3 py-2.5 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2 touch-manipulation",children:[d.jsx(di,{className:"w-4 h-4"})," Supprimer"]})]})})]})]}),t.description&&!n&&d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:t.description}),d.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2 mt-2",children:[d.jsx(AH,{priority:t.priority}),!n&&d.jsx(RH,{difficulty:t.difficulty}),t.category&&!n&&d.jsx(Ea,{variant:"default",size:"sm",children:t.category})]}),t.subtasks.length>0&&!n&&d.jsxs("div",{className:"mt-2 sm:mt-3",children:[d.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-1 text-xs sm:text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 touch-manipulation",children:[i?d.jsx(iH,{className:"w-3 h-3 sm:w-4 sm:h-4"}):d.jsx(zt,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsxs("span",{children:[P,"/",t.subtasks.length," sous-tches"]})]}),!i&&t.subtasks.length>0&&d.jsx(jf,{value:P,max:t.subtasks.length,color:"primary",size:"sm"}),d.jsx(qn,{children:i&&d.jsx(Y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-2 space-y-1 overflow-hidden",children:t.subtasks.map(j=>d.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[d.jsx("button",{onClick:()=>x(j.id),className:Z("flex-shrink-0 touch-manipulation",j.completed?"text-green-500":"text-gray-400 hover:text-green-500"),children:j.completed?d.jsx(ur,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}):d.jsx(U0,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),d.jsx("span",{className:Z("truncate",j.completed&&"line-through text-gray-400"),children:j.title})]},j.id))})})]}),d.jsxs("div",{className:"flex items-center justify-between mt-2 sm:mt-3 pt-2 sm:pt-3 border-t border-gray-100 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-xs sm:text-sm text-gray-500 min-w-0",children:[t.dueDate&&d.jsxs("span",{className:Z("flex items-center gap-1 truncate",C&&"text-red-500"),children:[d.jsx(_s,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),d.jsx("span",{className:"truncate",children:TH(t.dueDate)})]}),t.estimatedTime&&!n&&d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(Ym,{className:"w-3 h-3 sm:w-4 sm:h-4"}),t.estimatedTime,"m"]})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[d.jsx(Pw,{amount:t.xpReward}),!n&&d.jsx(Iw,{amount:t.coinReward})]})]})]})]})]})})},H0=({quest:t,compact:e=!1})=>{const{claimQuestRewards:n}=Lu(),[r,s]=mn.useState(!1),i=t.objectives.filter(g=>g.completed).length,o=t.objectives.length,a=t.objectives.reduce((g,v)=>g+v.current,0),l=t.objectives.reduce((g,v)=>g+v.target,0),c=EH(t.endDate),u=()=>{if(t.completed)return"Termin ";if(o===1){const g=t.objectives[0];return`${g.current}/${g.target}`}return l>o?`${a}/${l}`:`${i}/${o}`},h=async()=>{s(!0);try{await n(t.id),bc("questComplete")}finally{s(!1)}},m={daily:"border-l-blue-500 bg-blue-50 dark:bg-blue-900/10",weekly:"border-l-cyan-500 bg-cyan-50 dark:bg-cyan-900/10",special:"border-l-yellow-500 bg-yellow-50 dark:bg-yellow-900/10",story:"border-l-green-500 bg-green-50 dark:bg-green-900/10"},p={daily:"Quotidienne",weekly:"Hebdomadaire",special:"Spciale",story:"Histoire"};return d.jsx(Y.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:d.jsx(Te,{className:Z("p-4 border-l-4 transition-shadow duration-200 hover:shadow-soft-lg",m[t.type],t.completed&&!t.claimed&&"ring-2 ring-yellow-400 ring-opacity-50"),children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:Z("w-12 h-12 rounded-2xl flex items-center justify-center text-2xl","bg-gradient-to-br from-white to-teal-50 dark:from-gray-800 dark:to-teal-900/20 shadow-soft border-2 border-teal-100 dark:border-teal-900/30"),children:t.icon}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"flex items-start justify-between gap-3 mb-2",children:d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[d.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:t.title}),d.jsx(Ea,{variant:t.type==="daily"?"info":t.type==="weekly"?"primary":"warning",size:"sm",children:p[t.type]}),d.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:[d.jsx(Ym,{className:"w-3.5 h-3.5"}),d.jsx("span",{children:c})]})]}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:t.description}),e&&d.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[d.jsx("div",{className:"flex-1",children:d.jsx(jf,{value:t.completed?100:a,max:t.completed?100:l,color:t.completed?"gold":"primary",size:"sm"})}),d.jsx("span",{className:Z("text-xs font-medium whitespace-nowrap",t.completed?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"),children:u()}),t.completed&&!t.claimed&&d.jsxs(Ne,{variant:"game",size:"sm",onClick:h,isLoading:r,className:"ml-1 text-xs py-1 px-2",children:[d.jsx(z0,{className:"w-3 h-3 mr-1"}),"Rclamer"]})]})]})}),!e&&d.jsx("div",{className:"mt-3 space-y-2",children:t.objectives.map(g=>d.jsx(eq,{objective:g},g.id))}),!e&&d.jsxs("div",{className:"mt-3",children:[d.jsxs("div",{className:"flex justify-between text-xs font-medium mb-2",children:[d.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:t.completed?" Qute termine !":"Progression"}),d.jsx("span",{className:Z("font-semibold",t.completed?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"),children:u()})]}),d.jsx(jf,{value:t.completed?100:a,max:t.completed?100:l,color:t.completed?"gold":"primary",size:"md"})]}),!e&&d.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[d.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:"Rcompenses:"}),d.jsx(Pw,{amount:t.rewards.xp}),d.jsx(Iw,{amount:t.rewards.coins}),t.rewards.gems&&d.jsxs(Ea,{variant:"primary",size:"sm",children:[" ",t.rewards.gems]})]}),t.completed&&!t.claimed&&d.jsx(Ne,{variant:"game",size:"sm",onClick:h,isLoading:r,leftIcon:d.jsx(z0,{className:"w-4 h-4"}),children:"Rcuprer"}),t.claimed&&d.jsxs(Ea,{variant:"success",size:"sm",children:[d.jsx(ur,{className:"w-3 h-3 mr-1"}),"Rcupr"]})]})]})]})})})},eq=({objective:t})=>(Math.min(t.current/t.target*100,100),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("div",{className:Z("w-5 h-5 rounded-full flex items-center justify-center",t.completed?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700"),children:t.completed?d.jsx(ur,{className:"w-3 h-3"}):d.jsx(zt,{className:"w-3 h-3 text-gray-400"})}),d.jsx("span",{className:Z("flex-1",t.completed&&"line-through text-gray-400"),children:t.description}),d.jsxs("span",{className:"text-xs text-gray-500",children:[t.current,"/",t.target]})]})),tq=()=>{const{gameStats:t}=he();if(!t)return null;const e=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],n=new Date().getDay(),r=n===0?6:n-1;return d.jsxs(Te,{className:"p-4",children:[d.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[d.jsx($0,{className:"w-5 h-5"}),"Cette semaine"]}),d.jsx("div",{className:"flex justify-between items-end h-24",children:e.map((s,i)=>{const o=i===r,l=i<r||o;return d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx("div",{className:`w-8 rounded-full transition-all ${o?"bg-primary-500 h-16":l?"bg-primary-300 dark:bg-primary-700 h-12":"bg-gray-200 dark:bg-gray-700 h-4"}`}),d.jsx("span",{className:`text-xs ${o?"font-bold text-primary-500":"text-gray-500"}`,children:s})]},s)})}),d.jsxs("div",{className:"flex justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-500",children:"XP cette semaine"}),d.jsx("p",{className:"text-xl font-bold",children:On(t.weeklyXP)})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Tches"}),d.jsx("p",{className:"text-xl font-bold",children:t.weeklyTasksCompleted})]})]})]})};function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}function Sn(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function _e(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Ue(t){_e(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Of(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Dw(t,e){_e(2,arguments);var n=Ue(t),r=Sn(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function IN(t,e){_e(2,arguments);var n=Ue(t),r=Sn(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),i=new Date(n.getTime());i.setMonth(n.getMonth()+r+1,0);var o=i.getDate();return s>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function nq(t,e){_e(2,arguments);var n=Ue(t).getTime(),r=Sn(e);return new Date(n+r)}var rq={};function ol(){return rq}function sq(t,e){var n,r,s,i,o,a,l,c;_e(1,arguments);var u=ol(),h=Sn((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=Ue(t),p=m.getDay(),g=(p<h?7:0)+p-h;return m.setDate(m.getDate()-g),m.setHours(0,0,0,0),m}function iq(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function nS(t){_e(1,arguments);var e=Ue(t);return e.setHours(0,0,0,0),e}var oq=6e4,aq=36e5;function Lf(t,e){_e(2,arguments);var n=nS(t),r=nS(e);return n.getTime()===r.getTime()}function lq(t){return _e(1,arguments),t instanceof Date||Of(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function cq(t){if(_e(1,arguments),!lq(t)&&typeof t!="number")return!1;var e=Ue(t);return!isNaN(Number(e))}function AN(t,e){return _e(2,arguments),Ue(t).getTime()-Ue(e).getTime()}var uq={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},dq="trunc";function RN(t){return uq[dq]}function hq(t,e,n){_e(2,arguments);var r=AN(t,e)/aq;return RN()(r)}function fq(t,e,n){_e(2,arguments);var r=AN(t,e)/oq;return RN()(r)}function mq(t){_e(1,arguments);var e=Ue(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function pq(t,e){var n;_e(1,arguments);var r=t||{},s=Ue(r.start),i=Ue(r.end),o=i.getTime();if(!(s.getTime()<=o))throw new RangeError("Invalid interval");var a=[],l=s;l.setHours(0,0,0,0);var c=Number((n=void 0)!==null&&n!==void 0?n:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=o;)a.push(Ue(l)),l.setDate(l.getDate()+c),l.setHours(0,0,0,0);return a}function gq(t){_e(1,arguments);var e=Ue(t);return e.setDate(1),e.setHours(0,0,0,0),e}function yq(t,e){var n,r,s,i,o,a,l,c;_e(1,arguments);var u=ol(),h=Sn((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=Ue(t),p=m.getDay(),g=(p<h?-7:0)+6-(p-h);return m.setDate(m.getDate()+g),m.setHours(23,59,59,999),m}function vq(t,e){_e(2,arguments);var n=Sn(e);return nq(t,-n)}var xq=864e5;function wq(t){_e(1,arguments);var e=Ue(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/xq)+1}function Vf(t){_e(1,arguments);var e=1,n=Ue(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function NN(t){_e(1,arguments);var e=Ue(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=Vf(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=Vf(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function _q(t){_e(1,arguments);var e=NN(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Vf(n);return r}var bq=6048e5;function kq(t){_e(1,arguments);var e=Ue(t),n=Vf(e).getTime()-_q(e).getTime();return Math.round(n/bq)+1}function Ff(t,e){var n,r,s,i,o,a,l,c;_e(1,arguments);var u=ol(),h=Sn((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=Ue(t),p=m.getUTCDay(),g=(p<h?7:0)+p-h;return m.setUTCDate(m.getUTCDate()-g),m.setUTCHours(0,0,0,0),m}function DN(t,e){var n,r,s,i,o,a,l,c;_e(1,arguments);var u=Ue(t),h=u.getUTCFullYear(),m=ol(),p=Sn((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:m.firstWeekContainsDate)!==null&&r!==void 0?r:(l=m.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(h+1,0,p),g.setUTCHours(0,0,0,0);var v=Ff(g,e),_=new Date(0);_.setUTCFullYear(h,0,p),_.setUTCHours(0,0,0,0);var w=Ff(_,e);return u.getTime()>=v.getTime()?h+1:u.getTime()>=w.getTime()?h:h-1}function Tq(t,e){var n,r,s,i,o,a,l,c;_e(1,arguments);var u=ol(),h=Sn((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:u.firstWeekContainsDate)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),m=DN(t,e),p=new Date(0);p.setUTCFullYear(m,0,h),p.setUTCHours(0,0,0,0);var g=Ff(p,e);return g}var Sq=6048e5;function Eq(t,e){_e(1,arguments);var n=Ue(t),r=Ff(n,e).getTime()-Tq(n,e).getTime();return Math.round(r/Sq)+1}function Ee(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Ps={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return Ee(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):Ee(r+1,2)},d:function(e,n){return Ee(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return Ee(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Ee(e.getUTCHours(),n.length)},m:function(e,n){return Ee(e.getUTCMinutes(),n.length)},s:function(e,n){return Ee(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return Ee(i,n.length)}},qo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Cq={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return Ps.y(e,n)},Y:function(e,n,r,s){var i=DN(e,s),o=i>0?i:1-i;if(n==="YY"){var a=o%100;return Ee(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Ee(o,n.length)},R:function(e,n){var r=NN(e);return Ee(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return Ee(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Ee(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Ee(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return Ps.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Ee(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var i=Eq(e,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):Ee(i,n.length)},I:function(e,n,r){var s=kq(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Ee(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ps.d(e,n)},D:function(e,n,r){var s=wq(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Ee(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Ee(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Ee(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return Ee(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),i;switch(s===12?i=qo.noon:s===0?i=qo.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),i;switch(s>=17?i=qo.evening:s>=12?i=qo.afternoon:s>=4?i=qo.morning:i=qo.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Ps.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ps.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Ee(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Ee(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ps.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ps.s(e,n)},S:function(e,n){return Ps.S(e,n)},X:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return sS(o);case"XXXX":case"XX":return Ki(o);case"XXXXX":case"XXX":default:return Ki(o,":")}},x:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"x":return sS(o);case"xxxx":case"xx":return Ki(o);case"xxxxx":case"xxx":default:return Ki(o,":")}},O:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+rS(o,":");case"OOOO":default:return"GMT"+Ki(o,":")}},z:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+rS(o,":");case"zzzz":default:return"GMT"+Ki(o,":")}},t:function(e,n,r,s){var i=s._originalDate||e,o=Math.floor(i.getTime()/1e3);return Ee(o,n.length)},T:function(e,n,r,s){var i=s._originalDate||e,o=i.getTime();return Ee(o,n.length)}};function rS(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=e;return n+String(s)+o+Ee(i,2)}function sS(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Ee(Math.abs(t)/60,2)}return Ki(t,e)}function Ki(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=Ee(Math.floor(s/60),2),o=Ee(s%60,2);return r+i+n+o}var iS=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},MN=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Pq=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return iS(e,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",iS(s,n)).replace("{{time}}",MN(i,n))},Iq={p:MN,P:Pq},Aq=["D","DD"],Rq=["YY","YYYY"];function Nq(t){return Aq.indexOf(t)!==-1}function Dq(t){return Rq.indexOf(t)!==-1}function oS(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Mq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jq=function(e,n,r){var s,i=Mq[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Ca(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var Oq={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Lq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Fq={date:Ca({formats:Oq,defaultWidth:"full"}),time:Ca({formats:Lq,defaultWidth:"full"}),dateTime:Ca({formats:Vq,defaultWidth:"full"})},Uq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zq=function(e,n,r,s){return Uq[e]};function br(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[a]}var c=t.argumentCallback?t.argumentCallback(e):e;return s[c]}}var Bq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$q={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Wq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Hq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Gq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Kq=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Qq={ordinalNumber:Kq,era:br({values:Bq,defaultWidth:"wide"}),quarter:br({values:$q,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:br({values:Wq,defaultWidth:"wide"}),day:br({values:Hq,defaultWidth:"wide"}),dayPeriod:br({values:qq,defaultWidth:"wide",formattingValues:Gq,defaultFormattingWidth:"wide"})};function kr(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Xq(a,function(h){return h.test(o)}):Yq(a,function(h){return h.test(o)}),c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;var u=e.slice(o.length);return{value:c,rest:u}}}function Yq(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function Xq(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function jN(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(s.length);return{value:o,rest:a}}}var Jq=/^(\d+)(th|st|nd|rd)?/i,Zq=/\d+/i,eG={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tG={any:[/^b/i,/^(a|c)/i]},nG={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rG={any:[/1/i,/2/i,/3/i,/4/i]},sG={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},iG={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oG={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aG={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lG={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cG={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uG={ordinalNumber:jN({matchPattern:Jq,parsePattern:Zq,valueCallback:function(e){return parseInt(e,10)}}),era:kr({matchPatterns:eG,defaultMatchWidth:"wide",parsePatterns:tG,defaultParseWidth:"any"}),quarter:kr({matchPatterns:nG,defaultMatchWidth:"wide",parsePatterns:rG,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:kr({matchPatterns:sG,defaultMatchWidth:"wide",parsePatterns:iG,defaultParseWidth:"any"}),day:kr({matchPatterns:oG,defaultMatchWidth:"wide",parsePatterns:aG,defaultParseWidth:"any"}),dayPeriod:kr({matchPatterns:lG,defaultMatchWidth:"any",parsePatterns:cG,defaultParseWidth:"any"})},dG={code:"en-US",formatDistance:jq,formatLong:Fq,formatRelative:zq,localize:Qq,match:uG,options:{weekStartsOn:0,firstWeekContainsDate:1}},hG=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fG=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mG=/^'([^]*?)'?$/,pG=/''/g,gG=/[a-zA-Z]/;function rr(t,e,n){var r,s,i,o,a,l,c,u,h,m,p,g,v,_,w,x,b,C;_e(2,arguments);var P=String(e),j=ol(),S=(r=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:j.locale)!==null&&r!==void 0?r:dG,T=Sn((i=(o=(a=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(c=n.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:j.firstWeekContainsDate)!==null&&o!==void 0?o:(h=j.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=Sn((p=(g=(v=(_=n==null?void 0:n.weekStartsOn)!==null&&_!==void 0?_:n==null||(w=n.locale)===null||w===void 0||(x=w.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&v!==void 0?v:j.weekStartsOn)!==null&&g!==void 0?g:(b=j.locale)===null||b===void 0||(C=b.options)===null||C===void 0?void 0:C.weekStartsOn)!==null&&p!==void 0?p:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var R=Ue(t);if(!cq(R))throw new RangeError("Invalid time value");var I=iq(R),D=vq(R,I),N={firstWeekContainsDate:T,weekStartsOn:E,locale:S,_originalDate:R},F=P.match(fG).map(function(W){var z=W[0];if(z==="p"||z==="P"){var K=Iq[z];return K(W,S.formatLong)}return W}).join("").match(hG).map(function(W){if(W==="''")return"'";var z=W[0];if(z==="'")return yG(W);var K=Cq[z];if(K)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Dq(W)&&oS(W,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Nq(W)&&oS(W,e,String(t)),K(D,W,S.localize,N);if(z.match(gG))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");return W}).join("");return F}function yG(t){var e=t.match(mG);return e?e[1].replace(pG,"'"):t}function vG(t){return _e(1,arguments),Ue(t).getTime()<Date.now()}function xG(t,e){_e(2,arguments);var n=Ue(t),r=Ue(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Sh(t){return _e(1,arguments),Lf(t,Date.now())}function wG(t){return _e(1,arguments),Lf(t,Dw(Date.now(),1))}function _G(t,e){_e(2,arguments);var n=Sn(e);return Dw(t,-n)}function bG(t,e){_e(2,arguments);var n=Sn(e);return IN(t,-n)}var kG={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},TG=function(e,n,r){var s,i=kG[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",String(n)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+s:"il y a "+s:s},SG={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},EG={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},CG={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},PG={date:Ca({formats:SG,defaultWidth:"full"}),time:Ca({formats:EG,defaultWidth:"full"}),dateTime:Ca({formats:CG,defaultWidth:"full"})},IG={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},AG=function(e,n,r,s){return IG[e]},RG={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},NG={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},DG={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},MG={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},jG={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},OG=function(e,n){var r=Number(e),s=n==null?void 0:n.unit;if(r===0)return"0";var i=["year","week","hour","minute","second"],o;return r===1?o=s&&i.includes(s)?"re":"er":o="me",r+o},LG={ordinalNumber:OG,era:br({values:RG,defaultWidth:"wide"}),quarter:br({values:NG,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:br({values:DG,defaultWidth:"wide"}),day:br({values:MG,defaultWidth:"wide"}),dayPeriod:br({values:jG,defaultWidth:"wide"})},VG=/^(\d+)(ime|re|me|er|e)?/i,FG=/\d+/i,UG={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},zG={any:[/^av/i,/^ap/i]},BG={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},$G={any:[/1/i,/2/i,/3/i,/4/i]},WG={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},HG={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},qG={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},GG={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},KG={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},QG={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},YG={ordinalNumber:jN({matchPattern:VG,parsePattern:FG,valueCallback:function(e){return parseInt(e)}}),era:kr({matchPatterns:UG,defaultMatchWidth:"wide",parsePatterns:zG,defaultParseWidth:"any"}),quarter:kr({matchPatterns:BG,defaultMatchWidth:"wide",parsePatterns:$G,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:kr({matchPatterns:WG,defaultMatchWidth:"wide",parsePatterns:HG,defaultParseWidth:"any"}),day:kr({matchPatterns:qG,defaultMatchWidth:"wide",parsePatterns:GG,defaultParseWidth:"any"}),dayPeriod:kr({matchPatterns:KG,defaultMatchWidth:"any",parsePatterns:QG,defaultParseWidth:"any"})},Bu={code:"fr",formatDistance:TG,formatLong:PG,formatRelative:AG,localize:LG,match:YG,options:{weekStartsOn:1,firstWeekContainsDate:4}};const XG=()=>{const{user:t,gameStats:e}=he(),{tasks:n}=Qn(),{getDailyQuests:r,getWeeklyQuests:s}=Lu(),{openTaskModal:i}=hr(),o=r(),a=s();if(!t||!e)return null;const l=n.filter(g=>{if(g.status==="completed"||!g.dueDate)return!1;const v=new Date(g.dueDate);return Sh(v)||wG(v)}),c=n.filter(g=>g.status==="completed"?!1:!g.dueDate),u=n.filter(g=>{if(g.status==="completed"||!g.dueDate)return!1;const v=new Date(g.dueDate);return vG(v)&&!Sh(v)}),h=[...o,...a].filter(g=>!g.claimed).sort((g,v)=>g.completed&&!v.completed?-1:!g.completed&&v.completed?1:0).slice(0,3),m=n.filter(g=>g.status==="completed"&&g.completedAt&&Sh(new Date(g.completedAt))).length,p=n.filter(g=>g.status==="pending").length;return d.jsxs(Oo,{className:"space-y-4 sm:space-y-6 w-full overflow-x-hidden px-1 sm:px-0",children:[d.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-accent-gradient-br p-4 sm:p-6 text-white shadow-lg",children:[d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex items-start justify-between gap-3",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("h1",{className:"text-lg sm:text-2xl font-bold truncate",children:["Bonjour, ",t.username,"! "]}),d.jsx("p",{className:"mt-1 text-white/80 text-xs sm:text-sm",children:rr(new Date,"EEEE d MMMM",{locale:Bu})})]}),d.jsx(Cw,{config:t.avatar,size:"md",showLevel:!0,level:e.level,className:"flex-shrink-0"})]}),d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 flex-wrap",children:[d.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:["Niveau ",e.level]}),d.jsx("span",{className:"text-xs sm:text-sm text-white/70 truncate",children:Ew(e.level)})]}),d.jsx(TN,{currentXP:e.currentXP,xpToNextLevel:e.xpToNextLevel,level:e.level,showLevel:!1})]})]}),d.jsx("div",{className:"absolute -right-10 -top-10 w-32 sm:w-40 h-32 sm:h-40 bg-white/10 rounded-full"}),d.jsx("div",{className:"absolute -right-5 -bottom-5 w-20 sm:w-28 h-20 sm:h-28 bg-white/10 rounded-full"})]}),d.jsxs(Y.div,{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",variants:Nw,initial:"hidden",animate:"visible",children:[d.jsx(Y.div,{variants:Vn,children:d.jsx(ut,{icon:d.jsx(ur,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Compltes",value:m,color:"primary"})}),d.jsx(Y.div,{variants:Vn,children:d.jsx(ut,{icon:d.jsx(wr,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"En attente",value:p,color:"yellow"})}),d.jsx(Y.div,{variants:Vn,children:d.jsx(ut,{icon:d.jsx(xc,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Streak",value:`${e.currentStreak}j`,color:"orange"})}),d.jsx(Y.div,{variants:Vn,children:d.jsx(ut,{icon:d.jsx(Rr,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"XP Total",value:On(e.totalXP),color:"purple"})})]}),d.jsxs("div",{className:"grid lg:grid-cols-3 gap-4 sm:gap-6 items-start",children:[d.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[d.jsxs(Te,{className:"p-3 sm:p-4 lg:hidden",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(wr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-500"}),d.jsx("h2",{className:"font-semibold text-sm sm:text-base",children:"Qutes actives"})]}),d.jsxs(As,{to:"/quests",className:"text-xs sm:text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Tout voir",d.jsx(zt,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),h.length>0?d.jsx("div",{className:"space-y-2",children:h.slice(0,2).map(g=>d.jsx(H0,{quest:g,compact:!0},g.id))}):d.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:[d.jsx(wr,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"Toutes les qutes compltes!"})]})]}),u.length>0&&d.jsxs(Te,{className:"p-3 sm:p-4 border-red-200 dark:border-red-800/30 bg-red-50/50 dark:bg-red-900/10",children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ym,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500"}),d.jsxs("h2",{className:"font-semibold text-sm sm:text-base text-red-600 dark:text-red-400",children:["En retard (",u.length,")"]})]})}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.slice(0,3).map(g=>d.jsx(Th,{task:g,compact:!0},g.id)),u.length>3&&d.jsxs(As,{to:"/tasks",className:"block text-center text-xs sm:text-sm text-red-500 hover:text-red-600 py-2",children:["+",u.length-3," autres tches en retard"]})]})]}),d.jsxs(Te,{className:"p-3 sm:p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(_s,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-500"}),d.jsx("h2",{className:"font-semibold text-sm sm:text-base",children:"Tches du jour"}),l.length>0&&d.jsx("span",{className:"text-xs bg-primary-100 dark:bg-primary-900/30 text-primary-600 px-2 py-0.5 rounded-full",children:l.length})]}),d.jsxs(As,{to:"/tasks",className:"text-xs sm:text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Tout voir",d.jsx(zt,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),l.length>0?d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[l.slice(0,4).map(g=>d.jsx(Th,{task:g,compact:!0},g.id)),l.length>4&&d.jsxs(As,{to:"/tasks",className:"block text-center text-xs sm:text-sm text-primary-500 hover:text-primary-600 py-2",children:["+",l.length-4," autres tches"]})]}):d.jsxs("div",{className:"text-center py-6 sm:py-8",children:[d.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-100 dark:bg-gray-800 mx-auto flex items-center justify-center mb-3",children:d.jsx(ur,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"Aucune tche planifie"}),d.jsxs(Ne,{variant:"primary",size:"sm",onClick:i,children:[d.jsx(So,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]})]}),d.jsxs(Te,{className:"p-3 sm:p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(rH,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500"}),d.jsx("h2",{className:"font-semibold text-sm sm:text-base",children:"Sans date"}),c.length>0&&d.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 px-2 py-0.5 rounded-full",children:c.length})]}),d.jsxs(As,{to:"/tasks",className:"text-xs sm:text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Tout voir",d.jsx(zt,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),c.length>0?d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[c.slice(0,4).map(g=>d.jsx(Th,{task:g,compact:!0},g.id)),c.length>4&&d.jsxs(As,{to:"/tasks",className:"block text-center text-xs sm:text-sm text-primary-500 hover:text-primary-600 py-2",children:["+",c.length-4," autres tches"]})]}):d.jsxs("div",{className:"text-center py-4 sm:py-6 text-gray-500 text-sm",children:[d.jsx(Tw,{className:"w-8 h-8 sm:w-10 sm:h-10 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"Toutes vos tches ont une date!"})]})]}),d.jsxs(Te,{className:"p-3 sm:p-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[d.jsx(Gn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-500"}),d.jsx("h2",{className:"font-semibold text-sm sm:text-base",children:"Progression hebdomadaire"})]}),d.jsx(tq,{})]})]}),d.jsx("div",{className:"hidden lg:block space-y-6",children:d.jsxs(Te,{className:"p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(wr,{className:"w-5 h-5 text-primary-500"}),d.jsx("h2",{className:"font-semibold",children:"Qutes actives"})]}),d.jsxs(As,{to:"/quests",className:"text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Voir tout",d.jsx(zt,{className:"w-4 h-4"})]})]}),h.length>0?d.jsx("div",{className:"space-y-3",children:h.map(g=>d.jsx(H0,{quest:g,compact:!0},g.id))}):d.jsxs("div",{className:"text-center py-6 text-gray-500",children:[d.jsx(wr,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"Toutes les qutes sont compltes!"})]})]})})]})]})},Ld=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],aS=["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],JG=({isOpen:t,onClose:e})=>{const{tasks:n,bulkDeleteTasks:r,deleteTasksByDateRange:s,getTasksCountByDateRange:i}=Qn(),[o,a]=M.useState("day"),[l,c]=M.useState(new Date),[u,h]=M.useState(new Date().getFullYear()),[m,p]=M.useState(new Date().getMonth()),[g,v]=M.useState(!1),[_,w]=M.useState(!1),[x,b]=M.useState(null),C=M.useMemo(()=>{const I=new Date,D=new Date;switch(o){case"day":I.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()),D.setFullYear(l.getFullYear(),l.getMonth(),l.getDate());break;case"week":const N=l.getDay(),F=N===0?-6:1-N;I.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+F),D.setFullYear(I.getFullYear(),I.getMonth(),I.getDate()+6);break;case"month":I.setFullYear(u,m,1),D.setFullYear(u,m+1,0);break;case"year":I.setFullYear(u,0,1),D.setFullYear(u,11,31);break;case"all":I.setFullYear(2e3,0,1),D.setFullYear(2100,11,31);break}return{start:I,end:D}},[o,l,m,u]),P=M.useMemo(()=>o==="all"?n.length:i(C.start,C.end),[o,C,n.length,i]),j=()=>{const I={day:"numeric",month:"long",year:"numeric"};switch(o){case"day":return l.toLocaleDateString("fr-FR",I);case"week":return`${C.start.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})} - ${C.end.toLocaleDateString("fr-FR",I)}`;case"month":return`${Ld[m]} ${u}`;case"year":return`Anne ${u}`;case"all":return"Toutes les tches"}},S=M.useMemo(()=>{const I=l.getFullYear(),D=l.getMonth(),N=new Date(I,D,1),F=new Date(I,D+1,0),W=[],z=N.getDay();for(let K=0;K<z;K++)W.push(null);for(let K=1;K<=F.getDate();K++)W.push(new Date(I,D,K));return W},[l]),T=async()=>{v(!0);try{let I=0;if(o==="all"){const D=n.map(N=>N.id);I=await r(D)}else I=await s(C.start,C.end);b(I),w(!1),setTimeout(()=>{b(null),e()},2e3)}catch(I){console.error("Error deleting tasks:",I)}finally{v(!1)}},E=I=>{const D=new Date(l);D.setMonth(D.getMonth()+I),c(D)},R=I=>{h(D=>D+I)};return t?d.jsx(qn,{children:d.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:e,children:d.jsxs(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-hidden shadow-2xl",onClick:I=>I.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[d.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-red-600",children:[d.jsx(di,{className:"w-6 h-6"}),"Suppression en masse"]}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:d.jsx(Xm,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto max-h-[60vh]",children:[x!==null&&d.jsx(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 p-4 rounded-xl text-center",children:d.jsxs("p",{className:"text-lg font-semibold",children:[" ",x," tche",x>1?"s":""," supprime",x>1?"s":""]})}),x===null&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"grid grid-cols-5 gap-2",children:[{mode:"day",label:"Jour",icon:_s},{mode:"week",label:"Semaine",icon:nH},{mode:"month",label:"Mois",icon:ZT},{mode:"year",label:"Anne",icon:ZT},{mode:"all",label:"Tout",icon:di}].map(({mode:I,label:D,icon:N})=>d.jsxs("button",{onClick:()=>a(I),className:`p-2 sm:p-3 rounded-xl flex flex-col items-center gap-1 transition-all ${o===I?"bg-red-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[d.jsx(N,{className:"w-4 h-4 sm:w-5 sm:h-5"}),d.jsx("span",{className:"text-xs font-medium",children:D})]},I))}),o==="day"&&d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("button",{onClick:()=>E(-1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:d.jsx(pa,{className:"w-5 h-5"})}),d.jsxs("h3",{className:"font-semibold",children:[Ld[l.getMonth()]," ",l.getFullYear()]}),d.jsx("button",{onClick:()=>E(1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:d.jsx(zt,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:aS.map(I=>d.jsx("div",{className:"text-center text-xs text-gray-500 font-medium py-1",children:I},I))}),d.jsx("div",{className:"grid grid-cols-7 gap-1",children:S.map((I,D)=>d.jsx("button",{onClick:()=>I&&c(I),disabled:!I,className:`p-2 text-sm rounded-lg transition-colors ${I?I.toDateString()===l.toDateString()?"bg-red-500 text-white font-bold":I.toDateString()===new Date().toDateString()?"bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-400":"hover:bg-gray-200 dark:hover:bg-gray-700":"invisible"}`,children:I==null?void 0:I.getDate()},D))})]}),o==="week"&&d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("button",{onClick:()=>E(-1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:d.jsx(pa,{className:"w-5 h-5"})}),d.jsxs("h3",{className:"font-semibold",children:[Ld[l.getMonth()]," ",l.getFullYear()]}),d.jsx("button",{onClick:()=>E(1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:d.jsx(zt,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:aS.map(I=>d.jsx("div",{className:"text-center text-xs text-gray-500 font-medium py-1",children:I},I))}),d.jsx("div",{className:"grid grid-cols-7 gap-1",children:S.map((I,D)=>{const N=I&&(()=>{const F=l.getDay(),W=F===0?-6:1-F,z=new Date(l);z.setDate(l.getDate()+W);const K=new Date(z);return K.setDate(z.getDate()+6),I>=z&&I<=K})();return d.jsx("button",{onClick:()=>I&&c(I),disabled:!I,className:`p-2 text-sm rounded-lg transition-colors ${I?N?"bg-red-500 text-white font-bold":I.toDateString()===new Date().toDateString()?"bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-400":"hover:bg-gray-200 dark:hover:bg-gray-700":"invisible"}`,children:I==null?void 0:I.getDate()},D)})})]}),o==="month"&&d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("button",{onClick:()=>R(-1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:d.jsx(pa,{className:"w-5 h-5"})}),d.jsx("h3",{className:"font-semibold text-lg",children:u}),d.jsx("button",{onClick:()=>R(1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:d.jsx(zt,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:Ld.map((I,D)=>d.jsx("button",{onClick:()=>p(D),className:`p-3 rounded-xl text-sm font-medium transition-colors ${m===D?"bg-red-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:I},I))})]}),o==="year"&&d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("button",{onClick:()=>R(-5),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:d.jsx(pa,{className:"w-5 h-5"})}),d.jsx("h3",{className:"font-semibold text-lg",children:"Slectionner une anne"}),d.jsx("button",{onClick:()=>R(5),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",children:d.jsx(zt,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:9},(I,D)=>u-4+D).map(I=>d.jsx("button",{onClick:()=>h(I),className:`p-3 rounded-xl text-sm font-medium transition-colors ${u===I?"bg-red-500 text-white shadow-lg":I===new Date().getFullYear()?"bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-400":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:I},I))})]}),o==="all"&&d.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-4 text-center",children:[d.jsx(Mf,{className:"w-12 h-12 text-red-500 mx-auto mb-2"}),d.jsx("p",{className:"text-red-700 dark:text-red-300 font-semibold",children:"Attention : Cette action supprimera TOUTES vos tches !"}),d.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Cette action est irrversible."})]}),d.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-xl p-4",children:[d.jsxs("p",{className:"text-center",children:[d.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Priode : "}),d.jsx("span",{className:"font-semibold",children:j()})]}),d.jsxs("p",{className:"text-center mt-2",children:[d.jsx("span",{className:`text-2xl font-bold ${P>0?"text-red-500":"text-gray-400"}`,children:P}),d.jsxs("span",{className:"text-gray-600 dark:text-gray-300 ml-2",children:["tche",P>1?"s":"","  supprimer"]})]})]})]})]}),x===null&&d.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:_?d.jsxs(d.Fragment,{children:[d.jsx(Ne,{variant:"secondary",className:"flex-1",onClick:()=>w(!1),disabled:g,children:"Non, annuler"}),d.jsx(Ne,{variant:"danger",className:"flex-1",onClick:T,disabled:g,children:g?d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"animate-spin",children:""}),"Suppression..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Mf,{className:"w-5 h-5 mr-2"}),"Oui, supprimer !"]})})]}):d.jsxs(d.Fragment,{children:[d.jsx(Ne,{variant:"secondary",className:"flex-1",onClick:e,children:"Annuler"}),d.jsxs(Ne,{variant:"danger",className:"flex-1",onClick:()=>w(!0),disabled:P===0,children:[d.jsx(di,{className:"w-5 h-5 mr-2"}),"Supprimer (",P,")"]})]})})]})})}):null},ZG=()=>{const{tasks:t,categories:e,filter:n,setFilter:r}=Qn(),{openTaskModal:s}=hr(),[i,o]=M.useState("none"),[a,l]=M.useState(""),[c,u]=M.useState(!1),[h,m]=M.useState(!1),p=M.useMemo(()=>{let w=t;if(n.status!=="all"&&(w=w.filter(x=>x.status===n.status)),n.priority&&(w=w.filter(x=>x.priority===n.priority)),n.categoryId&&(w=w.filter(x=>x.categoryId===n.categoryId)),a){const x=a.toLowerCase();w=w.filter(b=>{var C;return b.title.toLowerCase().includes(x)||((C=b.description)==null?void 0:C.toLowerCase().includes(x))})}return w=[...w].sort((x,b)=>{switch(n.sortBy){case"dueDate":return x.dueDate?b.dueDate?new Date(x.dueDate).getTime()-new Date(b.dueDate).getTime():-1:1;case"priority":const C={critical:0,high:1,medium:2,low:3,none:4};return C[x.priority]-C[b.priority];case"createdAt":default:return new Date(b.createdAt).getTime()-new Date(x.createdAt).getTime()}}),n.sortDirection==="desc"&&w.reverse(),w},[t,n,a]),g=M.useMemo(()=>{if(i==="none")return{"Toutes les tches":p};const w={};return p.forEach(x=>{let b;switch(i){case"category":const C=e.find(j=>j.id===x.categoryId);b=(C==null?void 0:C.name)||"Sans catgorie";break;case"priority":b={critical:" Critique",high:" Haute priorit",medium:" Priorit moyenne",low:" Basse priorit",none:" Sans priorit"}[x.priority]||"Sans priorit";break;case"dueDate":if(!x.dueDate)b="Sans date";else{const j=new Date(x.dueDate),S=new Date,T=new Date(S);T.setDate(T.getDate()+1),j.toDateString()===S.toDateString()?b="Aujourd'hui":j.toDateString()===T.toDateString()?b="Demain":j<S?b=" En retard":b=" venir"}break;default:b="Autres"}w[b]||(w[b]=[]),w[b].push(x)}),w},[p,i,e]),v={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},_={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return d.jsxs("div",{className:"space-y-4 sm:space-y-6 px-1 sm:px-0",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[d.jsx(Tw,{className:"w-6 h-6 sm:w-7 sm:h-7 text-primary-500"}),"Mes Tches"]}),d.jsxs("p",{className:"text-gray-500 mt-1 text-sm",children:[p.length," tche",p.length>1?"s":""]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(Ne,{variant:"game",onClick:s,className:"flex-1 sm:flex-none",children:[d.jsx(So,{className:"w-5 h-5 mr-1"}),"Nouvelle tche"]}),d.jsx(Ne,{variant:"danger",onClick:()=>m(!0),className:"px-3",title:"Suppression en masse",children:d.jsx(di,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsx(_r,{placeholder:"Rechercher...",value:a,onChange:w=>l(w.target.value),leftIcon:d.jsx(bN,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),d.jsx("div",{className:"flex gap-2",children:d.jsxs(Ne,{variant:"secondary",onClick:()=>u(!c),className:"flex-1 sm:flex-none",children:[d.jsx(oH,{className:"w-4 h-4 sm:w-5 sm:h-5"}),d.jsx("span",{className:"sm:hidden ml-2",children:"Filtres"})]})})]}),d.jsx(qn,{children:c&&d.jsx(Y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white dark:bg-gray-800 rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-700 overflow-hidden",children:d.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5 sm:mb-2 block",children:"Statut"}),d.jsxs("select",{value:n.status,onChange:w=>r({status:w.target.value}),className:"w-full px-2 sm:px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm",children:[d.jsx("option",{value:"all",children:"Toutes"}),d.jsx("option",{value:"pending",children:"En attente"}),d.jsx("option",{value:"in-progress",children:"En cours"}),d.jsx("option",{value:"completed",children:"Compltes"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5 sm:mb-2 block",children:"Priorit"}),d.jsxs("select",{value:n.priority||"",onChange:w=>r({priority:w.target.value||void 0}),className:"w-full px-2 sm:px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm",children:[d.jsx("option",{value:"",children:"Toutes"}),d.jsx("option",{value:"high",children:"Haute"}),d.jsx("option",{value:"medium",children:"Moyenne"}),d.jsx("option",{value:"low",children:"Basse"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5 sm:mb-2 block",children:"Catgorie"}),d.jsxs("select",{value:n.categoryId||"",onChange:w=>r({categoryId:w.target.value||void 0}),className:"w-full px-2 sm:px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm",children:[d.jsx("option",{value:"",children:"Toutes"}),e.map(w=>d.jsxs("option",{value:w.id,children:[w.icon," ",w.name]},w.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5 sm:mb-2 block",children:"Grouper par"}),d.jsxs("select",{value:i,onChange:w=>o(w.target.value),className:"w-full px-2 sm:px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm",children:[d.jsx("option",{value:"none",children:"Aucun"}),d.jsx("option",{value:"category",children:"Catgorie"}),d.jsx("option",{value:"priority",children:"Priorit"}),d.jsx("option",{value:"dueDate",children:"Date"})]})]})]})})}),p.length>0?d.jsx(Y.div,{className:"space-y-4 sm:space-y-6",variants:v,initial:"hidden",animate:"visible",children:Object.entries(g).map(([w,x])=>d.jsxs(Y.div,{variants:_,children:[i!=="none"&&d.jsxs("h3",{className:"font-medium text-gray-600 dark:text-gray-400 mb-2 sm:mb-3 flex items-center gap-2 text-sm sm:text-base",children:[d.jsx(aH,{className:"w-4 h-4"}),w,d.jsx("span",{className:"text-xs sm:text-sm bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded-full",children:x.length})]}),d.jsx("div",{className:"space-y-2 sm:space-y-3",children:x.map((b,C)=>d.jsx(Y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:C*.03},children:d.jsx(Th,{task:b})},b.id))})]},w))}):d.jsxs(Y.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 sm:py-16",children:[d.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gray-100 dark:bg-gray-800 mx-auto flex items-center justify-center mb-4",children:d.jsx(ur,{className:"w-10 h-10 sm:w-12 sm:h-12 text-gray-400"})}),d.jsx("h3",{className:"text-lg sm:text-xl font-medium mb-2",children:"Aucune tche trouve"}),d.jsx("p",{className:"text-gray-500 mb-4 text-sm sm:text-base px-4",children:a?"Essayez de modifier votre recherche":"Crez votre premire tche pour commencer!"}),d.jsxs(Ne,{variant:"game",onClick:s,children:[d.jsx(So,{className:"w-5 h-5 mr-1"}),"Nouvelle tche"]})]}),d.jsx(JG,{isOpen:h,onClose:()=>m(!1)})]})},eK=[{value:"none",label:" Aucune",color:"bg-gray-400"},{value:"low",label:" Basse",color:"bg-green-500"},{value:"medium",label:" Moyenne",color:"bg-yellow-500"},{value:"high",label:" Haute",color:"bg-orange-500"},{value:"critical",label:" Critique",color:"bg-red-500"}],tK=[{value:"trivial",label:" Trivial"},{value:"easy",label:" Facile"},{value:"medium",label:" Moyen"},{value:"hard",label:" Difficile"},{value:"epic",label:" pique"}],nK=[{value:"Travail",label:" Travail"},{value:"Personnel",label:" Personnel"},{value:"Sant",label:" Sant"},{value:"tudes",label:" tudes"},{value:"Finances",label:" Finances"},{value:"Social",label:" Social"},{value:"Loisirs",label:" Loisirs"},{value:"Maison",label:" Maison"}],rK=({onClose:t,defaultDate:e})=>{const{addTask:n,calculateTaskRewards:r}=Qn(),[s,i]=M.useState(!1),[o,a]=M.useState({title:"",description:"",category:"Personnel",priority:"medium",difficulty:"medium",dueDate:rr(e,"yyyy-MM-dd'T'HH:mm")}),l=r(o.difficulty,o.priority),c=async u=>{if(u.preventDefault(),!!o.title.trim()){i(!0);try{await n({title:o.title.trim(),description:o.description.trim(),category:o.category,priority:o.priority,difficulty:o.difficulty,dueDate:new Date(o.dueDate),estimatedTime:void 0,recurrence:"none",subtasks:[],tags:[],userId:"",status:"pending",progress:0}),t()}catch(h){console.error("Error adding task:",h)}i(!1)}};return d.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t,children:d.jsxs(Y.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md shadow-xl overflow-hidden",onClick:u=>u.stopPropagation(),children:[d.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-primary-500/10 to-cyan-500/10",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[d.jsx(_s,{className:"w-5 h-5 text-primary-500"}),"Nouvelle tche"]}),d.jsx("p",{className:"text-sm text-gray-500 capitalize",children:rr(e,"EEEE d MMMM yyyy",{locale:Bu})})]}),d.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:d.jsx(Xm,{className:"w-5 h-5"})})]})}),d.jsxs("form",{onSubmit:c,className:"p-4 space-y-4",children:[d.jsx(_r,{label:"Titre de la tche",value:o.title,onChange:u=>a({...o,title:u.target.value}),placeholder:"Qu'avez-vous  faire ?",autoFocus:!0,required:!0}),d.jsx(PN,{label:"Description (optionnel)",value:o.description,onChange:u=>a({...o,description:u.target.value}),placeholder:"Ajoutez des dtails...",rows:2}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsx(so,{label:"Catgorie",value:o.category,onChange:u=>a({...o,category:u.target.value}),options:nK}),d.jsx(so,{label:"Priorit",value:o.priority,onChange:u=>a({...o,priority:u.target.value}),options:eK})]}),d.jsx(so,{label:"Difficult",value:o.difficulty,onChange:u=>a({...o,difficulty:u.target.value}),options:tK}),d.jsx(_r,{type:"datetime-local",label:"Date et heure",value:o.dueDate,onChange:u=>a({...o,dueDate:u.target.value})}),d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3",children:[d.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Rcompenses"}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx(Gn,{className:"w-4 h-4 text-yellow-500"}),d.jsxs("span",{className:"font-semibold text-yellow-600",children:[l.xp," XP"]})]}),d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-400 flex items-center justify-center text-[10px]",children:""}),d.jsxs("span",{className:"font-semibold text-yellow-600",children:[l.coins," pices"]})]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-2",children:[d.jsx(Ne,{type:"button",variant:"secondary",onClick:t,className:"flex-1",children:"Annuler"}),d.jsx(Ne,{type:"submit",disabled:s||!o.title.trim(),className:"flex-1",children:s?"Cration...":"Crer la tche"})]})]})]})})},q0={none:"bg-gray-400",low:"bg-green-500",medium:"bg-yellow-500",high:"bg-orange-500",critical:"bg-red-500"},sK={none:"border-l-gray-400",low:"border-l-green-500",medium:"border-l-yellow-500",high:"border-l-orange-500",critical:"border-l-red-500"},Os=t=>t.status==="completed",iK=({date:t,tasks:e,onClose:n,onAddTask:r,onToggleTask:s})=>{const i=e.filter(a=>Os(a)),o=e.filter(a=>!Os(a));return d.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:n,children:d.jsxs(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden shadow-xl",onClick:a=>a.stopPropagation(),children:[d.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-gradient-to-r from-primary-500/10 to-cyan-500/10",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-bold capitalize",children:rr(t,"EEEE d MMMM",{locale:Bu})}),d.jsxs("p",{className:"text-sm text-gray-500",children:[e.length," tche",e.length>1?"s":"","  ",i.length," termine",i.length>1?"s":""]})]}),d.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:d.jsx(Xm,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"p-4 overflow-y-auto max-h-[50vh] space-y-2",children:e.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(_s,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),d.jsx("p",{children:"Aucune tche pour ce jour"})]}):d.jsxs(d.Fragment,{children:[o.length>0&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:" faire"}),o.map(a=>d.jsx("div",{className:Z("p-3 rounded-lg border-l-4 bg-gray-50 dark:bg-gray-700/50",sK[a.priority]),children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("button",{onClick:()=>s(a.id),className:"mt-0.5 text-gray-400 hover:text-primary-500 transition-colors",children:d.jsx(U0,{className:"w-5 h-5"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-medium truncate",children:a.title}),a.description&&d.jsx("p",{className:"text-sm text-gray-500 truncate",children:a.description}),d.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500",children:[d.jsx("span",{className:Z("px-1.5 py-0.5 rounded text-white text-[10px]",q0[a.priority]),children:a.priority}),d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(Gn,{className:"w-3 h-3"}),a.xpReward," XP"]})]})]})]})},a.id))]}),i.length>0&&d.jsxs("div",{className:"space-y-2 mt-4",children:[d.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Termines"}),i.map(a=>d.jsx("div",{className:"p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 opacity-60",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("button",{onClick:()=>s(a.id),className:"mt-0.5 text-green-500",children:d.jsx(ur,{className:"w-5 h-5"})}),d.jsx("div",{className:"flex-1 min-w-0",children:d.jsx("p",{className:"font-medium truncate line-through",children:a.title})})]})},a.id))]})]})}),d.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:d.jsxs(Ne,{onClick:r,className:"w-full",children:[d.jsx(So,{className:"w-4 h-4 mr-2"}),"Ajouter une tche"]})})]})})},oK=()=>{const{tasks:t,completeTask:e}=Qn(),{user:n}=he(),[r,s]=M.useState(new Date),[i,o]=M.useState(null),[a,l]=M.useState(!1),[c,u]=M.useState(null),h=M.useMemo(()=>{const P={};return t.forEach(j=>{if(j.dueDate){const S=rr(new Date(j.dueDate),"yyyy-MM-dd");P[S]||(P[S]=[]),P[S].push(j)}}),P},[t]),m=M.useMemo(()=>{const P=gq(r),j=mq(P),S=sq(P,{weekStartsOn:1}),T=yq(j,{weekStartsOn:1}),E=[];let R=S;for(;R<=T;)E.push(R),R=Dw(R,1);return E},[r]),p=()=>s(bG(r,1)),g=()=>s(IN(r,1)),v=()=>s(new Date),_=P=>{o(P)},w=P=>{u(P),l(!0),o(null)},x=async P=>{n&&await e(P)},b=P=>{const j=rr(P,"yyyy-MM-dd");return h[j]||[]},C=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"];return d.jsxs(Oo,{className:"space-y-4 sm:space-y-6 px-1 sm:px-0",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{children:[d.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[d.jsx(_s,{className:"w-6 h-6 sm:w-7 sm:h-7 text-primary-500"}),"Calendrier"]}),d.jsx("p",{className:"text-gray-500 mt-1 text-sm sm:text-base",children:"Organisez vos tches par date"})]})}),d.jsxs(Te,{className:"p-4 sm:p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:d.jsx(pa,{className:"w-5 h-5"})}),d.jsx("button",{onClick:g,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:d.jsx(zt,{className:"w-5 h-5"})}),d.jsx("h2",{className:"text-lg sm:text-xl font-bold capitalize ml-2",children:rr(r,"MMMM yyyy",{locale:Bu})})]}),d.jsx(Ne,{variant:"secondary",size:"sm",onClick:v,children:"Aujourd'hui"})]}),d.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:C.map(P=>d.jsx("div",{className:"text-center text-xs sm:text-sm font-medium text-gray-500 py-2",children:P},P))}),d.jsx("div",{className:"grid grid-cols-7 gap-1",children:m.map((P,j)=>{const S=b(P),T=xG(P,r),E=Sh(P),R=S.filter(D=>Os(D)).length,I=S.length-R;return d.jsxs("div",{className:Z("min-h-[80px] sm:min-h-[100px] p-1 sm:p-2 rounded-lg border border-transparent transition-all cursor-pointer group relative",T?"bg-gray-50 dark:bg-gray-800/50 hover:border-primary-500/50":"bg-gray-100/50 dark:bg-gray-900/30 opacity-50",E&&"ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20"),onClick:()=>_(P),children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("span",{className:Z("text-xs sm:text-sm font-medium w-6 h-6 flex items-center justify-center rounded-full",E&&"bg-primary-500 text-white"),children:rr(P,"d")}),S.length>0&&d.jsx("span",{className:"text-[10px] text-gray-500 hidden sm:block",children:I>0&&`${I}  faire`})]}),d.jsxs("div",{className:"space-y-0.5 overflow-hidden",children:[S.slice(0,3).map((D,N)=>d.jsx("div",{className:Z("text-[10px] sm:text-xs px-1.5 py-0.5 rounded truncate",Os(D)?"bg-gray-200 dark:bg-gray-700 text-gray-500 line-through":Z(q0[D.priority],"text-white")),title:D.title,children:D.title},D.id)),S.length>3&&d.jsxs("div",{className:"text-[10px] text-gray-500 px-1",children:["+",S.length-3," autres"]})]}),T&&d.jsx("button",{onClick:D=>{D.stopPropagation(),w(P)},className:"absolute bottom-1 right-1 w-5 h-5 sm:w-6 sm:h-6 bg-primary-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:bg-primary-600",children:d.jsx(So,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]},j)})}),d.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[d.jsx("span",{className:"text-sm text-gray-500",children:"Priorits:"}),Object.entries(q0).map(([P,j])=>d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("div",{className:Z("w-3 h-3 rounded",j)}),d.jsx("span",{className:"text-xs capitalize text-gray-600 dark:text-gray-400",children:P})]},P))]})]}),d.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[d.jsxs(Te,{className:"p-4 text-center",children:[d.jsx("p",{className:"text-2xl font-bold text-primary-500",children:t.filter(P=>!Os(P)).length}),d.jsx("p",{className:"text-sm text-gray-500",children:"Tches en cours"})]}),d.jsxs(Te,{className:"p-4 text-center",children:[d.jsx("p",{className:"text-2xl font-bold text-green-500",children:t.filter(P=>Os(P)).length}),d.jsx("p",{className:"text-sm text-gray-500",children:"Termines"})]}),d.jsxs(Te,{className:"p-4 text-center",children:[d.jsx("p",{className:"text-2xl font-bold text-orange-500",children:t.filter(P=>!Os(P)&&P.dueDate&&new Date(P.dueDate)<new Date).length}),d.jsx("p",{className:"text-sm text-gray-500",children:"En retard"})]}),d.jsxs(Te,{className:"p-4 text-center",children:[d.jsx("p",{className:"text-2xl font-bold text-cyan-500",children:b(new Date).filter(P=>!Os(P)).length}),d.jsx("p",{className:"text-sm text-gray-500",children:"Aujourd'hui"})]})]}),d.jsx(qn,{children:i&&d.jsx(iK,{date:i,tasks:b(i),onClose:()=>o(null),onAddTask:()=>w(i),onToggleTask:x})}),a&&c&&d.jsx(rK,{onClose:()=>{l(!1),u(null)},defaultDate:c})]})},aK=()=>{const{getDailyQuests:t,getWeeklyQuests:e,claimQuestReward:n}=Lu(),{gameStats:r}=he(),[s,i]=M.useState("daily"),o=t(),a=e();if(!r)return null;const l=s==="daily"?o:a,c=o.filter(b=>b.completed).length,u=a.filter(b=>b.completed).length,h=o.filter(b=>b.completed&&!b.claimed).length,m=a.filter(b=>b.completed&&!b.claimed).length,p=new Date,g=new Date(p);g.setDate(g.getDate()+1),g.setHours(0,0,0,0);const v=hq(g,p),_=fq(g,p)%60,w=new Date(p);w.setDate(w.getDate()+((7-w.getDay()+1)%7||7)),w.setHours(0,0,0,0);const x=Math.ceil((w.getTime()-p.getTime())/(1e3*60*60*24));return d.jsxs(Oo,{className:"space-y-4 sm:space-y-6 px-1 sm:px-0",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{children:[d.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[d.jsx(B0,{className:"w-6 h-6 sm:w-7 sm:h-7 text-primary-500"}),"Qutes"]}),d.jsx("p",{className:"text-gray-500 mt-1 text-sm sm:text-base",children:"Compltez des qutes pour des bonus!"})]})}),d.jsxs(Y.div,{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",variants:Nw,initial:"hidden",animate:"visible",children:[d.jsx(Y.div,{variants:Vn,children:d.jsx(ut,{icon:d.jsx(wr,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Quotidiennes",value:`${c}/${o.length}`,color:"primary"})}),d.jsx(Y.div,{variants:Vn,children:d.jsx(ut,{icon:d.jsx(Gn,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Hebdomadaires",value:`${u}/${a.length}`,color:"purple"})}),d.jsx(Y.div,{variants:Vn,children:d.jsx(ut,{icon:d.jsx(z0,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:" rclamer",value:h+m,color:"yellow"})}),d.jsx(Y.div,{variants:Vn,children:d.jsx(ut,{icon:d.jsx(ur,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Compltes",value:On(r.questsCompleted||0),color:"green"})})]}),d.jsx(Te,{className:"p-3 sm:p-4 bg-gradient-to-r from-primary-500/10 to-cyan-500/10",children:d.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[d.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-primary-500/20 flex items-center justify-center flex-shrink-0",children:d.jsx(Ym,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary-500"})}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("p",{className:"font-medium text-sm sm:text-base",children:"Prochaine rinitialisation"}),d.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:[d.jsxs("span",{className:"sm:hidden",children:["Daily: ",v,"h | Weekly: ",x,"j"]}),d.jsxs("span",{className:"hidden sm:inline",children:["Quotidienne: ",v,"h ",_,"m | Hebdomadaire: ",x," jour",x>1?"s":""]})]})]})]})})}),d.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[d.jsxs("button",{onClick:()=>i("daily"),className:Z("flex-1 py-2.5 sm:py-3 rounded-md text-xs sm:text-sm font-medium transition-colors flex items-center justify-center gap-1.5 sm:gap-2 touch-manipulation",s==="daily"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500"),children:[d.jsx(wr,{className:"w-4 h-4 sm:w-5 sm:h-5"}),d.jsx("span",{className:"hidden xs:inline",children:"Quotidiennes"}),d.jsx("span",{className:"xs:hidden",children:"Daily"}),h>0&&d.jsx("span",{className:"w-4 h-4 sm:w-5 sm:h-5 rounded-full bg-primary-500 text-white text-[10px] sm:text-xs flex items-center justify-center",children:h})]}),d.jsxs("button",{onClick:()=>i("weekly"),className:Z("flex-1 py-2.5 sm:py-3 rounded-md text-xs sm:text-sm font-medium transition-colors flex items-center justify-center gap-1.5 sm:gap-2 touch-manipulation",s==="weekly"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500"),children:[d.jsx(Gn,{className:"w-4 h-4 sm:w-5 sm:h-5"}),d.jsx("span",{className:"hidden xs:inline",children:"Hebdomadaires"}),d.jsx("span",{className:"xs:hidden",children:"Weekly"}),m>0&&d.jsx("span",{className:"w-4 h-4 sm:w-5 sm:h-5 rounded-full bg-purple-500 text-white text-[10px] sm:text-xs flex items-center justify-center",children:m})]})]}),d.jsx("div",{className:"space-y-3 sm:space-y-4",children:l.map((b,C)=>d.jsx(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:C*.05},children:d.jsx(H0,{quest:b})},b.id))}),l.length===0&&d.jsxs("div",{className:"text-center py-12 sm:py-16",children:[d.jsx(B0,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto text-gray-300 mb-4"}),d.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"Aucune qute disponible"}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-2",children:"Nouvelles qutes  la prochaine rinitialisation"})]}),d.jsx(Te,{className:"p-3 sm:p-4 bg-gradient-to-r from-yellow-500/10 to-orange-500/10",children:d.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[d.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center flex-shrink-0 text-lg sm:text-xl",children:""}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("h4",{className:"font-medium text-sm sm:text-base",children:"Astuce"}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Compltez vos qutes quotidiennes pour maximiser vos gains d'XP!"})]})]})})]})},Og={common:"from-slate-400 to-slate-500",rare:"from-blue-400 to-blue-600",epic:"from-purple-400 to-purple-600",legendary:"from-amber-400 via-yellow-400 to-orange-500"},lK={common:"bg-slate-500/10 border-slate-400/30",rare:"bg-blue-500/10 border-blue-400/30",epic:"bg-purple-500/10 border-purple-400/30",legendary:"bg-amber-500/10 border-amber-400/30"},cK={common:"text-slate-400",rare:"text-blue-400",epic:"text-purple-400",legendary:"text-amber-400"},uK=({achievement:t,isUnlocked:e,progress:n=0})=>{const r=Math.min(n/t.requirement.value*100,100),s=t.rarity;return d.jsxs("div",{className:Z("group relative overflow-hidden rounded-2xl transition-all duration-300","border-2",e?`${lK[s]} hover:scale-[1.02]`:"bg-gray-800/40 border-gray-700/50 hover:border-gray-600/50"),children:[e&&s==="legendary"&&d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/20 via-yellow-500/20 to-orange-500/20 animate-pulse"}),d.jsx("div",{className:"relative p-4",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"relative flex-shrink-0",children:[e&&d.jsx("div",{className:Z("absolute inset-0 rounded-2xl blur-lg opacity-50",`bg-gradient-to-br ${Og[s]}`)}),d.jsx("div",{className:Z("relative w-16 h-16 rounded-2xl flex items-center justify-center","transition-all duration-300",e?`bg-gradient-to-br ${Og[s]} shadow-lg`:"bg-gray-700/80 border border-gray-600/50"),children:e?d.jsx("span",{className:"text-3xl drop-shadow-lg",children:t.icon}):d.jsx(dH,{className:"w-7 h-7 text-gray-500"})}),e&&d.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-green-500 border-2 border-gray-900 flex items-center justify-center shadow-lg",children:d.jsx(xN,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h3",{className:Z("font-bold truncate",e?"text-white":"text-gray-400"),children:t.secret&&!e?"???":t.name}),s==="legendary"&&d.jsx(Gn,{className:Z("w-4 h-4",e?"text-amber-400":"text-gray-600")}),s==="epic"&&d.jsx(Sw,{className:Z("w-4 h-4",e?"text-purple-400":"text-gray-600")})]}),d.jsx("p",{className:Z("text-sm mt-1 line-clamp-1",e?"text-gray-300":"text-gray-500"),children:t.secret&&!e?"Achievement secret":t.description}),!e&&!t.secret&&d.jsxs("div",{className:"mt-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs mb-1.5",children:[d.jsx("span",{className:"text-gray-500",children:"Progression"}),d.jsxs("span",{className:cK[s],children:[n,"/",t.requirement.value]})]}),d.jsx("div",{className:"h-2 bg-gray-700/80 rounded-full overflow-hidden",children:d.jsx("div",{className:Z("h-full rounded-full transition-all duration-500",`bg-gradient-to-r ${Og[s]}`),style:{width:`${r}%`}})})]}),d.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[d.jsxs("div",{className:Z("flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold",e?"bg-teal-500/20 text-teal-300":"bg-gray-700/50 text-gray-400"),children:[d.jsx("span",{className:"text-teal-400",children:""}),t.xpReward," XP"]}),d.jsxs("div",{className:Z("flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold",e?"bg-amber-500/20 text-amber-300":"bg-gray-700/50 text-gray-400"),children:[d.jsx("span",{children:""}),t.coinReward]})]})]})]})})]})},dK=()=>{const{gameStats:t}=he(),[e,n]=M.useState("all"),[r,s]=M.useState("all"),[i,o]=M.useState("");if(!t)return null;const a=vr.filter(p=>{if(e!=="all"&&p.category!==e||r!=="all"&&p.rarity!==r)return!1;if(i){const g=i.toLowerCase();if(!p.name.toLowerCase().includes(g)&&!p.description.toLowerCase().includes(g))return!1}return!0}),l=vr.filter(p=>t.achievementsUnlocked.includes(p.id)),c=l.reduce((p,g)=>p+g.xpReward,0),u=Math.round(l.length/vr.length*100),h={common:l.filter(p=>p.rarity==="common").length,rare:l.filter(p=>p.rarity==="rare").length,epic:l.filter(p=>p.rarity==="epic").length,legendary:l.filter(p=>p.rarity==="legendary").length},m={common:"from-gray-400 to-gray-500",rare:"from-blue-400 to-blue-500",epic:"from-purple-400 to-purple-500",legendary:"from-yellow-400 to-orange-500"};return d.jsxs(Oo,{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[d.jsx(Rr,{className:"w-7 h-7 text-yellow-500"}),"Achievements"]}),d.jsxs("p",{className:"text-gray-500 mt-1",children:[l.length," / ",vr.length," dbloqus (",u,"%)"]})]}),d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx(ut,{icon:d.jsx(Rr,{className:"w-6 h-6"}),label:"Total dbloqu",value:`${l.length}/${vr.length}`,color:"yellow"}),d.jsx(ut,{icon:d.jsx(Jm,{className:"w-6 h-6"}),label:"XP Gagne",value:On(c),color:"primary"}),d.jsx(ut,{icon:d.jsx(wN,{className:"w-6 h-6"}),label:"Lgendaires",value:`${h.legendary}/5`,color:"orange"}),d.jsx(ut,{icon:d.jsx(wr,{className:"w-6 h-6"}),label:"Progression",value:`${u}%`,color:"green"})]}),d.jsxs(Te,{className:"p-5",children:[d.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[d.jsx(Gn,{className:"w-5 h-5 text-primary-500"}),"Progression par raret"]}),d.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:["common","rare","epic","legendary"].map(p=>{const g=vr.filter(w=>w.rarity===p).length,v=h[p],_=Math.round(v/g*100);return d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:Z("w-16 h-16 mx-auto rounded-full bg-gradient-to-br flex items-center justify-center mb-2",m[p]),children:d.jsx("span",{className:"text-2xl font-bold text-white",children:v})}),d.jsx("p",{className:"font-medium capitalize",children:p}),d.jsxs("p",{className:"text-sm text-gray-500",children:[_,"%"]})]},p)})})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsx(_r,{placeholder:"Rechercher un achievement...",value:i,onChange:p=>o(p.target.value),leftIcon:d.jsx(bN,{className:"w-5 h-5"})})}),d.jsxs("select",{value:e,onChange:p=>n(p.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[d.jsx("option",{value:"all",children:"Toutes les catgories"}),EN.map(p=>d.jsxs("option",{value:p.id,children:[p.icon," ",p.name]},p.id))]}),d.jsxs("select",{value:r,onChange:p=>s(p.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[d.jsx("option",{value:"all",children:"Toutes rarets"}),d.jsx("option",{value:"common",children:"Commun"}),d.jsx("option",{value:"rare",children:"Rare"}),d.jsx("option",{value:"epic",children:"pique"}),d.jsx("option",{value:"legendary",children:"Lgendaire"})]})]}),d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:a.map((p,g)=>{const v=t.achievementsUnlocked.includes(p.id);let _=0;switch(p.requirement.type){case"tasks_completed":_=t.tasksCompleted;break;case"streak":_=t.currentStreak;break;case"level":_=t.level;break;case"total_xp":_=t.totalXP;break;case"achievements":_=t.achievementsUnlocked.length;break;default:_=0}return d.jsx(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.03},children:d.jsx(uK,{achievement:p,isUnlocked:v,progress:_})},p.id)})}),a.length===0&&d.jsxs("div",{className:"text-center py-16",children:[d.jsx(Rr,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),d.jsx("p",{className:"text-gray-500",children:"Aucun achievement trouv"})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function $u(t){return t+.5|0}const Ks=(t,e,n)=>Math.max(Math.min(t,n),e);function Ql(t){return Ks($u(t*2.55),0,255)}function hi(t){return Ks($u(t*255),0,255)}function qr(t){return Ks($u(t/2.55)/100,0,1)}function lS(t){return Ks($u(t*100),0,100)}const Rn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},G0=[..."0123456789ABCDEF"],hK=t=>G0[t&15],fK=t=>G0[(t&240)>>4]+G0[t&15],Vd=t=>(t&240)>>4===(t&15),mK=t=>Vd(t.r)&&Vd(t.g)&&Vd(t.b)&&Vd(t.a);function pK(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Rn[t[1]]*17,g:255&Rn[t[2]]*17,b:255&Rn[t[3]]*17,a:e===5?Rn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Rn[t[1]]<<4|Rn[t[2]],g:Rn[t[3]]<<4|Rn[t[4]],b:Rn[t[5]]<<4|Rn[t[6]],a:e===9?Rn[t[7]]<<4|Rn[t[8]]:255})),n}const gK=(t,e)=>t<255?e(t):"";function yK(t){var e=mK(t)?hK:fK;return t?"#"+e(t.r)+e(t.g)+e(t.b)+gK(t.a,e):void 0}const vK=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ON(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function xK(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function wK(t,e,n){const r=ON(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function _K(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Mw(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=_K(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function jw(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(hi)}function Ow(t,e,n){return jw(ON,t,e,n)}function bK(t,e,n){return jw(wK,t,e,n)}function kK(t,e,n){return jw(xK,t,e,n)}function LN(t){return(t%360+360)%360}function TK(t){const e=vK.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Ql(+e[5]):hi(+e[5]));const s=LN(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=bK(s,i,o):e[1]==="hsv"?r=kK(s,i,o):r=Ow(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function SK(t,e){var n=Mw(t);n[0]=LN(n[0]+e),n=Ow(n),t.r=n[0],t.g=n[1],t.b=n[2]}function EK(t){if(!t)return;const e=Mw(t),n=e[0],r=lS(e[1]),s=lS(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${qr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const cS={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},uS={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function CK(){const t={},e=Object.keys(uS),n=Object.keys(cS);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,cS[i]);i=parseInt(uS[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Fd;function PK(t){Fd||(Fd=CK(),Fd.transparent=[0,0,0,0]);const e=Fd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const IK=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function AK(t){const e=IK.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Ql(o):Ks(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Ql(r):Ks(r,0,255)),s=255&(e[4]?Ql(s):Ks(s,0,255)),i=255&(e[6]?Ql(i):Ks(i,0,255)),{r,g:s,b:i,a:n}}}function RK(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${qr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Lg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Go=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function NK(t,e,n){const r=Go(qr(t.r)),s=Go(qr(t.g)),i=Go(qr(t.b));return{r:hi(Lg(r+n*(Go(qr(e.r))-r))),g:hi(Lg(s+n*(Go(qr(e.g))-s))),b:hi(Lg(i+n*(Go(qr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Ud(t,e,n){if(t){let r=Mw(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Ow(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function VN(t,e){return t&&Object.assign(e||{},t)}function dS(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=hi(t[3]))):(e=VN(t,{r:0,g:0,b:0,a:1}),e.a=hi(e.a)),e}function DK(t){return t.charAt(0)==="r"?AK(t):TK(t)}class ou{constructor(e){if(e instanceof ou)return e;const n=typeof e;let r;n==="object"?r=dS(e):n==="string"&&(r=pK(e)||PK(e)||DK(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=VN(this._rgb);return e&&(e.a=qr(e.a)),e}set rgb(e){this._rgb=dS(e)}rgbString(){return this._valid?RK(this._rgb):void 0}hexString(){return this._valid?yK(this._rgb):void 0}hslString(){return this._valid?EK(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=NK(this._rgb,e._rgb,n)),this}clone(){return new ou(this.rgb)}alpha(e){return this._rgb.a=hi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=$u(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ud(this._rgb,2,e),this}darken(e){return Ud(this._rgb,2,-e),this}saturate(e){return Ud(this._rgb,1,e),this}desaturate(e){return Ud(this._rgb,1,-e),this}rotate(e){return SK(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ur(){}const MK=(()=>{let t=0;return()=>t++})();function Se(t){return t==null}function ct(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ge(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Gt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function mr(t,e){return Gt(t)?t:e}function fe(t,e){return typeof t>"u"?e:t}const jK=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,FN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Le(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ce(t,e,n,r){let s,i,o;if(ct(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(ge(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Uf(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function zf(t){if(ct(t))return t.map(zf);if(ge(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=zf(t[n[s]]);return e}return t}function UN(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function OK(t,e,n,r){if(!UN(t))return;const s=e[t],i=n[t];ge(s)&&ge(i)?au(s,i,r):e[t]=zf(i)}function au(t,e,n){const r=ct(e)?e:[e],s=r.length;if(!ge(t))return t;n=n||{};const i=n.merger||OK;let o;for(let a=0;a<s;++a){if(o=r[a],!ge(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function kc(t,e){return au(t,e,{merger:LK})}function LK(t,e,n){if(!UN(t))return;const r=e[t],s=n[t];ge(r)&&ge(s)?kc(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=zf(s))}const hS={"":t=>t,x:t=>t.x,y:t=>t.y};function VK(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function FK(t){const e=VK(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Eo(t,e){return(hS[e]||(hS[e]=FK(e)))(t)}function Lw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const lu=t=>typeof t<"u",wi=t=>typeof t=="function",fS=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function UK(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Pe=Math.PI,He=2*Pe,zK=He+Pe,Bf=Number.POSITIVE_INFINITY,BK=Pe/180,mt=Pe/2,Fi=Pe/4,mS=Pe*2/3,zN=Math.log10,Nr=Math.sign;function Tc(t,e,n){return Math.abs(t-e)<n}function pS(t){const e=Math.round(t);t=Tc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(zN(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function $K(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function WK(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function cu(t){return!WK(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function HK(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function qK(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function ts(t){return t*(Pe/180)}function GK(t){return t*(180/Pe)}function gS(t){if(!Gt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function BN(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Pe&&(i+=He),{angle:i,distance:s}}function K0(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function KK(t,e){return(t-e+zK)%He-Pe}function xn(t){return(t%He+He)%He}function uu(t,e,n,r){const s=xn(t),i=xn(e),o=xn(n),a=xn(i-s),l=xn(o-s),c=xn(s-i),u=xn(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function Bt(t,e,n){return Math.max(e,Math.min(n,t))}function QK(t){return Bt(t,-32768,32767)}function ns(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Vw(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const io=(t,e,n,r)=>Vw(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),YK=(t,e,n)=>Vw(t,n,r=>t[r][e]>=n);function XK(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const $N=["push","pop","shift","splice","unshift"];function JK(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),$N.forEach(n=>{const r="_onData"+Lw(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function yS(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&($N.forEach(i=>{delete t[i]}),delete t._chartjs)}function WN(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const HN=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function qN(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,HN.call(window,()=>{r=!1,t.apply(e,n)}))}}function ZK(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Fw=t=>t==="start"?"left":t==="end"?"right":"center",Lt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,eQ=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function tQ(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:m,minDefined:p,maxDefined:g}=o.getUserBounds();if(p){if(s=Math.min(io(l,u,h).lo,n?r:io(e,u,o.getPixelForValue(h)).lo),c){const v=l.slice(0,s+1).reverse().findIndex(_=>!Se(_[a.axis]));s-=Math.max(0,v)}s=Bt(s,0,r-1)}if(g){let v=Math.max(io(l,o.axis,m,!0).hi+1,n?0:io(e,u,o.getPixelForValue(m),!0).hi+1);if(c){const _=l.slice(v-1).findIndex(w=>!Se(w[a.axis]));v+=Math.max(0,_)}i=Bt(v,s,r)-s}else i=r-s}return{start:s,count:i}}function nQ(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const zd=t=>t===0||t===1,vS=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*He/n)),xS=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*He/n)+1,Sc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*mt)+1,easeOutSine:t=>Math.sin(t*mt),easeInOutSine:t=>-.5*(Math.cos(Pe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>zd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>zd(t)?t:vS(t,.075,.3),easeOutElastic:t=>zd(t)?t:xS(t,.075,.3),easeInOutElastic(t){return zd(t)?t:t<.5?.5*vS(t*2,.1125,.45):.5+.5*xS(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Sc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Sc.easeInBounce(t*2)*.5:Sc.easeOutBounce(t*2-1)*.5+.5};function Uw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function wS(t){return Uw(t)?t:new ou(t)}function Vg(t){return Uw(t)?t:new ou(t).saturate(.5).darken(.1).hexString()}const rQ=["x","y","borderWidth","radius","tension"],sQ=["color","borderColor","backgroundColor"];function iQ(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:sQ},numbers:{type:"number",properties:rQ}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function oQ(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const _S=new Map;function aQ(t,e){e=e||{};const n=t+JSON.stringify(e);let r=_S.get(n);return r||(r=new Intl.NumberFormat(t,e),_S.set(n,r)),r}function zw(t,e,n){return aQ(e,n).format(t)}const lQ={values(t){return ct(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=cQ(t,n)}const o=zN(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),zw(t,r,l)}};function cQ(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var GN={formatters:lQ};function uQ(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:GN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Co=Object.create(null),Q0=Object.create(null);function Ec(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Fg(t,e,n){return typeof e=="string"?au(Ec(t,e),n):au(Ec(t,""),e)}class dQ{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Vg(s.backgroundColor),this.hoverBorderColor=(r,s)=>Vg(s.borderColor),this.hoverColor=(r,s)=>Vg(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Fg(this,e,n)}get(e){return Ec(this,e)}describe(e,n){return Fg(Q0,e,n)}override(e,n){return Fg(Co,e,n)}route(e,n,r,s){const i=Ec(this,e),o=Ec(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return ge(l)?Object.assign({},c,l):fe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var rt=new dQ({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[iQ,oQ,uQ]);function hQ(t){return!t||Se(t.size)||Se(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function bS(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Ui(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function kS(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Y0(t,e,n,r){KN(t,e,n,r,null)}function KN(t,e,n,r,s){let i,o,a,l,c,u,h,m;const p=e.pointStyle,g=e.rotation,v=e.radius;let _=(g||0)*BK;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(_),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),p){default:s?t.ellipse(n,r,s/2,v,0,0,He):t.arc(n,r,v,0,He),t.closePath();break;case"triangle":u=s?s/2:v,t.moveTo(n+Math.sin(_)*u,r-Math.cos(_)*v),_+=mS,t.lineTo(n+Math.sin(_)*u,r-Math.cos(_)*v),_+=mS,t.lineTo(n+Math.sin(_)*u,r-Math.cos(_)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(_+Fi)*l,h=Math.cos(_+Fi)*(s?s/2-c:l),a=Math.sin(_+Fi)*l,m=Math.sin(_+Fi)*(s?s/2-c:l),t.arc(n-h,r-a,c,_-Pe,_-mt),t.arc(n+m,r-o,c,_-mt,_),t.arc(n+h,r+a,c,_,_+mt),t.arc(n-m,r+o,c,_+mt,_+Pe),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*v,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}_+=Fi;case"rectRot":h=Math.cos(_)*(s?s/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,m=Math.sin(_)*(s?s/2:v),t.moveTo(n-h,r-a),t.lineTo(n+m,r-o),t.lineTo(n+h,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":_+=Fi;case"cross":h=Math.cos(_)*(s?s/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,m=Math.sin(_)*(s?s/2:v),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":h=Math.cos(_)*(s?s/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,m=Math.sin(_)*(s?s/2:v),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),_+=Fi,h=Math.cos(_)*(s?s/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,m=Math.sin(_)*(s?s/2:v),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=s?s/2:Math.cos(_)*v,a=Math.sin(_)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(_)*(s?s/2:v),r+Math.sin(_)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function du(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Zm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ep(t){t.restore()}function fQ(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function mQ(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function pQ(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Se(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function gQ(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function yQ(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function hu(t,e,n,r,s,i={}){const o=ct(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,pQ(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&yQ(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Se(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),gQ(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function $f(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Pe,Pe,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Pe,mt,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,mt,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-mt,!0),t.lineTo(n+o.topLeft,r)}const vQ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,xQ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function wQ(t,e){const n=(""+t).match(vQ);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const _Q=t=>+t||0;function Bw(t,e){const n={},r=ge(e),s=r?Object.keys(e):e,i=ge(t)?r?o=>fe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=_Q(i(o));return n}function QN(t){return Bw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Pa(t){return Bw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Kn(t){const e=QN(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function $t(t,e){t=t||{},e=e||rt.font;let n=fe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=fe(t.style,e.style);r&&!(""+r).match(xQ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:fe(t.family,e.family),lineHeight:wQ(fe(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:fe(t.weight,e.weight),string:""};return s.string=hQ(s),s}function Bd(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function bQ(t,e,n){const{min:r,max:s}=t,i=FN(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Lo(t,e){return Object.assign(Object.create(t),e)}function $w(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=ZN("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>$w([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return XN(a,l,()=>AQ(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return SS(a).includes(l)},ownKeys(a){return SS(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function Ka(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:YN(t,r),setContext:i=>Ka(t,i,n,r),override:i=>Ka(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return XN(i,o,()=>TQ(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function YN(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:wi(n)?n:()=>n,isIndexable:wi(r)?r:()=>r}}const kQ=(t,e)=>t?t+Lw(e):e,Ww=(t,e)=>ge(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function XN(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function TQ(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return wi(a)&&o.isScriptable(e)&&(a=SQ(e,a,t,n)),ct(a)&&a.length&&(a=EQ(e,a,t,o.isIndexable)),Ww(e,a)&&(a=Ka(a,s,i&&i[e],o)),a}function SQ(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),Ww(t,l)&&(l=Hw(s._scopes,s,t,l)),l}function EQ(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(ge(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=Hw(c,s,t,u);e.push(Ka(h,i,o&&o[t],a))}}return e}function JN(t,e,n){return wi(t)?t(e,n):t}const CQ=(t,e)=>t===!0?e:typeof t=="string"?Eo(e,t):void 0;function PQ(t,e,n,r,s){for(const i of e){const o=CQ(n,i);if(o){t.add(o);const a=JN(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Hw(t,e,n,r){const s=e._rootScopes,i=JN(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=TS(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=TS(a,o,i,l,r),l===null)?!1:$w(Array.from(a),[""],s,i,()=>IQ(e,n,r))}function TS(t,e,n,r,s){for(;n;)n=PQ(t,e,n,r,s);return n}function IQ(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return ct(s)&&ge(n)?n:s||{}}function AQ(t,e,n,r){let s;for(const i of e)if(s=ZN(kQ(i,t),n),typeof s<"u")return Ww(t,s)?Hw(n,r,t,s):s}function ZN(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function SS(t){let e=t._keys;return e||(e=t._keys=RQ(t._scopes)),e}function RQ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const NQ=Number.EPSILON||1e-14,Qa=(t,e)=>e<t.length&&!t[e].skip&&t[e],eD=t=>t==="x"?"y":"x";function DQ(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=K0(i,s),l=K0(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,m=r*u;return{previous:{x:i.x-h*(o.x-s.x),y:i.y-h*(o.y-s.y)},next:{x:i.x+m*(o.x-s.x),y:i.y+m*(o.y-s.y)}}}function MQ(t,e,n){const r=t.length;let s,i,o,a,l,c=Qa(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Qa(t,u+1),!(!l||!c)){if(Tc(e[u],0,NQ)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=i*o*e[u])}}function jQ(t,e,n="x"){const r=eD(n),s=t.length;let i,o,a,l=Qa(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Qa(t,c+1),!a)continue;const u=a[n],h=a[r];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${r}`]=h-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${r}`]=h+i*e[c])}}function OQ(t,e="x"){const n=eD(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=Qa(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Qa(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?Nr(s[o-1])!==Nr(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}MQ(t,s,i),jQ(t,i,e)}function $d(t,e,n){return Math.max(Math.min(t,n),e)}function LQ(t,e){let n,r,s,i,o,a=du(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&du(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=$d(s.cp1x,e.left,e.right),s.cp1y=$d(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=$d(s.cp2x,e.left,e.right),s.cp2y=$d(s.cp2y,e.top,e.bottom)))}function VQ(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")OQ(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=DQ(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&LQ(t,n)}function qw(){return typeof window<"u"&&typeof document<"u"}function Gw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Wf(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const tp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function FQ(t,e){return tp(t).getPropertyValue(e)}const UQ=["top","right","bottom","left"];function uo(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=UQ[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const zQ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function BQ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(zQ(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Qi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=tp(n),i=s.boxSizing==="border-box",o=uo(s,"padding"),a=uo(s,"border","width"),{x:l,y:c,box:u}=BQ(t,n),h=o.left+(u&&a.left),m=o.top+(u&&a.top);let{width:p,height:g}=e;return i&&(p-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/p*n.width/r),y:Math.round((c-m)/g*n.height/r)}}function $Q(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&Gw(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=tp(i),l=uo(a,"border","width"),c=uo(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Wf(a.maxWidth,i,"clientWidth"),s=Wf(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||Bf,maxHeight:s||Bf}}const Qs=t=>Math.round(t*10)/10;function WQ(t,e,n,r){const s=tp(t),i=uo(s,"margin"),o=Wf(s.maxWidth,t,"clientWidth")||Bf,a=Wf(s.maxHeight,t,"clientHeight")||Bf,l=$Q(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const m=uo(s,"border","width"),p=uo(s,"padding");c-=p.width+m.width,u-=p.height+m.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=Qs(Math.min(c,o,l.maxWidth)),u=Qs(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Qs(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Qs(Math.floor(u*r))),{width:c,height:u}}function ES(t,e,n){const r=e||1,s=Qs(t.height*r),i=Qs(t.width*r);t.height=Qs(t.height),t.width=Qs(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const HQ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};qw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function CS(t,e){const n=FQ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Yi(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function qQ(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function GQ(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Yi(t,s,n),a=Yi(s,i,n),l=Yi(i,e,n),c=Yi(o,a,n),u=Yi(a,l,n);return Yi(c,u,n)}const KQ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},QQ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ia(t,e,n){return t?KQ(e,n):QQ()}function tD(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function nD(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function rD(t){return t==="angle"?{between:uu,compare:KK,normalize:xn}:{between:ns,compare:(e,n)=>e-n,normalize:e=>e}}function PS({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function YQ(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=rD(r),l=e.length;let{start:c,end:u,loop:h}=t,m,p;if(h){for(c+=l,u+=l,m=0,p=l;m<p&&o(a(e[c%l][r]),s,i);++m)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function sD(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=rD(r),{start:u,end:h,loop:m,style:p}=YQ(t,e,n),g=[];let v=!1,_=null,w,x,b;const C=()=>l(s,b,w)&&a(s,b)!==0,P=()=>a(i,w)===0||l(i,b,w),j=()=>v||C(),S=()=>!v||P();for(let T=u,E=u;T<=h;++T)x=e[T%o],!x.skip&&(w=c(x[r]),w!==b&&(v=l(w,s,i),_===null&&j()&&(_=a(w,s)===0?T:E),_!==null&&S()&&(g.push(PS({start:_,end:T,loop:m,count:o,style:p})),_=null),E=T,b=w));return _!==null&&g.push(PS({start:_,end:h,loop:m,count:o,style:p})),g}function iD(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=sD(r[s],t.points,e);i.length&&n.push(...i)}return n}function XQ(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function JQ(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function ZQ(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=XQ(n,s,i,r);if(r===!0)return IS(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return IS(t,JQ(n,o,l,c),n,e)}function IS(t,e,n,r){return!r||!r.setContext||!n?e:eY(t,e,n,r)}function eY(t,e,n,r){const s=t._chart.getContext(),i=AS(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,h=e[0].start,m=h;function p(g,v,_,w){const x=a?-1:1;if(g!==v){for(g+=l;n[g%l].skip;)g-=x;for(;n[v%l].skip;)v+=x;g%l!==v%l&&(c.push({start:g%l,end:v%l,loop:_,style:w}),u=w,h=v%l)}}for(const g of e){h=a?h:g.start;let v=n[h%l],_;for(m=h+1;m<=g.end;m++){const w=n[m%l];_=AS(r.setContext(Lo(s,{type:"segment",p0:v,p1:w,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),tY(_,u)&&p(h,m-1,g.loop,u),v=w,u=_}h<m-1&&p(h,m-1,g.loop,u)}return c}function AS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function tY(t,e){if(!e)return!1;const n=[],r=function(s,i){return Uw(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Wd(t,e,n){return t.options.clip?t[n]:e[n]}function nY(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Wd(n,e,"left"),right:Wd(n,e,"right"),top:Wd(r,e,"top"),bottom:Wd(r,e,"bottom")}:e}function oD(t,e){const n=e._clip;if(n.disabled)return!1;const r=nY(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class rY{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=HN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var zr=new rY;const RS="transparent",sY={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=wS(t||RS),s=r.valid&&wS(e||RS);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class iY{constructor(e,n,r,s){const i=n[r];s=Bd([e.to,s,i,e.from]);const o=Bd([e.from,i,s]);this._active=!0,this._fn=e.fn||sY[e.type||typeof o],this._easing=Sc[e.easing]||Sc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Bd([e.to,n,s,e.from]),this._from=Bd([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class aD{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ge(e))return;const n=Object.keys(rt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!ge(i))return;const o={};for(const a of n)o[a]=i[a];(ct(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=aY(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&oY(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let h=i[c];const m=r.get(c);if(h)if(m&&h.active()){h.update(m,u,a);continue}else h.cancel();if(!m||!m.duration){e[c]=u;continue}i[c]=h=new iY(m,e,c,u),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return zr.add(this._chart,r),!0}}function oY(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function aY(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function NS(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function lY(t,e,n){if(n===!1)return!1;const r=NS(t,n),s=NS(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function cY(t){let e,n,r,s;return ge(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function lD(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function DS(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Gt(c)&&(i||e===0||Nr(e)===Nr(c))&&(e+=c)}return!u&&!r.all?0:e}function uY(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function Ug(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function dY(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function hY(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function fY(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function MS(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function jS(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=dY(i,o,r),h=e.length;let m;for(let p=0;p<h;++p){const g=e[p],{[l]:v,[c]:_}=g,w=g._stacks||(g._stacks={});m=w[c]=fY(s,u,v),m[a]=_,m._top=MS(m,o,!0,r.type),m._bottom=MS(m,o,!1,r.type);const x=m._visualValues||(m._visualValues={});x[a]=_}}function zg(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function mY(t,e){return Lo(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function pY(t,e,n){return Lo(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Dl(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Bg=t=>t==="reset"||t==="none",OS=(t,e)=>e?t:Object.assign({},t),gY=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:lD(n,!0),values:null};class ho{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ug(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Dl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,m,p,g)=>h==="x"?m:h==="r"?g:p,i=n.xAxisID=fe(r.xAxisID,zg(e,"x")),o=n.yAxisID=fe(r.yAxisID,zg(e,"y")),a=n.rAxisID=fe(r.rAxisID,zg(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&yS(this._data,this),e._stacked&&Dl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ge(n)){const s=this._cachedMeta;this._data=uY(n,s)}else if(r!==n){if(r){yS(r,this);const s=this._cachedMeta;Dl(s),s._parsed=[]}n&&Object.isExtensible(n)&&JK(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Ug(n.vScale,n),n.stack!==r.stack&&(s=!0,Dl(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(jS(this,n._parsed),n._stacked=Ug(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,h,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{ct(s[e])?m=this.parseArrayData(r,s,e,n):ge(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);const p=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=h=m[u],l&&(p()&&(l=!1),c=h);r._sorted=l}o&&jS(this,m)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,h=new Array(s);let m,p,g;for(m=0,p=s;m<p;++m)g=m+r,h[m]={[a]:u||i.parse(c[g],g),[l]:o.parse(n[g],g)};return h}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+r,h=n[u],a[l]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,m,p;for(u=0,h=s;u<h;++u)m=u+r,p=n[m],c[u]={x:i.parse(Eo(p,a),m),y:o.parse(Eo(p,l),m)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:lD(s,!0),values:n._stacks[e.axis]._visualValues};return DS(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=DS(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=gY(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=hY(a);let m,p;function g(){p=s[m];const v=p[a.axis];return!Gt(p[e.axis])||u>v||h<v}for(m=0;m<o&&!(!g()&&(this.updateRangeFromParsed(c,e,p,l),i));++m);if(i){for(m=o-1;m>=0;--m)if(!g()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],Gt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=cY(fe(this.options.clip,lY(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=pY(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=mY(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&lu(r);if(a)return OS(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],m=c.getOptionScopes(this.getDataset(),u),p=Object.keys(rt.elements[e]),g=()=>this.getContext(r,s,n),v=c.resolveNamedOptions(m,p,g,h);return v.$shared&&(v.$shared=l,i[o]=Object.freeze(OS(v,l))),v}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),m=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(m,this.getContext(e,r,n))}const c=new aD(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Bg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){Bg(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!Bg(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Dl(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}J(ho,"defaults",{}),J(ho,"datasetElementType",null),J(ho,"dataElementType",null);function yY(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=WN(r.sort((s,i)=>s-i))}return t._cache.$bar}function vY(t){const e=t.iScale,n=yY(e,t.type);let r=e._length,s,i,o,a;const l=()=>{o===32767||o===-32768||(lu(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,i=n.length;s<i;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,i=e.ticks.length;s<i;++s)o=e.getPixelForTick(s),l();return r}function xY(t,e,n,r){const s=n.barThickness;let i,o;return Se(s)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=s*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[t]-i/2}}function wY(t,e,n,r){const s=e.pixels,i=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const c=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function _Y(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),o=Math.min(s,i),a=Math.max(s,i);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:i,min:o,max:a}}function cD(t,e,n,r){return ct(t)?_Y(t,e,n,r):e[n.axis]=n.parse(t,r),e}function LS(t,e,n,r){const s=t.iScale,i=t.vScale,o=s.getLabels(),a=s===i,l=[];let c,u,h,m;for(c=n,u=n+r;c<u;++c)m=e[c],h={},h[s.axis]=a||s.parse(o[c],c),l.push(cD(m,h,i,c));return l}function $g(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function bY(t,e,n){return t!==0?Nr(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function kY(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function TY(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=kY(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=u:(i[VS(u,o,a,l)]=!0,s=c)),i[VS(s,o,a,l)]=!0,t.borderSkipped=i}function VS(t,e,n,r){return r?(t=SY(t,e,n),t=FS(t,n,e)):t=FS(t,e,n),t}function SY(t,e,n){return t===e?n:t===n?e:t}function FS(t,e,n){return t==="start"?e:t==="end"?n:t}function EY(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Eh extends ho{parsePrimitiveData(e,n,r,s){return LS(e,n,r,s)}parseArrayData(e,n,r,s){return LS(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let m,p,g,v;for(m=r,p=r+s;m<p;++m)v=n[m],g={},g[i.axis]=i.parse(Eo(v,c),m),h.push(cD(Eo(v,u),g,o,m));return h}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),o=i._custom,a=$g(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:m}=this._getSharedOptions(n,s);for(let p=n;p<n+r;p++){const g=this.getParsed(p),v=i||Se(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),_=this._calculateBarIndexPixels(p,u),w=(g._stacks||{})[a.axis],x={horizontal:c,base:v.base,enableBorderRadius:!w||$g(g._custom)||o===w._top||o===w._bottom,x:c?v.head:_.center,y:c?_.center:v.head,height:c?_.size:Math.abs(v.size),width:c?Math.abs(v.size):_.size};m&&(x.options=h||this.resolveDataElementOptions(p,e[p].active?"active":s));const b=x.options||e[p].options;TY(x,b,w,o),EY(x,b,u.ratio),this.updateElement(e[p],p,x,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const h=u._parsed.find(p=>p[r.axis]===l),m=h&&h[u.vScale.axis];if(Se(m)||isNaN(m))return!0};for(const u of s)if(!(n!==void 0&&c(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[fe(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,o;for(i=0,o=n.data.length;i<o;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const a=e.barThickness;return{min:a||vY(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),c=l._custom,u=$g(c);let h=l[n.axis],m=0,p=r?this.applyStack(n,l,r):h,g,v;p!==h&&(m=p-h,p=h),u&&(h=c.barStart,p=c.barEnd-c.barStart,h!==0&&Nr(h)!==Nr(c.barEnd)&&(m=0),m+=h);const _=!Se(i)&&!u?i:m;let w=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?g=n.getPixelForValue(m+p):g=w,v=g-w,Math.abs(v)<o){v=bY(v,n,a)*o,h===a&&(w-=v/2);const x=n.getPixelForDecimal(0),b=n.getPixelForDecimal(1),C=Math.min(x,b),P=Math.max(x,b);w=Math.max(Math.min(w,P),C),g=w+v,r&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(g)-n.getValueForPixel(w))}if(w===n.getPixelForValue(a)){const x=Nr(v)*n.getLineWidthForValue(a)/2;w+=x,v-=x}return{size:v,base:w,head:g,center:g+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,o=fe(s.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=i?this._getStackCount(e):n.stackCount,h=s.barThickness==="flex"?wY(e,n,s,u*c):xY(e,n,s,u*c),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(fe(m,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+p;a=h.start+h.chunk*g+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}J(Eh,"id","bar"),J(Eh,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),J(Eh,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function CY(t,e,n){let r=1,s=1,i=0,o=0;if(e<He){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),m=Math.sin(l),p=(b,C,P)=>uu(b,a,l,!0)?1:Math.max(C,C*n,P,P*n),g=(b,C,P)=>uu(b,a,l,!0)?-1:Math.min(C,C*n,P,P*n),v=p(0,c,h),_=p(mt,u,m),w=g(Pe,c,h),x=g(Pe+mt,u,m);r=(v-w)/2,s=(_-x)/2,i=-(v+w)/2,o=-(_+x)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class Yl extends ho{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(ge(r[e])){const{key:l="value"}=this._parsing;i=c=>+Eo(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=i(o)}}_getRotation(){return ts(this.options.rotation-90)}_getCircumference(){return ts(this.options.circumference)}_getRotationExtents(){let e=He,n=-He;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(jK(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:p,offsetX:g,offsetY:v}=CY(h,u,l),_=(r.width-o)/m,w=(r.height-o)/p,x=Math.max(Math.min(_,w)/2,0),b=FN(this.options.radius,x),C=Math.max(b*l,0),P=(b-C)/this._getVisibleDatasetWeightTotal();this.offsetX=g*b,this.offsetY=v*b,s.total=this.calculateTotal(),this.outerRadius=b-P*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-P*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/He)}updateElements(e,n,r,s){const i=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,m=i&&c.animateScale,p=m?0:this.innerRadius,g=m?0:this.outerRadius,{sharedOptions:v,includeOptions:_}=this._getSharedOptions(n,s);let w=this._getRotation(),x;for(x=0;x<n;++x)w+=this._circumference(x,i);for(x=n;x<n+r;++x){const b=this._circumference(x,i),C=e[x],P={x:u+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+b,circumference:b,outerRadius:g,innerRadius:p};_&&(P.options=v||this.resolveDataElementOptions(x,C.active?"active":s)),w+=b,this.updateElement(C,x,P,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?He*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=zw(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,o,a,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(fe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}J(Yl,"id","doughnut"),J(Yl,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),J(Yl,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),J(Yl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const h=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:h.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:s,pointStyle:r,borderRadius:o&&(a||h.borderRadius),index:c}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Ch extends ho{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=tQ(n,s,o);this._drawStart=a,this._drawCount=l,nQ(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,s),m=o.axis,p=a.axis,{spanGaps:g,segment:v}=this.options,_=cu(g)?g:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||i||s==="none",x=n+r,b=e.length;let C=n>0&&this.getParsed(n-1);for(let P=0;P<b;++P){const j=e[P],S=w?j:{};if(P<n||P>=x){S.skip=!0;continue}const T=this.getParsed(P),E=Se(T[p]),R=S[m]=o.getPixelForValue(T[m],P),I=S[p]=i||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[p],P);S.skip=isNaN(R)||isNaN(I)||E,S.stop=P>0&&Math.abs(T[m]-C[m])>_,v&&(S.parsed=T,S.raw=c.data[P]),h&&(S.options=u||this.resolveDataElementOptions(P,j.active?"active":s)),w||this.updateElement(j,P,S,s),C=T}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}J(Ch,"id","line"),J(Ch,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),J(Ch,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function zi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Kw{constructor(e){J(this,"options");this.options=e||{}}static override(e){Object.assign(Kw.prototype,e)}init(){}formats(){return zi()}parse(){return zi()}format(){return zi()}add(){return zi()}diff(){return zi()}startOf(){return zi()}endOf(){return zi()}}var PY={_date:Kw};function IY(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?YK:io;if(r){if(s._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const m=c(i,e,n-h),p=c(i,e,n+h);return{lo:m.lo,hi:p.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:h}=s._cachedMeta,{_parsed:m}=t,p=m.slice(0,u.lo+1).reverse().findIndex(v=>!Se(v[h.axis]));u.lo-=Math.max(0,p);const g=m.slice(u.hi).findIndex(v=>!Se(v[h.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:i.length-1}}function np(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:h,hi:m}=IY(i[a],e,o,s);for(let p=h;p<=m;++p){const g=u[p];g.skip||r(g,c,p)}}}function AY(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Wg(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||np(t,n,e,function(a,l,c){!s&&!du(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function RY(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=BN(o,{x:e.x,y:e.y});uu(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return np(t,n,e,i),s}function NY(t,e,n,r,s,i){let o=[];const a=AY(n);let l=Number.POSITIVE_INFINITY;function c(u,h,m){const p=u.inRange(e.x,e.y,s);if(r&&!p)return;const g=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(g))&&!p)return;const _=a(e,g);_<l?(o=[{element:u,datasetIndex:h,index:m}],l=_):_===l&&o.push({element:u,datasetIndex:h,index:m})}return np(t,n,e,c),o}function Hg(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?RY(t,e,n,s):NY(t,e,n,r,s,i)}function US(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return np(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var DY={modes:{index(t,e,n,r){const s=Qi(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Wg(t,s,i,r,o):Hg(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=Qi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Wg(t,s,i,r,o):Hg(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=Qi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Wg(t,s,i,r,o)},nearest(t,e,n,r){const s=Qi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Hg(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Qi(e,t);return US(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Qi(e,t);return US(t,s,"y",n.intersect,r)}}};const uD=["left","top","right","bottom"];function Ml(t,e){return t.filter(n=>n.pos===e)}function zS(t,e){return t.filter(n=>uD.indexOf(n.pos)===-1&&n.box.axis===e)}function jl(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function MY(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function jY(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!uD.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function OY(t,e){const n=jY(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function LY(t){const e=MY(t),n=jl(e.filter(c=>c.box.fullSize),!0),r=jl(Ml(e,"left"),!0),s=jl(Ml(e,"right")),i=jl(Ml(e,"top"),!0),o=jl(Ml(e,"bottom")),a=zS(e,"x"),l=zS(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Ml(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function BS(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function dD(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function VY(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!ge(s)){n.size&&(t[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[s]+=n.size}i.getPadding&&dD(o,i.getPadding());const a=Math.max(0,e.outerWidth-BS(o,t,"left","right")),l=Math.max(0,e.outerHeight-BS(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function FY(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function UY(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Xl(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,UY(a.horizontal,e));const{same:h,other:m}=VY(e,n,a,r);c|=h&&s.length,u=u||m,l.fullSize||s.push(a)}return c&&Xl(s,e,n,r)||u}function Hd(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function $S(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,m=c.size||l.height;lu(c.start)&&(o=c.start),l.fullSize?Hd(l,s.left,o,n.outerWidth-s.right-s.left,m):Hd(l,e.left+c.placed,o,h,m),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,m=c.size||l.width;lu(c.start)&&(i=c.start),l.fullSize?Hd(l,i,s.top,m,n.outerHeight-s.bottom-s.top):Hd(l,i,e.top+c.placed,m,h),c.start=i,c.placed+=h,i=l.right}}e.x=i,e.y=o}var Fn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=Kn(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=LY(t.boxes),l=a.vertical,c=a.horizontal;Ce(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,_)=>_.box.options&&_.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),m=Object.assign({},s);dD(m,Kn(r));const p=Object.assign({maxPadding:m,w:i,h:o,x:s.left,y:s.top},s),g=OY(l.concat(c),h);Xl(a.fullSize,p,h,g),Xl(l,p,h,g),Xl(c,p,h,g)&&Xl(l,p,h,g),FY(p),$S(a.leftAndTop,p,h,g),p.x+=p.w,p.y+=p.h,$S(a.rightAndBottom,p,h,g),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ce(a.chartArea,v=>{const _=v.box;Object.assign(_,t.chartArea),_.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class hD{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class zY extends hD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ph="$chartjs",BY={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},WS=t=>t===null||t==="";function $Y(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Ph]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",WS(s)){const i=CS(t,"width");i!==void 0&&(t.width=i)}if(WS(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=CS(t,"height");i!==void 0&&(t.height=i)}return t}const fD=HQ?{passive:!0}:!1;function WY(t,e,n){t&&t.addEventListener(e,n,fD)}function HY(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,fD)}function qY(t,e){const n=BY[t.type]||t.type,{x:r,y:s}=Qi(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Hf(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function GY(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Hf(a.addedNodes,r),o=o&&!Hf(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function KY(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Hf(a.removedNodes,r),o=o&&!Hf(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const fu=new Map;let HS=0;function mD(){const t=window.devicePixelRatio;t!==HS&&(HS=t,fu.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function QY(t,e){fu.size||window.addEventListener("resize",mD),fu.set(t,e)}function YY(t){fu.delete(t),fu.size||window.removeEventListener("resize",mD)}function XY(t,e,n){const r=t.canvas,s=r&&Gw(r);if(!s)return;const i=qN((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),QY(t,i),o}function qg(t,e,n){n&&n.disconnect(),e==="resize"&&YY(t)}function JY(t,e,n){const r=t.canvas,s=qN(i=>{t.ctx!==null&&n(qY(i,t))},t);return WY(r,e,s),s}class ZY extends hD{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?($Y(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Ph])return!1;const r=n[Ph].initial;["height","width"].forEach(i=>{const o=r[i];Se(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Ph],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:GY,detach:KY,resize:XY}[n]||JY;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:qg,detach:qg,resize:qg}[n]||HY)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return WQ(e,n,r,s)}isAttached(e){const n=e&&Gw(e);return!!(n&&n.isConnected)}}function eX(t){return!qw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?zY:ZY}var Xd;let bs=(Xd=class{constructor(){J(this,"x");J(this,"y");J(this,"active",!1);J(this,"options");J(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return cu(this.x)&&cu(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},J(Xd,"defaults",{}),J(Xd,"defaultRoutes"),Xd);function tX(t,e){const n=t.options.ticks,r=nX(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?sX(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return iX(e,c,i,o/s),c;const u=rX(i,e,s);if(o>0){let h,m;const p=o>1?Math.round((l-a)/(o-1)):null;for(qd(e,c,u,Se(p)?0:a-p,a),h=0,m=o-1;h<m;h++)qd(e,c,u,i[h],i[h+1]);return qd(e,c,u,l,Se(p)?e.length:l+p),c}return qd(e,c,u),c}function nX(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function rX(t,e,n){const r=oX(t),s=e.length/n;if(!r)return Math.max(s,1);const i=$K(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function sX(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function iX(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function qd(t,e,n,r,s){const i=fe(r,0),o=Math.min(fe(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function oX(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const aX=t=>t==="left"?"right":t==="right"?"left":t,qS=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,GS=(t,e)=>Math.min(e||t,t);function KS(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function lX(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function cX(t,e){Ce(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Ol(t){return t.drawTicks?t.tickLength:0}function QS(t,e){if(!t.display)return 0;const n=$t(t.font,e),r=Kn(t.padding);return(ct(t.text)?t.text.length:1)*n.lineHeight+r.height}function uX(t,e){return Lo(t,{scale:e,type:"scale"})}function dX(t,e,n){return Lo(t,{tick:n,index:e,type:"tick"})}function hX(t,e,n){let r=Fw(t);return(n&&e!=="right"||!n&&e==="right")&&(r=aX(r)),r}function fX(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,m,p,g;const v=o-s,_=a-i;if(t.isHorizontal()){if(p=Lt(r,i,a),ge(n)){const w=Object.keys(n)[0],x=n[w];g=u[w].getPixelForValue(x)+v-e}else n==="center"?g=(c.bottom+c.top)/2+v-e:g=qS(t,n,e);m=a-i}else{if(ge(n)){const w=Object.keys(n)[0],x=n[w];p=u[w].getPixelForValue(x)-_+e}else n==="center"?p=(c.left+c.right)/2-_+e:p=qS(t,n,e);g=Lt(r,o,s),h=n==="left"?-mt:mt}return{titleX:p,titleY:g,maxWidth:m,rotation:h}}class al extends bs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=mr(e,Number.POSITIVE_INFINITY),n=mr(n,Number.NEGATIVE_INFINITY),r=mr(r,Number.POSITIVE_INFINITY),s=mr(s,Number.NEGATIVE_INFINITY),{min:mr(e,r),max:mr(n,s),minDefined:Gt(e),maxDefined:Gt(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:mr(n,mr(r,n)),max:mr(r,mr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Le(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=bQ(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?KS(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=tX(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Le(this.options.afterUpdate,[this])}beforeSetDimensions(){Le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Le(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Le(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Le(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=GS(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,m=u.highest.height,p=Bt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),h+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-Ol(e.grid)-n.padding-QS(e.title,this.chart.options.font),c=Math.sqrt(h*h+m*m),o=GK(Math.min(Math.asin(Bt((u.highest.height+6)/a,-1,1)),Math.asin(Bt(l/c,-1,1))-Math.asin(Bt(m/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Le(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=QS(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ol(i)+l):(e.height=this.maxHeight,e.width=Ol(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:m}=this._getLabelSizes(),p=r.padding*2,g=ts(this.labelRotation),v=Math.cos(g),_=Math.sin(g);if(a){const w=r.mirror?0:_*h.width+v*m.height;e.height=Math.min(this.maxHeight,e.height+w+p)}else{const w=r.mirror?0:v*h.width+_*m.height;e.width=Math.min(this.maxWidth,e.width+w+p)}this._calculatePadding(c,u,_,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,p=0;l?c?(m=s*e.width,p=r*n.height):(m=r*e.height,p=s*n.width):i==="start"?p=n.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,p=n.width/2),this.paddingLeft=Math.max((m-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Le(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Se(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=KS(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/GS(n,r));let c=0,u=0,h,m,p,g,v,_,w,x,b,C,P;for(h=0;h<n;h+=l){if(g=e[h].label,v=this._resolveTickFontOptions(h),s.font=_=v.string,w=i[_]=i[_]||{data:{},gc:[]},x=v.lineHeight,b=C=0,!Se(g)&&!ct(g))b=bS(s,w.data,w.gc,b,g),C=x;else if(ct(g))for(m=0,p=g.length;m<p;++m)P=g[m],!Se(P)&&!ct(P)&&(b=bS(s,w.data,w.gc,b,P),C+=x);o.push(b),a.push(C),c=Math.max(b,c),u=Math.max(C,u)}cX(i,n);const j=o.indexOf(c),S=a.indexOf(u),T=E=>({width:o[E]||0,height:a[E]||0});return{first:T(0),last:T(n-1),widest:T(j),highest:T(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return QK(this._alignToPixels?Ui(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=dX(this.getContext(),e,r))}return this.$context||(this.$context=uX(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ts(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),m=Ol(i),p=[],g=a.setContext(this.getContext()),v=g.display?g.width:0,_=v/2,w=function(z){return Ui(r,z,v)};let x,b,C,P,j,S,T,E,R,I,D,N;if(o==="top")x=w(this.bottom),S=this.bottom-m,E=x-_,I=w(e.top)+_,N=e.bottom;else if(o==="bottom")x=w(this.top),I=e.top,N=w(e.bottom)-_,S=x+_,E=this.top+m;else if(o==="left")x=w(this.right),j=this.right-m,T=x-_,R=w(e.left)+_,D=e.right;else if(o==="right")x=w(this.left),R=e.left,D=w(e.right)-_,j=x+_,T=this.left+m;else if(n==="x"){if(o==="center")x=w((e.top+e.bottom)/2+.5);else if(ge(o)){const z=Object.keys(o)[0],K=o[z];x=w(this.chart.scales[z].getPixelForValue(K))}I=e.top,N=e.bottom,S=x+_,E=S+m}else if(n==="y"){if(o==="center")x=w((e.left+e.right)/2);else if(ge(o)){const z=Object.keys(o)[0],K=o[z];x=w(this.chart.scales[z].getPixelForValue(K))}j=x-_,T=j-m,R=e.left,D=e.right}const F=fe(s.ticks.maxTicksLimit,h),W=Math.max(1,Math.ceil(h/F));for(b=0;b<h;b+=W){const z=this.getContext(b),K=i.setContext(z),B=a.setContext(z),q=K.lineWidth,re=K.color,te=B.dash||[],ue=B.dashOffset,ve=K.tickWidth,st=K.tickColor,gt=K.tickBorderDash||[],Be=K.tickBorderDashOffset;C=lX(this,b,l),C!==void 0&&(P=Ui(r,C,q),c?j=T=R=D=P:S=E=I=N=P,p.push({tx1:j,ty1:S,tx2:T,ty2:E,x1:R,y1:I,x2:D,y2:N,width:q,color:re,borderDash:te,borderDashOffset:ue,tickWidth:ve,tickColor:st,tickBorderDash:gt,tickBorderDashOffset:Be}))}return this._ticksLength=h,this._borderValue=x,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=i,m=Ol(r.grid),p=m+u,g=h?-u:p,v=-ts(this.labelRotation),_=[];let w,x,b,C,P,j,S,T,E,R,I,D,N="middle";if(s==="top")j=this.bottom-g,S=this._getXAxisLabelAlignment();else if(s==="bottom")j=this.top+g,S=this._getXAxisLabelAlignment();else if(s==="left"){const W=this._getYAxisLabelAlignment(m);S=W.textAlign,P=W.x}else if(s==="right"){const W=this._getYAxisLabelAlignment(m);S=W.textAlign,P=W.x}else if(n==="x"){if(s==="center")j=(e.top+e.bottom)/2+p;else if(ge(s)){const W=Object.keys(s)[0],z=s[W];j=this.chart.scales[W].getPixelForValue(z)+p}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")P=(e.left+e.right)/2-p;else if(ge(s)){const W=Object.keys(s)[0],z=s[W];P=this.chart.scales[W].getPixelForValue(z)}S=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?N="top":l==="end"&&(N="bottom"));const F=this._getLabelSizes();for(w=0,x=a.length;w<x;++w){b=a[w],C=b.label;const W=i.setContext(this.getContext(w));T=this.getPixelForTick(w)+i.labelOffset,E=this._resolveTickFontOptions(w),R=E.lineHeight,I=ct(C)?C.length:1;const z=I/2,K=W.color,B=W.textStrokeColor,q=W.textStrokeWidth;let re=S;o?(P=T,S==="inner"&&(w===x-1?re=this.options.reverse?"left":"right":w===0?re=this.options.reverse?"right":"left":re="center"),s==="top"?c==="near"||v!==0?D=-I*R+R/2:c==="center"?D=-F.highest.height/2-z*R+R:D=-F.highest.height+R/2:c==="near"||v!==0?D=R/2:c==="center"?D=F.highest.height/2-z*R:D=F.highest.height-I*R,h&&(D*=-1),v!==0&&!W.showLabelBackdrop&&(P+=R/2*Math.sin(v))):(j=T,D=(1-I)*R/2);let te;if(W.showLabelBackdrop){const ue=Kn(W.backdropPadding),ve=F.heights[w],st=F.widths[w];let gt=D-ue.top,Be=0-ue.left;switch(N){case"middle":gt-=ve/2;break;case"bottom":gt-=ve;break}switch(S){case"center":Be-=st/2;break;case"right":Be-=st;break;case"inner":w===x-1?Be-=st:w>0&&(Be-=st/2);break}te={left:Be,top:gt,width:st+ue.width,height:ve+ue.height,color:W.backdropColor}}_.push({label:C,font:E,textOffset:D,options:{rotation:v,color:K,strokeColor:B,strokeWidth:q,textAlign:re,textBaseline:N,translation:[P,j],backdrop:te}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ts(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,m;this.isHorizontal()?(c=Ui(e,this.left,o)-o/2,u=Ui(e,this.right,a)+a/2,h=m=l):(h=Ui(e,this.top,o)-o/2,m=Ui(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Zm(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;hu(r,c,0,u,l,a)}s&&ep(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=$t(r.font),o=Kn(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||ge(n)?(l+=o.bottom,ct(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:m}=fX(this,l,n,a);hu(e,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:m,textAlign:hX(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=fe(e.grid&&e.grid.z,-1),s=fe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==al.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return $t(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Gd{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;gX(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,mX(e,o,r),this.override&&rt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in rt[s]&&(delete rt[s][r],this.override&&delete Co[r])}}function mX(t,e,n){const r=au(Object.create(null),[n?rt.get(n):{},rt.get(e),t.defaults]);rt.set(e,r),t.defaultRoutes&&pX(e,t.defaultRoutes),t.descriptors&&rt.describe(e,t.descriptors)}function pX(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");rt.route(i,s,l,a)})}function gX(t){return"id"in t&&"defaults"in t}class yX{constructor(){this.controllers=new Gd(ho,"datasets",!0),this.elements=new Gd(bs,"elements"),this.plugins=new Gd(Object,"plugins"),this.scales=new Gd(al,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Ce(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=Lw(e);Le(r["before"+s],[],r),n[e](r),Le(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var yr=new yX;class vX{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Le(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Se(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=fe(r.options&&r.options.plugins,{}),i=xX(r);return s===!1&&!n?[]:_X(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function xX(t){const e={},n=[],r=Object.keys(yr.plugins.items);for(let i=0;i<r.length;i++)n.push(yr.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function wX(t,e){return!e&&t===!1?null:t===!0?{}:t}function _X(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=wX(r[l],s);c!==null&&i.push({plugin:a,options:bX(t.config,{plugin:a,local:n[l]},c,o)})}return i}function bX(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function X0(t,e){const n=rt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function kX(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function TX(t,e){return t===e?"_index_":"_value_"}function YS(t){if(t==="x"||t==="y"||t==="r")return t}function SX(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function J0(t,...e){if(YS(t))return t;for(const n of e){const r=n.axis||SX(n.position)||t.length>1&&YS(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function XS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function EX(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return XS(t,"x",n[0])||XS(t,"y",n[0])}return{}}function CX(t,e){const n=Co[t.type]||{scales:{}},r=e.scales||{},s=X0(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ge(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=J0(o,a,EX(o,t),rt.scales[a.type]),c=TX(l,s),u=n.scales||{};i[o]=kc(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||X0(a,e),u=(Co[a]||{}).scales||{};Object.keys(u).forEach(h=>{const m=kX(h,l),p=o[m+"AxisID"]||m;i[p]=i[p]||Object.create(null),kc(i[p],[{axis:m},r[p],u[h]])})}),Object.keys(i).forEach(o=>{const a=i[o];kc(a,[rt.scales[a.type],rt.scale])}),i}function pD(t){const e=t.options||(t.options={});e.plugins=fe(e.plugins,{}),e.scales=CX(t,e)}function gD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function PX(t){return t=t||{},t.data=gD(t.data),pD(t),t}const JS=new Map,yD=new Set;function Kd(t,e){let n=JS.get(t);return n||(n=e(),JS.set(t,n),yD.add(n)),n}const Ll=(t,e,n)=>{const r=Eo(e,n);r!==void 0&&t.add(r)};class IX{constructor(e){this._config=PX(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=gD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),pD(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Kd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Kd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Kd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Kd(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Ll(l,e,h))),u.forEach(h=>Ll(l,s,h)),u.forEach(h=>Ll(l,Co[i]||{},h)),u.forEach(h=>Ll(l,rt,h)),u.forEach(h=>Ll(l,Q0,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),yD.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Co[n]||{},rt.datasets[n]||{},{type:n},rt,Q0]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=ZS(this._resolverCache,e,s);let l=o;if(RX(o,n)){i.$shared=!1,r=wi(r)?r():r;const c=this.createResolver(e,r,a);l=Ka(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=ZS(this._resolverCache,e,r);return ge(n)?Ka(i,n,void 0,s):i}}function ZS(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:$w(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const AX=t=>ge(t)&&Object.getOwnPropertyNames(t).some(e=>wi(t[e]));function RX(t,e){const{isScriptable:n,isIndexable:r}=YN(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(wi(a)||AX(a))||o&&ct(a))return!0}return!1}var NX="4.5.1";const DX=["top","bottom","left","right","chartArea"];function eE(t,e){return t==="top"||t==="bottom"||DX.indexOf(t)===-1&&e==="x"}function tE(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function nE(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Le(n&&n.onComplete,[t],e)}function MX(t){const e=t.chart,n=e.options.animation;Le(n&&n.onProgress,[t],e)}function vD(t){return qw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ih={},rE=t=>{const e=vD(t);return Object.values(Ih).filter(n=>n.canvas===e).pop()};function jX(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function OX(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Is;let rp=(Is=class{static register(...e){yr.add(...e),sE()}static unregister(...e){yr.remove(...e),sE()}constructor(e,n){const r=this.config=new IX(n),s=vD(e),i=rE(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||eX(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=MK(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new vX,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ZK(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Ih[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}zr.listen(this,"complete",nE),zr.listen(this,"progress",MX),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Se(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return yr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ES(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return kS(this.canvas,this.ctx),this}stop(){return zr.stop(this),this}resize(e,n){zr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ES(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Le(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ce(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=J0(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ce(i,o=>{const a=o.options,l=a.id,c=J0(l,a),u=fe(a.type,o.dtype);(a.position===void 0||eE(a.position,c)!==eE(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in r&&r[l].type===u)h=r[l];else{const m=yr.getScale(u);h=new m({id:l,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),Ce(s,(o,a)=>{o||delete r[a]}),Ce(r,o=>{Fn.configure(this,o,o.options),Fn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(tE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||X0(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=yr.getController(a),{datasetElementType:c,dataElementType:u}=rt.datasets[a];Object.assign(l,{dataElementType:yr.getElement(u),datasetElementType:c&&yr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ce(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),m=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(m),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Ce(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(tE("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ce(this.scales,e=>{Fn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!fS(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;jX(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!fS(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Fn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ce(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,wi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(zr.has(this)?this.attached&&!zr.running(this)&&zr.start(this):(this.draw(),nE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=oD(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Zm(n,s),e.controller.draw(),s&&ep(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return du(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=DY.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Lo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);lu(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),zr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),kS(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ih[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Ce(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ce(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ce(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Uf(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=UK(e),c=OX(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Le(i.onHover,[e,a,this],this),l&&Le(i.onClick,[e,a,this],this));const u=!Uf(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},J(Is,"defaults",rt),J(Is,"instances",Ih),J(Is,"overrides",Co),J(Is,"registry",yr),J(Is,"version",NX),J(Is,"getChart",rE),Is);function sE(){return Ce(rp.instances,t=>t._plugins.invalidate())}function LX(t,e,n){const{startAngle:r,x:s,y:i,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/o,xn(r-n));if(t.beginPath(),t.arc(s,i,o-c/2,r+h/2,n-h/2),a>0){const m=Math.min(c/a,xn(r-n));t.arc(s,i,a+c/2,n-m/2,r+m/2,!0)}else{const m=Math.min(c/2,o*xn(r-n));if(u==="round")t.arc(s,i,m,n-Pe/2,r+Pe/2,!0);else if(u==="bevel"){const p=2*m*m,g=-p*Math.cos(n+Pe/2)+s,v=-p*Math.sin(n+Pe/2)+i,_=p*Math.cos(r+Pe/2)+s,w=p*Math.sin(r+Pe/2)+i;t.lineTo(g,v),t.lineTo(_,w)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function VX(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(i,o,a,r-c,n+c),l>s?(c=s/l,t.arc(i,o,l,n+c,r-c,!0)):t.arc(i,o,s,n+mt,r-mt),t.closePath(),t.clip()}function FX(t){return Bw(t,["outerStart","outerEnd","innerStart","innerEnd"])}function UX(t,e,n,r){const s=FX(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,r*e/2),a=l=>{const c=(n-Math.min(i,l))*r/2;return Bt(l,0,Math.min(i,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Bt(s.innerStart,0,o),innerEnd:Bt(s.innerEnd,0,o)}}function Ko(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function qf(t,e,n,r,s,i){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+r+n-c,0),m=u>0?u+r+n+c:0;let p=0;const g=s-l;if(r){const W=u>0?u-r:0,z=h>0?h-r:0,K=(W+z)/2,B=K!==0?g*K/(K+r):g;p=(g-B)/2}const v=Math.max(.001,g*h-n/Pe)/h,_=(g-v)/2,w=l+_+p,x=s-_-p,{outerStart:b,outerEnd:C,innerStart:P,innerEnd:j}=UX(e,m,h,x-w),S=h-b,T=h-C,E=w+b/S,R=x-C/T,I=m+P,D=m+j,N=w+P/I,F=x-j/D;if(t.beginPath(),i){const W=(E+R)/2;if(t.arc(o,a,h,E,W),t.arc(o,a,h,W,R),C>0){const q=Ko(T,R,o,a);t.arc(q.x,q.y,C,R,x+mt)}const z=Ko(D,x,o,a);if(t.lineTo(z.x,z.y),j>0){const q=Ko(D,F,o,a);t.arc(q.x,q.y,j,x+mt,F+Math.PI)}const K=(x-j/m+(w+P/m))/2;if(t.arc(o,a,m,x-j/m,K,!0),t.arc(o,a,m,K,w+P/m,!0),P>0){const q=Ko(I,N,o,a);t.arc(q.x,q.y,P,N+Math.PI,w-mt)}const B=Ko(S,w,o,a);if(t.lineTo(B.x,B.y),b>0){const q=Ko(S,E,o,a);t.arc(q.x,q.y,b,w-mt,E)}}else{t.moveTo(o,a);const W=Math.cos(E)*h+o,z=Math.sin(E)*h+a;t.lineTo(W,z);const K=Math.cos(R)*h+o,B=Math.sin(R)*h+a;t.lineTo(K,B)}t.closePath()}function zX(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){qf(t,e,n,r,l,s);for(let c=0;c<i;++c)t.fill();isNaN(a)||(l=o+(a%He||He))}return qf(t,e,n,r,l,s),t.fill(),l}function BX(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:m,borderRadius:p}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=m,g?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let v=e.endAngle;if(i){qf(t,e,n,r,v,s);for(let _=0;_<i;++_)t.stroke();isNaN(a)||(v=o+(a%He||He))}g&&VX(t,e,v),l.selfJoin&&v-o>=Pe&&p===0&&u!=="miter"&&LX(t,e,v),i||(qf(t,e,n,r,v,s),t.stroke())}class Jl extends bs{constructor(n){super();J(this,"circumference");J(this,"endAngle");J(this,"fullCircles");J(this,"innerRadius");J(this,"outerRadius");J(this,"pixelMargin");J(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:o,distance:a}=BN(i,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,g=fe(m,c-l),v=uu(o,l,c)&&l!==c,_=g>=He||v,w=ns(a,u+p,h+p);return _&&w}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(i+o)/2,m=(a+l+u+c)/2;return{x:r+Math.cos(h)*m,y:s+Math.sin(h)*m}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>He?Math.floor(s/He):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(Pe,s||0)),u=i*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,zX(n,this,u,o,a),BX(n,this,u,o,a),n.restore()}}J(Jl,"id","arc"),J(Jl,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),J(Jl,"defaultRoutes",{backgroundColor:"backgroundColor"}),J(Jl,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function xD(t,e,n=e){t.lineCap=fe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(fe(n.borderDash,e.borderDash)),t.lineDashOffset=fe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=fe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=fe(n.borderWidth,e.borderWidth),t.strokeStyle=fe(n.borderColor,e.borderColor)}function $X(t,e,n){t.lineTo(n.x,n.y)}function WX(t){return t.stepped?fQ:t.tension||t.cubicInterpolationMode==="monotone"?mQ:$X}function wD(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),u=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function HX(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=wD(s,n,r),u=WX(i);let{move:h=!0,reverse:m}=r||{},p,g,v;for(p=0;p<=c;++p)g=s[(a+(m?c-p:p))%o],!g.skip&&(h?(t.moveTo(g.x,g.y),h=!1):u(t,v,g,m,i.stepped),v=g);return l&&(g=s[(a+(m?c:0))%o],u(t,v,g,m,i.stepped)),!!l}function qX(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=wD(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,h=0,m,p,g,v,_,w;const x=C=>(o+(c?a-C:C))%i,b=()=>{v!==_&&(t.lineTo(u,_),t.lineTo(u,v),t.lineTo(u,w))};for(l&&(p=s[x(0)],t.moveTo(p.x,p.y)),m=0;m<=a;++m){if(p=s[x(m)],p.skip)continue;const C=p.x,P=p.y,j=C|0;j===g?(P<v?v=P:P>_&&(_=P),u=(h*u+C)/++h):(b(),t.lineTo(C,P),g=j,h=0,v=_=P),w=P}b()}function Z0(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?qX:HX}function GX(t){return t.stepped?qQ:t.tension||t.cubicInterpolationMode==="monotone"?GQ:Yi}function KX(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),xD(t,e.options),t.stroke(s)}function QX(t,e,n,r){const{segments:s,options:i}=e,o=Z0(e);for(const a of s)xD(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const YX=typeof Path2D=="function";function XX(t,e,n,r){YX&&!e.options.segment?KX(t,e,n,r):QX(t,e,n,r)}class Ys extends bs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;VQ(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ZQ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=iD(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=GX(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:m}=o[c],p=i[h],g=i[m];if(p===g){a.push(p);continue}const v=Math.abs((s-p[n])/(g[n]-p[n])),_=l(p,g,v,r.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Z0(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=Z0(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),XX(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}J(Ys,"id","line"),J(Ys,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),J(Ys,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),J(Ys,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function iE(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class Ah extends bs{constructor(n){super();J(this,"parsed");J(this,"skip");J(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return iE(this,n,"x",r)}inYRange(n,r){return iE(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!du(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Y0(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}J(Ah,"id","point"),J(Ah,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),J(Ah,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function _D(t,e){const{x:n,y:r,base:s,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,s),l=Math.max(n,s),c=r-h,u=r+h):(h=i/2,a=n-h,l=n+h,c=Math.min(r,s),u=Math.max(r,s)),{left:a,top:c,right:l,bottom:u}}function Xs(t,e,n,r){return t?0:Bt(e,n,r)}function JX(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=QN(r);return{t:Xs(s.top,i.top,0,n),r:Xs(s.right,i.right,0,e),b:Xs(s.bottom,i.bottom,0,n),l:Xs(s.left,i.left,0,e)}}function ZX(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=Pa(s),o=Math.min(e,n),a=t.borderSkipped,l=r||ge(s);return{topLeft:Xs(!l||a.top||a.left,i.topLeft,0,o),topRight:Xs(!l||a.top||a.right,i.topRight,0,o),bottomLeft:Xs(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:Xs(!l||a.bottom||a.right,i.bottomRight,0,o)}}function eJ(t){const e=_D(t),n=e.right-e.left,r=e.bottom-e.top,s=JX(t,n/2,r/2),i=ZX(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function Gg(t,e,n,r){const s=e===null,i=n===null,a=t&&!(s&&i)&&_D(t,r);return a&&(s||ns(e,a.left,a.right))&&(i||ns(n,a.top,a.bottom))}function tJ(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function nJ(t,e){t.rect(e.x,e.y,e.w,e.h)}function Kg(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+o,radius:t.radius}}class Rh extends bs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:o}=eJ(this),a=tJ(o.radius)?$f:nJ;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,Kg(o,n,i)),e.clip(),a(e,Kg(i,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Kg(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return Gg(this,e,n,r)}inXRange(e,n){return Gg(this,e,null,n)}inYRange(e,n){return Gg(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}J(Rh,"id","bar"),J(Rh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),J(Rh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function rJ(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=sp(l,c,s);const u=ev(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const h=iD(e,u);for(const m of h){const p=ev(n,i[m.start],i[m.end],m.loop),g=sD(a,s,p);for(const v of g)o.push({source:v,target:m,start:{[n]:oE(u,p,"start",Math.max)},end:{[n]:oE(u,p,"end",Math.min)}})}}return o}function ev(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=xn(s),i=xn(i)),{property:t,start:s,end:i}}function sJ(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=sp(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function sp(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function oE(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function bD(t,e){let n=[],r=!1;return ct(t)?(r=!0,n=t):n=sJ(t,e),n.length?new Ys({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function aE(t){return t&&t.fill!==!1}function iJ(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!Gt(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function oJ(t,e,n){const r=uJ(t);if(ge(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Gt(s)&&Math.floor(s)===s?aJ(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function aJ(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function lJ(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ge(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function cJ(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:ge(t)?r=t.value:r=e.getBaseValue(),r}function uJ(t){const e=t.options,n=e.fill;let r=fe(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function dJ(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=hJ(e,n);a.push(bD({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let u=c.start;u<=c.end;u++)fJ(s,o[u],a)}return new Ys({points:s,options:{}})}function hJ(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function fJ(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=mJ(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function mJ(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const u=i[c],h=o[u.start][n],m=o[u.end][n];if(ns(s,h,m)){a=s===h,l=s===m;break}}return{first:a,last:l,point:r}}class kD{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:He},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function pJ(t){const{chart:e,fill:n,line:r}=t;if(Gt(n))return gJ(e,n);if(n==="stack")return dJ(t);if(n==="shape")return!0;const s=yJ(t);return s instanceof kD?s:bD(s,r)}function gJ(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function yJ(t){return(t.scale||{}).getPointPositionForValue?xJ(t):vJ(t)}function vJ(t){const{scale:e={},fill:n}=t,r=lJ(n,e);if(Gt(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function xJ(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=cJ(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new kD({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function Qg(t,e,n){const r=pJ(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,h=c.backgroundColor,{above:m=h,below:p=h}=u||{},g=s.getDatasetMeta(i),v=oD(s,g);r&&o.points.length&&(Zm(t,n),wJ(t,{line:o,target:r,above:m,below:p,area:n,scale:a,axis:l,clip:v}),ep(t))}function wJ(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=i;i!==s&&(c==="x"?(lE(t,r,o.top),Yg(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),lE(t,r,o.bottom)):c==="y"&&(cE(t,r,o.left),Yg(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),cE(t,r,o.right),u=s)),Yg(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function lE(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],h=s[sp(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function cE(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],h=s[sp(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,h.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Yg(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=rJ(n,r,s);for(const{source:c,target:u,start:h,end:m}of l){const{style:{backgroundColor:p=i}={}}=c,g=r!==!0;t.save(),t.fillStyle=p,_J(t,o,a,g&&ev(s,h,m)),t.beginPath();const v=!!n.pathSegment(t,c);let _;if(g){v?t.closePath():uE(t,r,m,s);const w=!!r.pathSegment(t,u,{move:v,reverse:!0});_=v&&w,_||uE(t,r,h,s)}t.closePath(),t.fill(_?"evenodd":"nonzero"),t.restore()}}function _J(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,u,h;i==="x"?(l=o,c=s.top,u=a,h=s.bottom):(l=s.left,c=o,u=s.right,h=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),h=Math.min(h,n.bottom)),t.rect(l,c,u-l,h-c),t.clip()}}function uE(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var bJ={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof Ys&&(l={visible:t.isDatasetVisible(o),index:o,fill:oJ(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=iJ(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&Qg(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;aE(i)&&Qg(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!aE(r)||n.drawTime!=="beforeDatasetDraw"||Qg(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const dE=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},kJ=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class hE extends bs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Le(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=$t(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=dE(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;i.textAlign="left",i.textBaseline="middle";let m=-1,p=-u;return this.legendItems.forEach((g,v)=>{const _=r+n/2+i.measureText(g.text).width;(v===0||c[c.length-1]+_+2*a>o)&&(h+=u,c[c.length-(v>0?0:1)]=0,p+=u,m++),l[v]={left:0,top:p,row:m,width:_,height:s},c[c.length-1]+=_+a}),h}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,m=0,p=0,g=0,v=0;return this.legendItems.forEach((_,w)=>{const{itemWidth:x,itemHeight:b}=TJ(r,n,i,_,s);w>0&&p+b+2*a>u&&(h+=m+a,c.push({width:m,height:p}),g+=m+a,v++,m=p=0),l[w]={left:g,top:p,col:v,width:x,height:b},m=Math.max(m,x),p+=b+a}),h+=m,c.push({width:m,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Ia(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=Lt(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Lt(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Lt(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Lt(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Zm(e,this),this._draw(),ep(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=rt.color,l=Ia(e.rtl,this.left,this.width),c=$t(o.font),{padding:u}=o,h=c.size,m=h/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:v,itemHeight:_}=dE(o,h),w=function(j,S,T){if(isNaN(g)||g<=0||isNaN(v)||v<0)return;s.save();const E=fe(T.lineWidth,1);if(s.fillStyle=fe(T.fillStyle,a),s.lineCap=fe(T.lineCap,"butt"),s.lineDashOffset=fe(T.lineDashOffset,0),s.lineJoin=fe(T.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=fe(T.strokeStyle,a),s.setLineDash(fe(T.lineDash,[])),o.usePointStyle){const R={radius:v*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:E},I=l.xPlus(j,g/2),D=S+m;KN(s,R,I,D,o.pointStyleWidth&&g)}else{const R=S+Math.max((h-v)/2,0),I=l.leftForLtr(j,g),D=Pa(T.borderRadius);s.beginPath(),Object.values(D).some(N=>N!==0)?$f(s,{x:I,y:R,w:g,h:v,radius:D}):s.rect(I,R,g,v),s.fill(),E!==0&&s.stroke()}s.restore()},x=function(j,S,T){hu(s,T.text,j,S+_/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},b=this.isHorizontal(),C=this._computeTitleHeight();b?p={x:Lt(i,this.left+u,this.right-r[0]),y:this.top+u+C,line:0}:p={x:this.left+u,y:Lt(i,this.top+C+u,this.bottom-n[0].height),line:0},tD(this.ctx,e.textDirection);const P=_+u;this.legendItems.forEach((j,S)=>{s.strokeStyle=j.fontColor,s.fillStyle=j.fontColor;const T=s.measureText(j.text).width,E=l.textAlign(j.textAlign||(j.textAlign=o.textAlign)),R=g+m+T;let I=p.x,D=p.y;l.setWidth(this.width),b?S>0&&I+R+u>this.right&&(D=p.y+=P,p.line++,I=p.x=Lt(i,this.left+u,this.right-r[p.line])):S>0&&D+P>this.bottom&&(I=p.x=I+n[p.line].width+u,p.line++,D=p.y=Lt(i,this.top+C+u,this.bottom-n[p.line].height));const N=l.x(I);if(w(N,D,j),I=eQ(E,I+g+m,b?I+R:this.right,e.rtl),x(l.x(I),D,j),b)p.x+=R+u;else if(typeof j.text!="string"){const F=c.lineHeight;p.y+=TD(j,F)+u}else p.y+=P}),nD(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=$t(n.font),s=Kn(n.padding);if(!n.display)return;const i=Ia(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,h=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+c,h=Lt(e.align,h,this.right-m);else{const g=this.columnSizes.reduce((v,_)=>Math.max(v,_.height),0);u=c+Lt(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const p=Lt(a,h,h+m);o.textAlign=i.textAlign(Fw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,hu(o,n.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,n=$t(e.font),r=Kn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(ns(e,this.left,this.right)&&ns(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],ns(e,s.left,s.left+s.width)&&ns(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!CJ(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=kJ(s,r);s&&!i&&Le(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Le(n.onHover,[e,r,this],this)}else r&&Le(n.onClick,[e,r,this],this)}}function TJ(t,e,n,r,s){const i=SJ(r,t,e,n),o=EJ(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function SJ(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function EJ(t,e,n){let r=t;return typeof e.text!="string"&&(r=TD(e,n)),r}function TD(t,e){const n=t.text?t.text.length:0;return e*n}function CJ(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var PJ={id:"legend",_element:hE,start(t,e,n){const r=t.legend=new hE({ctx:t.ctx,options:n,chart:t});Fn.configure(t,r,n),Fn.addBox(t,r)},stop(t){Fn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Fn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Kn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class SD extends bs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=ct(r.text)?r.text.length:1;this._padding=Kn(r.padding);const i=s*$t(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Lt(a,r,i),h=n+e,c=i-r):(o.position==="left"?(u=r+e,h=Lt(a,s,n),l=Pe*-.5):(u=i-e,h=Lt(a,n,s),l=Pe*.5),c=s-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=$t(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);hu(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:Fw(n.align),textBaseline:"middle",translation:[o,a]})}}function IJ(t,e){const n=new SD({ctx:t.ctx,options:e,chart:t});Fn.configure(t,n,e),Fn.addBox(t,n),t.titleBlock=n}var AJ={id:"title",_element:SD,start(t,e,n){IJ(t,n)},stop(t){const e=t.titleBlock;Fn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Fn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Zl={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=K0(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function pr(t,e){return e&&(ct(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Br(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function RJ(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function fE(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=$t(e.bodyFont),c=$t(e.titleFont),u=$t(e.footerFont),h=i.length,m=s.length,p=r.length,g=Kn(e.padding);let v=g.height,_=0,w=r.reduce((C,P)=>C+P.before.length+P.lines.length+P.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,h&&(v+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),w){const C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=p*C+(w-p)*l.lineHeight+(w-1)*e.bodySpacing}m&&(v+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let x=0;const b=function(C){_=Math.max(_,n.measureText(C).width+x)};return n.save(),n.font=c.string,Ce(t.title,b),n.font=l.string,Ce(t.beforeBody.concat(t.afterBody),b),x=e.displayColors?o+2+e.boxPadding:0,Ce(r,C=>{Ce(C.before,b),Ce(C.lines,b),Ce(C.after,b)}),x=0,n.font=u.string,Ce(t.footer,b),n.restore(),_+=g.width,{width:_,height:v}}function NJ(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function DJ(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function MJ(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),DJ(c,t,e,n)&&(c="center"),c}function mE(t,e,n){const r=n.yAlign||e.yAlign||NJ(t,n);return{xAlign:n.xAlign||e.xAlign||MJ(t,e,n,r),yAlign:r}}function jJ(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function OJ(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function pE(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:h,bottomLeft:m,bottomRight:p}=Pa(o);let g=jJ(e,a);const v=OJ(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,m)+s:a==="right"&&(g+=Math.max(h,p)+s),{x:Bt(g,0,r.width-e.width),y:Bt(v,0,r.height-e.height)}}function Qd(t,e,n){const r=Kn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function gE(t){return pr([],Br(t))}function LJ(t,e,n){return Lo(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function yE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ED={beforeTitle:Ur,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Ur,beforeBody:Ur,beforeLabel:Ur,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Se(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ur,afterBody:Ur,beforeFooter:Ur,footer:Ur,afterFooter:Ur};function sn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?ED[e].call(n,r):s}class tv extends bs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new aD(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=LJ(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=sn(r,"beforeTitle",this,e),i=sn(r,"title",this,e),o=sn(r,"afterTitle",this,e);let a=[];return a=pr(a,Br(s)),a=pr(a,Br(i)),a=pr(a,Br(o)),a}getBeforeBody(e,n){return gE(sn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Ce(e,i=>{const o={before:[],lines:[],after:[]},a=yE(r,i);pr(o.before,Br(sn(a,"beforeLabel",this,i))),pr(o.lines,sn(a,"label",this,i)),pr(o.after,Br(sn(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return gE(sn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=sn(r,"beforeFooter",this,e),i=sn(r,"footer",this,e),o=sn(r,"afterFooter",this,e);let a=[];return a=pr(a,Br(s)),a=pr(a,Br(i)),a=pr(a,Br(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(RJ(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,m)=>e.filter(u,h,m,r))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,r))),Ce(a,u=>{const h=yE(e.callbacks,u);s.push(sn(h,"labelColor",this,u)),i.push(sn(h,"labelPointStyle",this,u)),o.push(sn(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Zl[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=fE(this,r),c=Object.assign({},a,l),u=mE(this.chart,r,c),h=pE(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Pa(a),{x:m,y:p}=e,{width:g,height:v}=n;let _,w,x,b,C,P;return i==="center"?(C=p+v/2,s==="left"?(_=m,w=_-o,b=C+o,P=C-o):(_=m+g,w=_+o,b=C-o,P=C+o),x=_):(s==="left"?w=m+Math.max(l,u)+o:s==="right"?w=m+g-Math.max(c,h)-o:w=this.caretX,i==="top"?(b=p,C=b-o,_=w-o,x=w+o):(b=p+v,C=b+o,_=w+o,x=w-o),P=b),{x1:_,x2:w,x3:x,y1:b,y2:C,y3:P}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=Ia(r.rtl,this.x,this.width);for(e.x=Qd(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=$t(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=$t(i.bodyFont),h=Qd(this,"left",i),m=s.x(h),p=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+p;if(i.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=s.leftForLtr(m,c)+c/2,w=g+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Y0(e,v,_,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Y0(e,v,_,w)}else{e.lineWidth=ge(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=s.leftForLtr(m,c),_=s.leftForLtr(s.xPlus(m,1),c-2),w=Pa(o.borderRadius);Object.values(w).some(x=>x!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,$f(e,{x:v,y:g,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),$f(e,{x:_,y:g+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,g,c,l),e.strokeRect(v,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(_,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,h=$t(r.bodyFont);let m=h.lineHeight,p=0;const g=Ia(r.rtl,this.x,this.width),v=function(T){n.fillText(T,g.x(e.x+p),e.y+m/2),e.y+=m+i},_=g.textAlign(o);let w,x,b,C,P,j,S;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Qd(this,_,r),n.fillStyle=r.bodyColor,Ce(this.beforeBody,v),p=a&&_!=="right"?o==="center"?c/2+u:c+2+u:0,C=0,j=s.length;C<j;++C){for(w=s[C],x=this.labelTextColors[C],n.fillStyle=x,Ce(w.before,v),b=w.lines,a&&b.length&&(this._drawColorBox(n,e,C,g,r),m=Math.max(h.lineHeight,l)),P=0,S=b.length;P<S;++P)v(b[P]),m=h.lineHeight;Ce(w.after,v)}p=0,m=h.lineHeight,Ce(this.afterBody,v),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Ia(r.rtl,this.x,this.width);for(e.x=Qd(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=$t(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:h,topRight:m,bottomLeft:p,bottomRight:g}=Pa(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-m,l),n.quadraticCurveTo(a+c,l,a+c,l+m),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Zl[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=fE(this,e),l=Object.assign({},o,this._size),c=mE(n,e,l),u=pE(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Kn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),tD(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),nD(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Uf(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Uf(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Zl[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}J(tv,"positioners",Zl);var VJ={id:"tooltip",_element:tv,positioners:Zl,afterInit(t,e,n){n&&(t.tooltip=new tv({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ED},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const FJ=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function UJ(t,e,n,r){const s=t.indexOf(e);if(s===-1)return FJ(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const zJ=(t,e)=>t===null?null:Bt(Math.round(t),0,e);function vE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class nv extends al{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Se(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:UJ(r,e,fe(n,e),this._addedLabels),zJ(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return vE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}J(nv,"id","category"),J(nv,"defaults",{ticks:{callback:vE}});function BJ(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:m}=t,p=i||1,g=u-1,{min:v,max:_}=e,w=!Se(o),x=!Se(a),b=!Se(c),C=(_-v)/(h+1);let P=pS((_-v)/g/p)*p,j,S,T,E;if(P<1e-14&&!w&&!x)return[{value:v},{value:_}];E=Math.ceil(_/P)-Math.floor(v/P),E>g&&(P=pS(E*P/g/p)*p),Se(l)||(j=Math.pow(10,l),P=Math.ceil(P*j)/j),s==="ticks"?(S=Math.floor(v/P)*P,T=Math.ceil(_/P)*P):(S=v,T=_),w&&x&&i&&HK((a-o)/i,P/1e3)?(E=Math.round(Math.min((a-o)/P,u)),P=(a-o)/E,S=o,T=a):b?(S=w?o:S,T=x?a:T,E=c-1,P=(T-S)/E):(E=(T-S)/P,Tc(E,Math.round(E),P/1e3)?E=Math.round(E):E=Math.ceil(E));const R=Math.max(gS(P),gS(S));j=Math.pow(10,Se(l)?R:l),S=Math.round(S*j)/j,T=Math.round(T*j)/j;let I=0;for(w&&(m&&S!==o?(n.push({value:o}),S<o&&I++,Tc(Math.round((S+I*P)*j)/j,o,xE(o,C,t))&&I++):S<o&&I++);I<E;++I){const D=Math.round((S+I*P)*j)/j;if(x&&D>a)break;n.push({value:D})}return x&&m&&T!==a?n.length&&Tc(n[n.length-1].value,a,xE(a,C,t))?n[n.length-1].value=a:n.push({value:a}):(!x||T===a)&&n.push({value:T}),n}function xE(t,e,{horizontal:n,minRotation:r}){const s=ts(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class $J extends al{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Se(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Nr(s),c=Nr(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=BJ(s,i);return e.bounds==="ticks"&&qK(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return zw(e,this.chart.options.locale,this.options.ticks.format)}}class rv extends $J{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Gt(e)?e:0,this.max=Gt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ts(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}J(rv,"id","linear"),J(rv,"defaults",{ticks:{callback:GN.formatters.numeric}});const ip={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ln=Object.keys(ip);function wE(t,e){return t-e}function _E(t,e){if(Se(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Gt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(cu(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function bE(t,e,n,r){const s=ln.length;for(let i=ln.indexOf(t);i<s-1;++i){const o=ip[ln[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return ln[i]}return ln[s-1]}function WJ(t,e,n,r,s){for(let i=ln.length-1;i>=ln.indexOf(n);i--){const o=ln[i];if(ip[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return ln[n?ln.indexOf(n):0]}function HJ(t){for(let e=ln.indexOf(t)+1,n=ln.length;e<n;++e)if(ip[ln[e]].common)return ln[e]}function kE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Vw(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function qJ(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function TE(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:qJ(t,r,s,n)}class Gf extends al{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new PY._date(e.adapters.date);s.init(n),kc(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:_E(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Gt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Gt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=XK(s,i,o);return this._unit=n.unit||(r.autoSkip?bE(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):WJ(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:HJ(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),TE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Bt(n,0,o),r=Bt(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||bE(i.minUnit,n,r,this._getLabelCapacity(n)),a=fe(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=cu(l)||l===!0,u={};let h=n,m,p;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(m=h,p=0;m<r;m=+e.add(m,a,o),p++)kE(u,m,g);return(m===r||s.bounds==="ticks"||p===1)&&kE(u,m,g),Object.keys(u).sort(wE).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Le(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],m=r[n],p=c&&h&&m&&m.major;return this._adapter.format(e,s||(p?h:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=ts(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,TE(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(_E(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return WN(e.sort(wE))}}J(Gf,"id","time"),J(Gf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Yd(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=io(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=io(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class SE extends Gf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Yd(n,this.min),this._tableRange=Yd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Yd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Yd(this._table,r*this._tableRange+this._minPos,!0)}}J(SE,"id","timeseries"),J(SE,"defaults",Gf.defaults);const CD="label";function EE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function GJ(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function PD(t,e){t.labels=e}function ID(t,e,n=CD){const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function KJ(t,e=CD){const n={labels:[],datasets:[]};return PD(n,t.labels),ID(n,t.datasets,e),n}function QJ(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...m}=t,p=M.useRef(null),g=M.useRef(null),v=()=>{p.current&&(g.current=new rp(p.current,{type:o,data:KJ(a,i),options:l&&{...l},plugins:c}),EE(e,g.current))},_=()=>{EE(e,null),g.current&&(g.current.destroy(),g.current=null)};return M.useEffect(()=>{!s&&g.current&&l&&GJ(g.current,l)},[s,l]),M.useEffect(()=>{!s&&g.current&&PD(g.current.config.data,a.labels)},[s,a.labels]),M.useEffect(()=>{!s&&g.current&&a.datasets&&ID(g.current.config.data,a.datasets,i)},[s,a.datasets]),M.useEffect(()=>{g.current&&(s?(_(),setTimeout(v)):g.current.update(h))},[s,l,a.labels,a.datasets,h]),M.useEffect(()=>{g.current&&(_(),setTimeout(v))},[o]),M.useEffect(()=>(v(),()=>_()),[]),d.jsx("canvas",{ref:p,role:"img",height:n,width:r,...m,children:u})}const YJ=M.forwardRef(QJ);function Qw(t,e){return rp.register(e),M.forwardRef((n,r)=>d.jsx(YJ,{...n,ref:r,type:t}))}const XJ=Qw("line",Ch),JJ=Qw("bar",Eh),ZJ=Qw("doughnut",Yl);rp.register(nv,rv,Ah,Ys,Rh,Jl,AJ,VJ,PJ,bJ);const eZ=()=>{const{user:t,gameStats:e}=he(),{tasks:n,categories:r}=Qn(),[s,i]=M.useState("7days");if(!t||!e)return null;const o=s==="7days"?7:s==="30days"?30:90,a=_G(new Date,o-1),l=pq({start:a,end:new Date}),c=l.map(P=>n.filter(j=>j.status==="completed"&&j.completedAt&&Lf(new Date(j.completedAt),P)).length),u=l.map(P=>n.filter(j=>j.status==="completed"&&j.completedAt&&Lf(new Date(j.completedAt),P)).reduce((j,S)=>j+(S.xpReward||0),0)),h=r.map(P=>({name:P.name,count:n.filter(j=>j.categoryId===P.id).length,color:P.color})),m={high:n.filter(P=>P.priority==="high").length,medium:n.filter(P=>P.priority==="medium").length,low:n.filter(P=>P.priority==="low").length},p=e.tasksCompleted,g=e.tasksCreated,v=g>0?Math.round(p/g*100):0,_=o>0?Math.round(p/o):0,w={labels:l.map(P=>rr(P,"dd/MM")),datasets:[{label:"Tches compltes",data:c,borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4}]},x={labels:l.map(P=>rr(P,"dd/MM")),datasets:[{label:"XP gagne",data:u,backgroundColor:"rgba(168, 85, 247, 0.8)",borderRadius:4}]},b={labels:h.map(P=>P.name),datasets:[{data:h.map(P=>P.count),backgroundColor:h.map(P=>P.color),borderWidth:0}]},C={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}}};return d.jsxs(Oo,{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[d.jsx(vN,{className:"w-7 h-7 text-primary-500"}),"Statistiques"]}),d.jsx("p",{className:"text-gray-500 mt-1",children:"Suivez votre progression et vos performances"})]}),d.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[{value:"7days",label:"7 jours"},{value:"30days",label:"30 jours"},{value:"90days",label:"90 jours"}].map(({value:P,label:j})=>d.jsx("button",{onClick:()=>i(P),className:Z("px-4 py-2 rounded-md text-sm font-medium transition-colors",s===P?"bg-white dark:bg-gray-700 shadow-sm":"text-gray-500"),children:j},P))})]}),d.jsxs(Y.div,{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",variants:Nw,initial:"hidden",animate:"visible",children:[d.jsx(Y.div,{variants:Vn,children:d.jsx(ut,{icon:d.jsx(ur,{className:"w-6 h-6"}),label:"Total compltes",value:On(p),color:"primary"})}),d.jsx(Y.div,{variants:Vn,children:d.jsx(ut,{icon:d.jsx(wr,{className:"w-6 h-6"}),label:"Taux de compltion",value:`${v}%`,color:"green"})}),d.jsx(Y.div,{variants:Vn,children:d.jsx(ut,{icon:d.jsx($0,{className:"w-6 h-6"}),label:"Moyenne par jour",value:_,color:"purple"})}),d.jsx(Y.div,{variants:Vn,children:d.jsx(ut,{icon:d.jsx(xc,{className:"w-6 h-6"}),label:"Plus long streak",value:`${e.longestStreak} jours`,color:"orange"})})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[d.jsxs(Te,{className:"p-5",children:[d.jsx("div",{className:"flex items-center justify-between mb-4",children:d.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[d.jsx($0,{className:"w-5 h-5 text-primary-500"}),"Tches compltes"]})}),d.jsx("div",{className:"h-64",children:d.jsx(XJ,{data:w,options:C})})]}),d.jsxs(Te,{className:"p-5",children:[d.jsx("div",{className:"flex items-center justify-between mb-4",children:d.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[d.jsx(Jm,{className:"w-5 h-5 text-purple-500"}),"XP gagne"]})}),d.jsx("div",{className:"h-64",children:d.jsx(JJ,{data:x,options:C})})]}),d.jsxs(Te,{className:"p-5",children:[d.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[d.jsx(_s,{className:"w-5 h-5 text-primary-500"}),"Rpartition par catgorie"]}),d.jsxs("div",{className:"flex items-center gap-6",children:[d.jsx("div",{className:"w-48 h-48",children:d.jsx(ZJ,{data:b,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},cutout:"60%"}})}),d.jsx("div",{className:"flex-1 space-y-2",children:h.map(P=>d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:P.color}}),d.jsx("span",{className:"text-sm",children:P.name})]}),d.jsx("span",{className:"text-sm font-medium",children:P.count})]},P.name))})]})]}),d.jsxs(Te,{className:"p-5",children:[d.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[d.jsx(wr,{className:"w-5 h-5 text-primary-500"}),"Rpartition par priorit"]}),d.jsx("div",{className:"space-y-4",children:[{label:"Haute",value:m.high,color:"bg-red-500"},{label:"Moyenne",value:m.medium,color:"bg-yellow-500"},{label:"Basse",value:m.low,color:"bg-green-500"}].map(({label:P,value:j,color:S})=>d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("span",{className:"text-sm",children:P}),d.jsx("span",{className:"text-sm font-medium",children:j})]}),d.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:d.jsx("div",{className:Z("h-full rounded-full",S),style:{width:`${g>0?j/g*100:0}%`}})})]},P))})]})]}),d.jsxs(Te,{className:"p-5",children:[d.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[d.jsx(Rr,{className:"w-5 h-5 text-yellow-500"}),"Statistiques de jeu"]}),d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[d.jsx("div",{className:"text-3xl font-bold gradient-text",children:e.level}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Niveau actuel"})]}),d.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[d.jsx("div",{className:"text-3xl font-bold text-purple-500",children:On(e.totalXP)}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"XP Total"})]}),d.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[d.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:e.achievementsUnlocked.length}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Achievements"})]}),d.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[d.jsx("div",{className:"text-3xl font-bold text-orange-500",children:On(e.coins)}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Pices"})]})]})]})]})},tZ=()=>{var _;const{user:t,gameStats:e,updateProfile:n,updateAvatar:r}=he(),{tasks:s}=Qn(),[i,o]=M.useState(!1),[a,l]=M.useState(!1),[c,u]=M.useState({username:(t==null?void 0:t.username)||""});if(!t||!e)return null;const h=e.tasksCompleted,m=vr.filter(w=>e.achievementsUnlocked.includes(w.id)),p=async()=>{await n(c),o(!1)},g=async w=>{var x;await r({icon:w,type:"default",baseColor:((x=t.avatar)==null?void 0:x.baseColor)||"#6366f1"}),l(!1)},v=m.slice(-4).reverse();return d.jsxs(Oo,{className:"space-y-6",children:[d.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-accent-gradient-br p-6 text-white",children:[d.jsx("div",{className:"absolute inset-0 bg-black/10"}),d.jsx("div",{className:"absolute -right-16 -top-16 w-48 h-48 bg-white/10 rounded-full"}),d.jsx("div",{className:"absolute -right-8 -bottom-8 w-32 h-32 bg-white/10 rounded-full"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[d.jsxs("div",{className:"relative group",children:[d.jsx(Cw,{config:t.avatar,size:"xl",showLevel:!0,level:e.level}),d.jsx("button",{onClick:()=>l(!0),className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(sH,{className:"w-8 h-8"})})]}),d.jsx("div",{className:"flex-1 text-center sm:text-left",children:i?d.jsxs("div",{className:"space-y-3",children:[d.jsx(_r,{value:c.username,onChange:w=>u({...c,username:w.target.value}),className:"bg-white/20 border-white/30 text-white placeholder-white/50",placeholder:"Nom d'utilisateur"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Ne,{variant:"secondary",size:"sm",onClick:()=>o(!1),children:"Annuler"}),d.jsxs(Ne,{variant:"primary",size:"sm",onClick:p,children:[d.jsx(xH,{className:"w-4 h-4 mr-1"}),"Sauvegarder"]})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2",children:[d.jsx("h1",{className:"text-2xl font-bold",children:t.username}),e.level>=50&&d.jsx(wN,{className:"w-6 h-6 text-yellow-400"}),d.jsx("button",{onClick:()=>o(!0),className:"p-1 hover:bg-white/20 rounded",children:d.jsx(yH,{className:"w-4 h-4"})})]}),d.jsx("p",{className:"text-white/80 mt-1",children:Ew(e.level)}),d.jsxs("p",{className:"text-white/60 text-sm mt-2 flex items-center justify-center sm:justify-start gap-1",children:[d.jsx(_s,{className:"w-4 h-4"}),"Membre depuis ",rr(new Date(t.createdAt),"MMMM yyyy",{locale:Bu})]})]})}),d.jsxs("div",{className:"flex gap-4 sm:gap-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold",children:e.level}),d.jsx("p",{className:"text-sm text-white/70",children:"Niveau"})]}),d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"text-2xl font-bold flex items-center justify-center gap-1",children:[d.jsx(xc,{className:"w-5 h-5 text-orange-300"}),e.currentStreak]}),d.jsx("p",{className:"text-sm text-white/70",children:"Streak"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold",children:m.length}),d.jsx("p",{className:"text-sm text-white/70",children:"Trophes"})]})]})]}),d.jsxs("div",{className:"mt-6",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[d.jsxs("span",{children:["Niveau ",e.level]}),d.jsxs("span",{children:[On(e.currentXP)," / ",On(e.xpToNextLevel)," XP"]})]}),d.jsx("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden",children:d.jsx(Y.div,{initial:{width:0},animate:{width:`${e.currentXP/e.xpToNextLevel*100}%`},className:"h-full bg-white rounded-full",transition:{duration:1}})})]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx(ut,{icon:d.jsx(Jm,{className:"w-6 h-6"}),label:"XP Total",value:On(e.totalXP),color:"primary"}),d.jsx(ut,{icon:d.jsx(ur,{className:"w-6 h-6"}),label:"Tches compltes",value:h,color:"green"}),d.jsx(ut,{icon:d.jsx(xc,{className:"w-6 h-6"}),label:"Plus long streak",value:`${e.longestStreak} jours`,color:"orange"}),d.jsx(ut,{icon:d.jsx(Rr,{className:"w-6 h-6"}),label:"Achievements",value:`${m.length}/${vr.length}`,color:"yellow"})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[d.jsxs(Te,{className:"p-5",children:[d.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[d.jsx(Rr,{className:"w-5 h-5 text-yellow-500"}),"Achievements rcents"]}),v.length>0?d.jsx("div",{className:"space-y-3",children:v.map(w=>d.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center text-xl",children:w.icon}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium",children:w.name}),d.jsx("p",{className:"text-sm text-gray-500",children:w.description})]}),d.jsxs("span",{className:"text-sm text-primary-500",children:["+",w.xpReward," XP"]})]},w.id))}):d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(Rr,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"Aucun achievement dbloqu"})]})]}),d.jsxs(Te,{className:"p-5",children:[d.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[d.jsx(Sw,{className:"w-5 h-5 text-primary-500"}),"Statistiques de jeu"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pices"}),d.jsxs("span",{className:"font-medium flex items-center gap-1",children:[" ",On(e.coins)]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Gemmes"}),d.jsxs("span",{className:"font-medium flex items-center gap-1",children:[" ",On(e.gems)]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Qutes compltes"}),d.jsx("span",{className:"font-medium",children:e.questsCompleted||0})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Streak actuel"}),d.jsxs("span",{className:"font-medium flex items-center gap-1",children:[d.jsx(xc,{className:"w-4 h-4 text-orange-500"}),e.currentStreak," jours"]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Meilleur streak"}),d.jsxs("span",{className:"font-medium",children:[e.longestStreak," jours"]})]})]})]})]}),d.jsx(_c,{isOpen:a,onClose:()=>l(!1),title:"Personnaliser l'avatar",size:"lg",children:d.jsx(IH,{selected:((_=t.avatar)==null?void 0:_.icon)||"",onSelect:g})})]})},nZ=[{name:"Teal",value:"teal",class:"bg-teal-500"},{name:"Blue",value:"blue",class:"bg-blue-500"},{name:"Purple",value:"purple",class:"bg-purple-500"},{name:"Green",value:"green",class:"bg-emerald-500"},{name:"Orange",value:"orange",class:"bg-orange-500"}],rZ=()=>{const{user:t,signOut:e,deleteAccount:n,updateSettings:r}=he(),{exportData:s,importData:i,clearAllData:o}=Qn(),{theme:a,setTheme:l,accentColor:c,setAccentColor:u,soundEnabled:h,toggleSound:m,notificationsEnabled:p,toggleNotifications:g}=hr(),[v,_]=M.useState(!1),[w,x]=M.useState(!1),[b,C]=M.useState(!1),[P,j]=M.useState(""),S=M.useRef(null);if(!t)return null;const T=z=>{l(z),Yt.success(`Thme ${z==="dark"?"sombre":z==="light"?"clair":"systme"} activ`)},E=()=>{g(),Yt.success(p?"Notifications dsactives":"Notifications actives")},R=()=>{m(),Yt.success(h?"Sons dsactivs":"Sons activs")},I=()=>{try{const z=s(),K=new Blob([JSON.stringify(z,null,2)],{type:"application/json"}),B=URL.createObjectURL(K),q=document.createElement("a");q.href=B,q.download=`questify-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(B),Yt.success("Donnes exportes avec succs !")}catch{Yt.error("Erreur lors de l'export des donnes")}},D=z=>{var q;const K=(q=z.target.files)==null?void 0:q[0];if(!K)return;const B=new FileReader;B.onload=re=>{var te;try{const ue=(te=re.target)==null?void 0:te.result,ve=JSON.parse(ue);ve.tasks||ve.categories?(i(ve),Yt.success("Donnes importes avec succs !")):Yt.error("Format de fichier invalide")}catch{Yt.error("Erreur lors de l'import des donnes")}},B.readAsText(K),S.current&&(S.current.value="")},N=()=>{o(),x(!1),Yt.success("Toutes les donnes ont t supprimes")},F=async()=>{try{await e(),Yt.success("Dconnexion russie")}catch{Yt.error("Erreur lors de la dconnexion")}},W=async()=>{if(P!=="SUPPRIMER"){Yt.error("Veuillez taper SUPPRIMER pour confirmer");return}try{await n(),Yt.success("Compte supprim")}catch{Yt.error("Erreur lors de la suppression du compte")}};return d.jsxs(Oo,{className:"max-w-2xl mx-auto space-y-6 pb-8",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[d.jsx("div",{className:"p-3 rounded-2xl text-white shadow-lg",style:{background:"linear-gradient(to bottom right, var(--color-accent-gradient-from), var(--color-accent-gradient-to))"},children:d.jsx(kN,{className:"w-6 h-6"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Paramtres"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Personnalisez votre exprience"})]})]}),d.jsxs(Te,{className:"overflow-hidden",children:[d.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:d.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[d.jsx(gH,{className:"w-5 h-5",style:{color:"var(--color-accent-500)"}}),"Apparence"]})}),d.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[d.jsxs("div",{className:"p-4 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[a==="dark"?d.jsx(mH,{className:"w-5 h-5 text-gray-500"}):a==="light"?d.jsx(wH,{className:"w-5 h-5 text-yellow-500"}):d.jsx(fH,{className:"w-5 h-5 text-gray-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Thme"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisissez votre thme prfr"})]})]}),d.jsxs("select",{value:a,onChange:z=>T(z.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:border-transparent transition-all cursor-pointer",style:{"--tw-ring-color":"var(--color-accent-500)"},children:[d.jsx("option",{value:"light",children:"Clair"}),d.jsx("option",{value:"dark",children:"Sombre"}),d.jsx("option",{value:"system",children:"Systme"})]})]}),d.jsxs("div",{className:"p-4 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Gn,{className:"w-5 h-5 text-gray-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Couleur d'accent"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Personnalisez la couleur principale"})]})]}),d.jsx("div",{className:"flex gap-2",children:nZ.map(z=>d.jsx("button",{onClick:()=>{u(z.value),Yt.success(`Couleur ${z.name} slectionne`)},className:`w-8 h-8 rounded-full ${z.class} transition-all hover:scale-110 ${c===z.value?"ring-2 ring-offset-2 ring-gray-400 dark:ring-offset-gray-800":""}`,title:z.name},z.value))})]})]})]}),d.jsxs(Te,{className:"overflow-hidden",children:[d.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:d.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[d.jsx(JT,{className:"w-5 h-5",style:{color:"var(--color-accent-500)"}}),"Notifications & Sons"]})}),d.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[d.jsxs("div",{className:"p-4 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[p?d.jsx(JT,{className:"w-5 h-5",style:{color:"var(--color-accent-500)"}}):d.jsx(tH,{className:"w-5 h-5 text-gray-400"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Notifications"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Recevoir des rappels et alertes"})]})]}),d.jsxs("button",{onClick:E,className:"relative w-14 h-8 rounded-full transition-colors duration-200",style:{backgroundColor:p?"var(--color-accent-500)":void 0},children:[!p&&d.jsx("span",{className:"absolute inset-0 rounded-full bg-gray-300 dark:bg-gray-600"}),d.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md transition-transform duration-200 ${p?"translate-x-6":"translate-x-0"}`})]})]}),d.jsxs("div",{className:"p-4 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[h?d.jsx(bH,{className:"w-5 h-5",style:{color:"var(--color-accent-500)"}}):d.jsx(kH,{className:"w-5 h-5 text-gray-400"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Effets sonores"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sons lors des actions"})]})]}),d.jsxs("button",{onClick:R,className:"relative w-14 h-8 rounded-full transition-colors duration-200",style:{backgroundColor:h?"var(--color-accent-500)":void 0},children:[!h&&d.jsx("span",{className:"absolute inset-0 rounded-full bg-gray-300 dark:bg-gray-600"}),d.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md transition-transform duration-200 ${h?"translate-x-6":"translate-x-0"}`})]})]})]})]}),d.jsxs(Te,{className:"overflow-hidden",children:[d.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:d.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[d.jsx(eS,{className:"w-5 h-5",style:{color:"var(--color-accent-500)"}}),"Donnes"]})}),d.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[d.jsxs("button",{onClick:I,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(eS,{className:"w-5 h-5 text-gray-500"}),d.jsxs("div",{className:"text-left",children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Exporter les donnes"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tlcharger une sauvegarde de vos donnes"})]})]}),d.jsx(zt,{className:"w-5 h-5 text-gray-400"})]}),d.jsxs("label",{className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(_H,{className:"w-5 h-5 text-gray-500"}),d.jsxs("div",{className:"text-left",children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Importer des donnes"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Restaurer depuis une sauvegarde"})]})]}),d.jsx("span",{className:"text-sm text-accent font-medium",children:"Choisir un fichier"}),d.jsx("input",{ref:S,type:"file",accept:".json",onChange:D,className:"hidden"})]}),d.jsxs("button",{onClick:()=>x(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors group",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(di,{className:"w-5 h-5 text-red-500"}),d.jsxs("div",{className:"text-left",children:[d.jsx("p",{className:"font-medium text-red-600 dark:text-red-400",children:"Effacer les donnes"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Supprimer toutes les tches et catgories"})]})]}),d.jsx(zt,{className:"w-5 h-5 text-red-400"})]})]})]}),d.jsxs(Te,{className:"overflow-hidden",children:[d.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:d.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[d.jsx(Mg,{className:"w-5 h-5 text-teal-500"}),"Compte"]})}),d.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[d.jsxs("button",{onClick:()=>C(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Mg,{className:"w-5 h-5 text-gray-500"}),d.jsxs("div",{className:"text-left",children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Scurit"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Grer les options de scurit"})]})]}),d.jsx(zt,{className:"w-5 h-5 text-gray-400"})]}),d.jsxs("button",{onClick:F,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(_N,{className:"w-5 h-5 text-gray-500"}),d.jsxs("div",{className:"text-left",children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Se dconnecter"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Vous serez dconnect de ce compte"})]})]}),d.jsx(zt,{className:"w-5 h-5 text-gray-400"})]}),d.jsxs("button",{onClick:()=>_(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(tS,{className:"w-5 h-5 text-red-500"}),d.jsxs("div",{className:"text-left",children:[d.jsx("p",{className:"font-medium text-red-600 dark:text-red-400",children:"Supprimer le compte"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cette action est irrversible"})]})]}),d.jsx(zt,{className:"w-5 h-5 text-red-400"})]})]})]}),d.jsxs(Te,{className:"overflow-hidden",children:[d.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:d.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[d.jsx(uH,{className:"w-5 h-5 text-accent"})," propos"]})}),d.jsx("div",{className:"p-4 flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-gradient-br flex items-center justify-center",children:d.jsx(Gn,{className:"w-5 h-5 text-white"})}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Version"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Questify v1.0.0"})]})]})})]}),d.jsx(_c,{isOpen:w,onClose:()=>x(!1),title:"Effacer toutes les donnes",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl",children:[d.jsx(Mf,{className:"w-6 h-6 text-yellow-500 flex-shrink-0"}),d.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Cette action supprimera toutes vos tches et catgories. Cette action est irrversible."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(Ne,{variant:"secondary",className:"flex-1",onClick:()=>x(!1),children:"Annuler"}),d.jsxs(Ne,{variant:"danger",className:"flex-1",onClick:N,children:[d.jsx(di,{className:"w-4 h-4 mr-2"}),"Effacer tout"]})]})]})}),d.jsx(_c,{isOpen:v,onClose:()=>{_(!1),j("")},title:"Supprimer le compte",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[d.jsx(Mf,{className:"w-6 h-6 text-red-500 flex-shrink-0"}),d.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Cette action est permanente et irrversible. Toutes vos donnes seront supprimes."})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Tapez ",d.jsx("span",{className:"font-bold text-red-500",children:"SUPPRIMER"})," pour confirmer"]}),d.jsx("input",{type:"text",value:P,onChange:z=>j(z.target.value),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"SUPPRIMER"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(Ne,{variant:"secondary",className:"flex-1",onClick:()=>{_(!1),j("")},children:"Annuler"}),d.jsxs(Ne,{variant:"danger",className:"flex-1",onClick:W,disabled:P!=="SUPPRIMER",children:[d.jsx(tS,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})}),d.jsx(_c,{isOpen:b,onClose:()=>C(!1),title:"Scurit",size:"md",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx(xN,{className:"w-5 h-5 text-green-500"}),d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Connexion scurise"})]}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 ml-8",children:"Votre compte est protg par l'authentification Google."})]}),d.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx(Mg,{className:"w-5 h-5 text-accent"}),d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Donnes chiffres"})]}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 ml-8",children:"Vos donnes sont stockes de manire scurise dans Firebase."})]}),d.jsx(Ne,{variant:"secondary",className:"w-full",onClick:()=>C(!1),children:"Fermer"})]})})]})},sZ=({children:t})=>{const{user:e,isLoading:n}=he();return n?d.jsx(AD,{}):e?d.jsx(d.Fragment,{children:t}):d.jsx(qy,{to:"/auth",replace:!0})},AD=()=>d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 rounded-2xl bg-accent-gradient-br flex items-center justify-center mx-auto mb-4 animate-pulse",children:d.jsx(Gn,{className:"w-10 h-10 text-white"})}),d.jsx("h1",{className:"text-2xl font-bold text-white",children:"Questify"}),d.jsx("p",{className:"text-gray-400 mt-2",children:"Chargement..."})]})});function iZ(){const{initializeAuth:t,user:e}=he(),{theme:n,accentColor:r,setIsMobile:s}=hr(),{loadQuests:i}=Lu(),{loadTasks:o,loadCategories:a}=Qn(),[l,c]=M.useState(!1);return M.useEffect(()=>{(async()=>{await t(),c(!0)})()},[t]),M.useEffect(()=>{e&&(async()=>(await a(e.id),await o(e.id),await i(e.id)))()},[e,a,o,i]),M.useEffect(()=>{if(!e)return;const u=()=>{i(e.id)},h=new Date,m=new Date(h);m.setDate(m.getDate()+1),m.setHours(0,0,0,0);const p=m.getTime()-h.getTime(),g=setTimeout(()=>{i(e.id);const v=setInterval(()=>{i(e.id)},24*60*60*1e3);return()=>clearInterval(v)},p);return window.addEventListener("focus",u),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&u()}),()=>{window.removeEventListener("focus",u),clearTimeout(g)}},[e,i]),M.useEffect(()=>{const u=document.documentElement;if(n==="system"){const h=window.matchMedia("(prefers-color-scheme: dark)").matches;u.classList.toggle("dark",h)}else u.classList.toggle("dark",n==="dark")},[n]),M.useEffect(()=>{const u=document.documentElement;u.classList.remove("accent-teal","accent-blue","accent-purple","accent-green","accent-orange"),u.classList.add(`accent-${r}`)},[r]),M.useEffect(()=>{const u=()=>{s(window.innerWidth<1024)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[s]),M.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{console.log("SW registration failed")})})},[]),l?d.jsxs(O5,{children:[d.jsxs(P5,{children:[d.jsx(Nn,{path:"/auth",element:e?d.jsx(qy,{to:"/",replace:!0}):d.jsx(PH,{})}),d.jsxs(Nn,{element:d.jsx(sZ,{children:d.jsx(JH,{})}),children:[d.jsx(Nn,{path:"/",element:d.jsx(XG,{})}),d.jsx(Nn,{path:"/tasks",element:d.jsx(ZG,{})}),d.jsx(Nn,{path:"/calendar",element:d.jsx(oK,{})}),d.jsx(Nn,{path:"/quests",element:d.jsx(aK,{})}),d.jsx(Nn,{path:"/achievements",element:d.jsx(dK,{})}),d.jsx(Nn,{path:"/stats",element:d.jsx(eZ,{})}),d.jsx(Nn,{path:"/profile",element:d.jsx(tZ,{})}),d.jsx(Nn,{path:"/settings",element:d.jsx(rZ,{})})]}),d.jsx(Nn,{path:"*",element:d.jsx(qy,{to:"/",replace:!0})})]}),d.jsx(IL,{position:"top-right",toastOptions:{duration:3e3,style:{background:"var(--toast-bg)",color:"var(--toast-color)",borderRadius:"12px",padding:"12px 16px"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}):d.jsx(AD,{})}Xg.createRoot(document.getElementById("root")).render(d.jsx(mn.StrictMode,{children:d.jsx(iZ,{})}));
