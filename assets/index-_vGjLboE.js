var HD=Object.defineProperty;var qD=(t,e,n)=>e in t?HD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>qD(t,typeof e!="symbol"?e+"":e,n);function GD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function lE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cE={exports:{}},jf={},uE={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ou=Symbol.for("react.element"),KD=Symbol.for("react.portal"),QD=Symbol.for("react.fragment"),YD=Symbol.for("react.strict_mode"),XD=Symbol.for("react.profiler"),JD=Symbol.for("react.provider"),ZD=Symbol.for("react.context"),eM=Symbol.for("react.forward_ref"),tM=Symbol.for("react.suspense"),nM=Symbol.for("react.memo"),rM=Symbol.for("react.lazy"),D_=Symbol.iterator;function sM(t){return t===null||typeof t!="object"?null:(t=D_&&t[D_]||t["@@iterator"],typeof t=="function"?t:null)}var dE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hE=Object.assign,fE={};function Ba(t,e,n){this.props=t,this.context=e,this.refs=fE,this.updater=n||dE}Ba.prototype.isReactComponent={};Ba.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ba.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mE(){}mE.prototype=Ba.prototype;function q0(t,e,n){this.props=t,this.context=e,this.refs=fE,this.updater=n||dE}var G0=q0.prototype=new mE;G0.constructor=q0;hE(G0,Ba.prototype);G0.isPureReactComponent=!0;var M_=Array.isArray,pE=Object.prototype.hasOwnProperty,K0={current:null},gE={key:!0,ref:!0,__self:!0,__source:!0};function yE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)pE.call(e,r)&&!gE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ou,type:t,key:i,ref:o,props:s,_owner:K0.current}}function iM(t,e){return{$$typeof:ou,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Q0(t){return typeof t=="object"&&t!==null&&t.$$typeof===ou}function oM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var j_=/\/+/g;function pp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oM(""+t.key):e.toString(36)}function Bd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ou:case KD:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+pp(o,0):r,M_(s)?(n="",t!=null&&(n=t.replace(j_,"$&/")+"/"),Bd(s,e,n,"",function(c){return c})):s!=null&&(Q0(s)&&(s=iM(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(j_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",M_(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+pp(i,a);o+=Bd(i,e,n,l,s)}else if(l=sM(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+pp(i,a++),o+=Bd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ju(t,e,n){if(t==null)return t;var r=[],s=0;return Bd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function aM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},$d={transition:null},lM={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:$d,ReactCurrentOwner:K0};function vE(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Ju,forEach:function(t,e,n){Ju(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ju(t,function(){e++}),e},toArray:function(t){return Ju(t,function(e){return e})||[]},only:function(t){if(!Q0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Ba;me.Fragment=QD;me.Profiler=XD;me.PureComponent=q0;me.StrictMode=YD;me.Suspense=tM;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lM;me.act=vE;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=hE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=K0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)pE.call(e,l)&&!gE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ou,type:t.type,key:s,ref:i,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:ZD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JD,_context:t},t.Consumer=t};me.createElement=yE;me.createFactory=function(t){var e=yE.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:eM,render:t}};me.isValidElement=Q0;me.lazy=function(t){return{$$typeof:rM,_payload:{_status:-1,_result:t},_init:aM}};me.memo=function(t,e){return{$$typeof:nM,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=$d.transition;$d.transition={};try{t()}finally{$d.transition=e}};me.unstable_act=vE;me.useCallback=function(t,e){return en.current.useCallback(t,e)};me.useContext=function(t){return en.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return en.current.useDeferredValue(t)};me.useEffect=function(t,e){return en.current.useEffect(t,e)};me.useId=function(){return en.current.useId()};me.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return en.current.useMemo(t,e)};me.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};me.useRef=function(t){return en.current.useRef(t)};me.useState=function(t){return en.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return en.current.useTransition()};me.version="18.3.1";uE.exports=me;var M=uE.exports;const hn=lE(M),cM=GD({__proto__:null,default:hn},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uM=M,dM=Symbol.for("react.element"),hM=Symbol.for("react.fragment"),fM=Object.prototype.hasOwnProperty,mM=uM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pM={key:!0,ref:!0,__self:!0,__source:!0};function xE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fM.call(e,r)&&!pM.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:dM,type:t,key:i,ref:o,props:s,_owner:mM.current}}jf.Fragment=hM;jf.jsx=xE;jf.jsxs=xE;cE.exports=jf;var f=cE.exports,Lg={},wE={exports:{}},kn={},_E={exports:{}},bE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,q){var ne=U.length;U.push(q);e:for(;0<ne;){var Z=ne-1>>>1,le=U[Z];if(0<s(le,q))U[Z]=q,U[ne]=le,ne=Z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var q=U[0],ne=U.pop();if(ne!==q){U[0]=ne;e:for(var Z=0,le=U.length,ve=le>>>1;Z<ve;){var st=2*(Z+1)-1,gt=U[st],ze=st+1,En=U[ze];if(0>s(gt,ne))ze<le&&0>s(En,gt)?(U[Z]=En,U[ze]=ne,Z=ze):(U[Z]=gt,U[st]=ne,Z=st);else if(ze<le&&0>s(En,ne))U[Z]=En,U[ze]=ne,Z=ze;else break e}}return q}function s(U,q){var ne=U.sortIndex-q.sortIndex;return ne!==0?ne:U.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,m=3,p=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=U)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function I(U){if(v=!1,b(U),!g)if(n(l)!==null)g=!0,$(C);else{var q=n(c);q!==null&&J(I,q.startTime-U)}}function C(U,q){g=!1,v&&(v=!1,w(k),k=-1),p=!0;var ne=m;try{for(b(q),d=n(l);d!==null&&(!(d.expirationTime>q)||U&&!D());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,m=d.priorityLevel;var le=Z(d.expirationTime<=q);q=t.unstable_now(),typeof le=="function"?d.callback=le:d===n(l)&&r(l),b(q)}else r(l);d=n(l)}if(d!==null)var ve=!0;else{var st=n(c);st!==null&&J(I,st.startTime-q),ve=!1}return ve}finally{d=null,m=ne,p=!1}}var N=!1,S=null,k=-1,E=5,A=-1;function D(){return!(t.unstable_now()-A<E)}function j(){if(S!==null){var U=t.unstable_now();A=U;var q=!0;try{q=S(!0,U)}finally{q?R():(N=!1,S=null)}}else N=!1}var R;if(typeof x=="function")R=function(){x(j)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=j,R=function(){H.postMessage(null)}}else R=function(){_(j,0)};function $(U){S=U,N||(N=!0,R())}function J(U,q){k=_(function(){U(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,$(C))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var ne=m;m=q;try{return U()}finally{m=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ne=m;m=U;try{return q()}finally{m=ne}},t.unstable_scheduleCallback=function(U,q,ne){var Z=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Z+ne:Z):ne=Z,U){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=ne+le,U={id:u++,callback:q,priorityLevel:U,startTime:ne,expirationTime:le,sortIndex:-1},ne>Z?(U.sortIndex=ne,e(c,U),n(l)===null&&U===n(c)&&(v?(w(k),k=-1):v=!0,J(I,ne-Z))):(U.sortIndex=le,e(l,U),g||p||(g=!0,$(C))),U},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(U){var q=m;return function(){var ne=m;m=q;try{return U.apply(this,arguments)}finally{m=ne}}}})(bE);_E.exports=bE;var gM=_E.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yM=M,_n=gM;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TE=new Set,xc={};function To(t,e){ba(t,e),ba(t+"Capture",e)}function ba(t,e){for(xc[t]=e,t=0;t<e.length;t++)TE.add(e[t])}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vg=Object.prototype.hasOwnProperty,vM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O_={},L_={};function xM(t){return Vg.call(L_,t)?!0:Vg.call(O_,t)?!1:vM.test(t)?L_[t]=!0:(O_[t]=!0,!1)}function wM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _M(t,e,n,r){if(e===null||typeof e>"u"||wM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Y0=/[\-:]([a-z])/g;function X0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Y0,X0);Ct[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Y0,X0);Ct[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Y0,X0);Ct[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function J0(t,e,n,r){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_M(e,n,s,r)&&(n=null),r||s===null?xM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ps=yM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zu=Symbol.for("react.element"),qo=Symbol.for("react.portal"),Go=Symbol.for("react.fragment"),Z0=Symbol.for("react.strict_mode"),Fg=Symbol.for("react.profiler"),kE=Symbol.for("react.provider"),SE=Symbol.for("react.context"),ev=Symbol.for("react.forward_ref"),Ug=Symbol.for("react.suspense"),zg=Symbol.for("react.suspense_list"),tv=Symbol.for("react.memo"),Ps=Symbol.for("react.lazy"),EE=Symbol.for("react.offscreen"),V_=Symbol.iterator;function ml(t){return t===null||typeof t!="object"?null:(t=V_&&t[V_]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,gp;function Al(t){if(gp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gp=e&&e[1]||""}return`
`+gp+t}var yp=!1;function vp(t,e){if(!t||yp)return"";yp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{yp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Al(t):""}function bM(t){switch(t.tag){case 5:return Al(t.type);case 16:return Al("Lazy");case 13:return Al("Suspense");case 19:return Al("SuspenseList");case 0:case 2:case 15:return t=vp(t.type,!1),t;case 11:return t=vp(t.type.render,!1),t;case 1:return t=vp(t.type,!0),t;default:return""}}function Bg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Go:return"Fragment";case qo:return"Portal";case Fg:return"Profiler";case Z0:return"StrictMode";case Ug:return"Suspense";case zg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case SE:return(t.displayName||"Context")+".Consumer";case kE:return(t._context.displayName||"Context")+".Provider";case ev:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tv:return e=t.displayName||null,e!==null?e:Bg(t.type)||"Memo";case Ps:e=t._payload,t=t._init;try{return Bg(t(e))}catch{}}return null}function TM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bg(e);case 8:return e===Z0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function li(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function CE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kM(t){var e=CE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ed(t){t._valueTracker||(t._valueTracker=kM(t))}function PE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=CE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _h(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $g(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function F_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=li(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function IE(t,e){e=e.checked,e!=null&&J0(t,"checked",e,!1)}function Wg(t,e){IE(t,e);var n=li(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hg(t,e.type,li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function U_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hg(t,e,n){(e!=="number"||_h(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Rl=Array.isArray;function la(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+li(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function qg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function z_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Rl(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:li(n)}}function AE(t,e){var n=li(e.value),r=li(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function B_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function RE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?RE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var td,NE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(td=td||document.createElement("div"),td.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=td.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SM=["Webkit","ms","Moz","O"];Object.keys(ql).forEach(function(t){SM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ql[e]=ql[t]})});function DE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ql.hasOwnProperty(t)&&ql[t]?(""+e).trim():e+"px"}function ME(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=DE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var EM=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kg(t,e){if(e){if(EM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Qg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yg=null;function nv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xg=null,ca=null,ua=null;function $_(t){if(t=cu(t)){if(typeof Xg!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Uf(e),Xg(t.stateNode,t.type,e))}}function jE(t){ca?ua?ua.push(t):ua=[t]:ca=t}function OE(){if(ca){var t=ca,e=ua;if(ua=ca=null,$_(t),e)for(t=0;t<e.length;t++)$_(e[t])}}function LE(t,e){return t(e)}function VE(){}var xp=!1;function FE(t,e,n){if(xp)return t(e,n);xp=!0;try{return LE(t,e,n)}finally{xp=!1,(ca!==null||ua!==null)&&(VE(),OE())}}function _c(t,e){var n=t.stateNode;if(n===null)return null;var r=Uf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Jg=!1;if(is)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){Jg=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{Jg=!1}function CM(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Gl=!1,bh=null,Th=!1,Zg=null,PM={onError:function(t){Gl=!0,bh=t}};function IM(t,e,n,r,s,i,o,a,l){Gl=!1,bh=null,CM.apply(PM,arguments)}function AM(t,e,n,r,s,i,o,a,l){if(IM.apply(this,arguments),Gl){if(Gl){var c=bh;Gl=!1,bh=null}else throw Error(B(198));Th||(Th=!0,Zg=c)}}function ko(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function UE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function W_(t){if(ko(t)!==t)throw Error(B(188))}function RM(t){var e=t.alternate;if(!e){if(e=ko(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return W_(s),t;if(i===r)return W_(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function zE(t){return t=RM(t),t!==null?BE(t):null}function BE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=BE(t);if(e!==null)return e;t=t.sibling}return null}var $E=_n.unstable_scheduleCallback,H_=_n.unstable_cancelCallback,NM=_n.unstable_shouldYield,DM=_n.unstable_requestPaint,et=_n.unstable_now,MM=_n.unstable_getCurrentPriorityLevel,rv=_n.unstable_ImmediatePriority,WE=_n.unstable_UserBlockingPriority,kh=_n.unstable_NormalPriority,jM=_n.unstable_LowPriority,HE=_n.unstable_IdlePriority,Of=null,Tr=null;function OM(t){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Of,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:FM,LM=Math.log,VM=Math.LN2;function FM(t){return t>>>=0,t===0?32:31-(LM(t)/VM|0)|0}var nd=64,rd=4194304;function Nl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Nl(a):(i&=o,i!==0&&(r=Nl(i)))}else o=n&~s,o!==0?r=Nl(o):i!==0&&(r=Nl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tr(e),s=1<<n,r|=t[n],e&=~s;return r}function UM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=UM(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function ey(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qE(){var t=nd;return nd<<=1,!(nd&4194240)&&(nd=64),t}function wp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function au(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function BM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function sv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function GE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var KE,iv,QE,YE,XE,ty=!1,sd=[],Ks=null,Qs=null,Ys=null,bc=new Map,Tc=new Map,Ds=[],$M="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q_(t,e){switch(t){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":bc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(e.pointerId)}}function gl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=cu(e),e!==null&&iv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function WM(t,e,n,r,s){switch(e){case"focusin":return Ks=gl(Ks,t,e,n,r,s),!0;case"dragenter":return Qs=gl(Qs,t,e,n,r,s),!0;case"mouseover":return Ys=gl(Ys,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return bc.set(i,gl(bc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Tc.set(i,gl(Tc.get(i)||null,t,e,n,r,s)),!0}return!1}function JE(t){var e=qi(t.target);if(e!==null){var n=ko(e);if(n!==null){if(e=n.tag,e===13){if(e=UE(n),e!==null){t.blockedOn=e,XE(t.priority,function(){QE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ny(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yg=r,n.target.dispatchEvent(r),Yg=null}else return e=cu(n),e!==null&&iv(e),t.blockedOn=n,!1;e.shift()}return!0}function G_(t,e,n){Wd(t)&&n.delete(e)}function HM(){ty=!1,Ks!==null&&Wd(Ks)&&(Ks=null),Qs!==null&&Wd(Qs)&&(Qs=null),Ys!==null&&Wd(Ys)&&(Ys=null),bc.forEach(G_),Tc.forEach(G_)}function yl(t,e){t.blockedOn===e&&(t.blockedOn=null,ty||(ty=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,HM)))}function kc(t){function e(s){return yl(s,t)}if(0<sd.length){yl(sd[0],t);for(var n=1;n<sd.length;n++){var r=sd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ks!==null&&yl(Ks,t),Qs!==null&&yl(Qs,t),Ys!==null&&yl(Ys,t),bc.forEach(e),Tc.forEach(e),n=0;n<Ds.length;n++)r=Ds[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ds.length&&(n=Ds[0],n.blockedOn===null);)JE(n),n.blockedOn===null&&Ds.shift()}var da=ps.ReactCurrentBatchConfig,Eh=!0;function qM(t,e,n,r){var s=Ie,i=da.transition;da.transition=null;try{Ie=1,ov(t,e,n,r)}finally{Ie=s,da.transition=i}}function GM(t,e,n,r){var s=Ie,i=da.transition;da.transition=null;try{Ie=4,ov(t,e,n,r)}finally{Ie=s,da.transition=i}}function ov(t,e,n,r){if(Eh){var s=ny(t,e,n,r);if(s===null)Ap(t,e,r,Ch,n),q_(t,r);else if(WM(s,t,e,n,r))r.stopPropagation();else if(q_(t,r),e&4&&-1<$M.indexOf(t)){for(;s!==null;){var i=cu(s);if(i!==null&&KE(i),i=ny(t,e,n,r),i===null&&Ap(t,e,r,Ch,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ap(t,e,r,null,n)}}var Ch=null;function ny(t,e,n,r){if(Ch=null,t=nv(r),t=qi(t),t!==null)if(e=ko(t),e===null)t=null;else if(n=e.tag,n===13){if(t=UE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ch=t,null}function ZE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MM()){case rv:return 1;case WE:return 4;case kh:case jM:return 16;case HE:return 536870912;default:return 16}default:return 16}}var Fs=null,av=null,Hd=null;function eC(){if(Hd)return Hd;var t,e=av,n=e.length,r,s="value"in Fs?Fs.value:Fs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Hd=s.slice(t,1<r?1-r:void 0)}function qd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function id(){return!0}function K_(){return!1}function Sn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?id:K_,this.isPropagationStopped=K_,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=id)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=id)},persist:function(){},isPersistent:id}),e}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lv=Sn($a),lu=Ge({},$a,{view:0,detail:0}),KM=Sn(lu),_p,bp,vl,Lf=Ge({},lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vl&&(vl&&t.type==="mousemove"?(_p=t.screenX-vl.screenX,bp=t.screenY-vl.screenY):bp=_p=0,vl=t),_p)},movementY:function(t){return"movementY"in t?t.movementY:bp}}),Q_=Sn(Lf),QM=Ge({},Lf,{dataTransfer:0}),YM=Sn(QM),XM=Ge({},lu,{relatedTarget:0}),Tp=Sn(XM),JM=Ge({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),ZM=Sn(JM),ej=Ge({},$a,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tj=Sn(ej),nj=Ge({},$a,{data:0}),Y_=Sn(nj),rj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ij={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ij[t])?!!e[t]:!1}function cv(){return oj}var aj=Ge({},lu,{key:function(t){if(t.key){var e=rj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cv,charCode:function(t){return t.type==="keypress"?qd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lj=Sn(aj),cj=Ge({},Lf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X_=Sn(cj),uj=Ge({},lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cv}),dj=Sn(uj),hj=Ge({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),fj=Sn(hj),mj=Ge({},Lf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pj=Sn(mj),gj=[9,13,27,32],uv=is&&"CompositionEvent"in window,Kl=null;is&&"documentMode"in document&&(Kl=document.documentMode);var yj=is&&"TextEvent"in window&&!Kl,tC=is&&(!uv||Kl&&8<Kl&&11>=Kl),J_=" ",Z_=!1;function nC(t,e){switch(t){case"keyup":return gj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ko=!1;function vj(t,e){switch(t){case"compositionend":return rC(e);case"keypress":return e.which!==32?null:(Z_=!0,J_);case"textInput":return t=e.data,t===J_&&Z_?null:t;default:return null}}function xj(t,e){if(Ko)return t==="compositionend"||!uv&&nC(t,e)?(t=eC(),Hd=av=Fs=null,Ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tC&&e.locale!=="ko"?null:e.data;default:return null}}var wj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wj[t.type]:e==="textarea"}function sC(t,e,n,r){jE(r),e=Ph(e,"onChange"),0<e.length&&(n=new lv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ql=null,Sc=null;function _j(t){pC(t,0)}function Vf(t){var e=Xo(t);if(PE(e))return t}function bj(t,e){if(t==="change")return e}var iC=!1;if(is){var kp;if(is){var Sp="oninput"in document;if(!Sp){var tb=document.createElement("div");tb.setAttribute("oninput","return;"),Sp=typeof tb.oninput=="function"}kp=Sp}else kp=!1;iC=kp&&(!document.documentMode||9<document.documentMode)}function nb(){Ql&&(Ql.detachEvent("onpropertychange",oC),Sc=Ql=null)}function oC(t){if(t.propertyName==="value"&&Vf(Sc)){var e=[];sC(e,Sc,t,nv(t)),FE(_j,e)}}function Tj(t,e,n){t==="focusin"?(nb(),Ql=e,Sc=n,Ql.attachEvent("onpropertychange",oC)):t==="focusout"&&nb()}function kj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vf(Sc)}function Sj(t,e){if(t==="click")return Vf(e)}function Ej(t,e){if(t==="input"||t==="change")return Vf(e)}function Cj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sr=typeof Object.is=="function"?Object.is:Cj;function Ec(t,e){if(sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Vg.call(e,s)||!sr(t[s],e[s]))return!1}return!0}function rb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sb(t,e){var n=rb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rb(n)}}function aC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lC(){for(var t=window,e=_h();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_h(t.document)}return e}function dv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Pj(t){var e=lC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&aC(n.ownerDocument.documentElement,n)){if(r!==null&&dv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=sb(n,i);var o=sb(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ij=is&&"documentMode"in document&&11>=document.documentMode,Qo=null,ry=null,Yl=null,sy=!1;function ib(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sy||Qo==null||Qo!==_h(r)||(r=Qo,"selectionStart"in r&&dv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yl&&Ec(Yl,r)||(Yl=r,r=Ph(ry,"onSelect"),0<r.length&&(e=new lv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qo)))}function od(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:od("Animation","AnimationEnd"),animationiteration:od("Animation","AnimationIteration"),animationstart:od("Animation","AnimationStart"),transitionend:od("Transition","TransitionEnd")},Ep={},cC={};is&&(cC=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Ff(t){if(Ep[t])return Ep[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cC)return Ep[t]=e[n];return t}var uC=Ff("animationend"),dC=Ff("animationiteration"),hC=Ff("animationstart"),fC=Ff("transitionend"),mC=new Map,ob="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(t,e){mC.set(t,e),To(e,[t])}for(var Cp=0;Cp<ob.length;Cp++){var Pp=ob[Cp],Aj=Pp.toLowerCase(),Rj=Pp[0].toUpperCase()+Pp.slice(1);gi(Aj,"on"+Rj)}gi(uC,"onAnimationEnd");gi(dC,"onAnimationIteration");gi(hC,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(fC,"onTransitionEnd");ba("onMouseEnter",["mouseout","mouseover"]);ba("onMouseLeave",["mouseout","mouseover"]);ba("onPointerEnter",["pointerout","pointerover"]);ba("onPointerLeave",["pointerout","pointerover"]);To("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));To("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));To("onBeforeInput",["compositionend","keypress","textInput","paste"]);To("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));To("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));To("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dl));function ab(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AM(r,e,void 0,t),t.currentTarget=null}function pC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;ab(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;ab(s,a,c),i=l}}}if(Th)throw t=Zg,Th=!1,Zg=null,t}function je(t,e){var n=e[cy];n===void 0&&(n=e[cy]=new Set);var r=t+"__bubble";n.has(r)||(gC(e,t,2,!1),n.add(r))}function Ip(t,e,n){var r=0;e&&(r|=4),gC(n,t,r,e)}var ad="_reactListening"+Math.random().toString(36).slice(2);function Cc(t){if(!t[ad]){t[ad]=!0,TE.forEach(function(n){n!=="selectionchange"&&(Nj.has(n)||Ip(n,!1,t),Ip(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ad]||(e[ad]=!0,Ip("selectionchange",!1,e))}}function gC(t,e,n,r){switch(ZE(e)){case 1:var s=qM;break;case 4:s=GM;break;default:s=ov}n=s.bind(null,e,n,t),s=void 0,!Jg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ap(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=qi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}FE(function(){var c=i,u=nv(n),d=[];e:{var m=mC.get(t);if(m!==void 0){var p=lv,g=t;switch(t){case"keypress":if(qd(n)===0)break e;case"keydown":case"keyup":p=lj;break;case"focusin":g="focus",p=Tp;break;case"focusout":g="blur",p=Tp;break;case"beforeblur":case"afterblur":p=Tp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Q_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=YM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=dj;break;case uC:case dC:case hC:p=ZM;break;case fC:p=fj;break;case"scroll":p=KM;break;case"wheel":p=pj;break;case"copy":case"cut":case"paste":p=tj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=X_}var v=(e&4)!==0,_=!v&&t==="scroll",w=v?m!==null?m+"Capture":null:m;v=[];for(var x=c,b;x!==null;){b=x;var I=b.stateNode;if(b.tag===5&&I!==null&&(b=I,w!==null&&(I=_c(x,w),I!=null&&v.push(Pc(x,I,b)))),_)break;x=x.return}0<v.length&&(m=new p(m,g,null,n,u),d.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Yg&&(g=n.relatedTarget||n.fromElement)&&(qi(g)||g[os]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?qi(g):null,g!==null&&(_=ko(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(v=Q_,I="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=X_,I="onPointerLeave",w="onPointerEnter",x="pointer"),_=p==null?m:Xo(p),b=g==null?m:Xo(g),m=new v(I,x+"leave",p,n,u),m.target=_,m.relatedTarget=b,I=null,qi(u)===c&&(v=new v(w,x+"enter",g,n,u),v.target=b,v.relatedTarget=_,I=v),_=I,p&&g)t:{for(v=p,w=g,x=0,b=v;b;b=Lo(b))x++;for(b=0,I=w;I;I=Lo(I))b++;for(;0<x-b;)v=Lo(v),x--;for(;0<b-x;)w=Lo(w),b--;for(;x--;){if(v===w||w!==null&&v===w.alternate)break t;v=Lo(v),w=Lo(w)}v=null}else v=null;p!==null&&lb(d,m,p,v,!1),g!==null&&_!==null&&lb(d,_,g,v,!0)}}e:{if(m=c?Xo(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var C=bj;else if(eb(m))if(iC)C=Ej;else{C=kj;var N=Tj}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=Sj);if(C&&(C=C(t,c))){sC(d,C,n,u);break e}N&&N(t,m,c),t==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Hg(m,"number",m.value)}switch(N=c?Xo(c):window,t){case"focusin":(eb(N)||N.contentEditable==="true")&&(Qo=N,ry=c,Yl=null);break;case"focusout":Yl=ry=Qo=null;break;case"mousedown":sy=!0;break;case"contextmenu":case"mouseup":case"dragend":sy=!1,ib(d,n,u);break;case"selectionchange":if(Ij)break;case"keydown":case"keyup":ib(d,n,u)}var S;if(uv)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ko?nC(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(tC&&n.locale!=="ko"&&(Ko||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ko&&(S=eC()):(Fs=u,av="value"in Fs?Fs.value:Fs.textContent,Ko=!0)),N=Ph(c,k),0<N.length&&(k=new Y_(k,t,null,n,u),d.push({event:k,listeners:N}),S?k.data=S:(S=rC(n),S!==null&&(k.data=S)))),(S=yj?vj(t,n):xj(t,n))&&(c=Ph(c,"onBeforeInput"),0<c.length&&(u=new Y_("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=S))}pC(d,e)})}function Pc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ph(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_c(t,n),i!=null&&r.unshift(Pc(t,i,s)),i=_c(t,e),i!=null&&r.push(Pc(t,i,s))),t=t.return}return r}function Lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lb(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=_c(n,i),l!=null&&o.unshift(Pc(n,l,a))):s||(l=_c(n,i),l!=null&&o.push(Pc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Dj=/\r\n?/g,Mj=/\u0000|\uFFFD/g;function cb(t){return(typeof t=="string"?t:""+t).replace(Dj,`
`).replace(Mj,"")}function ld(t,e,n){if(e=cb(e),cb(t)!==e&&n)throw Error(B(425))}function Ih(){}var iy=null,oy=null;function ay(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ly=typeof setTimeout=="function"?setTimeout:void 0,jj=typeof clearTimeout=="function"?clearTimeout:void 0,ub=typeof Promise=="function"?Promise:void 0,Oj=typeof queueMicrotask=="function"?queueMicrotask:typeof ub<"u"?function(t){return ub.resolve(null).then(t).catch(Lj)}:ly;function Lj(t){setTimeout(function(){throw t})}function Rp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),kc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);kc(e)}function Xs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function db(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),yr="__reactFiber$"+Wa,Ic="__reactProps$"+Wa,os="__reactContainer$"+Wa,cy="__reactEvents$"+Wa,Vj="__reactListeners$"+Wa,Fj="__reactHandles$"+Wa;function qi(t){var e=t[yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[os]||n[yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=db(t);t!==null;){if(n=t[yr])return n;t=db(t)}return e}t=n,n=t.parentNode}return null}function cu(t){return t=t[yr]||t[os],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Uf(t){return t[Ic]||null}var uy=[],Jo=-1;function yi(t){return{current:t}}function Ve(t){0>Jo||(t.current=uy[Jo],uy[Jo]=null,Jo--)}function Ne(t,e){Jo++,uy[Jo]=t.current,t.current=e}var ci={},$t=yi(ci),ln=yi(!1),ao=ci;function Ta(t,e){var n=t.type.contextTypes;if(!n)return ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function cn(t){return t=t.childContextTypes,t!=null}function Ah(){Ve(ln),Ve($t)}function hb(t,e,n){if($t.current!==ci)throw Error(B(168));Ne($t,e),Ne(ln,n)}function yC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,TM(t)||"Unknown",s));return Ge({},n,r)}function Rh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,ao=$t.current,Ne($t,t),Ne(ln,ln.current),!0}function fb(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=yC(t,e,ao),r.__reactInternalMemoizedMergedChildContext=t,Ve(ln),Ve($t),Ne($t,t)):Ve(ln),Ne(ln,n)}var Br=null,zf=!1,Np=!1;function vC(t){Br===null?Br=[t]:Br.push(t)}function Uj(t){zf=!0,vC(t)}function vi(){if(!Np&&Br!==null){Np=!0;var t=0,e=Ie;try{var n=Br;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Br=null,zf=!1}catch(s){throw Br!==null&&(Br=Br.slice(t+1)),$E(rv,vi),s}finally{Ie=e,Np=!1}}return null}var Zo=[],ea=0,Nh=null,Dh=0,Nn=[],Dn=0,lo=null,qr=1,Gr="";function Oi(t,e){Zo[ea++]=Dh,Zo[ea++]=Nh,Nh=t,Dh=e}function xC(t,e,n){Nn[Dn++]=qr,Nn[Dn++]=Gr,Nn[Dn++]=lo,lo=t;var r=qr;t=Gr;var s=32-tr(r)-1;r&=~(1<<s),n+=1;var i=32-tr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,qr=1<<32-tr(e)+s|n<<s|r,Gr=i+t}else qr=1<<i|n<<s|r,Gr=t}function hv(t){t.return!==null&&(Oi(t,1),xC(t,1,0))}function fv(t){for(;t===Nh;)Nh=Zo[--ea],Zo[ea]=null,Dh=Zo[--ea],Zo[ea]=null;for(;t===lo;)lo=Nn[--Dn],Nn[Dn]=null,Gr=Nn[--Dn],Nn[Dn]=null,qr=Nn[--Dn],Nn[Dn]=null}var wn=null,vn=null,Ue=!1,Jn=null;function wC(t,e){var n=On(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,vn=Xs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=lo!==null?{id:qr,overflow:Gr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=On(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,vn=null,!0):!1;default:return!1}}function dy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hy(t){if(Ue){var e=vn;if(e){var n=e;if(!mb(t,e)){if(dy(t))throw Error(B(418));e=Xs(n.nextSibling);var r=wn;e&&mb(t,e)?wC(r,n):(t.flags=t.flags&-4097|2,Ue=!1,wn=t)}}else{if(dy(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ue=!1,wn=t}}}function pb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function cd(t){if(t!==wn)return!1;if(!Ue)return pb(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ay(t.type,t.memoizedProps)),e&&(e=vn)){if(dy(t))throw _C(),Error(B(418));for(;e;)wC(t,e),e=Xs(e.nextSibling)}if(pb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=Xs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=wn?Xs(t.stateNode.nextSibling):null;return!0}function _C(){for(var t=vn;t;)t=Xs(t.nextSibling)}function ka(){vn=wn=null,Ue=!1}function mv(t){Jn===null?Jn=[t]:Jn.push(t)}var zj=ps.ReactCurrentBatchConfig;function xl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function ud(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gb(t){var e=t._init;return e(t._payload)}function bC(t){function e(w,x){if(t){var b=w.deletions;b===null?(w.deletions=[x],w.flags|=16):b.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function s(w,x){return w=ti(w,x),w.index=0,w.sibling=null,w}function i(w,x,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<x?(w.flags|=2,x):b):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,x,b,I){return x===null||x.tag!==6?(x=Fp(b,w.mode,I),x.return=w,x):(x=s(x,b),x.return=w,x)}function l(w,x,b,I){var C=b.type;return C===Go?u(w,x,b.props.children,I,b.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ps&&gb(C)===x.type)?(I=s(x,b.props),I.ref=xl(w,x,b),I.return=w,I):(I=Zd(b.type,b.key,b.props,null,w.mode,I),I.ref=xl(w,x,b),I.return=w,I)}function c(w,x,b,I){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Up(b,w.mode,I),x.return=w,x):(x=s(x,b.children||[]),x.return=w,x)}function u(w,x,b,I,C){return x===null||x.tag!==7?(x=no(b,w.mode,I,C),x.return=w,x):(x=s(x,b),x.return=w,x)}function d(w,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Fp(""+x,w.mode,b),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zu:return b=Zd(x.type,x.key,x.props,null,w.mode,b),b.ref=xl(w,null,x),b.return=w,b;case qo:return x=Up(x,w.mode,b),x.return=w,x;case Ps:var I=x._init;return d(w,I(x._payload),b)}if(Rl(x)||ml(x))return x=no(x,w.mode,b,null),x.return=w,x;ud(w,x)}return null}function m(w,x,b,I){var C=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:a(w,x,""+b,I);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zu:return b.key===C?l(w,x,b,I):null;case qo:return b.key===C?c(w,x,b,I):null;case Ps:return C=b._init,m(w,x,C(b._payload),I)}if(Rl(b)||ml(b))return C!==null?null:u(w,x,b,I,null);ud(w,b)}return null}function p(w,x,b,I,C){if(typeof I=="string"&&I!==""||typeof I=="number")return w=w.get(b)||null,a(x,w,""+I,C);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Zu:return w=w.get(I.key===null?b:I.key)||null,l(x,w,I,C);case qo:return w=w.get(I.key===null?b:I.key)||null,c(x,w,I,C);case Ps:var N=I._init;return p(w,x,b,N(I._payload),C)}if(Rl(I)||ml(I))return w=w.get(b)||null,u(x,w,I,C,null);ud(x,I)}return null}function g(w,x,b,I){for(var C=null,N=null,S=x,k=x=0,E=null;S!==null&&k<b.length;k++){S.index>k?(E=S,S=null):E=S.sibling;var A=m(w,S,b[k],I);if(A===null){S===null&&(S=E);break}t&&S&&A.alternate===null&&e(w,S),x=i(A,x,k),N===null?C=A:N.sibling=A,N=A,S=E}if(k===b.length)return n(w,S),Ue&&Oi(w,k),C;if(S===null){for(;k<b.length;k++)S=d(w,b[k],I),S!==null&&(x=i(S,x,k),N===null?C=S:N.sibling=S,N=S);return Ue&&Oi(w,k),C}for(S=r(w,S);k<b.length;k++)E=p(S,w,k,b[k],I),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?k:E.key),x=i(E,x,k),N===null?C=E:N.sibling=E,N=E);return t&&S.forEach(function(D){return e(w,D)}),Ue&&Oi(w,k),C}function v(w,x,b,I){var C=ml(b);if(typeof C!="function")throw Error(B(150));if(b=C.call(b),b==null)throw Error(B(151));for(var N=C=null,S=x,k=x=0,E=null,A=b.next();S!==null&&!A.done;k++,A=b.next()){S.index>k?(E=S,S=null):E=S.sibling;var D=m(w,S,A.value,I);if(D===null){S===null&&(S=E);break}t&&S&&D.alternate===null&&e(w,S),x=i(D,x,k),N===null?C=D:N.sibling=D,N=D,S=E}if(A.done)return n(w,S),Ue&&Oi(w,k),C;if(S===null){for(;!A.done;k++,A=b.next())A=d(w,A.value,I),A!==null&&(x=i(A,x,k),N===null?C=A:N.sibling=A,N=A);return Ue&&Oi(w,k),C}for(S=r(w,S);!A.done;k++,A=b.next())A=p(S,w,k,A.value,I),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?k:A.key),x=i(A,x,k),N===null?C=A:N.sibling=A,N=A);return t&&S.forEach(function(j){return e(w,j)}),Ue&&Oi(w,k),C}function _(w,x,b,I){if(typeof b=="object"&&b!==null&&b.type===Go&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Zu:e:{for(var C=b.key,N=x;N!==null;){if(N.key===C){if(C=b.type,C===Go){if(N.tag===7){n(w,N.sibling),x=s(N,b.props.children),x.return=w,w=x;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ps&&gb(C)===N.type){n(w,N.sibling),x=s(N,b.props),x.ref=xl(w,N,b),x.return=w,w=x;break e}n(w,N);break}else e(w,N);N=N.sibling}b.type===Go?(x=no(b.props.children,w.mode,I,b.key),x.return=w,w=x):(I=Zd(b.type,b.key,b.props,null,w.mode,I),I.ref=xl(w,x,b),I.return=w,w=I)}return o(w);case qo:e:{for(N=b.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(w,x.sibling),x=s(x,b.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else e(w,x);x=x.sibling}x=Up(b,w.mode,I),x.return=w,w=x}return o(w);case Ps:return N=b._init,_(w,x,N(b._payload),I)}if(Rl(b))return g(w,x,b,I);if(ml(b))return v(w,x,b,I);ud(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(w,x.sibling),x=s(x,b),x.return=w,w=x):(n(w,x),x=Fp(b,w.mode,I),x.return=w,w=x),o(w)):n(w,x)}return _}var Sa=bC(!0),TC=bC(!1),Mh=yi(null),jh=null,ta=null,pv=null;function gv(){pv=ta=jh=null}function yv(t){var e=Mh.current;Ve(Mh),t._currentValue=e}function fy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ha(t,e){jh=t,pv=ta=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function zn(t){var e=t._currentValue;if(pv!==t)if(t={context:t,memoizedValue:e,next:null},ta===null){if(jh===null)throw Error(B(308));ta=t,jh.dependencies={lanes:0,firstContext:t}}else ta=ta.next=t;return e}var Gi=null;function vv(t){Gi===null?Gi=[t]:Gi.push(t)}function kC(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vv(e)):(n.next=s.next,s.next=n),e.interleaved=n,as(t,r)}function as(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Is=!1;function xv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function es(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Js(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,as(t,n)}return s=r.interleaved,s===null?(e.next=e,vv(r)):(e.next=s.next,s.next=e),r.interleaved=e,as(t,n)}function Gd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sv(t,n)}}function yb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oh(t,e,n,r){var s=t.updateQueue;Is=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var m=a.lane,p=a.eventTime;if((r&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(m=e,p=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(p,d,m);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(p,d,m):g,m==null)break e;d=Ge({},d,m);break e;case 2:Is=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);uo|=o,t.lanes=o,t.memoizedState=d}}function vb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var uu={},kr=yi(uu),Ac=yi(uu),Rc=yi(uu);function Ki(t){if(t===uu)throw Error(B(174));return t}function wv(t,e){switch(Ne(Rc,e),Ne(Ac,t),Ne(kr,uu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gg(e,t)}Ve(kr),Ne(kr,e)}function Ea(){Ve(kr),Ve(Ac),Ve(Rc)}function EC(t){Ki(Rc.current);var e=Ki(kr.current),n=Gg(e,t.type);e!==n&&(Ne(Ac,t),Ne(kr,n))}function _v(t){Ac.current===t&&(Ve(kr),Ve(Ac))}var Be=yi(0);function Lh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dp=[];function bv(){for(var t=0;t<Dp.length;t++)Dp[t]._workInProgressVersionPrimary=null;Dp.length=0}var Kd=ps.ReactCurrentDispatcher,Mp=ps.ReactCurrentBatchConfig,co=0,He=null,dt=null,vt=null,Vh=!1,Xl=!1,Nc=0,Bj=0;function Nt(){throw Error(B(321))}function Tv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function kv(t,e,n,r,s,i){if(co=i,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Kd.current=t===null||t.memoizedState===null?qj:Gj,t=n(r,s),Xl){i=0;do{if(Xl=!1,Nc=0,25<=i)throw Error(B(301));i+=1,vt=dt=null,e.updateQueue=null,Kd.current=Kj,t=n(r,s)}while(Xl)}if(Kd.current=Fh,e=dt!==null&&dt.next!==null,co=0,vt=dt=He=null,Vh=!1,e)throw Error(B(300));return t}function Sv(){var t=Nc!==0;return Nc=0,t}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?He.memoizedState=vt=t:vt=vt.next=t,vt}function Bn(){if(dt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=vt===null?He.memoizedState:vt.next;if(e!==null)vt=e,dt=t;else{if(t===null)throw Error(B(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},vt===null?He.memoizedState=vt=t:vt=vt.next=t}return vt}function Dc(t,e){return typeof e=="function"?e(t):e}function jp(t){var e=Bn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=dt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((co&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,He.lanes|=u,uo|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,sr(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,He.lanes|=i,uo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Op(t){var e=Bn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);sr(i,e.memoizedState)||(an=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function CC(){}function PC(t,e){var n=He,r=Bn(),s=e(),i=!sr(r.memoizedState,s);if(i&&(r.memoizedState=s,an=!0),r=r.queue,Ev(RC.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,Mc(9,AC.bind(null,n,r,s,e),void 0,null),xt===null)throw Error(B(349));co&30||IC(n,e,s)}return s}function IC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AC(t,e,n,r){e.value=n,e.getSnapshot=r,NC(e)&&DC(t)}function RC(t,e,n){return n(function(){NC(e)&&DC(t)})}function NC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch{return!0}}function DC(t){var e=as(t,1);e!==null&&nr(e,t,1,-1)}function xb(t){var e=mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dc,lastRenderedState:t},e.queue=t,t=t.dispatch=Hj.bind(null,He,t),[e.memoizedState,t]}function Mc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function MC(){return Bn().memoizedState}function Qd(t,e,n,r){var s=mr();He.flags|=t,s.memoizedState=Mc(1|e,n,void 0,r===void 0?null:r)}function Bf(t,e,n,r){var s=Bn();r=r===void 0?null:r;var i=void 0;if(dt!==null){var o=dt.memoizedState;if(i=o.destroy,r!==null&&Tv(r,o.deps)){s.memoizedState=Mc(e,n,i,r);return}}He.flags|=t,s.memoizedState=Mc(1|e,n,i,r)}function wb(t,e){return Qd(8390656,8,t,e)}function Ev(t,e){return Bf(2048,8,t,e)}function jC(t,e){return Bf(4,2,t,e)}function OC(t,e){return Bf(4,4,t,e)}function LC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VC(t,e,n){return n=n!=null?n.concat([t]):null,Bf(4,4,LC.bind(null,e,t),n)}function Cv(){}function FC(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function UC(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zC(t,e,n){return co&21?(sr(n,e)||(n=qE(),He.lanes|=n,uo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n)}function $j(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Mp.transition;Mp.transition={};try{t(!1),e()}finally{Ie=n,Mp.transition=r}}function BC(){return Bn().memoizedState}function Wj(t,e,n){var r=ei(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$C(t))WC(e,n);else if(n=kC(t,e,n,r),n!==null){var s=Xt();nr(n,t,r,s),HC(n,e,r)}}function Hj(t,e,n){var r=ei(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($C(t))WC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,sr(a,o)){var l=e.interleaved;l===null?(s.next=s,vv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=kC(t,e,s,r),n!==null&&(s=Xt(),nr(n,t,r,s),HC(n,e,r))}}function $C(t){var e=t.alternate;return t===He||e!==null&&e===He}function WC(t,e){Xl=Vh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function HC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sv(t,n)}}var Fh={readContext:zn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},qj={readContext:zn,useCallback:function(t,e){return mr().memoizedState=[t,e===void 0?null:e],t},useContext:zn,useEffect:wb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qd(4194308,4,LC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qd(4,2,t,e)},useMemo:function(t,e){var n=mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Wj.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=mr();return t={current:t},e.memoizedState=t},useState:xb,useDebugValue:Cv,useDeferredValue:function(t){return mr().memoizedState=t},useTransition:function(){var t=xb(!1),e=t[0];return t=$j.bind(null,t[1]),mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,s=mr();if(Ue){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),xt===null)throw Error(B(349));co&30||IC(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,wb(RC.bind(null,r,i,t),[t]),r.flags|=2048,Mc(9,AC.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mr(),e=xt.identifierPrefix;if(Ue){var n=Gr,r=qr;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Bj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gj={readContext:zn,useCallback:FC,useContext:zn,useEffect:Ev,useImperativeHandle:VC,useInsertionEffect:jC,useLayoutEffect:OC,useMemo:UC,useReducer:jp,useRef:MC,useState:function(){return jp(Dc)},useDebugValue:Cv,useDeferredValue:function(t){var e=Bn();return zC(e,dt.memoizedState,t)},useTransition:function(){var t=jp(Dc)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:CC,useSyncExternalStore:PC,useId:BC,unstable_isNewReconciler:!1},Kj={readContext:zn,useCallback:FC,useContext:zn,useEffect:Ev,useImperativeHandle:VC,useInsertionEffect:jC,useLayoutEffect:OC,useMemo:UC,useReducer:Op,useRef:MC,useState:function(){return Op(Dc)},useDebugValue:Cv,useDeferredValue:function(t){var e=Bn();return dt===null?e.memoizedState=t:zC(e,dt.memoizedState,t)},useTransition:function(){var t=Op(Dc)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:CC,useSyncExternalStore:PC,useId:BC,unstable_isNewReconciler:!1};function Qn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function my(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $f={isMounted:function(t){return(t=t._reactInternals)?ko(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),s=ei(t),i=es(r,s);i.payload=e,n!=null&&(i.callback=n),e=Js(t,i,s),e!==null&&(nr(e,t,s,r),Gd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),s=ei(t),i=es(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Js(t,i,s),e!==null&&(nr(e,t,s,r),Gd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=ei(t),s=es(n,r);s.tag=2,e!=null&&(s.callback=e),e=Js(t,s,r),e!==null&&(nr(e,t,r,n),Gd(e,t,r))}};function _b(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ec(n,r)||!Ec(s,i):!0}function qC(t,e,n){var r=!1,s=ci,i=e.contextType;return typeof i=="object"&&i!==null?i=zn(i):(s=cn(e)?ao:$t.current,r=e.contextTypes,i=(r=r!=null)?Ta(t,s):ci),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$f,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function bb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$f.enqueueReplaceState(e,e.state,null)}function py(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},xv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=zn(i):(i=cn(e)?ao:$t.current,s.context=Ta(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(my(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&$f.enqueueReplaceState(s,s.state,null),Oh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ca(t,e){try{var n="",r=e;do n+=bM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Lp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Qj=typeof WeakMap=="function"?WeakMap:Map;function GC(t,e,n){n=es(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zh||(zh=!0,Ey=r),gy(t,e)},n}function KC(t,e,n){n=es(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gy(t,e),typeof r!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Tb(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Qj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=cO.bind(null,t,e,n),e.then(t,t))}function kb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sb(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=es(-1,1),e.tag=2,Js(n,e,1))),n.lanes|=1),t)}var Yj=ps.ReactCurrentOwner,an=!1;function Yt(t,e,n,r){e.child=t===null?TC(e,null,n,r):Sa(e,t.child,n,r)}function Eb(t,e,n,r,s){n=n.render;var i=e.ref;return ha(e,s),r=kv(t,e,n,r,i,s),n=Sv(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ls(t,e,s)):(Ue&&n&&hv(e),e.flags|=1,Yt(t,e,r,s),e.child)}function Cb(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!jv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,QC(t,e,i,r,s)):(t=Zd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ec,n(o,r)&&t.ref===e.ref)return ls(t,e,s)}return e.flags|=1,t=ti(i,r),t.ref=e.ref,t.return=e,e.child=t}function QC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ec(i,r)&&t.ref===e.ref)if(an=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,ls(t,e,s)}return yy(t,e,n,r,s)}function YC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(ra,gn),gn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(ra,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ne(ra,gn),gn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ne(ra,gn),gn|=r;return Yt(t,e,s,n),e.child}function XC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yy(t,e,n,r,s){var i=cn(n)?ao:$t.current;return i=Ta(e,i),ha(e,s),n=kv(t,e,n,r,i,s),r=Sv(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ls(t,e,s)):(Ue&&r&&hv(e),e.flags|=1,Yt(t,e,n,s),e.child)}function Pb(t,e,n,r,s){if(cn(n)){var i=!0;Rh(e)}else i=!1;if(ha(e,s),e.stateNode===null)Yd(t,e),qC(e,n,r),py(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=zn(c):(c=cn(n)?ao:$t.current,c=Ta(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&bb(e,o,r,c),Is=!1;var m=e.memoizedState;o.state=m,Oh(e,r,o,s),l=e.memoizedState,a!==r||m!==l||ln.current||Is?(typeof u=="function"&&(my(e,n,u,r),l=e.memoizedState),(a=Is||_b(e,n,a,r,m,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,SC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Qn(e.type,a),o.props=c,d=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=zn(l):(l=cn(n)?ao:$t.current,l=Ta(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||m!==l)&&bb(e,o,r,l),Is=!1,m=e.memoizedState,o.state=m,Oh(e,r,o,s);var g=e.memoizedState;a!==d||m!==g||ln.current||Is?(typeof p=="function"&&(my(e,n,p,r),g=e.memoizedState),(c=Is||_b(e,n,c,r,m,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return vy(t,e,n,r,i,s)}function vy(t,e,n,r,s,i){XC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&fb(e,n,!1),ls(t,e,i);r=e.stateNode,Yj.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Sa(e,t.child,null,i),e.child=Sa(e,null,a,i)):Yt(t,e,a,i),e.memoizedState=r.state,s&&fb(e,n,!0),e.child}function JC(t){var e=t.stateNode;e.pendingContext?hb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hb(t,e.context,!1),wv(t,e.containerInfo)}function Ib(t,e,n,r,s){return ka(),mv(s),e.flags|=256,Yt(t,e,n,r),e.child}var xy={dehydrated:null,treeContext:null,retryLane:0};function wy(t){return{baseLanes:t,cachePool:null,transitions:null}}function ZC(t,e,n){var r=e.pendingProps,s=Be.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ne(Be,s&1),t===null)return hy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=qf(o,r,0,null),t=no(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wy(n),e.memoizedState=xy,t):Pv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Xj(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ti(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ti(a,i):(i=no(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?wy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=xy,r}return i=t.child,t=i.sibling,r=ti(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pv(t,e){return e=qf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dd(t,e,n,r){return r!==null&&mv(r),Sa(e,t.child,null,n),t=Pv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xj(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Lp(Error(B(422))),dd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=qf({mode:"visible",children:r.children},s,0,null),i=no(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Sa(e,t.child,null,o),e.child.memoizedState=wy(o),e.memoizedState=xy,i);if(!(e.mode&1))return dd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(B(419)),r=Lp(i,r,void 0),dd(t,e,o,r)}if(a=(o&t.childLanes)!==0,an||a){if(r=xt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,as(t,s),nr(r,t,s,-1))}return Mv(),r=Lp(Error(B(421))),dd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=uO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,vn=Xs(s.nextSibling),wn=e,Ue=!0,Jn=null,t!==null&&(Nn[Dn++]=qr,Nn[Dn++]=Gr,Nn[Dn++]=lo,qr=t.id,Gr=t.overflow,lo=e),e=Pv(e,r.children),e.flags|=4096,e)}function Ab(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fy(t.return,e,n)}function Vp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function eP(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Yt(t,e,r.children,n),r=Be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ab(t,n,e);else if(t.tag===19)Ab(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Lh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Vp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Lh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Vp(e,!0,n,null,i);break;case"together":Vp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ls(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),uo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=ti(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ti(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Jj(t,e,n){switch(e.tag){case 3:JC(e),ka();break;case 5:EC(e);break;case 1:cn(e.type)&&Rh(e);break;case 4:wv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ne(Mh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?ZC(t,e,n):(Ne(Be,Be.current&1),t=ls(t,e,n),t!==null?t.sibling:null);Ne(Be,Be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return eP(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(Be,Be.current),r)break;return null;case 22:case 23:return e.lanes=0,YC(t,e,n)}return ls(t,e,n)}var tP,_y,nP,rP;tP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_y=function(){};nP=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ki(kr.current);var i=null;switch(n){case"input":s=$g(t,s),r=$g(t,r),i=[];break;case"select":s=Ge({},s,{value:void 0}),r=Ge({},r,{value:void 0}),i=[];break;case"textarea":s=qg(t,s),r=qg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ih)}Kg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&je("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};rP=function(t,e,n,r){n!==r&&(e.flags|=4)};function wl(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Zj(t,e,n){var r=e.pendingProps;switch(fv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return cn(e.type)&&Ah(),Dt(e),null;case 3:return r=e.stateNode,Ea(),Ve(ln),Ve($t),bv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jn!==null&&(Iy(Jn),Jn=null))),_y(t,e),Dt(e),null;case 5:_v(e);var s=Ki(Rc.current);if(n=e.type,t!==null&&e.stateNode!=null)nP(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return Dt(e),null}if(t=Ki(kr.current),cd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[yr]=e,r[Ic]=i,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<Dl.length;s++)je(Dl[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":F_(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":z_(r,i),je("invalid",r)}Kg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ld(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ld(r.textContent,a,t),s=["children",""+a]):xc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":ed(r),U_(r,i,!0);break;case"textarea":ed(r),B_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ih)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=RE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yr]=e,t[Ic]=r,tP(t,e,!1,!1),e.stateNode=t;e:{switch(o=Qg(n,r),n){case"dialog":je("cancel",t),je("close",t),s=r;break;case"iframe":case"object":case"embed":je("load",t),s=r;break;case"video":case"audio":for(s=0;s<Dl.length;s++)je(Dl[s],t);s=r;break;case"source":je("error",t),s=r;break;case"img":case"image":case"link":je("error",t),je("load",t),s=r;break;case"details":je("toggle",t),s=r;break;case"input":F_(t,r),s=$g(t,r),je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ge({},r,{value:void 0}),je("invalid",t);break;case"textarea":z_(t,r),s=qg(t,r),je("invalid",t);break;default:s=r}Kg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?ME(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&NE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wc(t,l):typeof l=="number"&&wc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&je("scroll",t):l!=null&&J0(t,i,l,o))}switch(n){case"input":ed(t),U_(t,r,!1);break;case"textarea":ed(t),B_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+li(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?la(t,!!r.multiple,i,!1):r.defaultValue!=null&&la(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ih)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)rP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Ki(Rc.current),Ki(kr.current),cd(e)){if(r=e.stateNode,n=e.memoizedProps,r[yr]=e,(i=r.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:ld(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ld(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yr]=e,e.stateNode=r}return Dt(e),null;case 13:if(Ve(Be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&vn!==null&&e.mode&1&&!(e.flags&128))_C(),ka(),e.flags|=98560,i=!1;else if(i=cd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[yr]=e}else ka(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),i=!1}else Jn!==null&&(Iy(Jn),Jn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?ft===0&&(ft=3):Mv())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return Ea(),_y(t,e),t===null&&Cc(e.stateNode.containerInfo),Dt(e),null;case 10:return yv(e.type._context),Dt(e),null;case 17:return cn(e.type)&&Ah(),Dt(e),null;case 19:if(Ve(Be),i=e.memoizedState,i===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)wl(i,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lh(t),o!==null){for(e.flags|=128,wl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Be,Be.current&1|2),e.child}t=t.sibling}i.tail!==null&&et()>Pa&&(e.flags|=128,r=!0,wl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Lh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ue)return Dt(e),null}else 2*et()-i.renderingStartTime>Pa&&n!==1073741824&&(e.flags|=128,r=!0,wl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=et(),e.sibling=null,n=Be.current,Ne(Be,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return Dv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function eO(t,e){switch(fv(e),e.tag){case 1:return cn(e.type)&&Ah(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ea(),Ve(ln),Ve($t),bv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _v(e),null;case 13:if(Ve(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));ka()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Be),null;case 4:return Ea(),null;case 10:return yv(e.type._context),null;case 22:case 23:return Dv(),null;case 24:return null;default:return null}}var hd=!1,Ft=!1,tO=typeof WeakSet=="function"?WeakSet:Set,K=null;function na(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function by(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var Rb=!1;function nO(t,e){if(iy=Eh,t=lC(),dv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,m=null;t:for(;;){for(var p;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)m=d,d=p;for(;;){if(d===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(oy={focusedElem:t,selectionRange:n},Eh=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,_=g.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:Qn(e.type,v),_);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(I){Ye(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return g=Rb,Rb=!1,g}function Jl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&by(e,n,i)}s=s.next}while(s!==r)}}function Wf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ty(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sP(t){var e=t.alternate;e!==null&&(t.alternate=null,sP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yr],delete e[Ic],delete e[cy],delete e[Vj],delete e[Fj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iP(t){return t.tag===5||t.tag===3||t.tag===4}function Nb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ky(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ih));else if(r!==4&&(t=t.child,t!==null))for(ky(t,e,n),t=t.sibling;t!==null;)ky(t,e,n),t=t.sibling}function Sy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sy(t,e,n),t=t.sibling;t!==null;)Sy(t,e,n),t=t.sibling}var bt=null,Xn=!1;function bs(t,e,n){for(n=n.child;n!==null;)oP(t,e,n),n=n.sibling}function oP(t,e,n){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Of,n)}catch{}switch(n.tag){case 5:Ft||na(n,e);case 6:var r=bt,s=Xn;bt=null,bs(t,e,n),bt=r,Xn=s,bt!==null&&(Xn?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(Xn?(t=bt,n=n.stateNode,t.nodeType===8?Rp(t.parentNode,n):t.nodeType===1&&Rp(t,n),kc(t)):Rp(bt,n.stateNode));break;case 4:r=bt,s=Xn,bt=n.stateNode.containerInfo,Xn=!0,bs(t,e,n),bt=r,Xn=s;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&by(n,e,o),s=s.next}while(s!==r)}bs(t,e,n);break;case 1:if(!Ft&&(na(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ye(n,e,a)}bs(t,e,n);break;case 21:bs(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,bs(t,e,n),Ft=r):bs(t,e,n);break;default:bs(t,e,n)}}function Db(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tO),e.forEach(function(r){var s=dO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bt=a.stateNode,Xn=!1;break e;case 3:bt=a.stateNode.containerInfo,Xn=!0;break e;case 4:bt=a.stateNode.containerInfo,Xn=!0;break e}a=a.return}if(bt===null)throw Error(B(160));oP(i,o,s),bt=null,Xn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ye(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aP(e,t),e=e.sibling}function aP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(e,t),dr(t),r&4){try{Jl(3,t,t.return),Wf(3,t)}catch(v){Ye(t,t.return,v)}try{Jl(5,t,t.return)}catch(v){Ye(t,t.return,v)}}break;case 1:Kn(e,t),dr(t),r&512&&n!==null&&na(n,n.return);break;case 5:if(Kn(e,t),dr(t),r&512&&n!==null&&na(n,n.return),t.flags&32){var s=t.stateNode;try{wc(s,"")}catch(v){Ye(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&IE(s,i),Qg(a,o);var c=Qg(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?ME(s,d):u==="dangerouslySetInnerHTML"?NE(s,d):u==="children"?wc(s,d):J0(s,u,d,c)}switch(a){case"input":Wg(s,i);break;case"textarea":AE(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?la(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?la(s,!!i.multiple,i.defaultValue,!0):la(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ic]=i}catch(v){Ye(t,t.return,v)}}break;case 6:if(Kn(e,t),dr(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){Ye(t,t.return,v)}}break;case 3:if(Kn(e,t),dr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{kc(e.containerInfo)}catch(v){Ye(t,t.return,v)}break;case 4:Kn(e,t),dr(t);break;case 13:Kn(e,t),dr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Rv=et())),r&4&&Db(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(c=Ft)||u,Kn(e,t),Ft=c):Kn(e,t),dr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(K=t,u=t.child;u!==null;){for(d=K=u;K!==null;){switch(m=K,p=m.child,m.tag){case 0:case 11:case 14:case 15:Jl(4,m,m.return);break;case 1:na(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Ye(r,n,v)}}break;case 5:na(m,m.return);break;case 22:if(m.memoizedState!==null){jb(d);continue}}p!==null?(p.return=m,K=p):jb(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=DE("display",o))}catch(v){Ye(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Ye(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Kn(e,t),dr(t),r&4&&Db(t);break;case 21:break;default:Kn(e,t),dr(t)}}function dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iP(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wc(s,""),r.flags&=-33);var i=Nb(t);Sy(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Nb(t);ky(t,a,o);break;default:throw Error(B(161))}}catch(l){Ye(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rO(t,e,n){K=t,lP(t)}function lP(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||hd;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=hd;var c=Ft;if(hd=o,(Ft=l)&&!c)for(K=s;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?Ob(s):l!==null?(l.return=o,K=l):Ob(s);for(;i!==null;)K=i,lP(i),i=i.sibling;K=s,hd=a,Ft=c}Mb(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):Mb(t)}}function Mb(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Wf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Qn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&vb(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&kc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ft||e.flags&512&&Ty(e)}catch(m){Ye(e,e.return,m)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function jb(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Ob(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wf(4,e)}catch(l){Ye(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ye(e,s,l)}}var i=e.return;try{Ty(e)}catch(l){Ye(e,i,l)}break;case 5:var o=e.return;try{Ty(e)}catch(l){Ye(e,o,l)}}}catch(l){Ye(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var sO=Math.ceil,Uh=ps.ReactCurrentDispatcher,Iv=ps.ReactCurrentOwner,Vn=ps.ReactCurrentBatchConfig,we=0,xt=null,at=null,St=0,gn=0,ra=yi(0),ft=0,jc=null,uo=0,Hf=0,Av=0,Zl=null,rn=null,Rv=0,Pa=1/0,zr=null,zh=!1,Ey=null,Zs=null,fd=!1,Us=null,Bh=0,ec=0,Cy=null,Xd=-1,Jd=0;function Xt(){return we&6?et():Xd!==-1?Xd:Xd=et()}function ei(t){return t.mode&1?we&2&&St!==0?St&-St:zj.transition!==null?(Jd===0&&(Jd=qE()),Jd):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:ZE(t.type)),t):1}function nr(t,e,n,r){if(50<ec)throw ec=0,Cy=null,Error(B(185));au(t,n,r),(!(we&2)||t!==xt)&&(t===xt&&(!(we&2)&&(Hf|=n),ft===4&&Ms(t,St)),un(t,r),n===1&&we===0&&!(e.mode&1)&&(Pa=et()+500,zf&&vi()))}function un(t,e){var n=t.callbackNode;zM(t,e);var r=Sh(t,t===xt?St:0);if(r===0)n!==null&&H_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&H_(n),e===1)t.tag===0?Uj(Lb.bind(null,t)):vC(Lb.bind(null,t)),Oj(function(){!(we&6)&&vi()}),n=null;else{switch(GE(r)){case 1:n=rv;break;case 4:n=WE;break;case 16:n=kh;break;case 536870912:n=HE;break;default:n=kh}n=gP(n,cP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cP(t,e){if(Xd=-1,Jd=0,we&6)throw Error(B(327));var n=t.callbackNode;if(fa()&&t.callbackNode!==n)return null;var r=Sh(t,t===xt?St:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$h(t,r);else{e=r;var s=we;we|=2;var i=dP();(xt!==t||St!==e)&&(zr=null,Pa=et()+500,to(t,e));do try{aO();break}catch(a){uP(t,a)}while(!0);gv(),Uh.current=i,we=s,at!==null?e=0:(xt=null,St=0,e=ft)}if(e!==0){if(e===2&&(s=ey(t),s!==0&&(r=s,e=Py(t,s))),e===1)throw n=jc,to(t,0),Ms(t,r),un(t,et()),n;if(e===6)Ms(t,r);else{if(s=t.current.alternate,!(r&30)&&!iO(s)&&(e=$h(t,r),e===2&&(i=ey(t),i!==0&&(r=i,e=Py(t,i))),e===1))throw n=jc,to(t,0),Ms(t,r),un(t,et()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Li(t,rn,zr);break;case 3:if(Ms(t,r),(r&130023424)===r&&(e=Rv+500-et(),10<e)){if(Sh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ly(Li.bind(null,t,rn,zr),e);break}Li(t,rn,zr);break;case 4:if(Ms(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-tr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sO(r/1960))-r,10<r){t.timeoutHandle=ly(Li.bind(null,t,rn,zr),r);break}Li(t,rn,zr);break;case 5:Li(t,rn,zr);break;default:throw Error(B(329))}}}return un(t,et()),t.callbackNode===n?cP.bind(null,t):null}function Py(t,e){var n=Zl;return t.current.memoizedState.isDehydrated&&(to(t,e).flags|=256),t=$h(t,e),t!==2&&(e=rn,rn=n,e!==null&&Iy(e)),t}function Iy(t){rn===null?rn=t:rn.push.apply(rn,t)}function iO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!sr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ms(t,e){for(e&=~Av,e&=~Hf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),r=1<<n;t[n]=-1,e&=~r}}function Lb(t){if(we&6)throw Error(B(327));fa();var e=Sh(t,0);if(!(e&1))return un(t,et()),null;var n=$h(t,e);if(t.tag!==0&&n===2){var r=ey(t);r!==0&&(e=r,n=Py(t,r))}if(n===1)throw n=jc,to(t,0),Ms(t,e),un(t,et()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Li(t,rn,zr),un(t,et()),null}function Nv(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Pa=et()+500,zf&&vi())}}function ho(t){Us!==null&&Us.tag===0&&!(we&6)&&fa();var e=we;we|=1;var n=Vn.transition,r=Ie;try{if(Vn.transition=null,Ie=1,t)return t()}finally{Ie=r,Vn.transition=n,we=e,!(we&6)&&vi()}}function Dv(){gn=ra.current,Ve(ra)}function to(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jj(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(fv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ah();break;case 3:Ea(),Ve(ln),Ve($t),bv();break;case 5:_v(r);break;case 4:Ea();break;case 13:Ve(Be);break;case 19:Ve(Be);break;case 10:yv(r.type._context);break;case 22:case 23:Dv()}n=n.return}if(xt=t,at=t=ti(t.current,null),St=gn=e,ft=0,jc=null,Av=Hf=uo=0,rn=Zl=null,Gi!==null){for(e=0;e<Gi.length;e++)if(n=Gi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Gi=null}return t}function uP(t,e){do{var n=at;try{if(gv(),Kd.current=Fh,Vh){for(var r=He.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Vh=!1}if(co=0,vt=dt=He=null,Xl=!1,Nc=0,Iv.current=null,n===null||n.return===null){ft=1,jc=e,at=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=St,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=kb(o);if(p!==null){p.flags&=-257,Sb(p,o,a,i,e),p.mode&1&&Tb(i,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){Tb(i,c,e),Mv();break e}l=Error(B(426))}}else if(Ue&&a.mode&1){var _=kb(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Sb(_,o,a,i,e),mv(Ca(l,a));break e}}i=l=Ca(l,a),ft!==4&&(ft=2),Zl===null?Zl=[i]:Zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=GC(i,l,e);yb(i,w);break e;case 1:a=l;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Zs===null||!Zs.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=KC(i,a,e);yb(i,I);break e}}i=i.return}while(i!==null)}fP(n)}catch(C){e=C,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function dP(){var t=Uh.current;return Uh.current=Fh,t===null?Fh:t}function Mv(){(ft===0||ft===3||ft===2)&&(ft=4),xt===null||!(uo&268435455)&&!(Hf&268435455)||Ms(xt,St)}function $h(t,e){var n=we;we|=2;var r=dP();(xt!==t||St!==e)&&(zr=null,to(t,e));do try{oO();break}catch(s){uP(t,s)}while(!0);if(gv(),we=n,Uh.current=r,at!==null)throw Error(B(261));return xt=null,St=0,ft}function oO(){for(;at!==null;)hP(at)}function aO(){for(;at!==null&&!NM();)hP(at)}function hP(t){var e=pP(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?fP(t):at=e,Iv.current=null}function fP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eO(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,at=null;return}}else if(n=Zj(n,e,gn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ft===0&&(ft=5)}function Li(t,e,n){var r=Ie,s=Vn.transition;try{Vn.transition=null,Ie=1,lO(t,e,n,r)}finally{Vn.transition=s,Ie=r}return null}function lO(t,e,n,r){do fa();while(Us!==null);if(we&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(BM(t,i),t===xt&&(at=xt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fd||(fd=!0,gP(kh,function(){return fa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Vn.transition,Vn.transition=null;var o=Ie;Ie=1;var a=we;we|=4,Iv.current=null,nO(t,n),aP(n,t),Pj(oy),Eh=!!iy,oy=iy=null,t.current=n,rO(n),DM(),we=a,Ie=o,Vn.transition=i}else t.current=n;if(fd&&(fd=!1,Us=t,Bh=s),i=t.pendingLanes,i===0&&(Zs=null),OM(n.stateNode),un(t,et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(zh)throw zh=!1,t=Ey,Ey=null,t;return Bh&1&&t.tag!==0&&fa(),i=t.pendingLanes,i&1?t===Cy?ec++:(ec=0,Cy=t):ec=0,vi(),null}function fa(){if(Us!==null){var t=GE(Bh),e=Vn.transition,n=Ie;try{if(Vn.transition=null,Ie=16>t?16:t,Us===null)var r=!1;else{if(t=Us,Us=null,Bh=0,we&6)throw Error(B(331));var s=we;for(we|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:Jl(8,u,i)}var d=u.child;if(d!==null)d.return=u,K=d;else for(;K!==null;){u=K;var m=u.sibling,p=u.return;if(sP(u),u===c){K=null;break}if(m!==null){m.return=p,K=m;break}K=p}}}var g=i.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Jl(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,K=w;break e}K=i.return}}var x=t.current;for(K=x;K!==null;){o=K;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,K=b;else e:for(o=x;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wf(9,a)}}catch(C){Ye(a,a.return,C)}if(a===o){K=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,K=I;break e}K=a.return}}if(we=s,vi(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Of,t)}catch{}r=!0}return r}finally{Ie=n,Vn.transition=e}}return!1}function Vb(t,e,n){e=Ca(n,e),e=GC(t,e,1),t=Js(t,e,1),e=Xt(),t!==null&&(au(t,1,e),un(t,e))}function Ye(t,e,n){if(t.tag===3)Vb(t,t,n);else for(;e!==null;){if(e.tag===3){Vb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zs===null||!Zs.has(r))){t=Ca(n,t),t=KC(e,t,1),e=Js(e,t,1),t=Xt(),e!==null&&(au(e,1,t),un(e,t));break}}e=e.return}}function cO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(St&n)===n&&(ft===4||ft===3&&(St&130023424)===St&&500>et()-Rv?to(t,0):Av|=n),un(t,e)}function mP(t,e){e===0&&(t.mode&1?(e=rd,rd<<=1,!(rd&130023424)&&(rd=4194304)):e=1);var n=Xt();t=as(t,e),t!==null&&(au(t,e,n),un(t,n))}function uO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mP(t,n)}function dO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),mP(t,n)}var pP;pP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ln.current)an=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return an=!1,Jj(t,e,n);an=!!(t.flags&131072)}else an=!1,Ue&&e.flags&1048576&&xC(e,Dh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yd(t,e),t=e.pendingProps;var s=Ta(e,$t.current);ha(e,n),s=kv(null,e,r,t,s,n);var i=Sv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(r)?(i=!0,Rh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xv(e),s.updater=$f,e.stateNode=s,s._reactInternals=e,py(e,r,t,n),e=vy(null,e,r,!0,i,n)):(e.tag=0,Ue&&i&&hv(e),Yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=fO(r),t=Qn(r,t),s){case 0:e=yy(null,e,r,t,n);break e;case 1:e=Pb(null,e,r,t,n);break e;case 11:e=Eb(null,e,r,t,n);break e;case 14:e=Cb(null,e,r,Qn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),yy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),Pb(t,e,r,s,n);case 3:e:{if(JC(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,SC(t,e),Oh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ca(Error(B(423)),e),e=Ib(t,e,r,n,s);break e}else if(r!==s){s=Ca(Error(B(424)),e),e=Ib(t,e,r,n,s);break e}else for(vn=Xs(e.stateNode.containerInfo.firstChild),wn=e,Ue=!0,Jn=null,n=TC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ka(),r===s){e=ls(t,e,n);break e}Yt(t,e,r,n)}e=e.child}return e;case 5:return EC(e),t===null&&hy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ay(r,s)?o=null:i!==null&&ay(r,i)&&(e.flags|=32),XC(t,e),Yt(t,e,o,n),e.child;case 6:return t===null&&hy(e),null;case 13:return ZC(t,e,n);case 4:return wv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Sa(e,null,r,n):Yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),Eb(t,e,r,s,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ne(Mh,r._currentValue),r._currentValue=o,i!==null)if(sr(i.value,o)){if(i.children===s.children&&!ln.current){e=ls(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=es(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),fy(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fy(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ha(e,n),s=zn(s),r=r(s),e.flags|=1,Yt(t,e,r,n),e.child;case 14:return r=e.type,s=Qn(r,e.pendingProps),s=Qn(r.type,s),Cb(t,e,r,s,n);case 15:return QC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),Yd(t,e),e.tag=1,cn(r)?(t=!0,Rh(e)):t=!1,ha(e,n),qC(e,r,s),py(e,r,s,n),vy(null,e,r,!0,t,n);case 19:return eP(t,e,n);case 22:return YC(t,e,n)}throw Error(B(156,e.tag))};function gP(t,e){return $E(t,e)}function hO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,e,n,r){return new hO(t,e,n,r)}function jv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fO(t){if(typeof t=="function")return jv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ev)return 11;if(t===tv)return 14}return 2}function ti(t,e){var n=t.alternate;return n===null?(n=On(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")jv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Go:return no(n.children,s,i,e);case Z0:o=8,s|=8;break;case Fg:return t=On(12,n,e,s|2),t.elementType=Fg,t.lanes=i,t;case Ug:return t=On(13,n,e,s),t.elementType=Ug,t.lanes=i,t;case zg:return t=On(19,n,e,s),t.elementType=zg,t.lanes=i,t;case EE:return qf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kE:o=10;break e;case SE:o=9;break e;case ev:o=11;break e;case tv:o=14;break e;case Ps:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=On(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function no(t,e,n,r){return t=On(7,t,r,e),t.lanes=n,t}function qf(t,e,n,r){return t=On(22,t,r,e),t.elementType=EE,t.lanes=n,t.stateNode={isHidden:!1},t}function Fp(t,e,n){return t=On(6,t,null,e),t.lanes=n,t}function Up(t,e,n){return e=On(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wp(0),this.expirationTimes=wp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ov(t,e,n,r,s,i,o,a,l){return t=new mO(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=On(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xv(i),t}function pO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function yP(t){if(!t)return ci;t=t._reactInternals;e:{if(ko(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(cn(n))return yC(t,n,e)}return e}function vP(t,e,n,r,s,i,o,a,l){return t=Ov(n,r,!0,t,s,i,o,a,l),t.context=yP(null),n=t.current,r=Xt(),s=ei(n),i=es(r,s),i.callback=e??null,Js(n,i,s),t.current.lanes=s,au(t,s,r),un(t,r),t}function Gf(t,e,n,r){var s=e.current,i=Xt(),o=ei(s);return n=yP(n),e.context===null?e.context=n:e.pendingContext=n,e=es(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Js(s,e,o),t!==null&&(nr(t,s,o,i),Gd(t,s,o)),o}function Wh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lv(t,e){Fb(t,e),(t=t.alternate)&&Fb(t,e)}function gO(){return null}var xP=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vv(t){this._internalRoot=t}Kf.prototype.render=Vv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Gf(t,e,null,null)};Kf.prototype.unmount=Vv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ho(function(){Gf(null,t,null,null)}),e[os]=null}};function Kf(t){this._internalRoot=t}Kf.prototype.unstable_scheduleHydration=function(t){if(t){var e=YE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ds.length&&e!==0&&e<Ds[n].priority;n++);Ds.splice(n,0,t),n===0&&JE(t)}};function Fv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ub(){}function yO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Wh(o);i.call(c)}}var o=vP(e,r,t,0,null,!1,!1,"",Ub);return t._reactRootContainer=o,t[os]=o.current,Cc(t.nodeType===8?t.parentNode:t),ho(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Wh(l);a.call(c)}}var l=Ov(t,0,!1,null,null,!1,!1,"",Ub);return t._reactRootContainer=l,t[os]=l.current,Cc(t.nodeType===8?t.parentNode:t),ho(function(){Gf(e,l,n,r)}),l}function Yf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Wh(o);a.call(l)}}Gf(e,o,t,s)}else o=yO(n,e,t,s,r);return Wh(o)}KE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Nl(e.pendingLanes);n!==0&&(sv(e,n|1),un(e,et()),!(we&6)&&(Pa=et()+500,vi()))}break;case 13:ho(function(){var r=as(t,1);if(r!==null){var s=Xt();nr(r,t,1,s)}}),Lv(t,1)}};iv=function(t){if(t.tag===13){var e=as(t,134217728);if(e!==null){var n=Xt();nr(e,t,134217728,n)}Lv(t,134217728)}};QE=function(t){if(t.tag===13){var e=ei(t),n=as(t,e);if(n!==null){var r=Xt();nr(n,t,e,r)}Lv(t,e)}};YE=function(){return Ie};XE=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Xg=function(t,e,n){switch(e){case"input":if(Wg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Uf(r);if(!s)throw Error(B(90));PE(r),Wg(r,s)}}}break;case"textarea":AE(t,n);break;case"select":e=n.value,e!=null&&la(t,!!n.multiple,e,!1)}};LE=Nv;VE=ho;var vO={usingClientEntryPoint:!1,Events:[cu,Xo,Uf,jE,OE,Nv]},_l={findFiberByHostInstance:qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xO={bundleType:_l.bundleType,version:_l.version,rendererPackageName:_l.rendererPackageName,rendererConfig:_l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zE(t),t===null?null:t.stateNode},findFiberByHostInstance:_l.findFiberByHostInstance||gO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{Of=md.inject(xO),Tr=md}catch{}}kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vO;kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fv(e))throw Error(B(200));return pO(t,e,null,n)};kn.createRoot=function(t,e){if(!Fv(t))throw Error(B(299));var n=!1,r="",s=xP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ov(t,1,!1,null,null,n,!1,r,s),t[os]=e.current,Cc(t.nodeType===8?t.parentNode:t),new Vv(e)};kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=zE(e),t=t===null?null:t.stateNode,t};kn.flushSync=function(t){return ho(t)};kn.hydrate=function(t,e,n){if(!Qf(e))throw Error(B(200));return Yf(null,t,e,!0,n)};kn.hydrateRoot=function(t,e,n){if(!Fv(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=xP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=vP(e,null,t,1,n??null,s,!1,i,o),t[os]=e.current,Cc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Kf(e)};kn.render=function(t,e,n){if(!Qf(e))throw Error(B(200));return Yf(null,t,e,!1,n)};kn.unmountComponentAtNode=function(t){if(!Qf(t))throw Error(B(40));return t._reactRootContainer?(ho(function(){Yf(null,null,t,!1,function(){t._reactRootContainer=null,t[os]=null})}),!0):!1};kn.unstable_batchedUpdates=Nv;kn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qf(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Yf(t,e,n,!1,r)};kn.version="18.3.1-next-f1338f8080-20240426";function wP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wP)}catch(t){console.error(t)}}wP(),wE.exports=kn;var wO=wE.exports,zb=wO;Lg.createRoot=zb.createRoot,Lg.hydrateRoot=zb.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oc(){return Oc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oc.apply(this,arguments)}var zs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zs||(zs={}));const Bb="popstate";function _O(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=So(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Ay("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Hh(i))}function r(s,i){Xf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return TO(e,n,r,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bO(){return Math.random().toString(36).substr(2,8)}function $b(t,e){return{usr:t.state,key:t.key,idx:e}}function Ay(t,e,n,r){return n===void 0&&(n=null),Oc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?So(e):e,{state:n,key:e&&e.key||r||bO()})}function Hh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function So(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function TO(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=zs.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Oc({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=zs.Pop;let _=u(),w=_==null?null:_-c;c=_,l&&l({action:a,location:v.location,delta:w})}function m(_,w){a=zs.Push;let x=Ay(v.location,_,w);n&&n(x,_),c=u()+1;let b=$b(x,c),I=v.createHref(x);try{o.pushState(b,"",I)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(I)}i&&l&&l({action:a,location:v.location,delta:1})}function p(_,w){a=zs.Replace;let x=Ay(v.location,_,w);n&&n(x,_),c=u();let b=$b(x,c),I=v.createHref(x);o.replaceState(b,"",I),i&&l&&l({action:a,location:v.location,delta:0})}function g(_){let w=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof _=="string"?_:Hh(_);return x=x.replace(/ $/,"%20"),qe(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let v={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Bb,d),l=_,()=>{s.removeEventListener(Bb,d),l=null}},createHref(_){return e(s,_)},createURL:g,encodeLocation(_){let w=g(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:p,go(_){return o.go(_)}};return v}var Wb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Wb||(Wb={}));function kO(t,e,n){return n===void 0&&(n="/"),SO(t,e,n)}function SO(t,e,n,r){let s=typeof e=="string"?So(e):e,i=Ia(s.pathname||"/",n);if(i==null)return null;let o=_P(t);EO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=LO(i);a=jO(o[l],c)}return a}function _P(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ni([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_P(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:DO(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of bP(i.path))s(i,o,l)}),e}function bP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=bP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function EO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:MO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const CO=/^:[\w-]+$/,PO=3,IO=2,AO=1,RO=10,NO=-2,Hb=t=>t==="*";function DO(t,e){let n=t.split("/"),r=n.length;return n.some(Hb)&&(r+=NO),e&&(r+=IO),n.filter(s=>!Hb(s)).reduce((s,i)=>s+(CO.test(i)?PO:i===""?AO:RO),r)}function MO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function jO(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=Ry({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:ni([i,d.pathname]),pathnameBase:BO(ni([i,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(i=ni([i,d.pathnameBase]))}return o}function Ry(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=OO(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:m,isOptional:p}=u;if(m==="*"){let v=a[d]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[d];return p&&!g?c[m]=void 0:c[m]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function OO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Xf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function LO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ia(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const VO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FO=t=>VO.test(t);function UO(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?So(t):t,i;if(n)if(FO(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Xf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=qb(n.substring(1),"/"):i=qb(n,e)}else i=e;return{pathname:i,search:$O(r),hash:WO(s)}}function qb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function zp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Uv(t,e){let n=zO(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=So(t):(s=Oc({},t),qe(!s.pathname||!s.pathname.includes("?"),zp("?","pathname","search",s)),qe(!s.pathname||!s.pathname.includes("#"),zp("#","pathname","hash",s)),qe(!s.search||!s.search.includes("#"),zp("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;s.pathname=m.join("/")}a=d>=0?e[d]:"/"}let l=UO(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ni=t=>t.join("/").replace(/\/\/+/g,"/"),BO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$O=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const TP=["post","put","patch","delete"];new Set(TP);const qO=["get",...TP];new Set(qO);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lc(){return Lc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lc.apply(this,arguments)}const Jf=M.createContext(null),kP=M.createContext(null),gs=M.createContext(null),Zf=M.createContext(null),ys=M.createContext({outlet:null,matches:[],isDataRoute:!1}),SP=M.createContext(null);function GO(t,e){let{relative:n}=e===void 0?{}:e;Ha()||qe(!1);let{basename:r,navigator:s}=M.useContext(gs),{hash:i,pathname:o,search:a}=em(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ni([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Ha(){return M.useContext(Zf)!=null}function xi(){return Ha()||qe(!1),M.useContext(Zf).location}function EP(t){M.useContext(gs).static||M.useLayoutEffect(t)}function CP(){let{isDataRoute:t}=M.useContext(ys);return t?l5():KO()}function KO(){Ha()||qe(!1);let t=M.useContext(Jf),{basename:e,future:n,navigator:r}=M.useContext(gs),{matches:s}=M.useContext(ys),{pathname:i}=xi(),o=JSON.stringify(Uv(s,n.v7_relativeSplatPath)),a=M.useRef(!1);return EP(()=>{a.current=!0}),M.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=zv(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ni([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}const QO=M.createContext(null);function YO(t){let e=M.useContext(ys).outlet;return e&&M.createElement(QO.Provider,{value:t},e)}function em(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(gs),{matches:s}=M.useContext(ys),{pathname:i}=xi(),o=JSON.stringify(Uv(s,r.v7_relativeSplatPath));return M.useMemo(()=>zv(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function XO(t,e){return JO(t,e)}function JO(t,e,n,r){Ha()||qe(!1);let{navigator:s}=M.useContext(gs),{matches:i}=M.useContext(ys),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=xi(),u;if(e){var d;let _=typeof e=="string"?So(e):e;l==="/"||(d=_.pathname)!=null&&d.startsWith(l)||qe(!1),u=_}else u=c;let m=u.pathname||"/",p=m;if(l!=="/"){let _=l.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let g=kO(t,{pathname:p}),v=r5(g&&g.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:ni([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:ni([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&v?M.createElement(Zf.Provider,{value:{location:Lc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:zs.Pop}},v):v}function ZO(){let t=a5(),e=HO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const e5=M.createElement(ZO,null);class t5 extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(ys.Provider,{value:this.props.routeContext},M.createElement(SP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n5(t){let{routeContext:e,match:n,children:r}=t,s=M.useContext(Jf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(ys.Provider,{value:e},r)}function r5(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||qe(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:m,errors:p}=n,g=d.route.loader&&m[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,m)=>{let p,g=!1,v=null,_=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||e5,l&&(c<0&&m===0?(c5("route-fallback"),g=!0,_=null):c===m&&(g=!0,_=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),x=()=>{let b;return p?b=v:g?b=_:d.route.Component?b=M.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,M.createElement(n5,{match:d,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?M.createElement(t5,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var PP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(PP||{}),IP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(IP||{});function s5(t){let e=M.useContext(Jf);return e||qe(!1),e}function i5(t){let e=M.useContext(kP);return e||qe(!1),e}function o5(t){let e=M.useContext(ys);return e||qe(!1),e}function AP(t){let e=o5(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function a5(){var t;let e=M.useContext(SP),n=i5(),r=AP();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function l5(){let{router:t}=s5(PP.UseNavigateStable),e=AP(IP.UseNavigateStable),n=M.useRef(!1);return EP(()=>{n.current=!0}),M.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Lc({fromRouteId:e},i)))},[t,e])}const Gb={};function c5(t,e,n){Gb[t]||(Gb[t]=!0)}function u5(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ny(t){let{to:e,replace:n,state:r,relative:s}=t;Ha()||qe(!1);let{future:i,static:o}=M.useContext(gs),{matches:a}=M.useContext(ys),{pathname:l}=xi(),c=CP(),u=zv(e,Uv(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(u);return M.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function d5(t){return YO(t.context)}function An(t){qe(!1)}function h5(t){let{basename:e="/",children:n=null,location:r,navigationType:s=zs.Pop,navigator:i,static:o=!1,future:a}=t;Ha()&&qe(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:i,static:o,future:Lc({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=So(r));let{pathname:u="/",search:d="",hash:m="",state:p=null,key:g="default"}=r,v=M.useMemo(()=>{let _=Ia(u,l);return _==null?null:{location:{pathname:_,search:d,hash:m,state:p,key:g},navigationType:s}},[l,u,d,m,p,g,s]);return v==null?null:M.createElement(gs.Provider,{value:c},M.createElement(Zf.Provider,{children:n,value:v}))}function f5(t){let{children:e,location:n}=t;return XO(Dy(e),n)}new Promise(()=>{});function Dy(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,s)=>{if(!M.isValidElement(r))return;let i=[...e,s];if(r.type===M.Fragment){n.push.apply(n,Dy(r.props.children,i));return}r.type!==An&&qe(!1),!r.props.index||!r.props.children||qe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Dy(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qh(){return qh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qh.apply(this,arguments)}function RP(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function m5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function p5(t,e){return t.button===0&&(!e||e==="_self")&&!m5(t)}const g5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],y5=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],v5="6";try{window.__reactRouterVersion=v5}catch{}const x5=M.createContext({isTransitioning:!1}),w5="startTransition",Kb=cM[w5];function _5(t){let{basename:e,children:n,future:r,window:s}=t,i=M.useRef();i.current==null&&(i.current=_O({window:s,v5Compat:!0}));let o=i.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=M.useCallback(d=>{c&&Kb?Kb(()=>l(d)):l(d)},[l,c]);return M.useLayoutEffect(()=>o.listen(u),[o,u]),M.useEffect(()=>u5(r),[r]),M.createElement(h5,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const b5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",T5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Es=M.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,m=RP(e,g5),{basename:p}=M.useContext(gs),g,v=!1;if(typeof c=="string"&&T5.test(c)&&(g=c,b5))try{let b=new URL(window.location.href),I=c.startsWith("//")?new URL(b.protocol+c):new URL(c),C=Ia(I.pathname,p);I.origin===b.origin&&C!=null?c=C+I.search+I.hash:v=!0}catch{}let _=GO(c,{relative:s}),w=S5(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function x(b){r&&r(b),b.defaultPrevented||w(b)}return M.createElement("a",qh({},m,{href:g||_,onClick:v||i?r:x,ref:n,target:l}))}),My=M.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,d=RP(e,y5),m=em(l,{relative:d.relative}),p=xi(),g=M.useContext(kP),{navigator:v,basename:_}=M.useContext(gs),w=g!=null&&E5(m)&&c===!0,x=v.encodeLocation?v.encodeLocation(m).pathname:m.pathname,b=p.pathname,I=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;s||(b=b.toLowerCase(),I=I?I.toLowerCase():null,x=x.toLowerCase()),I&&_&&(I=Ia(I,_)||I);const C=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=b===x||!o&&b.startsWith(x)&&b.charAt(C)==="/",S=I!=null&&(I===x||!o&&I.startsWith(x)&&I.charAt(x.length)==="/"),k={isActive:N,isPending:S,isTransitioning:w},E=N?r:void 0,A;typeof i=="function"?A=i(k):A=[i,N?"active":null,S?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let D=typeof a=="function"?a(k):a;return M.createElement(Es,qh({},d,{"aria-current":E,className:A,ref:n,style:D,to:l,viewTransition:c}),typeof u=="function"?u(k):u)});var jy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jy||(jy={}));var Qb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Qb||(Qb={}));function k5(t){let e=M.useContext(Jf);return e||qe(!1),e}function S5(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=CP(),c=xi(),u=em(t,{relative:o});return M.useCallback(d=>{if(p5(d,n)){d.preventDefault();let m=r!==void 0?r:Hh(c)===Hh(u);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}function E5(t,e){e===void 0&&(e={});let n=M.useContext(x5);n==null&&qe(!1);let{basename:r}=k5(jy.useViewTransitionState),s=em(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Ia(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ia(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ry(s.pathname,o)!=null||Ry(s.pathname,i)!=null}let C5={data:""},P5=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||C5},I5=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,A5=/\/\*[^]*?\*\/|  +/g,Yb=/\n+/g,js=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?js(o,i):i+"{"+js(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=js(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=js.p?js.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Lr={},NP=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+NP(t[n]);return e}return t},R5=(t,e,n,r,s)=>{let i=NP(t),o=Lr[i]||(Lr[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!Lr[o]){let l=i!==t?t:(c=>{let u,d,m=[{}];for(;u=I5.exec(c.replace(A5,""));)u[4]?m.shift():u[3]?(d=u[3].replace(Yb," ").trim(),m.unshift(m[0][d]=m[0][d]||{})):m[0][u[1]]=u[2].replace(Yb," ").trim();return m[0]})(t);Lr[o]=js(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Lr.g?Lr.g:null;return n&&(Lr.g=Lr[o]),((l,c,u,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Lr[o],e,r,a),o},N5=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":js(a,""):a===!1?"":a}return r+s+(o??"")},"");function tm(t){let e=this||{},n=t.call?t(e.p):t;return R5(n.unshift?n.raw?N5(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,P5(e.target),e.g,e.o,e.k)}let DP,Oy,Ly;tm.bind({g:1});let cs=tm.bind({k:1});function D5(t,e,n,r){js.p=e,DP=t,Oy=n,Ly=r}function wi(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:Oy&&Oy()},a),n.o=/ *go\d+/.test(l),a.className=tm.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),Ly&&c[0]&&Ly(a),DP(c,a)}return s}}var M5=t=>typeof t=="function",Gh=(t,e)=>M5(t)?t(e):t,j5=(()=>{let t=0;return()=>(++t).toString()})(),MP=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),O5=20,Bv="default",jP=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return jP(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},eh=[],OP={toasts:[],pausedAt:void 0,settings:{toastLimit:O5}},br={},LP=(t,e=Bv)=>{br[e]=jP(br[e]||OP,t),eh.forEach(([n,r])=>{n===e&&r(br[e])})},VP=t=>Object.keys(br).forEach(e=>LP(t,e)),L5=t=>Object.keys(br).find(e=>br[e].toasts.some(n=>n.id===t)),nm=(t=Bv)=>e=>{LP(e,t)},V5={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},F5=(t={},e=Bv)=>{let[n,r]=M.useState(br[e]||OP),s=M.useRef(br[e]);M.useEffect(()=>(s.current!==br[e]&&r(br[e]),eh.push([e,r]),()=>{let o=eh.findIndex(([a])=>a===e);o>-1&&eh.splice(o,1)}),[e]);let i=n.toasts.map(o=>{var a,l,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((a=t[o.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((l=t[o.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||V5[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...n,toasts:i}},U5=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||j5()}),du=t=>(e,n)=>{let r=U5(e,t,n);return nm(r.toasterId||L5(r.id))({type:2,toast:r}),r.id},ht=(t,e)=>du("blank")(t,e);ht.error=du("error");ht.success=du("success");ht.loading=du("loading");ht.custom=du("custom");ht.dismiss=(t,e)=>{let n={type:3,toastId:t};e?nm(e)(n):VP(n)};ht.dismissAll=t=>ht.dismiss(void 0,t);ht.remove=(t,e)=>{let n={type:4,toastId:t};e?nm(e)(n):VP(n)};ht.removeAll=t=>ht.remove(void 0,t);ht.promise=(t,e,n)=>{let r=ht.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Gh(e.success,s):void 0;return i?ht.success(i,{id:r,...n,...n==null?void 0:n.success}):ht.dismiss(r),s}).catch(s=>{let i=e.error?Gh(e.error,s):void 0;i?ht.error(i,{id:r,...n,...n==null?void 0:n.error}):ht.dismiss(r)}),t};var z5=1e3,B5=(t,e="default")=>{let{toasts:n,pausedAt:r}=F5(t,e),s=M.useRef(new Map).current,i=M.useCallback((d,m=z5)=>{if(s.has(d))return;let p=setTimeout(()=>{s.delete(d),o({type:4,toastId:d})},m);s.set(d,p)},[]);M.useEffect(()=>{if(r)return;let d=Date.now(),m=n.map(p=>{if(p.duration===1/0)return;let g=(p.duration||0)+p.pauseDuration-(d-p.createdAt);if(g<0){p.visible&&ht.dismiss(p.id);return}return setTimeout(()=>ht.dismiss(p.id,e),g)});return()=>{m.forEach(p=>p&&clearTimeout(p))}},[n,r,e]);let o=M.useCallback(nm(e),[e]),a=M.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=M.useCallback((d,m)=>{o({type:1,toast:{id:d,height:m}})},[o]),c=M.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),u=M.useCallback((d,m)=>{let{reverseOrder:p=!1,gutter:g=8,defaultPosition:v}=m||{},_=n.filter(b=>(b.position||v)===(d.position||v)&&b.height),w=_.findIndex(b=>b.id===d.id),x=_.filter((b,I)=>I<w&&b.visible).length;return _.filter(b=>b.visible).slice(...p?[x+1]:[0,x]).reduce((b,I)=>b+(I.height||0)+g,0)},[n]);return M.useEffect(()=>{n.forEach(d=>{if(d.dismissed)i(d.id,d.removeDelay);else{let m=s.get(d.id);m&&(clearTimeout(m),s.delete(d.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},$5=cs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,W5=cs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,H5=cs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,q5=wi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${W5} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${H5} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,G5=cs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,K5=wi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${G5} 1s linear infinite;
`,Q5=cs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Y5=cs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,X5=wi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Q5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Y5} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,J5=wi("div")`
  position: absolute;
`,Z5=wi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,eL=cs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,tL=wi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${eL} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,nL=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?M.createElement(tL,null,e):e:n==="blank"?null:M.createElement(Z5,null,M.createElement(K5,{...r}),n!=="loading"&&M.createElement(J5,null,n==="error"?M.createElement(q5,{...r}):M.createElement(X5,{...r})))},rL=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,sL=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,iL="0%{opacity:0;} 100%{opacity:1;}",oL="0%{opacity:1;} 100%{opacity:0;}",aL=wi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,lL=wi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,cL=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=MP()?[iL,oL]:[rL(n),sL(n)];return{animation:e?`${cs(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${cs(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},uL=M.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?cL(t.position||e||"top-center",t.visible):{opacity:0},i=M.createElement(nL,{toast:t}),o=M.createElement(lL,{...t.ariaProps},Gh(t.message,t));return M.createElement(aL,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):M.createElement(M.Fragment,null,i,o))});D5(M.createElement);var dL=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=M.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return M.createElement("div",{ref:i,className:e,style:n},s)},hL=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:MP()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},fL=tm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,pd=16,mL=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=B5(n,i);return M.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:pd,left:pd,right:pd,bottom:pd,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||e,m=c.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),p=hL(d,m);return M.createElement(dL,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?fL:"",style:p},u.type==="custom"?Gh(u.message,u):s?s(u):M.createElement(uL,{toast:u,position:d}))}))},Kt=ht;const pL="modulepreload",gL=function(t){return"/"+t},Xb={},Hi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=gL(l),l in Xb)return;Xb[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":pL,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((m,p)=>{d.addEventListener("load",m),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},yL={},Jb=t=>{let e;const n=new Set,r=(u,d)=>{const m=typeof u=="function"?u(e):u;if(!Object.is(m,e)){const p=e;e=d??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(g=>g(e,p))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(yL?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,s,l);return l},vL=t=>t?Jb(t):Jb;var FP={exports:{}},UP={},zP={exports:{}},BP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aa=M;function xL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wL=typeof Object.is=="function"?Object.is:xL,_L=Aa.useState,bL=Aa.useEffect,TL=Aa.useLayoutEffect,kL=Aa.useDebugValue;function SL(t,e){var n=e(),r=_L({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return TL(function(){s.value=n,s.getSnapshot=e,Bp(s)&&i({inst:s})},[t,n,e]),bL(function(){return Bp(s)&&i({inst:s}),t(function(){Bp(s)&&i({inst:s})})},[t]),kL(n),n}function Bp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wL(t,n)}catch{return!0}}function EL(t,e){return e()}var CL=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?EL:SL;BP.useSyncExternalStore=Aa.useSyncExternalStore!==void 0?Aa.useSyncExternalStore:CL;zP.exports=BP;var PL=zP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm=M,IL=PL;function AL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var RL=typeof Object.is=="function"?Object.is:AL,NL=IL.useSyncExternalStore,DL=rm.useRef,ML=rm.useEffect,jL=rm.useMemo,OL=rm.useDebugValue;UP.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=DL(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=jL(function(){function l(p){if(!c){if(c=!0,u=p,p=r(p),s!==void 0&&o.hasValue){var g=o.value;if(s(g,p))return d=g}return d=p}if(g=d,RL(u,p))return g;var v=r(p);return s!==void 0&&s(g,v)?(u=p,g):(u=p,d=v)}var c=!1,u,d,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,s]);var a=NL(t,i[0],i[1]);return ML(function(){o.hasValue=!0,o.value=a},[a]),OL(a),a};FP.exports=UP;var LL=FP.exports;const VL=lE(LL),$P={},{useDebugValue:FL}=hn,{useSyncExternalStoreWithSelector:UL}=VL;let Zb=!1;const zL=t=>t;function BL(t,e=zL,n){($P?"production":void 0)!=="production"&&n&&!Zb&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Zb=!0);const r=UL(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return FL(r),r}const $L=t=>{($P?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?vL(t):t,n=(r,s)=>BL(e,r,s);return Object.assign(n,e),n},sm=t=>$L,WL={};function HL(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Vc=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Vc(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Vc(r)(n)}}}},qL=(t,e)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,w)=>({...w,..._}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(..._)},r,s);const u=Vc(i.serialize),d=()=>{const _=i.partialize({...r()});let w;const x=u({state:_,version:i.version}).then(b=>c.setItem(i.name,b)).catch(b=>{w=b});if(w)throw w;return x},m=s.setState;s.setState=(_,w)=>{m(_,w),d()};const p=t((..._)=>{n(..._),d()},r,s);let g;const v=()=>{var _;if(!c)return;o=!1,a.forEach(x=>x(r()));const w=((_=i.onRehydrateStorage)==null?void 0:_.call(i,r()))||void 0;return Vc(c.getItem.bind(c))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var b;return g=i.merge(x,(b=r())!=null?b:p),n(g,!0),d()}).then(()=>{w==null||w(g,void 0),o=!0,l.forEach(x=>x(g))}).catch(x=>{w==null||w(void 0,x)})};return s.persist={setOptions:_=>{i={...i,..._},_.getStorage&&(c=_.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},v(),g||p},GL=(t,e)=>(n,r,s)=>{let i={storage:HL(()=>localStorage),partialize:v=>v,version:0,merge:(v,_)=>({..._,...v}),...e},o=!1;const a=new Set,l=new Set;let c=i.storage;if(!c)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,s);const u=()=>{const v=i.partialize({...r()});return c.setItem(i.name,{state:v,version:i.version})},d=s.setState;s.setState=(v,_)=>{d(v,_),u()};const m=t((...v)=>{n(...v),u()},r,s);s.getInitialState=()=>m;let p;const g=()=>{var v,_;if(!c)return;o=!1,a.forEach(x=>{var b;return x((b=r())!=null?b:m)});const w=((_=i.onRehydrateStorage)==null?void 0:_.call(i,(v=r())!=null?v:m))||void 0;return Vc(c.getItem.bind(c))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return[!0,i.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var b;const[I,C]=x;if(p=i.merge(C,(b=r())!=null?b:m),n(p,!0),I)return u()}).then(()=>{w==null||w(p,void 0),p=r(),o=!0,l.forEach(x=>x(p))}).catch(x=>{w==null||w(void 0,x)})};return s.persist={setOptions:v=>{i={...i,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:v=>(a.add(v),()=>{a.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},i.skipHydration||g(),p||m},KL=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((WL?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),qL(t,e)):GL(t,e),im=KL;let gd;const QL=new Uint8Array(16);function YL(){if(!gd&&(gd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gd(QL)}const _t=[];for(let t=0;t<256;++t)_t.push((t+256).toString(16).slice(1));function XL(t,e=0){return _t[t[e+0]]+_t[t[e+1]]+_t[t[e+2]]+_t[t[e+3]]+"-"+_t[t[e+4]]+_t[t[e+5]]+"-"+_t[t[e+6]]+_t[t[e+7]]+"-"+_t[t[e+8]]+_t[t[e+9]]+"-"+_t[t[e+10]]+_t[t[e+11]]+_t[t[e+12]]+_t[t[e+13]]+_t[t[e+14]]+_t[t[e+15]]}const JL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),e1={randomUUID:JL};function Os(t,e,n){if(e1.randomUUID&&!t)return e1.randomUUID();t=t||{};const r=t.random||(t.rng||YL)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,XL(r)}const $p=[{name:"Travail",color:"#3b82f6",icon:"briefcase",order:0,isDefault:!0},{name:"Personnel",color:"#22c55e",icon:"user",order:1,isDefault:!0},{name:"Sant",color:"#ef4444",icon:"heart",order:2,isDefault:!0},{name:"tudes",color:"#8b5cf6",icon:"book",order:3,isDefault:!0},{name:"Finances",color:"#f59e0b",icon:"wallet",order:4,isDefault:!0},{name:"Social",color:"#ec4899",icon:"users",order:5,isDefault:!0},{name:"Loisirs",color:"#06b6d4",icon:"gamepad-2",order:6,isDefault:!0},{name:"Maison",color:"#84cc16",icon:"home",order:7,isDefault:!0}],Vy=100,ZL=1.5,WP={trivial:5,easy:10,medium:25,hard:50,epic:100,legendary:200},eV={none:0,low:0,medium:5,high:10,critical:20},tV=[{days:3,bonus:.1},{days:7,bonus:.25},{days:14,bonus:.5},{days:30,bonus:.75},{days:60,bonus:1},{days:100,bonus:1.5},{days:365,bonus:2}];var t1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},nV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},qP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(m=64)),r.push(n[u],n[d],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new rV;const m=i<<2|a>>4;if(r.push(m),c!==64){const p=a<<4&240|c>>2;if(r.push(p),d!==64){const g=c<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sV=function(t){const e=HP(t);return qP.encodeByteArray(e,!0)},Kh=function(t){return sV(t).replace(/\./g,"")},GP=function(t){try{return qP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=()=>iV().__FIREBASE_DEFAULTS__,aV=()=>{if(typeof process>"u"||typeof t1>"u")return;const t=t1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&GP(t[1]);return e&&JSON.parse(e)},om=()=>{try{return oV()||aV()||lV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},KP=t=>{var e,n;return(n=(e=om())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},cV=t=>{const e=KP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},QP=()=>{var t;return(t=om())===null||t===void 0?void 0:t.config},YP=t=>{var e;return(e=om())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Kh(JSON.stringify(n)),Kh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function fV(){var t;const e=(t=om())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gV(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yV(){return!fV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JP(){try{return typeof indexedDB=="object"}catch{return!1}}function ZP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function vV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xV,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eo.prototype.create)}}class Eo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?wV(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new cr(s,a,r)}}function wV(t,e){return t.replace(_V,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _V=/\{\$([^}]+)}/g;function bV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(n1(i)&&n1(o)){if(!Qh(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function n1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ml(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function jl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TV(t,e){const n=new kV(t,e);return n.subscribe.bind(n)}class kV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Wp),s.error===void 0&&(s.error=Wp),s.complete===void 0&&(s.complete=Wp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=1e3,CV=2,PV=4*60*60*1e3,IV=.5;function r1(t,e=EV,n=CV){const r=e*Math.pow(n,t),s=Math.round(IV*r*(Math.random()-.5)*2);return Math.min(PV,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t&&t._delegate?t._delegate:t}class ir{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NV(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RV(t){return t===Vi?void 0:t}function NV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const MV={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},jV=ye.INFO,OV={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},LV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=OV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class am{constructor(e){this.name=e,this._logLevel=jV,this._logHandler=LV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const VV=(t,e)=>e.some(n=>t instanceof n);let s1,i1;function FV(){return s1||(s1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UV(){return i1||(i1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const e2=new WeakMap,Fy=new WeakMap,t2=new WeakMap,Hp=new WeakMap,$v=new WeakMap;function zV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ri(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&e2.set(n,t)}).catch(()=>{}),$v.set(e,t),e}function BV(t){if(Fy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Fy.set(t,e)}let Uy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||t2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ri(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $V(t){Uy=t(Uy)}function WV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qp(this),e,...n);return t2.set(r,e.sort?e.sort():[e]),ri(r)}:UV().includes(t)?function(...e){return t.apply(qp(this),e),ri(e2.get(this))}:function(...e){return ri(t.apply(qp(this),e))}}function HV(t){return typeof t=="function"?WV(t):(t instanceof IDBTransaction&&BV(t),VV(t,FV())?new Proxy(t,Uy):t)}function ri(t){if(t instanceof IDBRequest)return zV(t);if(Hp.has(t))return Hp.get(t);const e=HV(t);return e!==t&&(Hp.set(t,e),$v.set(e,t)),e}const qp=t=>$v.get(t);function n2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ri(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ri(o.result),l.oldVersion,l.newVersion,ri(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const qV=["get","getKey","getAll","getAllKeys","count"],GV=["put","add","delete","clear"],Gp=new Map;function o1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gp.get(e))return Gp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=GV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qV.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Gp.set(e,i),i}$V(t=>({...t,get:(e,n,r)=>o1(e,n)||t.get(e,n,r),has:(e,n)=>!!o1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function QV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zy="@firebase/app",a1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new am("@firebase/app"),YV="@firebase/app-compat",XV="@firebase/analytics-compat",JV="@firebase/analytics",ZV="@firebase/app-check-compat",e4="@firebase/app-check",t4="@firebase/auth",n4="@firebase/auth-compat",r4="@firebase/database",s4="@firebase/data-connect",i4="@firebase/database-compat",o4="@firebase/functions",a4="@firebase/functions-compat",l4="@firebase/installations",c4="@firebase/installations-compat",u4="@firebase/messaging",d4="@firebase/messaging-compat",h4="@firebase/performance",f4="@firebase/performance-compat",m4="@firebase/remote-config",p4="@firebase/remote-config-compat",g4="@firebase/storage",y4="@firebase/storage-compat",v4="@firebase/firestore",x4="@firebase/vertexai-preview",w4="@firebase/firestore-compat",_4="firebase",b4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="[DEFAULT]",T4={[zy]:"fire-core",[YV]:"fire-core-compat",[JV]:"fire-analytics",[XV]:"fire-analytics-compat",[e4]:"fire-app-check",[ZV]:"fire-app-check-compat",[t4]:"fire-auth",[n4]:"fire-auth-compat",[r4]:"fire-rtdb",[s4]:"fire-data-connect",[i4]:"fire-rtdb-compat",[o4]:"fire-fn",[a4]:"fire-fn-compat",[l4]:"fire-iid",[c4]:"fire-iid-compat",[u4]:"fire-fcm",[d4]:"fire-fcm-compat",[h4]:"fire-perf",[f4]:"fire-perf-compat",[m4]:"fire-rc",[p4]:"fire-rc-compat",[g4]:"fire-gcs",[y4]:"fire-gcs-compat",[v4]:"fire-fst",[w4]:"fire-fst-compat",[x4]:"fire-vertex","fire-js":"fire-js",[_4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Map,k4=new Map,$y=new Map;function l1(t,e){try{t.container.addComponent(e)}catch(n){us.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rr(t){const e=t.name;if($y.has(e))return us.debug(`There were multiple attempts to register component ${e}.`),!1;$y.set(e,t);for(const n of Yh.values())l1(n,t);for(const n of k4.values())l1(n,t);return!0}function fu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},si=new Eo("app","Firebase",S4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=b4;function r2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:By,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw si.create("bad-app-name",{appName:String(s)});if(n||(n=QP()),!n)throw si.create("no-options");const i=Yh.get(s);if(i){if(Qh(n,i.options)&&Qh(r,i.config))return i;throw si.create("duplicate-app",{appName:s})}const o=new DV(s);for(const l of $y.values())o.addComponent(l);const a=new E4(n,r,o);return Yh.set(s,a),a}function s2(t=By){const e=Yh.get(t);if(!e&&t===By&&QP())return r2();if(!e)throw si.create("no-app",{appName:t});return e}function Fn(t,e,n){var r;let s=(r=T4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),us.warn(a.join(" "));return}Rr(new ir(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="firebase-heartbeat-database",P4=1,Fc="firebase-heartbeat-store";let Kp=null;function i2(){return Kp||(Kp=n2(C4,P4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fc)}catch(n){console.warn(n)}}}}).catch(t=>{throw si.create("idb-open",{originalErrorMessage:t.message})})),Kp}async function I4(t){try{const n=(await i2()).transaction(Fc),r=await n.objectStore(Fc).get(o2(t));return await n.done,r}catch(e){if(e instanceof cr)us.warn(e.message);else{const n=si.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});us.warn(n.message)}}}async function c1(t,e){try{const r=(await i2()).transaction(Fc,"readwrite");await r.objectStore(Fc).put(e,o2(t)),await r.done}catch(n){if(n instanceof cr)us.warn(n.message);else{const r=si.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});us.warn(r.message)}}}function o2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=1024,R4=30*24*60*60*1e3;class N4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=u1();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=R4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){us.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=u1(),{heartbeatsToSend:r,unsentEntries:s}=D4(this._heartbeatsCache.heartbeats),i=Kh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return us.warn(n),""}}}function u1(){return new Date().toISOString().substring(0,10)}function D4(t,e=A4){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),d1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),d1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class M4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JP()?ZP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await I4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return c1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return c1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function d1(t){return Kh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t){Rr(new ir("platform-logger",e=>new KV(e),"PRIVATE")),Rr(new ir("heartbeat",e=>new N4(e),"PRIVATE")),Fn(zy,a1,t),Fn(zy,a1,"esm2017"),Fn("fire-js","")}j4("");function Wv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function a2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const O4=a2,l2=new Eo("auth","Firebase",a2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=new am("@firebase/auth");function L4(t,...e){Xh.logLevel<=ye.WARN&&Xh.warn(`Auth (${qa}): ${t}`,...e)}function th(t,...e){Xh.logLevel<=ye.ERROR&&Xh.error(`Auth (${qa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw qv(t,...e)}function rr(t,...e){return qv(t,...e)}function Hv(t,e,n){const r=Object.assign(Object.assign({},O4()),{[e]:n});return new Eo("auth","Firebase",r).create(e,{appName:t.name})}function ts(t){return Hv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function V4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$n(t,"argument-error"),Hv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return l2.create(t,...e)}function se(t,e,...n){if(!t)throw qv(e,...n)}function Kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw th(e),new Error(e)}function ds(t,e){t||Kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function F4(){return h1()==="http:"||h1()==="https:"}function h1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(F4()||XP()||"connection"in navigator)?navigator.onLine:!0}function z4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ds(n>e,"Short delay should be less than long delay!"),this.isMobile=hV()||pV()}get(){return U4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e){ds(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new mu(3e4,6e4);function _i(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bi(t,e,n,r,s={}){return u2(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=hu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return mV()||(c.referrerPolicy="no-referrer"),c2.fetch()(d2(t,t.config.apiHost,n,a),c)})}async function u2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},B4),e);try{const s=new H4(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw yd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw yd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw yd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw yd(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Hv(t,u,c);$n(t,u)}}catch(s){if(s instanceof cr)throw s;$n(t,"network-request-failed",{message:String(s)})}}async function pu(t,e,n,r,s={}){const i=await bi(t,e,n,r,s);return"mfaPendingCredential"in i&&$n(t,"multi-factor-auth-required",{_serverResponse:i}),i}function d2(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Gv(t.config,s):`${t.config.apiScheme}://${s}`}function W4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class H4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rr(this.auth,"network-request-failed")),$4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=rr(t,e,r);return s.customData._tokenResponse=n,s}function f1(t){return t!==void 0&&t.enterprise!==void 0}class q4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return W4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function G4(t,e){return bi(t,"GET","/v2/recaptchaConfig",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K4(t,e){return bi(t,"POST","/v1/accounts:delete",e)}async function h2(t,e){return bi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q4(t,e=!1){const n=rt(t),r=await n.getIdToken(e),s=Kv(r);se(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:tc(Qp(s.auth_time)),issuedAtTime:tc(Qp(s.iat)),expirationTime:tc(Qp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Qp(t){return Number(t)*1e3}function Kv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{const s=GP(n);return s?JSON.parse(s):(th("Failed to decode base64 JWT payload"),null)}catch(s){return th("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function m1(t){const e=Kv(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&Y4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Y4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tc(this.lastLoginAt),this.creationTime=tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Uc(t,h2(n,{idToken:r}));se(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?f2(i.providerUserInfo):[],a=Z4(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Hy(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function J4(t){const e=rt(t);await Jh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Z4(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function f2(t){return t.map(e=>{var{providerId:n}=e,r=Wv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eF(t,e){const n=await u2(t,{},async()=>{const r=hu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=d2(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",c2.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tF(t,e){return bi(t,"POST","/v2/accounts:revokeToken",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):m1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=m1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await eF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ma;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(se(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(se(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ma,this.toJSON())}_performRefresh(){return Kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Wv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Uc(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Q4(this,e)}reload(){return J4(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Jh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(ts(this.auth));const e=await this.getIdToken();return await Uc(this,K4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:b,emailVerified:I,isAnonymous:C,providerData:N,stsTokenManager:S}=n;se(b&&S,e,"internal-error");const k=ma.fromJSON(this.name,S);se(typeof b=="string",e,"internal-error"),Ts(d,e.name),Ts(m,e.name),se(typeof I=="boolean",e,"internal-error"),se(typeof C=="boolean",e,"internal-error"),Ts(p,e.name),Ts(g,e.name),Ts(v,e.name),Ts(_,e.name),Ts(w,e.name),Ts(x,e.name);const E=new Qr({uid:b,auth:e,email:m,emailVerified:I,displayName:d,isAnonymous:C,photoURL:g,phoneNumber:p,tenantId:v,stsTokenManager:k,createdAt:w,lastLoginAt:x});return N&&Array.isArray(N)&&(E.providerData=N.map(A=>Object.assign({},A))),_&&(E._redirectEventId=_),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new ma;s.updateFromServerResponse(n);const i=new Qr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Jh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];se(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?f2(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ma;a.updateFromIdToken(r);const l=new Qr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Hy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new Map;function Yr(t){ds(t instanceof Function,"Expected a class definition");let e=p1.get(t);return e?(ds(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,p1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}m2.type="NONE";const g1=m2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t,e,n){return`firebase:${t}:${e}:${n}`}class pa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=nh(this.userKey,s.apiKey,i),this.fullPersistenceKey=nh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new pa(Yr(g1),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Yr(g1);const o=nh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=Qr._fromJSON(e,u);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new pa(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new pa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(v2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w2(e))return"Blackberry";if(_2(e))return"Webos";if(g2(e))return"Safari";if((e.includes("chrome/")||y2(e))&&!e.includes("edge/"))return"Chrome";if(x2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function p2(t=Wt()){return/firefox\//i.test(t)}function g2(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function y2(t=Wt()){return/crios\//i.test(t)}function v2(t=Wt()){return/iemobile/i.test(t)}function x2(t=Wt()){return/android/i.test(t)}function w2(t=Wt()){return/blackberry/i.test(t)}function _2(t=Wt()){return/webos/i.test(t)}function Qv(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nF(t=Wt()){var e;return Qv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rF(){return gV()&&document.documentMode===10}function b2(t=Wt()){return Qv(t)||x2(t)||_2(t)||w2(t)||/windows phone/i.test(t)||v2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t,e=[]){let n;switch(t){case"Browser":n=y1(Wt());break;case"Worker":n=`${y1(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(t,e={}){return bi(t,"GET","/v2/passwordPolicy",_i(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=6;class aF{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:oF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v1(this),this.idTokenSubscription=new v1(this),this.beforeStateQueue=new sF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await pa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await h2(this,{idToken:e}),r=await Qr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=z4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(ts(this));const n=e?rt(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iF(this),n=new aF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Eo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await tF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yr(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await pa.create(this,[Yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=T2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&L4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ti(t){return rt(t)}class v1{constructor(e){this.auth=e,this.observer=null,this.addObserver=TV(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cF(t){lm=t}function k2(t){return lm.loadJS(t)}function uF(){return lm.recaptchaEnterpriseScript}function dF(){return lm.gapiScript}function hF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const fF="recaptcha-enterprise",mF="NO_RECAPTCHA";class pF{constructor(e){this.type=fF,this.auth=Ti(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{G4(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new q4(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;f1(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(mF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&f1(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=uF();l.length!==0&&(l+=a),k2(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function x1(t,e,n,r=!1){const s=new pF(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function qy(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await x1(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await x1(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(t,e){const n=fu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Qh(i,e??{}))return s;$n(s,"already-initialized")}return n.initialize({options:e})}function yF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vF(t,e,n){const r=Ti(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=S2(e),{host:o,port:a}=xF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),wF()}function S2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xF(t){const e=S2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:w1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:w1(o)}}}function w1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,n){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}}async function _F(t,e){return bi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF(t,e){return pu(t,"POST","/v1/accounts:signInWithPassword",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TF(t,e){return pu(t,"POST","/v1/accounts:signInWithEmailLink",_i(t,e))}async function kF(t,e){return pu(t,"POST","/v1/accounts:signInWithEmailLink",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Yv{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new zc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new zc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qy(e,n,"signInWithPassword",bF);case"emailLink":return TF(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qy(e,r,"signUpPassword",_F);case"emailLink":return kF(e,{idToken:n,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(t,e){return pu(t,"POST","/v1/accounts:signInWithIdp",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="http://localhost";class fo extends Yv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Wv(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new fo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ga(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ga(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ga(e,n)}buildRequest(){const e={requestUri:SF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CF(t){const e=Ml(jl(t)).link,n=e?Ml(jl(e)).deep_link_id:null,r=Ml(jl(t)).deep_link_id;return(r?Ml(jl(r)).link:null)||r||n||e||t}class Xv{constructor(e){var n,r,s,i,o,a;const l=Ml(jl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=EF((s=l.mode)!==null&&s!==void 0?s:null);se(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=CF(e);try{return new Xv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.providerId=Ga.PROVIDER_ID}static credential(e,n){return zc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Xv.parseLink(n);return se(r,"argument-error"),zc._fromEmailAndCode(e,r.code,r.tenantId)}}Ga.PROVIDER_ID="password";Ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends Jv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends gu{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fo._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Wr.credential(n,r)}catch{return null}}}Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends gu{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.GITHUB_SIGN_IN_METHOD="github.com";Hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends gu{constructor(){super("twitter.com")}static credential(e,n){return fo._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vs.credential(n,r)}catch{return null}}}Vs.TWITTER_SIGN_IN_METHOD="twitter.com";Vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PF(t,e){return pu(t,"POST","/v1/accounts:signUp",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Qr._fromIdTokenResponse(e,r,s),o=_1(r);return new mo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=_1(r);return new mo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function _1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends cr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Zh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Zh(e,n,r,s)}}function E2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Zh._fromErrorAndOperation(t,i,e,r):i})}async function IF(t,e,n=!1){const r=await Uc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AF(t,e,n=!1){const{auth:r}=t;if(Zn(r.app))return Promise.reject(ts(r));const s="reauthenticate";try{const i=await Uc(t,E2(r,s,e,t),n);se(i.idToken,r,"internal-error");const o=Kv(i.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),mo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(t,e,n=!1){if(Zn(t.app))return Promise.reject(ts(t));const r="signIn",s=await E2(t,r,e),i=await mo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function RF(t,e){return C2(Ti(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(t){const e=Ti(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NF(t,e,n){if(Zn(t.app))return Promise.reject(ts(t));const r=Ti(t),o=await qy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PF).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&P2(t),l}),a=await mo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function DF(t,e,n){return Zn(t.app)?Promise.reject(ts(t)):RF(rt(t),Ga.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&P2(t),r})}function MF(t,e,n,r){return rt(t).onIdTokenChanged(e,n,r)}function jF(t,e,n){return rt(t).beforeAuthStateChanged(e,n)}function OF(t,e,n,r){return rt(t).onAuthStateChanged(e,n,r)}function LF(t){return rt(t).signOut()}const ef="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ef,"1"),this.storage.removeItem(ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=1e3,FF=10;class A2 extends I2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=b2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);rF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FF):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},VF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}A2.type="LOCAL";const UF=A2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2 extends I2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}R2.type="SESSION";const N2=R2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new cm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await zF(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Zv("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const m=d;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function $F(t){Sr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function WF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qF(){return D2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="firebaseLocalStorageDb",GF=1,tf="firebaseLocalStorage",j2="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function um(t,e){return t.transaction([tf],e?"readwrite":"readonly").objectStore(tf)}function KF(){const t=indexedDB.deleteDatabase(M2);return new yu(t).toPromise()}function Gy(){const t=indexedDB.open(M2,GF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(tf,{keyPath:j2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(tf)?e(r):(r.close(),await KF(),e(await Gy()))})})}async function b1(t,e,n){const r=um(t,!0).put({[j2]:e,value:n});return new yu(r).toPromise()}async function QF(t,e){const n=um(t,!1).get(e),r=await new yu(n).toPromise();return r===void 0?null:r.value}function T1(t,e){const n=um(t,!0).delete(e);return new yu(n).toPromise()}const YF=800,XF=3;class O2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>XF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return D2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cm._getInstance(qF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await WF(),!this.activeServiceWorker)return;this.sender=new BF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gy();return await b1(e,ef,"1"),await T1(e,ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>b1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>T1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=um(s,!1).getAll();return new yu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}O2.type="LOCAL";const JF=O2;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t,e){return e?Yr(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex extends Yv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ga(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ga(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ZF(t){return C2(t.auth,new ex(t),t.bypassAuthState)}function e3(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),AF(n,new ex(t),t.bypassAuthState)}async function t3(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),IF(n,new ex(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZF;case"linkViaPopup":case"linkViaRedirect":return t3;case"reauthViaPopup":case"reauthViaRedirect":return e3;default:$n(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=new mu(2e3,1e4);async function k1(t,e,n){if(Zn(t.app))return Promise.reject(rr(t,"operation-not-supported-in-this-environment"));const r=Ti(t);V4(t,e,Jv);const s=L2(r,n);return new Qi(r,"signInViaPopup",e,s).executeNotNull()}class Qi extends V2{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Qi.currentPopupAction&&Qi.currentPopupAction.cancel(),Qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=Zv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,n3.get())};e()}}Qi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3="pendingRedirect",rh=new Map;class s3 extends V2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=rh.get(this.auth._key());if(!e){try{const r=await i3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rh.set(this.auth._key(),e)}return this.bypassAuthState||rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function i3(t,e){const n=l3(e),r=a3(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function o3(t,e){rh.set(t._key(),e)}function a3(t){return Yr(t._redirectPersistence)}function l3(t){return nh(r3,t.config.apiKey,t.name)}async function c3(t,e,n=!1){if(Zn(t.app))return Promise.reject(ts(t));const r=Ti(t),s=L2(r,e),o=await new s3(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=10*60*1e3;class d3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!F2(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(rr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u3&&this.cachedEventUids.clear(),this.cachedEventUids.has(S1(e))}saveEventToCache(e){this.cachedEventUids.add(S1(e)),this.lastProcessedEventTime=Date.now()}}function S1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function F2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function h3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return F2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f3(t,e={}){return bi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p3=/^https?/;async function g3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await f3(t);for(const n of e)try{if(y3(n))return}catch{}$n(t,"unauthorized-domain")}function y3(t){const e=Wy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!p3.test(n))return!1;if(m3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=new mu(3e4,6e4);function E1(){const t=Sr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function x3(t){return new Promise((e,n)=>{var r,s,i;function o(){E1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E1(),n(rr(t,"network-request-failed"))},timeout:v3.get()})}if(!((s=(r=Sr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Sr().gapi)===null||i===void 0)&&i.load)o();else{const a=hF("iframefcb");return Sr()[a]=()=>{gapi.load?o():n(rr(t,"network-request-failed"))},k2(`${dF()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw sh=null,e})}let sh=null;function w3(t){return sh=sh||x3(t),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=new mu(5e3,15e3),b3="__/auth/iframe",T3="emulator/auth/iframe",k3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E3(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gv(e,T3):`https://${t.config.authDomain}/${b3}`,r={apiKey:e.apiKey,appName:t.name,v:qa},s=S3.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${hu(r).slice(1)}`}async function C3(t){const e=await w3(t),n=Sr().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:E3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:k3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=rr(t,"network-request-failed"),a=Sr().setTimeout(()=>{i(o)},_3.get());function l(){Sr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I3=500,A3=600,R3="_blank",N3="http://localhost";class C1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D3(t,e,n,r=I3,s=A3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},P3),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Wt().toLowerCase();n&&(a=y2(c)?R3:n),p2(c)&&(e=e||N3,l.scrollbars="yes");const u=Object.entries(l).reduce((m,[p,g])=>`${m}${p}=${g},`,"");if(nF(c)&&a!=="_self")return M3(e||"",a),new C1(null);const d=window.open(e||"",a,u);se(d,t,"popup-blocked");try{d.focus()}catch{}return new C1(d)}function M3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3="__/auth/handler",O3="emulator/auth/handler",L3=encodeURIComponent("fac");async function P1(t,e,n,r,s,i){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qa,eventId:s};if(e instanceof Jv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof gu){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${L3}=${encodeURIComponent(l)}`:"";return`${V3(t)}?${hu(a).slice(1)}${c}`}function V3({config:t}){return t.emulator?Gv(t,O3):`https://${t.authDomain}/${j3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="webStorageSupport";class F3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N2,this._completeRedirectFn=c3,this._overrideRedirectResult=o3}async _openPopup(e,n,r,s){var i;ds((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await P1(e,n,r,Wy(),s);return D3(e,o,Zv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await P1(e,n,r,Wy(),s);return $F(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ds(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await C3(e),r=new d3(e);return n.register("authEvent",s=>(se(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yp,{type:Yp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Yp];o!==void 0&&n(!!o),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=g3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return b2()||g2()||Qv()}}const U3=F3;var I1="@firebase/auth",A1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $3(t){Rr(new ir("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:T2(t)},c=new lF(r,s,i,l);return yF(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rr(new ir("auth-internal",e=>{const n=Ti(e.getProvider("auth").getImmediate());return(r=>new z3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fn(I1,A1,B3(t)),Fn(I1,A1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=5*60,H3=YP("authIdTokenMaxAge")||W3;let R1=null;const q3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>H3)return;const s=n==null?void 0:n.token;R1!==s&&(R1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function G3(t=s2()){const e=fu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gF(t,{popupRedirectResolver:U3,persistence:[JF,UF,N2]}),r=YP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=q3(i.toString());jF(n,o,()=>o(n.currentUser)),MF(n,a=>o(a))}}const s=KP("auth");return s&&vF(n,`http://${s}`),n}function K3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=rr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",K3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$3("Browser");var N1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ro,U2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,k){function E(){}E.prototype=k.prototype,S.D=k.prototype,S.prototype=new E,S.prototype.constructor=S,S.C=function(A,D,j){for(var R=Array(arguments.length-2),z=2;z<arguments.length;z++)R[z-2]=arguments[z];return k.prototype[D].apply(A,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,k,E){E||(E=0);var A=Array(16);if(typeof k=="string")for(var D=0;16>D;++D)A[D]=k.charCodeAt(E++)|k.charCodeAt(E++)<<8|k.charCodeAt(E++)<<16|k.charCodeAt(E++)<<24;else for(D=0;16>D;++D)A[D]=k[E++]|k[E++]<<8|k[E++]<<16|k[E++]<<24;k=S.g[0],E=S.g[1],D=S.g[2];var j=S.g[3],R=k+(j^E&(D^j))+A[0]+3614090360&4294967295;k=E+(R<<7&4294967295|R>>>25),R=j+(D^k&(E^D))+A[1]+3905402710&4294967295,j=k+(R<<12&4294967295|R>>>20),R=D+(E^j&(k^E))+A[2]+606105819&4294967295,D=j+(R<<17&4294967295|R>>>15),R=E+(k^D&(j^k))+A[3]+3250441966&4294967295,E=D+(R<<22&4294967295|R>>>10),R=k+(j^E&(D^j))+A[4]+4118548399&4294967295,k=E+(R<<7&4294967295|R>>>25),R=j+(D^k&(E^D))+A[5]+1200080426&4294967295,j=k+(R<<12&4294967295|R>>>20),R=D+(E^j&(k^E))+A[6]+2821735955&4294967295,D=j+(R<<17&4294967295|R>>>15),R=E+(k^D&(j^k))+A[7]+4249261313&4294967295,E=D+(R<<22&4294967295|R>>>10),R=k+(j^E&(D^j))+A[8]+1770035416&4294967295,k=E+(R<<7&4294967295|R>>>25),R=j+(D^k&(E^D))+A[9]+2336552879&4294967295,j=k+(R<<12&4294967295|R>>>20),R=D+(E^j&(k^E))+A[10]+4294925233&4294967295,D=j+(R<<17&4294967295|R>>>15),R=E+(k^D&(j^k))+A[11]+2304563134&4294967295,E=D+(R<<22&4294967295|R>>>10),R=k+(j^E&(D^j))+A[12]+1804603682&4294967295,k=E+(R<<7&4294967295|R>>>25),R=j+(D^k&(E^D))+A[13]+4254626195&4294967295,j=k+(R<<12&4294967295|R>>>20),R=D+(E^j&(k^E))+A[14]+2792965006&4294967295,D=j+(R<<17&4294967295|R>>>15),R=E+(k^D&(j^k))+A[15]+1236535329&4294967295,E=D+(R<<22&4294967295|R>>>10),R=k+(D^j&(E^D))+A[1]+4129170786&4294967295,k=E+(R<<5&4294967295|R>>>27),R=j+(E^D&(k^E))+A[6]+3225465664&4294967295,j=k+(R<<9&4294967295|R>>>23),R=D+(k^E&(j^k))+A[11]+643717713&4294967295,D=j+(R<<14&4294967295|R>>>18),R=E+(j^k&(D^j))+A[0]+3921069994&4294967295,E=D+(R<<20&4294967295|R>>>12),R=k+(D^j&(E^D))+A[5]+3593408605&4294967295,k=E+(R<<5&4294967295|R>>>27),R=j+(E^D&(k^E))+A[10]+38016083&4294967295,j=k+(R<<9&4294967295|R>>>23),R=D+(k^E&(j^k))+A[15]+3634488961&4294967295,D=j+(R<<14&4294967295|R>>>18),R=E+(j^k&(D^j))+A[4]+3889429448&4294967295,E=D+(R<<20&4294967295|R>>>12),R=k+(D^j&(E^D))+A[9]+568446438&4294967295,k=E+(R<<5&4294967295|R>>>27),R=j+(E^D&(k^E))+A[14]+3275163606&4294967295,j=k+(R<<9&4294967295|R>>>23),R=D+(k^E&(j^k))+A[3]+4107603335&4294967295,D=j+(R<<14&4294967295|R>>>18),R=E+(j^k&(D^j))+A[8]+1163531501&4294967295,E=D+(R<<20&4294967295|R>>>12),R=k+(D^j&(E^D))+A[13]+2850285829&4294967295,k=E+(R<<5&4294967295|R>>>27),R=j+(E^D&(k^E))+A[2]+4243563512&4294967295,j=k+(R<<9&4294967295|R>>>23),R=D+(k^E&(j^k))+A[7]+1735328473&4294967295,D=j+(R<<14&4294967295|R>>>18),R=E+(j^k&(D^j))+A[12]+2368359562&4294967295,E=D+(R<<20&4294967295|R>>>12),R=k+(E^D^j)+A[5]+4294588738&4294967295,k=E+(R<<4&4294967295|R>>>28),R=j+(k^E^D)+A[8]+2272392833&4294967295,j=k+(R<<11&4294967295|R>>>21),R=D+(j^k^E)+A[11]+1839030562&4294967295,D=j+(R<<16&4294967295|R>>>16),R=E+(D^j^k)+A[14]+4259657740&4294967295,E=D+(R<<23&4294967295|R>>>9),R=k+(E^D^j)+A[1]+2763975236&4294967295,k=E+(R<<4&4294967295|R>>>28),R=j+(k^E^D)+A[4]+1272893353&4294967295,j=k+(R<<11&4294967295|R>>>21),R=D+(j^k^E)+A[7]+4139469664&4294967295,D=j+(R<<16&4294967295|R>>>16),R=E+(D^j^k)+A[10]+3200236656&4294967295,E=D+(R<<23&4294967295|R>>>9),R=k+(E^D^j)+A[13]+681279174&4294967295,k=E+(R<<4&4294967295|R>>>28),R=j+(k^E^D)+A[0]+3936430074&4294967295,j=k+(R<<11&4294967295|R>>>21),R=D+(j^k^E)+A[3]+3572445317&4294967295,D=j+(R<<16&4294967295|R>>>16),R=E+(D^j^k)+A[6]+76029189&4294967295,E=D+(R<<23&4294967295|R>>>9),R=k+(E^D^j)+A[9]+3654602809&4294967295,k=E+(R<<4&4294967295|R>>>28),R=j+(k^E^D)+A[12]+3873151461&4294967295,j=k+(R<<11&4294967295|R>>>21),R=D+(j^k^E)+A[15]+530742520&4294967295,D=j+(R<<16&4294967295|R>>>16),R=E+(D^j^k)+A[2]+3299628645&4294967295,E=D+(R<<23&4294967295|R>>>9),R=k+(D^(E|~j))+A[0]+4096336452&4294967295,k=E+(R<<6&4294967295|R>>>26),R=j+(E^(k|~D))+A[7]+1126891415&4294967295,j=k+(R<<10&4294967295|R>>>22),R=D+(k^(j|~E))+A[14]+2878612391&4294967295,D=j+(R<<15&4294967295|R>>>17),R=E+(j^(D|~k))+A[5]+4237533241&4294967295,E=D+(R<<21&4294967295|R>>>11),R=k+(D^(E|~j))+A[12]+1700485571&4294967295,k=E+(R<<6&4294967295|R>>>26),R=j+(E^(k|~D))+A[3]+2399980690&4294967295,j=k+(R<<10&4294967295|R>>>22),R=D+(k^(j|~E))+A[10]+4293915773&4294967295,D=j+(R<<15&4294967295|R>>>17),R=E+(j^(D|~k))+A[1]+2240044497&4294967295,E=D+(R<<21&4294967295|R>>>11),R=k+(D^(E|~j))+A[8]+1873313359&4294967295,k=E+(R<<6&4294967295|R>>>26),R=j+(E^(k|~D))+A[15]+4264355552&4294967295,j=k+(R<<10&4294967295|R>>>22),R=D+(k^(j|~E))+A[6]+2734768916&4294967295,D=j+(R<<15&4294967295|R>>>17),R=E+(j^(D|~k))+A[13]+1309151649&4294967295,E=D+(R<<21&4294967295|R>>>11),R=k+(D^(E|~j))+A[4]+4149444226&4294967295,k=E+(R<<6&4294967295|R>>>26),R=j+(E^(k|~D))+A[11]+3174756917&4294967295,j=k+(R<<10&4294967295|R>>>22),R=D+(k^(j|~E))+A[2]+718787259&4294967295,D=j+(R<<15&4294967295|R>>>17),R=E+(j^(D|~k))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+k&4294967295,S.g[1]=S.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+j&4294967295}r.prototype.u=function(S,k){k===void 0&&(k=S.length);for(var E=k-this.blockSize,A=this.B,D=this.h,j=0;j<k;){if(D==0)for(;j<=E;)s(this,S,j),j+=this.blockSize;if(typeof S=="string"){for(;j<k;)if(A[D++]=S.charCodeAt(j++),D==this.blockSize){s(this,A),D=0;break}}else for(;j<k;)if(A[D++]=S[j++],D==this.blockSize){s(this,A),D=0;break}}this.h=D,this.o+=k},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var k=1;k<S.length-8;++k)S[k]=0;var E=8*this.o;for(k=S.length-8;k<S.length;++k)S[k]=E&255,E/=256;for(this.u(S),S=Array(16),k=E=0;4>k;++k)for(var A=0;32>A;A+=8)S[E++]=this.g[k]>>>A&255;return S};function i(S,k){var E=a;return Object.prototype.hasOwnProperty.call(E,S)?E[S]:E[S]=k(S)}function o(S,k){this.h=k;for(var E=[],A=!0,D=S.length-1;0<=D;D--){var j=S[D]|0;A&&j==k||(E[D]=j,A=!1)}this.g=E}var a={};function l(S){return-128<=S&&128>S?i(S,function(k){return new o([k|0],0>k?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return _(c(-S));for(var k=[],E=1,A=0;S>=E;A++)k[A]=S/E|0,E*=4294967296;return new o(k,0)}function u(S,k){if(S.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(S.charAt(0)=="-")return _(u(S.substring(1),k));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(k,8)),A=d,D=0;D<S.length;D+=8){var j=Math.min(8,S.length-D),R=parseInt(S.substring(D,D+j),k);8>j?(j=c(Math.pow(k,j)),A=A.j(j).add(c(R))):(A=A.j(E),A=A.add(c(R)))}return A}var d=l(0),m=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-_(this).m();for(var S=0,k=1,E=0;E<this.g.length;E++){var A=this.i(E);S+=(0<=A?A:4294967296+A)*k,k*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(g(this))return"0";if(v(this))return"-"+_(this).toString(S);for(var k=c(Math.pow(S,6)),E=this,A="";;){var D=I(E,k).g;E=w(E,D.j(k));var j=((0<E.g.length?E.g[0]:E.h)>>>0).toString(S);if(E=D,g(E))return j+A;for(;6>j.length;)j="0"+j;A=j+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function g(S){if(S.h!=0)return!1;for(var k=0;k<S.g.length;k++)if(S.g[k]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=w(this,S),v(S)?-1:g(S)?0:1};function _(S){for(var k=S.g.length,E=[],A=0;A<k;A++)E[A]=~S.g[A];return new o(E,~S.h).add(m)}t.abs=function(){return v(this)?_(this):this},t.add=function(S){for(var k=Math.max(this.g.length,S.g.length),E=[],A=0,D=0;D<=k;D++){var j=A+(this.i(D)&65535)+(S.i(D)&65535),R=(j>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);A=R>>>16,j&=65535,R&=65535,E[D]=R<<16|j}return new o(E,E[E.length-1]&-2147483648?-1:0)};function w(S,k){return S.add(_(k))}t.j=function(S){if(g(this)||g(S))return d;if(v(this))return v(S)?_(this).j(_(S)):_(_(this).j(S));if(v(S))return _(this.j(_(S)));if(0>this.l(p)&&0>S.l(p))return c(this.m()*S.m());for(var k=this.g.length+S.g.length,E=[],A=0;A<2*k;A++)E[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<S.g.length;D++){var j=this.i(A)>>>16,R=this.i(A)&65535,z=S.i(D)>>>16,H=S.i(D)&65535;E[2*A+2*D]+=R*H,x(E,2*A+2*D),E[2*A+2*D+1]+=j*H,x(E,2*A+2*D+1),E[2*A+2*D+1]+=R*z,x(E,2*A+2*D+1),E[2*A+2*D+2]+=j*z,x(E,2*A+2*D+2)}for(A=0;A<k;A++)E[A]=E[2*A+1]<<16|E[2*A];for(A=k;A<2*k;A++)E[A]=0;return new o(E,0)};function x(S,k){for(;(S[k]&65535)!=S[k];)S[k+1]+=S[k]>>>16,S[k]&=65535,k++}function b(S,k){this.g=S,this.h=k}function I(S,k){if(g(k))throw Error("division by zero");if(g(S))return new b(d,d);if(v(S))return k=I(_(S),k),new b(_(k.g),_(k.h));if(v(k))return k=I(S,_(k)),new b(_(k.g),k.h);if(30<S.g.length){if(v(S)||v(k))throw Error("slowDivide_ only works with positive integers.");for(var E=m,A=k;0>=A.l(S);)E=C(E),A=C(A);var D=N(E,1),j=N(A,1);for(A=N(A,2),E=N(E,2);!g(A);){var R=j.add(A);0>=R.l(S)&&(D=D.add(E),j=R),A=N(A,1),E=N(E,1)}return k=w(S,D.j(k)),new b(D,k)}for(D=d;0<=S.l(k);){for(E=Math.max(1,Math.floor(S.m()/k.m())),A=Math.ceil(Math.log(E)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),j=c(E),R=j.j(k);v(R)||0<R.l(S);)E-=A,j=c(E),R=j.j(k);g(j)&&(j=m),D=D.add(j),S=w(S,R)}return new b(D,S)}t.A=function(S){return I(this,S).h},t.and=function(S){for(var k=Math.max(this.g.length,S.g.length),E=[],A=0;A<k;A++)E[A]=this.i(A)&S.i(A);return new o(E,this.h&S.h)},t.or=function(S){for(var k=Math.max(this.g.length,S.g.length),E=[],A=0;A<k;A++)E[A]=this.i(A)|S.i(A);return new o(E,this.h|S.h)},t.xor=function(S){for(var k=Math.max(this.g.length,S.g.length),E=[],A=0;A<k;A++)E[A]=this.i(A)^S.i(A);return new o(E,this.h^S.h)};function C(S){for(var k=S.g.length+1,E=[],A=0;A<k;A++)E[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(E,S.h)}function N(S,k){var E=k>>5;k%=32;for(var A=S.g.length-E,D=[],j=0;j<A;j++)D[j]=0<k?S.i(j+E)>>>k|S.i(j+E+1)<<32-k:S.i(j+E);return new o(D,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,U2=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,ro=o}).apply(typeof N1<"u"?N1:typeof self<"u"?self:typeof window<"u"?window:{});var vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z2,Ol,B2,ih,Ky,$2,W2,H2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,T){return h==Array.prototype||h==Object.prototype||(h[y]=T.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof vd=="object"&&vd];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(h,y){if(y)e:{var T=r;h=h.split(".");for(var P=0;P<h.length-1;P++){var O=h[P];if(!(O in T))break e;T=T[O]}h=h[h.length-1],P=T[h],y=y(P),y!=P&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}function i(h,y){h instanceof String&&(h+="");var T=0,P=!1,O={next:function(){if(!P&&T<h.length){var L=T++;return{value:y(L,h[L]),done:!1}}return P=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(h){return h||function(){return i(this,function(y,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function c(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function u(h,y,T){return h.call.apply(h.bind,arguments)}function d(h,y,T){if(!h)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,P),h.apply(y,O)}}return function(){return h.apply(y,arguments)}}function m(h,y,T){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,m.apply(null,arguments)}function p(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var P=T.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function g(h,y){function T(){}T.prototype=y.prototype,h.aa=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(P,O,L){for(var W=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)W[Re-2]=arguments[Re];return y.prototype[O].apply(P,W)}}function v(h){const y=h.length;if(0<y){const T=Array(y);for(let P=0;P<y;P++)T[P]=h[P];return T}return[]}function _(h,y){for(let T=1;T<arguments.length;T++){const P=arguments[T];if(l(P)){const O=h.length||0,L=P.length||0;h.length=O+L;for(let W=0;W<L;W++)h[O+W]=P[W]}else h.push(P)}}class w{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function x(h){return/^[\s\xa0]*$/.test(h)}function b(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function I(h){return I[" "](h),h}I[" "]=function(){};var C=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function N(h,y,T){for(const P in h)y.call(T,h[P],P,h)}function S(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function k(h){const y={};for(const T in h)y[T]=h[T];return y}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(h,y){let T,P;for(let O=1;O<arguments.length;O++){P=arguments[O];for(T in P)h[T]=P[T];for(let L=0;L<E.length;L++)T=E[L],Object.prototype.hasOwnProperty.call(P,T)&&(h[T]=P[T])}}function D(h){var y=1;h=h.split(":");const T=[];for(;0<y&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function j(h){a.setTimeout(()=>{throw h},0)}function R(){var h=q;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class z{constructor(){this.h=this.g=null}add(y,T){const P=H.get();P.set(y,T),this.h?this.h.next=P:this.g=P,this.h=P}}var H=new w(()=>new $,h=>h.reset());class ${constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let J,U=!1,q=new z,ne=()=>{const h=a.Promise.resolve(void 0);J=()=>{h.then(Z)}};var Z=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(T){j(T)}var y=H;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}U=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var st=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};a.addEventListener("test",T,y),a.removeEventListener("test",T,y)}catch{}return h}();function gt(h,y){if(ve.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(C){e:{try{I(y.nodeName);var O=!0;break e}catch{}O=!1}O||(y=null)}}else T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement);this.relatedTarget=y,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ze[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&gt.aa.h.call(this)}}g(gt,ve);var ze={2:"touch",3:"pen",4:"mouse"};gt.prototype.h=function(){gt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var En="closure_listenable_"+(1e6*Math.random()|0),qm=0;function el(h,y,T,P,O){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!P,this.ha=O,this.key=++qm,this.da=this.fa=!1}function Mr(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Cn(h){this.src=h,this.g={},this.h=0}Cn.prototype.add=function(h,y,T,P,O){var L=h.toString();h=this.g[L],h||(h=this.g[L]=[],this.h++);var W=Gm(h,y,P,O);return-1<W?(y=h[W],T||(y.fa=!1)):(y=new el(y,this.src,L,!!P,O),y.fa=T,h.push(y)),y};function ju(h,y){var T=y.type;if(T in h.g){var P=h.g[T],O=Array.prototype.indexOf.call(P,y,void 0),L;(L=0<=O)&&Array.prototype.splice.call(P,O,1),L&&(Mr(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Gm(h,y,T,P){for(var O=0;O<h.length;++O){var L=h[O];if(!L.da&&L.listener==y&&L.capture==!!T&&L.ha==P)return O}return-1}var Km="closure_lm_"+(1e6*Math.random()|0),Qm={};function Mw(h,y,T,P,O){if(Array.isArray(y)){for(var L=0;L<y.length;L++)Mw(h,y[L],T,P,O);return null}return T=Lw(T),h&&h[En]?h.K(y,T,c(P)?!!P.capture:!1,O):gD(h,y,T,!1,P,O)}function gD(h,y,T,P,O,L){if(!y)throw Error("Invalid event type");var W=c(O)?!!O.capture:!!O,Re=Xm(h);if(Re||(h[Km]=Re=new Cn(h)),T=Re.add(y,T,P,W,L),T.proxy)return T;if(P=yD(),T.proxy=P,P.src=h,P.listener=T,h.addEventListener)st||(O=W),O===void 0&&(O=!1),h.addEventListener(y.toString(),P,O);else if(h.attachEvent)h.attachEvent(Ow(y.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return T}function yD(){function h(T){return y.call(h.src,h.listener,T)}const y=vD;return h}function jw(h,y,T,P,O){if(Array.isArray(y))for(var L=0;L<y.length;L++)jw(h,y[L],T,P,O);else P=c(P)?!!P.capture:!!P,T=Lw(T),h&&h[En]?(h=h.i,y=String(y).toString(),y in h.g&&(L=h.g[y],T=Gm(L,T,P,O),-1<T&&(Mr(L[T]),Array.prototype.splice.call(L,T,1),L.length==0&&(delete h.g[y],h.h--)))):h&&(h=Xm(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Gm(y,T,P,O)),(T=-1<h?y[h]:null)&&Ym(T))}function Ym(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[En])ju(y.i,h);else{var T=h.type,P=h.proxy;y.removeEventListener?y.removeEventListener(T,P,h.capture):y.detachEvent?y.detachEvent(Ow(T),P):y.addListener&&y.removeListener&&y.removeListener(P),(T=Xm(y))?(ju(T,h),T.h==0&&(T.src=null,y[Km]=null)):Mr(h)}}}function Ow(h){return h in Qm?Qm[h]:Qm[h]="on"+h}function vD(h,y){if(h.da)h=!0;else{y=new gt(y,this);var T=h.listener,P=h.ha||h.src;h.fa&&Ym(h),h=T.call(P,y)}return h}function Xm(h){return h=h[Km],h instanceof Cn?h:null}var Jm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lw(h){return typeof h=="function"?h:(h[Jm]||(h[Jm]=function(y){return h.handleEvent(y)}),h[Jm])}function It(){le.call(this),this.i=new Cn(this),this.M=this,this.F=null}g(It,le),It.prototype[En]=!0,It.prototype.removeEventListener=function(h,y,T,P){jw(this,h,y,T,P)};function qt(h,y){var T,P=h.F;if(P)for(T=[];P;P=P.F)T.push(P);if(h=h.M,P=y.type||y,typeof y=="string")y=new ve(y,h);else if(y instanceof ve)y.target=y.target||h;else{var O=y;y=new ve(P,h),A(y,O)}if(O=!0,T)for(var L=T.length-1;0<=L;L--){var W=y.g=T[L];O=Ou(W,P,!0,y)&&O}if(W=y.g=h,O=Ou(W,P,!0,y)&&O,O=Ou(W,P,!1,y)&&O,T)for(L=0;L<T.length;L++)W=y.g=T[L],O=Ou(W,P,!1,y)&&O}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var T=h.g[y],P=0;P<T.length;P++)Mr(T[P]);delete h.g[y],h.h--}}this.F=null},It.prototype.K=function(h,y,T,P){return this.i.add(String(h),y,!1,T,P)},It.prototype.L=function(h,y,T,P){return this.i.add(String(h),y,!0,T,P)};function Ou(h,y,T,P){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var O=!0,L=0;L<y.length;++L){var W=y[L];if(W&&!W.da&&W.capture==T){var Re=W.listener,wt=W.ha||W.src;W.fa&&ju(h.i,W),O=Re.call(wt,P)!==!1&&O}}return O&&!P.defaultPrevented}function Vw(h,y,T){if(typeof h=="function")T&&(h=m(h,T));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(h,y||0)}function Fw(h){h.g=Vw(()=>{h.g=null,h.i&&(h.i=!1,Fw(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class xD extends le{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Fw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tl(h){le.call(this),this.h=h,this.g={}}g(tl,le);var Uw=[];function zw(h){N(h.g,function(y,T){this.g.hasOwnProperty(T)&&Ym(y)},h),h.g={}}tl.prototype.N=function(){tl.aa.N.call(this),zw(this)},tl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zm=a.JSON.stringify,wD=a.JSON.parse,_D=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function ep(){}ep.prototype.h=null;function Bw(h){return h.h||(h.h=h.i())}function $w(){}var nl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tp(){ve.call(this,"d")}g(tp,ve);function np(){ve.call(this,"c")}g(np,ve);var Pi={},Ww=null;function Lu(){return Ww=Ww||new It}Pi.La="serverreachability";function Hw(h){ve.call(this,Pi.La,h)}g(Hw,ve);function rl(h){const y=Lu();qt(y,new Hw(y))}Pi.STAT_EVENT="statevent";function qw(h,y){ve.call(this,Pi.STAT_EVENT,h),this.stat=y}g(qw,ve);function Gt(h){const y=Lu();qt(y,new qw(y,h))}Pi.Ma="timingevent";function Gw(h,y){ve.call(this,Pi.Ma,h),this.size=y}g(Gw,ve);function sl(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},y)}function il(){this.g=!0}il.prototype.xa=function(){this.g=!1};function bD(h,y,T,P,O,L){h.info(function(){if(h.g)if(L)for(var W="",Re=L.split("&"),wt=0;wt<Re.length;wt++){var be=Re[wt].split("=");if(1<be.length){var At=be[0];be=be[1];var Rt=At.split("_");W=2<=Rt.length&&Rt[1]=="type"?W+(At+"="+be+"&"):W+(At+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+P+") [attempt "+O+"]: "+y+`
`+T+`
`+W})}function TD(h,y,T,P,O,L,W){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+O+"]: "+y+`
`+T+`
`+L+" "+W})}function Do(h,y,T,P){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+SD(h,T)+(P?" "+P:"")})}function kD(h,y){h.info(function(){return"TIMEOUT: "+y})}il.prototype.info=function(){};function SD(h,y){if(!h.g)return y;if(!y)return null;try{var T=JSON.parse(y);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var P=T[h];if(!(2>P.length)){var O=P[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<O.length;W++)O[W]=""}}}}return Zm(T)}catch{return y}}var Vu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rp;function Fu(){}g(Fu,ep),Fu.prototype.g=function(){return new XMLHttpRequest},Fu.prototype.i=function(){return{}},rp=new Fu;function xs(h,y,T,P){this.j=h,this.i=y,this.l=T,this.R=P||1,this.U=new tl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qw}function Qw(){this.i=null,this.g="",this.h=!1}var Yw={},sp={};function ip(h,y,T){h.L=1,h.v=$u(jr(y)),h.m=T,h.P=!0,Xw(h,null)}function Xw(h,y){h.F=Date.now(),Uu(h),h.A=jr(h.v);var T=h.A,P=h.R;Array.isArray(P)||(P=[String(P)]),d_(T.i,"t",P),h.C=0,T=h.j.J,h.h=new Qw,h.g=I_(h.j,T?y:null,!h.m),0<h.O&&(h.M=new xD(m(h.Y,h,h.g),h.O)),y=h.U,T=h.g,P=h.ca;var O="readystatechange";Array.isArray(O)||(O&&(Uw[0]=O.toString()),O=Uw);for(var L=0;L<O.length;L++){var W=Mw(T,O[L],P||y.handleEvent,!1,y.h||y);if(!W)break;y.g[W.key]=W}y=h.H?k(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),rl(),bD(h.i,h.u,h.A,h.l,h.R,h.m)}xs.prototype.ca=function(h){h=h.target;const y=this.M;y&&Or(h)==3?y.j():this.Y(h)},xs.prototype.Y=function(h){try{if(h==this.g)e:{const Rt=Or(this.g);var y=this.g.Ba();const Oo=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||v_(this.g)))){this.J||Rt!=4||y==7||(y==8||0>=Oo?rl(3):rl(2)),op(this);var T=this.g.Z();this.X=T;t:if(Jw(this)){var P=v_(this.g);h="";var O=P.length,L=Or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ii(this),ol(this);var W="";break t}this.h.i=new a.TextDecoder}for(y=0;y<O;y++)this.h.h=!0,h+=this.h.i.decode(P[y],{stream:!(L&&y==O-1)});P.length=0,this.h.g+=h,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=T==200,TD(this.i,this.u,this.A,this.l,this.R,Rt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,wt=this.g;if((Re=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Re)){var be=Re;break t}}be=null}if(T=be)Do(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ap(this,T);else{this.o=!1,this.s=3,Gt(12),Ii(this),ol(this);break e}}if(this.P){T=!0;let Gn;for(;!this.J&&this.C<W.length;)if(Gn=ED(this,W),Gn==sp){Rt==4&&(this.s=4,Gt(14),T=!1),Do(this.i,this.l,null,"[Incomplete Response]");break}else if(Gn==Yw){this.s=4,Gt(15),Do(this.i,this.l,W,"[Invalid Chunk]"),T=!1;break}else Do(this.i,this.l,Gn,null),ap(this,Gn);if(Jw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||W.length!=0||this.h.h||(this.s=1,Gt(16),T=!1),this.o=this.o&&T,!T)Do(this.i,this.l,W,"[Invalid Chunked Response]"),Ii(this),ol(this);else if(0<W.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),fp(At),At.M=!0,Gt(11))}}else Do(this.i,this.l,W,null),ap(this,W);Rt==4&&Ii(this),this.o&&!this.J&&(Rt==4?S_(this.j,this):(this.o=!1,Uu(this)))}else $D(this.g),T==400&&0<W.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),Ii(this),ol(this)}}}catch{}finally{}};function Jw(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ED(h,y){var T=h.C,P=y.indexOf(`
`,T);return P==-1?sp:(T=Number(y.substring(T,P)),isNaN(T)?Yw:(P+=1,P+T>y.length?sp:(y=y.slice(P,P+T),h.C=P+T,y)))}xs.prototype.cancel=function(){this.J=!0,Ii(this)};function Uu(h){h.S=Date.now()+h.I,Zw(h,h.I)}function Zw(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=sl(m(h.ba,h),y)}function op(h){h.B&&(a.clearTimeout(h.B),h.B=null)}xs.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(kD(this.i,this.A),this.L!=2&&(rl(),Gt(17)),Ii(this),this.s=2,ol(this)):Zw(this,this.S-h)};function ol(h){h.j.G==0||h.J||S_(h.j,h)}function Ii(h){op(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,zw(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function ap(h,y){try{var T=h.j;if(T.G!=0&&(T.g==h||lp(T.h,h))){if(!h.K&&lp(T.h,h)&&T.G==3){try{var P=T.Da.g.parse(y)}catch{P=null}if(Array.isArray(P)&&P.length==3){var O=P;if(O[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)Qu(T),Gu(T);else break e;hp(T),Gt(18)}}else T.za=O[1],0<T.za-T.T&&37500>O[2]&&T.F&&T.v==0&&!T.C&&(T.C=sl(m(T.Za,T),6e3));if(1>=n_(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Ri(T,11)}else if((h.K||T.g==h)&&Qu(T),!x(y))for(O=T.Da.g.parse(y),y=0;y<O.length;y++){let be=O[y];if(T.T=be[0],be=be[1],T.G==2)if(be[0]=="c"){T.K=be[1],T.ia=be[2];const At=be[3];At!=null&&(T.la=At,T.j.info("VER="+T.la));const Rt=be[4];Rt!=null&&(T.Aa=Rt,T.j.info("SVER="+T.Aa));const Oo=be[5];Oo!=null&&typeof Oo=="number"&&0<Oo&&(P=1.5*Oo,T.L=P,T.j.info("backChannelRequestTimeoutMs_="+P)),P=T;const Gn=h.g;if(Gn){const Xu=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xu){var L=P.h;L.g||Xu.indexOf("spdy")==-1&&Xu.indexOf("quic")==-1&&Xu.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(cp(L,L.h),L.h=null))}if(P.D){const mp=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;mp&&(P.ya=mp,Me(P.I,P.D,mp))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),P=T;var W=h;if(P.qa=P_(P,P.J?P.ia:null,P.W),W.K){r_(P.h,W);var Re=W,wt=P.L;wt&&(Re.I=wt),Re.B&&(op(Re),Uu(Re)),P.g=W}else T_(P);0<T.i.length&&Ku(T)}else be[0]!="stop"&&be[0]!="close"||Ri(T,7);else T.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Ri(T,7):dp(T):be[0]!="noop"&&T.l&&T.l.ta(be),T.v=0)}}rl(4)}catch{}}var CD=class{constructor(h,y){this.g=h,this.map=y}};function e_(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function t_(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function n_(h){return h.h?1:h.g?h.g.size:0}function lp(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function cp(h,y){h.g?h.g.add(y):h.h=y}function r_(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}e_.prototype.cancel=function(){if(this.i=s_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function s_(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.D);return y}return v(h.i)}function PD(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var y=[],T=h.length,P=0;P<T;P++)y.push(h[P]);return y}y=[],T=0;for(P in h)y[T++]=h[P];return y}function ID(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var y=[];h=h.length;for(var T=0;T<h;T++)y.push(T);return y}y=[],T=0;for(const P in h)y[T++]=P;return y}}}function i_(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var T=ID(h),P=PD(h),O=P.length,L=0;L<O;L++)y.call(void 0,P[L],T&&T[L],h)}var o_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AD(h,y){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var P=h[T].indexOf("="),O=null;if(0<=P){var L=h[T].substring(0,P);O=h[T].substring(P+1)}else L=h[T];y(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Ai(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ai){this.h=h.h,zu(this,h.j),this.o=h.o,this.g=h.g,Bu(this,h.s),this.l=h.l;var y=h.i,T=new cl;T.i=y.i,y.g&&(T.g=new Map(y.g),T.h=y.h),a_(this,T),this.m=h.m}else h&&(y=String(h).match(o_))?(this.h=!1,zu(this,y[1]||"",!0),this.o=al(y[2]||""),this.g=al(y[3]||"",!0),Bu(this,y[4]),this.l=al(y[5]||"",!0),a_(this,y[6]||"",!0),this.m=al(y[7]||"")):(this.h=!1,this.i=new cl(null,this.h))}Ai.prototype.toString=function(){var h=[],y=this.j;y&&h.push(ll(y,l_,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ll(y,l_,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(ll(T,T.charAt(0)=="/"?DD:ND,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",ll(T,jD)),h.join("")};function jr(h){return new Ai(h)}function zu(h,y,T){h.j=T?al(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Bu(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function a_(h,y,T){y instanceof cl?(h.i=y,OD(h.i,h.h)):(T||(y=ll(y,MD)),h.i=new cl(y,h.h))}function Me(h,y,T){h.i.set(y,T)}function $u(h){return Me(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function al(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ll(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,RD),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function RD(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var l_=/[#\/\?@]/g,ND=/[#\?:]/g,DD=/[#\?]/g,MD=/[#\?@]/g,jD=/#/g;function cl(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function ws(h){h.g||(h.g=new Map,h.h=0,h.i&&AD(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}t=cl.prototype,t.add=function(h,y){ws(this),this.i=null,h=Mo(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function c_(h,y){ws(h),y=Mo(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function u_(h,y){return ws(h),y=Mo(h,y),h.g.has(y)}t.forEach=function(h,y){ws(this),this.g.forEach(function(T,P){T.forEach(function(O){h.call(y,O,P,this)},this)},this)},t.na=function(){ws(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),T=[];for(let P=0;P<y.length;P++){const O=h[P];for(let L=0;L<O.length;L++)T.push(y[P])}return T},t.V=function(h){ws(this);let y=[];if(typeof h=="string")u_(this,h)&&(y=y.concat(this.g.get(Mo(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)y=y.concat(h[T])}return y},t.set=function(h,y){return ws(this),this.i=null,h=Mo(this,h),u_(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},t.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function d_(h,y,T){c_(h,y),0<T.length&&(h.i=null,h.g.set(Mo(h,y),v(T)),h.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var T=0;T<y.length;T++){var P=y[T];const L=encodeURIComponent(String(P)),W=this.V(P);for(P=0;P<W.length;P++){var O=L;W[P]!==""&&(O+="="+encodeURIComponent(String(W[P]))),h.push(O)}}return this.i=h.join("&")};function Mo(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function OD(h,y){y&&!h.j&&(ws(h),h.i=null,h.g.forEach(function(T,P){var O=P.toLowerCase();P!=O&&(c_(this,P),d_(this,O,T))},h)),h.j=y}function LD(h,y){const T=new il;if(a.Image){const P=new Image;P.onload=p(_s,T,"TestLoadImage: loaded",!0,y,P),P.onerror=p(_s,T,"TestLoadImage: error",!1,y,P),P.onabort=p(_s,T,"TestLoadImage: abort",!1,y,P),P.ontimeout=p(_s,T,"TestLoadImage: timeout",!1,y,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else y(!1)}function VD(h,y){const T=new il,P=new AbortController,O=setTimeout(()=>{P.abort(),_s(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:P.signal}).then(L=>{clearTimeout(O),L.ok?_s(T,"TestPingServer: ok",!0,y):_s(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(O),_s(T,"TestPingServer: error",!1,y)})}function _s(h,y,T,P,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),P(T)}catch{}}function FD(){this.g=new _D}function UD(h,y,T){const P=T||"";try{i_(h,function(O,L){let W=O;c(O)&&(W=Zm(O)),y.push(P+L+"="+encodeURIComponent(W))})}catch(O){throw y.push(P+"type="+encodeURIComponent("_badmap")),O}}function Wu(h){this.l=h.Ub||null,this.j=h.eb||!1}g(Wu,ep),Wu.prototype.g=function(){return new Hu(this.l,this.j)},Wu.prototype.i=function(h){return function(){return h}}({});function Hu(h,y){It.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Hu,It),t=Hu.prototype,t.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,dl(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ul(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,dl(this)),this.g&&(this.readyState=3,dl(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;h_(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function h_(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ul(this):dl(this),this.readyState==3&&h_(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ul(this))},t.Qa=function(h){this.g&&(this.response=h,ul(this))},t.ga=function(){this.g&&ul(this)};function ul(h){h.readyState=4,h.l=null,h.j=null,h.v=null,dl(h)}t.setRequestHeader=function(h,y){this.u.append(h,y)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function dl(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Hu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function f_(h){let y="";return N(h,function(T,P){y+=P,y+=":",y+=T,y+=`\r
`}),y}function up(h,y,T){e:{for(P in T){var P=!1;break e}P=!0}P||(T=f_(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):Me(h,y,T))}function Qe(h){It.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Qe,It);var zD=/^https?$/i,BD=["POST","PUT"];t=Qe.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,y,T,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rp.g(),this.v=this.o?Bw(this.o):Bw(rp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(L){m_(this,L);return}if(h=T||"",T=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var O in P)T.set(O,P[O]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const L of P.keys())T.set(L,P.get(L));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(T.keys()).find(L=>L.toLowerCase()=="content-type"),O=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(BD,y,void 0))||P||O||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of T)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{y_(this),this.u=!0,this.g.send(h),this.u=!1}catch(L){m_(this,L)}};function m_(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,p_(h),qu(h)}function p_(h){h.A||(h.A=!0,qt(h,"complete"),qt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,qt(this,"complete"),qt(this,"abort"),qu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qu(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?g_(this):this.bb())},t.bb=function(){g_(this)};function g_(h){if(h.h&&typeof o<"u"&&(!h.v[1]||Or(h)!=4||h.Z()!=2)){if(h.u&&Or(h)==4)Vw(h.Ea,0,h);else if(qt(h,"readystatechange"),Or(h)==4){h.h=!1;try{const W=h.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var P;if(P=W===0){var O=String(h.D).match(o_)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),P=!zD.test(O?O.toLowerCase():"")}T=P}if(T)qt(h,"complete"),qt(h,"success");else{h.m=6;try{var L=2<Or(h)?h.g.statusText:""}catch{L=""}h.l=L+" ["+h.Z()+"]",p_(h)}}finally{qu(h)}}}}function qu(h,y){if(h.g){y_(h);const T=h.g,P=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||qt(h,"ready");try{T.onreadystatechange=P}catch{}}}function y_(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Or(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Or(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),wD(y)}};function v_(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function $D(h){const y={};h=(h.g&&2<=Or(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(x(h[P]))continue;var T=D(h[P]);const O=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const L=y[O]||[];y[O]=L,L.push(T)}S(y,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hl(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function x_(h){this.Aa=0,this.i=[],this.j=new il,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hl("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hl("baseRetryDelayMs",5e3,h),this.cb=hl("retryDelaySeedMs",1e4,h),this.Wa=hl("forwardChannelMaxRetries",2,h),this.wa=hl("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new e_(h&&h.concurrentRequestLimit),this.Da=new FD,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=x_.prototype,t.la=8,t.G=1,t.connect=function(h,y,T,P){Gt(0),this.W=h,this.H=y||{},T&&P!==void 0&&(this.H.OSID=T,this.H.OAID=P),this.F=this.X,this.I=P_(this,null,this.W),Ku(this)};function dp(h){if(w_(h),h.G==3){var y=h.U++,T=jr(h.I);if(Me(T,"SID",h.K),Me(T,"RID",y),Me(T,"TYPE","terminate"),fl(h,T),y=new xs(h,h.j,y),y.L=2,y.v=$u(jr(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!T&&a.Image&&(new Image().src=y.v,T=!0),T||(y.g=I_(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Uu(y)}C_(h)}function Gu(h){h.g&&(fp(h),h.g.cancel(),h.g=null)}function w_(h){Gu(h),h.u&&(a.clearTimeout(h.u),h.u=null),Qu(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Ku(h){if(!t_(h.h)&&!h.s){h.s=!0;var y=h.Ga;J||ne(),U||(J(),U=!0),q.add(y,h),h.B=0}}function WD(h,y){return n_(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=sl(m(h.Ga,h,y),E_(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const O=new xs(this,this.j,h);let L=this.o;if(this.S&&(L?(L=k(L),A(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var P=this.i[T];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(y+=P,4096<y){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=b_(this,O,y),T=jr(this.I),Me(T,"RID",h),Me(T,"CVER",22),this.D&&Me(T,"X-HTTP-Session-Id",this.D),fl(this,T),L&&(this.O?y="headers="+encodeURIComponent(String(f_(L)))+"&"+y:this.m&&up(T,this.m,L)),cp(this.h,O),this.Ua&&Me(T,"TYPE","init"),this.P?(Me(T,"$req",y),Me(T,"SID","null"),O.T=!0,ip(O,T,null)):ip(O,T,y),this.G=2}}else this.G==3&&(h?__(this,h):this.i.length==0||t_(this.h)||__(this))};function __(h,y){var T;y?T=y.l:T=h.U++;const P=jr(h.I);Me(P,"SID",h.K),Me(P,"RID",T),Me(P,"AID",h.T),fl(h,P),h.m&&h.o&&up(P,h.m,h.o),T=new xs(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),y&&(h.i=y.D.concat(h.i)),y=b_(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),cp(h.h,T),ip(T,P,y)}function fl(h,y){h.H&&N(h.H,function(T,P){Me(y,P,T)}),h.l&&i_({},function(T,P){Me(y,P,T)})}function b_(h,y,T){T=Math.min(h.i.length,T);var P=h.l?m(h.l.Na,h.l,h):null;e:{var O=h.i;let L=-1;for(;;){const W=["count="+T];L==-1?0<T?(L=O[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let Re=!0;for(let wt=0;wt<T;wt++){let be=O[wt].g;const At=O[wt].map;if(be-=L,0>be)L=Math.max(0,O[wt].g-100),Re=!1;else try{UD(At,W,"req"+be+"_")}catch{P&&P(At)}}if(Re){P=W.join("&");break e}}}return h=h.i.splice(0,T),y.D=h,P}function T_(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;J||ne(),U||(J(),U=!0),q.add(y,h),h.v=0}}function hp(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=sl(m(h.Fa,h),E_(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,k_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=sl(m(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),Gu(this),k_(this))};function fp(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function k_(h){h.g=new xs(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=jr(h.qa);Me(y,"RID","rpc"),Me(y,"SID",h.K),Me(y,"AID",h.T),Me(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Me(y,"TO",h.ja),Me(y,"TYPE","xmlhttp"),fl(h,y),h.m&&h.o&&up(y,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=$u(jr(y)),T.m=null,T.P=!0,Xw(T,h)}t.Za=function(){this.C!=null&&(this.C=null,Gu(this),hp(this),Gt(19))};function Qu(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function S_(h,y){var T=null;if(h.g==y){Qu(h),fp(h),h.g=null;var P=2}else if(lp(h.h,y))T=y.D,r_(h.h,y),P=1;else return;if(h.G!=0){if(y.o)if(P==1){T=y.m?y.m.length:0,y=Date.now()-y.F;var O=h.B;P=Lu(),qt(P,new Gw(P,T)),Ku(h)}else T_(h);else if(O=y.s,O==3||O==0&&0<y.X||!(P==1&&WD(h,y)||P==2&&hp(h)))switch(T&&0<T.length&&(y=h.h,y.i=y.i.concat(T)),O){case 1:Ri(h,5);break;case 4:Ri(h,10);break;case 3:Ri(h,6);break;default:Ri(h,2)}}}function E_(h,y){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*y}function Ri(h,y){if(h.j.info("Error code "+y),y==2){var T=m(h.fb,h),P=h.Xa;const O=!P;P=new Ai(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||zu(P,"https"),$u(P),O?LD(P.toString(),T):VD(P.toString(),T)}else Gt(2);h.G=0,h.l&&h.l.sa(y),C_(h),w_(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function C_(h){if(h.G=0,h.ka=[],h.l){const y=s_(h.h);(y.length!=0||h.i.length!=0)&&(_(h.ka,y),_(h.ka,h.i),h.h.i.length=0,v(h.i),h.i.length=0),h.l.ra()}}function P_(h,y,T){var P=T instanceof Ai?jr(T):new Ai(T);if(P.g!="")y&&(P.g=y+"."+P.g),Bu(P,P.s);else{var O=a.location;P=O.protocol,y=y?y+"."+O.hostname:O.hostname,O=+O.port;var L=new Ai(null);P&&zu(L,P),y&&(L.g=y),O&&Bu(L,O),T&&(L.l=T),P=L}return T=h.D,y=h.ya,T&&y&&Me(P,T,y),Me(P,"VER",h.la),fl(h,P),P}function I_(h,y,T){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Qe(new Wu({eb:T})):new Qe(h.pa),y.Ha(h.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function A_(){}t=A_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Yu(){}Yu.prototype.g=function(h,y){return new mn(h,y)};function mn(h,y){It.call(this),this.g=new x_(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!x(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new jo(this)}g(mn,It),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){dp(this.g)},mn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=Zm(h),h=T);y.i.push(new CD(y.Ya++,h)),y.G==3&&Ku(y)},mn.prototype.N=function(){this.g.l=null,delete this.j,dp(this.g),delete this.g,mn.aa.N.call(this)};function R_(h){tp.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}g(R_,tp);function N_(){np.call(this),this.status=1}g(N_,np);function jo(h){this.g=h}g(jo,A_),jo.prototype.ua=function(){qt(this.g,"a")},jo.prototype.ta=function(h){qt(this.g,new R_(h))},jo.prototype.sa=function(h){qt(this.g,new N_)},jo.prototype.ra=function(){qt(this.g,"b")},Yu.prototype.createWebChannel=Yu.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,H2=function(){return new Yu},W2=function(){return Lu()},$2=Pi,Ky={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vu.NO_ERROR=0,Vu.TIMEOUT=8,Vu.HTTP_ERROR=6,ih=Vu,Kw.COMPLETE="complete",B2=Kw,$w.EventType=nl,nl.OPEN="a",nl.CLOSE="b",nl.ERROR="c",nl.MESSAGE="d",It.prototype.listen=It.prototype.K,Ol=$w,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,z2=Qe}).apply(typeof vd<"u"?vd:typeof self<"u"?self:typeof window<"u"?window:{});const D1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new am("@firebase/firestore");function bl(){return po.logLevel}function Q(t,...e){if(po.logLevel<=ye.DEBUG){const n=e.map(tx);po.debug(`Firestore (${Ka}): ${t}`,...n)}}function hs(t,...e){if(po.logLevel<=ye.ERROR){const n=e.map(tx);po.error(`Firestore (${Ka}): ${t}`,...n)}}function Ra(t,...e){if(po.logLevel<=ye.WARN){const n=e.map(tx);po.warn(`Firestore (${Ka}): ${t}`,...n)}}function tx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${Ka}) INTERNAL ASSERTION FAILED: `+t;throw hs(e),new Error(e)}function Ae(t,e){t||ie()}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Q3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class Y3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class X3{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ns,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ns)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new q2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new Vt(e)}}class J3{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Z3{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new J3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class e6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ae(this.o===void 0);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.R=n.token,new e6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=n6(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function Na(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new pt(0,0))}static max(){return new oe(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Bc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends Bc{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const r6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Bc{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return r6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new G(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Le.fromString(e))}static fromName(e){return new te(Le.fromString(e).popFirst(5))}static empty(){return new te(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Le(e.slice()))}}function s6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new ui(s,te.empty(),e)}function i6(t){return new ui(t.readTime,t.key,-1)}class ui{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ui(oe.min(),te.empty(),-1)}static max(){return new ui(oe.max(),te.empty(),-1)}}function o6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==a6)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function c6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}nx.oe=-1;function dm(t){return t==null}function nf(t){return t===0&&1/t==-1/0}function u6(t){return typeof t=="number"&&Number.isInteger(t)&&!nf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function K2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xd(this.root,e,this.comparator,!1)}getReverseIterator(){return new xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xd(this.root,e,this.comparator,!0)}}class xd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=s??Tt.EMPTY,this.right=i??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new j1(this.data.getIterator())}getIteratorFrom(e){return new j1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class j1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new Et(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Na(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Q2("Invalid base64 string: "+i):i}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const d6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=d6.exec(t);if(Ae(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function go(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sx(t){const e=t.mapValue.fields.__previous_value__;return rx(e)?sx(e):e}function $c(t){const e=di(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Wc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd={mapValue:{}};function yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rx(t)?4:m6(t)?9007199254740991:f6(t)?10:11:ie()}function Nr(t,e){if(t===e)return!0;const n=yo(t);if(n!==yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $c(t).isEqual($c(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=di(s.timestampValue),a=di(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return go(s.bytesValue).isEqual(go(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ze(s.geoPointValue.latitude)===Ze(i.geoPointValue.latitude)&&Ze(s.geoPointValue.longitude)===Ze(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ze(s.integerValue)===Ze(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ze(s.doubleValue),a=Ze(i.doubleValue);return o===a?nf(o)===nf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Na(t.arrayValue.values||[],e.arrayValue.values||[],Nr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(M1(o)!==M1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Nr(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Hc(t,e){return(t.values||[]).find(n=>Nr(n,e))!==void 0}function Da(t,e){if(t===e)return 0;const n=yo(t),r=yo(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ze(i.integerValue||i.doubleValue),l=Ze(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return O1(t.timestampValue,e.timestampValue);case 4:return O1($c(t),$c(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(i,o){const a=go(i),l=go(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Te(a[c],l[c]);if(u!==0)return u}return Te(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Te(Ze(i.latitude),Ze(o.latitude));return a!==0?a:Te(Ze(i.longitude),Ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return L1(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const d=i.fields||{},m=o.fields||{},p=(a=d.value)===null||a===void 0?void 0:a.arrayValue,g=(l=m.value)===null||l===void 0?void 0:l.arrayValue,v=Te(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:L1(p,g)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===wd.mapValue&&o===wd.mapValue)return 0;if(i===wd.mapValue)return 1;if(o===wd.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const m=Te(l[d],u[d]);if(m!==0)return m;const p=Da(a[l[d]],c[u[d]]);if(p!==0)return p}return Te(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ie()}}function O1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=di(t),r=di(e),s=Te(n.seconds,r.seconds);return s!==0?s:Te(n.nanos,r.nanos)}function L1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Da(n[s],r[s]);if(i)return i}return Te(n.length,r.length)}function Ma(t){return Qy(t)}function Qy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=di(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return go(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Qy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Qy(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function V1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yy(t){return!!t&&"integerValue"in t}function ix(t){return!!t&&"arrayValue"in t}function F1(t){return!!t&&"nullValue"in t}function U1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oh(t){return!!t&&"mapValue"in t}function f6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function nc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Co(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=nc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function m6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=nc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];oh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Co(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new sn(nc(this.value))}}function Y2(t){const e=[];return Co(t.fields,(n,r)=>{const s=new kt([n]);if(oh(r)){const i=Y2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,oe.min(),oe.min(),oe.min(),sn.empty(),0)}static newFoundDocument(e,n,r,s){return new Ut(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new Ut(e,2,n,oe.min(),oe.min(),sn.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,oe.min(),oe.min(),sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n){this.position=e,this.inclusive=n}}function z1(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Da(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function B1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n="asc"){this.field=e,this.dir=n}}function p6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X2=class{};class lt extends X2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new y6(e,n,r):n==="array-contains"?new w6(e,r):n==="in"?new _6(e,r):n==="not-in"?new b6(e,r):n==="array-contains-any"?new T6(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new v6(e,r):new x6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Da(n,this.value)):n!==null&&yo(this.value)===yo(n)&&this.matchesComparison(Da(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class or extends X2{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new or(e,n)}matches(e){return J2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function J2(t){return t.op==="and"}function Z2(t){return g6(t)&&J2(t)}function g6(t){for(const e of t.filters)if(e instanceof or)return!1;return!0}function Xy(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+Ma(t.value);if(Z2(t))return t.filters.map(e=>Xy(e)).join(",");{const e=t.filters.map(n=>Xy(n)).join(",");return`${t.op}(${e})`}}function eI(t,e){return t instanceof lt?function(r,s){return s instanceof lt&&r.op===s.op&&r.field.isEqual(s.field)&&Nr(r.value,s.value)}(t,e):t instanceof or?function(r,s){return s instanceof or&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&eI(o,s.filters[a]),!0):!1}(t,e):void ie()}function tI(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ma(n.value)}`}(t):t instanceof or?function(n){return n.op.toString()+" {"+n.getFilters().map(tI).join(" ,")+"}"}(t):"Filter"}class y6 extends lt{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class v6 extends lt{constructor(e,n){super(e,"in",n),this.keys=nI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class x6 extends lt{constructor(e,n){super(e,"not-in",n),this.keys=nI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class w6 extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ix(n)&&Hc(n.arrayValue,this.value)}}class _6 extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hc(this.value.arrayValue,n)}}class b6 extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Hc(this.value.arrayValue,n)}}class T6 extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ix(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Hc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function $1(t,e=null,n=[],r=[],s=null,i=null,o=null){return new k6(t,e,n,r,s,i,o)}function ox(t){const e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),dm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ma(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ma(r)).join(",")),e.ue=n}return e.ue}function ax(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!p6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!eI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!B1(t.startAt,e.startAt)&&B1(t.endAt,e.endAt)}function Jy(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function S6(t,e,n,r,s,i,o,a){return new Qa(t,e,n,r,s,i,o,a)}function lx(t){return new Qa(t)}function W1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rI(t){return t.collectionGroup!==null}function rc(t){const e=ae(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Et(kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new qc(i,r))}),n.has(kt.keyField().canonicalString())||e.ce.push(new qc(kt.keyField(),r))}return e.ce}function Er(t){const e=ae(t);return e.le||(e.le=E6(e,rc(t))),e.le}function E6(t,e){if(t.limitType==="F")return $1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new qc(s.field,i)});const n=t.endAt?new rf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rf(t.startAt.position,t.startAt.inclusive):null;return $1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zy(t,e){const n=t.filters.concat([e]);return new Qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function e0(t,e,n){return new Qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hm(t,e){return ax(Er(t),Er(e))&&t.limitType===e.limitType}function sI(t){return`${ox(Er(t))}|lt:${t.limitType}`}function Bo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>tI(s)).join(", ")}]`),dm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ma(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ma(s)).join(",")),`Target(${r})`}(Er(t))}; limitType=${t.limitType})`}function fm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of rc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=z1(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,rc(r),s)||r.endAt&&!function(o,a,l){const c=z1(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,rc(r),s))}(t,e)}function C6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function iI(t){return(e,n)=>{let r=!1;for(const s of rc(t)){const i=P6(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function P6(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Da(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return K2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=new Ke(te.comparator);function fs(){return I6}const oI=new Ke(te.comparator);function Ll(...t){let e=oI;for(const n of t)e=e.insert(n.key,n);return e}function aI(t){let e=oI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yi(){return sc()}function lI(){return sc()}function sc(){return new Ya(t=>t.toString(),(t,e)=>t.isEqual(e))}const A6=new Ke(te.comparator),R6=new Et(te.comparator);function pe(...t){let e=R6;for(const n of t)e=e.add(n);return e}const N6=new Et(Te);function D6(){return N6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nf(e)?"-0":e}}function cI(t){return{integerValue:""+t}}function M6(t,e){return u6(e)?cI(e):cx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this._=void 0}}function j6(t,e,n){return t instanceof sf?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rx(i)&&(i=sx(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Gc?dI(t,e):t instanceof Kc?hI(t,e):function(s,i){const o=uI(s,i),a=H1(o)+H1(s.Pe);return Yy(o)&&Yy(s.Pe)?cI(a):cx(s.serializer,a)}(t,e)}function O6(t,e,n){return t instanceof Gc?dI(t,e):t instanceof Kc?hI(t,e):n}function uI(t,e){return t instanceof of?function(r){return Yy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class sf extends mm{}class Gc extends mm{constructor(e){super(),this.elements=e}}function dI(t,e){const n=fI(e);for(const r of t.elements)n.some(s=>Nr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Kc extends mm{constructor(e){super(),this.elements=e}}function hI(t,e){let n=fI(e);for(const r of t.elements)n=n.filter(s=>!Nr(s,r));return{arrayValue:{values:n}}}class of extends mm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function H1(t){return Ze(t.integerValue||t.doubleValue)}function fI(t){return ix(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function L6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Gc&&s instanceof Gc||r instanceof Kc&&s instanceof Kc?Na(r.elements,s.elements,Nr):r instanceof of&&s instanceof of?Nr(r.Pe,s.Pe):r instanceof sf&&s instanceof sf}(t.transform,e.transform)}class V6{constructor(e,n){this.version=e,this.transformResults=n}}class Jt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pm{}function mI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gm(t.key,Jt.none()):new wu(t.key,t.data,Jt.none());{const n=t.data,r=sn.empty();let s=new Et(kt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ki(t.key,r,new xn(s.toArray()),Jt.none())}}function F6(t,e,n){t instanceof wu?function(s,i,o){const a=s.value.clone(),l=G1(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ki?function(s,i,o){if(!ah(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=G1(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(pI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ic(t,e,n,r){return t instanceof wu?function(i,o,a,l){if(!ah(i.precondition,o))return a;const c=i.value.clone(),u=K1(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ki?function(i,o,a,l){if(!ah(i.precondition,o))return a;const c=K1(i.fieldTransforms,l,o),u=o.data;return u.setAll(pI(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return ah(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function U6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=uI(r.transform,s||null);i!=null&&(n===null&&(n=sn.empty()),n.set(r.field,i))}return n||null}function q1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Na(r,s,(i,o)=>L6(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wu extends pm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ki extends pm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function pI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function G1(t,e,n){const r=new Map;Ae(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,O6(o,a,n[s]))}return r}function K1(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,j6(i,o,e))}return r}class gm extends pm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z6 extends pm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&F6(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=lI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=mI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Na(this.mutations,e.mutations,(n,r)=>q1(n,r))&&Na(this.baseMutations,e.baseMutations,(n,r)=>q1(n,r))}}class ux{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ae(e.mutations.length===r.length);let s=function(){return A6}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ux(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,xe;function H6(t){switch(t){default:return ie();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function gI(t){if(t===void 0)return hs("GRPC error has no .code"),V.UNKNOWN;switch(t){case it.OK:return V.OK;case it.CANCELLED:return V.CANCELLED;case it.UNKNOWN:return V.UNKNOWN;case it.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case it.INTERNAL:return V.INTERNAL;case it.UNAVAILABLE:return V.UNAVAILABLE;case it.UNAUTHENTICATED:return V.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case it.NOT_FOUND:return V.NOT_FOUND;case it.ALREADY_EXISTS:return V.ALREADY_EXISTS;case it.PERMISSION_DENIED:return V.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case it.ABORTED:return V.ABORTED;case it.OUT_OF_RANGE:return V.OUT_OF_RANGE;case it.UNIMPLEMENTED:return V.UNIMPLEMENTED;case it.DATA_LOSS:return V.DATA_LOSS;default:return ie()}}(xe=it||(it={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=new ro([4294967295,4294967295],0);function Q1(t){const e=q6().encode(t),n=new U2;return n.update(e),new Uint8Array(n.digest())}function Y1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ro([n,r],0),new ro([s,i],0)]}class dx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vl(`Invalid padding: ${n}`);if(r<0)throw new Vl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ro.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ro.fromNumber(r)));return s.compare(G6)===1&&(s=new ro([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Q1(e),[r,s]=Y1(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new dx(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Q1(e),[r,s]=Y1(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ym(oe.min(),s,new Ke(Te),fs(),pe())}}class _u{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _u(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class yI{constructor(e,n){this.targetId=e,this.me=n}}class vI{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class X1{constructor(){this.fe=0,this.ge=Z1(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new _u(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Z1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class K6{constructor(e){this.Le=e,this.Be=new Map,this.ke=fs(),this.qe=J1(),this.Qe=new Ke(Te)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Jy(i))if(r===0){const o=new te(i.path);this.Ue(n,o,Ut.newNoDocument(o,oe.min()))}else Ae(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=go(r).toUint8Array()}catch(l){if(l instanceof Q2)return Ra("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new dx(o,s,i)}catch(l){return Ra(l instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Jy(a.target)){const l=new te(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ut.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=pe();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new ym(e,n,this.Qe,this.ke,r);return this.ke=fs(),this.qe=J1(),this.Qe=new Ke(Te),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new X1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Et(Te),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new X1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function J1(){return new Ke(te.comparator)}function Z1(){return new Ke(te.comparator)}const Q6={asc:"ASCENDING",desc:"DESCENDING"},Y6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X6={and:"AND",or:"OR"};class J6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function t0(t,e){return t.useProto3Json||dm(e)?e:{value:e}}function af(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Z6(t,e){return af(t,e.toTimestamp())}function Cr(t){return Ae(!!t),oe.fromTimestamp(function(n){const r=di(n);return new pt(r.seconds,r.nanos)}(t))}function hx(t,e){return n0(t,e).canonicalString()}function n0(t,e){const n=function(s){return new Le(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function wI(t){const e=Le.fromString(t);return Ae(SI(e)),e}function r0(t,e){return hx(t.databaseId,e.path)}function Xp(t,e){const n=wI(e);if(n.get(1)!==t.databaseId.projectId)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(bI(n))}function _I(t,e){return hx(t.databaseId,e)}function eU(t){const e=wI(t);return e.length===4?Le.emptyPath():bI(e)}function s0(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bI(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function eT(t,e,n){return{name:r0(t,e),fields:n.value.mapValue.fields}}function tU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Ae(u===void 0||typeof u=="string"),Pt.fromBase64String(u||"")):(Ae(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Pt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?V.UNKNOWN:gI(c.code);return new G(u,c.message||"")}(o);n=new vI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Xp(t,r.document.name),i=Cr(r.document.updateTime),o=r.document.createTime?Cr(r.document.createTime):oe.min(),a=new sn({mapValue:{fields:r.document.fields}}),l=Ut.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new lh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Xp(t,r.document),i=r.readTime?Cr(r.readTime):oe.min(),o=Ut.newNoDocument(s,i),a=r.removedTargetIds||[];n=new lh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Xp(t,r.document),i=r.removedTargetIds||[];n=new lh([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new W6(s,i),a=r.targetId;n=new yI(a,o)}}return n}function nU(t,e){let n;if(e instanceof wu)n={update:eT(t,e.key,e.value)};else if(e instanceof gm)n={delete:r0(t,e.key)};else if(e instanceof ki)n={update:eT(t,e.key,e.data),updateMask:dU(e.fieldMask)};else{if(!(e instanceof z6))return ie();n={verify:r0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof sf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Kc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof of)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Z6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function rU(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Cr(s.updateTime):Cr(i);return o.isEqual(oe.min())&&(o=Cr(i)),new V6(o,s.transformResults||[])}(n,e))):[]}function sU(t,e){return{documents:[_I(t,e.path)]}}function iU(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_I(t,s);const i=function(c){if(c.length!==0)return kI(or.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(m){return{field:$o(m.field),direction:lU(m.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=t0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function oU(t){let e=eU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ae(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(d){const m=TI(d);return m instanceof or&&Z2(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(g){return new qc(Wo(g.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,dm(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(d){const m=!!d.before,p=d.values||[];return new rf(p,m)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const m=!d.before,p=d.values||[];return new rf(p,m)}(n.endAt)),S6(e,s,o,i,a,"F",l,c)}function aU(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function TI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wo(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wo(n.unaryFilter.field);return lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wo(n.unaryFilter.field);return lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wo(n.unaryFilter.field);return lt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(Wo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return or.create(n.compositeFilter.filters.map(r=>TI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function lU(t){return Q6[t]}function cU(t){return Y6[t]}function uU(t){return X6[t]}function $o(t){return{fieldPath:t.canonicalString()}}function Wo(t){return kt.fromServerFormat(t.fieldPath)}function kI(t){return t instanceof lt?function(n){if(n.op==="=="){if(U1(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NAN"}};if(F1(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(U1(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NOT_NAN"}};if(F1(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$o(n.field),op:cU(n.op),value:n.value}}}(t):t instanceof or?function(n){const r=n.getFilters().map(s=>kI(s));return r.length===1?r[0]:{compositeFilter:{op:uU(n.op),filters:r}}}(t):ie()}function dU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,s,i=oe.min(),o=oe.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e){this.ct=e}}function fU(t){const e=oU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?e0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(){this.un=new pU}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(ui.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(ui.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class pU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Et(Le.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Et(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ja(0)}static kn(){return new ja(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(){this.changes=new Ya(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ic(r.mutation,s,xn.empty(),pt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=Yi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ll();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=fs();const o=sc(),a=function(){return sc()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof ki)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ic(u.mutation,c,u.mutation.getFieldMask(),pt.now())):o.set(c.key,xn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new yU(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=sc();let s=new Ke((o,a)=>o-a),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||xn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(s.get(a.batchId)||pe()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=lI();u.forEach(m=>{if(!i.has(m)){const p=mI(n.get(m),r.get(m));p!==null&&d.set(m,p),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Yi());let a=-1,l=i;return o.next(c=>F.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(u)?F.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,pe())).next(u=>({batchId:a,changes:aI(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Ll();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ll();return this.indexManager.getCollectionParents(e,i).next(a=>F.forEach(a,l=>{const c=function(d,m){return new Qa(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ut.newInvalidDocument(u)))});let a=Ll();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&ic(u.mutation,c,xn.empty(),pt.now()),fm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Cr(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:fU(s.bundledQuery),readTime:Cr(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(){this.overlays=new Ke(te.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yi();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Yi(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ke((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Yi(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Yi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return F.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $6(n,r));let i=this.Ir.get(n);i===void 0&&(i=pe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.Tr=new Et(yt.Er),this.dr=new Et(yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new yt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new Le([])),r=new yt(n,e),s=new yt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new Le([])),r=new yt(n,e),s=new yt(n,e+1);let i=pe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new yt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||Te(e.wr,n.wr)}static Ar(e,n){return Te(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Et(yt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new B6(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new yt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),s=new yt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(Te);return n.forEach(s=>{const i=new yt(s,0),o=new yt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new yt(new te(i),0);let a=new Et(Te);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ae(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new yt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new yt(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e){this.Mr=e,this.docs=function(){return new Ke(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=fs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ut.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=fs();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||o6(i6(u),r)<=0||(s.has(u.key)||fm(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kU(this)}getSize(e){return F.resolve(this.size)}}class kU extends gU{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e){this.persistence=e,this.Nr=new Ya(n=>ox(n),ax),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fx,this.targetCount=0,this.kr=ja.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ja(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e,n){this.qr={},this.overlays={},this.Qr=new nx(0),this.Kr=!1,this.Kr=!0,this.$r=new _U,this.referenceDelegate=e(this),this.Ur=new SU(this),this.indexManager=new mU,this.remoteDocumentCache=function(s){return new TU(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new hU(n),this.Gr=new xU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new bU(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new CU(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class CU extends l6{constructor(e){super(),this.currentSequenceNumber=e}}class mx{constructor(e){this.persistence=e,this.Jr=new fx,this.Yr=null}static Zr(e){return new mx(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=te.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new px(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return yV()?8:c6(Wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new PU;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(bl()<=ye.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Bo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(bl()<=ye.DEBUG&&Q("QueryEngine","Query:",Bo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(bl()<=ye.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Bo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Er(n))):F.resolve())}Yi(e,n){if(W1(n))return F.resolve(null);let r=Er(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=e0(n,null,"F"),r=Er(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,e0(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return W1(n)||s.isEqual(oe.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(bl()<=ye.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bo(n)),this.rs(e,o,n,s6(s,-1)).next(a=>a))})}ts(e,n){let r=new Et(iI(e));return n.forEach((s,i)=>{fm(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return bl()<=ye.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Bo(n)),this.Ji.getDocumentsMatchingQuery(e,n,ui.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ke(Te),this._s=new Ya(i=>ox(i),ax),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vU(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function RU(t,e,n,r){return new AU(t,e,n,r)}async function EI(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=pe();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function NU(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,m=d.keys();let p=F.resolve();return m.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(v=>{const _=c.docVersions.get(g);Ae(_!==null),v.version.compareTo(_)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function CI(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function DU(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((u,d)=>{const m=s.get(d);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,u.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(i,u.addedDocuments,d)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Pt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),s=s.insert(d,p),function(v,_,w){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,p,u)&&a.push(n.Ur.updateTargetData(i,p))});let l=fs(),c=pe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(MU(i,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(oe.min())){const u=n.Ur.getLastRemoteSnapshotVersion(i).next(d=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function MU(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=fs();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function jU(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OU(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Bs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function i0(t,e,n){const r=ae(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!xu(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function tT(t,e,n){const r=ae(t);let s=oe.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=ae(l),m=d._s.get(u);return m!==void 0?F.resolve(d.os.get(m)):d.Ur.getTargetData(c,u)}(r,o,Er(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:pe())).next(a=>(LU(r,C6(e),a),{documents:a,Ts:i})))}function LU(t,e,n){let r=t.us.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class nT{constructor(){this.activeTargetIds=D6()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VU{constructor(){this.so=new nT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d=null;function Jp(){return _d===null?_d=function(){return 268435456+Math.round(2147483648*Math.random())}():_d++,"0x"+_d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class BU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Jp(),l=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(u=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Ra("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ka}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=UU[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Jp();return new Promise((o,a)=>{const l=new z2;l.setWithCredentials(!0),l.listenOnce(B2.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ih.NO_ERROR:const u=l.getResponseJson();Q(Mt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case ih.TIMEOUT:Q(Mt,`RPC '${e}' ${i} timed out`),a(new G(V.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const d=l.getStatus();if(Q(Mt,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const g=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(w)>=0?w:V.UNKNOWN}(p.status);a(new G(g,p.message))}else a(new G(V.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(V.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{Q(Mt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Q(Mt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Jp(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=H2(),a=W2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");Q(Mt,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=o.createWebChannel(u,l);let m=!1,p=!1;const g=new zU({Io:_=>{p?Q(Mt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(Q(Mt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),Q(Mt,`RPC '${e}' stream ${s} sending:`,_),d.send(_))},To:()=>d.close()}),v=(_,w,x)=>{_.listen(w,b=>{try{x(b)}catch(I){setTimeout(()=>{throw I},0)}})};return v(d,Ol.EventType.OPEN,()=>{p||(Q(Mt,`RPC '${e}' stream ${s} transport opened.`),g.yo())}),v(d,Ol.EventType.CLOSE,()=>{p||(p=!0,Q(Mt,`RPC '${e}' stream ${s} transport closed`),g.So())}),v(d,Ol.EventType.ERROR,_=>{p||(p=!0,Ra(Mt,`RPC '${e}' stream ${s} transport errored:`,_),g.So(new G(V.UNAVAILABLE,"The operation could not be completed")))}),v(d,Ol.EventType.MESSAGE,_=>{var w;if(!p){const x=_.data[0];Ae(!!x);const b=x,I=b.error||((w=b[0])===null||w===void 0?void 0:w.error);if(I){Q(Mt,`RPC '${e}' stream ${s} received error:`,I);const C=I.status;let N=function(E){const A=it[E];if(A!==void 0)return gI(A)}(C),S=I.message;N===void 0&&(N=V.INTERNAL,S="Unknown error status: "+C+" with message "+I.message),p=!0,g.So(new G(N,S)),d.close()}else Q(Mt,`RPC '${e}' stream ${s} received:`,x),g.bo(x)}}),v(a,$2.STAT_EVENT,_=>{_.stat===Ky.PROXY?Q(Mt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Ky.NOPROXY&&Q(Mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function Zp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t){return new J6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new PI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(hs(n.toString()),hs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $U extends II{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=tU(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?Cr(o.readTime):oe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=s0(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Jy(l)?{documents:sU(i,l)}:{query:iU(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xI(i,o.resumeToken);const c=t0(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=af(i,o.snapshotVersion.toTimestamp());const c=t0(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=aU(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=s0(this.serializer),n.removeTarget=e,this.a_(n)}}class WU extends II{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=rU(e.writeResults,e.commitTime),r=Cr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=s0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>nU(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,n0(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,n0(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class qU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hs(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Po(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ae(l);c.L_.add(4),await bu(c),c.q_.set("Unknown"),c.L_.delete(4),await xm(c)}(this))})}),this.q_=new qU(r,s)}}async function xm(t){if(Po(t))for(const e of t.B_)await e(!0)}async function bu(t){for(const e of t.B_)await e(!1)}function AI(t,e){const n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xx(n)?vx(n):Xa(n).r_()&&yx(n,e))}function gx(t,e){const n=ae(t),r=Xa(n);n.N_.delete(e),r.r_()&&RI(n,e),n.N_.size===0&&(r.r_()?r.o_():Po(n)&&n.q_.set("Unknown"))}function yx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xa(t).A_(e)}function RI(t,e){t.Q_.xe(e),Xa(t).R_(e)}function vx(t){t.Q_=new K6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Xa(t).start(),t.q_.v_()}function xx(t){return Po(t)&&!Xa(t).n_()&&t.N_.size>0}function Po(t){return ae(t).L_.size===0}function NI(t){t.Q_=void 0}async function KU(t){t.q_.set("Online")}async function QU(t){t.N_.forEach((e,n)=>{yx(t,e)})}async function YU(t,e){NI(t),xx(t)?(t.q_.M_(e),vx(t)):t.q_.set("Unknown")}async function XU(t,e,n){if(t.q_.set("Online"),e instanceof vI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lf(t,r)}else if(e instanceof lh?t.Q_.Ke(e):e instanceof yI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const r=await CI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(Pt.EMPTY_BYTE_STRING,u.snapshotVersion)),RI(i,l);const d=new Bs(u.target,l,c,u.sequenceNumber);yx(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await lf(t,r)}}async function lf(t,e,n){if(!xu(e))throw e;t.L_.add(1),await bu(t),t.q_.set("Offline"),n||(n=()=>CI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await xm(t)})}function DI(t,e){return e().catch(n=>lf(t,n,e))}async function wm(t){const e=ae(t),n=hi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;JU(e);)try{const s=await jU(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,ZU(e,s)}catch(s){await lf(e,s)}MI(e)&&jI(e)}function JU(t){return Po(t)&&t.O_.length<10}function ZU(t,e){t.O_.push(e);const n=hi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function MI(t){return Po(t)&&!hi(t).n_()&&t.O_.length>0}function jI(t){hi(t).start()}async function ez(t){hi(t).p_()}async function tz(t){const e=hi(t);for(const n of t.O_)e.m_(n.mutations)}async function nz(t,e,n){const r=t.O_.shift(),s=ux.from(r,e,n);await DI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await wm(t)}async function rz(t,e){e&&hi(t).V_&&await async function(r,s){if(function(o){return H6(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();hi(r).s_(),await DI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await wm(r)}}(t,e),MI(t)&&jI(t)}async function sT(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=Po(n);n.L_.add(3),await bu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await xm(n)}async function sz(t,e){const n=ae(t);e?(n.L_.delete(2),await xm(n)):e||(n.L_.add(2),await bu(n),n.q_.set("Unknown"))}function Xa(t){return t.K_||(t.K_=function(n,r,s){const i=ae(n);return i.w_(),new $U(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:KU.bind(null,t),Ro:QU.bind(null,t),mo:YU.bind(null,t),d_:XU.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xx(t)?vx(t):t.q_.set("Unknown")):(await t.K_.stop(),NI(t))})),t.K_}function hi(t){return t.U_||(t.U_=function(n,r,s){const i=ae(n);return i.w_(),new WU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ez.bind(null,t),mo:rz.bind(null,t),f_:tz.bind(null,t),g_:nz.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await wm(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new wx(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _x(t,e){if(hs("AsyncQueue",`${e}: ${t}`),xu(t))return new G(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Ll(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new ya(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ya)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ya;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(){this.W_=new Ke(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Oa{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Oa(e,n,ya.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class oz{constructor(){this.queries=oT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=oT(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new G(V.ABORTED,"Firestore shutting down"))}}function oT(){return new Ya(t=>sI(t),hm)}async function OI(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new iz,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=_x(o,`Initialization of query '${Bo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&bx(n)}async function LI(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function az(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&bx(n)}function lz(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function bx(t){t.Y_.forEach(e=>{e.next()})}var o0,aT;(aT=o0||(o0={})).ea="default",aT.Cache="cache";class VI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==o0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.key=e}}class UI{constructor(e){this.key=e}}class cz{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=iI(e),this.Ra=new ya(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new iT,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const m=s.get(u),p=fm(this.query,d)?d:null,g=!!m&&this.mutatedKeys.has(m.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;m&&p?m.data.isEqual(p.data)?g!==v&&(r.track({type:3,doc:p}),_=!0):this.ga(m,p)||(r.track({type:2,doc:p}),_=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),_=!0):m&&!p&&(r.track({type:1,doc:m}),_=!0,(l||c)&&(a=!0)),_&&(p?(o=o.add(p),i=v?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(p,g){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return v(p)-v(g)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Oa(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new UI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new FI(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Oa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dz{constructor(e){this.key=e,this.va=!1}}class hz{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ya(a=>sI(a),hm),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(te.comparator),this.Na=new Map,this.La=new fx,this.Ba={},this.ka=new Map,this.qa=ja.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function fz(t,e,n=!0){const r=qI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await zI(r,e,n,!0),s}async function mz(t,e){const n=qI(t);await zI(n,e,!0,!1)}async function zI(t,e,n,r){const s=await OU(t.localStore,Er(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await pz(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&AI(t.remoteStore,s),a}async function pz(t,e,n,r,s){t.Ka=(d,m,p)=>async function(v,_,w,x){let b=_.view.ma(w);b.ns&&(b=await tT(v.localStore,_.query,!1).then(({documents:S})=>_.view.ma(S,b)));const I=x&&x.targetChanges.get(_.targetId),C=x&&x.targetMismatches.get(_.targetId)!=null,N=_.view.applyChanges(b,v.isPrimaryClient,I,C);return cT(v,_.targetId,N.wa),N.snapshot}(t,d,m,p);const i=await tT(t.localStore,e,!0),o=new cz(e,i.Ts),a=o.ma(i.documents),l=_u.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);cT(t,n,c.wa);const u=new uz(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function gz(t,e,n){const r=ae(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!hm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await i0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&gx(r.remoteStore,s.targetId),a0(r,s.targetId)}).catch(vu)):(a0(r,s.targetId),await i0(r.localStore,s.targetId,!0))}async function yz(t,e){const n=ae(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gx(n.remoteStore,r.targetId))}async function vz(t,e,n){const r=Sz(t);try{const s=await function(o,a){const l=ae(o),c=pt.now(),u=a.reduce((p,g)=>p.add(g.key),pe());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=fs(),v=pe();return l.cs.getEntries(p,u).next(_=>{g=_,g.forEach((w,x)=>{x.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(_=>{d=_;const w=[];for(const x of a){const b=U6(x,d.get(x.key).overlayedDocument);b!=null&&w.push(new ki(x.key,b,Y2(b.value.mapValue),Jt.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,w,a)}).next(_=>{m=_;const w=_.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(p,_.batchId,w)})}).then(()=>({batchId:m.batchId,changes:aI(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ke(Te)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await Tu(r,s.changes),await wm(r.remoteStore)}catch(s){const i=_x(s,"Failed to persist write");n.reject(i)}}async function BI(t,e){const n=ae(t);try{const r=await DU(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ae(o.va):s.removedDocuments.size>0&&(Ae(o.va),o.va=!1))}),await Tu(n,r,e)}catch(r){await vu(r)}}function lT(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ae(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const m of d.j_)m.Z_(a)&&(c=!0)}),c&&bx(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xz(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ke(te.comparator);o=o.insert(i,Ut.newNoDocument(i,oe.min()));const a=pe().add(i),l=new ym(oe.min(),new Map,new Ke(Te),o,a);await BI(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Tx(r)}else await i0(r.localStore,e,!1).then(()=>a0(r,e,n)).catch(vu)}async function wz(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await NU(n.localStore,e);WI(n,r,null),$I(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tu(n,s)}catch(s){await vu(s)}}async function _z(t,e,n){const r=ae(t);try{const s=await function(o,a){const l=ae(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Ae(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);WI(r,e,n),$I(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Tu(r,s)}catch(s){await vu(s)}}function $I(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function WI(t,e,n){const r=ae(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function a0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||HI(t,r)})}function HI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gx(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Tx(t))}function cT(t,e,n){for(const r of n)r instanceof FI?(t.La.addReference(r.key,e),bz(t,r)):r instanceof UI?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||HI(t,r.key)):ie()}function bz(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),Tx(t))}function Tx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(Le.fromString(e)),r=t.qa.next();t.Na.set(r,new dz(n)),t.Oa=t.Oa.insert(n,r),AI(t.remoteStore,new Bs(Er(lx(n.path)),r,"TargetPurposeLimboResolution",nx.oe))}}async function Tu(t,e,n){const r=ae(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=px.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const u=ae(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(c,m=>F.forEach(m.$i,p=>u.persistence.referenceDelegate.addReference(d,m.targetId,p)).next(()=>F.forEach(m.Ui,p=>u.persistence.referenceDelegate.removeReference(d,m.targetId,p)))))}catch(d){if(!xu(d))throw d;Q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const p=u.os.get(m),g=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(g);u.os=u.os.insert(m,v)}}}(r.localStore,i))}async function Tz(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await EI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new G(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tu(n,r.hs)}}function kz(t,e){const n=ae(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let s=pe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function qI(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xz.bind(null,e),e.Ca.d_=az.bind(null,e.eventManager),e.Ca.$a=lz.bind(null,e.eventManager),e}function Sz(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_z.bind(null,e),e}class cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return RU(this.persistence,new IU,e.initialUser,this.serializer)}Ga(e){return new EU(mx.Zr,this.serializer)}Wa(e){return new VU}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cf.provider={build:()=>new cf};class l0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tz.bind(null,this.syncEngine),await sz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oz}()}createDatastore(e){const n=vm(e.databaseInfo.databaseId),r=function(i){return new BU(i)}(e.databaseInfo);return function(i,o,a,l){return new HU(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new GU(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>lT(this.syncEngine,n,0),function(){return rT.D()?new rT:new FU}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const d=new hz(s,i,o,a,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);Q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await bu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}l0.provider={build:()=>new l0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Vt.UNAUTHENTICATED,this.clientId=G2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_x(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function eg(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await EI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Cz(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>sT(e.remoteStore,s)),t._onlineComponents=e}async function Cz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await eg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ra("Error using user provided cache. Falling back to memory cache: "+n),await eg(t,new cf)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await eg(t,new cf);return t._offlineComponents}async function KI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await uT(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await uT(t,new l0))),t._onlineComponents}function Pz(t){return KI(t).then(e=>e.syncEngine)}async function QI(t){const e=await KI(t),n=e.eventManager;return n.onListen=fz.bind(null,e.syncEngine),n.onUnlisten=gz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yz.bind(null,e.syncEngine),n}function Iz(t,e,n={}){const r=new ns;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new GI({next:m=>{u.Za(),o.enqueueAndForget(()=>LI(i,d));const p=m.docs.has(a);!p&&m.fromCache?c.reject(new G(V.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new G(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new VI(lx(a.path),u,{includeMetadataChanges:!0,_a:!0});return OI(i,d)}(await QI(t),t.asyncQueue,e,n,r)),r.promise}function Az(t,e,n={}){const r=new ns;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new GI({next:m=>{u.Za(),o.enqueueAndForget(()=>LI(i,d)),m.fromCache&&l.source==="server"?c.reject(new G(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new VI(a,u,{includeMetadataChanges:!0,_a:!0});return OI(i,d)}(await QI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t,e,n){if(!n)throw new G(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Rz(t,e,n,r){if(e===!0&&r===!0)throw new G(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hT(t){if(!te.isDocumentKey(t))throw new G(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fT(t){if(te.isDocumentKey(t))throw new G(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _m(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_m(t);throw new G(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Q3;switch(r.type){case"firstParty":return new Z3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=dT.get(n);r&&(Q("ComponentProvider","Removing Datastore"),dT.delete(n),r.terminate())}(this),Promise.resolve()}}function Nz(t,e,n,r={}){var s;const i=(t=Wn(t,bm))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Vt.MOCK_USER;else{a=dV(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Vt(c)}t._authCredentials=new Y3(new q2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Io(this.firestore,e,this._query)}}class Zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class ii extends Io{constructor(e,n,r){super(e,n,lx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new te(e))}withConverter(e){return new ii(this.firestore,e,this._path)}}function Ho(t,e,...n){if(t=rt(t),XI("collection","path",e),t instanceof bm){const r=Le.fromString(e,...n);return fT(r),new ii(t,null,r)}{if(!(t instanceof Zt||t instanceof ii))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return fT(r),new ii(t.firestore,null,r)}}function fe(t,e,...n){if(t=rt(t),arguments.length===1&&(e=G2.newId()),XI("doc","path",e),t instanceof bm){const r=Le.fromString(e,...n);return hT(r),new Zt(t,null,new te(r))}{if(!(t instanceof Zt||t instanceof ii))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return hT(r),new Zt(t.firestore,t instanceof ii?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new PI(this,"async_queue_retry"),this.Vu=()=>{const r=Zp();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Zp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Zp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ns;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xu(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw hs("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=wx.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Si extends bm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new pT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pT(e),this._firestoreClient=void 0,await e}}}function Dz(t,e){const n=typeof t=="object"?t:s2(),r=typeof t=="string"?t:"(default)",s=fu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=cV("firestore");i&&Nz(s,...i)}return s}function Tm(t){if(t._terminated)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Mz(t),t._firestoreClient}function Mz(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new h6(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,YI(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Ez(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this._byteString=e}static fromBase64String(e){try{return new La(Pt.fromBase64String(e))}catch(n){throw new G(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new La(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jz=/^__.*__$/;class Oz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new wu(e,this.data,n,this.fieldTransforms)}}class JI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ki(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ZI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class Cx{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ZI(this.Cu)&&jz.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Lz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||vm(e)}Qu(e,n,r,s=!1){return new Cx({Cu:e,methodName:n,qu:r,path:kt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Su(t){const e=t._freezeSettings(),n=vm(t._databaseId);return new Lz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Px(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Ix("Data must be an object, but it was:",o,r);const a=nA(r,o);let l,c;if(i.merge)l=new xn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const d of i.mergeFields){const m=c0(e,d,n);if(!o.contains(m))throw new G(V.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);sA(u,m)||u.push(m)}l=new xn(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new Oz(new sn(a),l,c)}class km extends kx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof km}}function eA(t,e,n,r){const s=t.Qu(1,e,n);Ix("Data must be an object, but it was:",s,r);const i=[],o=sn.empty();Co(r,(l,c)=>{const u=Ax(e,l,n);c=rt(c);const d=s.Nu(u);if(c instanceof km)i.push(u);else{const m=Eu(c,d);m!=null&&(i.push(u),o.set(u,m))}});const a=new xn(i);return new JI(o,a,s.fieldTransforms)}function tA(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[c0(e,r,n)],l=[s];if(i.length%2!=0)throw new G(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(c0(e,i[m])),l.push(i[m+1]);const c=[],u=sn.empty();for(let m=a.length-1;m>=0;--m)if(!sA(c,a[m])){const p=a[m];let g=l[m];g=rt(g);const v=o.Nu(p);if(g instanceof km)c.push(p);else{const _=Eu(g,v);_!=null&&(c.push(p),u.set(p,_))}}const d=new xn(c);return new JI(u,d,o.fieldTransforms)}function Vz(t,e,n,r=!1){return Eu(n,t.Qu(r?4:3,e))}function Eu(t,e){if(rA(t=rt(t)))return Ix("Unsupported field value:",e,t),nA(t,e);if(t instanceof kx)return function(r,s){if(!ZI(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Eu(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return M6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=pt.fromDate(r);return{timestampValue:af(s.serializer,i)}}if(r instanceof pt){const i=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:af(s.serializer,i)}}if(r instanceof Sx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof La)return{bytesValue:xI(s.serializer,r._byteString)};if(r instanceof Zt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ex)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return cx(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${_m(r)}`)}(t,e)}function nA(t,e){const n={};return K2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(t,(r,s)=>{const i=Eu(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function rA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Sx||t instanceof La||t instanceof Zt||t instanceof kx||t instanceof Ex)}function Ix(t,e,n){if(!rA(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=_m(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function c0(t,e,n){if((e=rt(e))instanceof ku)return e._internalPath;if(typeof e=="string")return Ax(t,e);throw uf("Field path arguments must be of type string or ",t,!1,void 0,n)}const Fz=new RegExp("[~\\*/\\[\\]]");function Ax(t,e,n){if(e.search(Fz)>=0)throw uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ku(...e.split("."))._internalPath}catch{throw uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new G(V.INVALID_ARGUMENT,a+t+l)}function sA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Uz extends iA{data(){return super.data()}}function Sm(t,e){return typeof e=="string"?Ax(t,e):e instanceof ku?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rx{}class oA extends Rx{}function u0(t,e,...n){let r=[];e instanceof Rx&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Nx).length,a=i.filter(l=>l instanceof Em).length;if(o>1||o>0&&a>0)throw new G(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Em extends oA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Em(e,n,r)}_apply(e){const n=this._parse(e);return aA(e._query,n),new Io(e.firestore,e.converter,Zy(e._query,n))}_parse(e){const n=Su(e.firestore);return function(i,o,a,l,c,u,d){let m;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new G(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){yT(d,u);const p=[];for(const g of d)p.push(gT(l,i,g));m={arrayValue:{values:p}}}else m=gT(l,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||yT(d,u),m=Vz(a,o,d,u==="in"||u==="not-in");return lt.create(c,u,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function d0(t,e,n){const r=e,s=Sm("where",t);return Em._create(s,r,n)}class Nx extends Rx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:or.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)aA(o,l),o=Zy(o,l)}(e._query,n),new Io(e.firestore,e.converter,Zy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dx extends oA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Dx(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qc(i,o)}(e._query,this._field,this._direction);return new Io(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Qa(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Bz(t,e="asc"){const n=e,r=Sm("orderBy",t);return Dx._create(r,n)}function gT(t,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new G(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rI(e)&&n.indexOf("/")!==-1)throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!te.isDocumentKey(r))throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return V1(t,new te(r))}if(n instanceof Zt)return V1(t,n._key);throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_m(n)}.`)}function yT(t,e){if(!Array.isArray(t)||t.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aA(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $z{convertValue(e,n="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Co(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ze(o.doubleValue));return new Ex(i)}convertGeoPoint(e){return new Sx(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($c(e));default:return null}}convertTimestamp(e){const n=di(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);Ae(SI(r));const s=new Wc(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||hs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lA extends iA{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ch extends lA{data(e={}){return super.data(e)}}class Wz{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Fl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ch(this._firestore,this._userDataWriter,r.key,r,new Fl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new ch(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Fl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new ch(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Fl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Hz(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Hz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t){t=Wn(t,Zt);const e=Wn(t.firestore,Si);return Iz(Tm(e),t._key).then(n=>qz(e,t,n))}class cA extends $z{constructor(e){super(),this.firestore=e}convertBytes(e){return new La(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}function h0(t){t=Wn(t,Io);const e=Wn(t.firestore,Si),n=Tm(e),r=new cA(e);return zz(t._query),Az(n,t._query).then(s=>new Wz(e,r,t,s))}function $s(t,e,n){t=Wn(t,Zt);const r=Wn(t.firestore,Si),s=Mx(t.converter,e,n);return Cu(r,[Px(Su(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Jt.none())])}function Je(t,e,n,...r){t=Wn(t,Zt);const s=Wn(t.firestore,Si),i=Su(s);let o;return o=typeof(e=rt(e))=="string"||e instanceof ku?tA(i,"updateDoc",t._key,e,n,r):eA(i,"updateDoc",t._key,e),Cu(s,[o.toMutation(t._key,Jt.exists(!0))])}function df(t){return Cu(Wn(t.firestore,Si),[new gm(t._key,Jt.none())])}function xT(t,e){const n=Wn(t.firestore,Si),r=fe(t),s=Mx(t.converter,e);return Cu(n,[Px(Su(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Jt.exists(!1))]).then(()=>r)}function Cu(t,e){return function(r,s){const i=new ns;return r.asyncQueue.enqueueAndForget(async()=>vz(await Pz(r),s,i)),i.promise}(Tm(t),e)}function qz(t,e,n){const r=n.docs.get(e._key),s=new cA(t);return new lA(t,s,e._key,r,new Fl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Su(e)}set(e,n,r){this._verifyNotCommitted();const s=tg(e,this._firestore),i=Mx(s.converter,n,r),o=Px(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Jt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=tg(e,this._firestore);let o;return o=typeof(n=rt(n))=="string"||n instanceof ku?tA(this._dataReader,"WriteBatch.update",i._key,n,r,s):eA(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Jt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=tg(e,this._firestore);return this._mutations=this._mutations.concat(new gm(n._key,Jt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tg(t,e){if((t=rt(t)).firestore!==e)throw new G(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kz(t){return Tm(t=Wn(t,Si)),new Gz(t,e=>Cu(t,e))}(function(e,n=!0){(function(s){Ka=s})(qa),Rr(new ir("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Si(new X3(r.getProvider("auth-internal")),new t6(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wc(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Fn(D1,"4.7.3",e),Fn(D1,"4.7.3","esm2017")})();var Qz="firebase",Yz="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn(Qz,Yz,"app");const uA="@firebase/installations",jx="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=1e4,hA=`w:${jx}`,fA="FIS_v2",Xz="https://firebaseinstallations.googleapis.com/v1",Jz=60*60*1e3,Zz="installations",e9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vo=new Eo(Zz,e9,t9);function mA(t){return t instanceof cr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA({projectId:t}){return`${Xz}/projects/${t}/installations`}function gA(t){return{token:t.token,requestStatus:2,expiresIn:r9(t.expiresIn),creationTime:Date.now()}}async function yA(t,e){const r=(await e.json()).error;return vo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function vA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function n9(t,{refreshToken:e}){const n=vA(t);return n.append("Authorization",s9(e)),n}async function xA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function r9(t){return Number(t.replace("s","000"))}function s9(t){return`${fA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=pA(t),s=vA(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:fA,appId:t.appId,sdkVersion:hA},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await xA(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:gA(c.authToken)}}else throw await yA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=/^[cdef][\w-]{21}$/,f0="";function l9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=c9(t);return a9.test(n)?n:f0}catch{return f0}}function c9(t){return o9(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=new Map;function bA(t,e){const n=Cm(t);TA(n,e),u9(n,e)}function TA(t,e){const n=_A.get(t);if(n)for(const r of n)r(e)}function u9(t,e){const n=d9();n&&n.postMessage({key:t,fid:e}),h9()}let Xi=null;function d9(){return!Xi&&"BroadcastChannel"in self&&(Xi=new BroadcastChannel("[Firebase] FID Change"),Xi.onmessage=t=>{TA(t.data.key,t.data.fid)}),Xi}function h9(){_A.size===0&&Xi&&(Xi.close(),Xi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9="firebase-installations-database",m9=1,xo="firebase-installations-store";let ng=null;function Ox(){return ng||(ng=n2(f9,m9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xo)}}})),ng}async function hf(t,e){const n=Cm(t),s=(await Ox()).transaction(xo,"readwrite"),i=s.objectStore(xo),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&bA(t,e.fid),e}async function kA(t){const e=Cm(t),r=(await Ox()).transaction(xo,"readwrite");await r.objectStore(xo).delete(e),await r.done}async function Pm(t,e){const n=Cm(t),s=(await Ox()).transaction(xo,"readwrite"),i=s.objectStore(xo),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&bA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(t){let e;const n=await Pm(t.appConfig,r=>{const s=p9(r),i=g9(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===f0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function p9(t){const e=t||{fid:l9(),registrationStatus:0};return SA(e)}function g9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(vo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=y9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:v9(t)}:{installationEntry:e}}async function y9(t,e){try{const n=await i9(t,e);return hf(t.appConfig,n)}catch(n){throw mA(n)&&n.customData.serverCode===409?await kA(t.appConfig):await hf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function v9(t){let e=await wT(t.appConfig);for(;e.registrationStatus===1;)await wA(100),e=await wT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Lx(t);return r||n}return e}function wT(t){return Pm(t,e=>{if(!e)throw vo.create("installation-not-found");return SA(e)})}function SA(t){return x9(t)?{fid:t.fid,registrationStatus:0}:t}function x9(t){return t.registrationStatus===1&&t.registrationTime+dA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w9({appConfig:t,heartbeatServiceProvider:e},n){const r=_9(t,n),s=n9(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:hA,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await xA(()=>fetch(r,a));if(l.ok){const c=await l.json();return gA(c)}else throw await yA("Generate Auth Token",l)}function _9(t,{fid:e}){return`${pA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vx(t,e=!1){let n;const r=await Pm(t.appConfig,i=>{if(!EA(i))throw vo.create("not-registered");const o=i.authToken;if(!e&&k9(o))return i;if(o.requestStatus===1)return n=b9(t,e),i;{if(!navigator.onLine)throw vo.create("app-offline");const a=E9(i);return n=T9(t,a),a}});return n?await n:r.authToken}async function b9(t,e){let n=await _T(t.appConfig);for(;n.authToken.requestStatus===1;)await wA(100),n=await _T(t.appConfig);const r=n.authToken;return r.requestStatus===0?Vx(t,e):r}function _T(t){return Pm(t,e=>{if(!EA(e))throw vo.create("not-registered");const n=e.authToken;return C9(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function T9(t,e){try{const n=await w9(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await hf(t.appConfig,r),n}catch(n){if(mA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await kA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await hf(t.appConfig,r)}throw n}}function EA(t){return t!==void 0&&t.registrationStatus===2}function k9(t){return t.requestStatus===2&&!S9(t)}function S9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Jz}function E9(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function C9(t){return t.requestStatus===1&&t.requestTime+dA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P9(t){const e=t,{installationEntry:n,registrationPromise:r}=await Lx(e);return r?r.catch(console.error):Vx(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I9(t,e=!1){const n=t;return await A9(n),(await Vx(n,e)).token}async function A9(t){const{registrationPromise:e}=await Lx(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(t){if(!t||!t.options)throw rg("App Configuration");if(!t.name)throw rg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw rg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function rg(t){return vo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="installations",N9="installations-internal",D9=t=>{const e=t.getProvider("app").getImmediate(),n=R9(e),r=fu(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},M9=t=>{const e=t.getProvider("app").getImmediate(),n=fu(e,CA).getImmediate();return{getId:()=>P9(n),getToken:s=>I9(n,s)}};function j9(){Rr(new ir(CA,D9,"PUBLIC")),Rr(new ir(N9,M9,"PRIVATE"))}j9();Fn(uA,jx);Fn(uA,jx,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="analytics",O9="firebase_id",L9="origin",V9=60*1e3,F9="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new am("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Un=new Eo("analytics","Analytics",U9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(t){if(!t.startsWith(Fx)){const e=Un.create("invalid-gtag-resource",{gtagURL:t});return dn.warn(e.message),""}return t}function PA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function B9(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function $9(t,e){const n=B9("firebase-js-sdk-policy",{createScriptURL:z9}),r=document.createElement("script"),s=`${Fx}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function W9(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function H9(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await PA(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){dn.error(a)}t("config",s,i)}async function q9(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await PA(n);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)i.push(u);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){dn.error(i)}}function G9(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await q9(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await H9(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){dn.error(a)}}return s}function K9(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=G9(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function Q9(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Fx)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=30,X9=1e3;class J9{constructor(e={},n=X9){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const IA=new J9;function Z9(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function eB(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:Z9(r)},i=F9.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Un.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function tB(t,e=IA,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Un.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Un.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new sB;return setTimeout(async()=>{a.abort()},V9),AA({appId:r,apiKey:s,measurementId:i},o,a,e)}async function AA(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=IA){var i;const{appId:o,measurementId:a}=t;try{await nB(r,e)}catch(l){if(a)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await eB(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!rB(c)){if(s.deleteThrottleMetadata(o),a)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?r1(n,s.intervalMillis,Y9):r1(n,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,d),dn.debug(`Calling attemptFetch again in ${u} millis`),AA(t,d,r,s)}}function nB(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function rB(t){if(!(t instanceof cr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class sB{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function iB(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oB(){if(JP())try{await ZP()}catch(t){return dn.warn(Un.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return dn.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function aB(t,e,n,r,s,i,o){var a;const l=tB(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>dn.error(p)),e.push(l);const c=oB().then(p=>{if(p)return r.getId()}),[u,d]=await Promise.all([l,c]);Q9(i)||$9(i,u.measurementId),s("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[L9]="firebase",m.update=!0,d!=null&&(m[O9]=d),s("config",u.measurementId,m),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.app=e}_delete(){return delete oc[this.app.options.appId],Promise.resolve()}}let oc={},TT=[];const kT={};let sg="dataLayer",cB="gtag",ST,RA,ET=!1;function uB(){const t=[];if(XP()&&t.push("This is a browser extension environment."),vV()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Un.create("invalid-analytics-context",{errorInfo:e});dn.warn(n.message)}}function dB(t,e,n){uB();const r=t.options.appId;if(!r)throw Un.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Un.create("no-api-key");if(oc[r]!=null)throw Un.create("already-exists",{id:r});if(!ET){W9(sg);const{wrappedGtag:i,gtagCore:o}=K9(oc,TT,kT,sg,cB);RA=i,ST=o,ET=!0}return oc[r]=aB(t,TT,kT,e,ST,sg,n),new lB(t)}function hB(t,e,n,r){t=rt(t),iB(RA,oc[t.app.options.appId],e,n,r).catch(s=>dn.error(s))}const CT="@firebase/analytics",PT="0.10.8";function fB(){Rr(new ir(bT,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return dB(r,s,n)},"PUBLIC")),Rr(new ir("analytics-internal",t,"PRIVATE")),Fn(CT,PT),Fn(CT,PT,"esm2017");function t(e){try{const n=e.getProvider(bT).getImmediate();return{logEvent:(r,s,i)=>hB(n,r,s,i)}}catch(n){throw Un.create("interop-component-reg-failed",{reason:n})}}}fB();const mB={apiKey:"AIzaSyBMgyg_KLqvZIxViT_qzgxtEHHEp8dkbGU",authDomain:"omnitask-9aceb.firebaseapp.com",projectId:"omnitask-9aceb",storageBucket:"omnitask-9aceb.firebasestorage.app",messagingSenderId:"531435434202",appId:"1:531435434202:web:34a8a4c9f59a661665b5e3",measurementId:"G-RD63ZQPQT2"},NA=r2(mB),Vo=G3(NA),ce=Dz(NA),pB=new Wr,gB=new Hr,ig={theme:"dark",language:"fr",notifications:{enabled:!0,dailyReminder:!0,dailyReminderTime:"09:00",achievementUnlock:!0,streakWarning:!0,weeklyReport:!0},sound:{enabled:!0,volume:.7,taskComplete:!0,levelUp:!0,achievementUnlock:!0},privacy:{publicProfile:!1,showStats:!0,showAchievements:!0}},og={type:"default",baseColor:"#6366f1",icon:""},bd=t=>({userId:t,level:1,currentXP:0,totalXP:0,xpToNextLevel:Vy,currentStreak:0,longestStreak:0,lastCompletedDate:null,tasksCompleted:0,tasksCreated:0,tasksFailed:0,totalFocusTime:0,averageTaskTime:0,categoryStats:{},achievementPoints:0,achievementsUnlocked:[],coins:100,gems:10,dailyXP:0,weeklyXP:0,dailyTasksCompleted:0,weeklyTasksCompleted:0,lastDailyReset:new Date().toISOString(),lastWeeklyReset:new Date().toISOString()}),he=sm()(im((t,e)=>({user:null,firebaseUser:null,gameStats:null,isLoading:!0,isInitialized:!1,isDemo:!1,error:null,initializeAuth:async()=>e().initialize(),initialize:async()=>{const n=e();return n.isDemo&&n.user?(t({isLoading:!1,isInitialized:!0}),Promise.resolve()):new Promise(r=>{try{const s=OF(Vo,async i=>{if(i)try{const o=await vT(fe(ce,"users",i.uid)),a=await vT(fe(ce,"gameStats",i.uid));if(o.exists())t({user:o.data(),gameStats:a.exists()?a.data():bd(i.uid),firebaseUser:i,isLoading:!1,isInitialized:!0});else{const l={id:i.uid,email:i.email||"",username:i.displayName||`User_${i.uid.slice(0,6)}`,avatar:og,createdAt:new Date,lastLoginAt:new Date,settings:ig},c=bd(i.uid);await $s(fe(ce,"users",i.uid),l),await $s(fe(ce,"gameStats",i.uid),c),t({user:l,gameStats:c,firebaseUser:i,isLoading:!1,isInitialized:!0})}}catch(o){console.error("Error loading user data:",o),t({isLoading:!1,isInitialized:!0,error:"Failed to load user data"})}else t({user:null,gameStats:null,firebaseUser:null,isLoading:!1,isInitialized:!0});r()})}catch{console.warn("Firebase auth not configured, demo mode available"),t({isLoading:!1,isInitialized:!0}),r()}})},signInWithEmail:async(n,r)=>{t({isLoading:!0,error:null});try{await DF(Vo,n,r)}catch(s){const i=s instanceof Error?s.message:"Sign in failed";throw t({error:i,isLoading:!1}),s}},signUpWithEmail:async(n,r,s)=>{t({isLoading:!0,error:null});try{const i=await NF(Vo,n,r),o={id:i.user.uid,email:n,username:s,avatar:og,createdAt:new Date,lastLoginAt:new Date,settings:ig},a=bd(i.user.uid);await $s(fe(ce,"users",i.user.uid),o),await $s(fe(ce,"gameStats",i.user.uid),a),t({user:o,gameStats:a,firebaseUser:i.user})}catch(i){const o=i instanceof Error?i.message:"Sign up failed";throw t({error:o,isLoading:!1}),i}},signInWithGoogle:async()=>{t({isLoading:!0,error:null});try{await k1(Vo,pB)}catch(n){const r=n instanceof Error?n.message:"Google sign in failed";throw t({error:r,isLoading:!1}),n}},signInWithGithub:async()=>{t({isLoading:!0,error:null});try{await k1(Vo,gB)}catch(n){const r=n instanceof Error?n.message:"GitHub sign in failed";throw t({error:r,isLoading:!1}),n}},signInDemo:async()=>{t({isLoading:!0,error:null});const n=`demo_${Os()}`,r={id:n,email:"demo@questify.app",username:"DemoHero",avatar:og,createdAt:new Date,lastLoginAt:new Date,settings:ig},s=bd(n);s.coins=500,s.gems=50,t({user:r,gameStats:s,firebaseUser:null,isLoading:!1,isInitialized:!0,isDemo:!0})},signOut:async()=>{const{isDemo:n}=e();try{n||await LF(Vo),t({user:null,gameStats:null,firebaseUser:null,isDemo:!1})}catch(r){const s=r instanceof Error?r.message:"Sign out failed";throw t({error:s}),r}},deleteAccount:async()=>{const{firebaseUser:n,user:r,isDemo:s}=e();if(r){if(s){t({user:null,gameStats:null,firebaseUser:null,isDemo:!1});return}if(n)try{await Promise.all([Je(fe(ce,"users",r.id),{deleted:!0}),Je(fe(ce,"gameStats",r.id),{deleted:!0})]),await n.delete(),t({user:null,gameStats:null,firebaseUser:null})}catch(i){const o=i instanceof Error?i.message:"Delete account failed";throw t({error:o}),i}}},updateProfile:async n=>{const{user:r,isDemo:s}=e();if(!r)return;const i={...r,...n};s||await Je(fe(ce,"users",r.id),n),t({user:i})},updateSettings:async n=>{const{user:r,isDemo:s}=e();if(!r)return;const i={...r.settings,...n};s||await Je(fe(ce,"users",r.id),{settings:i}),t({user:{...r,settings:i}})},updateAvatar:async n=>{const{user:r,isDemo:s}=e();r&&(s||await Je(fe(ce,"users",r.id),{avatar:n}),t({user:{...r,avatar:n}}))},calculateXPForLevel:n=>Math.floor(Vy*Math.pow(ZL,n-1)),calculateLevel:n=>{let r=1,s=Vy,i=0;for(;i+s<=n;)i+=s,r++,s=e().calculateXPForLevel(r);return{level:r,currentXP:n-i,xpToNextLevel:s}},getStreakBonus:()=>{const{gameStats:n}=e();if(!n)return 0;const r=n.currentStreak;let s=0;for(const{days:i,bonus:o}of tV)r>=i&&(s=o);return s},addXP:async n=>{const{gameStats:r,user:s,isDemo:i,getStreakBonus:o,calculateLevel:a}=e();if(!r||!s)return{leveledUp:!1,newLevel:0};const l=o(),c=Math.floor(n*l),u=n+c,d=r.totalXP+u,{level:m,currentXP:p,xpToNextLevel:g}=a(d),v=m>r.level,_={totalXP:d,level:m,currentXP:p,xpToNextLevel:g,dailyXP:r.dailyXP+u,weeklyXP:r.weeklyXP+u};if(i||await Je(fe(ce,"gameStats",s.id),_),t({gameStats:{...r,..._}}),v){const{ACHIEVEMENTS:x}=await Hi(async()=>{const{ACHIEVEMENTS:I}=await Promise.resolve().then(()=>hh);return{ACHIEVEMENTS:I}},void 0),b=e().gameStats;if(b)for(const I of x)I.requirement.type==="level"&&m>=I.requirement.value&&!b.achievementsUnlocked.includes(I.id)&&await e().unlockAchievement(I.id)}const{useQuestStore:w}=await Hi(async()=>{const{useQuestStore:x}=await Promise.resolve().then(()=>m0);return{useQuestStore:x}},void 0);return await w.getState().checkAndUpdateQuests("xp_gained",{amount:u}),{leveledUp:v,newLevel:m}},updateStreak:async()=>{const{gameStats:n,user:r,isDemo:s}=e();if(!n||!r)return;const i=new Date().toISOString().split("T")[0],o=n.lastCompletedDate;let a=n.currentStreak;if(!o)a=1;else{const m=new Date(o),p=new Date(i),g=Math.floor((p.getTime()-m.getTime())/(1e3*60*60*24));g===0||(g===1?a+=1:a=1)}const l={currentStreak:a,longestStreak:Math.max(a,n.longestStreak),lastCompletedDate:i};s||await Je(fe(ce,"gameStats",r.id),l),t({gameStats:{...n,...l}});const{ACHIEVEMENTS:c}=await Hi(async()=>{const{ACHIEVEMENTS:m}=await Promise.resolve().then(()=>hh);return{ACHIEVEMENTS:m}},void 0),u=e().gameStats;if(u)for(const m of c)m.requirement.type==="streak"&&a>=m.requirement.value&&!u.achievementsUnlocked.includes(m.id)&&await e().unlockAchievement(m.id);const{useQuestStore:d}=await Hi(async()=>{const{useQuestStore:m}=await Promise.resolve().then(()=>m0);return{useQuestStore:m}},void 0);await d.getState().checkAndUpdateQuests("streak_updated",{streak:a})},incrementStat:async(n,r=1)=>{const{gameStats:s,user:i,isDemo:o}=e();if(!s||!i)return;const a=s[n];if(typeof a!="number")return;const l={[n]:a+r};o||await Je(fe(ce,"gameStats",i.id),l),t({gameStats:{...s,...l}})},addCoins:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s)return;const o={coins:r.coins+n};i||await Je(fe(ce,"gameStats",s.id),o),t({gameStats:{...r,...o}})},addGems:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s)return;const o={gems:r.gems+n};i||await Je(fe(ce,"gameStats",s.id),o),t({gameStats:{...r,...o}})},spendCoins:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s||r.coins<n)return!1;const o={coins:r.coins-n};return i||await Je(fe(ce,"gameStats",s.id),o),t({gameStats:{...r,...o}}),!0},spendGems:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s||r.gems<n)return!1;const o={gems:r.gems-n};return i||await Je(fe(ce,"gameStats",s.id),o),t({gameStats:{...r,...o}}),!0},unlockAchievement:async n=>{const{gameStats:r,user:s,isDemo:i}=e();if(!r||!s||r.achievementsUnlocked.includes(n))return;const{ACHIEVEMENTS:o}=await Hi(async()=>{const{ACHIEVEMENTS:c}=await Promise.resolve().then(()=>hh);return{ACHIEVEMENTS:c}},void 0),a=o.find(c=>c.id===n),l={achievementsUnlocked:[...r.achievementsUnlocked,n],...a?{totalXP:r.totalXP+a.xpReward,coins:r.coins+a.coinReward,achievementPoints:r.achievementPoints+a.xpReward}:{}};i||await Je(fe(ce,"gameStats",s.id),l),t({gameStats:{...r,...l}})}}),{name:"questify-auth",partialize:t=>({user:t.user,gameStats:t.gameStats,isDemo:t.isDemo})})),yB=(t,e)=>WP[t]+eV[e],vB=t=>Math.floor(WP[t]/2),Dr=sm()(im((t,e)=>({tasks:[],categories:[],filters:{},filter:{status:"all",sortBy:"dueDate",sortDirection:"asc"},sort:{by:"dueDate",order:"asc"},isLoading:!1,selectedTask:null,setFilter:n=>{t(r=>({filter:{...r.filter,...n}}))},updateSubTask:(n,r,s)=>{const{tasks:i}=e(),o=i.find(l=>l.id===n);if(!o||!o.subtasks)return;const a=o.subtasks.map(l=>l.id===r?{...l,...s}:l);t({tasks:i.map(l=>l.id===n?{...l,subtasks:a}:l)})},loadTasks:async n=>{if(t({isLoading:!0}),he.getState().isDemo){t({isLoading:!1});return}try{const s=Ho(ce,"tasks"),i=u0(s,d0("userId","==",n)),a=(await h0(i)).docs.map(l=>{var c,u,d,m,p;return{...l.data(),id:l.id,createdAt:((c=l.data().createdAt)==null?void 0:c.toDate())||new Date,updatedAt:((u=l.data().updatedAt)==null?void 0:u.toDate())||new Date,dueDate:(d=l.data().dueDate)==null?void 0:d.toDate(),completedAt:(m=l.data().completedAt)==null?void 0:m.toDate(),startedAt:(p=l.data().startedAt)==null?void 0:p.toDate()}});t({tasks:a,isLoading:!1})}catch(s){throw console.error("Error loading tasks from Firebase:",s),t({isLoading:!1}),new Error("Impossible de charger les tches. Vrifiez votre connexion.")}},addTask:async n=>{var u;const r=he.getState(),s=(u=r.user)==null?void 0:u.id,i=r.isDemo;if(!s)throw new Error("User not authenticated");const{xp:o,coins:a}=e().calculateTaskRewards(n.difficulty,n.priority),l={title:n.title,description:n.description||"",difficulty:n.difficulty,priority:n.priority,status:n.status||"pending",category:n.category||"personal",recurrence:n.recurrence||"none",userId:s,createdAt:new Date,updatedAt:new Date,xpReward:o,coinReward:a,subtasks:n.subtasks||[],tags:n.tags||[],progress:0,...n.dueDate&&{dueDate:n.dueDate},...n.recurrenceConfig&&{recurrenceConfig:n.recurrenceConfig}};let c;if(i)c={...l,id:Os()};else{const d=await xT(Ho(ce,"tasks"),l);c={...l,id:d.id}}t(d=>({tasks:[...d.tasks,c]}));try{await he.getState().incrementStat("tasksCreated")}catch(d){console.warn("Could not increment stat:",d)}return c},updateTask:async(n,r)=>{const s=he.getState().isDemo,i={updatedAt:new Date};Object.entries(r).forEach(([o,a])=>{a!==void 0&&(i[o]=a)}),s||await Je(fe(ce,"tasks",n),i),t(o=>({tasks:o.tasks.map(a=>a.id===n?{...a,...i}:a)}))},deleteTask:async n=>{if(!he.getState().isDemo)try{await df(fe(ce,"tasks",n))}catch(s){console.warn("Firebase delete failed:",s)}t(s=>{var i;return{tasks:s.tasks.filter(o=>o.id!==n),selectedTask:((i=s.selectedTask)==null?void 0:i.id)===n?null:s.selectedTask}})},completeTask:async n=>{const r=e().tasks.find(a=>a.id===n);if(!r)return{xpGained:0,coinsGained:0};const s=he.getState().isDemo,o={status:"completed",completedAt:new Date,progress:100};if(!s)try{await Je(fe(ce,"tasks",n),o)}catch(a){console.warn("Firebase update failed, continuing locally:",a)}t(a=>({tasks:a.tasks.map(l=>l.id===n?{...l,...o}:l)}));try{const a=he.getState(),{leveledUp:l,newLevel:c}=await a.addXP(r.xpReward);await a.addCoins(r.coinReward),await a.incrementStat("tasksCompleted"),await a.incrementStat("dailyTasksCompleted"),await a.incrementStat("weeklyTasksCompleted"),await a.updateStreak();const{ACHIEVEMENTS:u}=await Hi(async()=>{const{ACHIEVEMENTS:p}=await Promise.resolve().then(()=>hh);return{ACHIEVEMENTS:p}},void 0),d=he.getState().gameStats;if(d){const p=d.tasksCompleted;for(const g of u)g.requirement.type==="tasks_completed"&&p>=g.requirement.value&&!d.achievementsUnlocked.includes(g.id)&&await a.unlockAchievement(g.id)}const{useQuestStore:m}=await Hi(async()=>{const{useQuestStore:p}=await Promise.resolve().then(()=>m0);return{useQuestStore:p}},void 0);return await m.getState().checkAndUpdateQuests("task_completed",{category:r.category,priority:r.priority,difficulty:r.difficulty}),{xpGained:r.xpReward,coinsGained:r.coinReward,leveledUp:l,newLevel:c}}catch(a){return console.warn("Error updating stats:",a),{xpGained:r.xpReward,coinsGained:r.coinReward}}},failTask:async n=>{const r=he.getState().isDemo,s={status:"failed",updatedAt:new Date};if(!r)try{await Je(fe(ce,"tasks",n),s)}catch(i){console.warn("Firebase update failed:",i)}t(i=>({tasks:i.tasks.map(o=>o.id===n?{...o,...s}:o)}));try{await he.getState().incrementStat("tasksFailed")}catch(i){console.warn("Could not increment stat:",i)}},archiveTask:async n=>{const r=he.getState().isDemo,s={status:"archived",updatedAt:new Date};r||await Je(fe(ce,"tasks",n),s),t(i=>({tasks:i.tasks.map(o=>o.id===n?{...o,...s}:o)}))},addSubtask:async(n,r)=>{const s=e().tasks.find(a=>a.id===n);if(!s)return;const i={id:Os(),title:r,completed:!1},o=[...s.subtasks,i];await e().updateTask(n,{subtasks:o})},toggleSubtask:async(n,r)=>{const s=e().tasks.find(l=>l.id===n);if(!s)return;const i=s.subtasks.map(l=>l.id===r?{...l,completed:!l.completed,completedAt:l.completed?void 0:new Date}:l),o=i.filter(l=>l.completed).length,a=Math.round(o/i.length*100);await e().updateTask(n,{subtasks:i,progress:a})},removeSubtask:async(n,r)=>{const s=e().tasks.find(l=>l.id===n);if(!s)return;const i=s.subtasks.filter(l=>l.id!==r),o=i.filter(l=>l.completed).length,a=i.length>0?Math.round(o/i.length*100):0;await e().updateTask(n,{subtasks:i,progress:a})},loadCategories:async n=>{const r=he.getState().isDemo,s=e().categories;if(!(r&&s.length>0)){if(r){const i=$p.map((o,a)=>({...o,id:Os(),userId:n,order:a}));t({categories:i});return}try{const i=Ho(ce,"categories"),o=u0(i,d0("userId","==",n),Bz("order")),a=await h0(o);if(a.empty){const l=Kz(ce),c=$p.map((u,d)=>({...u,id:Os(),userId:n,order:d}));for(const u of c){const d=fe(Ho(ce,"categories"));l.set(d,{...u,id:d.id}),u.id=d.id}await l.commit(),t({categories:c})}else{const l=a.docs.map(c=>({...c.data(),id:c.id}));t({categories:l})}}catch(i){console.error("Error loading categories:",i)}}},addCategory:async n=>{if(he.getState().isDemo){const o={...n,id:Os()};t(a=>({categories:[...a.categories,o]}));return}const s=await xT(Ho(ce,"categories"),n),i={...n,id:s.id};t(o=>({categories:[...o.categories,i]}))},updateCategory:async(n,r)=>{he.getState().isDemo||await Je(fe(ce,"categories",n),r),t(i=>({categories:i.categories.map(o=>o.id===n?{...o,...r}:o)}))},deleteCategory:async n=>{he.getState().isDemo||await df(fe(ce,"categories",n)),t(s=>({categories:s.categories.filter(i=>i.id!==n)}))},setFilters:n=>{t({filters:n})},clearFilters:()=>{t({filters:{}})},setSort:n=>{t({sort:n})},selectTask:n=>{t({selectedTask:n})},getFilteredTasks:()=>{var o,a,l,c;const{tasks:n,filters:r,sort:s}=e();let i=[...n];if((o=r.status)!=null&&o.length&&(i=i.filter(u=>r.status.includes(u.status))),(a=r.priority)!=null&&a.length&&(i=i.filter(u=>r.priority.includes(u.priority))),(l=r.category)!=null&&l.length&&(i=i.filter(u=>u.category&&r.category.includes(u.category))),(c=r.tags)!=null&&c.length&&(i=i.filter(u=>u.tags.some(d=>r.tags.includes(d)))),r.search){const u=r.search.toLowerCase();i=i.filter(d=>{var m;return d.title.toLowerCase().includes(u)||((m=d.description)==null?void 0:m.toLowerCase().includes(u))})}if(r.dueDate){const u=new Date;u.setHours(0,0,0,0);const d=new Date(u);d.setDate(d.getDate()+7);const m=new Date(u);switch(m.setMonth(m.getMonth()+1),r.dueDate){case"today":i=i.filter(p=>p.dueDate&&new Date(p.dueDate).toDateString()===u.toDateString());break;case"week":i=i.filter(p=>p.dueDate&&new Date(p.dueDate)<=d);break;case"month":i=i.filter(p=>p.dueDate&&new Date(p.dueDate)<=m);break;case"overdue":i=i.filter(p=>p.dueDate&&new Date(p.dueDate)<u&&p.status!=="completed");break;case"no_date":i=i.filter(p=>!p.dueDate);break}}return i.sort((u,d)=>{let m=0;switch(s.by){case"dueDate":!u.dueDate&&!d.dueDate?m=0:u.dueDate?d.dueDate?m=new Date(u.dueDate).getTime()-new Date(d.dueDate).getTime():m=-1:m=1;break;case"priority":const p={critical:0,high:1,medium:2,low:3,none:4};m=(p[u.priority]||4)-(p[d.priority]||4);break;case"createdAt":m=new Date(u.createdAt).getTime()-new Date(d.createdAt).getTime();break;case"xpReward":m=u.xpReward-d.xpReward;break;case"title":m=u.title.localeCompare(d.title);break;case"difficulty":const g={trivial:0,easy:1,medium:2,hard:3,epic:4,legendary:5};m=g[u.difficulty]-g[d.difficulty];break}return s.order==="asc"?m:-m}),i},getTasksByStatus:n=>e().tasks.filter(r=>r.status===n),getTasksByCategory:n=>e().tasks.filter(r=>r.category===n),getTodayTasks:()=>{const n=new Date;n.setHours(0,0,0,0);const r=new Date(n);return r.setDate(r.getDate()+1),e().tasks.filter(s=>s.dueDate&&new Date(s.dueDate)>=n&&new Date(s.dueDate)<r&&s.status!=="completed"&&s.status!=="archived")},getOverdueTasks:()=>{const n=new Date;return n.setHours(0,0,0,0),e().tasks.filter(r=>r.dueDate&&new Date(r.dueDate)<n&&r.status!=="completed"&&r.status!=="archived")},calculateTaskRewards:(n,r)=>({xp:yB(n,r),coins:vB(n)}),exportData:()=>{const{tasks:n,categories:r}=e();return{tasks:n,categories:r,exportedAt:new Date().toISOString(),version:"1.0.0"}},importData:n=>{n.tasks&&Array.isArray(n.tasks)&&t({tasks:n.tasks}),n.categories&&Array.isArray(n.categories)&&t({categories:n.categories})},clearAllData:()=>{t({tasks:[],categories:$p.map((n,r)=>({...n,id:`default-${r}`,userId:"",createdAt:new Date().toISOString()}))})}}),{name:"questify-tasks",partialize:t=>({filters:t.filters,sort:t.sort,tasks:t.tasks,categories:t.categories})})),ur=sm()(im(t=>({sidebarOpen:!0,toggleSidebar:()=>t(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarOpen:e=>t({sidebarOpen:e}),isTaskModalOpen:!1,isSettingsModalOpen:!1,isProfileModalOpen:!1,isAchievementModalOpen:!1,isLevelUpModalOpen:!1,newLevel:0,openTaskModal:()=>t({isTaskModalOpen:!0}),closeTaskModal:()=>t({isTaskModalOpen:!1,editingTask:null}),openSettingsModal:()=>t({isSettingsModalOpen:!0}),closeSettingsModal:()=>t({isSettingsModalOpen:!1}),openProfileModal:()=>t({isProfileModalOpen:!0}),closeProfileModal:()=>t({isProfileModalOpen:!1}),openAchievementModal:()=>t({isAchievementModalOpen:!0}),closeAchievementModal:()=>t({isAchievementModalOpen:!1}),showLevelUp:e=>t({isLevelUpModalOpen:!0,newLevel:e}),hideLevelUp:()=>t({isLevelUpModalOpen:!1}),editingTask:null,setEditingTask:e=>t({editingTask:e}),xpGained:null,coinsGained:null,showXPGain:e=>t({xpGained:e}),showCoinsGain:e=>t({coinsGained:e}),hideGains:()=>t({xpGained:null,coinsGained:null}),unlockedAchievement:null,showAchievementUnlock:e=>t({unlockedAchievement:e}),hideAchievementUnlock:()=>t({unlockedAchievement:null}),viewMode:"list",setViewMode:e=>t({viewMode:e}),isMobile:!1,setIsMobile:e=>t({isMobile:e}),theme:"dark",setTheme:e=>t({theme:e}),accentColor:"teal",setAccentColor:e=>t({accentColor:e}),soundEnabled:!0,toggleSound:()=>t(e=>({soundEnabled:!e.soundEnabled})),notificationsEnabled:!0,toggleNotifications:()=>t(e=>({notificationsEnabled:!e.notificationsEnabled}))}),{name:"questify-ui",partialize:t=>({sidebarOpen:t.sidebarOpen,viewMode:t.viewMode,theme:t.theme,accentColor:t.accentColor,soundEnabled:t.soundEnabled,notificationsEnabled:t.notificationsEnabled})})),xB=[{id:"daily_complete_3",type:"daily",title:"Mise en Route",description:"Compltez 3 tches aujourd'hui",icon:"",objectives:[{description:"Complter 3 tches",type:"complete_tasks",target:3}],rewards:{xp:50,coins:20}},{id:"daily_complete_5",type:"daily",title:"Productivit",description:"Compltez 5 tches aujourd'hui",icon:"",objectives:[{description:"Complter 5 tches",type:"complete_tasks",target:5}],rewards:{xp:100,coins:40}},{id:"daily_xp_100",type:"daily",title:"Chasseur d'XP",description:"Gagnez 100 XP aujourd'hui",icon:"",objectives:[{description:"Gagner 100 XP",type:"earn_xp",target:100}],rewards:{xp:25,coins:30}},{id:"daily_high_priority",type:"daily",title:"Priorits",description:"Compltez 2 tches haute priorit",icon:"",objectives:[{description:"Complter 2 tches haute priorit",type:"complete_priority",target:2,priority:"high"}],rewards:{xp:75,coins:35}},{id:"daily_work",type:"daily",title:"Boss du Boulot",description:"Compltez 3 tches de travail",icon:"",objectives:[{description:"Complter 3 tches de travail",type:"complete_category",target:3,category:"Travail"}],rewards:{xp:75,coins:30}},{id:"daily_personal",type:"daily",title:"Temps Personnel",description:"Compltez 2 tches personnelles",icon:"",objectives:[{description:"Complter 2 tches personnelles",type:"complete_category",target:2,category:"Personnel"}],rewards:{xp:50,coins:25}},{id:"daily_health",type:"daily",title:"Vie Saine",description:"Compltez 2 tches sant",icon:"",objectives:[{description:"Complter 2 tches sant",type:"complete_category",target:2,category:"Sant"}],rewards:{xp:50,coins:25}},{id:"daily_variety",type:"daily",title:"Diversit",description:"Compltez des tches dans 3 catgories diffrentes",icon:"",objectives:[{description:"Tche de travail",type:"complete_category",target:1,category:"Travail"},{description:"Tche personnelle",type:"complete_category",target:1,category:"Personnel"},{description:"Tche sant",type:"complete_category",target:1,category:"Sant"}],rewards:{xp:100,coins:50}}],wB=[{id:"weekly_complete_20",type:"weekly",title:"Travailleur Acharn",description:"Compltez 20 tches cette semaine",icon:"",objectives:[{description:"Complter 20 tches",type:"complete_tasks",target:20}],rewards:{xp:300,coins:150,gems:5}},{id:"weekly_complete_35",type:"weekly",title:"Machine de Productivit",description:"Compltez 35 tches cette semaine",icon:"",objectives:[{description:"Complter 35 tches",type:"complete_tasks",target:35}],rewards:{xp:500,coins:250,gems:10}},{id:"weekly_xp_500",type:"weekly",title:"Accumulateur d'XP",description:"Gagnez 500 XP cette semaine",icon:"",objectives:[{description:"Gagner 500 XP",type:"earn_xp",target:500}],rewards:{xp:100,coins:100,gems:3}},{id:"weekly_streak_7",type:"weekly",title:"Constance",description:"Maintenez un streak de 7 jours",icon:"",objectives:[{description:"Streak de 7 jours",type:"maintain_streak",target:7}],rewards:{xp:250,coins:125,gems:5}},{id:"weekly_all_categories",type:"weekly",title:"quilibre de Vie",description:"Compltez des tches dans toutes les catgories",icon:"",objectives:[{description:"Tche de travail",type:"complete_category",target:3,category:"Travail"},{description:"Tche personnelle",type:"complete_category",target:3,category:"Personnel"},{description:"Tche sant",type:"complete_category",target:2,category:"Sant"},{description:"Tche tudes",type:"complete_category",target:2,category:"tudes"},{description:"Tche loisirs",type:"complete_category",target:2,category:"Loisirs"}],rewards:{xp:400,coins:200,gems:8}},{id:"weekly_critical",type:"weekly",title:"Gestion de Crise",description:"Compltez 5 tches critiques",icon:"",objectives:[{description:"Complter 5 tches critiques",type:"complete_priority",target:5,priority:"critical"}],rewards:{xp:350,coins:175,gems:7}}],DA=(t,e)=>[...t].sort(()=>.5-Math.random()).slice(0,e),IT=()=>DA(xB,3),AT=()=>DA(wB,2),Td=(t,e)=>{const n=new Date,r=new Date;return t.type==="daily"?r.setHours(23,59,59,999):t.type==="weekly"?(r.setDate(r.getDate()+(7-r.getDay())),r.setHours(23,59,59,999)):r.setDate(r.getDate()+30),{id:Os(),userId:e,type:t.type,title:t.title,description:t.description,icon:t.icon,objectives:t.objectives.map(s=>({id:Os(),description:s.description,type:s.type,target:s.target,current:0,completed:!1,category:s.category,priority:s.priority})),rewards:t.rewards,startDate:n,endDate:r,completed:!1,claimed:!1}},Pu=sm()(im((t,e)=>({quests:[],isLoading:!1,lastDailyRefresh:null,lastWeeklyRefresh:null,get dailyQuests(){return e().getDailyQuests()},get weeklyQuests(){return e().getWeeklyQuests()},loadQuests:async n=>{t({isLoading:!0});const r=he.getState().isDemo,s=new Date;s.setHours(0,0,0,0);const i=s.toISOString().split("T")[0],o=new Date(s),a=o.getDay(),l=a===0?6:a-1;o.setDate(o.getDate()-l);const c=o.toISOString().split("T")[0],{lastDailyRefresh:u,lastWeeklyRefresh:d}=e();if(console.log("[Quests] Loading quests for user:",n),console.log("[Quests] Today:",i,"Last daily refresh:",u),console.log("[Quests] Week start:",c,"Last weekly refresh:",d),r){const m=e().quests.filter(v=>v.userId===n),p=m.some(v=>v.type==="daily"&&new Date(v.startDate).toDateString()===s.toDateString()),g=m.some(v=>v.type==="weekly"&&new Date(v.startDate)>=o);console.log("[Quests] Has valid daily quests:",p,"Has valid weekly:",g),console.log("[Quests] Existing quests:",m.length),t({isLoading:!1}),(!p||!g)&&(console.log("[Quests] Generating new quests (demo mode)"),await e().generateNewQuests(n));return}try{const m=Ho(ce,"quests"),p=u0(m,d0("userId","==",n)),g=await h0(p);console.log("[Quests] Firebase returned",g.docs.length,"quests");const v=g.docs.map(N=>{var k,E,A;const S=N.data();return{...S,id:N.id,startDate:(k=S.startDate)!=null&&k.toDate?S.startDate.toDate():new Date(S.startDate),endDate:(E=S.endDate)!=null&&E.toDate?S.endDate.toDate():new Date(S.endDate),completedAt:(A=S.completedAt)!=null&&A.toDate?S.completedAt.toDate():S.completedAt?new Date(S.completedAt):void 0}}),_=new Date;_.setHours(0,0,0,0);const w=v.some(N=>N.type==="daily"&&new Date(N.startDate).toDateString()===_.toDateString()),x=new Date(_),b=x.getDay(),I=b===0?6:b-1;x.setDate(x.getDate()-I);const C=v.some(N=>N.type==="weekly"&&new Date(N.startDate)>=x);console.log("[Quests] Firebase - Has valid daily:",w,"weekly:",C),t({quests:v,isLoading:!1}),(!w||!C)&&(console.log("[Quests] Firebase - Generating new quests"),await e().generateNewQuests(n))}catch(m){console.error("[Quests] Error loading quests from Firebase:",m),console.log("[Quests] Falling back to local quest generation"),t({isLoading:!1}),await e().generateNewQuests(n)}},generateNewQuests:async n=>{const{quests:r}=e(),s=he.getState().isDemo,i=new Date;i.setHours(0,0,0,0);const o=i.toISOString().split("T")[0],a=new Date(i),l=a.getDay(),c=l===0?6:l-1;a.setDate(a.getDate()-c);const u=a.toISOString().split("T")[0];console.log("[Quests] Generating new quests for user:",n,"isDemo:",s);const d=r.filter(w=>new Date(w.endDate)<i||w.claimed);if(!s)for(const w of d)try{await df(fe(ce,"quests",w.id))}catch(x){console.warn("[Quests] Error deleting quest (continuing anyway):",x)}let m=r.filter(w=>new Date(w.endDate)>=i&&!w.claimed&&w.userId===n);const p=m.some(w=>w.type==="daily"&&new Date(w.startDate).toDateString()===i.toDateString());let g=!1;if(!p){console.log("[Quests] Generating new daily quests"),m=m.filter(x=>x.type!=="daily");const w=IT();for(const x of w){const b=Td(x,n);if(!s)try{await $s(fe(ce,"quests",b.id),b)}catch(I){console.warn("[Quests] Error saving quest to Firebase (continuing anyway):",I)}m.push(b)}g=!0}const v=m.some(w=>w.type==="weekly"&&new Date(w.startDate)>=a);let _=!1;if(!v){console.log("[Quests] Generating new weekly quests"),m=m.filter(x=>x.type!=="weekly");const w=AT();for(const x of w){const b=Td(x,n);if(!s)try{await $s(fe(ce,"quests",b.id),b)}catch(I){console.warn("[Quests] Error saving weekly quest to Firebase (continuing anyway):",I)}m.push(b)}_=!0}console.log("[Quests] Valid quests after refresh:",m.length),t({quests:m,lastDailyRefresh:g?o:e().lastDailyRefresh||o,lastWeeklyRefresh:_?u:e().lastWeeklyRefresh||u})},forceRegenerateQuests:async n=>{const r=he.getState().isDemo;console.log("[Quests] Force regenerating all quests for user:",n,"isDemo:",r);const{quests:s}=e();if(!r)for(const g of s)try{await df(fe(ce,"quests",g.id))}catch(v){console.warn("[Quests] Error deleting quest (continuing anyway):",v)}t({quests:[],lastDailyRefresh:null,lastWeeklyRefresh:null});const i=new Date;i.setHours(0,0,0,0);const o=i.toISOString().split("T")[0],a=new Date(i),l=a.getDay(),c=l===0?6:l-1;a.setDate(a.getDate()-c);const u=a.toISOString().split("T")[0],d=[],m=IT();for(const g of m){const v=Td(g,n);if(!r)try{await $s(fe(ce,"quests",v.id),v)}catch(_){console.warn("[Quests] Error saving daily quest to Firebase (continuing anyway):",_)}d.push(v)}const p=AT();for(const g of p){const v=Td(g,n);if(!r)try{await $s(fe(ce,"quests",v.id),v)}catch(_){console.warn("[Quests] Error saving weekly quest to Firebase (continuing anyway):",_)}d.push(v)}console.log("[Quests] Generated",d.length,"new quests"),t({quests:d,lastDailyRefresh:o,lastWeeklyRefresh:u})},updateQuestProgress:async(n,r,s)=>{const i=e().quests.find(u=>u.id===n);if(!i)return;const o=he.getState().isDemo,a=i.objectives.map(u=>{if(u.id===r){const d=Math.min(u.current+s,u.target);return{...u,current:d,completed:d>=u.target}}return u}),l=a.every(u=>u.completed),c={objectives:a,completed:l,completedAt:l?new Date:void 0};if(!o)try{await Je(fe(ce,"quests",n),c)}catch(u){console.warn("[Quests] Error updating quest progress in Firebase:",u)}t(u=>({quests:u.quests.map(d=>d.id===n?{...d,...c}:d)}))},completeQuest:async n=>{const r=he.getState().isDemo,s={completed:!0,completedAt:new Date};if(!r)try{await Je(fe(ce,"quests",n),s)}catch(i){console.warn("[Quests] Error completing quest in Firebase:",i)}t(i=>({quests:i.quests.map(o=>o.id===n?{...o,...s}:o)}))},claimQuestRewards:async n=>{const r=e().quests.find(a=>a.id===n);if(!r||!r.completed||r.claimed)return{xp:0,coins:0};const s=he.getState().isDemo,{rewards:i}=r,o=he.getState();if(await o.addXP(i.xp),await o.addCoins(i.coins),i.gems&&await o.addGems(i.gems),!s)try{await Je(fe(ce,"quests",n),{claimed:!0})}catch(a){console.warn("[Quests] Error claiming quest in Firebase:",a)}return t(a=>({quests:a.quests.map(l=>l.id===n?{...l,claimed:!0}:l)})),i},getDailyQuests:()=>{const n=new Date;return n.setHours(0,0,0,0),e().quests.filter(r=>r.type==="daily"&&new Date(r.startDate).toDateString()===n.toDateString())},getWeeklyQuests:()=>{const n=new Date;n.setHours(0,0,0,0);const r=new Date(n),s=r.getDay(),i=s===0?6:s-1;return r.setDate(r.getDate()-i),e().quests.filter(o=>o.type==="weekly"&&new Date(o.startDate)>=r)},claimQuestReward:async n=>e().claimQuestRewards(n),refreshQuests:async()=>{const n=he.getState().user;n&&await e().loadQuests(n.id)},getActiveQuests:()=>{const n=new Date;return e().quests.filter(r=>!r.completed&&new Date(r.endDate)>=n)},getCompletedQuests:()=>e().quests.filter(n=>n.completed),checkAndUpdateQuests:async(n,r)=>{const{quests:s}=e(),i=s.filter(o=>!o.completed);console.log("[Quest Update] Action:",n,"Data:",r),console.log("[Quest Update] Active quests:",i.length);for(const o of i)for(const a of o.objectives){if(a.completed)continue;let l=0;switch(a.type){case"complete_tasks":n==="task_completed"&&(l=1,console.log("[Quest Update] Task completed, progress +1 for quest:",o.title));break;case"complete_category":n==="task_completed"&&(r==null?void 0:r.category)===a.category&&(l=1,console.log("[Quest Update] Category task completed:",r==null?void 0:r.category,"(expected:",a.category,")"));break;case"earn_xp":n==="xp_gained"&&typeof(r==null?void 0:r.amount)=="number"&&(l=r.amount,console.log("[Quest Update] XP gained:",r.amount));break;case"complete_priority":n==="task_completed"&&(r==null?void 0:r.priority)===a.priority&&(l=1,console.log("[Quest Update] Priority task completed:",r==null?void 0:r.priority,"(expected:",a.priority,")"));break;case"maintain_streak":if(n==="streak_updated"&&typeof(r==null?void 0:r.streak)=="number"){const c=Math.min(r.streak,a.target);c>a.current&&(l=c-a.current,console.log("[Quest Update] Streak updated:",r.streak))}break}l>0&&(console.log("[Quest Update] Updating objective progress:",a.description,"+",l),await e().updateQuestProgress(o.id,a.id,l))}}}),{name:"questify-quests"})),m0=Object.freeze(Object.defineProperty({__proto__:null,useQuestStore:Pu},Symbol.toStringTag,{value:"Module"})),MA=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Im=M.createContext({}),Am=M.createContext(null),Rm=typeof document<"u",Ux=Rm?M.useLayoutEffect:M.useEffect,jA=M.createContext({strict:!1}),zx=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),_B="framerAppearId",OA="data-"+zx(_B);function bB(t,e,n,r){const{visualElement:s}=M.useContext(Im),i=M.useContext(jA),o=M.useContext(Am),a=M.useContext(MA).reducedMotion,l=M.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;M.useInsertionEffect(()=>{c&&c.update(n,o)});const u=M.useRef(!!(n[OA]&&!window.HandoffComplete));return Ux(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),M.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function sa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function TB(t,e,n){return M.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):sa(n)&&(n.current=r))},[e])}function Qc(t){return typeof t=="string"||Array.isArray(t)}function Nm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Bx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$x=["initial",...Bx];function Dm(t){return Nm(t.animate)||$x.some(e=>Qc(t[e]))}function LA(t){return!!(Dm(t)||t.variants)}function kB(t,e){if(Dm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Qc(n)?n:void 0,animate:Qc(r)?r:void 0}}return t.inherit!==!1?e:{}}function SB(t){const{initial:e,animate:n}=kB(t,M.useContext(Im));return M.useMemo(()=>({initial:e,animate:n}),[RT(e),RT(n)])}function RT(t){return Array.isArray(t)?t.join(" "):t}const NT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yc={};for(const t in NT)Yc[t]={isEnabled:e=>NT[t].some(n=>!!e[n])};function EB(t){for(const e in t)Yc[e]={...Yc[e],...t[e]}}const Wx=M.createContext({}),VA=M.createContext({}),CB=Symbol.for("motionComponentSymbol");function PB({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&EB(t);function i(a,l){let c;const u={...M.useContext(MA),...a,layoutId:IB(a)},{isStatic:d}=u,m=SB(a),p=r(a,d);if(!d&&Rm){m.visualElement=bB(s,p,u,e);const g=M.useContext(VA),v=M.useContext(jA).strict;m.visualElement&&(c=m.visualElement.loadFeatures(u,v,t,g))}return M.createElement(Im.Provider,{value:m},c&&m.visualElement?M.createElement(c,{visualElement:m.visualElement,...u}):null,n(s,a,TB(p,m.visualElement,l),p,d,m.visualElement))}const o=M.forwardRef(i);return o[CB]=s,o}function IB({layoutId:t}){const e=M.useContext(Wx).id;return e&&t!==void 0?e+"-"+t:t}function AB(t){function e(r,s={}){return PB(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const RB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hx(t){return typeof t!="string"||t.includes("-")?!1:!!(RB.indexOf(t)>-1||/[A-Z]/.test(t))}const ff={};function NB(t){Object.assign(ff,t)}const Iu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ao=new Set(Iu);function FA(t,{layout:e,layoutId:n}){return Ao.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ff[t]||t==="opacity")}const fn=t=>!!(t&&t.getVelocity),DB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},MB=Iu.length;function jB(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<MB;o++){const a=Iu[o];if(t[a]!==void 0){const l=DB[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const UA=t=>e=>typeof e=="string"&&e.startsWith(t),zA=UA("--"),p0=UA("var(--"),OB=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,LB=(t,e)=>e&&typeof t=="number"?e.transform(t):t,fi=(t,e,n)=>Math.min(Math.max(n,t),e),Ro={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ac={...Ro,transform:t=>fi(0,1,t)},kd={...Ro,default:1},lc=t=>Math.round(t*1e5)/1e5,Mm=/(-)?([\d]*\.?[\d])+/g,BA=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,VB=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Au(t){return typeof t=="string"}const Ru=t=>({test:e=>Au(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Cs=Ru("deg"),Pr=Ru("%"),re=Ru("px"),FB=Ru("vh"),UB=Ru("vw"),DT={...Pr,parse:t=>Pr.parse(t)/100,transform:t=>Pr.transform(t*100)},MT={...Ro,transform:Math.round},$A={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,size:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,rotate:Cs,rotateX:Cs,rotateY:Cs,rotateZ:Cs,scale:kd,scaleX:kd,scaleY:kd,scaleZ:kd,skew:Cs,skewX:Cs,skewY:Cs,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:ac,originX:DT,originY:DT,originZ:re,zIndex:MT,fillOpacity:ac,strokeOpacity:ac,numOctaves:MT};function qx(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const d in e){const m=e[d];if(zA(d)){i[d]=m;continue}const p=$A[d],g=LB(m,p);if(Ao.has(d)){if(l=!0,o[d]=g,!u)continue;m!==(p.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,a[d]=g):s[d]=g}if(e.transform||(l||r?s.transform=jB(t.transform,n,u,r):s.transform&&(s.transform="none")),c){const{originX:d="50%",originY:m="50%",originZ:p=0}=a;s.transformOrigin=`${d} ${m} ${p}`}}const Gx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function WA(t,e,n){for(const r in e)!fn(e[r])&&!FA(r,n)&&(t[r]=e[r])}function zB({transformTemplate:t},e,n){return M.useMemo(()=>{const r=Gx();return qx(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function BB(t,e,n){const r=t.style||{},s={};return WA(s,r,t),Object.assign(s,zB(t,e,n)),t.transformValues?t.transformValues(s):s}function $B(t,e,n){const r={},s=BB(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const WB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||WB.has(t)}let HA=t=>!mf(t);function HB(t){t&&(HA=e=>e.startsWith("on")?!mf(e):t(e))}try{HB(require("@emotion/is-prop-valid").default)}catch{}function qB(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(HA(s)||n===!0&&mf(s)||!e&&!mf(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function jT(t,e,n){return typeof t=="string"?t:re.transform(e+n*t)}function GB(t,e,n){const r=jT(e,t.x,t.width),s=jT(n,t.y,t.height);return`${r} ${s}`}const KB={offset:"stroke-dashoffset",array:"stroke-dasharray"},QB={offset:"strokeDashoffset",array:"strokeDasharray"};function YB(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?KB:QB;t[i.offset]=re.transform(-r);const o=re.transform(e),a=re.transform(n);t[i.array]=`${o} ${a}`}function Kx(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d,m){if(qx(t,c,u,m),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g,dimensions:v}=t;p.transform&&(v&&(g.transform=p.transform),delete p.transform),v&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=GB(v,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&YB(p,o,a,l,!1)}const qA=()=>({...Gx(),attrs:{}}),Qx=t=>typeof t=="string"&&t.toLowerCase()==="svg";function XB(t,e,n,r){const s=M.useMemo(()=>{const i=qA();return Kx(i,e,{enableHardwareAcceleration:!1},Qx(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};WA(i,t.style,t),s.style={...i,...s.style}}return s}function JB(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(Hx(n)?XB:$B)(r,i,o,n),u={...qB(r,typeof n=="string",t),...l,ref:s},{children:d}=r,m=M.useMemo(()=>fn(d)?d.get():d,[d]);return M.createElement(n,{...u,children:m})}}function GA(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const KA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QA(t,e,n,r){GA(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(KA.has(s)?s:zx(s),e.attrs[s])}function Yx(t,e){const{style:n}=t,r={};for(const s in n)(fn(n[s])||e.style&&fn(e.style[s])||FA(s,t))&&(r[s]=n[s]);return r}function YA(t,e){const n=Yx(t,e);for(const r in t)if(fn(t[r])||fn(e[r])){const s=Iu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function Xx(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function XA(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const pf=t=>Array.isArray(t),ZB=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),e$=t=>pf(t)?t[t.length-1]||0:t;function uh(t){const e=fn(t)?t.get():t;return ZB(e)?e.toValue():e}function t$({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:n$(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const JA=t=>(e,n)=>{const r=M.useContext(Im),s=M.useContext(Am),i=()=>t$(t,e,r,s);return n?i():XA(i)};function n$(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=uh(i[m]);let{initial:o,animate:a}=t;const l=Dm(t),c=LA(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;return d&&typeof d!="boolean"&&!Nm(d)&&(Array.isArray(d)?d:[d]).forEach(p=>{const g=Xx(t,p);if(!g)return;const{transitionEnd:v,transition:_,...w}=g;for(const x in w){let b=w[x];if(Array.isArray(b)){const I=u?b.length-1:0;b=b[I]}b!==null&&(s[x]=b)}for(const x in v)s[x]=v[x]}),s}const tt=t=>t;class OT{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function r$(t){let e=new OT,n=new OT,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const d=u&&s,m=d?e:n;return c&&o.add(l),m.add(l)&&d&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];u(l),o.has(u)&&(a.schedule(u),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const Sd=["prepare","read","update","preRender","render","postRender"],s$=40;function i$(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Sd.reduce((d,m)=>(d[m]=r$(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,s$),1),s.timestamp=d,s.isProcessing=!0,Sd.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:Sd.reduce((d,m)=>{const p=i[m];return d[m]=(g,v=!1,_=!1)=>(n||l(),p.schedule(g,v,_)),d},{}),cancel:d=>Sd.forEach(m=>i[m].cancel(d)),state:s,steps:i}}const{schedule:De,cancel:ms,state:Ot,steps:ag}=i$(typeof requestAnimationFrame<"u"?requestAnimationFrame:tt,!0),o$={useVisualState:JA({scrapeMotionValuesFromProps:YA,createRenderState:qA,onMount:(t,e,{renderState:n,latestValues:r})=>{De.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),De.render(()=>{Kx(n,r,{enableHardwareAcceleration:!1},Qx(e.tagName),t.transformTemplate),QA(e,n)})}})},a$={useVisualState:JA({scrapeMotionValuesFromProps:Yx,createRenderState:Gx})};function l$(t,{forwardMotionProps:e=!1},n,r){return{...Hx(t)?o$:a$,preloadedFeatures:n,useRender:JB(e),createVisualElement:r,Component:t}}function Xr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const ZA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function jm(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const c$=t=>e=>ZA(e)&&t(e,jm(e));function rs(t,e,n,r){return Xr(t,e,c$(n),r)}const u$=(t,e)=>n=>e(t(n)),oi=(...t)=>t.reduce(u$);function eR(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const LT=eR("dragHorizontal"),VT=eR("dragVertical");function tR(t){let e=!1;if(t==="y")e=VT();else if(t==="x")e=LT();else{const n=LT(),r=VT();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function nR(){const t=tR(!0);return t?(t(),!1):!0}class Ei{constructor(e){this.isMounted=!1,this.node=e}update(){}}function FT(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||nR())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&De.update(()=>a[r](i,o))};return rs(t.current,n,s,{passive:!t.getProps()[r]})}class d$ extends Ei{mount(){this.unmount=oi(FT(this.node,!0),FT(this.node,!1))}unmount(){}}class h$ extends Ei{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=oi(Xr(this.node.current,"focus",()=>this.onFocus()),Xr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const rR=(t,e)=>e?t===e?!0:rR(t,e.parentElement):!1;function lg(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,jm(n))}class f$ extends Ei{constructor(){super(...arguments),this.removeStartListeners=tt,this.removeEndListeners=tt,this.removeAccessibleListeners=tt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=rs(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps();De.update(()=>{!d&&!rR(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=rs(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=oi(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||lg("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&De.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=Xr(this.node.current,"keyup",o),lg("down",(a,l)=>{this.startPress(a,l)})},n=Xr(this.node.current,"keydown",e),r=()=>{this.isPressing&&lg("cancel",(i,o)=>this.cancelPress(i,o))},s=Xr(this.node.current,"blur",r);this.removeAccessibleListeners=oi(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&De.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!nR()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&De.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=rs(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Xr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=oi(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const g0=new WeakMap,cg=new WeakMap,m$=t=>{const e=g0.get(t.target);e&&e(t)},p$=t=>{t.forEach(m$)};function g$({root:t,...e}){const n=t||document;cg.has(n)||cg.set(n,{});const r=cg.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(p$,{root:t,...e})),r[s]}function y$(t,e,n){const r=g$(e);return g0.set(t,n),r.observe(t),()=>{g0.delete(t),r.unobserve(t)}}const v$={some:0,all:1};class x$ extends Ei{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:v$[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),m=c?u:d;m&&m(l)};return y$(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(w$(e,n))&&this.startObserver()}unmount(){}}function w$({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const _$={inView:{Feature:x$},tap:{Feature:f$},focus:{Feature:h$},hover:{Feature:d$}};function sR(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function b$(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function T$(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Om(t,e,n){const r=t.getProps();return Xx(r,e,n!==void 0?n:r.custom,b$(t),T$(t))}let Jx=tt;const so=t=>t*1e3,ss=t=>t/1e3,k$={current:!1},iR=t=>Array.isArray(t)&&typeof t[0]=="number";function oR(t){return!!(!t||typeof t=="string"&&aR[t]||iR(t)||Array.isArray(t)&&t.every(oR))}const Ul=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,aR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ul([0,.65,.55,1]),circOut:Ul([.55,0,1,.45]),backIn:Ul([.31,.01,.66,-.59]),backOut:Ul([.33,1.53,.69,.99])};function lR(t){if(t)return iR(t)?Ul(t):Array.isArray(t)?t.map(lR):aR[t]}function S$(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=lR(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function E$(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const cR=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,C$=1e-7,P$=12;function I$(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=cR(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>C$&&++a<P$);return o}function Nu(t,e,n,r){if(t===e&&n===r)return tt;const s=i=>I$(i,0,1,t,n);return i=>i===0||i===1?i:cR(s(i),e,r)}const A$=Nu(.42,0,1,1),R$=Nu(0,0,.58,1),uR=Nu(.42,0,.58,1),N$=t=>Array.isArray(t)&&typeof t[0]!="number",dR=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hR=t=>e=>1-t(1-e),Zx=t=>1-Math.sin(Math.acos(t)),fR=hR(Zx),D$=dR(Zx),mR=Nu(.33,1.53,.69,.99),ew=hR(mR),M$=dR(ew),j$=t=>(t*=2)<1?.5*ew(t):.5*(2-Math.pow(2,-10*(t-1))),O$={linear:tt,easeIn:A$,easeInOut:uR,easeOut:R$,circIn:Zx,circInOut:D$,circOut:fR,backIn:ew,backInOut:M$,backOut:mR,anticipate:j$},UT=t=>{if(Array.isArray(t)){Jx(t.length===4);const[e,n,r,s]=t;return Nu(e,n,r,s)}else if(typeof t=="string")return O$[t];return t},tw=(t,e)=>n=>!!(Au(n)&&VB.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),pR=(t,e,n)=>r=>{if(!Au(r))return r;const[s,i,o,a]=r.match(Mm);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},L$=t=>fi(0,255,t),ug={...Ro,transform:t=>Math.round(L$(t))},Ji={test:tw("rgb","red"),parse:pR("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ug.transform(t)+", "+ug.transform(e)+", "+ug.transform(n)+", "+lc(ac.transform(r))+")"};function V$(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const y0={test:tw("#"),parse:V$,transform:Ji.transform},ia={test:tw("hsl","hue"),parse:pR("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Pr.transform(lc(e))+", "+Pr.transform(lc(n))+", "+lc(ac.transform(r))+")"},Qt={test:t=>Ji.test(t)||y0.test(t)||ia.test(t),parse:t=>Ji.test(t)?Ji.parse(t):ia.test(t)?ia.parse(t):y0.parse(t),transform:t=>Au(t)?t:t.hasOwnProperty("red")?Ji.transform(t):ia.transform(t)},$e=(t,e,n)=>-n*t+n*e+t;function dg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function F$({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=dg(l,a,t+1/3),i=dg(l,a,t),o=dg(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const hg=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},U$=[y0,Ji,ia],z$=t=>U$.find(e=>e.test(t));function zT(t){const e=z$(t);let n=e.parse(t);return e===ia&&(n=F$(n)),n}const gR=(t,e)=>{const n=zT(t),r=zT(e),s={...n};return i=>(s.red=hg(n.red,r.red,i),s.green=hg(n.green,r.green,i),s.blue=hg(n.blue,r.blue,i),s.alpha=$e(n.alpha,r.alpha,i),Ji.transform(s))};function B$(t){var e,n;return isNaN(t)&&Au(t)&&(((e=t.match(Mm))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(BA))===null||n===void 0?void 0:n.length)||0)>0}const yR={regex:OB,countKey:"Vars",token:"${v}",parse:tt},vR={regex:BA,countKey:"Colors",token:"${c}",parse:Qt.parse},xR={regex:Mm,countKey:"Numbers",token:"${n}",parse:Ro.parse};function fg(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function gf(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&fg(n,yR),fg(n,vR),fg(n,xR),n}function wR(t){return gf(t).values}function _R(t){const{values:e,numColors:n,numVars:r,tokenised:s}=gf(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(yR.token,o[l]):l<r+n?a=a.replace(vR.token,Qt.transform(o[l])):a=a.replace(xR.token,lc(o[l]));return a}}const $$=t=>typeof t=="number"?0:t;function W$(t){const e=wR(t);return _R(t)(e.map($$))}const mi={test:B$,parse:wR,createTransformer:_R,getAnimatableNone:W$},bR=(t,e)=>n=>`${n>0?e:t}`;function TR(t,e){return typeof t=="number"?n=>$e(t,e,n):Qt.test(t)?gR(t,e):t.startsWith("var(")?bR(t,e):SR(t,e)}const kR=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>TR(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},H$=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=TR(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},SR=(t,e)=>{const n=mi.createTransformer(e),r=gf(t),s=gf(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?oi(kR(r.values,s.values),n):bR(t,e)},Xc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},BT=(t,e)=>n=>$e(t,e,n);function q$(t){return typeof t=="number"?BT:typeof t=="string"?Qt.test(t)?gR:SR:Array.isArray(t)?kR:typeof t=="object"?H$:BT}function G$(t,e,n){const r=[],s=n||q$(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||tt:e;a=oi(l,a)}r.push(a)}return r}function ER(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Jx(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=G$(e,r,s),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const d=Xc(t[u],t[u+1],c);return o[u](d)};return n?c=>l(fi(t[0],t[i-1],c)):l}function K$(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Xc(0,e,r);t.push($e(n,1,s))}}function Q$(t){const e=[0];return K$(e,t.length-1),e}function Y$(t,e){return t.map(n=>n*e)}function X$(t,e){return t.map(()=>e||uR).splice(0,t.length-1)}function yf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=N$(r)?r.map(UT):UT(r),i={done:!1,value:e[0]},o=Y$(n&&n.length===e.length?n:Q$(e),t),a=ER(o,e,{ease:Array.isArray(s)?s:X$(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function CR(t,e){return e?t*(1e3/e):0}const J$=5;function PR(t,e,n){const r=Math.max(e-J$,0);return CR(n-t(r),e-r)}const mg=.001,Z$=.01,eW=10,tW=.05,nW=1;function rW({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=fi(tW,nW,o),t=fi(Z$,eW,ss(t)),o<1?(s=c=>{const u=c*o,d=u*t,m=u-n,p=v0(c,o),g=Math.exp(-d);return mg-m/p*g},i=c=>{const d=c*o*t,m=d*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-d),v=v0(Math.pow(c,2),o);return(-s(c)+mg>0?-1:1)*((m-p)*g)/v}):(s=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-mg+u*d},i=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=iW(s,i,a);if(t=so(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const sW=12;function iW(t,e,n){let r=n;for(let s=1;s<sW;s++)r=r-t(r)/e(r);return r}function v0(t,e){return t*Math.sqrt(1-e*e)}const oW=["duration","bounce"],aW=["stiffness","damping","mass"];function $T(t,e){return e.some(n=>t[n]!==void 0)}function lW(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!$T(t,aW)&&$T(t,oW)){const n=rW(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function IR({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:u,velocity:d,isResolvedFromDuration:m}=lW({...r,velocity:-ss(r.velocity||0)}),p=d||0,g=l/(2*Math.sqrt(a*c)),v=i-s,_=ss(Math.sqrt(a/c)),w=Math.abs(v)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let x;if(g<1){const b=v0(_,g);x=I=>{const C=Math.exp(-g*_*I);return i-C*((p+g*_*v)/b*Math.sin(b*I)+v*Math.cos(b*I))}}else if(g===1)x=b=>i-Math.exp(-_*b)*(v+(p+_*v)*b);else{const b=_*Math.sqrt(g*g-1);x=I=>{const C=Math.exp(-g*_*I),N=Math.min(b*I,300);return i-C*((p+g*_*v)*Math.sinh(N)+b*v*Math.cosh(N))/b}}return{calculatedDuration:m&&u||null,next:b=>{const I=x(b);if(m)o.done=b>=u;else{let C=p;b!==0&&(g<1?C=PR(x,b,I):C=0);const N=Math.abs(C)<=n,S=Math.abs(i-I)<=e;o.done=N&&S}return o.value=o.done?i:I,o}}}function WT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],m={done:!1,value:d},p=k=>a!==void 0&&k<a||l!==void 0&&k>l,g=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let v=n*e;const _=d+v,w=o===void 0?_:o(_);w!==_&&(v=w-d);const x=k=>-v*Math.exp(-k/r),b=k=>w+x(k),I=k=>{const E=x(k),A=b(k);m.done=Math.abs(E)<=c,m.value=m.done?w:A};let C,N;const S=k=>{p(m.value)&&(C=k,N=IR({keyframes:[m.value,g(m.value)],velocity:PR(b,k,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return S(0),{calculatedDuration:null,next:k=>{let E=!1;return!N&&C===void 0&&(E=!0,I(k),S(k)),C!==void 0&&k>C?N.next(k-C):(!E&&I(k),m)}}}const cW=t=>{const e=({timestamp:n})=>t(n);return{start:()=>De.update(e,!0),stop:()=>ms(e),now:()=>Ot.isProcessing?Ot.timestamp:performance.now()}},HT=2e4;function qT(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<HT;)e+=n,r=t.next(e);return e>=HT?1/0:e}const uW={decay:WT,inertia:WT,tween:yf,keyframes:yf,spring:IR};function vf({autoplay:t=!0,delay:e=0,driver:n=cW,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d,...m}){let p=1,g=!1,v,_;const w=()=>{_=new Promise(Z=>{v=Z})};w();let x;const b=uW[s]||yf;let I;b!==yf&&typeof r[0]!="number"&&(I=ER([0,100],r,{clamp:!1}),r=[0,100]);const C=b({...m,keyframes:r});let N;a==="mirror"&&(N=b({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let S="idle",k=null,E=null,A=null;C.calculatedDuration===null&&i&&(C.calculatedDuration=qT(C));const{calculatedDuration:D}=C;let j=1/0,R=1/0;D!==null&&(j=D+o,R=j*(i+1)-o);let z=0;const H=Z=>{if(E===null)return;p>0&&(E=Math.min(E,Z)),p<0&&(E=Math.min(Z-R/p,E)),k!==null?z=k:z=Math.round(Z-E)*p;const le=z-e*(p>=0?1:-1),ve=p>=0?le<0:le>R;z=Math.max(le,0),S==="finished"&&k===null&&(z=R);let st=z,gt=C;if(i){const el=Math.min(z,R)/j;let Mr=Math.floor(el),Cn=el%1;!Cn&&el>=1&&(Cn=1),Cn===1&&Mr--,Mr=Math.min(Mr,i+1),!!(Mr%2)&&(a==="reverse"?(Cn=1-Cn,o&&(Cn-=o/j)):a==="mirror"&&(gt=N)),st=fi(0,1,Cn)*j}const ze=ve?{done:!1,value:r[0]}:gt.next(st);I&&(ze.value=I(ze.value));let{done:En}=ze;!ve&&D!==null&&(En=p>=0?z>=R:z<=0);const qm=k===null&&(S==="finished"||S==="running"&&En);return d&&d(ze.value),qm&&U(),ze},$=()=>{x&&x.stop(),x=void 0},J=()=>{S="idle",$(),v(),w(),E=A=null},U=()=>{S="finished",u&&u(),$(),v()},q=()=>{if(g)return;x||(x=n(H));const Z=x.now();l&&l(),k!==null?E=Z-k:(!E||S==="finished")&&(E=Z),S==="finished"&&w(),A=E,k=null,S="running",x.start()};t&&q();const ne={then(Z,le){return _.then(Z,le)},get time(){return ss(z)},set time(Z){Z=so(Z),z=Z,k!==null||!x||p===0?k=Z:E=x.now()-Z/p},get duration(){const Z=C.calculatedDuration===null?qT(C):C.calculatedDuration;return ss(Z)},get speed(){return p},set speed(Z){Z===p||!x||(p=Z,ne.time=ss(z))},get state(){return S},play:q,pause:()=>{S="paused",k=z},stop:()=>{g=!0,S!=="idle"&&(S="idle",c&&c(),J())},cancel:()=>{A!==null&&H(A),J()},complete:()=>{S="finished"},sample:Z=>(E=0,H(Z))};return ne}function dW(t){let e;return()=>(e===void 0&&(e=t()),e)}const hW=dW(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),fW=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Ed=10,mW=2e4,pW=(t,e)=>e.type==="spring"||t==="backgroundColor"||!oR(e.ease);function gW(t,e,{onUpdate:n,onComplete:r,...s}){if(!(hW()&&fW.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const u=()=>{l=new Promise(b=>{a=b})};u();let{keyframes:d,duration:m=300,ease:p,times:g}=s;if(pW(e,s)){const b=vf({...s,repeat:0,delay:0});let I={done:!1,value:d[0]};const C=[];let N=0;for(;!I.done&&N<mW;)I=b.sample(N),C.push(I.value),N+=Ed;g=void 0,d=C,m=N-Ed,p="linear"}const v=S$(t.owner.current,e,d,{...s,duration:m,ease:p,times:g}),_=()=>{c=!1,v.cancel()},w=()=>{c=!0,De.update(_),a(),u()};return v.onfinish=()=>{c||(t.set(E$(d,s)),r&&r(),w())},{then(b,I){return l.then(b,I)},attachTimeline(b){return v.timeline=b,v.onfinish=null,tt},get time(){return ss(v.currentTime||0)},set time(b){v.currentTime=so(b)},get speed(){return v.playbackRate},set speed(b){v.playbackRate=b},get duration(){return ss(m)},play:()=>{o||(v.play(),ms(_))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:b}=v;if(b){const I=vf({...s,autoplay:!1});t.setWithVelocity(I.sample(b-Ed).value,I.sample(b).value,Ed)}w()},complete:()=>{c||v.finish()},cancel:w}}function yW({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:tt,pause:tt,stop:tt,then:i=>(i(),Promise.resolve()),cancel:tt,complete:tt});return e?vf({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const vW={type:"spring",stiffness:500,damping:25,restSpeed:10},xW=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),wW={type:"keyframes",duration:.8},_W={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bW=(t,{keyframes:e})=>e.length>2?wW:Ao.has(t)?t.startsWith("scale")?xW(e[1]):vW:_W,x0=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(mi.test(e)||e==="0")&&!e.startsWith("url(")),TW=new Set(["brightness","contrast","saturate","opacity"]);function kW(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Mm)||[];if(!r)return t;const s=n.replace(r,"");let i=TW.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const SW=/([a-z-]*)\(.*?\)/g,w0={...mi,getAnimatableNone:t=>{const e=t.match(SW);return e?e.map(kW).join(" "):t}},EW={...$A,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:w0,WebkitFilter:w0},nw=t=>EW[t];function AR(t,e){let n=nw(t);return n!==w0&&(n=mi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const RR=t=>/^0[^.\s]+$/.test(t);function CW(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||RR(t)}function PW(t,e,n,r){const s=x0(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),CW(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];i[u]=AR(e,a)}return i}function IW({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function rw(t,e){return t[e]||t.default||t}const AW={skipAnimations:!1},sw=(t,e,n,r={})=>s=>{const i=rw(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-so(o);const l=PW(e,t,n,i),c=l[0],u=l[l.length-1],d=x0(t,c),m=x0(t,u);let p={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:g=>{e.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(IW(i)||(p={...p,...bW(t,p)}),p.duration&&(p.duration=so(p.duration)),p.repeatDelay&&(p.repeatDelay=so(p.repeatDelay)),!d||!m||k$.current||i.type===!1||AW.skipAnimations)return yW(p);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=gW(e,t,p);if(g)return g}return vf(p)};function xf(t){return!!(fn(t)&&t.add)}const NR=t=>/^\-?\d*\.?\d+$/.test(t);function iw(t,e){t.indexOf(e)===-1&&t.push(e)}function ow(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class aw{constructor(){this.subscriptions=[]}add(e){return iw(this.subscriptions,e),()=>ow(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const RW=t=>!isNaN(parseFloat(t));class NW{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Ot;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,De.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>De.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=RW(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new aw);const r=this.events[e].add(n);return e==="change"?()=>{r(),De.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?CR(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Va(t,e){return new NW(t,e)}const DR=t=>e=>e.test(t),DW={test:t=>t==="auto",parse:t=>t},MR=[Ro,re,Pr,Cs,UB,FB,DW],Tl=t=>MR.find(DR(t)),MW=[...MR,Qt,mi],jW=t=>MW.find(DR(t));function OW(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Va(n))}function LW(t,e){const n=Om(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=e$(i[o]);OW(t,o,a)}}function VW(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),u!=null&&(typeof u=="string"&&(NR(u)||RR(u))?u=parseFloat(u):!jW(u)&&mi.test(c)&&(u=AR(l,c)),t.addValue(l,Va(u,{owner:t})),n[l]===void 0&&(n[l]=u),u!==null&&t.setBaseTarget(l,u))}}function FW(t,e){return e?(e[t]||e.default||e).from:void 0}function UW(t,e,n){const r={};for(const s in t){const i=FW(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function zW({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function BW(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function jR(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in a){const m=t.getValue(d),p=a[d];if(!m||p===void 0||u&&zW(u,d))continue;const g={delay:n,elapsed:0,...rw(i||{},d)};if(window.HandoffAppearAnimations){const w=t.getProps()[OA];if(w){const x=window.HandoffAppearAnimations(w,d,m,De);x!==null&&(g.elapsed=x,g.isHandoff=!0)}}let v=!g.isHandoff&&!BW(m,p);if(g.type==="spring"&&(m.getVelocity()||g.velocity)&&(v=!1),m.animation&&(v=!1),v)continue;m.start(sw(d,m,p,t.shouldReduceMotion&&Ao.has(d)?{type:!1}:g));const _=m.animation;xf(l)&&(l.add(d),_.then(()=>l.remove(d))),c.push(_)}return o&&Promise.all(c).then(()=>{o&&LW(t,o)}),c}function _0(t,e,n={}){const r=Om(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(jR(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:d}=s;return $W(t,e,c+l,u,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,c]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function $W(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(WW).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(_0(c,e,{...i,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function WW(t,e){return t.sortNodePosition(e)}function HW(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>_0(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=_0(t,e,n);else{const s=typeof e=="function"?Om(t,e,n.custom):e;r=Promise.all(jR(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const qW=[...Bx].reverse(),GW=Bx.length;function KW(t){return e=>Promise.all(e.map(({animation:n,options:r})=>HW(t,n,r)))}function QW(t){let e=KW(t);const n=XW();let r=!0;const s=(l,c)=>{const u=Om(t,c);if(u){const{transition:d,transitionEnd:m,...p}=u;l={...l,...p,...m}}return l};function i(l){e=l(t)}function o(l,c){const u=t.getProps(),d=t.getVariantContext(!0)||{},m=[],p=new Set;let g={},v=1/0;for(let w=0;w<GW;w++){const x=qW[w],b=n[x],I=u[x]!==void 0?u[x]:d[x],C=Qc(I),N=x===c?b.isActive:null;N===!1&&(v=w);let S=I===d[x]&&I!==u[x]&&C;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...g},!b.isActive&&N===null||!I&&!b.prevProp||Nm(I)||typeof I=="boolean")continue;let E=YW(b.prevProp,I)||x===c&&b.isActive&&!S&&C||w>v&&C,A=!1;const D=Array.isArray(I)?I:[I];let j=D.reduce(s,{});N===!1&&(j={});const{prevResolvedValues:R={}}=b,z={...R,...j},H=$=>{E=!0,p.has($)&&(A=!0,p.delete($)),b.needsAnimating[$]=!0};for(const $ in z){const J=j[$],U=R[$];if(g.hasOwnProperty($))continue;let q=!1;pf(J)&&pf(U)?q=!sR(J,U):q=J!==U,q?J!==void 0?H($):p.add($):J!==void 0&&p.has($)?H($):b.protectedKeys[$]=!0}b.prevProp=I,b.prevResolvedValues=j,b.isActive&&(g={...g,...j}),r&&t.blockInitialAnimation&&(E=!1),E&&(!S||A)&&m.push(...D.map($=>({animation:$,options:{type:x,...l}})))}if(p.size){const w={};p.forEach(x=>{const b=t.getBaseTarget(x);b!==void 0&&(w[x]=b)}),m.push({animation:w})}let _=!!m.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(m):Promise.resolve()}function a(l,c,u){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(p=>{var g;return(g=p.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const m=o(u,l);for(const p in n)n[p].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function YW(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!sR(e,t):!1}function Ni(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function XW(){return{animate:Ni(!0),whileInView:Ni(),whileHover:Ni(),whileTap:Ni(),whileDrag:Ni(),whileFocus:Ni(),exit:Ni()}}class JW extends Ei{constructor(e){super(e),e.animationState||(e.animationState=QW(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Nm(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let ZW=0;class e8 extends Ei{constructor(){super(...arguments),this.id=ZW++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const t8={animation:{Feature:JW},exit:{Feature:e8}},GT=(t,e)=>Math.abs(t-e);function n8(t,e){const n=GT(t.x,e.x),r=GT(t.y,e.y);return Math.sqrt(n**2+r**2)}class OR{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=gg(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=n8(d.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:g}=d,{timestamp:v}=Ot;this.history.push({...g,timestamp:v});const{onStart:_,onMove:w}=this.handlers;m||(_&&_(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,d)},this.handlePointerMove=(d,m)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=pg(m,this.transformPagePoint),De.update(this.updatePoint,!0)},this.handlePointerUp=(d,m)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=gg(d.type==="pointercancel"?this.lastMoveEventInfo:pg(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,_),g&&g(d,_)},!ZA(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=jm(e),a=pg(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Ot;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,gg(a,this.history)),this.removeListeners=oi(rs(this.contextWindow,"pointermove",this.handlePointerMove),rs(this.contextWindow,"pointerup",this.handlePointerUp),rs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ms(this.updatePoint)}}function pg(t,e){return e?{point:e(t.point)}:t}function KT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function gg({point:t},e){return{point:t,delta:KT(t,LR(e)),offset:KT(t,r8(e)),velocity:s8(e,.1)}}function r8(t){return t[0]}function LR(t){return t[t.length-1]}function s8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=LR(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>so(e)));)n--;if(!r)return{x:0,y:0};const i=ss(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function bn(t){return t.max-t.min}function b0(t,e=0,n=.01){return Math.abs(t-e)<=n}function QT(t,e,n,r=.5){t.origin=r,t.originPoint=$e(e.min,e.max,t.origin),t.scale=bn(n)/bn(e),(b0(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=$e(n.min,n.max,t.origin)-t.originPoint,(b0(t.translate)||isNaN(t.translate))&&(t.translate=0)}function cc(t,e,n,r){QT(t.x,e.x,n.x,r?r.originX:void 0),QT(t.y,e.y,n.y,r?r.originY:void 0)}function YT(t,e,n){t.min=n.min+e.min,t.max=t.min+bn(e)}function i8(t,e,n){YT(t.x,e.x,n.x),YT(t.y,e.y,n.y)}function XT(t,e,n){t.min=e.min-n.min,t.max=t.min+bn(e)}function uc(t,e,n){XT(t.x,e.x,n.x),XT(t.y,e.y,n.y)}function o8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?$e(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?$e(n,t,r.max):Math.min(t,n)),t}function JT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function a8(t,{top:e,left:n,bottom:r,right:s}){return{x:JT(t.x,n,s),y:JT(t.y,e,r)}}function ZT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function l8(t,e){return{x:ZT(t.x,e.x),y:ZT(t.y,e.y)}}function c8(t,e){let n=.5;const r=bn(t),s=bn(e);return s>r?n=Xc(e.min,e.max-r,t.min):r>s&&(n=Xc(t.min,t.max-s,e.min)),fi(0,1,n)}function u8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const T0=.35;function d8(t=T0){return t===!1?t=0:t===!0&&(t=T0),{x:ek(t,"left","right"),y:ek(t,"top","bottom")}}function ek(t,e,n){return{min:tk(t,e),max:tk(t,n)}}function tk(t,e){return typeof t=="number"?t:t[e]||0}const nk=()=>({translate:0,scale:1,origin:0,originPoint:0}),oa=()=>({x:nk(),y:nk()}),rk=()=>({min:0,max:0}),ot=()=>({x:rk(),y:rk()});function Rn(t){return[t("x"),t("y")]}function VR({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function h8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function f8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function yg(t){return t===void 0||t===1}function k0({scale:t,scaleX:e,scaleY:n}){return!yg(t)||!yg(e)||!yg(n)}function Fi(t){return k0(t)||FR(t)||t.z||t.rotate||t.rotateX||t.rotateY}function FR(t){return sk(t.x)||sk(t.y)}function sk(t){return t&&t!=="0%"}function wf(t,e,n){const r=t-n,s=e*r;return n+s}function ik(t,e,n,r,s){return s!==void 0&&(t=wf(t,s,r)),wf(t,n,r)+e}function S0(t,e=0,n=1,r,s){t.min=ik(t.min,e,n,r,s),t.max=ik(t.max,e,n,r,s)}function UR(t,{x:e,y:n}){S0(t.x,e.translate,e.scale,e.originPoint),S0(t.y,n.translate,n.scale,n.originPoint)}function m8(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&aa(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,UR(t,o)),r&&Fi(i.latestValues)&&aa(t,i.latestValues))}e.x=ok(e.x),e.y=ok(e.y)}function ok(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function As(t,e){t.min=t.min+e,t.max=t.max+e}function ak(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=$e(t.min,t.max,i);S0(t,e[n],e[r],o,e.scale)}const p8=["x","scaleX","originX"],g8=["y","scaleY","originY"];function aa(t,e){ak(t.x,e,p8),ak(t.y,e,g8)}function zR(t,e){return VR(f8(t.getBoundingClientRect(),e))}function y8(t,e,n){const r=zR(t,n),{scroll:s}=e;return s&&(As(r.x,s.offset.x),As(r.y,s.offset.y)),r}const BR=({current:t})=>t?t.ownerDocument.defaultView:null,v8=new WeakMap;class x8{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ot(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(jm(u,"page").point)},i=(u,d)=>{const{drag:m,dragPropagation:p,onDragStart:g}=this.getProps();if(m&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=tR(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rn(_=>{let w=this.getAxisMotionValue(_).get()||0;if(Pr.test(w)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[_];b&&(w=bn(b)*(parseFloat(w)/100))}}this.originPoint[_]=w}),g&&De.update(()=>g(u,d),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:g,onDrag:v}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:_}=d;if(p&&this.currentDirection===null){this.currentDirection=w8(_),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,_),this.updateAxis("y",d.point,_),this.visualElement.render(),v&&v(u,d)},a=(u,d)=>this.stop(u,d),l=()=>Rn(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new OR(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:BR(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&De.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Cd(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=o8(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&sa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=a8(s.layoutBox,n):this.constraints=!1,this.elastic=d8(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Rn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=u8(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!sa(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=y8(r,s.root,this.visualElement.getTransformPagePoint());let o=l8(s.layout.layoutBox,i);if(n){const a=n(h8(o));this.hasMutatedConstraints=!!a,a&&(o=VR(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Rn(u=>{if(!Cd(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const m=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(sw(e,r,0,n))}stopAnimation(){Rn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Rn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Rn(n=>{const{drag:r}=this.getProps();if(!Cd(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-$e(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!sa(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Rn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=c8({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Rn(o=>{if(!Cd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set($e(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;v8.set(this.visualElement,this);const e=this.visualElement.current,n=rs(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();sa(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Xr(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Rn(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=T0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Cd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function w8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class _8 extends Ei{constructor(e){super(e),this.removeGroupControls=tt,this.removeListeners=tt,this.controls=new x8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tt}unmount(){this.removeGroupControls(),this.removeListeners()}}const lk=t=>(e,n)=>{t&&De.update(()=>t(e,n))};class b8 extends Ei{constructor(){super(...arguments),this.removePointerDownListener=tt}onPointerDown(e){this.session=new OR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:lk(e),onStart:lk(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&De.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=rs(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function T8(){const t=M.useContext(Am);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=M.useId();return M.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const dh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ck(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const kl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const n=ck(t,e.target.x),r=ck(t,e.target.y);return`${n}% ${r}%`}},k8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=mi.parse(t);if(s.length>5)return r;const i=mi.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=$e(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class S8 extends hn.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;NB(E8),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),dh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||De.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $R(t){const[e,n]=T8(),r=M.useContext(Wx);return hn.createElement(S8,{...t,layoutGroup:r,switchLayoutGroup:M.useContext(VA),isPresent:e,safeToRemove:n})}const E8={borderRadius:{...kl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kl,borderTopRightRadius:kl,borderBottomLeftRadius:kl,borderBottomRightRadius:kl,boxShadow:k8},WR=["TopLeft","TopRight","BottomLeft","BottomRight"],C8=WR.length,uk=t=>typeof t=="string"?parseFloat(t):t,dk=t=>typeof t=="number"||re.test(t);function P8(t,e,n,r,s,i){s?(t.opacity=$e(0,n.opacity!==void 0?n.opacity:1,I8(r)),t.opacityExit=$e(e.opacity!==void 0?e.opacity:1,0,A8(r))):i&&(t.opacity=$e(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<C8;o++){const a=`border${WR[o]}Radius`;let l=hk(e,a),c=hk(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||dk(l)===dk(c)?(t[a]=Math.max($e(uk(l),uk(c),r),0),(Pr.test(c)||Pr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=$e(e.rotate||0,n.rotate||0,r))}function hk(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const I8=HR(0,.5,fR),A8=HR(.5,.95,tt);function HR(t,e,n){return r=>r<t?0:r>e?1:n(Xc(t,e,r))}function fk(t,e){t.min=e.min,t.max=e.max}function Pn(t,e){fk(t.x,e.x),fk(t.y,e.y)}function mk(t,e,n,r,s){return t-=e,t=wf(t,1/n,r),s!==void 0&&(t=wf(t,1/s,r)),t}function R8(t,e=0,n=1,r=.5,s,i=t,o=t){if(Pr.test(e)&&(e=parseFloat(e),e=$e(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=$e(i.min,i.max,r);t===i&&(a-=e),t.min=mk(t.min,e,n,a,s),t.max=mk(t.max,e,n,a,s)}function pk(t,e,[n,r,s],i,o){R8(t,e[n],e[r],e[s],e.scale,i,o)}const N8=["x","scaleX","originX"],D8=["y","scaleY","originY"];function gk(t,e,n,r){pk(t.x,e,N8,n?n.x:void 0,r?r.x:void 0),pk(t.y,e,D8,n?n.y:void 0,r?r.y:void 0)}function yk(t){return t.translate===0&&t.scale===1}function qR(t){return yk(t.x)&&yk(t.y)}function M8(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function GR(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function vk(t){return bn(t.x)/bn(t.y)}class j8{constructor(){this.members=[]}add(e){iw(this.members,e),e.scheduleRender()}remove(e){if(ow(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xk(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:u}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),u&&(r+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const O8=(t,e)=>t.depth-e.depth;class L8{constructor(){this.children=[],this.isDirty=!1}add(e){iw(this.children,e),this.isDirty=!0}remove(e){ow(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(O8),this.isDirty=!1,this.children.forEach(e)}}function V8(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(ms(r),t(i-e))};return De.read(r,!0),()=>ms(r)}function F8(t){window.MotionDebug&&window.MotionDebug.record(t)}function U8(t){return t instanceof SVGElement&&t.tagName!=="svg"}function z8(t,e,n){const r=fn(t)?t:Va(t);return r.start(sw("",r,e,n)),r.animation}const wk=["","X","Y","Z"],B8={visibility:"hidden"},_k=1e3;let $8=0;const Ui={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function KR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=$8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ui.totalNodes=Ui.resolvedTargetDeltas=Ui.recalculatedProjection=0,this.nodes.forEach(q8),this.nodes.forEach(X8),this.nodes.forEach(J8),this.nodes.forEach(G8),F8(Ui)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new L8)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new aw),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=U8(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=V8(m,250),dh.hasAnimatedSinceResize&&(dh.hasAnimatedSinceResize=!1,this.nodes.forEach(Tk))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||r7,{onLayoutAnimationStart:_,onLayoutAnimationComplete:w}=u.getProps(),x=!this.targetLayout||!GR(this.targetLayout,g)||p,b=!m&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||m&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const I={...rw(v,"layout"),onPlay:_,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else m||Tk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ms(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Z8),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bk);return}this.isUpdating||this.nodes.forEach(Q8),this.isUpdating=!1,this.nodes.forEach(Y8),this.nodes.forEach(W8),this.nodes.forEach(H8),this.clearAllSnapshots();const a=performance.now();Ot.delta=fi(0,1e3/60,a-Ot.timestamp),Ot.timestamp=a,Ot.isProcessing=!0,ag.update.process(Ot),ag.preRender.process(Ot),ag.render.process(Ot),Ot.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(K8),this.sharedNodes.forEach(e7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,De.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){De.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ot(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!qR(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Fi(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),s7(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ot();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(As(a.x,l.offset.x),As(a.y,l.offset.y)),a}removeElementScroll(o){const a=ot();Pn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:d}=c;if(c!==this.root&&u&&d.layoutScroll){if(u.isRoot){Pn(a,o);const{scroll:m}=this.root;m&&(As(a.x,-m.offset.x),As(a.y,-m.offset.y))}As(a.x,u.offset.x),As(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=ot();Pn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&aa(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Fi(u.latestValues)&&aa(l,u.latestValues)}return Fi(this.latestValues)&&aa(l,this.latestValues),l}removeTransform(o){const a=ot();Pn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Fi(c.latestValues))continue;k0(c.latestValues)&&c.updateSnapshot();const u=ot(),d=c.measurePageBox();Pn(u,d),gk(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Fi(this.latestValues)&&gk(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ot.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=Ot.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),uc(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Pn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ot(),this.targetWithTransforms=ot()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Pn(this.target,this.layout.layoutBox),UR(this.target,this.targetDelta)):Pn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),uc(this.relativeTargetOrigin,this.target,p.target),Pn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ui.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||k0(this.parent.latestValues)||FR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ot.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Pn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;m8(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=oa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=oa(),this.projectionDeltaWithTransform=oa());const v=this.projectionTransform;cc(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=xk(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==m||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Ui.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=oa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=ot(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=p!==g,_=this.getStack(),w=!_||_.members.length<=1,x=!!(v&&!w&&this.options.crossfade===!0&&!this.path.some(n7));this.animationProgress=0;let b;this.mixTargetDelta=I=>{const C=I/1e3;kk(d.x,o.x,C),kk(d.y,o.y,C),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(uc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),t7(this.relativeTarget,this.relativeTargetOrigin,m,C),b&&M8(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ot()),Pn(b,this.relativeTarget)),v&&(this.animationValues=u,P8(u,c,this.latestValues,C,x,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ms(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=De.update(()=>{dh.hasAnimatedSinceResize=!0,this.currentAnimation=z8(0,_k,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_k),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&QR(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ot();const d=bn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const m=bn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Pn(a,l),aa(a,u),cc(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new j8),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<wk.length;u++){const d="rotate"+wk[u];l[d]&&(c[d]=l[d],o.setStaticValue(d,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return B8;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=uh(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=uh(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Fi(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const m=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=xk(this.projectionDeltaWithTransform,this.treeScale,m),u&&(c.transform=u(m,c.transform));const{x:p,y:g}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const v in ff){if(m[v]===void 0)continue;const{correct:_,applyTo:w}=ff[v],x=c.transform==="none"?m[v]:_(m[v],d);if(w){const b=w.length;for(let I=0;I<b;I++)c[w[I]]=x}else c[v]=x}return this.options.layoutId&&(c.pointerEvents=d===this?uh(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(bk),this.root.sharedNodes.clear()}}}function W8(t){t.updateLayout()}function H8(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?Rn(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],p=bn(m);m.min=r[d].min,m.max=m.min+p}):QR(i,n.layoutBox,r)&&Rn(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],p=bn(r[d]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=oa();cc(a,r,n.layoutBox);const l=oa();o?cc(l,t.applyTransform(s,!0),n.measuredBox):cc(l,r,n.layoutBox);const c=!qR(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:p}=d;if(m&&p){const g=ot();uc(g,n.layoutBox,m.layoutBox);const v=ot();uc(v,r,p.layoutBox),GR(g,v)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function q8(t){Ui.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function G8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function K8(t){t.clearSnapshot()}function bk(t){t.clearMeasurements()}function Q8(t){t.isLayoutDirty=!1}function Y8(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Tk(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function X8(t){t.resolveTargetDelta()}function J8(t){t.calcProjection()}function Z8(t){t.resetRotation()}function e7(t){t.removeLeadSnapshot()}function kk(t,e,n){t.translate=$e(e.translate,0,n),t.scale=$e(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Sk(t,e,n,r){t.min=$e(e.min,n.min,r),t.max=$e(e.max,n.max,r)}function t7(t,e,n,r){Sk(t.x,e.x,n.x,r),Sk(t.y,e.y,n.y,r)}function n7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const r7={duration:.45,ease:[.4,0,.1,1]},Ek=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Ck=Ek("applewebkit/")&&!Ek("chrome/")?Math.round:tt;function Pk(t){t.min=Ck(t.min),t.max=Ck(t.max)}function s7(t){Pk(t.x),Pk(t.y)}function QR(t,e,n){return t==="position"||t==="preserve-aspect"&&!b0(vk(e),vk(n),.2)}const i7=KR({attachResizeListener:(t,e)=>Xr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vg={current:void 0},YR=KR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!vg.current){const t=new i7({});t.mount(window),t.setOptions({layoutScroll:!0}),vg.current=t}return vg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),o7={pan:{Feature:b8},drag:{Feature:_8,ProjectionNode:YR,MeasureLayout:$R}},a7=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function l7(t){const e=a7.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function E0(t,e,n=1){const[r,s]=l7(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return NR(o)?parseFloat(o):o}else return p0(s)?E0(s,e,n+1):s}function c7(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!p0(i))return;const o=E0(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!p0(i))continue;const o=E0(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const u7=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),XR=t=>u7.has(t),d7=t=>Object.keys(t).some(XR),Ik=t=>t===Ro||t===re,Ak=(t,e)=>parseFloat(t.split(", ")[e]),Rk=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return Ak(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?Ak(i[1],t):0}},h7=new Set(["x","y","z"]),f7=Iu.filter(t=>!h7.has(t));function m7(t){const e=[];return f7.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Fa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Rk(4,13),y:Rk(5,14)};Fa.translateX=Fa.x;Fa.translateY=Fa.y;const p7=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Fa[c](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),t[c]=Fa[c](l,i)}),t},g7=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(XR);let i=[],o=!1;const a=[];if(s.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let u=n[l],d=Tl(u);const m=e[l];let p;if(pf(m)){const g=m.length,v=m[0]===null?1:0;u=m[v],d=Tl(u);for(let _=v;_<g&&m[_]!==null;_++)p?Jx(Tl(m[_])===p):p=Tl(m[_])}else p=Tl(m);if(d!==p)if(Ik(d)&&Ik(p)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof m=="string"?e[l]=parseFloat(m):Array.isArray(m)&&p===re&&(e[l]=m.map(parseFloat))}else d!=null&&d.transform&&(p!=null&&p.transform)&&(u===0||m===0)?u===0?c.set(p.transform(u)):e[l]=d.transform(m):(o||(i=m7(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(m))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=p7(e,t,a);return i.length&&i.forEach(([u,d])=>{t.getValue(u).set(d)}),t.render(),Rm&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function y7(t,e,n,r){return d7(e)?g7(t,e,n,r):{target:e,transitionEnd:r}}const v7=(t,e,n,r)=>{const s=c7(t,e,r);return e=s.target,r=s.transitionEnd,y7(t,e,n,r)},C0={current:null},JR={current:!1};function x7(){if(JR.current=!0,!!Rm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>C0.current=t.matches;t.addListener(e),e()}else C0.current=!1}function w7(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(fn(i))t.addValue(s,i),xf(r)&&r.add(s);else if(fn(o))t.addValue(s,Va(i,{owner:t})),xf(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Va(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Nk=new WeakMap,ZR=Object.keys(Yc),_7=ZR.length,Dk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],b7=$x.length;class T7{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>De.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Dm(n),this.isVariantNode=LA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const d in u){const m=u[d];a[d]!==void 0&&fn(m)&&(m.set(a[d],!1),xf(c)&&c.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Nk.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),JR.current||x7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:C0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Nk.delete(this.current),this.projection&&this.projection.unmount(),ms(this.notifyUpdate),ms(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Ao.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&De.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<_7;l++){const c=ZR[l],{isEnabled:u,Feature:d,ProjectionNode:m,MeasureLayout:p}=Yc[c];m&&(o=m),u(n)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),p&&(a=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:d,layoutScroll:m,layoutRoot:p}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||d&&sa(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:p})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ot()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Dk.length;r++){const s=Dk[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=w7(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<b7;r++){const s=$x[r],i=this.props[s];(Qc(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Va(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Xx(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!fn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new aw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class eN extends T7{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=UW(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){VW(this,r,o);const a=v7(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function k7(t){return window.getComputedStyle(t)}class S7 extends eN{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Ao.has(n)){const r=nw(n);return r&&r.default||0}else{const r=k7(e),s=(zA(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return zR(e,n)}build(e,n,r,s){qx(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Yx(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){GA(e,n,r,s)}}class E7 extends eN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ao.has(n)){const r=nw(n);return r&&r.default||0}return n=KA.has(n)?n:zx(n),e.getAttribute(n)}measureInstanceViewportBox(){return ot()}scrapeMotionValuesFromProps(e,n){return YA(e,n)}build(e,n,r,s){Kx(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){QA(e,n,r,s)}mount(e){this.isSVGTag=Qx(e.tagName),super.mount(e)}}const C7=(t,e)=>Hx(t)?new E7(e,{enableHardwareAcceleration:!1}):new S7(e,{enableHardwareAcceleration:!0}),P7={layout:{ProjectionNode:YR,MeasureLayout:$R}},I7={...t8,..._$,...o7,...P7},ue=AB((t,e)=>l$(t,e,I7,C7));function tN(){const t=M.useRef(!1);return Ux(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function A7(){const t=tN(),[e,n]=M.useState(0),r=M.useCallback(()=>{t.current&&n(e+1)},[e]);return[M.useCallback(()=>De.postRender(r),[r]),e]}class R7 extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function N7({children:t,isPresent:e}){const n=M.useId(),r=M.useRef(null),s=M.useRef({width:0,height:0,top:0,left:0});return M.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),M.createElement(R7,{isPresent:e,childRef:r,sizeRef:s},M.cloneElement(t,{ref:r}))}const xg=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=XA(D7),l=M.useId(),c=M.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:u=>{a.set(u,!0);for(const d of a.values())if(!d)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),i?void 0:[n]);return M.useMemo(()=>{a.forEach((u,d)=>a.set(d,!1))},[n]),M.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=M.createElement(N7,{isPresent:n},t)),M.createElement(Am.Provider,{value:c},t)};function D7(){return new Map}function M7(t){return M.useEffect(()=>()=>t(),[])}const zi=t=>t.key||"";function j7(t,e){t.forEach(n=>{const r=zi(n);e.set(r,n)})}function O7(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const ar=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=M.useContext(Wx).forceRender||A7()[0],l=tN(),c=O7(t);let u=c;const d=M.useRef(new Map).current,m=M.useRef(u),p=M.useRef(new Map).current,g=M.useRef(!0);if(Ux(()=>{g.current=!1,j7(c,p),m.current=u}),M7(()=>{g.current=!0,p.clear(),d.clear()}),g.current)return M.createElement(M.Fragment,null,u.map(x=>M.createElement(xg,{key:zi(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},x)));u=[...u];const v=m.current.map(zi),_=c.map(zi),w=v.length;for(let x=0;x<w;x++){const b=v[x];_.indexOf(b)===-1&&!d.has(b)&&d.set(b,void 0)}return o==="wait"&&d.size&&(u=[]),d.forEach((x,b)=>{if(_.indexOf(b)!==-1)return;const I=p.get(b);if(!I)return;const C=v.indexOf(b);let N=x;if(!N){const S=()=>{d.delete(b);const k=Array.from(p.keys()).filter(E=>!_.includes(E));if(k.forEach(E=>p.delete(E)),m.current=c.filter(E=>{const A=zi(E);return A===b||k.includes(A)}),!d.size){if(l.current===!1)return;a(),r&&r()}};N=M.createElement(xg,{key:zi(I),isPresent:!1,onExitComplete:S,custom:e,presenceAffectsLayout:i,mode:o},I),d.set(b,N)}u.splice(C,0,N)}),u=u.map(x=>{const b=x.key;return d.has(b)?x:M.createElement(xg,{key:zi(x),isPresent:!0,presenceAffectsLayout:i,mode:o},x)}),M.createElement(M.Fragment,null,d.size?u:u.map(x=>M.cloneElement(x)))};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var L7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ee=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>M.createElement("svg",{ref:u,...L7,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${V7(t)}`,a].join(" "),...c},[...e.map(([d,m])=>M.createElement(d,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=ee("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=ee("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=ee("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=ee("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=ee("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=ee("CalendarOff",[["path",{d:"M4.18 4.18A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18",key:"1feomx"}],["path",{d:"M21 15.5V6a2 2 0 0 0-2-2H9.5",key:"yhw86o"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h7",key:"1wap6i"}],["path",{d:"M21 10h-5.5",key:"quycpq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=ee("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=ee("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=ee("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=ee("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=ee("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=ee("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=ee("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=ee("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=ee("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=ee("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=ee("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=ee("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=ee("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=ee("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=ee("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ee("Scroll",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=ee("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=ee("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=ee("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=ee("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=ee("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ee("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=ee("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=ee("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cH=ee("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=ee("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),jn=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString(),uH=t=>{const e=new Date,n=new Date(t),r=n.getTime()-e.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s<-1?`Il y a ${Math.abs(s)} jours`:s===-1?"Hier":s===0?"Aujourd'hui":s===1?"Demain":s<=7?`Dans ${s} jours`:n.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})},dw=t=>t<5?"Novice":t<10?"Apprenti":t<15?"Initi":t<20?"Adepte":t<25?"Aventurier":t<30?"Explorateur":t<40?"Vtran":t<50?"Expert":t<60?"Matre":t<75?"Grand Matre":t<90?"Champion":t<100?"Hros":"Lgende",dH=t=>{switch(t){case"low":return"#22c55e";case"medium":return"#f59e0b";case"high":return"#f97316";case"critical":return"#ef4444";default:return"#9ca3af"}},hH=t=>{const e=new Date,r=new Date(t).getTime()-e.getTime();if(r<=0)return"Expir";const s=Math.floor(r/(1e3*60*60)),i=Math.floor(s/24);if(i>0)return`${i}j ${s%24}h`;const o=Math.floor(r%(1e3*60*60)/(1e3*60));return`${s}h ${o}m`},X=(...t)=>t.filter(Boolean).join(" "),Xe=({children:t,variant:e="primary",size:n="md",isLoading:r=!1,leftIcon:s,rightIcon:i,className:o,disabled:a,...l})=>{const c="inline-flex items-center justify-center font-medium rounded-2xl transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-soft hover:shadow-soft-lg",u={primary:"bg-accent-gradient text-white hover:opacity-90 focus:ring-2",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 text-gray-800 dark:text-gray-200 hover:from-gray-200 hover:to-gray-300 dark:hover:from-gray-600 dark:hover:to-gray-500 focus:ring-gray-400",danger:"bg-gradient-to-r from-red-400 to-red-500 text-white hover:from-red-500 hover:to-red-600 focus:ring-red-400",success:"bg-gradient-to-r from-green-400 to-green-500 text-white hover:from-green-500 hover:to-green-600 focus:ring-green-400",game:"bg-accent-gradient text-white hover:opacity-90 shadow-lg hover:shadow-xl",ghost:"bg-transparent hover:bg-gradient-to-r hover:from-gray-50 hover:to-gray-100 dark:hover:from-gray-800 dark:hover:to-gray-700 text-gray-600 dark:text-gray-400",outline:"bg-transparent border-2 border-accent text-accent hover:bg-[var(--color-accent-50)] dark:hover:bg-[var(--color-accent-900)]/30 focus:ring-2"},d={sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-4 py-2 text-base gap-2",lg:"px-6 py-3 text-lg gap-2.5"};return f.jsx("button",{className:X(c,u[e],d[n],o),disabled:a||r,...l,children:r?f.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):f.jsxs(f.Fragment,{children:[s&&f.jsx("span",{className:"flex-shrink-0",children:s}),t,i&&f.jsx("span",{className:"flex-shrink-0",children:i})]})})},ke=({children:t,className:e,variant:n="default",hoverable:r=!1,onClick:s})=>{const i={default:"bg-white dark:bg-gray-800/90 border border-gray-100 dark:border-gray-700/50 shadow-sm",game:"bg-gradient-to-br from-white to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/60 border border-gray-100 dark:border-gray-700/50 shadow-sm",glass:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl border border-white/20 dark:border-gray-700/30 shadow-soft"},o=s?ue.button:ue.div;return f.jsx(o,{className:X("rounded-2xl overflow-hidden transition-all duration-300",i[n],r&&"hover:shadow-soft-lg hover:border-gray-200 dark:hover:border-gray-600 cursor-pointer active:scale-[0.98]",s&&"text-left w-full",e),onClick:s,whileTap:s?{scale:.98}:void 0,children:t})},fH={primary:"bg-[var(--color-accent-100)] dark:bg-[var(--color-accent-900)]/40 text-accent",yellow:"bg-gradient-to-br from-yellow-500/20 to-amber-500/20 text-yellow-600 dark:text-yellow-400",orange:"bg-gradient-to-br from-orange-500/20 to-red-500/20 text-orange-600 dark:text-orange-400",purple:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 text-purple-600 dark:text-purple-400",green:"bg-gradient-to-br from-green-500/20 to-emerald-500/20 text-green-600 dark:text-green-400",red:"bg-gradient-to-br from-red-500/20 to-pink-500/20 text-red-600 dark:text-red-400",blue:"bg-gradient-to-br from-blue-500/20 to-indigo-500/20 text-blue-600 dark:text-blue-400"},ut=({icon:t,label:e,value:n,color:r="primary",trend:s})=>f.jsx(ke,{className:"p-3 sm:p-4 group",hoverable:!0,children:f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[f.jsx("div",{className:X("w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-transform duration-300 group-hover:scale-110",fH[r]),children:t}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-400 truncate leading-tight font-medium uppercase tracking-wide",children:e}),f.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white truncate",children:n})]}),s&&f.jsxs("div",{className:X("px-2 py-1 rounded-lg text-xs font-semibold hidden sm:block",s.isPositive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[s.isPositive?"+":"",s.value,"%"]})]})}),mH=()=>{const[t,e]=M.useState(!1),[n,r]=M.useState(null),{signInWithGoogle:s,signInDemo:i}=he(),o=async()=>{r(null),e(!0);try{await s()}catch(l){r(l.message||"chec de la connexion Google")}finally{e(!1)}},a=async()=>{r(null),e(!0);try{await i()}catch(l){r(l.message||"chec du mode dmo")}finally{e(!1)}};return f.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-900 via-cyan-900 to-gray-900 p-4",children:[f.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[f.jsx("div",{className:"absolute w-96 h-96 -top-48 -left-48 bg-teal-500/20 rounded-full blur-3xl"}),f.jsx("div",{className:"absolute w-96 h-96 -bottom-48 -right-48 bg-cyan-500/20 rounded-full blur-3xl"})]}),f.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative z-10 w-full max-w-sm",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-3xl bg-gradient-to-br from-teal-400 via-cyan-400 to-blue-400 mb-4 shadow-soft-lg",children:f.jsx(Hn,{className:"w-10 h-10 text-white"})}),f.jsx("h1",{className:"text-3xl font-bold text-white",children:"Questify "}),f.jsx("p",{className:"text-gray-300 mt-2",children:"Transformez vos tches en aventure"})]}),f.jsxs(ke,{className:"p-6",children:[n&&f.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-xl text-sm",children:[" ",n]}),f.jsx(Xe,{type:"button",variant:"secondary",className:"w-full mb-4",onClick:o,isLoading:t,leftIcon:f.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[f.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),f.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),children:"Continuer avec Google"}),f.jsxs("div",{className:"relative my-6",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-3 bg-white dark:bg-gray-800 text-gray-500",children:"ou"})})]}),f.jsx(Xe,{type:"button",variant:"outline",className:"w-full",onClick:a,isLoading:t,leftIcon:f.jsx(K7,{className:"w-5 h-5"}),children:"Mode Dmo (sans compte)"}),f.jsx("p",{className:"mt-4 text-xs text-center text-gray-400",children:"Mode dmo : donnes stockes localement sur cet appareil"})]}),f.jsx("p",{className:"mt-6 text-center text-xs text-gray-500",children:"Application rserve aux amis "})]})]})},hw=({config:t,size:e="md",showLevel:n=!1,level:r,className:s})=>{const i={sm:"w-8 h-8 text-lg",md:"w-12 h-12 text-2xl",lg:"w-16 h-16 text-3xl",xl:"w-24 h-24 text-5xl"},o={sm:"w-4 h-4 text-[8px]",md:"w-5 h-5 text-[10px]",lg:"w-6 h-6 text-xs",xl:"w-8 h-8 text-sm"},l=t||{baseColor:"#6366f1",icon:""};return f.jsxs("div",{className:X("relative",s),children:[f.jsxs("div",{className:X("rounded-full flex items-center justify-center","ring-2 ring-white dark:ring-gray-800 shadow-lg",i[e]),style:{backgroundColor:l.baseColor},children:[f.jsx("span",{children:l.icon}),l.frame&&f.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-yellow-400"})]}),n&&r&&f.jsx("div",{className:X("absolute -bottom-1 -right-1 rounded-full","bg-gradient-to-r from-teal-500 to-cyan-500","flex items-center justify-center font-bold text-white","ring-2 ring-white dark:ring-gray-800",o[e]),children:r})]})},pH=({selected:t,onSelect:e})=>{const n=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];return f.jsx("div",{className:"space-y-4",children:f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Icne"}),f.jsx("div",{className:"grid grid-cols-8 gap-2",children:n.map(r=>f.jsx("button",{onClick:()=>e(r),className:X("w-10 h-10 rounded-lg flex items-center justify-center text-xl","hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",t===r&&"ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/30"),children:r},r))})]})})},bf=({value:t,max:e=100,color:n="primary",size:r="md",showLabel:s=!1,animated:i=!0,glow:o=!1})=>{const a=Math.min(t/e*100,100),l={primary:"from-teal-400 via-cyan-400 to-blue-400",xp:"from-green-400 via-emerald-400 to-teal-400",health:"from-red-400 via-rose-400 to-pink-500",mana:"from-blue-400 via-indigo-400 to-purple-400",gold:"from-yellow-400 via-amber-400 to-orange-400"},c={primary:"bg-gradient-to-r from-teal-100 to-cyan-100 dark:from-teal-900/30 dark:to-cyan-900/30",xp:"bg-gradient-to-r from-green-100 to-teal-100 dark:from-green-900/30 dark:to-teal-900/30",health:"bg-gradient-to-r from-red-100 to-pink-100 dark:from-red-900/30 dark:to-pink-900/30",mana:"bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30",gold:"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30"},u={sm:"h-2",md:"h-3.5",lg:"h-5"};return f.jsxs("div",{className:"w-full",children:[f.jsx("div",{className:X("w-full rounded-full overflow-hidden relative",c[n],u[r],"ring-2 ring-purple-200/50 dark:ring-purple-800/30 shadow-sm"),children:f.jsx(ue.div,{className:X("h-full rounded-full bg-gradient-to-r",l[n],o&&"shadow-lg"),initial:i?{width:0}:void 0,animate:{width:`${a}%`},transition:{duration:.5,ease:"easeOut"},children:i&&f.jsx("div",{className:"w-full h-full shimmer"})})}),s&&f.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500 dark:text-gray-400",children:[f.jsx("span",{children:t}),f.jsx("span",{children:e})]})]})},cN=({currentXP:t,xpToNextLevel:e,level:n,showLevel:r=!0})=>{const s=t/e*100;return f.jsxs("div",{className:"w-full",children:[r&&f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Niveau ",n]}),f.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t," / ",e," XP"]})]}),f.jsxs("div",{className:"relative",children:[f.jsx(bf,{value:t,max:e,color:"xp",size:"md",animated:!0,glow:!0}),f.jsx(ue.div,{className:"absolute right-0 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 flex items-center justify-center text-xs font-bold text-white shadow-lg",style:{right:`${100-s}%`},animate:{boxShadow:["0 0 10px rgba(34, 197, 94, 0.5)","0 0 20px rgba(34, 197, 94, 0.8)","0 0 10px rgba(34, 197, 94, 0.5)"]},transition:{duration:2,repeat:1/0},children:""})]})]})},va=({children:t,variant:e="default",rarity:n,size:r="md",dot:s=!1})=>{const i={default:"bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-600",primary:"bg-gradient-to-r from-primary-100 to-primary-200 dark:from-primary-900/40 dark:to-primary-800/40 text-primary-700 dark:text-primary-200 border border-primary-200 dark:border-primary-800",success:"bg-gradient-to-r from-green-100 to-green-200 dark:from-green-900/40 dark:to-green-800/40 text-green-700 dark:text-green-200 border border-green-200 dark:border-green-800",warning:"bg-gradient-to-r from-yellow-100 to-amber-200 dark:from-yellow-900/40 dark:to-amber-800/40 text-yellow-700 dark:text-yellow-200 border border-yellow-200 dark:border-yellow-800",danger:"bg-gradient-to-r from-red-100 to-red-200 dark:from-red-900/40 dark:to-red-800/40 text-red-700 dark:text-red-200 border border-red-200 dark:border-red-800",info:"bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-900/40 dark:to-blue-800/40 text-blue-700 dark:text-blue-200 border border-blue-200 dark:border-blue-800"},o={common:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 dark:from-gray-700 dark:to-gray-600 dark:text-gray-200 border border-gray-300",rare:"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-800 dark:from-blue-900 dark:to-cyan-900 dark:text-blue-200 ring-2 ring-blue-400 border border-blue-300",epic:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 dark:from-purple-900 dark:to-pink-900 dark:text-purple-200 ring-2 ring-purple-400 border border-purple-300",legendary:"bg-gradient-to-r from-yellow-300 via-amber-400 to-orange-400 text-white ring-2 ring-yellow-500 border border-yellow-400 shadow-lg"},a={sm:"px-2.5 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"};return f.jsxs("span",{className:X("inline-flex items-center gap-1 rounded-full font-medium shadow-sm",a[r],n?o[n]:i[e]),children:[s&&f.jsx("span",{className:X("w-1.5 h-1.5 rounded-full",e==="success"&&"bg-green-500",e==="warning"&&"bg-yellow-500",e==="danger"&&"bg-red-500",e==="info"&&"bg-blue-500",e==="primary"&&"bg-primary-500",e==="default"&&"bg-gray-500")}),t]})},gH=({priority:t})=>{const e={none:{label:"Aucune",variant:"default"},low:{label:"Basse",variant:"success"},medium:{label:"Moyenne",variant:"warning"},high:{label:"Haute",variant:"danger"},critical:{label:"Critique",variant:"danger"}},{label:n,variant:r}=e[t];return f.jsx(va,{variant:r,size:"sm",dot:!0,children:n})},yH=({difficulty:t})=>{const e={trivial:{label:"Trivial",rarity:"common"},easy:{label:"Facile",rarity:"common"},medium:{label:"Moyen",rarity:"rare"},hard:{label:"Difficile",rarity:"rare"},epic:{label:"pique",rarity:"epic"},legendary:{label:"Lgendaire",rarity:"legendary"}},{label:n,rarity:r}=e[t];return f.jsx(va,{rarity:r,size:"sm",children:n})},fw=({amount:t,bonus:e})=>f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-sm font-medium",children:[f.jsx("span",{children:""}),f.jsx("span",{children:t}),e&&e>0&&f.jsxs("span",{className:"text-xs text-green-500",children:["+",e]}),f.jsx("span",{className:"text-xs",children:"XP"})]}),mw=({amount:t})=>f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 text-sm font-medium",children:[f.jsx("span",{children:""}),f.jsx("span",{children:t})]}),vH=({streak:t})=>t===0?null:f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 text-sm font-medium",children:[f.jsx("span",{className:"fire-animation",children:""}),f.jsx("span",{children:t})]}),uN=[{path:"/",icon:Q7,label:"Accueil"},{path:"/tasks",icon:lw,label:"Tches"},{path:"/calendar",icon:Ci,label:"Calendrier"},{path:"/quests",icon:A0,label:"Qutes"},{path:"/achievements",icon:Ir,label:"Achievements"},{path:"/stats",icon:nN,label:"Statistiques"}],xH=()=>{xi();const{user:t,gameStats:e,signOut:n}=he(),{sidebarOpen:r,toggleSidebar:s,isMobile:i}=ur();if(!t||!e)return null;const o=async()=>{await n()};return f.jsxs(f.Fragment,{children:[f.jsx(ar,{children:i&&r&&f.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:s})}),f.jsxs(ue.aside,{initial:!1,animate:{width:r?280:80,x:i&&!r?-280:0},transition:{duration:.3,ease:[.4,0,.2,1]},style:{width:r?"280px":"80px"},className:X("fixed left-0 top-0 h-screen z-50","bg-white/95 dark:bg-gray-900/95","border-r border-gray-200/80 dark:border-gray-700/50","overflow-hidden backdrop-blur-md",i&&!r?"hidden":"flex flex-col",i&&r&&"shadow-2xl"),children:[f.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-gray-100 dark:border-gray-800 flex-shrink-0",children:[f.jsx(ar,{mode:"wait",children:r&&f.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-gradient-br flex items-center justify-center shadow-md",children:f.jsx(Hn,{className:"w-5 h-5 text-white"})}),f.jsx("span",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Questify"})]})}),f.jsx("button",{onClick:s,className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r?f.jsx(sN,{className:"w-5 h-5 text-gray-500"}):f.jsx(J7,{className:"w-5 h-5 text-gray-500"})})]}),f.jsxs("div",{className:X("p-4 border-b border-gray-100 dark:border-gray-800 flex-shrink-0",!r&&"flex justify-center"),children:[f.jsxs("div",{className:X("flex items-center gap-3",!r&&"flex-col"),children:[f.jsx(hw,{config:t.avatar,size:r?"md":"sm",showLevel:!0,level:e.level}),r&&f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"font-medium truncate",children:t.username}),f.jsx("div",{className:"flex items-center gap-2 mt-1",children:f.jsx(vH,{streak:e.currentStreak})})]})]}),r&&f.jsx("div",{className:"mt-3",children:f.jsx(cN,{currentXP:e.currentXP,xpToNextLevel:e.xpToNextLevel,level:e.level,showLevel:!1})})]}),f.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:uN.map(a=>f.jsxs(My,{to:a.path,className:({isActive:l})=>X("flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200","hover:bg-gray-100 dark:hover:bg-gray-800",l&&"bg-[var(--color-accent-50)] dark:bg-[var(--color-accent-900)]/30 text-accent font-medium",!l&&"text-gray-600 dark:text-gray-400",!r&&"justify-center"),children:[f.jsx(a.icon,{className:"w-5 h-5 flex-shrink-0"}),r&&f.jsx("span",{children:a.label})]},a.path))}),f.jsxs("div",{className:"p-3 border-t border-gray-200 dark:border-gray-800 space-y-1 flex-shrink-0",children:[f.jsxs(My,{to:"/settings",className:X("flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors","hover:bg-gray-100 dark:hover:bg-gray-800",!r&&"justify-center"),children:[f.jsx(lN,{className:"w-5 h-5"}),r&&f.jsx("span",{children:"Paramtres"})]}),f.jsxs("button",{onClick:o,className:X("w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors","hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400",!r&&"justify-center"),children:[f.jsx(oN,{className:"w-5 h-5"}),r&&f.jsx("span",{children:"Dconnexion"})]})]})]})]})},wH=()=>{const{isMobile:t}=ur(),e=xi();return t?f.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-40 safe-area-bottom",children:[f.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-t border-white/20 dark:border-gray-700/30"}),f.jsx("div",{className:"relative flex justify-around items-center h-16 px-2 pb-safe max-w-lg mx-auto",children:uN.slice(0,5).map(n=>{const r=e.pathname===n.path;return f.jsxs(My,{to:n.path,className:"relative flex flex-col items-center justify-center flex-1 h-full py-1.5 touch-manipulation group",children:[r&&f.jsx(ue.div,{layoutId:"bottomNavIndicator",className:"absolute inset-x-2 top-1 h-1 bg-accent-gradient rounded-full",transition:{type:"spring",stiffness:500,damping:30}}),f.jsx(ue.div,{whileTap:{scale:.9},className:X("p-1.5 rounded-xl transition-colors duration-200",r?"text-accent":"text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-300"),children:f.jsx(n.icon,{className:"w-5 h-5",strokeWidth:r?2.5:2})}),f.jsx("span",{className:X("text-[10px] font-medium transition-colors duration-200",r?"text-accent":"text-gray-400 dark:text-gray-500"),children:n.label})]},n.path)})})]}):null};var _H={easeInOutQuad:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e}},bH=_H;function TH(t){return t*Math.PI/180}function pn(t,e){return t+Math.random()*(e-t)}function kH(t,e){return Math.floor(t+Math.random()*(e-t+1))}var hc;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(hc||(hc={}));var Rs;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Rs||(Rs={}));const SH=1e3/60;class EH{constructor(e,n,r,s){this.getOptions=n;const{colors:i,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=s,this.w=pn(5,20),this.h=pn(5,20),this.radius=pn(5,10),this.vx=typeof o=="number"?pn(-o,o):pn(o.min,o.max),this.vy=typeof a=="number"?pn(-a,0):pn(a.min,a.max),this.shape=kH(0,2),this.angle=TH(pn(0,360)),this.angularSpin=pn(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=pn(0,1),this.rotationDirection=pn(0,1)?Rs.Positive:Rs.Negative}update(e){const{gravity:n,wind:r,friction:s,opacity:i,drawShape:o}=this.getOptions(),a=e/SH;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=s**a,this.vy*=s**a,this.rotateY>=1&&this.rotationDirection===Rs.Positive?this.rotationDirection=Rs.Negative:this.rotateY<=-1&&this.rotationDirection===Rs.Negative&&(this.rotationDirection=Rs.Positive);const l=.1*this.rotationDirection*a;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case hc.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case hc.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case hc.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class CH{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=pn(this.x,this.w+this.x),i=pn(this.y,this.h+this.y);return new EH(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:o,particlesGenerated:a,lastNumberOfPieces:l}=this,{run:c,recycle:u,numberOfPieces:d,debug:m,tweenFunction:p,tweenDuration:g}=this.getOptions();if(!c)return!1;const v=this.particles.length,_=u?v:a;if(_<d){l!==d&&(this.tweenProgress=0,this.tweenFrom=_,this.lastNumberOfPieces=d),this.tweenProgress=Math.min(g,Math.max(0,this.tweenProgress+s));const w=p(this.tweenProgress,this.tweenFrom,d,g),x=Math.round(w-_);for(let b=0;b<x;b++)this.particles.push(this.getParticle());this.particlesGenerated+=x}m&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${v}`,i.width-10,i.height-20));for(let w=this.particles.length-1;w>=0;w--){const x=this.particles[w];x.update(s),(x.y>i.height||x.y<-100||x.x>i.width+100||x.x<-100)&&(u&&_<=d?this.particles[w]=this.getParticle():this.removeParticleAt(w))}return v>0||_<d},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const pw={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:bH.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class PH{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...pw,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:a},canvas:l,context:c}=this,u=Math.min(s-this.lastFrameTime,50);if(a&&u<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(a?u%a:0),i&&(c.fillStyle="white",c.clearRect(0,0,l.width,l.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new CH(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var s,i;const n=(s=this._options)==null?void 0:s.run,r=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const IH=hn.createRef();class gw extends hn.Component{constructor(e){super(e),this.canvas=hn.createRef(),this.canvas=e.canvasRef||IH}componentDidMount(){if(this.canvas.current){const e=_g(this.props)[0];this.confetti=new PH(this.canvas.current,e)}}componentDidUpdate(){const e=_g(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=_g(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return f.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}gw.defaultProps={...pw};gw.displayName="ReactConfetti";function _g(t){const e={},n={},r={},s=[...Object.keys(pw),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in t){const a=t[o];s.includes(o)?e[o]=a:i.includes(o)?i[o]=a:r[o]=a}return[e,r,n]}const AH=hn.forwardRef((t,e)=>f.jsx(gw,{canvasRef:e,...t})),dN=[{id:"tasks",name:"Tches",icon:""},{id:"streaks",name:"Sries",icon:""},{id:"quests",name:"Qutes",icon:""},{id:"level",name:"Niveau",icon:""},{id:"social",name:"Social",icon:""},{id:"special",name:"Spcial",icon:""}],gr=[{id:"first_task",name:"Premier Pas",description:"Compltez votre premire tche",icon:"",rarity:"common",category:"tasks",xpReward:10,coinReward:5,requirement:{type:"tasks_completed",value:1}},{id:"task_10",name:"Dbutant",description:"Compltez 10 tches",icon:"",rarity:"common",category:"tasks",xpReward:25,coinReward:10,requirement:{type:"tasks_completed",value:10}},{id:"task_50",name:"Travailleur",description:"Compltez 50 tches",icon:"",rarity:"rare",category:"tasks",xpReward:100,coinReward:50,requirement:{type:"tasks_completed",value:50}},{id:"task_100",name:"Productif",description:"Compltez 100 tches",icon:"",rarity:"rare",category:"tasks",xpReward:200,coinReward:100,requirement:{type:"tasks_completed",value:100}},{id:"task_500",name:"Machine de Guerre",description:"Compltez 500 tches",icon:"",rarity:"epic",category:"tasks",xpReward:500,coinReward:250,requirement:{type:"tasks_completed",value:500}},{id:"task_1000",name:"Lgende Vivante",description:"Compltez 1000 tches",icon:"",rarity:"legendary",category:"tasks",xpReward:1e3,coinReward:500,requirement:{type:"tasks_completed",value:1e3}},{id:"streak_3",name:"Rgularit",description:"Maintenez un streak de 3 jours",icon:"",rarity:"common",category:"streaks",xpReward:30,coinReward:15,requirement:{type:"streak",value:3}},{id:"streak_7",name:"Semaine Parfaite",description:"Maintenez un streak de 7 jours",icon:"",rarity:"common",category:"streaks",xpReward:75,coinReward:35,requirement:{type:"streak",value:7}},{id:"streak_14",name:"Persvrant",description:"Maintenez un streak de 14 jours",icon:"",rarity:"rare",category:"streaks",xpReward:150,coinReward:75,requirement:{type:"streak",value:14}},{id:"streak_30",name:"Mois Lgendaire",description:"Maintenez un streak de 30 jours",icon:"",rarity:"epic",category:"streaks",xpReward:300,coinReward:150,requirement:{type:"streak",value:30}},{id:"streak_100",name:"Centurion",description:"Maintenez un streak de 100 jours",icon:"",rarity:"legendary",category:"streaks",xpReward:1e3,coinReward:500,requirement:{type:"streak",value:100}},{id:"streak_365",name:"Anne Incroyable",description:"Maintenez un streak de 365 jours",icon:"",rarity:"legendary",category:"streaks",xpReward:5e3,coinReward:2500,requirement:{type:"streak",value:365},secret:!0},{id:"level_5",name:"Apprenti",description:"Atteignez le niveau 5",icon:"",rarity:"common",category:"xp",xpReward:50,coinReward:25,requirement:{type:"level",value:5}},{id:"level_10",name:"Aventurier",description:"Atteignez le niveau 10",icon:"",rarity:"common",category:"xp",xpReward:100,coinReward:50,requirement:{type:"level",value:10}},{id:"level_25",name:"Hros",description:"Atteignez le niveau 25",icon:"",rarity:"rare",category:"xp",xpReward:250,coinReward:125,requirement:{type:"level",value:25}},{id:"level_50",name:"Champion",description:"Atteignez le niveau 50",icon:"",rarity:"epic",category:"xp",xpReward:500,coinReward:250,requirement:{type:"level",value:50}},{id:"level_100",name:"Matre Lgendaire",description:"Atteignez le niveau 100",icon:"",rarity:"legendary",category:"xp",xpReward:2e3,coinReward:1e3,requirement:{type:"level",value:100}},{id:"xp_1000",name:"Collectionneur d'XP",description:"Gagnez 1000 XP au total",icon:"",rarity:"common",category:"xp",xpReward:50,coinReward:25,requirement:{type:"total_xp",value:1e3}},{id:"xp_10000",name:"Chasseur d'XP",description:"Gagnez 10000 XP au total",icon:"",rarity:"rare",category:"xp",xpReward:200,coinReward:100,requirement:{type:"total_xp",value:1e4}},{id:"xp_100000",name:"Matre de l'XP",description:"Gagnez 100000 XP au total",icon:"",rarity:"legendary",category:"xp",xpReward:1e3,coinReward:500,requirement:{type:"total_xp",value:1e5}},{id:"first_epic",name:"Premier Dfi pique",description:"Compltez une tche pique",icon:"",rarity:"rare",category:"tasks",xpReward:100,coinReward:50,requirement:{type:"epic_tasks",value:1}},{id:"first_legendary",name:"Lgende",description:"Compltez une tche lgendaire",icon:"",rarity:"epic",category:"tasks",xpReward:250,coinReward:125,requirement:{type:"legendary_tasks",value:1}},{id:"legendary_10",name:"Chasseur de Lgendes",description:"Compltez 10 tches lgendaires",icon:"",rarity:"legendary",category:"tasks",xpReward:1e3,coinReward:500,requirement:{type:"legendary_tasks",value:10}},{id:"early_bird",name:"Lve-tt",description:"Compltez une tche avant 7h du matin",icon:"",rarity:"common",category:"time",xpReward:25,coinReward:10,requirement:{type:"early_completion",value:1}},{id:"night_owl",name:"Oiseau de Nuit",description:"Compltez une tche aprs minuit",icon:"",rarity:"common",category:"time",xpReward:25,coinReward:10,requirement:{type:"late_completion",value:1}},{id:"speed_demon",name:"clair",description:"Compltez 5 tches en moins d'une heure",icon:"",rarity:"rare",category:"time",xpReward:150,coinReward:75,requirement:{type:"fast_completion",value:5}},{id:"perfect_day",name:"Journe Parfaite",description:"Compltez toutes vos tches du jour",icon:"",rarity:"rare",category:"time",xpReward:100,coinReward:50,requirement:{type:"perfect_day",value:1}},{id:"perfect_week",name:"Semaine Parfaite",description:"Compltez toutes vos tches de la semaine",icon:"",rarity:"epic",category:"time",xpReward:500,coinReward:250,requirement:{type:"perfect_week",value:1}},{id:"category_master",name:"Spcialiste",description:"Compltez 50 tches dans une mme catgorie",icon:"",rarity:"rare",category:"categories",xpReward:150,coinReward:75,requirement:{type:"category_tasks",value:50}},{id:"well_rounded",name:"Polyvalent",description:"Compltez des tches dans toutes les catgories",icon:"",rarity:"rare",category:"categories",xpReward:200,coinReward:100,requirement:{type:"all_categories",value:1}},{id:"comeback",name:"Le Retour",description:"Reconnectez-vous aprs 7 jours d'absence",icon:"",rarity:"common",category:"special",xpReward:50,coinReward:25,requirement:{type:"comeback",value:7},secret:!0},{id:"perfectionist",name:"Perfectionniste",description:"Compltez 10 tches avec toutes les sous-tches",icon:"",rarity:"rare",category:"special",xpReward:150,coinReward:75,requirement:{type:"perfect_tasks",value:10}},{id:"overachiever",name:"Surpassement",description:"Gagnez 500 XP en une seule journe",icon:"",rarity:"epic",category:"special",xpReward:250,coinReward:125,requirement:{type:"daily_xp",value:500}},{id:"founder",name:"Fondateur",description:"Crez votre compte",icon:"",rarity:"common",category:"special",xpReward:50,coinReward:25,requirement:{type:"account_created",value:1}},{id:"collector_10",name:"Petit Collectionneur",description:"Dbloquez 10 achievements",icon:"",rarity:"common",category:"collection",xpReward:100,coinReward:50,requirement:{type:"achievements",value:10}},{id:"collector_25",name:"Grand Collectionneur",description:"Dbloquez 25 achievements",icon:"",rarity:"rare",category:"collection",xpReward:300,coinReward:150,requirement:{type:"achievements",value:25}},{id:"collector_all",name:"Collectionneur Ultime",description:"Dbloquez tous les achievements",icon:"",rarity:"legendary",category:"collection",xpReward:2e3,coinReward:1e3,requirement:{type:"achievements",value:999},secret:!0},{id:"quest_first",name:"Quteur",description:"Compltez votre premire qute",icon:"",rarity:"common",category:"special",xpReward:50,coinReward:25,requirement:{type:"quests_completed",value:1}},{id:"quest_10",name:"Aventurier Confirm",description:"Compltez 10 qutes",icon:"",rarity:"rare",category:"special",xpReward:200,coinReward:100,requirement:{type:"quests_completed",value:10}},{id:"daily_warrior",name:"Guerrier Quotidien",description:"Compltez 30 qutes journalires",icon:"",rarity:"epic",category:"special",xpReward:500,coinReward:250,requirement:{type:"daily_quests",value:30}}],N0={common:"#9ca3af",rare:"#3b82f6",epic:"#8b5cf6",legendary:"#f59e0b"},hN=t=>gr.find(e=>e.id===t),hh=Object.freeze(Object.defineProperty({__proto__:null,ACHIEVEMENTS:gr,ACHIEVEMENT_CATEGORIES:dN,RARITY_COLORS:N0,getAchievementById:hN},Symbol.toStringTag,{value:"Module"})),RH=()=>{const{xpGained:t,hideGains:e}=ur();return hn.useEffect(()=>{if(t){const n=setTimeout(e,2e3);return()=>clearTimeout(n)}},[t,e]),f.jsx(ar,{children:t&&f.jsx(ue.div,{initial:{opacity:0,y:50,scale:.5},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50},className:"fixed bottom-20 right-4 z-50 pointer-events-none",children:f.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-full shadow-lg",children:[f.jsx(Vm,{className:"w-5 h-5"}),f.jsxs("span",{className:"font-bold text-lg",children:["+",t," XP"]})]})})})},NH=()=>{const{isLevelUpModalOpen:t,newLevel:e,hideLevelUp:n}=ur(),{gameStats:r}=he(),[s,i]=hn.useState(!1);return hn.useEffect(()=>{if(t){i(!0);const o=setTimeout(()=>{i(!1),n()},5e3);return()=>clearTimeout(o)}},[t,n]),f.jsx(ar,{children:t&&f.jsxs(f.Fragment,{children:[s&&f.jsx(AH,{width:window.innerWidth,height:window.innerHeight,recycle:!1,numberOfPieces:200,gravity:.3}),f.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:n,children:f.jsxs(ue.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",stiffness:200,damping:20},className:"text-center",onClick:o=>o.stopPropagation(),children:[f.jsx(ue.div,{animate:{boxShadow:["0 0 20px rgba(251, 191, 36, 0.5)","0 0 60px rgba(251, 191, 36, 0.8)","0 0 20px rgba(251, 191, 36, 0.5)"]},transition:{duration:1.5,repeat:1/0},className:"w-32 h-32 mx-auto mb-6 rounded-full bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center",children:f.jsx(z7,{className:"w-16 h-16 text-white"})}),f.jsx(ue.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-4xl font-bold text-white mb-2",children:"LEVEL UP!"}),f.jsx(ue.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.5,type:"spring"},className:"text-6xl font-black gradient-text mb-4",children:e}),f.jsx(ue.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"text-xl text-gray-300",children:dw(e)}),f.jsx(ue.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"mt-8 px-8 py-3 bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-bold rounded-full",onClick:n,children:"Continuer l'aventure !"})]})})]})})},DH=()=>{const{unlockedAchievement:t,hideAchievementUnlock:e}=ur(),n=t?hN(t):null;return hn.useEffect(()=>{if(t){const r=setTimeout(e,4e3);return()=>clearTimeout(r)}},[t,e]),f.jsx(ar,{children:n&&f.jsx(ue.div,{initial:{x:400,opacity:0},animate:{x:0,opacity:1},exit:{x:400,opacity:0},transition:{type:"spring",stiffness:200,damping:25},className:"fixed top-4 right-4 z-50",children:f.jsx("div",{className:"p-4 rounded-xl shadow-2xl bg-white dark:bg-gray-800 border-2",style:{borderColor:N0[n.rarity]},children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(ue.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring"},className:"w-16 h-16 rounded-xl flex items-center justify-center text-3xl",style:{backgroundColor:N0[n.rarity]+"20"},children:n.icon}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Ir,{className:"w-5 h-5 text-yellow-500"}),f.jsx("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Achievement Dbloqu !"})]}),f.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:n.name}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n.description}),f.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[f.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600",children:[f.jsx(cw,{className:"w-3 h-3"}),"+",n.xpReward," XP"]}),f.jsxs("span",{className:"text-xs text-yellow-600",children:["+",n.coinReward," "]})]})]})]})})})})},MH=()=>f.jsxs(f.Fragment,{children:[f.jsx(RH,{}),f.jsx(NH,{}),f.jsx(DH,{})]}),fc=({isOpen:t,onClose:e,title:n,children:r,size:s="md",showCloseButton:i=!0})=>{const o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-4xl"};return f.jsx(ar,{children:t&&f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:f.jsxs("div",{className:"flex min-h-screen items-end sm:items-center justify-center sm:p-4",children:[f.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),f.jsxs(ue.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{duration:.3,type:"spring",damping:25},className:X("relative w-full bg-white dark:bg-gray-800 shadow-xl","rounded-t-3xl sm:rounded-2xl","max-h-[90vh] sm:max-h-[85vh] overflow-hidden flex flex-col",o[s]),children:[(n||i)&&f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[f.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full sm:hidden"}),n&&f.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white pt-2 sm:pt-0",children:n}),i&&f.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors touch-manipulation",children:f.jsx(uw,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),f.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:r})]})]})})})},xr=({label:t,error:e,leftIcon:n,rightIcon:r,className:s,...i})=>f.jsxs("div",{className:"w-full",children:[t&&f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),f.jsxs("div",{className:"relative",children:[n&&f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:n}),f.jsx("input",{className:X("w-full px-4 py-2.5 rounded-2xl border-2 border-purple-200 dark:border-purple-800/30","bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-300 focus:border-primary-300","placeholder-gray-400 dark:placeholder-gray-500","transition-all duration-200 shadow-sm focus:shadow-soft",n?"pl-10":"",r?"pr-10":"",e&&"border-red-300 focus:ring-red-300",s),...i}),r&&f.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400",children:r})]}),e&&f.jsx("p",{className:"mt-1 text-sm text-red-500",children:e})]}),fN=({label:t,error:e,className:n,...r})=>f.jsxs("div",{className:"w-full",children:[t&&f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),f.jsx("textarea",{className:X("w-full px-4 py-2.5 rounded-2xl border-2 border-purple-200 dark:border-purple-800/30","bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-300 focus:border-primary-300","placeholder-gray-400 dark:placeholder-gray-500","transition-all duration-200 resize-none shadow-sm focus:shadow-soft",e&&"border-red-300 focus:ring-red-300",n),...r}),e&&f.jsx("p",{className:"mt-1 text-sm text-red-500",children:e})]}),Zi=({label:t,error:e,options:n,className:r,...s})=>f.jsxs("div",{className:"w-full",children:[t&&f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),f.jsx("select",{className:X("w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","transition-colors duration-200 cursor-pointer",e&&"border-red-500 focus:ring-red-500",r),...s,children:n.map(i=>f.jsx("option",{value:i.value,children:i.label},i.value))}),e&&f.jsx("p",{className:"mt-1 text-sm text-red-500",children:e})]}),Yn=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null,jt=(t,e,n="sine",r=.3)=>{if(!Yn)return;const s=Yn.createOscillator(),i=Yn.createGain();s.connect(i),i.connect(Yn.destination),s.frequency.value=t,s.type=n,i.gain.setValueAtTime(r,Yn.currentTime),i.gain.exponentialRampToValueAtTime(.01,Yn.currentTime+e),s.start(Yn.currentTime),s.stop(Yn.currentTime+e)},jH={taskComplete:()=>{jt(523.25,.1,"sine",.3),setTimeout(()=>jt(659.25,.1,"sine",.3),100),setTimeout(()=>jt(783.99,.2,"sine",.3),200)},xpGain:()=>{jt(987.77,.05,"square",.2),setTimeout(()=>jt(1318.51,.1,"square",.2),50)},levelUp:()=>{[523.25,659.25,783.99,1046.5].forEach((e,n)=>{setTimeout(()=>jt(e,.2,"sine",.4),n*150)})},achievementUnlock:()=>{jt(392,.15,"triangle",.3),setTimeout(()=>jt(523.25,.15,"triangle",.3),150),setTimeout(()=>jt(659.25,.15,"triangle",.3),300),setTimeout(()=>jt(783.99,.3,"triangle",.4),450)},questComplete:()=>{[261.63,329.63,392,523.25,659.25,783.99].forEach((e,n)=>{setTimeout(()=>jt(e,.15,"sine",.25),n*100)})},error:()=>{jt(200,.2,"sawtooth",.2)},click:()=>{jt(800,.05,"square",.1)},streak:()=>{jt(349.23,.1,"triangle",.3),setTimeout(()=>jt(440,.1,"triangle",.3),80),setTimeout(()=>jt(523.25,.15,"triangle",.4),160)}},mc=(t,e=!0)=>{e&&Yn&&(Yn.state==="suspended"&&Yn.resume(),jH[t]())},OH=[{value:"Travail",label:" Travail",color:"#3b82f6"},{value:"Personnel",label:" Personnel",color:"#22c55e"},{value:"Sant",label:" Sant",color:"#ef4444"},{value:"tudes",label:" tudes",color:"#8b5cf6"},{value:"Finances",label:" Finances",color:"#f59e0b"},{value:"Social",label:" Social",color:"#ec4899"},{value:"Loisirs",label:" Loisirs",color:"#06b6d4"},{value:"Maison",label:" Maison",color:"#84cc16"}],LH=({isOpen:t,onClose:e,editTask:n})=>{var R;const{addTask:r,updateTask:s,categories:i,calculateTaskRewards:o}=Dr(),{user:a}=he(),[l,c]=M.useState(!1),[u,d]=M.useState({}),[m,p]=M.useState({}),[g,v]=M.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",category:(n==null?void 0:n.category)||"Personnel",priority:(n==null?void 0:n.priority)||"medium",difficulty:(n==null?void 0:n.difficulty)||"medium",dueDate:n!=null&&n.dueDate?new Date(n.dueDate).toISOString().slice(0,16):"",estimatedTime:((R=n==null?void 0:n.estimatedTime)==null?void 0:R.toString())||"",recurrence:(n==null?void 0:n.recurrence)||"none",subtasks:(n==null?void 0:n.subtasks.map(z=>z.title))||[],tags:(n==null?void 0:n.tags.join(", "))||""}),[_,w]=M.useState("");M.useEffect(()=>{var z,H,$;t&&(v({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",category:(n==null?void 0:n.category)||"Personnel",priority:(n==null?void 0:n.priority)||"medium",difficulty:(n==null?void 0:n.difficulty)||"medium",dueDate:n!=null&&n.dueDate?new Date(n.dueDate).toISOString().slice(0,16):"",estimatedTime:((z=n==null?void 0:n.estimatedTime)==null?void 0:z.toString())||"",recurrence:(n==null?void 0:n.recurrence)||"none",subtasks:((H=n==null?void 0:n.subtasks)==null?void 0:H.map(J=>J.title))||[],tags:(($=n==null?void 0:n.tags)==null?void 0:$.join(", "))||""}),d({}),p({}))},[t,n]);const x=o(g.difficulty,g.priority),b=()=>{const z={};return g.title.trim()?g.title.trim().length<2&&(z.title="Le titre doit faire au moins 2 caractres"):z.title="Le titre est obligatoire",d(z),Object.keys(z).length===0},I=async z=>{if(z.preventDefault(),p({title:!0}),!!b()){if(!a){d({general:"Vous devez tre connect pour crer une tche"});return}c(!0);try{const H={userId:a.id,title:g.title.trim(),description:g.description.trim()||void 0,category:g.category,priority:g.priority,difficulty:g.difficulty,dueDate:g.dueDate?new Date(g.dueDate):void 0,estimatedTime:g.estimatedTime?parseInt(g.estimatedTime):void 0,recurrence:g.recurrence,subtasks:g.subtasks.map(($,J)=>({id:`subtask-${J}-${Date.now()}`,title:$,completed:!1})),tags:g.tags.split(",").map($=>$.trim()).filter(Boolean),status:"pending",progress:0};n?await s(n.id,H):(await r(H),mc("click")),e(),C()}catch(H){console.error("Error saving task:",H);const $=(H==null?void 0:H.message)||"Une erreur est survenue lors de la cration de la tche";d({general:$})}finally{c(!1)}}},C=()=>{v({title:"",description:"",category:"Personnel",priority:"medium",difficulty:"medium",dueDate:"",estimatedTime:"",recurrence:"none",subtasks:[],tags:""}),w(""),d({}),p({})},N=()=>{_.trim()&&(v(z=>({...z,subtasks:[...z.subtasks,_.trim()]})),w(""))},S=z=>{v(H=>({...H,subtasks:H.subtasks.filter(($,J)=>J!==z)}))},k=z=>{v({...g,title:z.target.value}),m.title&&(z.target.value.trim()?d(H=>({...H,title:void 0})):d(H=>({...H,title:"Le titre est obligatoire"})))},E=()=>{p(z=>({...z,title:!0})),g.title.trim()||d(z=>({...z,title:"Le titre est obligatoire"}))},A=[{value:"low",label:" Basse"},{value:"medium",label:" Moyenne"},{value:"high",label:" Haute"},{value:"critical",label:" Critique"}],D=[{value:"trivial",label:" Trivial (5 XP)"},{value:"easy",label:" Facile (10 XP)"},{value:"medium",label:" Moyen (25 XP)"},{value:"hard",label:" Difficile (50 XP)"},{value:"epic",label:" pique (100 XP)"},{value:"legendary",label:" Lgendaire (200 XP)"}],j=[{value:"none",label:"Aucune"},{value:"daily",label:"Quotidien"},{value:"weekly",label:"Hebdomadaire"},{value:"monthly",label:"Mensuel"}];return f.jsx(fc,{isOpen:t,onClose:e,title:n?"Modifier la tche":"Nouvelle tche",size:"xl",children:f.jsxs("form",{onSubmit:I,noValidate:!0,className:"space-y-5",children:[f.jsx(ar,{children:u.general&&f.jsxs(ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-3 p-3 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500",children:[f.jsx(F7,{className:"w-5 h-5 flex-shrink-0"}),f.jsx("span",{className:"text-sm",children:u.general})]})}),f.jsx("div",{children:f.jsx(xr,{label:"Titre de la tche *",placeholder:"Que devez-vous accomplir ?",value:g.title,onChange:k,onBlur:E,error:m.title?u.title:void 0,autoFocus:!0})}),f.jsx(fN,{label:"Description (optionnel)",placeholder:"Ajoutez des dtails ou des notes...",rows:2,value:g.description,onChange:z=>v({...g,description:z.target.value})}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsx(Zi,{label:"Catgorie",options:OH,value:g.category,onChange:z=>v({...g,category:z.target.value})}),f.jsx(Zi,{label:"Priorit",options:A,value:g.priority,onChange:z=>v({...g,priority:z.target.value})})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsx(Zi,{label:"Difficult",options:D,value:g.difficulty,onChange:z=>v({...g,difficulty:z.target.value})}),f.jsx(xr,{label:"Date d'chance (optionnel)",type:"datetime-local",value:g.dueDate,onChange:z=>v({...g,dueDate:z.target.value}),required:!1})]}),f.jsxs("div",{className:"p-4 bg-gradient-to-r from-teal-500/10 to-cyan-500/10 border border-teal-500/20 rounded-xl",children:[f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2 font-medium",children:" Rcompenses estimes :"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(fw,{amount:x.xp}),f.jsx(mw,{amount:x.coins})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsx(xr,{label:"Temps estim (minutes)",type:"number",placeholder:"Ex: 30",min:"1",value:g.estimatedTime,onChange:z=>v({...g,estimatedTime:z.target.value})}),f.jsx(Zi,{label:"Rcurrence",options:j,value:g.recurrence,onChange:z=>v({...g,recurrence:z.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sous-tches (optionnel)"}),f.jsxs("div",{className:"flex gap-2 mb-2",children:[f.jsx(xr,{placeholder:"Ajouter une tape...",value:_,onChange:z=>w(z.target.value),onKeyPress:z=>z.key==="Enter"&&(z.preventDefault(),N())}),f.jsx(Xe,{type:"button",variant:"secondary",onClick:N,className:"flex-shrink-0",children:f.jsx(wo,{className:"w-4 h-4"})})]}),g.subtasks.length>0&&f.jsx("ul",{className:"space-y-2 max-h-32 overflow-y-auto",children:g.subtasks.map((z,H)=>f.jsxs(ue.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-2.5 bg-gray-100 dark:bg-gray-900 rounded-lg",children:[f.jsx("span",{className:"text-sm truncate flex-1 mr-2",children:z}),f.jsx("button",{type:"button",onClick:()=>S(H),className:"text-red-500 hover:text-red-600 p-1 flex-shrink-0",children:f.jsx(_f,{className:"w-4 h-4"})})]},H))})]}),f.jsx(xr,{label:"Tags (optionnel)",placeholder:"projet, urgent, ide... (spars par des virgules)",value:g.tags,onChange:z=>v({...g,tags:z.target.value})}),f.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[f.jsx(Xe,{type:"button",variant:"secondary",onClick:e,className:"w-full sm:w-auto",children:"Annuler"}),f.jsx(Xe,{type:"submit",variant:"game",isLoading:l,className:"w-full sm:w-auto",children:n?"Enregistrer":"Crer la tche"})]})]})})},VH=()=>{const{sidebarOpen:t,isMobile:e,isTaskModalOpen:n,editingTask:r,openTaskModal:s,closeTaskModal:i}=ur(),{user:o}=he();return f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 overflow-x-hidden",children:[f.jsx(xH,{}),f.jsx("main",{className:X("min-h-screen transition-all duration-300 overflow-x-hidden",!e&&t?"ml-[280px]":"",!e&&!t?"ml-20":"",e?"ml-0 pb-24":""),children:f.jsx("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8",children:f.jsx(d5,{})})}),f.jsx(wH,{}),f.jsx(ue.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:400,damping:25},className:X("fixed z-40",e?"bottom-[88px] right-4":"bottom-8 right-8"),children:f.jsxs(ue.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"relative w-14 h-14 rounded-2xl bg-accent-gradient-br text-white shadow-lg shadow-accent flex items-center justify-center group",children:[f.jsx("span",{className:"absolute inset-0 rounded-2xl bg-accent-gradient-br animate-ping opacity-20"}),f.jsx(wo,{className:"w-6 h-6 relative z-10 transition-transform group-hover:rotate-90"})]})}),f.jsx(LH,{isOpen:n,onClose:i,editTask:r}),f.jsx(MH,{})]})},fh=({task:t,onComplete:e,compact:n=!1})=>{const[r,s]=M.useState(!1),[i,o]=M.useState(!1),{completeTask:a,deleteTask:l,archiveTask:c,toggleSubtask:u}=Dr(),{showXPGain:d,showCoinsGain:m,showLevelUp:p,setEditingTask:g,openTaskModal:v}=ur(),_=()=>{g(t),v(),s(!1)},w=async()=>{const N=await a(t.id);mc("taskComplete"),d(N.xpGained),m(N.coinsGained),N.leveledUp&&setTimeout(()=>{p(N.newLevel),mc("levelUp")},500),e==null||e()},x=async N=>{await u(t.id,N),mc("click")},b=t.status==="completed",I=t.dueDate&&new Date(t.dueDate)<new Date&&!b,C=t.subtasks.filter(N=>N.completed).length;return f.jsx(ue.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:f.jsxs(ke,{variant:"game",className:X("p-3 sm:p-4 relative overflow-hidden transition-shadow duration-200 hover:shadow-soft-lg",b&&"opacity-60",I&&"border-l-4 border-l-red-500"),children:[f.jsx("div",{className:"absolute top-0 right-0 w-12 sm:w-16 h-12 sm:h-16 -mr-6 sm:-mr-8 -mt-6 sm:-mt-8 rounded-full opacity-20",style:{backgroundColor:dH(t.priority)}}),f.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[f.jsx("button",{onClick:w,disabled:b,className:X("flex-shrink-0 mt-0.5 transition-colors touch-manipulation",b?"text-green-500":"text-gray-400 hover:text-green-500"),children:b?f.jsx(lr,{className:"w-5 h-5 sm:w-6 sm:h-6"}):f.jsx(P0,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsx("h3",{className:X("font-medium text-sm sm:text-base text-gray-900 dark:text-white line-clamp-2",b&&"line-through text-gray-500"),children:t.title}),f.jsxs("div",{className:"relative flex-shrink-0",children:[f.jsx("button",{onClick:()=>s(!r),className:"p-1.5 rounded hover:bg-gray-100 dark:hover:bg-gray-700 touch-manipulation",children:f.jsx(tH,{className:"w-4 h-4 text-gray-400"})}),f.jsx(ar,{children:r&&f.jsxs(ue.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute right-0 top-full mt-1 w-36 sm:w-40 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-10",children:[f.jsxs("button",{onClick:_,className:"w-full px-3 py-2.5 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 touch-manipulation",children:[f.jsx(sH,{className:"w-4 h-4"})," Modifier"]}),f.jsxs("button",{onClick:()=>{c(t.id),s(!1)},className:"w-full px-3 py-2.5 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 touch-manipulation",children:[f.jsx(U7,{className:"w-4 h-4"})," Archiver"]}),f.jsxs("button",{onClick:()=>{l(t.id),s(!1)},className:"w-full px-3 py-2.5 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2 touch-manipulation",children:[f.jsx(_f,{className:"w-4 h-4"})," Supprimer"]})]})})]})]}),t.description&&!n&&f.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:t.description}),f.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2 mt-2",children:[f.jsx(gH,{priority:t.priority}),!n&&f.jsx(yH,{difficulty:t.difficulty}),t.category&&!n&&f.jsx(va,{variant:"default",size:"sm",children:t.category})]}),t.subtasks.length>0&&!n&&f.jsxs("div",{className:"mt-2 sm:mt-3",children:[f.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-1 text-xs sm:text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 touch-manipulation",children:[i?f.jsx(H7,{className:"w-3 h-3 sm:w-4 sm:h-4"}):f.jsx(Mn,{className:"w-3 h-3 sm:w-4 sm:h-4"}),f.jsxs("span",{children:[C,"/",t.subtasks.length," sous-tches"]})]}),!i&&t.subtasks.length>0&&f.jsx(bf,{value:C,max:t.subtasks.length,color:"primary",size:"sm"}),f.jsx(ar,{children:i&&f.jsx(ue.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-2 space-y-1 overflow-hidden",children:t.subtasks.map(N=>f.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[f.jsx("button",{onClick:()=>x(N.id),className:X("flex-shrink-0 touch-manipulation",N.completed?"text-green-500":"text-gray-400 hover:text-green-500"),children:N.completed?f.jsx(lr,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}):f.jsx(P0,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),f.jsx("span",{className:X("truncate",N.completed&&"line-through text-gray-400"),children:N.title})]},N.id))})})]}),f.jsxs("div",{className:"flex items-center justify-between mt-2 sm:mt-3 pt-2 sm:pt-3 border-t border-gray-100 dark:border-gray-700",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-xs sm:text-sm text-gray-500 min-w-0",children:[t.dueDate&&f.jsxs("span",{className:X("flex items-center gap-1 truncate",I&&"text-red-500"),children:[f.jsx(Ci,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),f.jsx("span",{className:"truncate",children:uH(t.dueDate)})]}),t.estimatedTime&&!n&&f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(Lm,{className:"w-3 h-3 sm:w-4 sm:h-4"}),t.estimatedTime,"m"]})]}),f.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[f.jsx(fw,{amount:t.xpReward}),!n&&f.jsx(mw,{amount:t.coinReward})]})]})]})]})]})})},D0=({quest:t,compact:e=!1})=>{const{claimQuestRewards:n}=Pu(),[r,s]=hn.useState(!1),i=t.objectives.filter(g=>g.completed).length,o=t.objectives.length,a=t.objectives.reduce((g,v)=>g+v.current,0),l=t.objectives.reduce((g,v)=>g+v.target,0),c=hH(t.endDate),u=()=>{if(t.completed)return"Termin ";if(o===1){const g=t.objectives[0];return`${g.current}/${g.target}`}return l>o?`${a}/${l}`:`${i}/${o}`},d=async()=>{s(!0);try{await n(t.id),mc("questComplete")}finally{s(!1)}},m={daily:"border-l-blue-500 bg-blue-50 dark:bg-blue-900/10",weekly:"border-l-cyan-500 bg-cyan-50 dark:bg-cyan-900/10",special:"border-l-yellow-500 bg-yellow-50 dark:bg-yellow-900/10",story:"border-l-green-500 bg-green-50 dark:bg-green-900/10"},p={daily:"Quotidienne",weekly:"Hebdomadaire",special:"Spciale",story:"Histoire"};return f.jsx(ue.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:f.jsx(ke,{className:X("p-4 border-l-4 transition-shadow duration-200 hover:shadow-soft-lg",m[t.type],t.completed&&!t.claimed&&"ring-2 ring-yellow-400 ring-opacity-50"),children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:X("w-12 h-12 rounded-2xl flex items-center justify-center text-2xl","bg-gradient-to-br from-white to-teal-50 dark:from-gray-800 dark:to-teal-900/20 shadow-soft border-2 border-teal-100 dark:border-teal-900/30"),children:t.icon}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-start justify-between gap-3 mb-2",children:f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:t.title}),f.jsx(va,{variant:t.type==="daily"?"info":t.type==="weekly"?"primary":"warning",size:"sm",children:p[t.type]}),f.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:[f.jsx(Lm,{className:"w-3.5 h-3.5"}),f.jsx("span",{children:c})]})]}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:t.description}),e&&f.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx(bf,{value:t.completed?100:a,max:t.completed?100:l,color:t.completed?"gold":"primary",size:"sm"})}),f.jsx("span",{className:X("text-xs font-medium whitespace-nowrap",t.completed?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"),children:u()}),t.completed&&!t.claimed&&f.jsxs(Xe,{variant:"game",size:"sm",onClick:d,isLoading:r,className:"ml-1 text-xs py-1 px-2",children:[f.jsx(I0,{className:"w-3 h-3 mr-1"}),"Rclamer"]})]})]})}),!e&&f.jsx("div",{className:"mt-3 space-y-2",children:t.objectives.map(g=>f.jsx(FH,{objective:g},g.id))}),!e&&f.jsxs("div",{className:"mt-3",children:[f.jsxs("div",{className:"flex justify-between text-xs font-medium mb-2",children:[f.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:t.completed?" Qute termine !":"Progression"}),f.jsx("span",{className:X("font-semibold",t.completed?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"),children:u()})]}),f.jsx(bf,{value:t.completed?100:a,max:t.completed?100:l,color:t.completed?"gold":"primary",size:"md"})]}),!e&&f.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:"Rcompenses:"}),f.jsx(fw,{amount:t.rewards.xp}),f.jsx(mw,{amount:t.rewards.coins}),t.rewards.gems&&f.jsxs(va,{variant:"primary",size:"sm",children:[" ",t.rewards.gems]})]}),t.completed&&!t.claimed&&f.jsx(Xe,{variant:"game",size:"sm",onClick:d,isLoading:r,leftIcon:f.jsx(I0,{className:"w-4 h-4"}),children:"Rcuprer"}),t.claimed&&f.jsxs(va,{variant:"success",size:"sm",children:[f.jsx(lr,{className:"w-3 h-3 mr-1"}),"Rcupr"]})]})]})]})})})},FH=({objective:t})=>(Math.min(t.current/t.target*100,100),f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("div",{className:X("w-5 h-5 rounded-full flex items-center justify-center",t.completed?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700"),children:t.completed?f.jsx(lr,{className:"w-3 h-3"}):f.jsx(Mn,{className:"w-3 h-3 text-gray-400"})}),f.jsx("span",{className:X("flex-1",t.completed&&"line-through text-gray-400"),children:t.description}),f.jsxs("span",{className:"text-xs text-gray-500",children:[t.current,"/",t.target]})]})),UH=()=>{const{gameStats:t}=he();if(!t)return null;const e=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],n=new Date().getDay(),r=n===0?6:n-1;return f.jsxs(ke,{className:"p-4",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(R0,{className:"w-5 h-5"}),"Cette semaine"]}),f.jsx("div",{className:"flex justify-between items-end h-24",children:e.map((s,i)=>{const o=i===r,l=i<r||o;return f.jsxs("div",{className:"flex flex-col items-center gap-2",children:[f.jsx("div",{className:`w-8 rounded-full transition-all ${o?"bg-primary-500 h-16":l?"bg-primary-300 dark:bg-primary-700 h-12":"bg-gray-200 dark:bg-gray-700 h-4"}`}),f.jsx("span",{className:`text-xs ${o?"font-bold text-primary-500":"text-gray-500"}`,children:s})]},s)})}),f.jsxs("div",{className:"flex justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-500",children:"XP cette semaine"}),f.jsx("p",{className:"text-xl font-bold",children:jn(t.weeklyXP)})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-sm text-gray-500",children:"Tches"}),f.jsx("p",{className:"text-xl font-bold",children:t.weeklyTasksCompleted})]})]})]})};function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function Tn(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function _e(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Fe(t){_e(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Tf(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function yw(t,e){_e(2,arguments);var n=Fe(t),r=Tn(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function mN(t,e){_e(2,arguments);var n=Fe(t),r=Tn(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),i=new Date(n.getTime());i.setMonth(n.getMonth()+r+1,0);var o=i.getDate();return s>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function zH(t,e){_e(2,arguments);var n=Fe(t).getTime(),r=Tn(e);return new Date(n+r)}var BH={};function Ja(){return BH}function $H(t,e){var n,r,s,i,o,a,l,c;_e(1,arguments);var u=Ja(),d=Tn((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=Fe(t),p=m.getDay(),g=(p<d?7:0)+p-d;return m.setDate(m.getDate()-g),m.setHours(0,0,0,0),m}function WH(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Vk(t){_e(1,arguments);var e=Fe(t);return e.setHours(0,0,0,0),e}var HH=6e4,qH=36e5;function kf(t,e){_e(2,arguments);var n=Vk(t),r=Vk(e);return n.getTime()===r.getTime()}function GH(t){return _e(1,arguments),t instanceof Date||Tf(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function KH(t){if(_e(1,arguments),!GH(t)&&typeof t!="number")return!1;var e=Fe(t);return!isNaN(Number(e))}function pN(t,e){return _e(2,arguments),Fe(t).getTime()-Fe(e).getTime()}var QH={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},YH="trunc";function gN(t){return QH[YH]}function XH(t,e,n){_e(2,arguments);var r=pN(t,e)/qH;return gN()(r)}function JH(t,e,n){_e(2,arguments);var r=pN(t,e)/HH;return gN()(r)}function ZH(t){_e(1,arguments);var e=Fe(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function eq(t,e){var n;_e(1,arguments);var r=t||{},s=Fe(r.start),i=Fe(r.end),o=i.getTime();if(!(s.getTime()<=o))throw new RangeError("Invalid interval");var a=[],l=s;l.setHours(0,0,0,0);var c=Number((n=void 0)!==null&&n!==void 0?n:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=o;)a.push(Fe(l)),l.setDate(l.getDate()+c),l.setHours(0,0,0,0);return a}function tq(t){_e(1,arguments);var e=Fe(t);return e.setDate(1),e.setHours(0,0,0,0),e}function nq(t,e){var n,r,s,i,o,a,l,c;_e(1,arguments);var u=Ja(),d=Tn((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=Fe(t),p=m.getDay(),g=(p<d?-7:0)+6-(p-d);return m.setDate(m.getDate()+g),m.setHours(23,59,59,999),m}function rq(t,e){_e(2,arguments);var n=Tn(e);return zH(t,-n)}var sq=864e5;function iq(t){_e(1,arguments);var e=Fe(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/sq)+1}function Sf(t){_e(1,arguments);var e=1,n=Fe(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function yN(t){_e(1,arguments);var e=Fe(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=Sf(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=Sf(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function oq(t){_e(1,arguments);var e=yN(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Sf(n);return r}var aq=6048e5;function lq(t){_e(1,arguments);var e=Fe(t),n=Sf(e).getTime()-oq(e).getTime();return Math.round(n/aq)+1}function Ef(t,e){var n,r,s,i,o,a,l,c;_e(1,arguments);var u=Ja(),d=Tn((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=Fe(t),p=m.getUTCDay(),g=(p<d?7:0)+p-d;return m.setUTCDate(m.getUTCDate()-g),m.setUTCHours(0,0,0,0),m}function vN(t,e){var n,r,s,i,o,a,l,c;_e(1,arguments);var u=Fe(t),d=u.getUTCFullYear(),m=Ja(),p=Tn((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:m.firstWeekContainsDate)!==null&&r!==void 0?r:(l=m.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(d+1,0,p),g.setUTCHours(0,0,0,0);var v=Ef(g,e),_=new Date(0);_.setUTCFullYear(d,0,p),_.setUTCHours(0,0,0,0);var w=Ef(_,e);return u.getTime()>=v.getTime()?d+1:u.getTime()>=w.getTime()?d:d-1}function cq(t,e){var n,r,s,i,o,a,l,c;_e(1,arguments);var u=Ja(),d=Tn((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:u.firstWeekContainsDate)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),m=vN(t,e),p=new Date(0);p.setUTCFullYear(m,0,d),p.setUTCHours(0,0,0,0);var g=Ef(p,e);return g}var uq=6048e5;function dq(t,e){_e(1,arguments);var n=Fe(t),r=Ef(n,e).getTime()-cq(n,e).getTime();return Math.round(r/uq)+1}function Ee(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var ks={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return Ee(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):Ee(r+1,2)},d:function(e,n){return Ee(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return Ee(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Ee(e.getUTCHours(),n.length)},m:function(e,n){return Ee(e.getUTCMinutes(),n.length)},s:function(e,n){return Ee(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return Ee(i,n.length)}},Fo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},hq={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return ks.y(e,n)},Y:function(e,n,r,s){var i=vN(e,s),o=i>0?i:1-i;if(n==="YY"){var a=o%100;return Ee(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Ee(o,n.length)},R:function(e,n){var r=yN(e);return Ee(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return Ee(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Ee(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Ee(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return ks.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Ee(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var i=dq(e,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):Ee(i,n.length)},I:function(e,n,r){var s=lq(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Ee(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):ks.d(e,n)},D:function(e,n,r){var s=iq(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Ee(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Ee(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Ee(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return Ee(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),i;switch(s===12?i=Fo.noon:s===0?i=Fo.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),i;switch(s>=17?i=Fo.evening:s>=12?i=Fo.afternoon:s>=4?i=Fo.morning:i=Fo.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return ks.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ks.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Ee(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Ee(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ks.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ks.s(e,n)},S:function(e,n){return ks.S(e,n)},X:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return Uk(o);case"XXXX":case"XX":return Bi(o);case"XXXXX":case"XXX":default:return Bi(o,":")}},x:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"x":return Uk(o);case"xxxx":case"xx":return Bi(o);case"xxxxx":case"xxx":default:return Bi(o,":")}},O:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Fk(o,":");case"OOOO":default:return"GMT"+Bi(o,":")}},z:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Fk(o,":");case"zzzz":default:return"GMT"+Bi(o,":")}},t:function(e,n,r,s){var i=s._originalDate||e,o=Math.floor(i.getTime()/1e3);return Ee(o,n.length)},T:function(e,n,r,s){var i=s._originalDate||e,o=i.getTime();return Ee(o,n.length)}};function Fk(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=e;return n+String(s)+o+Ee(i,2)}function Uk(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Ee(Math.abs(t)/60,2)}return Bi(t,e)}function Bi(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=Ee(Math.floor(s/60),2),o=Ee(s%60,2);return r+i+n+o}var zk=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},xN=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},fq=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return zk(e,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",zk(s,n)).replace("{{time}}",xN(i,n))},mq={p:xN,P:fq},pq=["D","DD"],gq=["YY","YYYY"];function yq(t){return pq.indexOf(t)!==-1}function vq(t){return gq.indexOf(t)!==-1}function Bk(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var xq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wq=function(e,n,r){var s,i=xq[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function xa(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var _q={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Tq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kq={date:xa({formats:_q,defaultWidth:"full"}),time:xa({formats:bq,defaultWidth:"full"}),dateTime:xa({formats:Tq,defaultWidth:"full"})},Sq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Eq=function(e,n,r,s){return Sq[e]};function wr(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[a]}var c=t.argumentCallback?t.argumentCallback(e):e;return s[c]}}var Cq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Pq={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Iq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Aq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Rq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Nq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Dq=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Mq={ordinalNumber:Dq,era:wr({values:Cq,defaultWidth:"wide"}),quarter:wr({values:Pq,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:wr({values:Iq,defaultWidth:"wide"}),day:wr({values:Aq,defaultWidth:"wide"}),dayPeriod:wr({values:Rq,defaultWidth:"wide",formattingValues:Nq,defaultFormattingWidth:"wide"})};function _r(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Oq(a,function(d){return d.test(o)}):jq(a,function(d){return d.test(o)}),c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;var u=e.slice(o.length);return{value:c,rest:u}}}function jq(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function Oq(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function wN(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(s.length);return{value:o,rest:a}}}var Lq=/^(\d+)(th|st|nd|rd)?/i,Vq=/\d+/i,Fq={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Uq={any:[/^b/i,/^(a|c)/i]},zq={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Bq={any:[/1/i,/2/i,/3/i,/4/i]},$q={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Wq={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Hq={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qq={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Gq={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Kq={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Qq={ordinalNumber:wN({matchPattern:Lq,parsePattern:Vq,valueCallback:function(e){return parseInt(e,10)}}),era:_r({matchPatterns:Fq,defaultMatchWidth:"wide",parsePatterns:Uq,defaultParseWidth:"any"}),quarter:_r({matchPatterns:zq,defaultMatchWidth:"wide",parsePatterns:Bq,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:_r({matchPatterns:$q,defaultMatchWidth:"wide",parsePatterns:Wq,defaultParseWidth:"any"}),day:_r({matchPatterns:Hq,defaultMatchWidth:"wide",parsePatterns:qq,defaultParseWidth:"any"}),dayPeriod:_r({matchPatterns:Gq,defaultMatchWidth:"any",parsePatterns:Kq,defaultParseWidth:"any"})},Yq={code:"en-US",formatDistance:wq,formatLong:kq,formatRelative:Eq,localize:Mq,match:Qq,options:{weekStartsOn:0,firstWeekContainsDate:1}},Xq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Jq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zq=/^'([^]*?)'?$/,eG=/''/g,tG=/[a-zA-Z]/;function er(t,e,n){var r,s,i,o,a,l,c,u,d,m,p,g,v,_,w,x,b,I;_e(2,arguments);var C=String(e),N=Ja(),S=(r=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:N.locale)!==null&&r!==void 0?r:Yq,k=Tn((i=(o=(a=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(c=n.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:N.firstWeekContainsDate)!==null&&o!==void 0?o:(d=N.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=Tn((p=(g=(v=(_=n==null?void 0:n.weekStartsOn)!==null&&_!==void 0?_:n==null||(w=n.locale)===null||w===void 0||(x=w.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&v!==void 0?v:N.weekStartsOn)!==null&&g!==void 0?g:(b=N.locale)===null||b===void 0||(I=b.options)===null||I===void 0?void 0:I.weekStartsOn)!==null&&p!==void 0?p:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var A=Fe(t);if(!KH(A))throw new RangeError("Invalid time value");var D=WH(A),j=rq(A,D),R={firstWeekContainsDate:k,weekStartsOn:E,locale:S,_originalDate:A},z=C.match(Jq).map(function(H){var $=H[0];if($==="p"||$==="P"){var J=mq[$];return J(H,S.formatLong)}return H}).join("").match(Xq).map(function(H){if(H==="''")return"'";var $=H[0];if($==="'")return nG(H);var J=hq[$];if(J)return!(n!=null&&n.useAdditionalWeekYearTokens)&&vq(H)&&Bk(H,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&yq(H)&&Bk(H,e,String(t)),J(j,H,S.localize,R);if($.match(tG))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$+"`");return H}).join("");return z}function nG(t){var e=t.match(Zq);return e?e[1].replace(eG,"'"):t}function rG(t){return _e(1,arguments),Fe(t).getTime()<Date.now()}function sG(t,e){_e(2,arguments);var n=Fe(t),r=Fe(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function mh(t){return _e(1,arguments),kf(t,Date.now())}function iG(t){return _e(1,arguments),kf(t,yw(Date.now(),1))}function oG(t,e){_e(2,arguments);var n=Tn(e);return yw(t,-n)}function aG(t,e){_e(2,arguments);var n=Tn(e);return mN(t,-n)}var lG={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},cG=function(e,n,r){var s,i=lG[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",String(n)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+s:"il y a "+s:s},uG={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},dG={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},hG={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fG={date:xa({formats:uG,defaultWidth:"full"}),time:xa({formats:dG,defaultWidth:"full"}),dateTime:xa({formats:hG,defaultWidth:"full"})},mG={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},pG=function(e,n,r,s){return mG[e]},gG={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},yG={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},vG={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},xG={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},wG={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},_G=function(e,n){var r=Number(e),s=n==null?void 0:n.unit;if(r===0)return"0";var i=["year","week","hour","minute","second"],o;return r===1?o=s&&i.includes(s)?"re":"er":o="me",r+o},bG={ordinalNumber:_G,era:wr({values:gG,defaultWidth:"wide"}),quarter:wr({values:yG,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:wr({values:vG,defaultWidth:"wide"}),day:wr({values:xG,defaultWidth:"wide"}),dayPeriod:wr({values:wG,defaultWidth:"wide"})},TG=/^(\d+)(ime|re|me|er|e)?/i,kG=/\d+/i,SG={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},EG={any:[/^av/i,/^ap/i]},CG={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},PG={any:[/1/i,/2/i,/3/i,/4/i]},IG={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},AG={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},RG={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},NG={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},DG={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},MG={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},jG={ordinalNumber:wN({matchPattern:TG,parsePattern:kG,valueCallback:function(e){return parseInt(e)}}),era:_r({matchPatterns:SG,defaultMatchWidth:"wide",parsePatterns:EG,defaultParseWidth:"any"}),quarter:_r({matchPatterns:CG,defaultMatchWidth:"wide",parsePatterns:PG,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:_r({matchPatterns:IG,defaultMatchWidth:"wide",parsePatterns:AG,defaultParseWidth:"any"}),day:_r({matchPatterns:RG,defaultMatchWidth:"wide",parsePatterns:NG,defaultParseWidth:"any"}),dayPeriod:_r({matchPatterns:DG,defaultMatchWidth:"any",parsePatterns:MG,defaultParseWidth:"any"})},Du={code:"fr",formatDistance:cG,formatLong:fG,formatRelative:pG,localize:bG,match:jG,options:{weekStartsOn:1,firstWeekContainsDate:4}};const OG=()=>{const{user:t,gameStats:e}=he(),{tasks:n}=Dr(),{getDailyQuests:r,getWeeklyQuests:s}=Pu(),{openTaskModal:i}=ur(),o=r(),a=s();if(!t||!e)return null;const l=n.filter(g=>{if(g.status==="completed"||!g.dueDate)return!1;const v=new Date(g.dueDate);return mh(v)||iG(v)}),c=n.filter(g=>g.status==="completed"?!1:!g.dueDate),u=n.filter(g=>{if(g.status==="completed"||!g.dueDate)return!1;const v=new Date(g.dueDate);return rG(v)&&!mh(v)}),d=[...o,...a].filter(g=>!g.claimed).sort((g,v)=>g.completed&&!v.completed?-1:!g.completed&&v.completed?1:0).slice(0,3),m=n.filter(g=>g.status==="completed"&&g.completedAt&&mh(new Date(g.completedAt))).length,p=n.filter(g=>g.status==="pending").length;return f.jsxs("div",{className:"space-y-4 sm:space-y-6 w-full overflow-x-hidden px-1 sm:px-0",children:[f.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-accent-gradient-br p-4 sm:p-6 text-white shadow-lg",children:[f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex items-start justify-between gap-3",children:[f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsxs("h1",{className:"text-lg sm:text-2xl font-bold truncate",children:["Bonjour, ",t.username,"! "]}),f.jsx("p",{className:"mt-1 text-white/80 text-xs sm:text-sm",children:er(new Date,"EEEE d MMMM",{locale:Du})})]}),f.jsx(hw,{config:t.avatar,size:"md",showLevel:!0,level:e.level,className:"flex-shrink-0"})]}),f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 flex-wrap",children:[f.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:["Niveau ",e.level]}),f.jsx("span",{className:"text-xs sm:text-sm text-white/70 truncate",children:dw(e.level)})]}),f.jsx(cN,{currentXP:e.currentXP,xpToNextLevel:e.xpToNextLevel,level:e.level,showLevel:!1})]})]}),f.jsx("div",{className:"absolute -right-10 -top-10 w-32 sm:w-40 h-32 sm:h-40 bg-white/10 rounded-full"}),f.jsx("div",{className:"absolute -right-5 -bottom-5 w-20 sm:w-28 h-20 sm:h-28 bg-white/10 rounded-full"})]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",children:[f.jsx(ut,{icon:f.jsx(lr,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Compltes",value:m,color:"primary"}),f.jsx(ut,{icon:f.jsx(vr,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"En attente",value:p,color:"yellow"}),f.jsx(ut,{icon:f.jsx(dc,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Streak",value:`${e.currentStreak}j`,color:"orange"}),f.jsx(ut,{icon:f.jsx(Ir,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"XP Total",value:jn(e.totalXP),color:"purple"})]}),f.jsxs("div",{className:"grid lg:grid-cols-3 gap-4 sm:gap-6",children:[f.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[f.jsxs(ke,{className:"p-3 sm:p-4 lg:hidden",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(vr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-500"}),f.jsx("h2",{className:"font-semibold text-sm sm:text-base",children:"Qutes actives"})]}),f.jsxs(Es,{to:"/quests",className:"text-xs sm:text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Tout voir",f.jsx(Mn,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),d.length>0?f.jsx("div",{className:"space-y-2",children:d.slice(0,2).map(g=>f.jsx(D0,{quest:g,compact:!0},g.id))}):f.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:[f.jsx(vr,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),f.jsx("p",{children:"Toutes les qutes compltes!"})]})]}),u.length>0&&f.jsxs(ke,{className:"p-3 sm:p-4 border-red-200 dark:border-red-800/30 bg-red-50/50 dark:bg-red-900/10",children:[f.jsx("div",{className:"flex items-center justify-between mb-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Lm,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500"}),f.jsxs("h2",{className:"font-semibold text-sm sm:text-base text-red-600 dark:text-red-400",children:["En retard (",u.length,")"]})]})}),f.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.slice(0,3).map(g=>f.jsx(fh,{task:g,compact:!0},g.id)),u.length>3&&f.jsxs(Es,{to:"/tasks",className:"block text-center text-xs sm:text-sm text-red-500 hover:text-red-600 py-2",children:["+",u.length-3," autres tches en retard"]})]})]}),f.jsxs(ke,{className:"p-3 sm:p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ci,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-500"}),f.jsx("h2",{className:"font-semibold text-sm sm:text-base",children:"Tches du jour"}),l.length>0&&f.jsx("span",{className:"text-xs bg-primary-100 dark:bg-primary-900/30 text-primary-600 px-2 py-0.5 rounded-full",children:l.length})]}),f.jsxs(Es,{to:"/tasks",className:"text-xs sm:text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Tout voir",f.jsx(Mn,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),l.length>0?f.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[l.slice(0,4).map(g=>f.jsx(fh,{task:g,compact:!0},g.id)),l.length>4&&f.jsxs(Es,{to:"/tasks",className:"block text-center text-xs sm:text-sm text-primary-500 hover:text-primary-600 py-2",children:["+",l.length-4," autres tches"]})]}):f.jsxs("div",{className:"text-center py-6 sm:py-8",children:[f.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-100 dark:bg-gray-800 mx-auto flex items-center justify-center mb-3",children:f.jsx(lr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),f.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"Aucune tche planifie"}),f.jsxs(Xe,{variant:"primary",size:"sm",onClick:i,children:[f.jsx(wo,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]})]}),f.jsxs(ke,{className:"p-3 sm:p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx($7,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500"}),f.jsx("h2",{className:"font-semibold text-sm sm:text-base",children:"Sans date"}),c.length>0&&f.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 px-2 py-0.5 rounded-full",children:c.length})]}),f.jsxs(Es,{to:"/tasks",className:"text-xs sm:text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Tout voir",f.jsx(Mn,{className:"w-3 h-3 sm:w-4 sm:h-4"})]})]}),c.length>0?f.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[c.slice(0,4).map(g=>f.jsx(fh,{task:g,compact:!0},g.id)),c.length>4&&f.jsxs(Es,{to:"/tasks",className:"block text-center text-xs sm:text-sm text-primary-500 hover:text-primary-600 py-2",children:["+",c.length-4," autres tches"]})]}):f.jsxs("div",{className:"text-center py-4 sm:py-6 text-gray-500 text-sm",children:[f.jsx(lw,{className:"w-8 h-8 sm:w-10 sm:h-10 mx-auto mb-2 opacity-50"}),f.jsx("p",{children:"Toutes vos tches ont une date!"})]})]}),f.jsxs(ke,{className:"p-3 sm:p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[f.jsx(Hn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-500"}),f.jsx("h2",{className:"font-semibold text-sm sm:text-base",children:"Progression hebdomadaire"})]}),f.jsx(UH,{})]})]}),f.jsx("div",{className:"hidden lg:block space-y-6",children:f.jsxs(ke,{className:"p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(vr,{className:"w-5 h-5 text-primary-500"}),f.jsx("h2",{className:"font-semibold",children:"Qutes actives"})]}),f.jsxs(Es,{to:"/quests",className:"text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:["Voir tout",f.jsx(Mn,{className:"w-4 h-4"})]})]}),d.length>0?f.jsx("div",{className:"space-y-3",children:d.map(g=>f.jsx(D0,{quest:g,compact:!0},g.id))}):f.jsxs("div",{className:"text-center py-6 text-gray-500",children:[f.jsx(vr,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),f.jsx("p",{children:"Toutes les qutes sont compltes!"})]})]})})]})]})},LG=()=>{const{tasks:t,categories:e,filter:n,setFilter:r,updateTask:s,deleteTask:i}=Dr(),{openTaskModal:o,setEditingTask:a}=ur(),[l,c]=M.useState("none"),[u,d]=M.useState(""),[m,p]=M.useState(!1),g=M.useMemo(()=>{let _=t;if(n.status!=="all"&&(_=_.filter(w=>w.status===n.status)),n.priority&&(_=_.filter(w=>w.priority===n.priority)),n.categoryId&&(_=_.filter(w=>w.categoryId===n.categoryId)),u){const w=u.toLowerCase();_=_.filter(x=>{var b;return x.title.toLowerCase().includes(w)||((b=x.description)==null?void 0:b.toLowerCase().includes(w))})}return _=[..._].sort((w,x)=>{switch(n.sortBy){case"dueDate":return w.dueDate?x.dueDate?new Date(w.dueDate).getTime()-new Date(x.dueDate).getTime():-1:1;case"priority":const b={critical:0,high:1,medium:2,low:3,none:4};return b[w.priority]-b[x.priority];case"createdAt":default:return new Date(x.createdAt).getTime()-new Date(w.createdAt).getTime()}}),n.sortDirection==="desc"&&_.reverse(),_},[t,n,u]),v=M.useMemo(()=>{if(l==="none")return{"Toutes les tches":g};const _={};return g.forEach(w=>{let x;switch(l){case"category":const b=e.find(C=>C.id===w.categoryId);x=(b==null?void 0:b.name)||"Sans catgorie";break;case"priority":x={critical:" Critique",high:" Haute priorit",medium:" Priorit moyenne",low:" Basse priorit",none:" Sans priorit"}[w.priority]||"Sans priorit";break;case"dueDate":if(!w.dueDate)x="Sans date";else{const C=new Date(w.dueDate),N=new Date,S=new Date(N);S.setDate(S.getDate()+1),C.toDateString()===N.toDateString()?x="Aujourd'hui":C.toDateString()===S.toDateString()?x="Demain":C<N?x=" En retard":x=" venir"}break;default:x="Autres"}_[x]||(_[x]=[]),_[x].push(w)}),_},[g,l,e]);return f.jsxs("div",{className:"space-y-4 sm:space-y-6 px-1 sm:px-0",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[f.jsx(lw,{className:"w-6 h-6 sm:w-7 sm:h-7 text-primary-500"}),"Mes Tches"]}),f.jsxs("p",{className:"text-gray-500 mt-1 text-sm",children:[g.length," tche",g.length>1?"s":""]})]}),f.jsxs(Xe,{variant:"game",onClick:o,className:"w-full sm:w-auto",children:[f.jsx(wo,{className:"w-5 h-5 mr-1"}),"Nouvelle tche"]})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[f.jsx("div",{className:"flex-1",children:f.jsx(xr,{placeholder:"Rechercher...",value:u,onChange:_=>d(_.target.value),leftIcon:f.jsx(aN,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),f.jsx("div",{className:"flex gap-2",children:f.jsxs(Xe,{variant:"secondary",onClick:()=>p(!m),className:"flex-1 sm:flex-none",children:[f.jsx(q7,{className:"w-4 h-4 sm:w-5 sm:h-5"}),f.jsx("span",{className:"sm:hidden ml-2",children:"Filtres"})]})})]}),f.jsx(ar,{children:m&&f.jsx(ue.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white dark:bg-gray-800 rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-700 overflow-hidden",children:f.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5 sm:mb-2 block",children:"Statut"}),f.jsxs("select",{value:n.status,onChange:_=>r({status:_.target.value}),className:"w-full px-2 sm:px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm",children:[f.jsx("option",{value:"all",children:"Toutes"}),f.jsx("option",{value:"pending",children:"En attente"}),f.jsx("option",{value:"in-progress",children:"En cours"}),f.jsx("option",{value:"completed",children:"Compltes"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5 sm:mb-2 block",children:"Priorit"}),f.jsxs("select",{value:n.priority||"",onChange:_=>r({priority:_.target.value||void 0}),className:"w-full px-2 sm:px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm",children:[f.jsx("option",{value:"",children:"Toutes"}),f.jsx("option",{value:"high",children:"Haute"}),f.jsx("option",{value:"medium",children:"Moyenne"}),f.jsx("option",{value:"low",children:"Basse"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5 sm:mb-2 block",children:"Catgorie"}),f.jsxs("select",{value:n.categoryId||"",onChange:_=>r({categoryId:_.target.value||void 0}),className:"w-full px-2 sm:px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm",children:[f.jsx("option",{value:"",children:"Toutes"}),e.map(_=>f.jsxs("option",{value:_.id,children:[_.icon," ",_.name]},_.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1.5 sm:mb-2 block",children:"Grouper par"}),f.jsxs("select",{value:l,onChange:_=>c(_.target.value),className:"w-full px-2 sm:px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm",children:[f.jsx("option",{value:"none",children:"Aucun"}),f.jsx("option",{value:"category",children:"Catgorie"}),f.jsx("option",{value:"priority",children:"Priorit"}),f.jsx("option",{value:"dueDate",children:"Date"})]})]})]})})}),g.length>0?f.jsx("div",{className:"space-y-4 sm:space-y-6",children:Object.entries(v).map(([_,w])=>f.jsxs("div",{children:[l!=="none"&&f.jsxs("h3",{className:"font-medium text-gray-600 dark:text-gray-400 mb-2 sm:mb-3 flex items-center gap-2 text-sm sm:text-base",children:[f.jsx(G7,{className:"w-4 h-4"}),_,f.jsx("span",{className:"text-xs sm:text-sm bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded-full",children:w.length})]}),f.jsx("div",{className:"space-y-2 sm:space-y-3",children:w.map(x=>f.jsx(fh,{task:x},x.id))})]},_))}):f.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 sm:py-16",children:[f.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gray-100 dark:bg-gray-800 mx-auto flex items-center justify-center mb-4",children:f.jsx(lr,{className:"w-10 h-10 sm:w-12 sm:h-12 text-gray-400"})}),f.jsx("h3",{className:"text-lg sm:text-xl font-medium mb-2",children:"Aucune tche trouve"}),f.jsx("p",{className:"text-gray-500 mb-4 text-sm sm:text-base px-4",children:u?"Essayez de modifier votre recherche":"Crez votre premire tche pour commencer!"}),f.jsxs(Xe,{variant:"game",onClick:o,children:[f.jsx(wo,{className:"w-5 h-5 mr-1"}),"Nouvelle tche"]})]})]})},VG=[{value:"none",label:" Aucune",color:"bg-gray-400"},{value:"low",label:" Basse",color:"bg-green-500"},{value:"medium",label:" Moyenne",color:"bg-yellow-500"},{value:"high",label:" Haute",color:"bg-orange-500"},{value:"critical",label:" Critique",color:"bg-red-500"}],FG=[{value:"trivial",label:" Trivial"},{value:"easy",label:" Facile"},{value:"medium",label:" Moyen"},{value:"hard",label:" Difficile"},{value:"epic",label:" pique"}],UG=[{value:"Travail",label:" Travail"},{value:"Personnel",label:" Personnel"},{value:"Sant",label:" Sant"},{value:"tudes",label:" tudes"},{value:"Finances",label:" Finances"},{value:"Social",label:" Social"},{value:"Loisirs",label:" Loisirs"},{value:"Maison",label:" Maison"}],zG=({onClose:t,defaultDate:e})=>{const{addTask:n,calculateTaskRewards:r}=Dr(),[s,i]=M.useState(!1),[o,a]=M.useState({title:"",description:"",category:"Personnel",priority:"medium",difficulty:"medium",dueDate:er(e,"yyyy-MM-dd'T'HH:mm")}),l=r(o.difficulty,o.priority),c=async u=>{if(u.preventDefault(),!!o.title.trim()){i(!0);try{await n({title:o.title.trim(),description:o.description.trim(),category:o.category,priority:o.priority,difficulty:o.difficulty,dueDate:new Date(o.dueDate),estimatedTime:void 0,recurrence:"none",subtasks:[],tags:[],userId:"",status:"pending",progress:0}),t()}catch(d){console.error("Error adding task:",d)}i(!1)}};return f.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t,children:f.jsxs(ue.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md shadow-xl overflow-hidden",onClick:u=>u.stopPropagation(),children:[f.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-primary-500/10 to-cyan-500/10",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[f.jsx(Ci,{className:"w-5 h-5 text-primary-500"}),"Nouvelle tche"]}),f.jsx("p",{className:"text-sm text-gray-500 capitalize",children:er(e,"EEEE d MMMM yyyy",{locale:Du})})]}),f.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:f.jsx(uw,{className:"w-5 h-5"})})]})}),f.jsxs("form",{onSubmit:c,className:"p-4 space-y-4",children:[f.jsx(xr,{label:"Titre de la tche",value:o.title,onChange:u=>a({...o,title:u.target.value}),placeholder:"Qu'avez-vous  faire ?",autoFocus:!0,required:!0}),f.jsx(fN,{label:"Description (optionnel)",value:o.description,onChange:u=>a({...o,description:u.target.value}),placeholder:"Ajoutez des dtails...",rows:2}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsx(Zi,{label:"Catgorie",value:o.category,onChange:u=>a({...o,category:u.target.value}),options:UG}),f.jsx(Zi,{label:"Priorit",value:o.priority,onChange:u=>a({...o,priority:u.target.value}),options:VG})]}),f.jsx(Zi,{label:"Difficult",value:o.difficulty,onChange:u=>a({...o,difficulty:u.target.value}),options:FG}),f.jsx(xr,{type:"datetime-local",label:"Date et heure",value:o.dueDate,onChange:u=>a({...o,dueDate:u.target.value})}),f.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3",children:[f.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Rcompenses"}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(Hn,{className:"w-4 h-4 text-yellow-500"}),f.jsxs("span",{className:"font-semibold text-yellow-600",children:[l.xp," XP"]})]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-400 flex items-center justify-center text-[10px]",children:""}),f.jsxs("span",{className:"font-semibold text-yellow-600",children:[l.coins," pices"]})]})]})]}),f.jsxs("div",{className:"flex gap-3 pt-2",children:[f.jsx(Xe,{type:"button",variant:"secondary",onClick:t,className:"flex-1",children:"Annuler"}),f.jsx(Xe,{type:"submit",disabled:s||!o.title.trim(),className:"flex-1",children:s?"Cration...":"Crer la tche"})]})]})]})})},M0={none:"bg-gray-400",low:"bg-green-500",medium:"bg-yellow-500",high:"bg-orange-500",critical:"bg-red-500"},BG={none:"border-l-gray-400",low:"border-l-green-500",medium:"border-l-yellow-500",high:"border-l-orange-500",critical:"border-l-red-500"},Ns=t=>t.status==="completed",$G=({date:t,tasks:e,onClose:n,onAddTask:r,onToggleTask:s})=>{const i=e.filter(a=>Ns(a)),o=e.filter(a=>!Ns(a));return f.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:n,children:f.jsxs(ue.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden shadow-xl",onClick:a=>a.stopPropagation(),children:[f.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-gradient-to-r from-primary-500/10 to-cyan-500/10",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-bold capitalize",children:er(t,"EEEE d MMMM",{locale:Du})}),f.jsxs("p",{className:"text-sm text-gray-500",children:[e.length," tche",e.length>1?"s":"","  ",i.length," termine",i.length>1?"s":""]})]}),f.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:f.jsx(uw,{className:"w-5 h-5"})})]}),f.jsx("div",{className:"p-4 overflow-y-auto max-h-[50vh] space-y-2",children:e.length===0?f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx(Ci,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),f.jsx("p",{children:"Aucune tche pour ce jour"})]}):f.jsxs(f.Fragment,{children:[o.length>0&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:" faire"}),o.map(a=>f.jsx("div",{className:X("p-3 rounded-lg border-l-4 bg-gray-50 dark:bg-gray-700/50",BG[a.priority]),children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("button",{onClick:()=>s(a.id),className:"mt-0.5 text-gray-400 hover:text-primary-500 transition-colors",children:f.jsx(P0,{className:"w-5 h-5"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"font-medium truncate",children:a.title}),a.description&&f.jsx("p",{className:"text-sm text-gray-500 truncate",children:a.description}),f.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500",children:[f.jsx("span",{className:X("px-1.5 py-0.5 rounded text-white text-[10px]",M0[a.priority]),children:a.priority}),f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(Hn,{className:"w-3 h-3"}),a.xpReward," XP"]})]})]})]})},a.id))]}),i.length>0&&f.jsxs("div",{className:"space-y-2 mt-4",children:[f.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Termines"}),i.map(a=>f.jsx("div",{className:"p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 opacity-60",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("button",{onClick:()=>s(a.id),className:"mt-0.5 text-green-500",children:f.jsx(lr,{className:"w-5 h-5"})}),f.jsx("div",{className:"flex-1 min-w-0",children:f.jsx("p",{className:"font-medium truncate line-through",children:a.title})})]})},a.id))]})]})}),f.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:f.jsxs(Xe,{onClick:r,className:"w-full",children:[f.jsx(wo,{className:"w-4 h-4 mr-2"}),"Ajouter une tche"]})})]})})},WG=()=>{const{tasks:t,completeTask:e}=Dr(),{user:n}=he(),[r,s]=M.useState(new Date),[i,o]=M.useState(null),[a,l]=M.useState(!1),[c,u]=M.useState(null),d=M.useMemo(()=>{const C={};return t.forEach(N=>{if(N.dueDate){const S=er(new Date(N.dueDate),"yyyy-MM-dd");C[S]||(C[S]=[]),C[S].push(N)}}),C},[t]),m=M.useMemo(()=>{const C=tq(r),N=ZH(C),S=$H(C,{weekStartsOn:1}),k=nq(N,{weekStartsOn:1}),E=[];let A=S;for(;A<=k;)E.push(A),A=yw(A,1);return E},[r]),p=()=>s(aG(r,1)),g=()=>s(mN(r,1)),v=()=>s(new Date),_=C=>{o(C)},w=C=>{u(C),l(!0),o(null)},x=async C=>{n&&await e(C)},b=C=>{const N=er(C,"yyyy-MM-dd");return d[N]||[]},I=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"];return f.jsxs("div",{className:"space-y-4 sm:space-y-6 px-1 sm:px-0",children:[f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{children:[f.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[f.jsx(Ci,{className:"w-6 h-6 sm:w-7 sm:h-7 text-primary-500"}),"Calendrier"]}),f.jsx("p",{className:"text-gray-500 mt-1 text-sm sm:text-base",children:"Organisez vos tches par date"})]})}),f.jsxs(ke,{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:f.jsx(sN,{className:"w-5 h-5"})}),f.jsx("button",{onClick:g,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:f.jsx(Mn,{className:"w-5 h-5"})}),f.jsx("h2",{className:"text-lg sm:text-xl font-bold capitalize ml-2",children:er(r,"MMMM yyyy",{locale:Du})})]}),f.jsx(Xe,{variant:"secondary",size:"sm",onClick:v,children:"Aujourd'hui"})]}),f.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:I.map(C=>f.jsx("div",{className:"text-center text-xs sm:text-sm font-medium text-gray-500 py-2",children:C},C))}),f.jsx("div",{className:"grid grid-cols-7 gap-1",children:m.map((C,N)=>{const S=b(C),k=sG(C,r),E=mh(C),A=S.filter(j=>Ns(j)).length,D=S.length-A;return f.jsxs("div",{className:X("min-h-[80px] sm:min-h-[100px] p-1 sm:p-2 rounded-lg border border-transparent transition-all cursor-pointer group relative",k?"bg-gray-50 dark:bg-gray-800/50 hover:border-primary-500/50":"bg-gray-100/50 dark:bg-gray-900/30 opacity-50",E&&"ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20"),onClick:()=>_(C),children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("span",{className:X("text-xs sm:text-sm font-medium w-6 h-6 flex items-center justify-center rounded-full",E&&"bg-primary-500 text-white"),children:er(C,"d")}),S.length>0&&f.jsx("span",{className:"text-[10px] text-gray-500 hidden sm:block",children:D>0&&`${D}  faire`})]}),f.jsxs("div",{className:"space-y-0.5 overflow-hidden",children:[S.slice(0,3).map((j,R)=>f.jsx("div",{className:X("text-[10px] sm:text-xs px-1.5 py-0.5 rounded truncate",Ns(j)?"bg-gray-200 dark:bg-gray-700 text-gray-500 line-through":X(M0[j.priority],"text-white")),title:j.title,children:j.title},j.id)),S.length>3&&f.jsxs("div",{className:"text-[10px] text-gray-500 px-1",children:["+",S.length-3," autres"]})]}),k&&f.jsx("button",{onClick:j=>{j.stopPropagation(),w(C)},className:"absolute bottom-1 right-1 w-5 h-5 sm:w-6 sm:h-6 bg-primary-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:bg-primary-600",children:f.jsx(wo,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]},N)})}),f.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[f.jsx("span",{className:"text-sm text-gray-500",children:"Priorits:"}),Object.entries(M0).map(([C,N])=>f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:X("w-3 h-3 rounded",N)}),f.jsx("span",{className:"text-xs capitalize text-gray-600 dark:text-gray-400",children:C})]},C))]})]}),f.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[f.jsxs(ke,{className:"p-4 text-center",children:[f.jsx("p",{className:"text-2xl font-bold text-primary-500",children:t.filter(C=>!Ns(C)).length}),f.jsx("p",{className:"text-sm text-gray-500",children:"Tches en cours"})]}),f.jsxs(ke,{className:"p-4 text-center",children:[f.jsx("p",{className:"text-2xl font-bold text-green-500",children:t.filter(C=>Ns(C)).length}),f.jsx("p",{className:"text-sm text-gray-500",children:"Termines"})]}),f.jsxs(ke,{className:"p-4 text-center",children:[f.jsx("p",{className:"text-2xl font-bold text-orange-500",children:t.filter(C=>!Ns(C)&&C.dueDate&&new Date(C.dueDate)<new Date).length}),f.jsx("p",{className:"text-sm text-gray-500",children:"En retard"})]}),f.jsxs(ke,{className:"p-4 text-center",children:[f.jsx("p",{className:"text-2xl font-bold text-cyan-500",children:b(new Date).filter(C=>!Ns(C)).length}),f.jsx("p",{className:"text-sm text-gray-500",children:"Aujourd'hui"})]})]}),f.jsx(ar,{children:i&&f.jsx($G,{date:i,tasks:b(i),onClose:()=>o(null),onAddTask:()=>w(i),onToggleTask:x})}),a&&c&&f.jsx(zG,{onClose:()=>{l(!1),u(null)},defaultDate:c})]})},HG=()=>{const{getDailyQuests:t,getWeeklyQuests:e,claimQuestReward:n}=Pu(),{gameStats:r}=he(),[s,i]=M.useState("daily"),o=t(),a=e();if(!r)return null;const l=s==="daily"?o:a,c=o.filter(b=>b.completed).length,u=a.filter(b=>b.completed).length,d=o.filter(b=>b.completed&&!b.claimed).length,m=a.filter(b=>b.completed&&!b.claimed).length,p=new Date,g=new Date(p);g.setDate(g.getDate()+1),g.setHours(0,0,0,0);const v=XH(g,p),_=JH(g,p)%60,w=new Date(p);w.setDate(w.getDate()+((7-w.getDay()+1)%7||7)),w.setHours(0,0,0,0);const x=Math.ceil((w.getTime()-p.getTime())/(1e3*60*60*24));return f.jsxs("div",{className:"space-y-4 sm:space-y-6 px-1 sm:px-0",children:[f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{children:[f.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[f.jsx(A0,{className:"w-6 h-6 sm:w-7 sm:h-7 text-primary-500"}),"Qutes"]}),f.jsx("p",{className:"text-gray-500 mt-1 text-sm sm:text-base",children:"Compltez des qutes pour des bonus!"})]})}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",children:[f.jsx(ut,{icon:f.jsx(vr,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Quotidiennes",value:`${c}/${o.length}`,color:"primary"}),f.jsx(ut,{icon:f.jsx(Hn,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Hebdomadaires",value:`${u}/${a.length}`,color:"purple"}),f.jsx(ut,{icon:f.jsx(I0,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:" rclamer",value:d+m,color:"yellow"}),f.jsx(ut,{icon:f.jsx(lr,{className:"w-4 h-4 sm:w-6 sm:h-6"}),label:"Compltes",value:jn(r.questsCompleted||0),color:"green"})]}),f.jsx(ke,{className:"p-3 sm:p-4 bg-gradient-to-r from-primary-500/10 to-cyan-500/10",children:f.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[f.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-primary-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(Lm,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary-500"})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("p",{className:"font-medium text-sm sm:text-base",children:"Prochaine rinitialisation"}),f.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:[f.jsxs("span",{className:"sm:hidden",children:["Daily: ",v,"h | Weekly: ",x,"j"]}),f.jsxs("span",{className:"hidden sm:inline",children:["Quotidienne: ",v,"h ",_,"m | Hebdomadaire: ",x," jour",x>1?"s":""]})]})]})]})})}),f.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[f.jsxs("button",{onClick:()=>i("daily"),className:X("flex-1 py-2.5 sm:py-3 rounded-md text-xs sm:text-sm font-medium transition-colors flex items-center justify-center gap-1.5 sm:gap-2 touch-manipulation",s==="daily"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500"),children:[f.jsx(vr,{className:"w-4 h-4 sm:w-5 sm:h-5"}),f.jsx("span",{className:"hidden xs:inline",children:"Quotidiennes"}),f.jsx("span",{className:"xs:hidden",children:"Daily"}),d>0&&f.jsx("span",{className:"w-4 h-4 sm:w-5 sm:h-5 rounded-full bg-primary-500 text-white text-[10px] sm:text-xs flex items-center justify-center",children:d})]}),f.jsxs("button",{onClick:()=>i("weekly"),className:X("flex-1 py-2.5 sm:py-3 rounded-md text-xs sm:text-sm font-medium transition-colors flex items-center justify-center gap-1.5 sm:gap-2 touch-manipulation",s==="weekly"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500"),children:[f.jsx(Hn,{className:"w-4 h-4 sm:w-5 sm:h-5"}),f.jsx("span",{className:"hidden xs:inline",children:"Hebdomadaires"}),f.jsx("span",{className:"xs:hidden",children:"Weekly"}),m>0&&f.jsx("span",{className:"w-4 h-4 sm:w-5 sm:h-5 rounded-full bg-purple-500 text-white text-[10px] sm:text-xs flex items-center justify-center",children:m})]})]}),f.jsx("div",{className:"space-y-3 sm:space-y-4",children:l.map((b,I)=>f.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:I*.05},children:f.jsx(D0,{quest:b})},b.id))}),l.length===0&&f.jsxs("div",{className:"text-center py-12 sm:py-16",children:[f.jsx(A0,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto text-gray-300 mb-4"}),f.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"Aucune qute disponible"}),f.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-2",children:"Nouvelles qutes  la prochaine rinitialisation"})]}),f.jsx(ke,{className:"p-3 sm:p-4 bg-gradient-to-r from-yellow-500/10 to-orange-500/10",children:f.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[f.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center flex-shrink-0 text-lg sm:text-xl",children:""}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("h4",{className:"font-medium text-sm sm:text-base",children:"Astuce"}),f.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Compltez vos qutes quotidiennes pour maximiser vos gains d'XP!"})]})]})})]})},bg={common:"from-slate-400 to-slate-500",rare:"from-blue-400 to-blue-600",epic:"from-purple-400 to-purple-600",legendary:"from-amber-400 via-yellow-400 to-orange-500"},qG={common:"bg-slate-500/10 border-slate-400/30",rare:"bg-blue-500/10 border-blue-400/30",epic:"bg-purple-500/10 border-purple-400/30",legendary:"bg-amber-500/10 border-amber-400/30"},GG={common:"text-slate-400",rare:"text-blue-400",epic:"text-purple-400",legendary:"text-amber-400"},KG=({achievement:t,isUnlocked:e,progress:n=0})=>{const r=Math.min(n/t.requirement.value*100,100),s=t.rarity;return f.jsxs("div",{className:X("group relative overflow-hidden rounded-2xl transition-all duration-300","border-2",e?`${qG[s]} hover:scale-[1.02]`:"bg-gray-800/40 border-gray-700/50 hover:border-gray-600/50"),children:[e&&s==="legendary"&&f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/20 via-yellow-500/20 to-orange-500/20 animate-pulse"}),f.jsx("div",{className:"relative p-4",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"relative flex-shrink-0",children:[e&&f.jsx("div",{className:X("absolute inset-0 rounded-2xl blur-lg opacity-50",`bg-gradient-to-br ${bg[s]}`)}),f.jsx("div",{className:X("relative w-16 h-16 rounded-2xl flex items-center justify-center","transition-all duration-300",e?`bg-gradient-to-br ${bg[s]} shadow-lg`:"bg-gray-700/80 border border-gray-600/50"),children:e?f.jsx("span",{className:"text-3xl drop-shadow-lg",children:t.icon}):f.jsx(X7,{className:"w-7 h-7 text-gray-500"})}),e&&f.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-green-500 border-2 border-gray-900 flex items-center justify-center shadow-lg",children:f.jsx(rN,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h3",{className:X("font-bold truncate",e?"text-white":"text-gray-400"),children:t.secret&&!e?"???":t.name}),s==="legendary"&&f.jsx(Hn,{className:X("w-4 h-4",e?"text-amber-400":"text-gray-600")}),s==="epic"&&f.jsx(cw,{className:X("w-4 h-4",e?"text-purple-400":"text-gray-600")})]}),f.jsx("p",{className:X("text-sm mt-1 line-clamp-1",e?"text-gray-300":"text-gray-500"),children:t.secret&&!e?"Achievement secret":t.description}),!e&&!t.secret&&f.jsxs("div",{className:"mt-3",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs mb-1.5",children:[f.jsx("span",{className:"text-gray-500",children:"Progression"}),f.jsxs("span",{className:GG[s],children:[n,"/",t.requirement.value]})]}),f.jsx("div",{className:"h-2 bg-gray-700/80 rounded-full overflow-hidden",children:f.jsx("div",{className:X("h-full rounded-full transition-all duration-500",`bg-gradient-to-r ${bg[s]}`),style:{width:`${r}%`}})})]}),f.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[f.jsxs("div",{className:X("flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold",e?"bg-teal-500/20 text-teal-300":"bg-gray-700/50 text-gray-400"),children:[f.jsx("span",{className:"text-teal-400",children:""}),t.xpReward," XP"]}),f.jsxs("div",{className:X("flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold",e?"bg-amber-500/20 text-amber-300":"bg-gray-700/50 text-gray-400"),children:[f.jsx("span",{children:""}),t.coinReward]})]})]})]})})]})},QG=()=>{const{gameStats:t}=he(),[e,n]=M.useState("all"),[r,s]=M.useState("all"),[i,o]=M.useState("");if(!t)return null;const a=gr.filter(p=>{if(e!=="all"&&p.category!==e||r!=="all"&&p.rarity!==r)return!1;if(i){const g=i.toLowerCase();if(!p.name.toLowerCase().includes(g)&&!p.description.toLowerCase().includes(g))return!1}return!0}),l=gr.filter(p=>t.achievementsUnlocked.includes(p.id)),c=l.reduce((p,g)=>p+g.xpReward,0),u=Math.round(l.length/gr.length*100),d={common:l.filter(p=>p.rarity==="common").length,rare:l.filter(p=>p.rarity==="rare").length,epic:l.filter(p=>p.rarity==="epic").length,legendary:l.filter(p=>p.rarity==="legendary").length},m={common:"from-gray-400 to-gray-500",rare:"from-blue-400 to-blue-500",epic:"from-purple-400 to-purple-500",legendary:"from-yellow-400 to-orange-500"};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[f.jsx(Ir,{className:"w-7 h-7 text-yellow-500"}),"Achievements"]}),f.jsxs("p",{className:"text-gray-500 mt-1",children:[l.length," / ",gr.length," dbloqus (",u,"%)"]})]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsx(ut,{icon:f.jsx(Ir,{className:"w-6 h-6"}),label:"Total dbloqu",value:`${l.length}/${gr.length}`,color:"yellow"}),f.jsx(ut,{icon:f.jsx(Vm,{className:"w-6 h-6"}),label:"XP Gagne",value:jn(c),color:"primary"}),f.jsx(ut,{icon:f.jsx(iN,{className:"w-6 h-6"}),label:"Lgendaires",value:`${d.legendary}/5`,color:"orange"}),f.jsx(ut,{icon:f.jsx(vr,{className:"w-6 h-6"}),label:"Progression",value:`${u}%`,color:"green"})]}),f.jsxs(ke,{className:"p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(Hn,{className:"w-5 h-5 text-primary-500"}),"Progression par raret"]}),f.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:["common","rare","epic","legendary"].map(p=>{const g=gr.filter(w=>w.rarity===p).length,v=d[p],_=Math.round(v/g*100);return f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:X("w-16 h-16 mx-auto rounded-full bg-gradient-to-br flex items-center justify-center mb-2",m[p]),children:f.jsx("span",{className:"text-2xl font-bold text-white",children:v})}),f.jsx("p",{className:"font-medium capitalize",children:p}),f.jsxs("p",{className:"text-sm text-gray-500",children:[_,"%"]})]},p)})})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[f.jsx("div",{className:"flex-1",children:f.jsx(xr,{placeholder:"Rechercher un achievement...",value:i,onChange:p=>o(p.target.value),leftIcon:f.jsx(aN,{className:"w-5 h-5"})})}),f.jsxs("select",{value:e,onChange:p=>n(p.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[f.jsx("option",{value:"all",children:"Toutes les catgories"}),dN.map(p=>f.jsxs("option",{value:p.id,children:[p.icon," ",p.name]},p.id))]}),f.jsxs("select",{value:r,onChange:p=>s(p.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[f.jsx("option",{value:"all",children:"Toutes rarets"}),f.jsx("option",{value:"common",children:"Commun"}),f.jsx("option",{value:"rare",children:"Rare"}),f.jsx("option",{value:"epic",children:"pique"}),f.jsx("option",{value:"legendary",children:"Lgendaire"})]})]}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:a.map((p,g)=>{const v=t.achievementsUnlocked.includes(p.id);let _=0;switch(p.requirement.type){case"tasks_completed":_=t.tasksCompleted;break;case"streak":_=t.currentStreak;break;case"level":_=t.level;break;case"total_xp":_=t.totalXP;break;case"achievements":_=t.achievementsUnlocked.length;break;default:_=0}return f.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.03},children:f.jsx(KG,{achievement:p,isUnlocked:v,progress:_})},p.id)})}),a.length===0&&f.jsxs("div",{className:"text-center py-16",children:[f.jsx(Ir,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),f.jsx("p",{className:"text-gray-500",children:"Aucun achievement trouv"})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Mu(t){return t+.5|0}const Ws=(t,e,n)=>Math.max(Math.min(t,n),e);function zl(t){return Ws(Mu(t*2.55),0,255)}function ai(t){return Ws(Mu(t*255),0,255)}function $r(t){return Ws(Mu(t/2.55)/100,0,1)}function $k(t){return Ws(Mu(t*100),0,100)}const In={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},j0=[..."0123456789ABCDEF"],YG=t=>j0[t&15],XG=t=>j0[(t&240)>>4]+j0[t&15],Pd=t=>(t&240)>>4===(t&15),JG=t=>Pd(t.r)&&Pd(t.g)&&Pd(t.b)&&Pd(t.a);function ZG(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&In[t[1]]*17,g:255&In[t[2]]*17,b:255&In[t[3]]*17,a:e===5?In[t[4]]*17:255}:(e===7||e===9)&&(n={r:In[t[1]]<<4|In[t[2]],g:In[t[3]]<<4|In[t[4]],b:In[t[5]]<<4|In[t[6]],a:e===9?In[t[7]]<<4|In[t[8]]:255})),n}const eK=(t,e)=>t<255?e(t):"";function tK(t){var e=JG(t)?YG:XG;return t?"#"+e(t.r)+e(t.g)+e(t.b)+eK(t.a,e):void 0}const nK=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _N(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function rK(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function sK(t,e,n){const r=_N(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function iK(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function vw(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=iK(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function xw(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ai)}function ww(t,e,n){return xw(_N,t,e,n)}function oK(t,e,n){return xw(sK,t,e,n)}function aK(t,e,n){return xw(rK,t,e,n)}function bN(t){return(t%360+360)%360}function lK(t){const e=nK.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?zl(+e[5]):ai(+e[5]));const s=bN(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=oK(s,i,o):e[1]==="hsv"?r=aK(s,i,o):r=ww(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function cK(t,e){var n=vw(t);n[0]=bN(n[0]+e),n=ww(n),t.r=n[0],t.g=n[1],t.b=n[2]}function uK(t){if(!t)return;const e=vw(t),n=e[0],r=$k(e[1]),s=$k(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${$r(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Wk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Hk={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function dK(){const t={},e=Object.keys(Hk),n=Object.keys(Wk);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,Wk[i]);i=parseInt(Hk[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Id;function hK(t){Id||(Id=dK(),Id.transparent=[0,0,0,0]);const e=Id[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const fK=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function mK(t){const e=fK.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?zl(o):Ws(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?zl(r):Ws(r,0,255)),s=255&(e[4]?zl(s):Ws(s,0,255)),i=255&(e[6]?zl(i):Ws(i,0,255)),{r,g:s,b:i,a:n}}}function pK(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${$r(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Tg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Uo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function gK(t,e,n){const r=Uo($r(t.r)),s=Uo($r(t.g)),i=Uo($r(t.b));return{r:ai(Tg(r+n*(Uo($r(e.r))-r))),g:ai(Tg(s+n*(Uo($r(e.g))-s))),b:ai(Tg(i+n*(Uo($r(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Ad(t,e,n){if(t){let r=vw(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=ww(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function TN(t,e){return t&&Object.assign(e||{},t)}function qk(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ai(t[3]))):(e=TN(t,{r:0,g:0,b:0,a:1}),e.a=ai(e.a)),e}function yK(t){return t.charAt(0)==="r"?mK(t):lK(t)}class Jc{constructor(e){if(e instanceof Jc)return e;const n=typeof e;let r;n==="object"?r=qk(e):n==="string"&&(r=ZG(e)||hK(e)||yK(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=TN(this._rgb);return e&&(e.a=$r(e.a)),e}set rgb(e){this._rgb=qk(e)}rgbString(){return this._valid?pK(this._rgb):void 0}hexString(){return this._valid?tK(this._rgb):void 0}hslString(){return this._valid?uK(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=gK(this._rgb,e._rgb,n)),this}clone(){return new Jc(this.rgb)}alpha(e){return this._rgb.a=ai(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Mu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ad(this._rgb,2,e),this}darken(e){return Ad(this._rgb,2,-e),this}saturate(e){return Ad(this._rgb,1,e),this}desaturate(e){return Ad(this._rgb,1,-e),this}rotate(e){return cK(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Vr(){}const vK=(()=>{let t=0;return()=>t++})();function Se(t){return t==null}function ct(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ge(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ht(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function hr(t,e){return Ht(t)?t:e}function de(t,e){return typeof t>"u"?e:t}const xK=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,kN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Oe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ce(t,e,n,r){let s,i,o;if(ct(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(ge(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Cf(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Pf(t){if(ct(t))return t.map(Pf);if(ge(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Pf(t[n[s]]);return e}return t}function SN(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function wK(t,e,n,r){if(!SN(t))return;const s=e[t],i=n[t];ge(s)&&ge(i)?Zc(s,i,r):e[t]=Pf(i)}function Zc(t,e,n){const r=ct(e)?e:[e],s=r.length;if(!ge(t))return t;n=n||{};const i=n.merger||wK;let o;for(let a=0;a<s;++a){if(o=r[a],!ge(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function pc(t,e){return Zc(t,e,{merger:_K})}function _K(t,e,n){if(!SN(t))return;const r=e[t],s=n[t];ge(r)&&ge(s)?pc(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Pf(s))}const Gk={"":t=>t,x:t=>t.x,y:t=>t.y};function bK(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function TK(t){const e=bK(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function _o(t,e){return(Gk[e]||(Gk[e]=TK(e)))(t)}function _w(t){return t.charAt(0).toUpperCase()+t.slice(1)}const eu=t=>typeof t<"u",pi=t=>typeof t=="function",Kk=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function kK(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Pe=Math.PI,We=2*Pe,SK=We+Pe,If=Number.POSITIVE_INFINITY,EK=Pe/180,mt=Pe/2,Di=Pe/4,Qk=Pe*2/3,EN=Math.log10,Ar=Math.sign;function gc(t,e,n){return Math.abs(t-e)<n}function Yk(t){const e=Math.round(t);t=gc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(EN(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function CK(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function PK(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function tu(t){return!PK(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function IK(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function AK(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Jr(t){return t*(Pe/180)}function RK(t){return t*(180/Pe)}function Xk(t){if(!Ht(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function CN(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Pe&&(i+=We),{angle:i,distance:s}}function O0(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function NK(t,e){return(t-e+SK)%We-Pe}function yn(t){return(t%We+We)%We}function nu(t,e,n,r){const s=yn(t),i=yn(e),o=yn(n),a=yn(i-s),l=yn(o-s),c=yn(s-i),u=yn(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function zt(t,e,n){return Math.max(e,Math.min(n,t))}function DK(t){return zt(t,-32768,32767)}function Zr(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function bw(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const eo=(t,e,n,r)=>bw(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),MK=(t,e,n)=>bw(t,n,r=>t[r][e]>=n);function jK(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const PN=["push","pop","shift","splice","unshift"];function OK(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),PN.forEach(n=>{const r="_onData"+_w(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function Jk(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(PN.forEach(i=>{delete t[i]}),delete t._chartjs)}function IN(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const AN=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function RN(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,AN.call(window,()=>{r=!1,t.apply(e,n)}))}}function LK(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Tw=t=>t==="start"?"left":t==="end"?"right":"center",Lt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,VK=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function FK(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:m,minDefined:p,maxDefined:g}=o.getUserBounds();if(p){if(s=Math.min(eo(l,u,d).lo,n?r:eo(e,u,o.getPixelForValue(d)).lo),c){const v=l.slice(0,s+1).reverse().findIndex(_=>!Se(_[a.axis]));s-=Math.max(0,v)}s=zt(s,0,r-1)}if(g){let v=Math.max(eo(l,o.axis,m,!0).hi+1,n?0:eo(e,u,o.getPixelForValue(m),!0).hi+1);if(c){const _=l.slice(v-1).findIndex(w=>!Se(w[a.axis]));v+=Math.max(0,_)}i=zt(v,s,r)-s}else i=r-s}return{start:s,count:i}}function UK(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Rd=t=>t===0||t===1,Zk=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*We/n)),eS=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*We/n)+1,yc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*mt)+1,easeOutSine:t=>Math.sin(t*mt),easeInOutSine:t=>-.5*(Math.cos(Pe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Rd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Rd(t)?t:Zk(t,.075,.3),easeOutElastic:t=>Rd(t)?t:eS(t,.075,.3),easeInOutElastic(t){return Rd(t)?t:t<.5?.5*Zk(t*2,.1125,.45):.5+.5*eS(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-yc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?yc.easeInBounce(t*2)*.5:yc.easeOutBounce(t*2-1)*.5+.5};function kw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function tS(t){return kw(t)?t:new Jc(t)}function kg(t){return kw(t)?t:new Jc(t).saturate(.5).darken(.1).hexString()}const zK=["x","y","borderWidth","radius","tension"],BK=["color","borderColor","backgroundColor"];function $K(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:BK},numbers:{type:"number",properties:zK}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function WK(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const nS=new Map;function HK(t,e){e=e||{};const n=t+JSON.stringify(e);let r=nS.get(n);return r||(r=new Intl.NumberFormat(t,e),nS.set(n,r)),r}function Sw(t,e,n){return HK(e,n).format(t)}const qK={values(t){return ct(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=GK(t,n)}const o=EN(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Sw(t,r,l)}};function GK(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var NN={formatters:qK};function KK(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:NN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const bo=Object.create(null),L0=Object.create(null);function vc(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Sg(t,e,n){return typeof e=="string"?Zc(vc(t,e),n):Zc(vc(t,""),e)}class QK{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>kg(s.backgroundColor),this.hoverBorderColor=(r,s)=>kg(s.borderColor),this.hoverColor=(r,s)=>kg(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Sg(this,e,n)}get(e){return vc(this,e)}describe(e,n){return Sg(L0,e,n)}override(e,n){return Sg(bo,e,n)}route(e,n,r,s){const i=vc(this,e),o=vc(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return ge(l)?Object.assign({},c,l):de(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var nt=new QK({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[$K,WK,KK]);function YK(t){return!t||Se(t.size)||Se(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function rS(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Mi(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function sS(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function V0(t,e,n,r){DN(t,e,n,r,null)}function DN(t,e,n,r,s){let i,o,a,l,c,u,d,m;const p=e.pointStyle,g=e.rotation,v=e.radius;let _=(g||0)*EK;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(_),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),p){default:s?t.ellipse(n,r,s/2,v,0,0,We):t.arc(n,r,v,0,We),t.closePath();break;case"triangle":u=s?s/2:v,t.moveTo(n+Math.sin(_)*u,r-Math.cos(_)*v),_+=Qk,t.lineTo(n+Math.sin(_)*u,r-Math.cos(_)*v),_+=Qk,t.lineTo(n+Math.sin(_)*u,r-Math.cos(_)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(_+Di)*l,d=Math.cos(_+Di)*(s?s/2-c:l),a=Math.sin(_+Di)*l,m=Math.sin(_+Di)*(s?s/2-c:l),t.arc(n-d,r-a,c,_-Pe,_-mt),t.arc(n+m,r-o,c,_-mt,_),t.arc(n+d,r+a,c,_,_+mt),t.arc(n-m,r+o,c,_+mt,_+Pe),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*v,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}_+=Di;case"rectRot":d=Math.cos(_)*(s?s/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,m=Math.sin(_)*(s?s/2:v),t.moveTo(n-d,r-a),t.lineTo(n+m,r-o),t.lineTo(n+d,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":_+=Di;case"cross":d=Math.cos(_)*(s?s/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,m=Math.sin(_)*(s?s/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":d=Math.cos(_)*(s?s/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,m=Math.sin(_)*(s?s/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),_+=Di,d=Math.cos(_)*(s?s/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,m=Math.sin(_)*(s?s/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=s?s/2:Math.cos(_)*v,a=Math.sin(_)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(_)*(s?s/2:v),r+Math.sin(_)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ru(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Fm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Um(t){t.restore()}function XK(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function JK(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function ZK(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Se(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function eQ(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function tQ(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function su(t,e,n,r,s,i={}){const o=ct(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,ZK(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&tQ(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Se(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),eQ(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function Af(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Pe,Pe,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Pe,mt,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,mt,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-mt,!0),t.lineTo(n+o.topLeft,r)}const nQ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,rQ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function sQ(t,e){const n=(""+t).match(nQ);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const iQ=t=>+t||0;function Ew(t,e){const n={},r=ge(e),s=r?Object.keys(e):e,i=ge(t)?r?o=>de(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=iQ(i(o));return n}function MN(t){return Ew(t,{top:"y",right:"x",bottom:"y",left:"x"})}function wa(t){return Ew(t,["topLeft","topRight","bottomLeft","bottomRight"])}function qn(t){const e=MN(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Bt(t,e){t=t||{},e=e||nt.font;let n=de(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=de(t.style,e.style);r&&!(""+r).match(rQ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:de(t.family,e.family),lineHeight:sQ(de(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:de(t.weight,e.weight),string:""};return s.string=YK(s),s}function Nd(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function oQ(t,e,n){const{min:r,max:s}=t,i=kN(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function No(t,e){return Object.assign(Object.create(t),e)}function Cw(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=VN("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>Cw([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return ON(a,l,()=>mQ(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return oS(a).includes(l)},ownKeys(a){return oS(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function Ua(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:jN(t,r),setContext:i=>Ua(t,i,n,r),override:i=>Ua(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return ON(i,o,()=>lQ(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function jN(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:pi(n)?n:()=>n,isIndexable:pi(r)?r:()=>r}}const aQ=(t,e)=>t?t+_w(e):e,Pw=(t,e)=>ge(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function ON(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function lQ(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return pi(a)&&o.isScriptable(e)&&(a=cQ(e,a,t,n)),ct(a)&&a.length&&(a=uQ(e,a,t,o.isIndexable)),Pw(e,a)&&(a=Ua(a,s,i&&i[e],o)),a}function cQ(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),Pw(t,l)&&(l=Iw(s._scopes,s,t,l)),l}function uQ(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(ge(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=Iw(c,s,t,u);e.push(Ua(d,i,o&&o[t],a))}}return e}function LN(t,e,n){return pi(t)?t(e,n):t}const dQ=(t,e)=>t===!0?e:typeof t=="string"?_o(e,t):void 0;function hQ(t,e,n,r,s){for(const i of e){const o=dQ(n,i);if(o){t.add(o);const a=LN(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Iw(t,e,n,r){const s=e._rootScopes,i=LN(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=iS(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=iS(a,o,i,l,r),l===null)?!1:Cw(Array.from(a),[""],s,i,()=>fQ(e,n,r))}function iS(t,e,n,r,s){for(;n;)n=hQ(t,e,n,r,s);return n}function fQ(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return ct(s)&&ge(n)?n:s||{}}function mQ(t,e,n,r){let s;for(const i of e)if(s=VN(aQ(i,t),n),typeof s<"u")return Pw(t,s)?Iw(n,r,t,s):s}function VN(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function oS(t){let e=t._keys;return e||(e=t._keys=pQ(t._scopes)),e}function pQ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const gQ=Number.EPSILON||1e-14,za=(t,e)=>e<t.length&&!t[e].skip&&t[e],FN=t=>t==="x"?"y":"x";function yQ(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=O0(i,s),l=O0(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,m=r*u;return{previous:{x:i.x-d*(o.x-s.x),y:i.y-d*(o.y-s.y)},next:{x:i.x+m*(o.x-s.x),y:i.y+m*(o.y-s.y)}}}function vQ(t,e,n){const r=t.length;let s,i,o,a,l,c=za(t,0);for(let u=0;u<r-1;++u)if(l=c,c=za(t,u+1),!(!l||!c)){if(gc(e[u],0,gQ)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=i*o*e[u])}}function xQ(t,e,n="x"){const r=FN(n),s=t.length;let i,o,a,l=za(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=za(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${r}`]=d-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${r}`]=d+i*e[c])}}function wQ(t,e="x"){const n=FN(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=za(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=za(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?Ar(s[o-1])!==Ar(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}vQ(t,s,i),xQ(t,i,e)}function Dd(t,e,n){return Math.max(Math.min(t,n),e)}function _Q(t,e){let n,r,s,i,o,a=ru(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&ru(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=Dd(s.cp1x,e.left,e.right),s.cp1y=Dd(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Dd(s.cp2x,e.left,e.right),s.cp2y=Dd(s.cp2y,e.top,e.bottom)))}function bQ(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")wQ(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=yQ(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&_Q(t,n)}function Aw(){return typeof window<"u"&&typeof document<"u"}function Rw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Rf(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const zm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function TQ(t,e){return zm(t).getPropertyValue(e)}const kQ=["top","right","bottom","left"];function io(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=kQ[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const SQ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function EQ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(SQ(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function $i(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=zm(n),i=s.boxSizing==="border-box",o=io(s,"padding"),a=io(s,"border","width"),{x:l,y:c,box:u}=EQ(t,n),d=o.left+(u&&a.left),m=o.top+(u&&a.top);let{width:p,height:g}=e;return i&&(p-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/p*n.width/r),y:Math.round((c-m)/g*n.height/r)}}function CQ(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&Rw(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=zm(i),l=io(a,"border","width"),c=io(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Rf(a.maxWidth,i,"clientWidth"),s=Rf(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||If,maxHeight:s||If}}const Hs=t=>Math.round(t*10)/10;function PQ(t,e,n,r){const s=zm(t),i=io(s,"margin"),o=Rf(s.maxWidth,t,"clientWidth")||If,a=Rf(s.maxHeight,t,"clientHeight")||If,l=CQ(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const m=io(s,"border","width"),p=io(s,"padding");c-=p.width+m.width,u-=p.height+m.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=Hs(Math.min(c,o,l.maxWidth)),u=Hs(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Hs(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Hs(Math.floor(u*r))),{width:c,height:u}}function aS(t,e,n){const r=e||1,s=Hs(t.height*r),i=Hs(t.width*r);t.height=Hs(t.height),t.width=Hs(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const IQ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Aw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function lS(t,e){const n=TQ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Wi(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function AQ(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function RQ(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Wi(t,s,n),a=Wi(s,i,n),l=Wi(i,e,n),c=Wi(o,a,n),u=Wi(a,l,n);return Wi(c,u,n)}const NQ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},DQ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function _a(t,e,n){return t?NQ(e,n):DQ()}function UN(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function zN(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function BN(t){return t==="angle"?{between:nu,compare:NK,normalize:yn}:{between:Zr,compare:(e,n)=>e-n,normalize:e=>e}}function cS({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function MQ(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=BN(r),l=e.length;let{start:c,end:u,loop:d}=t,m,p;if(d){for(c+=l,u+=l,m=0,p=l;m<p&&o(a(e[c%l][r]),s,i);++m)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function $N(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=BN(r),{start:u,end:d,loop:m,style:p}=MQ(t,e,n),g=[];let v=!1,_=null,w,x,b;const I=()=>l(s,b,w)&&a(s,b)!==0,C=()=>a(i,w)===0||l(i,b,w),N=()=>v||I(),S=()=>!v||C();for(let k=u,E=u;k<=d;++k)x=e[k%o],!x.skip&&(w=c(x[r]),w!==b&&(v=l(w,s,i),_===null&&N()&&(_=a(w,s)===0?k:E),_!==null&&S()&&(g.push(cS({start:_,end:k,loop:m,count:o,style:p})),_=null),E=k,b=w));return _!==null&&g.push(cS({start:_,end:d,loop:m,count:o,style:p})),g}function WN(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=$N(r[s],t.points,e);i.length&&n.push(...i)}return n}function jQ(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function OQ(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function LQ(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=jQ(n,s,i,r);if(r===!0)return uS(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return uS(t,OQ(n,o,l,c),n,e)}function uS(t,e,n,r){return!r||!r.setContext||!n?e:VQ(t,e,n,r)}function VQ(t,e,n,r){const s=t._chart.getContext(),i=dS(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,d=e[0].start,m=d;function p(g,v,_,w){const x=a?-1:1;if(g!==v){for(g+=l;n[g%l].skip;)g-=x;for(;n[v%l].skip;)v+=x;g%l!==v%l&&(c.push({start:g%l,end:v%l,loop:_,style:w}),u=w,d=v%l)}}for(const g of e){d=a?d:g.start;let v=n[d%l],_;for(m=d+1;m<=g.end;m++){const w=n[m%l];_=dS(r.setContext(No(s,{type:"segment",p0:v,p1:w,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),FQ(_,u)&&p(d,m-1,g.loop,u),v=w,u=_}d<m-1&&p(d,m-1,g.loop,u)}return c}function dS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function FQ(t,e){if(!e)return!1;const n=[],r=function(s,i){return kw(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Md(t,e,n){return t.options.clip?t[n]:e[n]}function UQ(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Md(n,e,"left"),right:Md(n,e,"right"),top:Md(r,e,"top"),bottom:Md(r,e,"bottom")}:e}function HN(t,e){const n=e._clip;if(n.disabled)return!1;const r=UQ(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class zQ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=AN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Fr=new zQ;const hS="transparent",BQ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=tS(t||hS),s=r.valid&&tS(e||hS);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class $Q{constructor(e,n,r,s){const i=n[r];s=Nd([e.to,s,i,e.from]);const o=Nd([e.from,i,s]);this._active=!0,this._fn=e.fn||BQ[e.type||typeof o],this._easing=yc[e.easing]||yc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Nd([e.to,n,s,e.from]),this._from=Nd([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class qN{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ge(e))return;const n=Object.keys(nt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!ge(i))return;const o={};for(const a of n)o[a]=i[a];(ct(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=HQ(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&WQ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let d=i[c];const m=r.get(c);if(d)if(m&&d.active()){d.update(m,u,a);continue}else d.cancel();if(!m||!m.duration){e[c]=u;continue}i[c]=d=new $Q(m,e,c,u),s.push(d)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Fr.add(this._chart,r),!0}}function WQ(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function HQ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function fS(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function qQ(t,e,n){if(n===!1)return!1;const r=fS(t,n),s=fS(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function GQ(t){let e,n,r,s;return ge(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function GN(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function mS(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Ht(c)&&(i||e===0||Ar(e)===Ar(c))&&(e+=c)}return!u&&!r.all?0:e}function KQ(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function Eg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function QQ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function YQ(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function XQ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function pS(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function gS(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=QQ(i,o,r),d=e.length;let m;for(let p=0;p<d;++p){const g=e[p],{[l]:v,[c]:_}=g,w=g._stacks||(g._stacks={});m=w[c]=XQ(s,u,v),m[a]=_,m._top=pS(m,o,!0,r.type),m._bottom=pS(m,o,!1,r.type);const x=m._visualValues||(m._visualValues={});x[a]=_}}function Cg(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function JQ(t,e){return No(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function ZQ(t,e,n){return No(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Sl(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Pg=t=>t==="reset"||t==="none",yS=(t,e)=>e?t:Object.assign({},t),eY=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:GN(n,!0),values:null};class oo{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Eg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Sl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(d,m,p,g)=>d==="x"?m:d==="r"?g:p,i=n.xAxisID=de(r.xAxisID,Cg(e,"x")),o=n.yAxisID=de(r.yAxisID,Cg(e,"y")),a=n.rAxisID=de(r.rAxisID,Cg(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Jk(this._data,this),e._stacked&&Sl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ge(n)){const s=this._cachedMeta;this._data=KQ(n,s)}else if(r!==n){if(r){Jk(r,this);const s=this._cachedMeta;Sl(s),s._parsed=[]}n&&Object.isExtensible(n)&&OK(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Eg(n.vScale,n),n.stack!==r.stack&&(s=!0,Sl(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(gS(this,n._parsed),n._stacked=Eg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{ct(s[e])?m=this.parseArrayData(r,s,e,n):ge(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=m[u],l&&(p()&&(l=!1),c=d);r._sorted=l}o&&gS(this,m)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,d=new Array(s);let m,p,g;for(m=0,p=s;m<p;++m)g=m+r,d[m]={[a]:u||i.parse(c[g],g),[l]:o.parse(n[g],g)};return d}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,d;for(l=0,c=s;l<c;++l)u=l+r,d=n[u],a[l]={x:i.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,d,m,p;for(u=0,d=s;u<d;++u)m=u+r,p=n[m],c[u]={x:i.parse(_o(p,a),m),y:o.parse(_o(p,l),m)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:GN(s,!0),values:n._stacks[e.axis]._visualValues};return mS(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=mS(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=eY(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=YQ(a);let m,p;function g(){p=s[m];const v=p[a.axis];return!Ht(p[e.axis])||u>v||d<v}for(m=0;m<o&&!(!g()&&(this.updateRangeFromParsed(c,e,p,l),i));++m);if(i){for(m=o-1;m>=0;--m)if(!g()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],Ht(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=GQ(de(this.options.clip,qQ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const d=s[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=ZQ(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=JQ(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&eu(r);if(a)return yS(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],m=c.getOptionScopes(this.getDataset(),u),p=Object.keys(nt.elements[e]),g=()=>this.getContext(r,s,n),v=c.resolveNamedOptions(m,p,g,d);return v.$shared&&(v.$shared=l,i[o]=Object.freeze(yS(v,l))),v}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),m=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(m,this.getContext(e,r,n))}const c=new qN(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Pg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){Pg(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!Pg(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Sl(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Y(oo,"defaults",{}),Y(oo,"datasetElementType",null),Y(oo,"dataElementType",null);function tY(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=IN(r.sort((s,i)=>s-i))}return t._cache.$bar}function nY(t){const e=t.iScale,n=tY(e,t.type);let r=e._length,s,i,o,a;const l=()=>{o===32767||o===-32768||(eu(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,i=n.length;s<i;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,i=e.ticks.length;s<i;++s)o=e.getPixelForTick(s),l();return r}function rY(t,e,n,r){const s=n.barThickness;let i,o;return Se(s)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=s*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[t]-i/2}}function sY(t,e,n,r){const s=e.pixels,i=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const c=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function iY(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),o=Math.min(s,i),a=Math.max(s,i);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:i,min:o,max:a}}function KN(t,e,n,r){return ct(t)?iY(t,e,n,r):e[n.axis]=n.parse(t,r),e}function vS(t,e,n,r){const s=t.iScale,i=t.vScale,o=s.getLabels(),a=s===i,l=[];let c,u,d,m;for(c=n,u=n+r;c<u;++c)m=e[c],d={},d[s.axis]=a||s.parse(o[c],c),l.push(KN(m,d,i,c));return l}function Ig(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function oY(t,e,n){return t!==0?Ar(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function aY(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function lY(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=aY(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=u:(i[xS(u,o,a,l)]=!0,s=c)),i[xS(s,o,a,l)]=!0,t.borderSkipped=i}function xS(t,e,n,r){return r?(t=cY(t,e,n),t=wS(t,n,e)):t=wS(t,e,n),t}function cY(t,e,n){return t===e?n:t===n?e:t}function wS(t,e,n){return t==="start"?e:t==="end"?n:t}function uY(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class ph extends oo{parsePrimitiveData(e,n,r,s){return vS(e,n,r,s)}parseArrayData(e,n,r,s){return vS(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let m,p,g,v;for(m=r,p=r+s;m<p;++m)v=n[m],g={},g[i.axis]=i.parse(_o(v,c),m),d.push(KN(_o(v,u),g,o,m));return d}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),o=i._custom,a=Ig(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:m}=this._getSharedOptions(n,s);for(let p=n;p<n+r;p++){const g=this.getParsed(p),v=i||Se(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),_=this._calculateBarIndexPixels(p,u),w=(g._stacks||{})[a.axis],x={horizontal:c,base:v.base,enableBorderRadius:!w||Ig(g._custom)||o===w._top||o===w._bottom,x:c?v.head:_.center,y:c?_.center:v.head,height:c?_.size:Math.abs(v.size),width:c?Math.abs(v.size):_.size};m&&(x.options=d||this.resolveDataElementOptions(p,e[p].active?"active":s));const b=x.options||e[p].options;lY(x,b,w,o),uY(x,b,u.ratio),this.updateElement(e[p],p,x,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const d=u._parsed.find(p=>p[r.axis]===l),m=d&&d[u.vScale.axis];if(Se(m)||isNaN(m))return!0};for(const u of s)if(!(n!==void 0&&c(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[de(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,o;for(i=0,o=n.data.length;i<o;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const a=e.barThickness;return{min:a||nY(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),c=l._custom,u=Ig(c);let d=l[n.axis],m=0,p=r?this.applyStack(n,l,r):d,g,v;p!==d&&(m=p-d,p=d),u&&(d=c.barStart,p=c.barEnd-c.barStart,d!==0&&Ar(d)!==Ar(c.barEnd)&&(m=0),m+=d);const _=!Se(i)&&!u?i:m;let w=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?g=n.getPixelForValue(m+p):g=w,v=g-w,Math.abs(v)<o){v=oY(v,n,a)*o,d===a&&(w-=v/2);const x=n.getPixelForDecimal(0),b=n.getPixelForDecimal(1),I=Math.min(x,b),C=Math.max(x,b);w=Math.max(Math.min(w,C),I),g=w+v,r&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(g)-n.getValueForPixel(w))}if(w===n.getPixelForValue(a)){const x=Ar(v)*n.getLineWidthForValue(a)/2;w+=x,v-=x}return{size:v,base:w,head:g,center:g+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,o=de(s.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=i?this._getStackCount(e):n.stackCount,d=s.barThickness==="flex"?sY(e,n,s,u*c):rY(e,n,s,u*c),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(de(m,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+p;a=d.start+d.chunk*g+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}Y(ph,"id","bar"),Y(ph,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Y(ph,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function dY(t,e,n){let r=1,s=1,i=0,o=0;if(e<We){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),m=Math.sin(l),p=(b,I,C)=>nu(b,a,l,!0)?1:Math.max(I,I*n,C,C*n),g=(b,I,C)=>nu(b,a,l,!0)?-1:Math.min(I,I*n,C,C*n),v=p(0,c,d),_=p(mt,u,m),w=g(Pe,c,d),x=g(Pe+mt,u,m);r=(v-w)/2,s=(_-x)/2,i=-(v+w)/2,o=-(_+x)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class Bl extends oo{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(ge(r[e])){const{key:l="value"}=this._parsing;i=c=>+_o(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=i(o)}}_getRotation(){return Jr(this.options.rotation-90)}_getCircumference(){return Jr(this.options.circumference)}_getRotationExtents(){let e=We,n=-We;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(xK(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:m,ratioY:p,offsetX:g,offsetY:v}=dY(d,u,l),_=(r.width-o)/m,w=(r.height-o)/p,x=Math.max(Math.min(_,w)/2,0),b=kN(this.options.radius,x),I=Math.max(b*l,0),C=(b-I)/this._getVisibleDatasetWeightTotal();this.offsetX=g*b,this.offsetY=v*b,s.total=this.calculateTotal(),this.outerRadius=b-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/We)}updateElements(e,n,r,s){const i=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,m=i&&c.animateScale,p=m?0:this.innerRadius,g=m?0:this.outerRadius,{sharedOptions:v,includeOptions:_}=this._getSharedOptions(n,s);let w=this._getRotation(),x;for(x=0;x<n;++x)w+=this._circumference(x,i);for(x=n;x<n+r;++x){const b=this._circumference(x,i),I=e[x],C={x:u+this.offsetX,y:d+this.offsetY,startAngle:w,endAngle:w+b,circumference:b,outerRadius:g,innerRadius:p};_&&(C.options=v||this.resolveDataElementOptions(x,I.active?"active":s)),w+=b,this.updateElement(I,x,C,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?We*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=Sw(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,o,a,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(de(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Y(Bl,"id","doughnut"),Y(Bl,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Y(Bl,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Y(Bl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:s,pointStyle:r,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class gh extends oo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=FK(n,s,o);this._drawStart=a,this._drawCount=l,UK(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,s),m=o.axis,p=a.axis,{spanGaps:g,segment:v}=this.options,_=tu(g)?g:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||i||s==="none",x=n+r,b=e.length;let I=n>0&&this.getParsed(n-1);for(let C=0;C<b;++C){const N=e[C],S=w?N:{};if(C<n||C>=x){S.skip=!0;continue}const k=this.getParsed(C),E=Se(k[p]),A=S[m]=o.getPixelForValue(k[m],C),D=S[p]=i||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,k,l):k[p],C);S.skip=isNaN(A)||isNaN(D)||E,S.stop=C>0&&Math.abs(k[m]-I[m])>_,v&&(S.parsed=k,S.raw=c.data[C]),d&&(S.options=u||this.resolveDataElementOptions(C,N.active?"active":s)),w||this.updateElement(N,C,S,s),I=k}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Y(gh,"id","line"),Y(gh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Y(gh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function ji(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Nw{constructor(e){Y(this,"options");this.options=e||{}}static override(e){Object.assign(Nw.prototype,e)}init(){}formats(){return ji()}parse(){return ji()}format(){return ji()}add(){return ji()}diff(){return ji()}startOf(){return ji()}endOf(){return ji()}}var hY={_date:Nw};function fY(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?MK:eo;if(r){if(s._sharedOptions){const u=i[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const m=c(i,e,n-d),p=c(i,e,n+d);return{lo:m.lo,hi:p.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:d}=s._cachedMeta,{_parsed:m}=t,p=m.slice(0,u.lo+1).reverse().findIndex(v=>!Se(v[d.axis]));u.lo-=Math.max(0,p);const g=m.slice(u.hi).findIndex(v=>!Se(v[d.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:i.length-1}}function Bm(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:d,hi:m}=fY(i[a],e,o,s);for(let p=d;p<=m;++p){const g=u[p];g.skip||r(g,c,p)}}}function mY(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Ag(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Bm(t,n,e,function(a,l,c){!s&&!ru(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function pY(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=CN(o,{x:e.x,y:e.y});nu(d,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return Bm(t,n,e,i),s}function gY(t,e,n,r,s,i){let o=[];const a=mY(n);let l=Number.POSITIVE_INFINITY;function c(u,d,m){const p=u.inRange(e.x,e.y,s);if(r&&!p)return;const g=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(g))&&!p)return;const _=a(e,g);_<l?(o=[{element:u,datasetIndex:d,index:m}],l=_):_===l&&o.push({element:u,datasetIndex:d,index:m})}return Bm(t,n,e,c),o}function Rg(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?pY(t,e,n,s):gY(t,e,n,r,s,i)}function _S(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Bm(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var yY={modes:{index(t,e,n,r){const s=$i(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Ag(t,s,i,r,o):Rg(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=$i(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Ag(t,s,i,r,o):Rg(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=$i(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Ag(t,s,i,r,o)},nearest(t,e,n,r){const s=$i(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Rg(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=$i(e,t);return _S(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=$i(e,t);return _S(t,s,"y",n.intersect,r)}}};const QN=["left","top","right","bottom"];function El(t,e){return t.filter(n=>n.pos===e)}function bS(t,e){return t.filter(n=>QN.indexOf(n.pos)===-1&&n.box.axis===e)}function Cl(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function vY(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function xY(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!QN.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function wY(t,e){const n=xY(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function _Y(t){const e=vY(t),n=Cl(e.filter(c=>c.box.fullSize),!0),r=Cl(El(e,"left"),!0),s=Cl(El(e,"right")),i=Cl(El(e,"top"),!0),o=Cl(El(e,"bottom")),a=bS(e,"x"),l=bS(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:El(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function TS(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function YN(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function bY(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!ge(s)){n.size&&(t[s]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[s]+=n.size}i.getPadding&&YN(o,i.getPadding());const a=Math.max(0,e.outerWidth-TS(o,t,"left","right")),l=Math.max(0,e.outerHeight-TS(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function TY(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function kY(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function $l(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,kY(a.horizontal,e));const{same:d,other:m}=bY(e,n,a,r);c|=d&&s.length,u=u||m,l.fullSize||s.push(a)}return c&&$l(s,e,n,r)||u}function jd(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function kS(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,m=c.size||l.height;eu(c.start)&&(o=c.start),l.fullSize?jd(l,s.left,o,n.outerWidth-s.right-s.left,m):jd(l,e.left+c.placed,o,d,m),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,m=c.size||l.width;eu(c.start)&&(i=c.start),l.fullSize?jd(l,i,s.top,m,n.outerHeight-s.bottom-s.top):jd(l,i,e.top+c.placed,m,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=o}var Ln={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=qn(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=_Y(t.boxes),l=a.vertical,c=a.horizontal;Ce(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,_)=>_.box.options&&_.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),m=Object.assign({},s);YN(m,qn(r));const p=Object.assign({maxPadding:m,w:i,h:o,x:s.left,y:s.top},s),g=wY(l.concat(c),d);$l(a.fullSize,p,d,g),$l(l,p,d,g),$l(c,p,d,g)&&$l(l,p,d,g),TY(p),kS(a.leftAndTop,p,d,g),p.x+=p.w,p.y+=p.h,kS(a.rightAndBottom,p,d,g),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ce(a.chartArea,v=>{const _=v.box;Object.assign(_,t.chartArea),_.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class XN{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class SY extends XN{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const yh="$chartjs",EY={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},SS=t=>t===null||t==="";function CY(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[yh]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",SS(s)){const i=lS(t,"width");i!==void 0&&(t.width=i)}if(SS(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=lS(t,"height");i!==void 0&&(t.height=i)}return t}const JN=IQ?{passive:!0}:!1;function PY(t,e,n){t&&t.addEventListener(e,n,JN)}function IY(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,JN)}function AY(t,e){const n=EY[t.type]||t.type,{x:r,y:s}=$i(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Nf(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function RY(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Nf(a.addedNodes,r),o=o&&!Nf(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function NY(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Nf(a.removedNodes,r),o=o&&!Nf(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const iu=new Map;let ES=0;function ZN(){const t=window.devicePixelRatio;t!==ES&&(ES=t,iu.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function DY(t,e){iu.size||window.addEventListener("resize",ZN),iu.set(t,e)}function MY(t){iu.delete(t),iu.size||window.removeEventListener("resize",ZN)}function jY(t,e,n){const r=t.canvas,s=r&&Rw(r);if(!s)return;const i=RN((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),DY(t,i),o}function Ng(t,e,n){n&&n.disconnect(),e==="resize"&&MY(t)}function OY(t,e,n){const r=t.canvas,s=RN(i=>{t.ctx!==null&&n(AY(i,t))},t);return PY(r,e,s),s}class LY extends XN{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(CY(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[yh])return!1;const r=n[yh].initial;["height","width"].forEach(i=>{const o=r[i];Se(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[yh],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:RY,detach:NY,resize:jY}[n]||OY;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:Ng,detach:Ng,resize:Ng}[n]||IY)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return PQ(e,n,r,s)}isAttached(e){const n=e&&Rw(e);return!!(n&&n.isConnected)}}function VY(t){return!Aw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?SY:LY}var zd;let vs=(zd=class{constructor(){Y(this,"x");Y(this,"y");Y(this,"active",!1);Y(this,"options");Y(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return tu(this.x)&&tu(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},Y(zd,"defaults",{}),Y(zd,"defaultRoutes"),zd);function FY(t,e){const n=t.options.ticks,r=UY(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?BY(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return $Y(e,c,i,o/s),c;const u=zY(i,e,s);if(o>0){let d,m;const p=o>1?Math.round((l-a)/(o-1)):null;for(Od(e,c,u,Se(p)?0:a-p,a),d=0,m=o-1;d<m;d++)Od(e,c,u,i[d],i[d+1]);return Od(e,c,u,l,Se(p)?e.length:l+p),c}return Od(e,c,u),c}function UY(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function zY(t,e,n){const r=WY(t),s=e.length/n;if(!r)return Math.max(s,1);const i=CK(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function BY(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function $Y(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function Od(t,e,n,r,s){const i=de(r,0),o=Math.min(de(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function WY(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const HY=t=>t==="left"?"right":t==="right"?"left":t,CS=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,PS=(t,e)=>Math.min(e||t,t);function IS(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function qY(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function GY(t,e){Ce(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Pl(t){return t.drawTicks?t.tickLength:0}function AS(t,e){if(!t.display)return 0;const n=Bt(t.font,e),r=qn(t.padding);return(ct(t.text)?t.text.length:1)*n.lineHeight+r.height}function KY(t,e){return No(t,{scale:e,type:"scale"})}function QY(t,e,n){return No(t,{tick:n,index:e,type:"tick"})}function YY(t,e,n){let r=Tw(t);return(n&&e!=="right"||!n&&e==="right")&&(r=HY(r)),r}function XY(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,m,p,g;const v=o-s,_=a-i;if(t.isHorizontal()){if(p=Lt(r,i,a),ge(n)){const w=Object.keys(n)[0],x=n[w];g=u[w].getPixelForValue(x)+v-e}else n==="center"?g=(c.bottom+c.top)/2+v-e:g=CS(t,n,e);m=a-i}else{if(ge(n)){const w=Object.keys(n)[0],x=n[w];p=u[w].getPixelForValue(x)-_+e}else n==="center"?p=(c.left+c.right)/2-_+e:p=CS(t,n,e);g=Lt(r,o,s),d=n==="left"?-mt:mt}return{titleX:p,titleY:g,maxWidth:m,rotation:d}}class Za extends vs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=hr(e,Number.POSITIVE_INFINITY),n=hr(n,Number.NEGATIVE_INFINITY),r=hr(r,Number.POSITIVE_INFINITY),s=hr(s,Number.NEGATIVE_INFINITY),{min:hr(e,r),max:hr(n,s),minDefined:Ht(e),maxDefined:Ht(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:hr(n,hr(r,n)),max:hr(r,hr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Oe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=oQ(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?IS(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=FY(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Oe(this.options.afterUpdate,[this])}beforeSetDimensions(){Oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Oe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Oe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Oe(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=PS(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),d=u.widest.width,m=u.highest.height,p=zt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),d+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-Pl(e.grid)-n.padding-AS(e.title,this.chart.options.font),c=Math.sqrt(d*d+m*m),o=RK(Math.min(Math.asin(zt((u.highest.height+6)/a,-1,1)),Math.asin(zt(l/c,-1,1))-Math.asin(zt(m/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Oe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=AS(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Pl(i)+l):(e.height=this.maxHeight,e.width=Pl(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:m}=this._getLabelSizes(),p=r.padding*2,g=Jr(this.labelRotation),v=Math.cos(g),_=Math.sin(g);if(a){const w=r.mirror?0:_*d.width+v*m.height;e.height=Math.min(this.maxHeight,e.height+w+p)}else{const w=r.mirror?0:v*d.width+_*m.height;e.width=Math.min(this.maxWidth,e.width+w+p)}this._calculatePadding(c,u,_,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,p=0;l?c?(m=s*e.width,p=r*n.height):(m=r*e.height,p=s*n.width):i==="start"?p=n.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,p=n.width/2),this.paddingLeft=Math.max((m-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;i==="start"?(u=0,d=e.height):i==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Oe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Se(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=IS(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/PS(n,r));let c=0,u=0,d,m,p,g,v,_,w,x,b,I,C;for(d=0;d<n;d+=l){if(g=e[d].label,v=this._resolveTickFontOptions(d),s.font=_=v.string,w=i[_]=i[_]||{data:{},gc:[]},x=v.lineHeight,b=I=0,!Se(g)&&!ct(g))b=rS(s,w.data,w.gc,b,g),I=x;else if(ct(g))for(m=0,p=g.length;m<p;++m)C=g[m],!Se(C)&&!ct(C)&&(b=rS(s,w.data,w.gc,b,C),I+=x);o.push(b),a.push(I),c=Math.max(b,c),u=Math.max(I,u)}GY(i,n);const N=o.indexOf(c),S=a.indexOf(u),k=E=>({width:o[E]||0,height:a[E]||0});return{first:k(0),last:k(n-1),widest:k(N),highest:k(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return DK(this._alignToPixels?Mi(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=QY(this.getContext(),e,r))}return this.$context||(this.$context=KY(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Jr(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),m=Pl(i),p=[],g=a.setContext(this.getContext()),v=g.display?g.width:0,_=v/2,w=function($){return Mi(r,$,v)};let x,b,I,C,N,S,k,E,A,D,j,R;if(o==="top")x=w(this.bottom),S=this.bottom-m,E=x-_,D=w(e.top)+_,R=e.bottom;else if(o==="bottom")x=w(this.top),D=e.top,R=w(e.bottom)-_,S=x+_,E=this.top+m;else if(o==="left")x=w(this.right),N=this.right-m,k=x-_,A=w(e.left)+_,j=e.right;else if(o==="right")x=w(this.left),A=e.left,j=w(e.right)-_,N=x+_,k=this.left+m;else if(n==="x"){if(o==="center")x=w((e.top+e.bottom)/2+.5);else if(ge(o)){const $=Object.keys(o)[0],J=o[$];x=w(this.chart.scales[$].getPixelForValue(J))}D=e.top,R=e.bottom,S=x+_,E=S+m}else if(n==="y"){if(o==="center")x=w((e.left+e.right)/2);else if(ge(o)){const $=Object.keys(o)[0],J=o[$];x=w(this.chart.scales[$].getPixelForValue(J))}N=x-_,k=N-m,A=e.left,j=e.right}const z=de(s.ticks.maxTicksLimit,d),H=Math.max(1,Math.ceil(d/z));for(b=0;b<d;b+=H){const $=this.getContext(b),J=i.setContext($),U=a.setContext($),q=J.lineWidth,ne=J.color,Z=U.dash||[],le=U.dashOffset,ve=J.tickWidth,st=J.tickColor,gt=J.tickBorderDash||[],ze=J.tickBorderDashOffset;I=qY(this,b,l),I!==void 0&&(C=Mi(r,I,q),c?N=k=A=j=C:S=E=D=R=C,p.push({tx1:N,ty1:S,tx2:k,ty2:E,x1:A,y1:D,x2:j,y2:R,width:q,color:ne,borderDash:Z,borderDashOffset:le,tickWidth:ve,tickColor:st,tickBorderDash:gt,tickBorderDashOffset:ze}))}return this._ticksLength=d,this._borderValue=x,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=i,m=Pl(r.grid),p=m+u,g=d?-u:p,v=-Jr(this.labelRotation),_=[];let w,x,b,I,C,N,S,k,E,A,D,j,R="middle";if(s==="top")N=this.bottom-g,S=this._getXAxisLabelAlignment();else if(s==="bottom")N=this.top+g,S=this._getXAxisLabelAlignment();else if(s==="left"){const H=this._getYAxisLabelAlignment(m);S=H.textAlign,C=H.x}else if(s==="right"){const H=this._getYAxisLabelAlignment(m);S=H.textAlign,C=H.x}else if(n==="x"){if(s==="center")N=(e.top+e.bottom)/2+p;else if(ge(s)){const H=Object.keys(s)[0],$=s[H];N=this.chart.scales[H].getPixelForValue($)+p}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")C=(e.left+e.right)/2-p;else if(ge(s)){const H=Object.keys(s)[0],$=s[H];C=this.chart.scales[H].getPixelForValue($)}S=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const z=this._getLabelSizes();for(w=0,x=a.length;w<x;++w){b=a[w],I=b.label;const H=i.setContext(this.getContext(w));k=this.getPixelForTick(w)+i.labelOffset,E=this._resolveTickFontOptions(w),A=E.lineHeight,D=ct(I)?I.length:1;const $=D/2,J=H.color,U=H.textStrokeColor,q=H.textStrokeWidth;let ne=S;o?(C=k,S==="inner"&&(w===x-1?ne=this.options.reverse?"left":"right":w===0?ne=this.options.reverse?"right":"left":ne="center"),s==="top"?c==="near"||v!==0?j=-D*A+A/2:c==="center"?j=-z.highest.height/2-$*A+A:j=-z.highest.height+A/2:c==="near"||v!==0?j=A/2:c==="center"?j=z.highest.height/2-$*A:j=z.highest.height-D*A,d&&(j*=-1),v!==0&&!H.showLabelBackdrop&&(C+=A/2*Math.sin(v))):(N=k,j=(1-D)*A/2);let Z;if(H.showLabelBackdrop){const le=qn(H.backdropPadding),ve=z.heights[w],st=z.widths[w];let gt=j-le.top,ze=0-le.left;switch(R){case"middle":gt-=ve/2;break;case"bottom":gt-=ve;break}switch(S){case"center":ze-=st/2;break;case"right":ze-=st;break;case"inner":w===x-1?ze-=st:w>0&&(ze-=st/2);break}Z={left:ze,top:gt,width:st+le.width,height:ve+le.height,color:H.backdropColor}}_.push({label:I,font:E,textOffset:j,options:{rotation:v,color:J,strokeColor:U,strokeWidth:q,textAlign:ne,textBaseline:R,translation:[C,N],backdrop:Z}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Jr(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,m;this.isHorizontal()?(c=Mi(e,this.left,o)-o/2,u=Mi(e,this.right,a)+a/2,d=m=l):(d=Mi(e,this.top,o)-o/2,m=Mi(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Fm(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;su(r,c,0,u,l,a)}s&&Um(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Bt(r.font),o=qn(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||ge(n)?(l+=o.bottom,ct(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:m}=XY(this,l,n,a);su(e,r.text,0,0,i,{color:r.color,maxWidth:d,rotation:m,textAlign:YY(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=de(e.grid&&e.grid.z,-1),s=de(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Za.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Bt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ld{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;eX(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,JY(e,o,r),this.override&&nt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in nt[s]&&(delete nt[s][r],this.override&&delete bo[r])}}function JY(t,e,n){const r=Zc(Object.create(null),[n?nt.get(n):{},nt.get(e),t.defaults]);nt.set(e,r),t.defaultRoutes&&ZY(e,t.defaultRoutes),t.descriptors&&nt.describe(e,t.descriptors)}function ZY(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");nt.route(i,s,l,a)})}function eX(t){return"id"in t&&"defaults"in t}class tX{constructor(){this.controllers=new Ld(oo,"datasets",!0),this.elements=new Ld(vs,"elements"),this.plugins=new Ld(Object,"plugins"),this.scales=new Ld(Za,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Ce(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=_w(e);Oe(r["before"+s],[],r),n[e](r),Oe(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var pr=new tX;class nX{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Oe(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Se(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=de(r.options&&r.options.plugins,{}),i=rX(r);return s===!1&&!n?[]:iX(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function rX(t){const e={},n=[],r=Object.keys(pr.plugins.items);for(let i=0;i<r.length;i++)n.push(pr.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function sX(t,e){return!e&&t===!1?null:t===!0?{}:t}function iX(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=sX(r[l],s);c!==null&&i.push({plugin:a,options:oX(t.config,{plugin:a,local:n[l]},c,o)})}return i}function oX(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function F0(t,e){const n=nt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function aX(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function lX(t,e){return t===e?"_index_":"_value_"}function RS(t){if(t==="x"||t==="y"||t==="r")return t}function cX(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function U0(t,...e){if(RS(t))return t;for(const n of e){const r=n.axis||cX(n.position)||t.length>1&&RS(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function NS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function uX(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return NS(t,"x",n[0])||NS(t,"y",n[0])}return{}}function dX(t,e){const n=bo[t.type]||{scales:{}},r=e.scales||{},s=F0(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ge(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=U0(o,a,uX(o,t),nt.scales[a.type]),c=lX(l,s),u=n.scales||{};i[o]=pc(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||F0(a,e),u=(bo[a]||{}).scales||{};Object.keys(u).forEach(d=>{const m=aX(d,l),p=o[m+"AxisID"]||m;i[p]=i[p]||Object.create(null),pc(i[p],[{axis:m},r[p],u[d]])})}),Object.keys(i).forEach(o=>{const a=i[o];pc(a,[nt.scales[a.type],nt.scale])}),i}function eD(t){const e=t.options||(t.options={});e.plugins=de(e.plugins,{}),e.scales=dX(t,e)}function tD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function hX(t){return t=t||{},t.data=tD(t.data),eD(t),t}const DS=new Map,nD=new Set;function Vd(t,e){let n=DS.get(t);return n||(n=e(),DS.set(t,n),nD.add(n)),n}const Il=(t,e,n)=>{const r=_o(e,n);r!==void 0&&t.add(r)};class fX{constructor(e){this._config=hX(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=tD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),eD(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Vd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Vd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Vd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Vd(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>Il(l,e,d))),u.forEach(d=>Il(l,s,d)),u.forEach(d=>Il(l,bo[i]||{},d)),u.forEach(d=>Il(l,nt,d)),u.forEach(d=>Il(l,L0,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),nD.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,bo[n]||{},nt.datasets[n]||{},{type:n},nt,L0]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=MS(this._resolverCache,e,s);let l=o;if(pX(o,n)){i.$shared=!1,r=pi(r)?r():r;const c=this.createResolver(e,r,a);l=Ua(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=MS(this._resolverCache,e,r);return ge(n)?Ua(i,n,void 0,s):i}}function MS(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Cw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const mX=t=>ge(t)&&Object.getOwnPropertyNames(t).some(e=>pi(t[e]));function pX(t,e){const{isScriptable:n,isIndexable:r}=jN(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(pi(a)||mX(a))||o&&ct(a))return!0}return!1}var gX="4.5.1";const yX=["top","bottom","left","right","chartArea"];function jS(t,e){return t==="top"||t==="bottom"||yX.indexOf(t)===-1&&e==="x"}function OS(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function LS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Oe(n&&n.onComplete,[t],e)}function vX(t){const e=t.chart,n=e.options.animation;Oe(n&&n.onProgress,[t],e)}function rD(t){return Aw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const vh={},VS=t=>{const e=rD(t);return Object.values(vh).filter(n=>n.canvas===e).pop()};function xX(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function wX(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Ss;let $m=(Ss=class{static register(...e){pr.add(...e),FS()}static unregister(...e){pr.remove(...e),FS()}constructor(e,n){const r=this.config=new fX(n),s=rD(e),i=VS(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||VY(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=vK(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nX,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=LK(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],vh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Fr.listen(this,"complete",LS),Fr.listen(this,"progress",vX),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Se(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return pr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():aS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sS(this.canvas,this.ctx),this}stop(){return Fr.stop(this),this}resize(e,n){Fr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,aS(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Oe(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ce(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=U0(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ce(i,o=>{const a=o.options,l=a.id,c=U0(l,a),u=de(a.type,o.dtype);(a.position===void 0||jS(a.position,c)!==jS(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const m=pr.getScale(u);d=new m({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),Ce(s,(o,a)=>{o||delete r[a]}),Ce(r,o=>{Ln.configure(this,o,o.options),Ln.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(OS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||F0(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=pr.getController(a),{datasetElementType:c,dataElementType:u}=nt.datasets[a];Object.assign(l,{dataElementType:pr.getElement(u),datasetElementType:c&&pr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ce(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),m=!s&&i.indexOf(d)===-1;d.buildOrUpdateElements(m),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Ce(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(OS("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ce(this.scales,e=>{Ln.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Kk(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;xX(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Kk(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ln.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ce(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,pi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Fr.has(this)?this.attached&&!Fr.running(this)&&Fr.start(this):(this.draw(),LS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=HN(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Fm(n,s),e.controller.draw(),s&&Um(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return ru(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=yY.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=No(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);eu(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Fr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),sS(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete vh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Ce(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ce(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ce(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Cf(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=kK(e),c=wX(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Oe(i.onHover,[e,a,this],this),l&&Oe(i.onClick,[e,a,this],this));const u=!Cf(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},Y(Ss,"defaults",nt),Y(Ss,"instances",vh),Y(Ss,"overrides",bo),Y(Ss,"registry",pr),Y(Ss,"version",gX),Y(Ss,"getChart",VS),Ss);function FS(){return Ce($m.instances,t=>t._plugins.invalidate())}function _X(t,e,n){const{startAngle:r,x:s,y:i,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/o,yn(r-n));if(t.beginPath(),t.arc(s,i,o-c/2,r+d/2,n-d/2),a>0){const m=Math.min(c/a,yn(r-n));t.arc(s,i,a+c/2,n-m/2,r+m/2,!0)}else{const m=Math.min(c/2,o*yn(r-n));if(u==="round")t.arc(s,i,m,n-Pe/2,r+Pe/2,!0);else if(u==="bevel"){const p=2*m*m,g=-p*Math.cos(n+Pe/2)+s,v=-p*Math.sin(n+Pe/2)+i,_=p*Math.cos(r+Pe/2)+s,w=p*Math.sin(r+Pe/2)+i;t.lineTo(g,v),t.lineTo(_,w)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function bX(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(i,o,a,r-c,n+c),l>s?(c=s/l,t.arc(i,o,l,n+c,r-c,!0)):t.arc(i,o,s,n+mt,r-mt),t.closePath(),t.clip()}function TX(t){return Ew(t,["outerStart","outerEnd","innerStart","innerEnd"])}function kX(t,e,n,r){const s=TX(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,r*e/2),a=l=>{const c=(n-Math.min(i,l))*r/2;return zt(l,0,Math.min(i,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:zt(s.innerStart,0,o),innerEnd:zt(s.innerEnd,0,o)}}function zo(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Df(t,e,n,r,s,i){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),m=u>0?u+r+n+c:0;let p=0;const g=s-l;if(r){const H=u>0?u-r:0,$=d>0?d-r:0,J=(H+$)/2,U=J!==0?g*J/(J+r):g;p=(g-U)/2}const v=Math.max(.001,g*d-n/Pe)/d,_=(g-v)/2,w=l+_+p,x=s-_-p,{outerStart:b,outerEnd:I,innerStart:C,innerEnd:N}=kX(e,m,d,x-w),S=d-b,k=d-I,E=w+b/S,A=x-I/k,D=m+C,j=m+N,R=w+C/D,z=x-N/j;if(t.beginPath(),i){const H=(E+A)/2;if(t.arc(o,a,d,E,H),t.arc(o,a,d,H,A),I>0){const q=zo(k,A,o,a);t.arc(q.x,q.y,I,A,x+mt)}const $=zo(j,x,o,a);if(t.lineTo($.x,$.y),N>0){const q=zo(j,z,o,a);t.arc(q.x,q.y,N,x+mt,z+Math.PI)}const J=(x-N/m+(w+C/m))/2;if(t.arc(o,a,m,x-N/m,J,!0),t.arc(o,a,m,J,w+C/m,!0),C>0){const q=zo(D,R,o,a);t.arc(q.x,q.y,C,R+Math.PI,w-mt)}const U=zo(S,w,o,a);if(t.lineTo(U.x,U.y),b>0){const q=zo(S,E,o,a);t.arc(q.x,q.y,b,w-mt,E)}}else{t.moveTo(o,a);const H=Math.cos(E)*d+o,$=Math.sin(E)*d+a;t.lineTo(H,$);const J=Math.cos(A)*d+o,U=Math.sin(A)*d+a;t.lineTo(J,U)}t.closePath()}function SX(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){Df(t,e,n,r,l,s);for(let c=0;c<i;++c)t.fill();isNaN(a)||(l=o+(a%We||We))}return Df(t,e,n,r,l,s),t.fill(),l}function EX(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:m,borderRadius:p}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=m,g?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let v=e.endAngle;if(i){Df(t,e,n,r,v,s);for(let _=0;_<i;++_)t.stroke();isNaN(a)||(v=o+(a%We||We))}g&&bX(t,e,v),l.selfJoin&&v-o>=Pe&&p===0&&u!=="miter"&&_X(t,e,v),i||(Df(t,e,n,r,v,s),t.stroke())}class Wl extends vs{constructor(n){super();Y(this,"circumference");Y(this,"endAngle");Y(this,"fullCircles");Y(this,"innerRadius");Y(this,"outerRadius");Y(this,"pixelMargin");Y(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:o,distance:a}=CN(i,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,g=de(m,c-l),v=nu(o,l,c)&&l!==c,_=g>=We||v,w=Zr(a,u+p,d+p);return _&&w}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,d=(i+o)/2,m=(a+l+u+c)/2;return{x:r+Math.cos(d)*m,y:s+Math.sin(d)*m}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>We?Math.floor(s/We):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(Pe,s||0)),u=i*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,SX(n,this,u,o,a),EX(n,this,u,o,a),n.restore()}}Y(Wl,"id","arc"),Y(Wl,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Y(Wl,"defaultRoutes",{backgroundColor:"backgroundColor"}),Y(Wl,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function sD(t,e,n=e){t.lineCap=de(n.borderCapStyle,e.borderCapStyle),t.setLineDash(de(n.borderDash,e.borderDash)),t.lineDashOffset=de(n.borderDashOffset,e.borderDashOffset),t.lineJoin=de(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=de(n.borderWidth,e.borderWidth),t.strokeStyle=de(n.borderColor,e.borderColor)}function CX(t,e,n){t.lineTo(n.x,n.y)}function PX(t){return t.stepped?XK:t.tension||t.cubicInterpolationMode==="monotone"?JK:CX}function iD(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),u=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function IX(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=iD(s,n,r),u=PX(i);let{move:d=!0,reverse:m}=r||{},p,g,v;for(p=0;p<=c;++p)g=s[(a+(m?c-p:p))%o],!g.skip&&(d?(t.moveTo(g.x,g.y),d=!1):u(t,v,g,m,i.stepped),v=g);return l&&(g=s[(a+(m?c:0))%o],u(t,v,g,m,i.stepped)),!!l}function AX(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=iD(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,m,p,g,v,_,w;const x=I=>(o+(c?a-I:I))%i,b=()=>{v!==_&&(t.lineTo(u,_),t.lineTo(u,v),t.lineTo(u,w))};for(l&&(p=s[x(0)],t.moveTo(p.x,p.y)),m=0;m<=a;++m){if(p=s[x(m)],p.skip)continue;const I=p.x,C=p.y,N=I|0;N===g?(C<v?v=C:C>_&&(_=C),u=(d*u+I)/++d):(b(),t.lineTo(I,C),g=N,d=0,v=_=C),w=C}b()}function z0(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?AX:IX}function RX(t){return t.stepped?AQ:t.tension||t.cubicInterpolationMode==="monotone"?RQ:Wi}function NX(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),sD(t,e.options),t.stroke(s)}function DX(t,e,n,r){const{segments:s,options:i}=e,o=z0(e);for(const a of s)sD(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const MX=typeof Path2D=="function";function jX(t,e,n,r){MX&&!e.options.segment?NX(t,e,n,r):DX(t,e,n,r)}class qs extends vs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;bQ(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=LQ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=WN(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=RX(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:m}=o[c],p=i[d],g=i[m];if(p===g){a.push(p);continue}const v=Math.abs((s-p[n])/(g[n]-p[n])),_=l(p,g,v,r.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,r){return z0(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=z0(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),jX(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Y(qs,"id","line"),Y(qs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Y(qs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Y(qs,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function US(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class xh extends vs{constructor(n){super();Y(this,"parsed");Y(this,"skip");Y(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return US(this,n,"x",r)}inYRange(n,r){return US(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!ru(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,V0(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Y(xh,"id","point"),Y(xh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Y(xh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function oD(t,e){const{x:n,y:r,base:s,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,s),l=Math.max(n,s),c=r-d,u=r+d):(d=i/2,a=n-d,l=n+d,c=Math.min(r,s),u=Math.max(r,s)),{left:a,top:c,right:l,bottom:u}}function Gs(t,e,n,r){return t?0:zt(e,n,r)}function OX(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=MN(r);return{t:Gs(s.top,i.top,0,n),r:Gs(s.right,i.right,0,e),b:Gs(s.bottom,i.bottom,0,n),l:Gs(s.left,i.left,0,e)}}function LX(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=wa(s),o=Math.min(e,n),a=t.borderSkipped,l=r||ge(s);return{topLeft:Gs(!l||a.top||a.left,i.topLeft,0,o),topRight:Gs(!l||a.top||a.right,i.topRight,0,o),bottomLeft:Gs(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:Gs(!l||a.bottom||a.right,i.bottomRight,0,o)}}function VX(t){const e=oD(t),n=e.right-e.left,r=e.bottom-e.top,s=OX(t,n/2,r/2),i=LX(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function Dg(t,e,n,r){const s=e===null,i=n===null,a=t&&!(s&&i)&&oD(t,r);return a&&(s||Zr(e,a.left,a.right))&&(i||Zr(n,a.top,a.bottom))}function FX(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function UX(t,e){t.rect(e.x,e.y,e.w,e.h)}function Mg(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+o,radius:t.radius}}class wh extends vs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:o}=VX(this),a=FX(o.radius)?Af:UX;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,Mg(o,n,i)),e.clip(),a(e,Mg(i,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Mg(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return Dg(this,e,n,r)}inXRange(e,n){return Dg(this,e,null,n)}inYRange(e,n){return Dg(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Y(wh,"id","bar"),Y(wh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Y(wh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function zX(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=Wm(l,c,s);const u=B0(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const d=WN(e,u);for(const m of d){const p=B0(n,i[m.start],i[m.end],m.loop),g=$N(a,s,p);for(const v of g)o.push({source:v,target:m,start:{[n]:zS(u,p,"start",Math.max)},end:{[n]:zS(u,p,"end",Math.min)}})}}return o}function B0(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=yn(s),i=yn(i)),{property:t,start:s,end:i}}function BX(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=Wm(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function Wm(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function zS(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function aD(t,e){let n=[],r=!1;return ct(t)?(r=!0,n=t):n=BX(t,e),n.length?new qs({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function BS(t){return t&&t.fill!==!1}function $X(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!Ht(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function WX(t,e,n){const r=KX(t);if(ge(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Ht(s)&&Math.floor(s)===s?HX(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function HX(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function qX(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ge(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function GX(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:ge(t)?r=t.value:r=e.getBaseValue(),r}function KX(t){const e=t.options,n=e.fill;let r=de(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function QX(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=YX(e,n);a.push(aD({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let u=c.start;u<=c.end;u++)XX(s,o[u],a)}return new qs({points:s,options:{}})}function YX(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function XX(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=JX(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function JX(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const u=i[c],d=o[u.start][n],m=o[u.end][n];if(Zr(s,d,m)){a=s===d,l=s===m;break}}return{first:a,last:l,point:r}}class lD{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:We},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function ZX(t){const{chart:e,fill:n,line:r}=t;if(Ht(n))return eJ(e,n);if(n==="stack")return QX(t);if(n==="shape")return!0;const s=tJ(t);return s instanceof lD?s:aD(s,r)}function eJ(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function tJ(t){return(t.scale||{}).getPointPositionForValue?rJ(t):nJ(t)}function nJ(t){const{scale:e={},fill:n}=t,r=qX(n,e);if(Ht(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function rJ(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=GX(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new lD({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function jg(t,e,n){const r=ZX(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,d=c.backgroundColor,{above:m=d,below:p=d}=u||{},g=s.getDatasetMeta(i),v=HN(s,g);r&&o.points.length&&(Fm(t,n),sJ(t,{line:o,target:r,above:m,below:p,area:n,scale:a,axis:l,clip:v}),Um(t))}function sJ(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=i;i!==s&&(c==="x"?($S(t,r,o.top),Og(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),$S(t,r,o.bottom)):c==="y"&&(WS(t,r,o.left),Og(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),WS(t,r,o.right),u=s)),Og(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function $S(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],d=s[Wm(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function WS(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],d=s[Wm(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,d.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Og(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=zX(n,r,s);for(const{source:c,target:u,start:d,end:m}of l){const{style:{backgroundColor:p=i}={}}=c,g=r!==!0;t.save(),t.fillStyle=p,iJ(t,o,a,g&&B0(s,d,m)),t.beginPath();const v=!!n.pathSegment(t,c);let _;if(g){v?t.closePath():HS(t,r,m,s);const w=!!r.pathSegment(t,u,{move:v,reverse:!0});_=v&&w,_||HS(t,r,d,s)}t.closePath(),t.fill(_?"evenodd":"nonzero"),t.restore()}}function iJ(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,u,d;i==="x"?(l=o,c=s.top,u=a,d=s.bottom):(l=s.left,c=o,u=s.right,d=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),d=Math.min(d,n.bottom)),t.rect(l,c,u-l,d-c),t.clip()}}function HS(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var oJ={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof qs&&(l={visible:t.isDatasetVisible(o),index:o,fill:WX(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=$X(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&jg(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;BS(i)&&jg(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!BS(r)||n.drawTime!=="beforeDatasetDraw"||jg(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const qS=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},aJ=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class GS extends vs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Oe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Bt(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=qS(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let d=e;i.textAlign="left",i.textBaseline="middle";let m=-1,p=-u;return this.legendItems.forEach((g,v)=>{const _=r+n/2+i.measureText(g.text).width;(v===0||c[c.length-1]+_+2*a>o)&&(d+=u,c[c.length-(v>0?0:1)]=0,p+=u,m++),l[v]={left:0,top:p,row:m,width:_,height:s},c[c.length-1]+=_+a}),d}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,m=0,p=0,g=0,v=0;return this.legendItems.forEach((_,w)=>{const{itemWidth:x,itemHeight:b}=lJ(r,n,i,_,s);w>0&&p+b+2*a>u&&(d+=m+a,c.push({width:m,height:p}),g+=m+a,v++,m=p=0),l[w]={left:g,top:p,col:v,width:x,height:b},m=Math.max(m,x),p+=b+a}),d+=m,c.push({width:m,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=_a(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=Lt(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Lt(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Lt(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Lt(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Fm(e,this),this._draw(),Um(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=nt.color,l=_a(e.rtl,this.left,this.width),c=Bt(o.font),{padding:u}=o,d=c.size,m=d/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:v,itemHeight:_}=qS(o,d),w=function(N,S,k){if(isNaN(g)||g<=0||isNaN(v)||v<0)return;s.save();const E=de(k.lineWidth,1);if(s.fillStyle=de(k.fillStyle,a),s.lineCap=de(k.lineCap,"butt"),s.lineDashOffset=de(k.lineDashOffset,0),s.lineJoin=de(k.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=de(k.strokeStyle,a),s.setLineDash(de(k.lineDash,[])),o.usePointStyle){const A={radius:v*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:E},D=l.xPlus(N,g/2),j=S+m;DN(s,A,D,j,o.pointStyleWidth&&g)}else{const A=S+Math.max((d-v)/2,0),D=l.leftForLtr(N,g),j=wa(k.borderRadius);s.beginPath(),Object.values(j).some(R=>R!==0)?Af(s,{x:D,y:A,w:g,h:v,radius:j}):s.rect(D,A,g,v),s.fill(),E!==0&&s.stroke()}s.restore()},x=function(N,S,k){su(s,k.text,N,S+_/2,c,{strikethrough:k.hidden,textAlign:l.textAlign(k.textAlign)})},b=this.isHorizontal(),I=this._computeTitleHeight();b?p={x:Lt(i,this.left+u,this.right-r[0]),y:this.top+u+I,line:0}:p={x:this.left+u,y:Lt(i,this.top+I+u,this.bottom-n[0].height),line:0},UN(this.ctx,e.textDirection);const C=_+u;this.legendItems.forEach((N,S)=>{s.strokeStyle=N.fontColor,s.fillStyle=N.fontColor;const k=s.measureText(N.text).width,E=l.textAlign(N.textAlign||(N.textAlign=o.textAlign)),A=g+m+k;let D=p.x,j=p.y;l.setWidth(this.width),b?S>0&&D+A+u>this.right&&(j=p.y+=C,p.line++,D=p.x=Lt(i,this.left+u,this.right-r[p.line])):S>0&&j+C>this.bottom&&(D=p.x=D+n[p.line].width+u,p.line++,j=p.y=Lt(i,this.top+I+u,this.bottom-n[p.line].height));const R=l.x(D);if(w(R,j,N),D=VK(E,D+g+m,b?D+A:this.right,e.rtl),x(l.x(D),j,N),b)p.x+=A+u;else if(typeof N.text!="string"){const z=c.lineHeight;p.y+=cD(N,z)+u}else p.y+=C}),zN(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Bt(n.font),s=qn(n.padding);if(!n.display)return;const i=_a(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,d=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+c,d=Lt(e.align,d,this.right-m);else{const g=this.columnSizes.reduce((v,_)=>Math.max(v,_.height),0);u=c+Lt(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const p=Lt(a,d,d+m);o.textAlign=i.textAlign(Tw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,su(o,n.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,n=Bt(e.font),r=qn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Zr(e,this.left,this.right)&&Zr(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Zr(e,s.left,s.left+s.width)&&Zr(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!dJ(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=aJ(s,r);s&&!i&&Oe(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Oe(n.onHover,[e,r,this],this)}else r&&Oe(n.onClick,[e,r,this],this)}}function lJ(t,e,n,r,s){const i=cJ(r,t,e,n),o=uJ(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function cJ(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function uJ(t,e,n){let r=t;return typeof e.text!="string"&&(r=cD(e,n)),r}function cD(t,e){const n=t.text?t.text.length:0;return e*n}function dJ(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var hJ={id:"legend",_element:GS,start(t,e,n){const r=t.legend=new GS({ctx:t.ctx,options:n,chart:t});Ln.configure(t,r,n),Ln.addBox(t,r)},stop(t){Ln.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Ln.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=qn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class uD extends vs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=ct(r.text)?r.text.length:1;this._padding=qn(r.padding);const i=s*Bt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Lt(a,r,i),d=n+e,c=i-r):(o.position==="left"?(u=r+e,d=Lt(a,s,n),l=Pe*-.5):(u=i-e,d=Lt(a,n,s),l=Pe*.5),c=s-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Bt(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);su(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:Tw(n.align),textBaseline:"middle",translation:[o,a]})}}function fJ(t,e){const n=new uD({ctx:t.ctx,options:e,chart:t});Ln.configure(t,n,e),Ln.addBox(t,n),t.titleBlock=n}var mJ={id:"title",_element:uD,start(t,e,n){fJ(t,n)},stop(t){const e=t.titleBlock;Ln.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Ln.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Hl={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=O0(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function fr(t,e){return e&&(ct(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ur(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function pJ(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function KS(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Bt(e.bodyFont),c=Bt(e.titleFont),u=Bt(e.footerFont),d=i.length,m=s.length,p=r.length,g=qn(e.padding);let v=g.height,_=0,w=r.reduce((I,C)=>I+C.before.length+C.lines.length+C.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,d&&(v+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),w){const I=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=p*I+(w-p)*l.lineHeight+(w-1)*e.bodySpacing}m&&(v+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let x=0;const b=function(I){_=Math.max(_,n.measureText(I).width+x)};return n.save(),n.font=c.string,Ce(t.title,b),n.font=l.string,Ce(t.beforeBody.concat(t.afterBody),b),x=e.displayColors?o+2+e.boxPadding:0,Ce(r,I=>{Ce(I.before,b),Ce(I.lines,b),Ce(I.after,b)}),x=0,n.font=u.string,Ce(t.footer,b),n.restore(),_+=g.width,{width:_,height:v}}function gJ(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function yJ(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function vJ(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),yJ(c,t,e,n)&&(c="center"),c}function QS(t,e,n){const r=n.yAlign||e.yAlign||gJ(t,n);return{xAlign:n.xAlign||e.xAlign||vJ(t,e,n,r),yAlign:r}}function xJ(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function wJ(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function YS(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:d,bottomLeft:m,bottomRight:p}=wa(o);let g=xJ(e,a);const v=wJ(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,m)+s:a==="right"&&(g+=Math.max(d,p)+s),{x:zt(g,0,r.width-e.width),y:zt(v,0,r.height-e.height)}}function Fd(t,e,n){const r=qn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function XS(t){return fr([],Ur(t))}function _J(t,e,n){return No(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function JS(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const dD={beforeTitle:Vr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Vr,beforeBody:Vr,beforeLabel:Vr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Se(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Vr,afterBody:Vr,beforeFooter:Vr,footer:Vr,afterFooter:Vr};function nn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?dD[e].call(n,r):s}class $0 extends vs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new qN(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=_J(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=nn(r,"beforeTitle",this,e),i=nn(r,"title",this,e),o=nn(r,"afterTitle",this,e);let a=[];return a=fr(a,Ur(s)),a=fr(a,Ur(i)),a=fr(a,Ur(o)),a}getBeforeBody(e,n){return XS(nn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Ce(e,i=>{const o={before:[],lines:[],after:[]},a=JS(r,i);fr(o.before,Ur(nn(a,"beforeLabel",this,i))),fr(o.lines,nn(a,"label",this,i)),fr(o.after,Ur(nn(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return XS(nn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=nn(r,"beforeFooter",this,e),i=nn(r,"footer",this,e),o=nn(r,"afterFooter",this,e);let a=[];return a=fr(a,Ur(s)),a=fr(a,Ur(i)),a=fr(a,Ur(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(pJ(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,m)=>e.filter(u,d,m,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),Ce(a,u=>{const d=JS(e.callbacks,u);s.push(nn(d,"labelColor",this,u)),i.push(nn(d,"labelPointStyle",this,u)),o.push(nn(d,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Hl[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=KS(this,r),c=Object.assign({},a,l),u=QS(this.chart,r,c),d=YS(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=wa(a),{x:m,y:p}=e,{width:g,height:v}=n;let _,w,x,b,I,C;return i==="center"?(I=p+v/2,s==="left"?(_=m,w=_-o,b=I+o,C=I-o):(_=m+g,w=_+o,b=I-o,C=I+o),x=_):(s==="left"?w=m+Math.max(l,u)+o:s==="right"?w=m+g-Math.max(c,d)-o:w=this.caretX,i==="top"?(b=p,I=b-o,_=w-o,x=w+o):(b=p+v,I=b+o,_=w+o,x=w-o),C=b),{x1:_,x2:w,x3:x,y1:b,y2:I,y3:C}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=_a(r.rtl,this.x,this.width);for(e.x=Fd(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Bt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=Bt(i.bodyFont),d=Fd(this,"left",i),m=s.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+p;if(i.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=s.leftForLtr(m,c)+c/2,w=g+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,V0(e,v,_,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,V0(e,v,_,w)}else{e.lineWidth=ge(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=s.leftForLtr(m,c),_=s.leftForLtr(s.xPlus(m,1),c-2),w=wa(o.borderRadius);Object.values(w).some(x=>x!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Af(e,{x:v,y:g,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Af(e,{x:_,y:g+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,g,c,l),e.strokeRect(v,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(_,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=Bt(r.bodyFont);let m=d.lineHeight,p=0;const g=_a(r.rtl,this.x,this.width),v=function(k){n.fillText(k,g.x(e.x+p),e.y+m/2),e.y+=m+i},_=g.textAlign(o);let w,x,b,I,C,N,S;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Fd(this,_,r),n.fillStyle=r.bodyColor,Ce(this.beforeBody,v),p=a&&_!=="right"?o==="center"?c/2+u:c+2+u:0,I=0,N=s.length;I<N;++I){for(w=s[I],x=this.labelTextColors[I],n.fillStyle=x,Ce(w.before,v),b=w.lines,a&&b.length&&(this._drawColorBox(n,e,I,g,r),m=Math.max(d.lineHeight,l)),C=0,S=b.length;C<S;++C)v(b[C]),m=d.lineHeight;Ce(w.after,v)}p=0,m=d.lineHeight,Ce(this.afterBody,v),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=_a(r.rtl,this.x,this.width);for(e.x=Fd(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Bt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:m,bottomLeft:p,bottomRight:g}=wa(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-m,l),n.quadraticCurveTo(a+c,l,a+c,l+m),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Hl[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=KS(this,e),l=Object.assign({},o,this._size),c=QS(n,e,l),u=YS(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=qn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),UN(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),zN(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Cf(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Cf(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Hl[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}Y($0,"positioners",Hl);var bJ={id:"tooltip",_element:$0,positioners:Hl,afterInit(t,e,n){n&&(t.tooltip=new $0({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:dD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const TJ=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function kJ(t,e,n,r){const s=t.indexOf(e);if(s===-1)return TJ(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const SJ=(t,e)=>t===null?null:zt(Math.round(t),0,e);function ZS(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class W0 extends Za{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Se(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:kJ(r,e,de(n,e),this._addedLabels),SJ(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return ZS.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Y(W0,"id","category"),Y(W0,"defaults",{ticks:{callback:ZS}});function EJ(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:m}=t,p=i||1,g=u-1,{min:v,max:_}=e,w=!Se(o),x=!Se(a),b=!Se(c),I=(_-v)/(d+1);let C=Yk((_-v)/g/p)*p,N,S,k,E;if(C<1e-14&&!w&&!x)return[{value:v},{value:_}];E=Math.ceil(_/C)-Math.floor(v/C),E>g&&(C=Yk(E*C/g/p)*p),Se(l)||(N=Math.pow(10,l),C=Math.ceil(C*N)/N),s==="ticks"?(S=Math.floor(v/C)*C,k=Math.ceil(_/C)*C):(S=v,k=_),w&&x&&i&&IK((a-o)/i,C/1e3)?(E=Math.round(Math.min((a-o)/C,u)),C=(a-o)/E,S=o,k=a):b?(S=w?o:S,k=x?a:k,E=c-1,C=(k-S)/E):(E=(k-S)/C,gc(E,Math.round(E),C/1e3)?E=Math.round(E):E=Math.ceil(E));const A=Math.max(Xk(C),Xk(S));N=Math.pow(10,Se(l)?A:l),S=Math.round(S*N)/N,k=Math.round(k*N)/N;let D=0;for(w&&(m&&S!==o?(n.push({value:o}),S<o&&D++,gc(Math.round((S+D*C)*N)/N,o,eE(o,I,t))&&D++):S<o&&D++);D<E;++D){const j=Math.round((S+D*C)*N)/N;if(x&&j>a)break;n.push({value:j})}return x&&m&&k!==a?n.length&&gc(n[n.length-1].value,a,eE(a,I,t))?n[n.length-1].value=a:n.push({value:a}):(!x||k===a)&&n.push({value:k}),n}function eE(t,e,{horizontal:n,minRotation:r}){const s=Jr(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class CJ extends Za{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Se(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Ar(s),c=Ar(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=EJ(s,i);return e.bounds==="ticks"&&AK(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Sw(e,this.chart.options.locale,this.options.ticks.format)}}class H0 extends CJ{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ht(e)?e:0,this.max=Ht(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Jr(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Y(H0,"id","linear"),Y(H0,"defaults",{ticks:{callback:NN.formatters.numeric}});const Hm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},on=Object.keys(Hm);function tE(t,e){return t-e}function nE(t,e){if(Se(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Ht(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(tu(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function rE(t,e,n,r){const s=on.length;for(let i=on.indexOf(t);i<s-1;++i){const o=Hm[on[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return on[i]}return on[s-1]}function PJ(t,e,n,r,s){for(let i=on.length-1;i>=on.indexOf(n);i--){const o=on[i];if(Hm[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return on[n?on.indexOf(n):0]}function IJ(t){for(let e=on.indexOf(t)+1,n=on.length;e<n;++e)if(Hm[on[e]].common)return on[e]}function sE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=bw(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function AJ(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function iE(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:AJ(t,r,s,n)}class Mf extends Za{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new hY._date(e.adapters.date);s.init(n),pc(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:nE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ht(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Ht(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=jK(s,i,o);return this._unit=n.unit||(r.autoSkip?rE(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):PJ(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:IJ(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),iE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=zt(n,0,o),r=zt(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||rE(i.minUnit,n,r,this._getLabelCapacity(n)),a=de(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=tu(l)||l===!0,u={};let d=n,m,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(m=d,p=0;m<r;m=+e.add(m,a,o),p++)sE(u,m,g);return(m===r||s.bounds==="ticks"||p===1)&&sE(u,m,g),Object.keys(u).sort(tE).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Oe(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],m=r[n],p=c&&d&&m&&m.major;return this._adapter.format(e,s||(p?d:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Jr(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,iE(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(nE(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return IN(e.sort(tE))}}Y(Mf,"id","time"),Y(Mf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ud(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=eo(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=eo(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class oE extends Mf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ud(n,this.min),this._tableRange=Ud(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Ud(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Ud(this._table,r*this._tableRange+this._minPos,!0)}}Y(oE,"id","timeseries"),Y(oE,"defaults",Mf.defaults);const hD="label";function aE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function RJ(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function fD(t,e){t.labels=e}function mD(t,e,n=hD){const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function NJ(t,e=hD){const n={labels:[],datasets:[]};return fD(n,t.labels),mD(n,t.datasets,e),n}function DJ(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...m}=t,p=M.useRef(null),g=M.useRef(null),v=()=>{p.current&&(g.current=new $m(p.current,{type:o,data:NJ(a,i),options:l&&{...l},plugins:c}),aE(e,g.current))},_=()=>{aE(e,null),g.current&&(g.current.destroy(),g.current=null)};return M.useEffect(()=>{!s&&g.current&&l&&RJ(g.current,l)},[s,l]),M.useEffect(()=>{!s&&g.current&&fD(g.current.config.data,a.labels)},[s,a.labels]),M.useEffect(()=>{!s&&g.current&&a.datasets&&mD(g.current.config.data,a.datasets,i)},[s,a.datasets]),M.useEffect(()=>{g.current&&(s?(_(),setTimeout(v)):g.current.update(d))},[s,l,a.labels,a.datasets,d]),M.useEffect(()=>{g.current&&(_(),setTimeout(v))},[o]),M.useEffect(()=>(v(),()=>_()),[]),f.jsx("canvas",{ref:p,role:"img",height:n,width:r,...m,children:u})}const MJ=M.forwardRef(DJ);function Dw(t,e){return $m.register(e),M.forwardRef((n,r)=>f.jsx(MJ,{...n,ref:r,type:t}))}const jJ=Dw("line",gh),OJ=Dw("bar",ph),LJ=Dw("doughnut",Bl);$m.register(W0,H0,xh,qs,wh,Wl,mJ,bJ,hJ,oJ);const VJ=()=>{const{user:t,gameStats:e}=he(),{tasks:n,categories:r}=Dr(),[s,i]=M.useState("7days");if(!t||!e)return null;const o=s==="7days"?7:s==="30days"?30:90,a=oG(new Date,o-1),l=eq({start:a,end:new Date}),c=l.map(C=>n.filter(N=>N.status==="completed"&&N.completedAt&&kf(new Date(N.completedAt),C)).length),u=l.map(C=>n.filter(N=>N.status==="completed"&&N.completedAt&&kf(new Date(N.completedAt),C)).reduce((N,S)=>N+(S.xpReward||0),0)),d=r.map(C=>({name:C.name,count:n.filter(N=>N.categoryId===C.id).length,color:C.color})),m={high:n.filter(C=>C.priority==="high").length,medium:n.filter(C=>C.priority==="medium").length,low:n.filter(C=>C.priority==="low").length},p=n.filter(C=>C.status==="completed").length,g=n.length,v=g>0?Math.round(p/g*100):0,_=Math.round(p/o),w={labels:l.map(C=>er(C,"dd/MM")),datasets:[{label:"Tches compltes",data:c,borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4}]},x={labels:l.map(C=>er(C,"dd/MM")),datasets:[{label:"XP gagne",data:u,backgroundColor:"rgba(168, 85, 247, 0.8)",borderRadius:4}]},b={labels:d.map(C=>C.name),datasets:[{data:d.map(C=>C.count),backgroundColor:d.map(C=>C.color),borderWidth:0}]},I={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[f.jsx(nN,{className:"w-7 h-7 text-primary-500"}),"Statistiques"]}),f.jsx("p",{className:"text-gray-500 mt-1",children:"Suivez votre progression et vos performances"})]}),f.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[{value:"7days",label:"7 jours"},{value:"30days",label:"30 jours"},{value:"90days",label:"90 jours"}].map(({value:C,label:N})=>f.jsx("button",{onClick:()=>i(C),className:X("px-4 py-2 rounded-md text-sm font-medium transition-colors",s===C?"bg-white dark:bg-gray-700 shadow-sm":"text-gray-500"),children:N},C))})]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsx(ut,{icon:f.jsx(lr,{className:"w-6 h-6"}),label:"Total compltes",value:jn(p),color:"primary"}),f.jsx(ut,{icon:f.jsx(vr,{className:"w-6 h-6"}),label:"Taux de compltion",value:`${v}%`,color:"green"}),f.jsx(ut,{icon:f.jsx(R0,{className:"w-6 h-6"}),label:"Moyenne par jour",value:_,color:"purple"}),f.jsx(ut,{icon:f.jsx(dc,{className:"w-6 h-6"}),label:"Plus long streak",value:`${e.longestStreak} jours`,color:"orange"})]}),f.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[f.jsxs(ke,{className:"p-5",children:[f.jsx("div",{className:"flex items-center justify-between mb-4",children:f.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[f.jsx(R0,{className:"w-5 h-5 text-primary-500"}),"Tches compltes"]})}),f.jsx("div",{className:"h-64",children:f.jsx(jJ,{data:w,options:I})})]}),f.jsxs(ke,{className:"p-5",children:[f.jsx("div",{className:"flex items-center justify-between mb-4",children:f.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[f.jsx(Vm,{className:"w-5 h-5 text-purple-500"}),"XP gagne"]})}),f.jsx("div",{className:"h-64",children:f.jsx(OJ,{data:x,options:I})})]}),f.jsxs(ke,{className:"p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(Ci,{className:"w-5 h-5 text-primary-500"}),"Rpartition par catgorie"]}),f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx("div",{className:"w-48 h-48",children:f.jsx(LJ,{data:b,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},cutout:"60%"}})}),f.jsx("div",{className:"flex-1 space-y-2",children:d.map(C=>f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:C.color}}),f.jsx("span",{className:"text-sm",children:C.name})]}),f.jsx("span",{className:"text-sm font-medium",children:C.count})]},C.name))})]})]}),f.jsxs(ke,{className:"p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(vr,{className:"w-5 h-5 text-primary-500"}),"Rpartition par priorit"]}),f.jsx("div",{className:"space-y-4",children:[{label:"Haute",value:m.high,color:"bg-red-500"},{label:"Moyenne",value:m.medium,color:"bg-yellow-500"},{label:"Basse",value:m.low,color:"bg-green-500"}].map(({label:C,value:N,color:S})=>f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("span",{className:"text-sm",children:C}),f.jsx("span",{className:"text-sm font-medium",children:N})]}),f.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:f.jsx("div",{className:X("h-full rounded-full",S),style:{width:`${g>0?N/g*100:0}%`}})})]},C))})]})]}),f.jsxs(ke,{className:"p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(Ir,{className:"w-5 h-5 text-yellow-500"}),"Statistiques de jeu"]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[f.jsx("div",{className:"text-3xl font-bold gradient-text",children:e.level}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Niveau actuel"})]}),f.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[f.jsx("div",{className:"text-3xl font-bold text-purple-500",children:jn(e.totalXP)}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"XP Total"})]}),f.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[f.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:e.achievementsUnlocked.length}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Achievements"})]}),f.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[f.jsx("div",{className:"text-3xl font-bold text-orange-500",children:jn(e.coins)}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Pices"})]})]})]})]})},FJ=()=>{var _;const{user:t,gameStats:e,updateProfile:n,updateAvatar:r}=he(),{tasks:s}=Dr(),[i,o]=M.useState(!1),[a,l]=M.useState(!1),[c,u]=M.useState({username:(t==null?void 0:t.username)||""});if(!t||!e)return null;const d=s.filter(w=>w.status==="completed").length,m=gr.filter(w=>e.achievementsUnlocked.includes(w.id)),p=async()=>{await n(c),o(!1)},g=async w=>{var x;await r({icon:w,type:"default",baseColor:((x=t.avatar)==null?void 0:x.baseColor)||"#6366f1"}),l(!1)},v=m.slice(-4).reverse();return f.jsxs("div",{className:"space-y-6",children:[f.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-accent-gradient-br p-6 text-white",children:[f.jsx("div",{className:"absolute inset-0 bg-black/10"}),f.jsx("div",{className:"absolute -right-16 -top-16 w-48 h-48 bg-white/10 rounded-full"}),f.jsx("div",{className:"absolute -right-8 -bottom-8 w-32 h-32 bg-white/10 rounded-full"}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[f.jsxs("div",{className:"relative group",children:[f.jsx(hw,{config:t.avatar,size:"xl",showLevel:!0,level:e.level}),f.jsx("button",{onClick:()=>l(!0),className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(W7,{className:"w-8 h-8"})})]}),f.jsx("div",{className:"flex-1 text-center sm:text-left",children:i?f.jsxs("div",{className:"space-y-3",children:[f.jsx(xr,{value:c.username,onChange:w=>u({...c,username:w.target.value}),className:"bg-white/20 border-white/30 text-white placeholder-white/50",placeholder:"Nom d'utilisateur"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(Xe,{variant:"secondary",size:"sm",onClick:()=>o(!1),children:"Annuler"}),f.jsxs(Xe,{variant:"primary",size:"sm",onClick:p,children:[f.jsx(iH,{className:"w-4 h-4 mr-1"}),"Sauvegarder"]})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2",children:[f.jsx("h1",{className:"text-2xl font-bold",children:t.username}),e.level>=50&&f.jsx(iN,{className:"w-6 h-6 text-yellow-400"}),f.jsx("button",{onClick:()=>o(!0),className:"p-1 hover:bg-white/20 rounded",children:f.jsx(rH,{className:"w-4 h-4"})})]}),f.jsx("p",{className:"text-white/80 mt-1",children:dw(e.level)}),f.jsxs("p",{className:"text-white/60 text-sm mt-2 flex items-center justify-center sm:justify-start gap-1",children:[f.jsx(Ci,{className:"w-4 h-4"}),"Membre depuis ",er(new Date(t.createdAt),"MMMM yyyy",{locale:Du})]})]})}),f.jsxs("div",{className:"flex gap-4 sm:gap-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:e.level}),f.jsx("p",{className:"text-sm text-white/70",children:"Niveau"})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-2xl font-bold flex items-center justify-center gap-1",children:[f.jsx(dc,{className:"w-5 h-5 text-orange-300"}),e.currentStreak]}),f.jsx("p",{className:"text-sm text-white/70",children:"Streak"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold",children:m.length}),f.jsx("p",{className:"text-sm text-white/70",children:"Trophes"})]})]})]}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[f.jsxs("span",{children:["Niveau ",e.level]}),f.jsxs("span",{children:[jn(e.currentXP)," / ",jn(e.xpToNextLevel)," XP"]})]}),f.jsx("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden",children:f.jsx(ue.div,{initial:{width:0},animate:{width:`${e.currentXP/e.xpToNextLevel*100}%`},className:"h-full bg-white rounded-full",transition:{duration:1}})})]})]})]}),f.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsx(ut,{icon:f.jsx(Vm,{className:"w-6 h-6"}),label:"XP Total",value:jn(e.totalXP),color:"primary"}),f.jsx(ut,{icon:f.jsx(lr,{className:"w-6 h-6"}),label:"Tches compltes",value:d,color:"green"}),f.jsx(ut,{icon:f.jsx(dc,{className:"w-6 h-6"}),label:"Plus long streak",value:`${e.longestStreak} jours`,color:"orange"}),f.jsx(ut,{icon:f.jsx(Ir,{className:"w-6 h-6"}),label:"Achievements",value:`${m.length}/${gr.length}`,color:"yellow"})]}),f.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[f.jsxs(ke,{className:"p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(Ir,{className:"w-5 h-5 text-yellow-500"}),"Achievements rcents"]}),v.length>0?f.jsx("div",{className:"space-y-3",children:v.map(w=>f.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[f.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center text-xl",children:w.icon}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"font-medium",children:w.name}),f.jsx("p",{className:"text-sm text-gray-500",children:w.description})]}),f.jsxs("span",{className:"text-sm text-primary-500",children:["+",w.xpReward," XP"]})]},w.id))}):f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx(Ir,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),f.jsx("p",{children:"Aucun achievement dbloqu"})]})]}),f.jsxs(ke,{className:"p-5",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[f.jsx(cw,{className:"w-5 h-5 text-primary-500"}),"Statistiques de jeu"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pices"}),f.jsxs("span",{className:"font-medium flex items-center gap-1",children:[" ",jn(e.coins)]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Gemmes"}),f.jsxs("span",{className:"font-medium flex items-center gap-1",children:[" ",jn(e.gems)]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Qutes compltes"}),f.jsx("span",{className:"font-medium",children:e.questsCompleted||0})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Streak actuel"}),f.jsxs("span",{className:"font-medium flex items-center gap-1",children:[f.jsx(dc,{className:"w-4 h-4 text-orange-500"}),e.currentStreak," jours"]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Meilleur streak"}),f.jsxs("span",{className:"font-medium",children:[e.longestStreak," jours"]})]})]})]})]}),f.jsx(fc,{isOpen:a,onClose:()=>l(!1),title:"Personnaliser l'avatar",size:"lg",children:f.jsx(pH,{selected:((_=t.avatar)==null?void 0:_.icon)||"",onSelect:g})})]})},UJ=[{name:"Teal",value:"teal",class:"bg-teal-500"},{name:"Blue",value:"blue",class:"bg-blue-500"},{name:"Purple",value:"purple",class:"bg-purple-500"},{name:"Green",value:"green",class:"bg-emerald-500"},{name:"Orange",value:"orange",class:"bg-orange-500"}],zJ=()=>{const{user:t,signOut:e,deleteAccount:n,updateSettings:r}=he(),{exportData:s,importData:i,clearAllData:o}=Dr(),{theme:a,setTheme:l,accentColor:c,setAccentColor:u,soundEnabled:d,toggleSound:m,notificationsEnabled:p,toggleNotifications:g}=ur(),[v,_]=M.useState(!1),[w,x]=M.useState(!1),[b,I]=M.useState(!1),[C,N]=M.useState(""),S=M.useRef(null);if(!t)return null;const k=$=>{l($),Kt.success(`Thme ${$==="dark"?"sombre":$==="light"?"clair":"systme"} activ`)},E=()=>{g(),Kt.success(p?"Notifications dsactives":"Notifications actives")},A=()=>{m(),Kt.success(d?"Sons dsactivs":"Sons activs")},D=()=>{try{const $=s(),J=new Blob([JSON.stringify($,null,2)],{type:"application/json"}),U=URL.createObjectURL(J),q=document.createElement("a");q.href=U,q.download=`questify-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(U),Kt.success("Donnes exportes avec succs !")}catch{Kt.error("Erreur lors de l'export des donnes")}},j=$=>{var q;const J=(q=$.target.files)==null?void 0:q[0];if(!J)return;const U=new FileReader;U.onload=ne=>{var Z;try{const le=(Z=ne.target)==null?void 0:Z.result,ve=JSON.parse(le);ve.tasks||ve.categories?(i(ve),Kt.success("Donnes importes avec succs !")):Kt.error("Format de fichier invalide")}catch{Kt.error("Erreur lors de l'import des donnes")}},U.readAsText(J),S.current&&(S.current.value="")},R=()=>{o(),x(!1),Kt.success("Toutes les donnes ont t supprimes")},z=async()=>{try{await e(),Kt.success("Dconnexion russie")}catch{Kt.error("Erreur lors de la dconnexion")}},H=async()=>{if(C!=="SUPPRIMER"){Kt.error("Veuillez taper SUPPRIMER pour confirmer");return}try{await n(),Kt.success("Compte supprim")}catch{Kt.error("Erreur lors de la suppression du compte")}};return f.jsxs("div",{className:"max-w-2xl mx-auto space-y-6 pb-8",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[f.jsx("div",{className:"p-3 rounded-2xl text-white shadow-lg",style:{background:"linear-gradient(to bottom right, var(--color-accent-gradient-from), var(--color-accent-gradient-to))"},children:f.jsx(lN,{className:"w-6 h-6"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Paramtres"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Personnalisez votre exprience"})]})]}),f.jsxs(ke,{className:"overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:f.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(nH,{className:"w-5 h-5",style:{color:"var(--color-accent-500)"}}),"Apparence"]})}),f.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[f.jsxs("div",{className:"p-4 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[a==="dark"?f.jsx(eH,{className:"w-5 h-5 text-gray-500"}):a==="light"?f.jsx(oH,{className:"w-5 h-5 text-yellow-500"}):f.jsx(Z7,{className:"w-5 h-5 text-gray-500"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Thme"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisissez votre thme prfr"})]})]}),f.jsxs("select",{value:a,onChange:$=>k($.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:border-transparent transition-all cursor-pointer",style:{"--tw-ring-color":"var(--color-accent-500)"},children:[f.jsx("option",{value:"light",children:"Clair"}),f.jsx("option",{value:"dark",children:"Sombre"}),f.jsx("option",{value:"system",children:"Systme"})]})]}),f.jsxs("div",{className:"p-4 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Hn,{className:"w-5 h-5 text-gray-500"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Couleur d'accent"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Personnalisez la couleur principale"})]})]}),f.jsx("div",{className:"flex gap-2",children:UJ.map($=>f.jsx("button",{onClick:()=>{u($.value),Kt.success(`Couleur ${$.name} slectionne`)},className:`w-8 h-8 rounded-full ${$.class} transition-all hover:scale-110 ${c===$.value?"ring-2 ring-offset-2 ring-gray-400 dark:ring-offset-gray-800":""}`,title:$.name},$.value))})]})]})]}),f.jsxs(ke,{className:"overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:f.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(jk,{className:"w-5 h-5",style:{color:"var(--color-accent-500)"}}),"Notifications & Sons"]})}),f.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[f.jsxs("div",{className:"p-4 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[p?f.jsx(jk,{className:"w-5 h-5",style:{color:"var(--color-accent-500)"}}):f.jsx(B7,{className:"w-5 h-5 text-gray-400"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Notifications"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Recevoir des rappels et alertes"})]})]}),f.jsxs("button",{onClick:E,className:"relative w-14 h-8 rounded-full transition-colors duration-200",style:{backgroundColor:p?"var(--color-accent-500)":void 0},children:[!p&&f.jsx("span",{className:"absolute inset-0 rounded-full bg-gray-300 dark:bg-gray-600"}),f.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md transition-transform duration-200 ${p?"translate-x-6":"translate-x-0"}`})]})]}),f.jsxs("div",{className:"p-4 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[d?f.jsx(lH,{className:"w-5 h-5",style:{color:"var(--color-accent-500)"}}):f.jsx(cH,{className:"w-5 h-5 text-gray-400"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Effets sonores"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sons lors des actions"})]})]}),f.jsxs("button",{onClick:A,className:"relative w-14 h-8 rounded-full transition-colors duration-200",style:{backgroundColor:d?"var(--color-accent-500)":void 0},children:[!d&&f.jsx("span",{className:"absolute inset-0 rounded-full bg-gray-300 dark:bg-gray-600"}),f.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md transition-transform duration-200 ${d?"translate-x-6":"translate-x-0"}`})]})]})]})]}),f.jsxs(ke,{className:"overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:f.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(Ok,{className:"w-5 h-5",style:{color:"var(--color-accent-500)"}}),"Donnes"]})}),f.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[f.jsxs("button",{onClick:D,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Ok,{className:"w-5 h-5 text-gray-500"}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Exporter les donnes"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tlcharger une sauvegarde de vos donnes"})]})]}),f.jsx(Mn,{className:"w-5 h-5 text-gray-400"})]}),f.jsxs("label",{className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(aH,{className:"w-5 h-5 text-gray-500"}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Importer des donnes"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Restaurer depuis une sauvegarde"})]})]}),f.jsx("span",{className:"text-sm text-accent font-medium",children:"Choisir un fichier"}),f.jsx("input",{ref:S,type:"file",accept:".json",onChange:j,className:"hidden"})]}),f.jsxs("button",{onClick:()=>x(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors group",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(_f,{className:"w-5 h-5 text-red-500"}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-red-600 dark:text-red-400",children:"Effacer les donnes"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Supprimer toutes les tches et catgories"})]})]}),f.jsx(Mn,{className:"w-5 h-5 text-red-400"})]})]})]}),f.jsxs(ke,{className:"overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:f.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(wg,{className:"w-5 h-5 text-teal-500"}),"Compte"]})}),f.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[f.jsxs("button",{onClick:()=>I(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(wg,{className:"w-5 h-5 text-gray-500"}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Scurit"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Grer les options de scurit"})]})]}),f.jsx(Mn,{className:"w-5 h-5 text-gray-400"})]}),f.jsxs("button",{onClick:z,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(oN,{className:"w-5 h-5 text-gray-500"}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Se dconnecter"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Vous serez dconnect de ce compte"})]})]}),f.jsx(Mn,{className:"w-5 h-5 text-gray-400"})]}),f.jsxs("button",{onClick:()=>_(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Lk,{className:"w-5 h-5 text-red-500"}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-red-600 dark:text-red-400",children:"Supprimer le compte"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cette action est irrversible"})]})]}),f.jsx(Mn,{className:"w-5 h-5 text-red-400"})]})]})]}),f.jsxs(ke,{className:"overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700/50",children:f.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(Y7,{className:"w-5 h-5 text-accent"})," propos"]})}),f.jsx("div",{className:"p-4 flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-gradient-br flex items-center justify-center",children:f.jsx(Hn,{className:"w-5 h-5 text-white"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Version"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Questify v1.0.0"})]})]})})]}),f.jsx(fc,{isOpen:w,onClose:()=>x(!1),title:"Effacer toutes les donnes",size:"sm",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl",children:[f.jsx(Mk,{className:"w-6 h-6 text-yellow-500 flex-shrink-0"}),f.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Cette action supprimera toutes vos tches et catgories. Cette action est irrversible."})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(Xe,{variant:"secondary",className:"flex-1",onClick:()=>x(!1),children:"Annuler"}),f.jsxs(Xe,{variant:"danger",className:"flex-1",onClick:R,children:[f.jsx(_f,{className:"w-4 h-4 mr-2"}),"Effacer tout"]})]})]})}),f.jsx(fc,{isOpen:v,onClose:()=>{_(!1),N("")},title:"Supprimer le compte",size:"sm",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[f.jsx(Mk,{className:"w-6 h-6 text-red-500 flex-shrink-0"}),f.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Cette action est permanente et irrversible. Toutes vos donnes seront supprimes."})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Tapez ",f.jsx("span",{className:"font-bold text-red-500",children:"SUPPRIMER"})," pour confirmer"]}),f.jsx("input",{type:"text",value:C,onChange:$=>N($.target.value),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"SUPPRIMER"})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(Xe,{variant:"secondary",className:"flex-1",onClick:()=>{_(!1),N("")},children:"Annuler"}),f.jsxs(Xe,{variant:"danger",className:"flex-1",onClick:H,disabled:C!=="SUPPRIMER",children:[f.jsx(Lk,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})}),f.jsx(fc,{isOpen:b,onClose:()=>I(!1),title:"Scurit",size:"md",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx(rN,{className:"w-5 h-5 text-green-500"}),f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Connexion scurise"})]}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 ml-8",children:"Votre compte est protg par l'authentification Google."})]}),f.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx(wg,{className:"w-5 h-5 text-accent"}),f.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Donnes chiffres"})]}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 ml-8",children:"Vos donnes sont stockes de manire scurise dans Firebase."})]}),f.jsx(Xe,{variant:"secondary",className:"w-full",onClick:()=>I(!1),children:"Fermer"})]})})]})},BJ=({children:t})=>{const{user:e,isLoading:n}=he();return n?f.jsx(pD,{}):e?f.jsx(f.Fragment,{children:t}):f.jsx(Ny,{to:"/auth",replace:!0})},pD=()=>f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-20 h-20 rounded-2xl bg-accent-gradient-br flex items-center justify-center mx-auto mb-4 animate-pulse",children:f.jsx(Hn,{className:"w-10 h-10 text-white"})}),f.jsx("h1",{className:"text-2xl font-bold text-white",children:"Questify"}),f.jsx("p",{className:"text-gray-400 mt-2",children:"Chargement..."})]})});function $J(){const{initializeAuth:t,user:e}=he(),{theme:n,accentColor:r,setIsMobile:s}=ur(),{loadQuests:i}=Pu(),{loadTasks:o,loadCategories:a}=Dr(),[l,c]=M.useState(!1);return M.useEffect(()=>{(async()=>{await t(),c(!0)})()},[t]),M.useEffect(()=>{e&&(async()=>(await a(e.id),await o(e.id),await i(e.id)))()},[e,a,o,i]),M.useEffect(()=>{if(!e)return;const u=()=>{i(e.id)},d=new Date,m=new Date(d);m.setDate(m.getDate()+1),m.setHours(0,0,0,0);const p=m.getTime()-d.getTime(),g=setTimeout(()=>{i(e.id);const v=setInterval(()=>{i(e.id)},24*60*60*1e3);return()=>clearInterval(v)},p);return window.addEventListener("focus",u),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&u()}),()=>{window.removeEventListener("focus",u),clearTimeout(g)}},[e,i]),M.useEffect(()=>{const u=document.documentElement;if(n==="system"){const d=window.matchMedia("(prefers-color-scheme: dark)").matches;u.classList.toggle("dark",d)}else u.classList.toggle("dark",n==="dark")},[n]),M.useEffect(()=>{const u=document.documentElement;u.classList.remove("accent-teal","accent-blue","accent-purple","accent-green","accent-orange"),u.classList.add(`accent-${r}`)},[r]),M.useEffect(()=>{const u=()=>{s(window.innerWidth<1024)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[s]),M.useEffect(()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{console.log("SW registration failed")})})},[]),l?f.jsxs(_5,{children:[f.jsxs(f5,{children:[f.jsx(An,{path:"/auth",element:e?f.jsx(Ny,{to:"/",replace:!0}):f.jsx(mH,{})}),f.jsxs(An,{element:f.jsx(BJ,{children:f.jsx(VH,{})}),children:[f.jsx(An,{path:"/",element:f.jsx(OG,{})}),f.jsx(An,{path:"/tasks",element:f.jsx(LG,{})}),f.jsx(An,{path:"/calendar",element:f.jsx(WG,{})}),f.jsx(An,{path:"/quests",element:f.jsx(HG,{})}),f.jsx(An,{path:"/achievements",element:f.jsx(QG,{})}),f.jsx(An,{path:"/stats",element:f.jsx(VJ,{})}),f.jsx(An,{path:"/profile",element:f.jsx(FJ,{})}),f.jsx(An,{path:"/settings",element:f.jsx(zJ,{})})]}),f.jsx(An,{path:"*",element:f.jsx(Ny,{to:"/",replace:!0})})]}),f.jsx(mL,{position:"top-right",toastOptions:{duration:3e3,style:{background:"var(--toast-bg)",color:"var(--toast-color)",borderRadius:"12px",padding:"12px 16px"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}):f.jsx(pD,{})}Lg.createRoot(document.getElementById("root")).render(f.jsx(hn.StrictMode,{children:f.jsx($J,{})}));
